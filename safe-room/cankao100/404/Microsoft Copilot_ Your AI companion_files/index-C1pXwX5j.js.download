
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="33ffc374-2b68-5eb1-bdaf-d8f8ea4261b5")}catch(e){}}();
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/motion-lib-react-BnrZHMX4.js","assets/vendor-BvnAIcm_.js","assets/build-esm-index-Dgs0Kfls.js","assets/botd.esm-m5kJVUyo.js","assets/i18next-http-backend-esm-index-Bpq-hV22.js","assets/index.es-_XtXTdEl.js","assets/llm-selector-CwBIxeZ6.js","assets/index-ClpwLfCc.js","assets/deferred-Cj0VM27p.js","assets/math.scalar.functions-B0475LkX.js","assets/animationGroup-DLW0Tcg2.js","assets/skeleton-CA0cXtam.js","assets/rawTexture-abQYkLuM.js","assets/easing-D7kNd_5M.js","assets/weightedsound-BuNCnM9n.js","assets/audioEngine-D_hn2btL.js","assets/babylonFileParser.function-CWsVgwsY.js","assets/outlineRenderer-B0htFhEj.js","assets/discBuilder-BQ9uIUjh.js","assets/backgroundMaterial-CR9mV20Y.js","assets/standardMaterial-Dy5MgpG2.js","assets/cubeTexture-NX253cQC.js","assets/abstractEngine.cubeTexture-CYt2cydh.js","assets/lazy-CVvGDXWd.js","assets/ray-x-MNTnMe.js","assets/dds-BDBgamLs.js","assets/dumpTools-B9aLS7Ou.js","assets/khronosTextureContainer2-DelRBOrb.js","assets/workerPool-H9Ji3mCo.js","assets/assetContainer-BYSukNeO.js","assets/shaderMaterial-0fEv1Bs0.js","assets/timer-sKB4fwvg.js","assets/math.scalar-DywNILVf.js","assets/logDepthDeclaration-BS_tU5tp.js","assets/fogFragmentDeclaration-DJ57eX4T.js","assets/sceneUboDeclaration-RcL2_ju_.js","assets/meshUboDeclaration-ByLF7_ky.js","assets/logDepthVertex-BbMUdq60.js","assets/helperFunctions-5-lTHHSH.js","assets/clipPlaneFragment-C-UWi5da.js","assets/logDepthDeclaration-DDhTkbXC.js","assets/fogFragmentDeclaration-C2W16K3m.js","assets/sceneUboDeclaration-CzeXID4y.js","assets/meshUboDeclaration-xVmHEC8v.js","assets/helperFunctions-DTh20Ftr.js","assets/clipPlaneVertex-0sOTpYbg.js","assets/logDepthVertex-Dv_iQim4.js","assets/pointLight-BC-kZ2Ac.js","assets/fresnelFunction-pqxV5Y3D.js","assets/proceduralTexture-CUlnkX0_.js","assets/abstractAudioBus-Bn8dWuW5.js","assets/webAudioBaseSubGraph-D_e-38D5.js","assets/abstractSoundInstance-CLPL0Er6.js","assets/abstractSoundSource-D9Z0I3Q_.js","assets/webAudioBus-CTbVWmFq.js","assets/spatialWebAudio-C1Wxj44b.js","assets/webAudioMainBus-DnLXS-Nq.js","assets/webAudioStaticSound-BxFYRkeS.js","assets/webAudioStreamingSound-DblBFkSq.js","assets/webAudioSoundSource-8jG0aKGN.js","assets/webgpuEngine-CqwIpFml.js","assets/bakedVertexAnimation-C-0_Br_4.js","assets/instancesDeclaration-0mip-DTH.js","assets/fresnelFunction-BWMNKCbs.js","assets/decalFragment-CL7YUXZ-.js","assets/bonesVertex-BwTZA1t6.js","assets/morphTargetsVertex-7qGw0J_g.js","assets/asyncLock-DzePwHAN.js","assets/engine.multiRender-BLzd0Too.js","assets/environmentTextureTools-ChaYNcdY.js","assets/engine.multiRender-Cw4ApKN7.js","assets/flowGraphParser-H4Wfdyp4.js","assets/flowGraphRichTypes-B4-N5UB1.js","assets/flowGraphJsonPointerParserBlock-CGoigKsS.js","assets/flowGraphCachedOperationBlock-CTGEjYka.js","assets/flowGraphConsoleLogBlock-mgcmy94P.js","assets/flowGraphBranchBlock-DbWR-ptR.js","assets/flowGraphDoNBlock-BRHkMbxy.js","assets/flowGraphForLoopBlock-BIyQfxiT.js","assets/flowGraphThrottleBlock-CHSgSKoJ.js","assets/flowGraphMultiGateBlock-DOtyUj2R.js","assets/flowGraphSwitchBlock-WAP4iYuT.js","assets/flowGraphWaitAllBlock-BSEsO4Zi.js","assets/flowGraphCounterBlock-CfFg1GX1.js","assets/flowGraphWhileLoopBlock-1sUOJd2z.js","assets/flowGraphDebounceBlock-B72arf-S.js","assets/flowGraphFlipFlopBlock-pFtokXSr.js","assets/flowGraphSequenceBlock-BNYrVDwh.js","assets/flowGraphSetDelayBlock-CzJdgz1m.js","assets/flowGraphCancelDelayBlock-4njkjG1r.js","assets/flowGraphPlayAnimationBlock-BnHQKBaw.js","assets/flowGraphStopAnimationBlock-CYi2AKHx.js","assets/flowGraphPauseAnimationBlock-3l32F16R.js","assets/flowGraphInterpolationBlock-BRch-ufM.js","assets/flowGraphEasingBlock-C0c0BFus.js","assets/flowGraphBezierCurveEasingBlock-DsSViVIa.js","assets/flowGraphConditionalDataBlock-CzD6ihT3.js","assets/flowGraphGetVariableBlock-BwXQdHEi.js","assets/flowGraphSetVariableBlock-Di2j7axj.js","assets/flowGraphTransformCoordinatesSystemBlock-Bil3knrS.js","assets/flowGraphGetPropertyBlock-Brpl5x6Y.js","assets/flowGraphSetPropertyBlock-CyOXVZI_.js","assets/flowGraphConstantBlock-BE48dbOn.js","assets/flowGraphGetAssetBlock-BZWErPcQ.js","assets/flowGraphDataSwitchBlock-Bq68BhI8.js","assets/flowGraphMathBlocks-CfxGcCmF.js","assets/flowGraphBinaryOperationBlock-CyzefsPz.js","assets/flowGraphUnaryOperationBlock-BKZKinRF.js","assets/flowGraphMathCombineExtractBlocks-CDlERyvp.js","assets/flowGraphMatrixMathBlocks-B1Msf7uU.js","assets/flowGraphVectorMathBlocks-pgqnhrRn.js","assets/flowGraphTypeToTypeBlocks-2Al8uGWV.js","assets/flowGraphContextBlock-BQsdrdhZ.js","assets/flowGraphArrayIndexBlock-BdDgKGXs.js","assets/flowGraphCodeExecutionBlock-B4cwP8Bo.js","assets/flowGraphIndexOfBlock-Dfae-9rh.js","assets/flowGraphFunctionReferenceBlock-D2AjjJ58.js","assets/flowGraphMeshPickEventBlock-3EGj8BJR.js","assets/flowGraphSceneReadyEventBlock-BYv9EsFh.js","assets/flowGraphReceiveCustomEventBlock-D-2ksoV1.js","assets/flowGraphSendCustomEventBlock-CLZI7cty.js","assets/flowGraphSceneTickEventBlock-DWgMqF_v.js","assets/flowGraphPointerOutEventBlock-B1xkQb3H.js","assets/flowGraphPointerOverEventBlock-DXvFJccr.js","assets/spotLight-CzrGIqlj.js","assets/glowMapGeneration.fragment-BcimnrD1.js","assets/glowMapGeneration.vertex-DpIjL5Zi.js","assets/glowMapGeneration.fragment-B8VAS16z.js","assets/glowMapGeneration.vertex-CPuXRurO.js","assets/glowMapMerge.fragment-BCMp6Xi4.js","assets/glowMapMerge.vertex-CE70kLcC.js","assets/glowBlurPostProcess.fragment-DhWYomo6.js","assets/glowMapMerge.fragment-DAocihYK.js","assets/glowMapMerge.vertex-DpiuLQUa.js","assets/glowBlurPostProcess.fragment-DJ9h689s.js","assets/shadowGeneratorSceneComponent-DAr78XTL.js","assets/shadowMap.fragment-DFMgcgsb.js","assets/packingFunctions-DYPdwWsM.js","assets/shadowMapFragment-T6Y6iinb.js","assets/shadowMap.vertex-CQu8ETbm.js","assets/shadowMapVertexMetric-wJ_8KeD4.js","assets/depthBoxBlur.fragment-B-A29W4T.js","assets/shadowMapFragmentSoftTransparentShadow-D9xSZunr.js","assets/shadowMap.fragment-Du5NpL4j.js","assets/shadowMapFragment-B2qyb10E.js","assets/shadowMap.vertex-D7W4edBM.js","assets/shadowMapVertexMetric-BTvJXqGe.js","assets/depthBoxBlur.fragment-qFTKenew.js","assets/shadowMapFragmentSoftTransparentShadow-rE7fEo1P.js","assets/rectAreaLight-D4qG6-44.js","assets/thinInstanceMesh-9AjGughE.js","assets/lightFragment-jftRxpmK.js","assets/lightFragment-VB0hWbBU.js","assets/iesTextureLoader-CLk7ERSW.js","assets/hdrCubeTexture-RxuDgyt-.js","assets/iblCdfGenerator-BOp-l_Mk.js","assets/hdr-BfPicKNZ.js","assets/background.vertex-CN9fO8rf.js","assets/backgroundUboDeclaration-BBBL8D83.js","assets/shadowsVertex-CMSNo9J4.js","assets/background.fragment-BP6vS7lH.js","assets/lightsFragmentFunctions-B2wglUfB.js","assets/background.vertex-BM6Wl21P.js","assets/backgroundUboDeclaration-CyiFySw_.js","assets/shadowsVertex-5p-qxbao.js","assets/background.fragment-Dx8b6ii4.js","assets/lightsFragmentFunctions-D2_drVpT.js","assets/color.fragment-Cjcz9h4R.js","assets/color.vertex-DDr8OWy3.js","assets/vertexColorMixing-D_w0tAmj.js","assets/pbr.vertex-Dyc6-rDU.js","assets/harmonicsFunctions-Dqm4mj-h.js","assets/samplerVertexImplementation-BIJ_Q7EJ.js","assets/mainUVVaryingDeclaration-Dl28gRMC.js","assets/bumpVertex-CIdOVVha.js","assets/vertexColorMixing-D4JgLTmg.js","assets/pbr.fragment-D_eUUnjZ.js","assets/oitFragment-Dq7DhKTd.js","assets/bumpFragment-CTjpFqDi.js","assets/pbr.vertex-BrHOgbjn.js","assets/samplerVertexImplementation-CCHkI3FQ.js","assets/harmonicsFunctions-_jVfZNob.js","assets/mainUVVaryingDeclaration-BGgOEM07.js","assets/bumpVertex-J0HIxO_P.js","assets/pbr.fragment-COx0Hgci.js","assets/oitFragment-CNKTkZD-.js","assets/bumpFragment-Bly7fCO-.js","assets/shaderLanguage-BjwqUAVi.js","assets/exrTextureLoader-DidV_3Tp.js","assets/ddsTextureLoader-DTFcQlAd.js","assets/envTextureLoader-DRk0pfni.js","assets/ktxTextureLoader-NmQwXmB6.js","assets/tgaTextureLoader-CywooctI.js","assets/hdrTextureLoader-DtMAsBq2.js","assets/basisTextureLoader-DB7MiY9D.js","assets/geometryBufferRenderer-DJbpOhAs.js","assets/rawCubeTexture-jFtcjVHy.js","assets/iblShadowsRenderPipeline-D6JgkMFJ.js","assets/iblCdfGeneratorSceneComponent-CXbB_tah.js","assets/procedural.vertex-DUyTMZ1r.js","assets/procedural.vertex-BrZXDnEw.js","assets/default.fragment-CIFqAO_T.js","assets/defaultUboDeclaration-DnLXT__6.js","assets/default.vertex-QMQEVgIT.js","assets/default.fragment-DcKrbeq9.js","assets/defaultUboDeclaration-DSSPeFO4.js","assets/default.vertex-cIM7nepH.js","assets/dracoDecoder-DA5eKtdv.js","assets/meshoptCompression-EjrbfGcs.js","assets/mesh.vertexData.functions-BXkNVxNr.js","assets/pointsCloudSystem-Bl5-Oihq.js","assets/color.fragment-BOvTWYdV.js","assets/color.vertex-CCBBl8Ev.js","assets/lodCube.fragment-BJ_WRp5s.js","assets/lod.fragment-Dl4njcR3.js","assets/lodCube.fragment-S9blsosb.js","assets/lod.fragment-DHVS5fL9.js","assets/rgbdDecode.fragment-DWztQxDW.js","assets/rgbdEncode.fragment-D0re4oPZ.js","assets/rgbdDecode.fragment-SlhiuLMR.js","assets/rgbdEncode.fragment-C-SNhkPL.js","assets/particles.fragment-6j52Mez2.js","assets/particles.vertex-BEcweY7O.js","assets/particles.fragment-5KoMdtA4.js","assets/particles.vertex-YOEajpJ1.js","assets/postProcessRenderPipelineManagerSceneComponent-DDhhiamx.js","assets/postprocess.vertex-BhOX-0Cw.js","assets/kernelBlur.fragment-svE-H1EV.js","assets/kernelBlurVaryingDeclaration-CyzSCE1_.js","assets/kernelBlur.vertex-hCmuLm_B.js","assets/kernelBlur.fragment-GeM83m3O.js","assets/kernelBlurVaryingDeclaration-BCFxiFVm.js","assets/kernelBlur.vertex-Dq62H1zM.js","assets/pass.fragment-BIOtm-WB.js","assets/passCube.fragment-DnhNKAhz.js","assets/pass.fragment-Bj5A6EYR.js","assets/passCube.fragment-C0_7ATuH.js","assets/vrDistortionCorrection.fragment-yEuyDD14.js","assets/vrDistortionCorrection.fragment-DCYTrH6I.js","assets/depth.fragment-DJmPolWM.js","assets/depth.vertex-YoshwvxK.js","assets/geometry.fragment-DH7vCZFB.js","assets/geometry.vertex-Dqwugls4.js","assets/boundingBoxRenderer.fragment-JS7OzwuK.js","assets/boundingBoxRendererUboDeclaration-EgBCHYe0.js","assets/boundingBoxRenderer.vertex-BxmXOgSO.js","assets/boundingBoxRenderer.fragment-8j37MuZJ.js","assets/boundingBoxRenderer.vertex-TFiOmlwq.js","assets/outline.fragment-CDbyqYJ-.js","assets/outline.vertex-DqnQ3PwX.js","assets/outline.fragment-LXsoDp7f.js","assets/outline.vertex-CwZmFC1G.js","assets/index-BLqv0XCf.js","assets/glTFLoader-N9-xeKAG.js","assets/glTFLoaderExtensionRegistry-B2tX5Bc2.js","assets/objectModelMapping-zYZ5_Plq.js","assets/glTFLoaderAnimation-CqmN2pQ6.js","assets/EXT_lights_image_based-BNQKyPNE.js","assets/EXT_mesh_gpu_instancing-B6rDvjY2.js","assets/EXT_meshopt_compression-DvGOMF6x.js","assets/EXT_texture_webp-D5EkY-TZ.js","assets/EXT_texture_avif-Dw3_BFxP.js","assets/EXT_lights_ies-DlrMnAZ6.js","assets/KHR_draco_mesh_compression-65PBnfrE.js","assets/KHR_lights_punctual-Bi3JuaTb.js","assets/KHR_materials_pbrSpecularGlossiness-B8uPMHoj.js","assets/KHR_materials_unlit-BCbZiPYv.js","assets/KHR_materials_clearcoat-CUd-3hnK.js","assets/KHR_materials_iridescence-C-IhuWhO.js","assets/KHR_materials_anisotropy-DLBAFmRT.js","assets/KHR_materials_emissive_strength-KYzvRjaO.js","assets/KHR_materials_sheen-D_pdydgz.js","assets/KHR_materials_specular-CEQWkj09.js","assets/KHR_materials_ior-Ck46R773.js","assets/KHR_materials_variants-BwZQ8pEk.js","assets/KHR_materials_transmission-5l97NzFu.js","assets/KHR_materials_diffuse_transmission-wQgF9JBQ.js","assets/KHR_materials_volume-CCoxBB6Z.js","assets/KHR_materials_dispersion-OBantw9i.js","assets/EXT_materials_diffuse_roughness-8Gs9z67H.js","assets/KHR_mesh_quantization-DtwoccjO.js","assets/KHR_texture_basisu-BawKlI9Y.js","assets/KHR_texture_transform-CEerLxl1.js","assets/KHR_xmp_json_ld-DUJyF9sn.js","assets/KHR_animation_pointer-CnPT_5Tq.js","assets/MSFT_audio_emitter-BO7dq5ew.js","assets/MSFT_lod-B9o9VMa2.js","assets/MSFT_minecraftMesh-CfHuxoxd.js","assets/MSFT_sRGBFactors-BhS-8T0C.js","assets/KHR_interactivity-DmF8V5ij.js","assets/declarationMapper-D7dIDgbn.js","assets/KHR_node_visibility-BLUGgBWH.js","assets/KHR_node_selectability-5TDJvDm8.js","assets/KHR_node_hoverability-BaHLp1gC.js","assets/ExtrasAsMetadata-CuNkJifS.js","assets/viewer-lib-index-Bm2gbMTB.js","assets/stlFileLoader.metadata-2VxBZznk.js","assets/babylon.inspector.bundle-JXRLaH05.js","assets/index-BFck1C3L.js","assets/bvhFileLoader-CckHeVOD.js","assets/objFileLoader-CMMhL88x.js","assets/stlFileLoader-lGbYpUMh.js","assets/splatFileLoader-C_aOakU_.js","assets/sidebar-settings-DBxpnlXd.js","assets/use-pf-upsell-premium-payflow-enter-BbXextk3.js","assets/settings-pQDCi4Vh.js","assets/voice-options-BGgDqsey.js","assets/voice-selector-DPyIc6lN.js","assets/wallet-schemas-CDMHHx8P.js","assets/utils-CMKieCoe.js","assets/constants-2Jeu7BXb.js","assets/order-details-view-OVHrqWZ8.js","assets/card-info-CJ9uIyKV.js","assets/visa-Bh8dqaXO.js","assets/product-info-Bgvb9ooy.js","assets/pidl-pages-B13tIPiu.js","assets/constants-BnxRz7co.js","assets/variants-selection-screen-CBm-oUfo.js","assets/v4-CtRu48qb.js","assets/index-Chjiymov.js","assets/subtract-5OplvkAS.js","assets/shipping-address-M02UPXtJ.js","assets/tracked-product-settings-Db6JGzWa.js","assets/use-price-tracking-CbOQbfS8.js","assets/buy-button-B-M7jMPE.js","assets/wallet-apis-BPxcGJQ-.js","assets/shopping-telemetry-DZ3iu5TP.js","assets/shopping-utils-CPwvwEM1.js","assets/format-money-5coY0IJJ.js","assets/shopping-api-DPPVYGNm.js","assets/conversion-tracking-disclaimer-B2bIIE28.js","assets/faq-link-DsvLhJTW.js","assets/utils-BIW2T-o-.js","assets/use-ocv-feedback-2lwkQKsv.js","assets/rewards-link-DjsJiItO.js","assets/gift-B06ffbY5.js","assets/alert-LGkx4v2n.js","assets/error-CNxU9P8d.js","assets/mask-wrapper-CUKwHlEU.js","assets/use-set-first-name-6W-BYTZD.js","assets/moon-D3dzcC2y.js","assets/sun-DgYsUpAs.js","assets/task-manager-DyNYVJg0.js","assets/wallet-element-factory-LMcZCMhp.js","assets/disconnect-CR5ou5u6.js","assets/settings-button-DMfMbaAP.js","assets/sidebar-pages-Bq_c0DJy.js","assets/conversations-DCs2p-94.js","assets/door-arrow-left-C6wjXS2l.js","assets/people-add-DAuGwnST.js","assets/rename-D6rWdXQm.js","assets/shield-error-D7dLgYHW.js","assets/use-leave-group-BvWwj5n4.js","assets/people-DxXJzzk4.js","assets/use-tasks-CeVd4aAY.js","assets/code-Dl-L0mr-.js","assets/play-outline-hE_tlnLW.js","assets/use-executable-web-artifacts-hook-CqbEn38N.js","assets/core-DRXlxHeH.js","assets/language-loader-BbqugLqr.js","assets/index-M_tPUWUO.js","assets/sender-share-conversation-modal-BP6k7UAA.js","assets/sender-share-modal-cta-with-social-media-BRtcOyJj.js","assets/subscription-promo-strategy-modal-Bi0Qztbt.js","assets/links-D1aLFVd9.js","assets/apps-ChNTTldW.js","assets/checklist-6uEzgyf4.js","assets/cloud-DXt6R8eq.js","assets/research-C_TkJoAP.js","assets/constants-B2Xedztk.js","assets/dist-esm-index-CknMQCd8.js","assets/appearance-component-interface-KAIxMrfq.js","assets/character-CWoKvrCn.js","assets/use-set-up-babylon-BsmxpFob.js","assets/starter-prompt-category-CtjXYg9P.js","assets/wallet-section-DliBqp7J.js","assets/product-purchase-NOhpvCxT.js","assets/upsell-block-CSJlJKmJ.js","assets/cross-selling-strip-AWMm5GP6.js","assets/price-tracking-block-92CHGJL7.js","assets/use-shopping-telemetry-2FFiufIc.js","assets/composer-auto-complete-ClCLPIoG.js","assets/composer-actions-prompt-suggestions-CJyLcWxA.js","assets/composer-prompt-suggestions-CBP0wYrC.js","assets/composer-file-upload-prompt-suggestions-BAVhRzgI.js","assets/over-task-quota-C1j1z4BC.js","assets/composer-action-frojTvDf.js","assets/computer-use-task-closed-DlL20dIf.js","assets/arrow-export-awG7OyTV.js","assets/arrow-import-B8FQzaPW.js","assets/settings-CMhlz2Y5.js","assets/speed-CEPiGqKk.js","assets/audio-controls-Dlverqqa.js","assets/pause-B8rt9JL6.js","assets/play-CdL7LOLI.js","assets/close-button-B8daVrTs.js","assets/progress-bar-DspBjWlL.js","assets/replay-BxxyIBJy.js","assets/safety-risk-card-D7STei8e.js","assets/use-send-action-command-BJB2L9di.js","assets/add-to-page-CmMIJrGs.js","assets/cross-selling-strip-consumer-DMQJYrnH.js","assets/composer-prompt-review-DZpznBh8.js","assets/biometric-consent-BVuDHn-G.js","assets/daily-briefing-chat-lNc-wUMj.js","assets/dailly-briefing-composer-input-CT4JoSra.js","assets/contract-down-left-BtZ6t2YV.js","assets/reaction-utils-XEyVsAYp.js","assets/composer-sign-in-DQOJCYiZ.js","assets/merge-conversation-checkbox-CxE670B5.js","assets/daily-briefing-composer-player-BzdSpmCT.js","assets/actions-chat-detail-BCA2xT0N.js","assets/arrow-loop-uZbY-SB2.js","assets/panel-right-expand-BZvxt20v.js","assets/new-tab-DeGWh_F7.js","assets/showroom-chat-detail-hPdY-bJk.js","assets/settings-wrapper-DuCL0PKQ.js","assets/dismiss-strong-CxV0eNTr.js","assets/group-chats-telemetry-C4H8HOG_.js","assets/media-viewer-WdNOXMZf.js","assets/picture-in-picture-Dhau2pbO.js","assets/video-player-Cz-9jWQi.js","assets/native-player-pZMfJW6h.js","assets/composer-large-screen-CIe9rrd3.js","assets/list-card-carousel-0MASCIYJ.js","assets/use-carousel-DIKqvTdT.js","assets/image-card-D9frKuVR.js","assets/image-card-telemetry-BKESfA00.js","assets/image-gallery-Dsywdry7.js","assets/use-media-connection-DdJbQY4T.js","assets/weather-card-5TskgHSl.js","assets/weather-utils-Dp5rRDcr.js","assets/weather-states-categories-DW19TE3D.js","assets/weather-temperature-daily-n2EsoPdh.js","assets/card-carousel-DyglGK2K.js","assets/types-S47nI6MK.js","assets/audio-recorder-W1iRWyWW.js","assets/ai-message-CQb3lkIT.js","assets/research-header-q4tLQcjx.js","assets/citation-chips-row-CApY83y9.js","assets/research-final-response-XyWZ_C-w.js","assets/use-ads-card-operations-BFGer3U9.js","assets/progress-bar-optimistic-CfqTCfR-.js","assets/podcast-BwCdvqS6.js","assets/use-podcast-share-DZNDkuIX.js","assets/use-podcasts-navigation-fpXA8H5o.js","assets/use-research-navigation-1qUDqa9r.js","assets/widget-section-IpSkEp8R.js","assets/shopping-starter-card-DfhHz2oX.js","assets/sse-stream-reader-0qy4033g.js","assets/use-shopping-duration-telemetry-BS2SN7ko.js","assets/product-rating-DDOpDHF7.js","assets/bell-filled-C3-HWj6n.js","assets/bell-DmQfJCl5.js","assets/star-filled-DH9ipO5C.js","assets/use-shopping-visibility-telemetry-CdoHnwVD.js","assets/arrow-up-right-Dh9X0V8D.js","assets/arrow-trending-down-B9u5h-Yj.js","assets/price-history-chart-Djz-VLmJ.js","assets/CategoricalChart-_5WhCNbO.js","assets/decimal-ZKFLnszB.js","assets/CartesianChart-CN5aV7uz.js","assets/ReferenceDot-BEI0tted.js","assets/Area-DWwxmuZK.js","assets/rich-card-actions-LoSRTCwp.js","assets/appearance-chat-BpKzOyDL.js","assets/appearance-analytics-adapter-BM4UeVQ_.js","assets/typeahead-DLSbAaTY.js","assets/product-details-modal-D3CCB-kI.js","assets/wallet-dropdown-DioE7uU4.js","assets/wallet-list-Ct3xmrQp.js","assets/price-tracking-modal-C1X-w2ZJ.js","assets/topic-selection.lazy-B-N8_vNj.js","assets/shopping.lazy-DZgEZ51A.js","assets/use-product-details-entrypoint-Dsg0S9cD.js","assets/login.lazy-DeEmtbSK.js","assets/library.lazy-B8Uv2_ik.js","assets/edit-line-horizontal-Emtn_-W1.js","assets/page-share-modal-CiQESRXZ.js","assets/word-D8tyevvR.js","assets/page-delete-modal-CSTe_1NU.js","assets/shared-page-delete-modal-DjcA1gba.js","assets/secondsToMinutes-xUChuJB_.js","assets/task-share-modal-CzlLAuvM.js","assets/tasks-schemas-CkVaj1__.js","assets/share-url-modal-C2QjZhag.js","assets/imagine._galleryItemId.lazy-CSpFSUVe.js","assets/creator-gallery-detail-CGyX7KcQ.js","assets/heart-filled-BRCFDgeg.js","assets/heart-Bf5ygv6H.js","assets/separator-BQwb1squ.js","assets/model-viewer-3d-CDFfoC9v.js","assets/cube-filled-LyhwmNs5.js","assets/cube-BkSEZRrM.js","assets/gaming.lazy-lkcxGI6J.js","assets/use-labs-telemetry-CZE44psw.js","assets/gallery._galleryItemId.lazy-yQrckMbv.js","assets/daily.lazy-CfK1OS9z.js","assets/daily-briefing-CqTXvq91.js","assets/formatDistanceToNow-Dahby5C6.js","assets/constructNow-YbqE2li5.js","assets/en-US-DXcgFgB0.js","assets/parseISO-CIWY-Xbw.js","assets/use-scroll-element-into-view-DiMmvvl0.js","assets/arrow-maximize-ChbsZfoE.js","assets/arrow-minimize-DLKVQhJH.js","assets/use-is-portrait-C5Tnw9l4.js","assets/wand-B-7lt98I.js","assets/use-discover-feed-DYSTUXjb.js","assets/agents.lazy-DCJBJo_u.js","assets/index.lazy-CsT6E86p.js","assets/arrow-referral-Dq5L5tuu.js","assets/chat-sparkle-lvTHLuU5.js","assets/four-leaf-clover-D6gh0nN3.js","assets/copliot-outline-C6YonW4B.js","assets/index.lazy-foX9uDdJ.js","assets/index-Cv7po1fO.js","assets/index.lazy-1dcHesOt.js","assets/subscription.start.lazy-D0lxh9aX.js","assets/subscription.manage.lazy-Dsy7ioBi.js","assets/shares._conversationId.lazy-VhW8CPki.js","assets/research._researchId.lazy-WKUqZ7wB.js","assets/task-error-Dl-XrGXm.js","assets/rules.lazy-BgDqIwTo.js","assets/link-multiple-HB5-mbvE.js","assets/pro.subscribe.lazy-BbBLMGz1.js","assets/checkout-wrapper-CBEUf76Z.js","assets/add-address-CGFsBSBs.js","assets/address-BgjGeHSs.js","assets/pidl-element-factory-Dmw2KkDO.js","assets/workflow-pi-dropdown-disabler-CQWisW-2.js","assets/react-number-format.es-0DaaBDLf.js","assets/dropdown-radio-BDPYVl9l.js","assets/credit-card-CBWhZcKd.js","assets/wallet-dropdown-expanded-title-BrAKpTxL.js","assets/pidl-element-factory-Cq7KyA6l.css","assets/add-address-view-BrvDn36x.js","assets/form-field-skeleton-B6Zx30nQ.js","assets/add-payment-instrument-D6hwuKeH.js","assets/add-payment-instrument-view-DHeAVXAB.js","assets/add-ewallet-skeleton-BJHIteSd.js","assets/select-payment-instrument-Cmia3e-L.js","assets/start-line-DyFQUCuz.js","assets/paywall-container-aHBYfmRw.js","assets/pro.subscribe-jQX9gqYg.css","assets/memory.narrative.lazy-B8U0VEr_.js","assets/e.sol.lazy-DkBUHdRk.js","assets/e.so.lazy-FZrEvf5Q.js","assets/connector.callback.lazy-BbqAckt_.js","assets/chats.private.lazy-BYImFqmZ.js","assets/campaigns._campaignId.lazy-Cqxcs8xP.js","assets/projects._projectId.lazy-Dn-yp60M.js","assets/library-Cj3U_aCU.js","assets/partners.feedback.lazy-C5Wik-He.js","assets/CentroFeedbackFunctions-DlHyYuZU.js","assets/pages._pageId.lazy-BFq5Qdga.js","assets/use-clean-history-state-zhW_tJDu.js","assets/text-bold-YIfn9vML.js","assets/text-bullet-list-eOWSpd7G.js","assets/text-code-2-L90czG.js","assets/text-italic-B80QH1GO.js","assets/text-numbered-list-DCCWW0v9.js","assets/text-paragraph-IaL7L4BN.js","assets/chat-viV8u1Zv.js","assets/use-ensure-authenticated-ChcYF_EF.js","assets/arrow-enter-up-B7BjkQC6.js","assets/thumbs-down-filled-z9sXh6ok.js","assets/thumbs-up-filled-BT0twLtB.js","assets/use-emit-page-loaded-ByKysBA8.js","assets/use-clean-history-state-D2jPmWlQ.css","assets/copy-add-CFneBcE2.js","assets/index.lazy-Dygz9iR4.js","assets/portrait-gallery-BI-Vh31D.js","assets/consent-modal-Dp4O40-g.js","assets/portrait-back-button-D09P6aNH.js","assets/portrait-cache-DncKdHW1.js","assets/use-start-portrait-chat-CIS0SRkI.js","assets/mock-interview.lazy-DmjkijqD.js","assets/index.lazy-CC95wamP.js","assets/labs-badge-DjElK1S1.js","assets/shares.tasks._shareId.lazy-B1R_3GDx.js","assets/shares.podcasts._shareId.lazy-EKEM_r2H.js","assets/shares.3d-generations._shareId.lazy-D0MnGRs4.js","assets/use-3d-generations-CctfZLW2.js","assets/arrow-counter-clockwise-B11Ie7Ap.js","assets/printer-3d-u2GwQvln.js","assets/use-sidebar-position-B60ceZOl.js","assets/pro.redeem._redeemCode.lazy-DGTRmxx6.js","assets/pro.ewallet.return.lazy-DL7kp3HU.js","assets/podcasts._podcastType._podcastId.lazy-CCPHhdFL.js","assets/talk.lazy-BoSWYUXF.js","assets/audio-call-BZWGktId.js","assets/timer-EaybwHzY.js","assets/use-appearance-preload-behind-modal-DTX6DuSR.js","assets/gallery.lazy-Dkxk1eGp.js","assets/experiments._experimentAlias.lazy-iRN_5ll2.js","assets/discover._-_modalType_._-_modalId_.lazy-MGN50V1o.js","assets/conversations.join._token.lazy-B19Ls-qV.js","assets/shares.pages._shareId.lazy-CgaT0sTc.js","assets/eye-Cj3zhFsW.js","assets/chats_._conversationId.talk.lazy-89BAMvcl.js","assets/index.lazy-BxMeg4V4.js","assets/self-portrait-api-DsDL8WaA.js","assets/my-creations.lazy-ct1cZvCe.js","assets/use-responsive-masonry-D9RS_fbh.js","assets/use-window-size-CXLsE8ob.js","assets/my-creations-BiEk7v8n.css","assets/create.lazy-CRB2n-Qn.js","assets/projects_._projectId.chats._conversationId.lazy-BKTieYSx.js"])))=>i.map(i=>d[i]);
var TL=Object.defineProperty;var rb=e=>{throw TypeError(e)};var AL=(e,t,n)=>t in e?TL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>AL(e,typeof t!="symbol"?t+"":t,n),Hh=(e,t,n)=>t.has(e)||rb("Cannot "+n);var me=(e,t,n)=>(Hh(e,t,"read from private field"),n?n.call(e):t.get(e)),Vt=(e,t,n)=>t.has(e)?rb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),bt=(e,t,n,s)=>(Hh(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Le=(e,t,n)=>(Hh(e,t,"access private method"),n);import{a1 as kL,r as c,j as i,_ as B,a2 as ML,R as zu,D as Re,l as w,o as x,s as p,p as ke,Q as Tt,n as j,q as st,h as L,g as he,a3 as cr,f as ki,K as C8,a4 as Wp,a5 as NL,a6 as ab,a7 as xd,a8 as y8,a9 as Zm,aa as RL,ab as PL,ac as ib,ad as Wf,i as Rt,e as fl,x as Ms,t as z,J as b8,ae as LL,af as OL,L as DL,ag as jL,ah as cb,ai as UL,aj as FL,u as q,M as BL,I as Sd,X as VL,d as Mi,T as mn,ak as HL,v as $p,B as qp,N as zL,al as GL,P as WL,am as $L,an as nu,b as qL,ao as KL,ap as x8,aq as ZL,ar as YL,as as QL,at as zh,m as Qe,y as JL,au as XL,av as eO,aw as tO,ax as nO}from"./vendor-BvnAIcm_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();kL({jitless:!0});const S8=c.createContext({});function ur(e){const t=c.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ed=c.createContext(null),Ci=c.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class sO extends c.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,o=s instanceof HTMLElement&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=o-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oO({children:e,isPresent:t,anchorX:n}){const s=c.useId(),o=c.useRef(null),r=c.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=c.useContext(Ci);return c.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:m,right:f}=r.current;if(t||!o.current||!l||!u)return;const h=n==="left"?`left: ${m}`:`right: ${f}`;o.current.dataset.motionPopId=s;const g=document.createElement("style");return a&&(g.nonce=a),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${h}px !important;
            top: ${d}px !important;
          }
        `),()=>{document.head.removeChild(g)}},[t]),i.jsx(sO,{isPresent:t,childRef:o,sizeRef:r,children:c.cloneElement(e,{ref:o})})}const rO=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:o,presenceAffectsLayout:r,mode:a,anchorX:l})=>{const u=ur(aO),d=c.useId(),m=c.useCallback(h=>{u.set(h,!0);for(const g of u.values())if(!g)return;s&&s()},[u,s]),f=c.useMemo(()=>({id:d,initial:t,isPresent:n,custom:o,onExitComplete:m,register:h=>(u.set(h,!1),()=>u.delete(h))}),r?[Math.random(),m]:[n,m]);return c.useMemo(()=>{u.forEach((h,g)=>u.set(g,!1))},[n]),c.useEffect(()=>{!n&&!u.size&&s&&s()},[n]),a==="popLayout"&&(e=i.jsx(oO,{isPresent:n,anchorX:l,children:e})),i.jsx(Ed.Provider,{value:f,children:e})};function aO(){return new Map}function iO(e=!0){const t=c.useContext(Ed);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:o}=t,r=c.useId();c.useEffect(()=>{if(e)return o(r)},[e]);const a=c.useCallback(()=>e&&s&&s(r),[r,s,e]);return!n&&s?[!1,a]:[!0]}function iSe(){return cO(c.useContext(Ed))}function cO(e){return e===null?!0:e.isPresent}const Ym=e=>e.key||"";function lb(e){const t=[];return c.Children.forEach(e,n=>{c.isValidElement(n)&&t.push(n)}),t}const E8=typeof window<"u",wd=E8?c.useLayoutEffect:c.useEffect,pt=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:r="sync",propagate:a=!1,anchorX:l="left"})=>{const[u,d]=iO(a),m=c.useMemo(()=>lb(e),[e]),f=a&&!u?[]:m.map(Ym),h=c.useRef(!0),g=c.useRef(m),C=ur(()=>new Map),[v,y]=c.useState(m),[b,E]=c.useState(m);wd(()=>{h.current=!1,g.current=m;for(let _=0;_<b.length;_++){const T=Ym(b[_]);f.includes(T)?C.delete(T):C.get(T)!==!0&&C.set(T,!1)}},[b,f.length,f.join("-")]);const S=[];if(m!==v){let _=[...m];for(let T=0;T<b.length;T++){const A=b[T],k=Ym(A);f.includes(k)||(_.splice(T,0,A),S.push(A))}return r==="wait"&&S.length&&(_=S),E(lb(_)),y(m),null}const{forceRender:I}=c.useContext(S8);return i.jsx(i.Fragment,{children:b.map(_=>{const T=Ym(_),A=a&&!u?!1:m===b||f.includes(T),k=()=>{if(C.has(T))C.set(T,!0);else return;let N=!0;C.forEach(P=>{P||(N=!1)}),N&&(I==null||I(),E(g.current),a&&(d==null||d()),s&&s())};return i.jsx(rO,{isPresent:A,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:r,onExitComplete:A?void 0:k,anchorX:l,children:_},T)})})},Ca=e=>e;let lO=Ca,w8=Ca;const A0={skipAnimations:!1,useManualTiming:!1},Qm=["read","resolveKeyframes","update","preRender","render","postRender"];function uO(e,t){let n=new Set,s=new Set,o=!1,r=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(m){a.has(m)&&(d.schedule(m),e()),m(l)}const d={schedule:(m,f=!1,h=!1)=>{const C=h&&o?n:s;return f&&a.add(m),C.has(m)||C.add(m),m},cancel:m=>{s.delete(m),a.delete(m)},process:m=>{if(l=m,o){r=!0;return}o=!0,[n,s]=[s,n],n.forEach(u),n.clear(),o=!1,r&&(r=!1,d.process(m))}};return d}const dO=40;function I8(e,t){let n=!1,s=!0;const o={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Qm.reduce((b,E)=>(b[E]=uO(r),b),{}),{read:l,resolveKeyframes:u,update:d,preRender:m,render:f,postRender:h}=a,g=()=>{const b=A0.useManualTiming?o.timestamp:performance.now();n=!1,A0.useManualTiming||(o.delta=s?1e3/60:Math.max(Math.min(b-o.timestamp,dO),1)),o.timestamp=b,o.isProcessing=!0,l.process(o),u.process(o),d.process(o),m.process(o),f.process(o),h.process(o),o.isProcessing=!1,n&&t&&(s=!1,e(g))},C=()=>{n=!0,s=!0,o.isProcessing||e(g)};return{schedule:Qm.reduce((b,E)=>{const S=a[E];return b[E]=(I,_=!1,T=!1)=>(n||C(),S.schedule(I,_,T)),b},{}),cancel:b=>{for(let E=0;E<Qm.length;E++)a[Qm[E]].cancel(b)},state:o,steps:a}}const{schedule:Is,cancel:Kp,state:Gu,steps:cSe}=I8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ca,!0),A5=c.createContext({strict:!1}),ub={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$f={};for(const e in ub)$f[e]={isEnabled:t=>ub[e].some(n=>!!t[n])};function k0(e){for(const t in e)$f[t]={...$f[t],...e[t]}}function mO({children:e,features:t,strict:n=!1}){const[,s]=c.useState(!Gh(t)),o=c.useRef(void 0);if(!Gh(t)){const{renderer:r,...a}=t;o.current=r,k0(a)}return c.useEffect(()=>{Gh(t)&&t().then(({renderer:r,...a})=>{k0(a),o.current=r,s(!0)})},[]),i.jsx(A5.Provider,{value:{renderer:o.current,strict:n},children:e})}function Gh(e){return typeof e=="function"}const fO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||fO.has(e)}let _8=e=>!qf(e);function T8(e){e&&(_8=t=>t.startsWith("on")?!qf(t):e(t))}try{T8(require("@emotion/is-prop-valid").default)}catch{}function pO(e,t,n){const s={};for(const o in e)o==="values"&&typeof e.values=="object"||(_8(o)||n===!0&&qf(o)||!t&&!qf(o)||e.draggable&&o.startsWith("onDrag"))&&(s[o]=e[o]);return s}function A8({children:e,isValidProp:t,...n}){t&&T8(t),n={...c.useContext(Ci),...n},n.isStatic=ur(()=>n.isStatic);const s=c.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return i.jsx(Ci.Provider,{value:s,children:e})}function hO(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,o)=>o==="create"?e:(t.has(o)||t.set(o,e(o)),t.get(o))})}const Zp=c.createContext({});function k8(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function M0(e){return typeof e=="string"||Array.isArray(e)}const gO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vO=["initial",...gO];function k5(e){return k8(e.animate)||vO.some(t=>M0(e[t]))}function CO(e){return!!(k5(e)||e.variants)}function yO(e,t){if(k5(e)){const{initial:n,animate:s}=e;return{initial:n===!1||M0(n)?n:void 0,animate:M0(s)?s:void 0}}return e.inherit!==!1?t:{}}function bO(e){const{initial:t,animate:n}=yO(e,c.useContext(Zp));return c.useMemo(()=>({initial:t,animate:n}),[db(t),db(n)])}function db(e){return Array.isArray(e)?e.join(" "):e}const xO=Symbol.for("motionComponentSymbol");function M8(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function SO(e,t,n){return c.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):M8(n)&&(n.current=s))},[t])}const N8=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),EO="framerAppearId",wO="data-"+N8(EO),{schedule:IO}=I8(queueMicrotask,!1),_O=c.createContext({});function TO(e,t,n,s,o){var r,a;const{visualElement:l}=c.useContext(Zp),u=c.useContext(A5),d=c.useContext(Ed),m=c.useContext(Ci).reducedMotion,f=c.useRef(null);s=s||u.renderer,!f.current&&s&&(f.current=s(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m}));const h=f.current,g=c.useContext(_O);h&&!h.projection&&o&&(h.type==="html"||h.type==="svg")&&AO(f.current,n,o,g);const C=c.useRef(!1);c.useInsertionEffect(()=>{h&&C.current&&h.update(n,d)});const v=n[wO],y=c.useRef(!!v&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,v))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,v)));return wd(()=>{h&&(C.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),IO.render(h.render),y.current&&h.animationState&&h.animationState.animateChanges())}),c.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,v)}),y.current=!1))}),h}function AO(e,t,n,s){const{layoutId:o,layout:r,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:R8(e.parent)),e.projection.setOptions({layoutId:o,layout:r,alwaysMeasureLayout:!!a||l&&M8(l),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,layoutScroll:u,layoutRoot:d})}function R8(e){if(e)return e.options.allowProjection!==!1?e.projection:R8(e.parent)}function kO({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:o}){var r,a;e&&k0(e);function l(d,m){let f;const h={...c.useContext(Ci),...d,layoutId:MO(d)},{isStatic:g}=h,C=bO(d),v=s(d,g);if(!g&&E8){NO();const y=RO(h);f=y.MeasureLayout,C.visualElement=TO(o,v,h,t,y.ProjectionNode)}return i.jsxs(Zp.Provider,{value:C,children:[f&&C.visualElement?i.jsx(f,{visualElement:C.visualElement,...h}):null,n(o,d,SO(v,C.visualElement,m),v,g,C.visualElement)]})}l.displayName=`motion.${typeof o=="string"?o:`create(${(a=(r=o.displayName)!==null&&r!==void 0?r:o.name)!==null&&a!==void 0?a:""})`}`;const u=c.forwardRef(l);return u[xO]=o,u}function MO({layoutId:e}){const t=c.useContext(S8).id;return t&&e!==void 0?t+"-"+e:e}function NO(e,t){c.useContext(A5).strict}function RO(e){const{drag:t,layout:n}=$f;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const P8=e=>t=>typeof t=="string"&&t.startsWith(e),L8=P8("--"),PO=P8("var(--"),LO=e=>PO(e)?OO.test(e.split("/*")[0].trim()):!1,OO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,N0={};function lSe(e){for(const t in e)N0[t]=e[t],L8(t)&&(N0[t].isCSSVariable=!0)}const Id=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],M5=new Set(Id);function O8(e,{layout:t,layoutId:n}){return M5.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!N0[e]||e==="opacity")}const dr=e=>!!(e&&e.getVelocity),D8=(e,t)=>t&&typeof e=="number"?t.transform(e):e,aa=(e,t,n)=>n>t?t:n<e?e:n,_d={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Wu={..._d,transform:e=>aa(0,1,e)},Jm={..._d,default:1},Td=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ja=Td("deg"),Tu=Td("%"),tt=Td("px"),uSe=Td("vh"),dSe=Td("vw"),mb={...Tu,parse:e=>Tu.parse(e)/100,transform:e=>Tu.transform(e*100)},DO={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt},jO={rotate:ja,rotateX:ja,rotateY:ja,rotateZ:ja,scale:Jm,scaleX:Jm,scaleY:Jm,scaleZ:Jm,skew:ja,skewX:ja,skewY:ja,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:Wu,originX:mb,originY:mb,originZ:tt},fb={..._d,transform:Math.round},j8={...DO,...jO,zIndex:fb,size:tt,fillOpacity:Wu,strokeOpacity:Wu,numOctaves:fb},UO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FO=Id.length;function BO(e,t,n){let s="",o=!0;for(let r=0;r<FO;r++){const a=Id[r],l=e[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=D8(l,j8[a]);if(!u){o=!1;const m=UO[a]||a;s+=`${m}(${d}) `}n&&(t[a]=d)}}return s=s.trim(),n?s=n(t,o?"":s):o&&(s="none"),s}function U8(e,t,n){const{style:s,vars:o,transformOrigin:r}=e;let a=!1,l=!1;for(const u in t){const d=t[u];if(M5.has(u)){a=!0;continue}else if(L8(u)){o[u]=d;continue}else{const m=D8(d,j8[u]);u.startsWith("origin")?(l=!0,r[u]=m):s[u]=m}}if(t.transform||(a||n?s.transform=BO(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:m=0}=r;s.transformOrigin=`${u} ${d} ${m}`}}const N5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function F8(e,t,n){for(const s in t)!dr(t[s])&&!O8(s,n)&&(e[s]=t[s])}function VO({transformTemplate:e},t){return c.useMemo(()=>{const n=N5();return U8(n,t,e),Object.assign({},n.vars,n.style)},[t])}function HO(e,t){const n=e.style||{},s={};return F8(s,n,e),Object.assign(s,VO(e,t)),s}function zO(e,t){const n={},s=HO(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const GO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function B8(e){return typeof e!="string"||e.includes("-")?!1:!!(GO.indexOf(e)>-1||/[A-Z]/u.test(e))}const WO={offset:"stroke-dashoffset",array:"stroke-dasharray"},$O={offset:"strokeDashoffset",array:"strokeDasharray"};function qO(e,t,n=1,s=0,o=!0){e.pathLength=1;const r=o?WO:$O;e[r.offset]=tt.transform(-s);const a=tt.transform(t),l=tt.transform(n);e[r.array]=`${a} ${l}`}function pb(e,t,n){return typeof e=="string"?e:tt.transform(t+n*e)}function KO(e,t,n){const s=pb(t,e.x,e.width),o=pb(n,e.y,e.height);return`${s} ${o}`}function V8(e,{attrX:t,attrY:n,attrScale:s,originX:o,originY:r,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...d},m,f){if(U8(e,d,f),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g,dimensions:C}=e;h.transform&&(C&&(g.transform=h.transform),delete h.transform),C&&(o!==void 0||r!==void 0||g.transform)&&(g.transformOrigin=KO(C,o!==void 0?o:.5,r!==void 0?r:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),a!==void 0&&qO(h,a,l,u,!1)}const H8=()=>({...N5(),attrs:{}}),z8=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ZO(e,t,n,s){const o=c.useMemo(()=>{const r=H8();return V8(r,t,z8(s),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};F8(r,e.style,e),o.style={...r,...o.style}}return o}function YO(e=!1){return(n,s,o,{latestValues:r},a)=>{const u=(B8(n)?ZO:zO)(s,r,a,n),d=pO(s,typeof n=="string",e),m=n!==c.Fragment?{...d,...u,ref:o}:{},{children:f}=s,h=c.useMemo(()=>dr(f)?f.get():f,[f]);return c.createElement(n,{...m,children:h})}}function hb(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function QO(e,t,n,s){if(typeof t=="function"){const[o,r]=hb(s);t=t(n!==void 0?n:e.custom,o,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,r]=hb(s);t=t(n!==void 0?n:e.custom,o,r)}return t}const JO=e=>Array.isArray(e),XO=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),mSe=e=>JO(e)?e[e.length-1]||0:e;function eD(e){const t=dr(e)?e.get():e;return XO(t)?t.toValue():t}function tD({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},s,o,r){const a={latestValues:nD(s,o,r,e),renderState:t()};return n&&(a.onMount=l=>n({props:s,current:l,...a}),a.onUpdate=l=>n(l)),a}const G8=e=>(t,n)=>{const s=c.useContext(Zp),o=c.useContext(Ed),r=()=>tD(e,t,s,o);return n?r():ur(r)};function nD(e,t,n,s){const o={},r=s(e,{});for(const h in r)o[h]=eD(r[h]);let{initial:a,animate:l}=e;const u=k5(e),d=CO(e);t&&d&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const f=m?l:a;if(f&&typeof f!="boolean"&&!k8(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const C=QO(e,h[g]);if(C){const{transitionEnd:v,transition:y,...b}=C;for(const E in b){let S=b[E];if(Array.isArray(S)){const I=m?S.length-1:0;S=S[I]}S!==null&&(o[E]=S)}for(const E in v)o[E]=v[E]}}}return o}function W8(e,t,n){var s;const{style:o}=e,r={};for(const a in o)(dr(o[a])||t.style&&dr(t.style[a])||O8(a,e)||((s=n==null?void 0:n.getValue(a))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(r[a]=o[a]);return r}const sD={useVisualState:G8({scrapeMotionValuesFromProps:W8,createRenderState:N5})};function oD(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function rD(e,{style:t,vars:n},s,o){Object.assign(e.style,t,o&&o.getProjectionStyles(s));for(const r in n)e.style.setProperty(r,n[r])}const aD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iD(e,t,n,s){rD(e,t,void 0,s);for(const o in t.attrs)e.setAttribute(aD.has(o)?o:N8(o),t.attrs[o])}function cD(e,t,n){const s=W8(e,t,n);for(const o in e)if(dr(e[o])||dr(t[o])){const r=Id.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[r]=e[o]}return s}const gb=["x","y","width","height","cx","cy","r"],lD={useVisualState:G8({scrapeMotionValuesFromProps:cD,createRenderState:H8,onUpdate:({props:e,prevProps:t,current:n,renderState:s,latestValues:o})=>{if(!n)return;let r=!!e.drag;if(!r){for(const l in o)if(M5.has(l)){r=!0;break}}if(!r)return;let a=!t;if(t)for(let l=0;l<gb.length;l++){const u=gb[l];e[u]!==t[u]&&(a=!0)}a&&Is.read(()=>{oD(n,s),Is.render(()=>{V8(s,o,z8(n.tagName),e.transformTemplate),iD(n,s)})})}})};function uD(e,t){return function(s,{forwardMotionProps:o}={forwardMotionProps:!1}){const a={...B8(s)?lD:sD,preloadedFeatures:e,useRender:YO(o),createVisualElement:t,Component:s};return kO(a)}}const dD=uD(),ge=hO(dD);let Sf;function mD(){Sf=void 0}const fi={now:()=>(Sf===void 0&&fi.set(Gu.isProcessing||A0.useManualTiming?Gu.timestamp:performance.now()),Sf),set:e=>{Sf=e,queueMicrotask(mD)}};function fD(e,t){e.indexOf(t)===-1&&e.push(t)}function pD(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function fSe([...e],t,n){const s=t<0?e.length+t:t;if(s>=0&&s<e.length){const o=n<0?e.length+n:n,[r]=e.splice(t,1);e.splice(o,0,r)}return e}class hD{constructor(){this.subscriptions=[]}add(t){return fD(this.subscriptions,t),()=>pD(this.subscriptions,t)}notify(t,n,s){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,s);else for(let r=0;r<o;r++){const a=this.subscriptions[r];a&&a(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function R5(e,t){return t?e*(1e3/t):0}const vb=30,gD=e=>!isNaN(parseFloat(e)),Au={current:void 0};class vD{constructor(t,n={}){this.version="12.4.7",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,o=!0)=>{const r=fi.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=fi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=gD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new hD);const s=this.events[t].add(n);return t==="change"?()=>{s(),Is.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Au.current&&Au.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=fi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>vb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vb);return R5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _c(e,t){return new vD(e,t)}function CD(e){let t;return()=>(t===void 0&&(t=e()),t)}const yD=CD(()=>window.ScrollTimeline!==void 0),P5=e=>e*1e3,Oc=e=>e/1e3,bD={current:!1};function $8(e){return typeof e=="function"}const xD=e=>Array.isArray(e)&&typeof e[0]=="number",Yp=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},SD=(e,t,n=10)=>{let s="";const o=Math.max(Math.round(t/n),2);for(let r=0;r<o;r++)s+=e(Yp(0,o-1,r))+", ";return`linear(${s.substring(0,s.length-2)})`},q8=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,ED=1e-7,wD=12;function ID(e,t,n,s,o){let r,a,l=0;do a=t+(n-t)/2,r=q8(a,s,o)-e,r>0?n=a:t=a;while(Math.abs(r)>ED&&++l<wD);return a}function Ad(e,t,n,s){if(e===t&&n===s)return Ca;const o=r=>ID(r,0,1,e,n);return r=>r===0||r===1?r:q8(o(r),t,s)}const K8=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Z8=e=>t=>1-e(1-t),Y8=Ad(.33,1.53,.69,.99),L5=Z8(Y8),_D=K8(L5),TD=e=>(e*=2)<1?.5*L5(e):.5*(2-Math.pow(2,-10*(e-1))),O5=e=>1-Math.sin(Math.acos(e)),AD=Z8(O5),kD=K8(O5),ku=e=>Math.round(e*1e5)/1e5,Q8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function MD(e){return e==null}const ND=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,D5=(e,t)=>n=>!!(typeof n=="string"&&ND.test(n)&&n.startsWith(e)||t&&!MD(n)&&Object.prototype.hasOwnProperty.call(n,t)),J8=(e,t,n)=>s=>{if(typeof s!="string")return s;const[o,r,a,l]=s.match(Q8);return{[e]:parseFloat(o),[t]:parseFloat(r),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},RD=e=>aa(0,255,e),Wh={..._d,transform:e=>Math.round(RD(e))},ii={test:D5("rgb","red"),parse:J8("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Wh.transform(e)+", "+Wh.transform(t)+", "+Wh.transform(n)+", "+ku(Wu.transform(s))+")"};function PD(e){let t="",n="",s="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,s+=s,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:o?parseInt(o,16)/255:1}}const R0={test:D5("#"),parse:PD,transform:ii.transform},Tc={test:D5("hsl","hue"),parse:J8("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Tu.transform(ku(t))+", "+Tu.transform(ku(n))+", "+ku(Wu.transform(s))+")"},$u={test:e=>ii.test(e)||R0.test(e)||Tc.test(e),parse:e=>ii.test(e)?ii.parse(e):Tc.test(e)?Tc.parse(e):R0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ii.transform(e):Tc.transform(e)},LD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OD(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Q8))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(LD))===null||n===void 0?void 0:n.length)||0)>0}const X8="number",e7="color",DD="var",jD="var(",Cb="${}",UD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kf(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},o=[];let r=0;const l=t.replace(UD,u=>($u.test(u)?(s.color.push(r),o.push(e7),n.push($u.parse(u))):u.startsWith(jD)?(s.var.push(r),o.push(DD),n.push(u)):(s.number.push(r),o.push(X8),n.push(parseFloat(u))),++r,Cb)).split(Cb);return{values:n,split:l,indexes:s,types:o}}function t7(e){return Kf(e).values}function n7(e){const{split:t,types:n}=Kf(e),s=t.length;return o=>{let r="";for(let a=0;a<s;a++)if(r+=t[a],o[a]!==void 0){const l=n[a];l===X8?r+=ku(o[a]):l===e7?r+=$u.transform(o[a]):r+=o[a]}return r}}const FD=e=>typeof e=="number"?0:e;function BD(e){const t=t7(e);return n7(e)(t.map(FD))}const s7={test:OD,parse:t7,createTransformer:n7,getAnimatableNone:BD},pSe=e=>e===_d||e===tt,yb=(e,t)=>parseFloat(e.split(", ")[t]),bb=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const o=s.match(/^matrix3d\((.+)\)$/u);if(o)return yb(o[1],t);{const r=s.match(/^matrix\((.+)\)$/u);return r?yb(r[1],e):0}},VD=new Set(["x","y","z"]),HD=Id.filter(e=>!VD.has(e));function zD(e){const t=[];return HD.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const Zf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:bb(4,13),y:bb(5,14)};Zf.translateX=Zf.x;Zf.translateY=Zf.y;const pi=new Set;let P0=!1,L0=!1;function o7(){if(L0){const e=Array.from(pi).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const o=zD(s);o.length&&(n.set(s,o),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const o=n.get(s);o&&o.forEach(([r,a])=>{var l;(l=s.getValue(r))===null||l===void 0||l.set(a)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}L0=!1,P0=!1,pi.forEach(e=>e.complete()),pi.clear()}function r7(){pi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(L0=!0)})}function GD(){r7(),o7()}class WD{constructor(t,n,s,o,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=o,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(pi.add(this),P0||(P0=!0,Is.read(r7),Is.resolveKeyframes(o7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:o}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const a=o==null?void 0:o.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(s&&n){const u=s.readValue(n,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),o&&a===void 0&&o.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),pi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,pi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const xb=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(s7.test(e)||e==="0")&&!e.startsWith("url("));function $D(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function qD(e,t,n,s){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],a=xb(o,t),l=xb(r,t);return!a||!l?!1:$D(e)||(n==="spring"||$8(n))&&s}const KD=e=>e!==null;function a7(e,{repeat:t,repeatType:n="loop"},s){const o=e.filter(KD),r=t&&n!=="loop"&&t%2===1?0:o.length-1;return!r||s===void 0?o[r]:s}const ZD=40;class YD{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:o=0,repeatDelay:r=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=fi.now(),this.options={autoplay:t,delay:n,type:s,repeat:o,repeatDelay:r,repeatType:a,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>ZD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&GD(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=fi.now(),this.hasAttemptedResolve=!0;const{name:s,type:o,velocity:r,delay:a,onComplete:l,onUpdate:u,isGenerator:d}=this.options;if(!d&&!qD(t,s,o,r))if(bD.current||!a){u&&u(a7(t,this.options,n)),l&&l(),this.resolveFinishedPromise();return}else this.options.duration=0;const m=this.initPlayback(t,n);m!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const O0=2e4;function i7(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<O0;)t+=n,s=e.next(t);return t>=O0?1/0:t}const Qp=(e,t,n)=>e+(t-e)*n;function $h(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function QD({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let o=0,r=0,a=0;if(!t)o=r=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;o=$h(u,l,e+1/3),r=$h(u,l,e),a=$h(u,l,e-1/3)}return{red:Math.round(o*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:s}}function Yf(e,t){return n=>n>0?t:e}const qh=(e,t,n)=>{const s=e*e,o=n*(t*t-s)+s;return o<0?0:Math.sqrt(o)},JD=[R0,ii,Tc],XD=e=>JD.find(t=>t.test(e));function Sb(e){const t=XD(e);if(!t)return!1;let n=t.parse(e);return t===Tc&&(n=QD(n)),n}const Eb=(e,t)=>{const n=Sb(e),s=Sb(t);if(!n||!s)return Yf(e,t);const o={...n};return r=>(o.red=qh(n.red,s.red,r),o.green=qh(n.green,s.green,r),o.blue=qh(n.blue,s.blue,r),o.alpha=Qp(n.alpha,s.alpha,r),ii.transform(o))},ej=(e,t)=>n=>t(e(n)),j5=(...e)=>e.reduce(ej),D0=new Set(["none","hidden"]);function tj(e,t){return D0.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function nj(e,t){return n=>Qp(e,t,n)}function U5(e){return typeof e=="number"?nj:typeof e=="string"?LO(e)?Yf:$u.test(e)?Eb:rj:Array.isArray(e)?c7:typeof e=="object"?$u.test(e)?Eb:sj:Yf}function c7(e,t){const n=[...e],s=n.length,o=e.map((r,a)=>U5(r)(r,t[a]));return r=>{for(let a=0;a<s;a++)n[a]=o[a](r);return n}}function sj(e,t){const n={...e,...t},s={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(s[o]=U5(e[o])(e[o],t[o]));return o=>{for(const r in s)n[r]=s[r](o);return n}}function oj(e,t){var n;const s=[],o={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],l=e.indexes[a][o[a]],u=(n=e.values[l])!==null&&n!==void 0?n:0;s[r]=u,o[a]++}return s}const rj=(e,t)=>{const n=s7.createTransformer(t),s=Kf(e),o=Kf(t);return s.indexes.var.length===o.indexes.var.length&&s.indexes.color.length===o.indexes.color.length&&s.indexes.number.length>=o.indexes.number.length?D0.has(e)&&!o.values.length||D0.has(t)&&!s.values.length?tj(e,t):j5(c7(oj(s,o),o.values),n):Yf(e,t)};function l7(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Qp(e,t,n):U5(e)(e,t)}const aj=5;function u7(e,t,n){const s=Math.max(t-aj,0);return R5(n-e(s),t-s)}const on={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wb=.001;function ij({duration:e=on.duration,bounce:t=on.bounce,velocity:n=on.velocity,mass:s=on.mass}){let o,r,a=1-t;a=aa(on.minDamping,on.maxDamping,a),e=aa(on.minDuration,on.maxDuration,Oc(e)),a<1?(o=d=>{const m=d*a,f=m*e,h=m-n,g=j0(d,a),C=Math.exp(-f);return wb-h/g*C},r=d=>{const f=d*a*e,h=f*n+n,g=Math.pow(a,2)*Math.pow(d,2)*e,C=Math.exp(-f),v=j0(Math.pow(d,2),a);return(-o(d)+wb>0?-1:1)*((h-g)*C)/v}):(o=d=>{const m=Math.exp(-d*e),f=(d-n)*e+1;return-.001+m*f},r=d=>{const m=Math.exp(-d*e),f=(n-d)*(e*e);return m*f});const l=5/e,u=lj(o,r,l);if(e=P5(e),isNaN(u))return{stiffness:on.stiffness,damping:on.damping,duration:e};{const d=Math.pow(u,2)*s;return{stiffness:d,damping:a*2*Math.sqrt(s*d),duration:e}}}const cj=12;function lj(e,t,n){let s=n;for(let o=1;o<cj;o++)s=s-e(s)/t(s);return s}function j0(e,t){return e*Math.sqrt(1-t*t)}const uj=["duration","bounce"],dj=["stiffness","damping","mass"];function Ib(e,t){return t.some(n=>e[n]!==void 0)}function mj(e){let t={velocity:on.velocity,stiffness:on.stiffness,damping:on.damping,mass:on.mass,isResolvedFromDuration:!1,...e};if(!Ib(e,dj)&&Ib(e,uj))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),o=s*s,r=2*aa(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:on.mass,stiffness:o,damping:r}}else{const n=ij(e);t={...t,...n,mass:on.mass},t.isResolvedFromDuration=!0}return t}function d7(e=on.visualDuration,t=on.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:o}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:r},{stiffness:u,damping:d,mass:m,duration:f,velocity:h,isResolvedFromDuration:g}=mj({...n,velocity:-Oc(n.velocity||0)}),C=h||0,v=d/(2*Math.sqrt(u*m)),y=a-r,b=Oc(Math.sqrt(u/m)),E=Math.abs(y)<5;s||(s=E?on.restSpeed.granular:on.restSpeed.default),o||(o=E?on.restDelta.granular:on.restDelta.default);let S;if(v<1){const _=j0(b,v);S=T=>{const A=Math.exp(-v*b*T);return a-A*((C+v*b*y)/_*Math.sin(_*T)+y*Math.cos(_*T))}}else if(v===1)S=_=>a-Math.exp(-b*_)*(y+(C+b*y)*_);else{const _=b*Math.sqrt(v*v-1);S=T=>{const A=Math.exp(-v*b*T),k=Math.min(_*T,300);return a-A*((C+v*b*y)*Math.sinh(k)+_*y*Math.cosh(k))/_}}const I={calculatedDuration:g&&f||null,next:_=>{const T=S(_);if(g)l.done=_>=f;else{let A=0;v<1&&(A=_===0?P5(C):u7(S,_,T));const k=Math.abs(A)<=s,N=Math.abs(a-T)<=o;l.done=k&&N}return l.value=l.done?a:T,l},toString:()=>{const _=Math.min(i7(I),O0),T=SD(A=>I.next(_*A).value,_,30);return _+"ms "+T}};return I}function _b({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:o=10,bounceStiffness:r=500,modifyTarget:a,min:l,max:u,restDelta:d=.5,restSpeed:m}){const f=e[0],h={done:!1,value:f},g=k=>l!==void 0&&k<l||u!==void 0&&k>u,C=k=>l===void 0?u:u===void 0||Math.abs(l-k)<Math.abs(u-k)?l:u;let v=n*t;const y=f+v,b=a===void 0?y:a(y);b!==y&&(v=b-f);const E=k=>-v*Math.exp(-k/s),S=k=>b+E(k),I=k=>{const N=E(k),P=S(k);h.done=Math.abs(N)<=d,h.value=h.done?b:P};let _,T;const A=k=>{g(h.value)&&(_=k,T=d7({keyframes:[h.value,C(h.value)],velocity:u7(S,k,h.value),damping:o,stiffness:r,restDelta:d,restSpeed:m}))};return A(0),{calculatedDuration:null,next:k=>{let N=!1;return!T&&_===void 0&&(N=!0,I(k),A(k)),_!==void 0&&k>=_?T.next(k-_):(!N&&I(k),h)}}}const fj=Ad(.42,0,1,1),pj=Ad(0,0,.58,1),m7=Ad(.42,0,.58,1),hj=e=>Array.isArray(e)&&typeof e[0]!="number",gj={linear:Ca,easeIn:fj,easeInOut:m7,easeOut:pj,circIn:O5,circInOut:kD,circOut:AD,backIn:L5,backInOut:_D,backOut:Y8,anticipate:TD},Tb=e=>{if(xD(e)){w8(e.length===4);const[t,n,s,o]=e;return Ad(t,n,s,o)}else if(typeof e=="string")return gj[e];return e};function vj(e,t,n){const s=[],o=n||l7,r=e.length-1;for(let a=0;a<r;a++){let l=o(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||Ca:t;l=j5(u,l)}s.push(l)}return s}function F5(e,t,{clamp:n=!0,ease:s,mixer:o}={}){const r=e.length;if(w8(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=vj(t,s,o),u=l.length,d=m=>{if(a&&m<e[0])return t[0];let f=0;if(u>1)for(;f<e.length-2&&!(m<e[f+1]);f++);const h=Yp(e[f],e[f+1],m);return l[f](h)};return n?m=>d(aa(e[0],e[r-1],m)):d}function Cj(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const o=Yp(0,t,s);e.push(Qp(n,1,o))}}function f7(e){const t=[0];return Cj(t,e.length-1),t}function yj(e,t){return e.map(n=>n*t)}function bj(e,t){return e.map(()=>t||m7).splice(0,e.length-1)}function Qf({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const o=hj(s)?s.map(Tb):Tb(s),r={done:!1,value:t[0]},a=yj(n&&n.length===t.length?n:f7(t),e),l=F5(a,t,{ease:Array.isArray(o)?o:bj(t,o)});return{calculatedDuration:e,next:u=>(r.value=l(u),r.done=u>=e,r)}}const xj=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Is.update(t,!0),stop:()=>Kp(t),now:()=>Gu.isProcessing?Gu.timestamp:fi.now()}},Sj={decay:_b,inertia:_b,tween:Qf,keyframes:Qf,spring:d7},Ej=e=>e/100;class wj extends YD{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:s,element:o,keyframes:r}=this.options,a=(o==null?void 0:o.KeyframeResolver)||WD,l=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new a(r,l,n,s,o),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:r,velocity:a=0}=this.options,l=$8(n)?n:Sj[n]||Qf;let u,d;l!==Qf&&typeof t[0]!="number"&&(u=j5(Ej,l7(t[0],t[1])),t=[0,100]);const m=l({...this.options,keyframes:t});r==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=i7(m));const{calculatedDuration:f}=m,h=f+o,g=h*(s+1)-o;return{generator:m,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:f,resolvedDuration:h,totalDuration:g}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:o,generator:r,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:u,calculatedDuration:d,totalDuration:m,resolvedDuration:f}=s;if(this.startTime===null)return r.next(0);const{delay:h,repeat:g,repeatType:C,repeatDelay:v,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-m/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const b=this.currentTime-h*(this.speed>=0?1:-1),E=this.speed>=0?b<0:b>m;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let S=this.currentTime,I=r;if(g){const k=Math.min(this.currentTime,m)/f;let N=Math.floor(k),P=k%1;!P&&k>=1&&(P=1),P===1&&N--,N=Math.min(N,g+1),!!(N%2)&&(C==="reverse"?(P=1-P,v&&(P-=v/f)):C==="mirror"&&(I=a)),S=aa(0,1,P)*f}const _=E?{done:!1,value:u[0]}:I.next(S);l&&(_.value=l(_.value));let{done:T}=_;!E&&d!==null&&(T=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return A&&o!==void 0&&(_.value=a7(u,this.options,o)),y&&y(_.value),A&&this.finish(),_}get duration(){const{resolved:t}=this;return t?Oc(t.calculatedDuration):0}get time(){return Oc(this.currentTime)}set time(t){t=P5(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Oc(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=xj,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),n&&n();const o=this.driver.now();this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=o):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function Ij(e){return new wj(e)}function p7(e,t,n){var s;if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;t&&(o=t.current);const r=(s=n==null?void 0:n[e])!==null&&s!==void 0?s:o.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}function h7(e,t){let n;const s=()=>{const{currentTime:o}=t,a=(o===null?0:o.value)/100;n!==a&&e(a),n=a};return Is.update(s,!0),()=>Kp(s)}const Ef=new WeakMap;let Fr;function _j(e,t){if(t){const{inlineSize:n,blockSize:s}=t[0];return{width:n,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Tj({target:e,contentRect:t,borderBoxSize:n}){var s;(s=Ef.get(e))===null||s===void 0||s.forEach(o=>{o({target:e,contentSize:t,get size(){return _j(e,n)}})})}function Aj(e){e.forEach(Tj)}function kj(){typeof ResizeObserver>"u"||(Fr=new ResizeObserver(Aj))}function Mj(e,t){Fr||kj();const n=p7(e);return n.forEach(s=>{let o=Ef.get(s);o||(o=new Set,Ef.set(s,o)),o.add(t),Fr==null||Fr.observe(s)}),()=>{n.forEach(s=>{const o=Ef.get(s);o==null||o.delete(t),o!=null&&o.size||Fr==null||Fr.unobserve(s)})}}const wf=new Set;let Mu;function Nj(){Mu=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};wf.forEach(n=>n(t))},window.addEventListener("resize",Mu)}function Rj(e){return wf.add(e),Mu||Nj(),()=>{wf.delete(e),!wf.size&&Mu&&(Mu=void 0)}}function Pj(e,t){return typeof e=="function"?Rj(e):Mj(e,t)}const Lj=50,Ab=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Oj=()=>({time:0,x:Ab(),y:Ab()}),Dj={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function kb(e,t,n,s){const o=n[t],{length:r,position:a}=Dj[t],l=o.current,u=n.time;o.current=e[`scroll${a}`],o.scrollLength=e[`scroll${r}`]-e[`client${r}`],o.offset.length=0,o.offset[0]=0,o.offset[1]=o.scrollLength,o.progress=Yp(0,o.scrollLength,o.current);const d=s-u;o.velocity=d>Lj?0:R5(o.current-l,d)}function jj(e,t,n){kb(e,"x",t,n),kb(e,"y",t,n),t.time=n}function Uj(e,t){const n={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const o=s.getBoundingClientRect();s=s.parentElement;const r=s.getBoundingClientRect();n.x+=o.left-r.left,n.y+=o.top-r.top}else if(s instanceof SVGGraphicsElement){const{x:o,y:r}=s.getBBox();n.x+=o,n.y+=r;let a=null,l=s.parentNode;for(;!a;)l.tagName==="svg"&&(a=l),l=s.parentNode;s=a}else break;return n}const U0={start:0,center:.5,end:1};function Mb(e,t,n=0){let s=0;if(e in U0&&(e=U0[e]),typeof e=="string"){const o=parseFloat(e);e.endsWith("px")?s=o:e.endsWith("%")?e=o/100:e.endsWith("vw")?s=o/100*document.documentElement.clientWidth:e.endsWith("vh")?s=o/100*document.documentElement.clientHeight:e=o}return typeof e=="number"&&(s=t*e),n+s}const Fj=[0,0];function Bj(e,t,n,s){let o=Array.isArray(e)?e:Fj,r=0,a=0;return typeof e=="number"?o=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?o=e.split(" "):o=[e,U0[e]?e:"0"]),r=Mb(o[0],n,s),a=Mb(o[1],t),r-a}const Vj={All:[[0,0],[1,1]]},Hj={x:0,y:0};function zj(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Gj(e,t,n){const{offset:s=Vj.All}=n,{target:o=e,axis:r="y"}=n,a=r==="y"?"height":"width",l=o!==e?Uj(o,e):Hj,u=o===e?{width:e.scrollWidth,height:e.scrollHeight}:zj(o),d={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let m=!t[r].interpolate;const f=s.length;for(let h=0;h<f;h++){const g=Bj(s[h],d[a],u[a],l[r]);!m&&g!==t[r].interpolatorOffsets[h]&&(m=!0),t[r].offset[h]=g}m&&(t[r].interpolate=F5(t[r].offset,f7(s),{clamp:!1}),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=aa(0,1,t[r].interpolate(t[r].current))}function Wj(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function $j(e,t,n,s={}){return{measure:()=>Wj(e,s.target,n),update:o=>{jj(e,n,o),(s.offset||s.target)&&Gj(e,n,s)},notify:()=>t(n)}}const su=new WeakMap,Nb=new WeakMap,Kh=new WeakMap,Rb=e=>e===document.documentElement?window:e;function B5(e,{container:t=document.documentElement,...n}={}){let s=Kh.get(t);s||(s=new Set,Kh.set(t,s));const o=Oj(),r=$j(t,e,o,n);if(s.add(r),!su.has(t)){const l=()=>{for(const h of s)h.measure()},u=()=>{for(const h of s)h.update(Gu.timestamp)},d=()=>{for(const h of s)h.notify()},m=()=>{Is.read(l,!1,!0),Is.read(u,!1,!0),Is.update(d,!1,!0)};su.set(t,m);const f=Rb(t);window.addEventListener("resize",m,{passive:!0}),t!==document.documentElement&&Nb.set(t,Pj(t,m)),f.addEventListener("scroll",m,{passive:!0})}const a=su.get(t);return Is.read(a,!1,!0),()=>{var l;Kp(a);const u=Kh.get(t);if(!u||(u.delete(r),u.size))return;const d=su.get(t);su.delete(t),d&&(Rb(t).removeEventListener("scroll",d),(l=Nb.get(t))===null||l===void 0||l(),window.removeEventListener("resize",d))}}function qj({source:e,container:t,axis:n="y"}){e&&(t=e);const s={value:0},o=B5(r=>{s.value=r[n].progress*100},{container:t,axis:n});return{currentTime:s,cancel:o}}const Zh=new Map;function g7({source:e,container:t=document.documentElement,axis:n="y"}={}){e&&(t=e),Zh.has(t)||Zh.set(t,{});const s=Zh.get(t);return s[n]||(s[n]=yD()?new ScrollTimeline({source:t,axis:n}):qj({source:t,axis:n})),s[n]}function Kj(e){return e.length===2}function v7(e){return e&&(e.target||e.offset)}function Zj(e,t){return Kj(e)||v7(t)?B5(n=>{e(n[t.axis].progress,n)},t):h7(e,g7(t))}function Yj(e,t){if(e.flatten(),v7(t))return e.pause(),B5(n=>{e.time=e.duration*n[t.axis].progress},t);{const n=g7(t);return e.attachTimeline?e.attachTimeline(n,s=>(s.pause(),h7(o=>{s.time=s.duration*o},n))):Ca}}function Qj(e,{axis:t="y",...n}={}){const s={axis:t,...n};return typeof e=="function"?Zj(e,s):Yj(e,s)}function Pb(e,t){lO(!!(!t||t.current))}const Jj=()=>({scrollX:_c(0),scrollY:_c(0),scrollXProgress:_c(0),scrollYProgress:_c(0)});function Xj({container:e,target:t,layoutEffect:n=!0,...s}={}){const o=ur(Jj);return(n?wd:c.useEffect)(()=>(Pb("target",t),Pb("container",e),Qj((a,{x:l,y:u})=>{o.scrollX.set(l.current),o.scrollXProgress.set(l.progress),o.scrollY.set(u.current),o.scrollYProgress.set(u.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(s.offset)]),o}function C7(e){const t=ur(()=>_c(e)),{isStatic:n}=c.useContext(Ci);if(n){const[,s]=c.useState(e);c.useEffect(()=>t.on("change",s),[])}return t}function y7(e,t){const n=C7(t()),s=()=>n.set(t());return s(),wd(()=>{const o=()=>Is.preRender(s,!1,!0),r=e.map(a=>a.on("change",o));return()=>{r.forEach(a=>a()),Kp(s)}}),n}function b7(e,t={}){const{isStatic:n}=c.useContext(Ci),s=c.useRef(null),o=ur(()=>dr(e)?e.get():e),r=ur(()=>typeof o=="string"?o.replace(/[\d.-]/g,""):void 0),a=C7(o),l=c.useRef(o),u=c.useRef(Ca),d=()=>{m(),s.current=Ij({keyframes:[Ob(a.get()),Ob(l.current)],velocity:a.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:u.current})},m=()=>{s.current&&s.current.stop()};return c.useInsertionEffect(()=>a.attach((f,h)=>n?h(f):(l.current=f,u.current=g=>h(Lb(g,r)),Is.postRender(d),a.get()),m),[JSON.stringify(t)]),wd(()=>{if(dr(e))return e.on("change",f=>a.set(Lb(f,r)))},[a,r]),a}function Lb(e,t){return t?e+t:e}function Ob(e){return typeof e=="number"?e:parseFloat(e)}const eU=e=>e&&typeof e=="object"&&e.mix,tU=e=>eU(e)?e.mix:void 0;function nU(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],o=e[1+n],r=e[2+n],a=e[3+n],l=F5(o,r,{mixer:tU(r[0]),...a});return t?l(s):l}function sU(e){Au.current=[],e();const t=y7(Au.current,e);return Au.current=void 0,t}function el(e,t,n,s){if(typeof e=="function")return sU(e);const o=typeof t=="function"?t:nU(t,n,s);return Array.isArray(e)?Db(e,o):Db([e],([r])=>o(r))}function Db(e,t){const n=ur(()=>[]);return y7(e,()=>{n.length=0;const s=e.length;for(let o=0;o<s;o++)n[o]=e[o].get();return t(n)})}const oU={some:0,all:1};function rU(e,t,{root:n,margin:s,amount:o="some"}={}){const r=p7(e),a=new WeakMap,l=d=>{d.forEach(m=>{const f=a.get(m.target);if(m.isIntersecting!==!!f)if(m.isIntersecting){const h=t(m.target,m);typeof h=="function"?a.set(m.target,h):u.unobserve(m.target)}else typeof f=="function"&&(f(m),a.delete(m.target))})},u=new IntersectionObserver(l,{root:n,rootMargin:s,threshold:typeof o=="number"?o:oU[o]});return r.forEach(d=>u.observe(d)),()=>u.disconnect()}function pl(e,{root:t,margin:n,amount:s,once:o=!1,initial:r=!1}={}){const[a,l]=c.useState(r);return c.useEffect(()=>{if(!e.current||o&&a)return;const u=()=>(l(!0),o?void 0:()=>l(!1)),d={root:t&&t.current||void 0,margin:n,amount:s};return rU(e.current,u,d)},[t,e,n,o,s]),a}const x7=c.createContext(void 0);function aU(){return c.useContext(x7)}function iU(e){const{children:t,randomSeed:n}=e;return i.jsx(x7.Provider,{value:n,children:t})}const cU=()=>B(()=>import("./motion-lib-react-BnrZHMX4.js"),__vite__mapDeps([0,1])).then(e=>e.domMax);function lU(e){const{children:t,queryClient:n,randomSeed:s}=e;return i.jsx(A8,{reducedMotion:"user",children:i.jsx(mO,{features:cU,strict:!0,children:i.jsx(ML,{client:n,children:i.jsx(iU,{randomSeed:s,children:t})})})})}const S7=[{name:"Arabic",i18nCode:"ar",direction:"rtl"},{name:"Basque",i18nCode:"eu",direction:"ltr"},{name:"Bengali",i18nCode:"bn-IN",direction:"ltr"},{name:"Bulgarian",i18nCode:"bg",direction:"ltr"},{name:"Catalan",i18nCode:"ca",direction:"ltr"},{name:"Chinese (Simplified)",i18nCode:"zh-Hans",direction:"ltr"},{name:"Chinese (Traditional)",i18nCode:"zh-Hant",direction:"ltr"},{name:"Croatian",i18nCode:"hr",direction:"ltr"},{name:"Czech",i18nCode:"cs",direction:"ltr"},{name:"Danish",i18nCode:"da",direction:"ltr"},{name:"Dutch",i18nCode:"nl",direction:"ltr"},{name:"English (US)",i18nCode:"en-US",direction:"ltr"},{name:"English (UK)",i18nCode:"en-GB",direction:"ltr"},{name:"Estonian",i18nCode:"et",direction:"ltr"},{name:"Finnish",i18nCode:"fi",direction:"ltr"},{name:"French",i18nCode:"fr",direction:"ltr"},{name:"Galician",i18nCode:"gl",direction:"ltr"},{name:"German",i18nCode:"de",direction:"ltr"},{name:"Gujarati",i18nCode:"gu",direction:"ltr"},{name:"Hebrew",i18nCode:"he",direction:"rtl"},{name:"Hindi",i18nCode:"hi",direction:"ltr"},{name:"Hungarian",i18nCode:"hu",direction:"ltr"},{name:"Icelandic",i18nCode:"is",direction:"ltr"},{name:"Indonesian",i18nCode:"id",direction:"ltr"},{name:"Italian",i18nCode:"it",direction:"ltr"},{name:"Japanese",i18nCode:"ja",direction:"ltr"},{name:"Kannada",i18nCode:"kn",direction:"ltr"},{name:"Korean",i18nCode:"ko",direction:"ltr"},{name:"Latvian",i18nCode:"lv",direction:"ltr"},{name:"Lithuanian",i18nCode:"lt",direction:"ltr"},{name:"Malay",i18nCode:"ms",direction:"ltr"},{name:"Malayalam",i18nCode:"ml",direction:"ltr"},{name:"Marathi",i18nCode:"mr",direction:"ltr"},{name:"Norwegian (Bokml)",i18nCode:"nb-NO",direction:"ltr"},{name:"Polish",i18nCode:"pl",direction:"ltr"},{name:"Portuguese (Brazil)",i18nCode:"pt-BR",direction:"ltr"},{name:"Portuguese (Portugal)",i18nCode:"pt-PT",direction:"ltr"},{name:"Punjabi",i18nCode:"pa",direction:"ltr"},{name:"Romanian",i18nCode:"ro",direction:"ltr"},{name:"Russian",i18nCode:"ru",direction:"ltr"},{name:"Serbian (Latin)",i18nCode:"sr-Latn-RS",direction:"ltr"},{name:"Slovak",i18nCode:"sk",direction:"ltr"},{name:"Slovenian",i18nCode:"sl",direction:"ltr"},{name:"Spanish",i18nCode:"es",direction:"ltr"},{name:"Swedish",i18nCode:"sv",direction:"ltr"},{name:"Tamil",i18nCode:"ta",direction:"ltr"},{name:"Telugu",i18nCode:"te",direction:"ltr"},{name:"Thai",i18nCode:"th",direction:"ltr"},{name:"Turkish",i18nCode:"tr",direction:"ltr"},{name:"Ukrainian",i18nCode:"uk",direction:"ltr"},{name:"Vietnamese",i18nCode:"vi",direction:"ltr"}],E7=S7.map(e=>e.i18nCode);function V5(e){const t="en-US";if(!e)return[t];const n=uU(e),s=dU(e),o=mU(e);return[n,s,o,t].filter(r=>!!r).filter((r,a,l)=>l.indexOf(r)===a)}function uU(e){return E7.find(t=>t.toLowerCase()===e.toLowerCase())}function dU(e){if(["en-AU","en-NZ","en-IE"].includes(e))return"en-GB";if(e.startsWith("zh-")){const t=e.toLocaleLowerCase();return t==="zh-TW".toLocaleLowerCase()||t==="zh-HK".toLocaleLowerCase()?"zh-Hant":"zh-Hans"}}function mU(e){var n;const t=(n=e.split("-")[0])==null?void 0:n.toLowerCase();if(t){const s=E7.find(o=>o.toLowerCase()===t||o.toLowerCase().startsWith(`${t}-`));if(s)return s}}const fU="__i18n__";function pU(){if(!(typeof window>"u"))return window[fU]}const io={};let hU=0;function R(e,t){const n=`atom${++hU}`,s={toString(){return(io?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?s.read=e:(s.init=e,s.read=gU,s.write=vU),t&&(s.write=t),s}function gU(e){return e(this)}function vU(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const jb=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,Yh=e=>"init"in e,Qh=e=>!!e.write,Jf=new WeakMap,F0=e=>{var t;return B0(e)&&!((t=Jf.get(e))!=null&&t[1])},CU=(e,t)=>{const n=Jf.get(e);if(n)n[1]=!0,n[0].forEach(s=>s(t));else if((io?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},yU=e=>{if(Jf.has(e))return;const t=[new Set,!1];Jf.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=s=>{t[0].add(s)}},B0=e=>typeof(e==null?void 0:e.then)=="function",Ub=e=>"v"in e||"e"in e,Xm=e=>{if("e"in e)throw e.e;if((io?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},w7=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},Fb=(e,t,n,s,o)=>{var r;if((io?"production":void 0)!=="production"&&s===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(s,o.n),F0(n.v)&&w7(t,n.v,o),(r=o.m)==null||r.t.add(t),e&&bU(e,s,t)},mc=()=>[new Map,new Map,new Set],Jh=(e,t,n)=>{e[0].has(t)||e[0].set(t,new Set),e[1].set(t,n)},bU=(e,t,n)=>{const s=e[0].get(t);s&&s.add(n)},xU=(e,t)=>e[0].get(t),Bb=(e,t)=>{e[2].add(t)},Ua=e=>{for(;e[1].size||e[2].size;){e[0].clear();const t=new Set(e[1].values());e[1].clear();const n=new Set(e[2]);e[2].clear(),t.forEach(s=>{var o;return(o=s.m)==null?void 0:o.l.forEach(r=>r())}),n.forEach(s=>s())}},I7=e=>{let t;(io?"production":void 0)!=="production"&&(t=new Set);const n=(v,y,b)=>{const E="v"in y,S=y.v,I=F0(y.v)?y.v:null;if(B0(b)){yU(b);for(const _ of y.d.keys())w7(v,b,e(_,y));y.v=b,delete y.e}else y.v=b,delete y.e;(!E||!Object.is(S,y.v))&&(++y.n,I&&CU(I,b))},s=(v,y,b,E)=>{var S;if(Ub(b)&&(b.m&&!(E!=null&&E.has(y))||Array.from(b.d).every(([N,P])=>s(v,N,e(N,b),E).n===P)))return b;b.d.clear();let I=!0;const _=N=>{if(jb(y,N)){const V=e(N,b);if(!Ub(V))if(Yh(N))n(N,V,N.init);else throw new Error("no atom init");return Xm(V)}const P=s(v,N,e(N,b),E);if(I)Fb(v,y,b,N,P);else{const V=mc();Fb(V,y,b,N,P),d(V,y,b),Ua(V)}return Xm(P)};let T,A;const k={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(io?"production":void 0)!=="production"&&!Qh(y)&&console.warn("setSelf function cannot be used with read-only atom"),!A&&Qh(y)&&(A=(...N)=>{if((io?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)return u(y,...N)}),A}};try{const N=y.read(_,k);if(n(y,b,N),B0(N)){(S=N.onCancel)==null||S.call(N,()=>T==null?void 0:T.abort());const P=()=>{if(b.m){const V=mc();d(V,y,b),Ua(V)}};N.then(P,P)}return b}catch(N){return delete b.v,b.e=N,++b.n,b}finally{I=!1}},o=v=>Xm(s(void 0,v,e(v))),r=(v,y,b)=>{var E,S;const I=new Map;for(const _ of((E=b.m)==null?void 0:E.t)||[])I.set(_,e(_,b));for(const _ of b.p)I.set(_,e(_,b));return(S=xU(v,y))==null||S.forEach(_=>{I.set(_,e(_,b))}),I},a=(v,y,b)=>{const E=[],S=new Set,I=(T,A)=>{if(!S.has(T)){S.add(T);for(const[k,N]of r(v,T,A))T!==k&&I(k,N);E.push([T,A,A.n])}};I(y,b);const _=new Set([y]);for(let T=E.length-1;T>=0;--T){const[A,k,N]=E[T];let P=!1;for(const V of k.d.keys())if(V!==A&&_.has(V)){P=!0;break}P&&(s(v,A,k,S),d(v,A,k),N!==k.n&&(Jh(v,A,k),_.add(A))),S.delete(A)}},l=(v,y,b,...E)=>{const S=T=>Xm(s(v,T,e(T,b))),I=(T,...A)=>{const k=e(T,b);let N;if(jb(y,T)){if(!Yh(T))throw new Error("atom not writable");const P="v"in k,V=k.v,U=A[0];n(T,k,U),d(v,T,k),(!P||!Object.is(V,k.v))&&(Jh(v,T,k),a(v,T,k))}else N=l(v,T,k,...A);return Ua(v),N};return y.write(S,I,...E)},u=(v,...y)=>{const b=mc(),E=l(b,v,e(v),...y);return Ua(b),E},d=(v,y,b)=>{if(b.m&&!F0(b.v)){for(const E of b.d.keys())b.m.d.has(E)||(m(v,E,e(E,b)).t.add(y),b.m.d.add(E));for(const E of b.m.d||[])if(!b.d.has(E)){b.m.d.delete(E);const S=f(v,E,e(E,b));S==null||S.t.delete(y)}}},m=(v,y,b)=>{if(!b.m){s(v,y,b);for(const E of b.d.keys())m(v,E,e(E,b)).t.add(y);if(b.m={l:new Set,d:new Set(b.d.keys()),t:new Set},(io?"production":void 0)!=="production"&&t.add(y),Qh(y)&&y.onMount){const E=b.m,{onMount:S}=y;Bb(v,()=>{const I=S((..._)=>l(v,y,b,..._));I&&(E.u=I)})}}return b.m},f=(v,y,b)=>{if(b.m&&!b.m.l.size&&!Array.from(b.m.t).some(E=>{var S;return(S=e(E,b).m)==null?void 0:S.d.has(y)})){const E=b.m.u;E&&Bb(v,E),delete b.m,(io?"production":void 0)!=="production"&&t.delete(y);for(const S of b.d.keys()){const I=f(v,S,e(S,b));I==null||I.t.delete(y)}return}return b.m},C={get:o,set:u,sub:(v,y)=>{const b=mc(),E=e(v),S=m(b,v,E);Ua(b);const I=S.l;return I.add(y),()=>{I.delete(y);const _=mc();f(_,v,E),Ua(_)}},unstable_derive:v=>I7(...v(e))};return(io?"production":void 0)!=="production"&&Object.assign(C,{dev4_get_internal_weak_map:()=>({get:y=>{const b=e(y);if(b.n!==0)return b}}),dev4_get_mounted_atoms:()=>t,dev4_restore_atoms:y=>{const b=mc();for(const[E,S]of y)if(Yh(E)){const I=e(E),_="v"in I,T=I.v;n(E,I,S),d(b,E,I),(!_||!Object.is(T,I.v))&&(Jh(b,E,I),a(b,E,I))}Ua(b)}}),C},SU=()=>{const e=new WeakMap;return I7(n=>{let s=e.get(n);return s||(s={d:new Map,p:new Set,n:0},e.set(n,s)),s})};let ou;const $e=()=>(ou||(ou=SU(),(io?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=ou),globalThis.__JOTAI_DEFAULT_STORE__!==ou&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),ou),_7={},EU=c.createContext(void 0),H5=e=>c.useContext(EU)||$e(),T7=e=>typeof(e==null?void 0:e.then)=="function",wU=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},IU=zu.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(wU(e),e)}),Xh=new WeakMap,_U=e=>{let t=Xh.get(e);return t||(t=new Promise((n,s)=>{let o=e;const r=u=>d=>{o===u&&n(d)},a=u=>d=>{o===u&&s(d)},l=u=>{"onCancel"in u&&typeof u.onCancel=="function"&&u.onCancel(d=>{if((_7?"production":void 0)!=="production"&&d===u)throw new Error("[Bug] p is not updated even after cancelation");T7(d)?(Xh.set(d,t),o=d,d.then(r(d),a(d)),l(d)):n(d)})};e.then(r(e),a(e)),l(e)}),Xh.set(e,t)),t};function M(e,t){const n=H5(),[[s,o,r],a]=c.useReducer(d=>{const m=n.get(e);return Object.is(d[0],m)&&d[1]===n&&d[2]===e?d:[m,n,e]},void 0,()=>[n.get(e),n,e]);let l=s;if((o!==n||r!==e)&&(a(),l=n.get(e)),c.useEffect(()=>{const d=n.sub(e,()=>{a()});return a(),d},[n,e,void 0]),c.useDebugValue(l),T7(l)){const d=_U(l);return IU(d)}return l}function se(e,t){const n=H5();return c.useCallback((...o)=>{if((_7?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...o)},[n,e])}function Ue(e,t){return[M(e),se(e)]}const Jp={},TU=Symbol((Jp?"production":void 0)!=="production"?"RESET":"");function hSe(e,t){let n=null;const s=new Map,o=new Set,r=l=>{let u;if(t===void 0)u=s.get(l);else for(const[m,f]of s)if(t(m,l)){u=f;break}if(u!==void 0)if(n!=null&&n(u[1],l))r.remove(l);else return u[0];const d=e(l);return s.set(l,[d,Date.now()]),a("CREATE",l,d),d};function a(l,u,d){for(const m of o)m({type:l,param:u,atom:d})}return r.unstable_listen=l=>(o.add(l),()=>{o.delete(l)}),r.getParams=()=>s.keys(),r.remove=l=>{{if(!s.has(l))return;const[u]=s.get(l);s.delete(l),a("REMOVE",l,u)}},r.setShouldRemove=l=>{if(n=l,!!n)for(const[u,[d,m]]of s)n(m,u)&&(s.delete(u),a("REMOVE",u,d))},r}const eg=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),AU=new WeakMap,kU=(e,t,n,s)=>{const o=eg(()=>new WeakMap,AU,t),r=eg(()=>new WeakMap,o,n);return eg(e,r,s)};function z5(e,t,n=Object.is){return kU(()=>{const s=Symbol(),o=([a,l])=>{if(l===s)return t(a);const u=t(a,l);return n(l,u)?l:u},r=R(a=>{const l=a(r),u=a(e);return o([u,l])});return r.init=s,r},e,t,n)}const Vb=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),MU=new WeakMap,NU=(e,t,n)=>{const s=Vb(()=>new WeakMap,MU,t);return Vb(e,s,n)},RU={},Hb=e=>!!e.write,PU=e=>typeof e=="function";function gSe(e,t){return NU(()=>{const n=new WeakMap,s=(a,l)=>{let u=n.get(a);if(u)return u;const d=l&&n.get(l),m=[],f=[];return a.forEach((h,g)=>{const C=g;f[g]=C;const v=d&&d.atomList[d.keyList.indexOf(C)];if(v){m[g]=v;return}const y=E=>{const S=E(o),I=E(e),T=s(I,S==null?void 0:S.arr).keyList.indexOf(C);if(T<0||T>=I.length){const A=a[s(a).keyList.indexOf(C)];if(A)return A;throw new Error("splitAtom: index out of bounds for read")}return I[T]},b=(E,S,I)=>{const _=E(o),T=E(e),k=s(T,_==null?void 0:_.arr).keyList.indexOf(C);if(k<0||k>=T.length)throw new Error("splitAtom: index out of bounds for write");const N=PU(I)?I(T[k]):I;Object.is(T[k],N)||S(e,[...T.slice(0,k),N,...T.slice(k+1)])};m[g]=Hb(e)?R(y,b):R(y)}),d&&d.keyList.length===f.length&&d.keyList.every((h,g)=>h===f[g])?u=d:u={arr:a,atomList:m,keyList:f},n.set(a,u),u},o=R(a=>{const l=a(o),u=a(e);return s(u,l==null?void 0:l.arr)});(Jp?"production":void 0)!=="production"&&(o.debugPrivate=!0),o.init=void 0;const r=Hb(e)?R(a=>a(o).atomList,(a,l,u)=>{switch(u.type){case"remove":{const d=a(r).indexOf(u.atom);if(d>=0){const m=a(e);l(e,[...m.slice(0,d),...m.slice(d+1)])}break}case"insert":{const d=u.before?a(r).indexOf(u.before):a(r).length;if(d>=0){const m=a(e);l(e,[...m.slice(0,d),u.value,...m.slice(d)])}break}case"move":{const d=a(r).indexOf(u.atom),m=u.before?a(r).indexOf(u.before):a(r).length;if(d>=0&&m>=0){const f=a(e);d<m?l(e,[...f.slice(0,d),...f.slice(d+1,m),f[d],...f.slice(m)]):l(e,[...f.slice(0,m),f[d],...f.slice(m,d),...f.slice(d+1)])}break}}}):R(a=>a(o).atomList);return r},e,RU)}const LU=e=>typeof(e==null?void 0:e.then)=="function";function OU(e=()=>{try{return window.localStorage}catch(n){(Jp?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},t){var n;let s,o;const r={getItem:(u,d)=>{var m,f;const h=C=>{if(C=C||"",s!==C){try{o=JSON.parse(C,t==null?void 0:t.reviver)}catch{return d}s=C}return o},g=(f=(m=e())==null?void 0:m.getItem(u))!=null?f:null;return LU(g)?g.then(h):h(g)},setItem:(u,d)=>{var m;return(m=e())==null?void 0:m.setItem(u,JSON.stringify(d,void 0))},removeItem:u=>{var d;return(d=e())==null?void 0:d.removeItem(u)}},a=u=>(d,m,f)=>u(d,h=>{let g;try{g=JSON.parse(h||"")}catch{g=f}m(g)});let l;try{l=(n=e())==null?void 0:n.subscribe}catch{}return!l&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(l=(u,d)=>{if(!(e()instanceof window.Storage))return()=>{};const m=f=>{f.storageArea===e()&&f.key===u&&d(f.newValue)};return window.addEventListener("storage",m),()=>{window.removeEventListener("storage",m)}}),l&&(r.subscribe=a(l)),r}const DU=OU();function G5(e,t,n=DU,s){const o=s==null?void 0:s.getOnInit,r=R(o?n.getItem(e,t):t);return(Jp?"production":void 0)!=="production"&&(r.debugPrivate=!0),r.onMount=l=>{l(n.getItem(e,t));let u;return n.subscribe&&(u=n.subscribe(e,l,t)),u},R(l=>l(r),(l,u,d)=>{const m=typeof d=="function"?d(l(r)):d;return m===TU?(u(r,t),n.removeItem(e)):m instanceof Promise?m.then(f=>(u(r,f),n.setItem(e,f))):(u(r,m),n.setItem(e,m))})}const zb=new WeakMap;function jU(e,t){const n=H5(),s=UU(n);for(const[o,r]of e)s.has(o)||(s.add(o),n.set(o,r))}const UU=e=>{let t=zb.get(e);return t||(t=new WeakSet,zb.set(e,t)),t},FU="/static/cmc/assets/copilot-qr-dark-aggressive-banner-Dtr5ysxQ.webp",BU="/static/cmc/assets/copilot-qr-dark-aggressive-copied-popup-BRVm_KWU.webp",VU="/static/cmc/assets/copilot-qr-dark-aggressive-engaging-popup-YSBImXns.webp",HU="/static/cmc/assets/copilot-qr-dark-aggressive-secondday-popup--nxha975.webp",zU="/static/cmc/assets/copilot-qr-dark-aggressive-setting-TTFEOcbN.webp",GU="/static/cmc/assets/copilot-qr-dark-aggressive-think-deeper-popup-FHodYGgC.webp",WU="/static/cmc/assets/copilot-qr-dark-aggressive-thumbsup-card-DH3zTT3T.webp",$U="/static/cmc/assets/copilot-qr-dark-aggressive-thumbsup-popup-D7hBD_1Q.webp",qU="/static/cmc/assets/copilot-qr-dark-desktop-discover-strip-DnlsnV3g.webp",KU="/static/cmc/assets/copilot-qr-dark-desktop-setting-banner-CqsoJ8gk.webp",ZU="/static/cmc/assets/copilot-qr-dark-desktop-setting-menu-item-C25mGU_p.webp",YU="/static/cmc/assets/copilot-qr-light-aggressive-banner-CKv2a8_f.webp",QU="/static/cmc/assets/copilot-qr-light-aggressive-copied-popup-M4nhJM3H.webp",JU="/static/cmc/assets/copilot-qr-light-aggressive-engaging-popup-B-vXLUhP.webp",XU="/static/cmc/assets/copilot-qr-light-aggressive-secondday-popup-DBikSjcg.webp",eF="/static/cmc/assets/copilot-qr-light-aggressive-setting-D2OBsvlS.webp",tF="/static/cmc/assets/copilot-qr-light-aggressive-think-deeper-popup-D5tA7N2r.webp",nF="/static/cmc/assets/copilot-qr-light-aggressive-thumbsup-card-CwLVOvcv.webp",sF="/static/cmc/assets/copilot-qr-light-aggressive-thumbsup-popup-DM6aMFdv.webp",oF="/static/cmc/assets/copilot-qr-light-desktop-discover-strip-flsYDh7H.webp",rF="/static/cmc/assets/copilot-qr-light-desktop-setting-banner-C2lNCEe_.webp",aF="/static/cmc/assets/copilot-qr-light-desktop-setting-menu-item-BzBe-XWV.webp",Gb="/static/cmc/assets/copilot-qr-light-shopping-Dm2se5Rq.png",iF={appLayout:{showSettings:!0,showCookieBanner:!0,showSettingsRelyOnChatDetailLayout:!0,showMobileCrossSelling:!0},surfaceQueryParam:null,showScrollbarOnHover:!1,dailyBriefingOcid:"cp_msn_cmc",persistThemeChoice:!0,entraRedirectModalBehaviour:"replace",redirectBackEnabled:!0,crossPromotion:{discoverStrip:{dark:qU,light:oF,fontSize:"m"},settingMenuItem:{dark:ZU,light:aF},settingBanner:{dark:KU,light:rF},aggressive:{banner:{dark:FU,light:YU},setting:{dark:zU,light:eF},card:{thumbsUp:{dark:WU,light:nF}},popup:{secondDay:{dark:HU,light:XU},thumbsUp:{dark:$U,light:sF},copied:{dark:BU,light:QU},engaging:{dark:VU,light:JU},thinkDeeper:{dark:GU,light:tF}}}},connectorPlatform:{isGoogleDriveEnabled:!0,isGoogleCalendarEnabled:!0,isOutlookEnabled:!0,isOneDriveEnabled:!0,isGmailEnabled:!0,isGoogleContactsEnabled:!0,isEdgeBrowserEnabled:!0},proSubscription:{enabled:!0,manageRefId:"cmc",urlParams:{client:"cmc",ocids:{ActionsLimit:{freeTrial:"cmmmcpyae96",buy:"cmm46gj0qnu"},VoiceLimit:{freeTrial:"cmm0ghcr8ka",buy:"cmmxki6wg02"},Settings:{freeTrial:"cmma4vbm2dq",buy:"cmmugsiwg58"},MarketSelect:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652",market:"none"},PodcastLimit:{buy:"cmmtzkwxk60"},DeepResearchLimit:{buy:"cmmoe57pdco"}}},m365UrlParams:{ocids:{Management:{buy:"cmmw7mw3yqb"},"Management-FromWinNative":{buy:"cmmuqx95kk5"},Settings:{buy:"cmma1qqdrup"},"Settings-FromWinNative":{buy:"cmmgeuw7z2g"},Unknown:{buy:"cmmipliy5qj"},VisionLimit:{buy:"cmm1z6j7vhd"},"VisionLimit-FromWinNative":{buy:"cmmipxlurfj"},"VisionLimit-FromEdge":{buy:"cmmkxmbp63s"},"VisionLimit-FromEdgeCopilotMode":{buy:"cmmtardi03n"},PodcastLimit:{buy:"cmml80k74li"},"PodcastLimit-FromWinNative":{buy:"cmmeqe0ui7z"},"PodcastLimit-FromEdgeCopilotMode":{buy:"cmmxl5ui5bi"},ActionsLimit:{buy:"cmm77pn9501"},"ActionsLimit-FromWinNative":{buy:"cmm5tgy4bxa"},"ActionsLimit-FromEdgeCopilotMode":{buy:"cmmq2as5182"},DeepResearchLimit:{buy:"cmmnfbwmed3"},"DeepResearchLimit-FromWinNative":{buy:"cmmoehrafkb"},"DeepResearchLimit-FromEdgeCopilotMode":{buy:"cmm8w5fhoop"},UpsellProToPremium:{buy:"cmm7zptzbn8"},"UpsellProToPremium-FromWinNative":{buy:"cmmtftzk1ke"},UpsellPFToPremium:{buy:"cmmmomom1i8"},"UpsellPFToPremium-FromWinNative":{buy:"cmmmkce74lz"}}},upsellFromAuth0:{navigateToProSubPageAfterLogin:!0}},referralEnabled:!0,adsEnabled:!0,adsIdSyncEnabled:!0,adsShowroomEnabled:!0,thinkDeeperFreemiumEnabled:!0,monitorAccountChangesAcrossTabs:!0,shopping:{upsell:{banner:{light:Gb,dark:Gb}},showPdpSidepane:!0},sidebarNavigation:!0,showChatDetail:!0,enableAuth0:!0,settingsOverrides:{shouldShowActivityHistory:!0,shouldShowMemoryDelete:!0,shouldShowEdgePasswordsAccessSetting:!0},enableCustom1DS:!0,actions:{enableActions:()=>Promise.resolve(!0)},landingPage:{enableCentralComposer:!0,enableStarterPrompts:!0,enableAutoSuggest:!0,enableWidgets:!0,enablePromptedGreetings:!0,shouldFetchWidgetsData:!0,regexForAutoSuggest:/\S+/},supportsYouTubeVideos:!0,useMSALPwBApp:!0,isBotDetectionEnabled:!0,enableLabs:!0,supportsChatDetails:!0,pages:{enableEditorImageUpload:!0},webWorkerEnabled:!0,restrictPromptPassthroughDomains:!0,enableSearchMode:!0},ti=class ti{constructor(){O(this,"cfg",iF)}static instance(){return ti.singleton||(ti.singleton=new ti),ti.singleton}config(){return this.cfg}setConfig(t){this.cfg=t}};O(ti,"singleton",null);let re=ti;function cF(e,t){return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}function W5(e){const t=typeof window<"u"?window.matchMedia(e):null,[n,s]=c.useState(t==null?void 0:t.matches);return c.useEffect(()=>{t&&cF(t,o=>s(o.matches))},[e,t]),!!n}function A7(e){const{children:t,serverFallback:n=null}=e;return Xp()?t:n}function Xp(){return c.useSyncExternalStore(lF,()=>!0,()=>!1)}function lF(){return()=>{}}const k7={sm:"640",md:"768",lg:"1024",xl:"1280","2xl":"1536","3xl":"1920"};function gt(e){const{breakpoint:t}=e,n=k7[t],s=!W5(`(min-width: ${n}px)`);return Xp()?s:!1}function e1(e){const{breakpoint:t}=e,s=`(min-width: ${k7[t]}px)`,o=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia(s):null;return!(o!=null&&o.matches)}function Ft(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function V0(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function $5(e,t){const n=Ft(e);return isNaN(t)?V0(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const M7=typeof document<"u",uF=typeof navigator<"u";function dF(e,t){if(M7)return document.cookie.split(";").filter(n=>n.trim().startsWith(`${e}=`)).at(t)}function ia(e,t=0){const n=dF(e,t),s=n==null?void 0:n.split("=")[1];if(s)return decodeURIComponent(s)}function tl(e,t,n={}){const{expireDays:s,path:o="/",domain:r,secure:a=!0,host:l}=n;if(!M7)return;let u=e;a&&!r&&o==="/"&&l&&(u=`__Host-${e}`);let d=`${u}=${encodeURIComponent(t)}; path=${o}`;if(s){const m=$5(new Date,s);d+=`; expires=${m.toUTCString()}`}r&&(d+=`; domain=${r}`),a&&(d+="; secure"),document.cookie=d}function N7(e,t={}){tl(e,"",{...t,expireDays:-1})}const Sc={name:"CMCCP",expirationDays:365},t1={name:"BCP"},mF="3PAdsOptOut";function q5(){return ia(Sc.name)??ia(t1.name)}function Wb(e,t){const{analytics:n,advertising:s,socialMedia:o}=e,r=new URLSearchParams;r.set("AD",s?"1":"0"),r.set("AL",n?"1":"0"),r.set("SM",o?"1":"0");const a=$5(new Date,t);return r.set("expires",a.getTime().toString()),r.toString()}function fF(e){tl(Sc.name,Wb(e,Sc.expirationDays),{expireDays:Sc.expirationDays}),tl(t1.name,Wb(e,Sc.expirationDays),{expireDays:Sc.expirationDays})}function Ni(){const e=ia(t1.name);if(!e)return{advertising:!1,analytics:!1,socialMedia:!1};const t=new URLSearchParams(e),n=t.get("AD")==="1",s=t.get("AL")==="1",o=t.get("SM")==="1";return{advertising:n,analytics:s,socialMedia:o}}function R7(){const e=ia(mF)!=="1";return uF?navigator.globalPrivacyControl?!1:e:!1}const $b="mobileCrossSellingLastClosed",tg="mobilePromoCountClose",H0="hasBeenAuthenticated",$r="colorTheme",n1="newConversationsStarted",nl="timeOfNewConversationThreshold",z0="hasResetConversationDisclaimer",G0="banAppealSubmitted",pF="hideDeleteConversationModal",hF="hasBeenPromptedForLocation",gF="hasSeenCharacter",qb="voiceAppearanceId",Kb="voiceLiveCaptionEnabled",vF="disableAppearanceOnHomeScreen",P7="hasSeenAppearance",CF="hasSeenAppearanceEducationPopup",L7="hasSeenAppearanceOnVoiceCall",yF="hasSeenFirstRunExperienceAnimation",bF="hasUsedAppearanceColorShuffler",xF="hasUsedAppearanceVoiceCustomization",Zb="actionOnAppearanceDiscoveryCta",SF="hasDismissedAppearanceModal",W0="crossPromoFirstVisit",K5="crossPromoDiscoverStripLastClosed",Xf="crossPromoDiscoverStripCountClose",vSe="crossPromoStripGetAppIsClicked",Yb="reviewActiveDays",$0="reviewPromptResponse",ep="userSidebarOpen",CSe="referralEligibilityStatus",ySe="referralHasSeenEntryNewBadge",EF="coachmark",q0="isMsalSilentSsoEnabled",K0="isStartRetryEnabled",O7="user.UserFirstName",Z0="loginStartTime",Y0="reauthLoginFlag",bSe="subscription.m365SubscriberFRE",Qb="userConversationVoiceSpeed",Q0="tokenRetryMax2",J0="tokenRetryMax2Auth0",wF="copilotBeta",IF="copilotBetaAnnouncementRequired",X0="isMsalV4Upgrade",or="copilotMsalLoginHint",Jb="msalSilentSsoLastRunAt",tp="msalLoginSdkVersion",_F="copilotVisionLastClicked",TF="hasEnteredGalleryDetailFromHome",xSe="portraitsConfig",e2="isReauthRedirectEnabled",kd="persistConversationMode",Xb="hasOctoberMomentNotificationDismissedLsKey";function An(e,t){typeof window<"u"&&localStorage.setItem(e,t)}function rn(e){return typeof window<"u"?localStorage.getItem(e):null}function jt(e){typeof window<"u"&&localStorage.removeItem(e)}function wt(e,t){const n=rn(e);if(!n)return null;try{const s=JSON.parse(n);return t.parse(s)}catch{return null}}function Vn(e,t,n){try{t.parse(n),An(e,JSON.stringify(n))}catch{}}const Z5=Re([w("open"),w("close")]),D7=x({sidebarVisibility:Z5.optional()});function AF(e){Vn(ep,D7,{sidebarVisibility:e}),tl(ep,e,{expireDays:365*10})}function kF(e){const t=Z5.safeParse(e);return t.success?t.data:"close"}function j7(){var n;const e=Z5.safeParse(ia(ep));if(e.success)return e.data;const t=(n=wt(ep,D7))==null?void 0:n.sidebarVisibility;return kF(t)}function MF(){return re.instance().config().sidebarNavigation?j7()!=="close":!1}const Dc=R({left:MF(),right:!1}),Fo=R(e=>e(Dc).left,(e,t,n)=>{const s=e(Dc);t(Dc,{left:n,right:n&&e1({breakpoint:"xl"})?!1:s.right})}),Md=R(e=>e(Dc).right,(e,t,n)=>{const s=e(Dc);t(Dc,{left:n&&e1({breakpoint:"xl"})?!1:s.left,right:n})}),U7=c.createContext(null),ng={didCatch:!1,error:null};class F7 extends c.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=ng}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,s,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];(n=(s=this.props).onReset)===null||n===void 0||n.call(s,{args:r,reason:"imperative-api"}),this.setState(ng)}}componentDidCatch(t,n){var s,o;(s=(o=this.props).onError)===null||s===void 0||s.call(o,t,n)}componentDidUpdate(t,n){const{didCatch:s}=this.state,{resetKeys:o}=this.props;if(s&&n.error!==null&&NF(t.resetKeys,o)){var r,a;(r=(a=this.props).onReset)===null||r===void 0||r.call(a,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(ng)}}render(){const{children:t,fallbackRender:n,FallbackComponent:s,fallback:o}=this.props,{didCatch:r,error:a}=this.state;let l=t;if(r){const u={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")l=n(u);else if(s)l=c.createElement(s,u);else if(o!==void 0)l=o;else throw a}return c.createElement(U7.Provider,{value:{didCatch:r,error:a,resetErrorBoundary:this.resetErrorBoundary}},l)}}function NF(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,s)=>!Object.is(n,t[s]))}function RF(e){if(e==null||typeof e.didCatch!="boolean"||typeof e.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function B7(){const e=c.useContext(U7);RF(e);const[t,n]=c.useState({error:null,hasError:!1}),s=c.useMemo(()=>({resetBoundary:()=>{e.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:o=>n({error:o,hasError:!0})}),[e.resetErrorBoundary]);if(t.hasError)throw t.error;return s}const Y5=R(!1),cn=R(null),Ri=R(e=>{const t=e(cn);return t?t.accountType==="AAD":!1}),Q5=R(e=>{const t=e(cn);return t?t.accountType==="MSA":!1}),V7=R(e=>e(cn)!==null),qr=R(null),PF=R(!0);var H7=Symbol.for("immer-nothing"),e4=Symbol.for("immer-draftable"),xt=Symbol.for("immer-state");function zs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sl=Object.getPrototypeOf;function ol(e){return!!e&&!!e[xt]}function mr(e){var t;return e?z7(e)||Array.isArray(e)||!!e[e4]||!!((t=e.constructor)!=null&&t[e4])||o1(e)||r1(e):!1}var LF=Object.prototype.constructor.toString();function z7(e){if(!e||typeof e!="object")return!1;const t=sl(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===LF}function qu(e,t){s1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function s1(e){const t=e[xt];return t?t.type_:Array.isArray(e)?1:o1(e)?2:r1(e)?3:0}function t2(e,t){return s1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function G7(e,t,n){const s=s1(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function OF(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function o1(e){return e instanceof Map}function r1(e){return e instanceof Set}function Tn(e){return e.copy_||e.base_}function n2(e,t){if(o1(e))return new Map(e);if(r1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=z7(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[xt];let o=Reflect.ownKeys(s);for(let r=0;r<o.length;r++){const a=o[r],l=s[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[a]})}return Object.create(sl(e),s)}else{const s=sl(e);if(s!==null&&n)return{...e};const o=Object.create(s);return Object.assign(o,e)}}function J5(e,t=!1){return a1(e)||ol(e)||!mr(e)||(s1(e)>1&&(e.set=e.add=e.clear=e.delete=DF),Object.freeze(e),t&&Object.entries(e).forEach(([n,s])=>J5(s,!0))),e}function DF(){zs(2)}function a1(e){return Object.isFrozen(e)}var s2={};function yi(e){const t=s2[e];return t||zs(0,e),t}function jF(e,t){s2[e]||(s2[e]=t)}var Ku;function np(){return Ku}function UF(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function t4(e,t){t&&(yi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function o2(e){r2(e),e.drafts_.forEach(FF),e.drafts_=null}function r2(e){e===Ku&&(Ku=e.parent_)}function n4(e){return Ku=UF(Ku,e)}function FF(e){const t=e[xt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function s4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[xt].modified_&&(o2(t),zs(4)),mr(e)&&(e=sp(t,e),t.parent_||op(t,e)),t.patches_&&yi("Patches").generateReplacementPatches_(n[xt].base_,e,t.patches_,t.inversePatches_)):e=sp(t,n,[]),o2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==H7?e:void 0}function sp(e,t,n){if(a1(t))return t;const s=t[xt];if(!s)return qu(t,(o,r)=>o4(e,s,t,o,r,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return op(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let r=o,a=!1;s.type_===3&&(r=new Set(o),o.clear(),a=!0),qu(r,(l,u)=>o4(e,s,o,l,u,n,a)),op(e,o,!1),n&&e.patches_&&yi("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function o4(e,t,n,s,o,r,a){if(ol(o)){const l=r&&t&&t.type_!==3&&!t2(t.assigned_,s)?r.concat(s):void 0,u=sp(e,o,l);if(G7(n,s,u),ol(u))e.canAutoFreeze_=!1;else return}else a&&n.add(o);if(mr(o)&&!a1(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;sp(e,o),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&op(e,o)}}function op(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&J5(t,n)}function BF(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:np(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=s,r=X5;n&&(o=[s],r=Zu);const{revoke:a,proxy:l}=Proxy.revocable(o,r);return s.draft_=l,s.revoke_=a,l}var X5={get(e,t){if(t===xt)return e;const n=Tn(e);if(!t2(n,t))return VF(e,n,t);const s=n[t];return e.finalized_||!mr(s)?s:s===sg(e.base_,t)?(og(e),e.copy_[t]=Yu(s,e)):s},has(e,t){return t in Tn(e)},ownKeys(e){return Reflect.ownKeys(Tn(e))},set(e,t,n){const s=W7(Tn(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const o=sg(Tn(e),t),r=o==null?void 0:o[xt];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(OF(n,o)&&(n!==void 0||t2(e.base_,t)))return!0;og(e),nr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return sg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,og(e),nr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Tn(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){zs(11)},getPrototypeOf(e){return sl(e.base_)},setPrototypeOf(){zs(12)}},Zu={};qu(X5,(e,t)=>{Zu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Zu.deleteProperty=function(e,t){return Zu.set.call(this,e,t,void 0)};Zu.set=function(e,t,n){return X5.set.call(this,e[0],t,n,e[0])};function sg(e,t){const n=e[xt];return(n?Tn(n):e)[t]}function VF(e,t,n){var o;const s=W7(t,n);return s?"value"in s?s.value:(o=s.get)==null?void 0:o.call(e.draft_):void 0}function W7(e,t){if(!(t in e))return;let n=sl(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=sl(n)}}function nr(e){e.modified_||(e.modified_=!0,e.parent_&&nr(e.parent_))}function og(e){e.copy_||(e.copy_=n2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var HF=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const r=n;n=t;const a=this;return function(u=r,...d){return a.produce(u,m=>n.call(this,m,...d))}}typeof n!="function"&&zs(6),s!==void 0&&typeof s!="function"&&zs(7);let o;if(mr(t)){const r=n4(this),a=Yu(t,void 0);let l=!0;try{o=n(a),l=!1}finally{l?o2(r):r2(r)}return t4(r,s),s4(o,r)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===H7&&(o=void 0),this.autoFreeze_&&J5(o,!0),s){const r=[],a=[];yi("Patches").generateReplacementPatches_(t,o,r,a),s(r,a)}return o}else zs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(a,...l)=>this.produceWithPatches(a,u=>t(u,...l));let s,o;return[this.produce(t,n,(a,l)=>{s=a,o=l}),s,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mr(e)||zs(8),ol(e)&&(e=zF(e));const t=n4(this),n=Yu(e,void 0);return n[xt].isManual_=!0,r2(t),n}finishDraft(e,t){const n=e&&e[xt];(!n||!n.isManual_)&&zs(9);const{scope_:s}=n;return t4(s,t),s4(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const s=yi("Patches").applyPatches_;return ol(e)?s(e,t):this.produce(e,o=>s(o,t))}};function Yu(e,t){const n=o1(e)?yi("MapSet").proxyMap_(e,t):r1(e)?yi("MapSet").proxySet_(e,t):BF(e,t);return(t?t.scope_:np()).drafts_.push(n),n}function zF(e){return ol(e)||zs(10,e),$7(e)}function $7(e){if(!mr(e)||a1(e))return e;const t=e[xt];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=n2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=n2(e,!0);return qu(n,(s,o)=>{G7(n,s,$7(o))}),t&&(t.finalized_=!1),n}function GF(){class e extends Map{constructor(u,d){super(),this[xt]={type_:2,parent_:d,scope_:d?d.scope_:np(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Tn(this[xt]).size}has(u){return Tn(this[xt]).has(u)}set(u,d){const m=this[xt];return a(m),(!Tn(m).has(u)||Tn(m).get(u)!==d)&&(n(m),nr(m),m.assigned_.set(u,!0),m.copy_.set(u,d),m.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const d=this[xt];return a(d),n(d),nr(d),d.base_.has(u)?d.assigned_.set(u,!1):d.assigned_.delete(u),d.copy_.delete(u),!0}clear(){const u=this[xt];a(u),Tn(u).size&&(n(u),nr(u),u.assigned_=new Map,qu(u.base_,d=>{u.assigned_.set(d,!1)}),u.copy_.clear())}forEach(u,d){const m=this[xt];Tn(m).forEach((f,h,g)=>{u.call(d,this.get(h),h,this)})}get(u){const d=this[xt];a(d);const m=Tn(d).get(u);if(d.finalized_||!mr(m)||m!==d.base_.get(u))return m;const f=Yu(m,d);return n(d),d.copy_.set(u,f),f}keys(){return Tn(this[xt]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const d=u.next();return d.done?d:{done:!1,value:this.get(d.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const d=u.next();if(d.done)return d;const m=this.get(d.value);return{done:!1,value:[d.value,m]}}}}[Symbol.iterator](){return this.entries()}}function t(l,u){return new e(l,u)}function n(l){l.copy_||(l.assigned_=new Map,l.copy_=new Map(l.base_))}class s extends Set{constructor(u,d){super(),this[xt]={type_:3,parent_:d,scope_:d?d.scope_:np(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Tn(this[xt]).size}has(u){const d=this[xt];return a(d),d.copy_?!!(d.copy_.has(u)||d.drafts_.has(u)&&d.copy_.has(d.drafts_.get(u))):d.base_.has(u)}add(u){const d=this[xt];return a(d),this.has(u)||(r(d),nr(d),d.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const d=this[xt];return a(d),r(d),nr(d),d.copy_.delete(u)||(d.drafts_.has(u)?d.copy_.delete(d.drafts_.get(u)):!1)}clear(){const u=this[xt];a(u),Tn(u).size&&(r(u),nr(u),u.copy_.clear())}values(){const u=this[xt];return a(u),r(u),u.copy_.values()}entries(){const u=this[xt];return a(u),r(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,d){const m=this.values();let f=m.next();for(;!f.done;)u.call(d,f.value,f.value,this),f=m.next()}}function o(l,u){return new s(l,u)}function r(l){l.copy_||(l.copy_=new Set,l.base_.forEach(u=>{if(mr(u)){const d=Yu(u,l);l.drafts_.set(u,d),l.copy_.add(d)}else l.copy_.add(u)}))}function a(l){l.revoked_&&zs(3,JSON.stringify(Tn(l)))}jF("MapSet",{proxyMap_:t,proxySet_:o})}var Ts=new HF,Un=Ts.produce;Ts.produceWithPatches.bind(Ts);Ts.setAutoFreeze.bind(Ts);Ts.setUseStrictShallowCopy.bind(Ts);Ts.applyPatches.bind(Ts);Ts.createDraft.bind(Ts);Ts.finishDraft.bind(Ts);function SSe(e){return e}function i1(e){const t=R(e,(n,s,o)=>s(t,Un(n(t),typeof o=="function"?o:()=>o)));return t}function hl(e,t){const n=se(e);return c.useCallback(s=>n(Un(s)),[n])}function q7(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=q7(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function ue(){for(var e,t,n=0,s="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=q7(e))&&(s&&(s+=" "),s+=t);return s}const Nd={Namibia:"NA","South Africa":"ZA",Cameroon:"CM",Japan:"JP",Ghana:"GH",Ethiopia:"ET","United States":"US","United Arab Emirates":"AE",Bahrain:"BH",Djibouti:"DJ",Algeria:"DZ",Egypt:"EG","Western Sahara":"EH",Eritrea:"ER",Israel:"IL",Iraq:"IQ",Jordan:"JO",Comoros:"KM",Kuwait:"KW",Lebanon:"LB",Libya:"LY",Morocco:"MA",Mauritania:"MR",Oman:"OM","Palestinian Territories":"PS",Qatar:"QA","Saudi Arabia":"SA",Sudan:"SD",Somalia:"SO","South Sudan":"SS",Syria:"SY",Chad:"TD",Tunisia:"TN",Yemen:"YE",Chile:"CL",India:"IN",Tanzania:"TZ",Spain:"ES",Azerbaijan:"AZ",Russia:"RU",Belarus:"BY",Zambia:"ZM",Bulgaria:"BG",Mali:"ML",Bangladesh:"BD","China mainland":"CN",France:"FR","Bosnia & Herzegovina":"BA",Andorra:"AD",Italy:"IT",Philippines:"PH",Uganda:"UG",Iran:"IR",Czechia:"CZ","United Kingdom":"GB",Denmark:"DK",Greenland:"GL",Kenya:"KE",Austria:"AT",Belgium:"BE",Switzerland:"CH",Germany:"DE",Liechtenstein:"LI",Luxembourg:"LU",Niger:"NE",Maldives:"MV",Senegal:"SN",Bhutan:"BT",Togo:"TG",Cyprus:"CY",Greece:"GR","Antigua & Barbuda":"AG",Anguilla:"AI",Albania:"AL",Argentina:"AR","American Samoa":"AS",Australia:"AU",Barbados:"BB",Burundi:"BI",Bermuda:"BM",Brunei:"BN",Brazil:"BR",Bahamas:"BS",Botswana:"BW",Belize:"BZ",Canada:"CA","Cocos (Keeling) Islands":"CC","Cook Islands":"CK",Colombia:"CO","Cape Verde":"CV","Christmas Island":"CX","Diego Garcia":"DG",Dominica:"DM",Estonia:"EE",Finland:"FI",Fiji:"FJ","Falkland Islands":"FK",Micronesia:"FM",Grenada:"GD",Guernsey:"GG",Gibraltar:"GI",Gambia:"GM",Guam:"GU",Guyana:"GY","Hong Kong":"HK",Hungary:"HU",Indonesia:"ID",Ireland:"IE","Isle of Man":"IM","Chagos Archipelago":"IO",Jersey:"JE",Jamaica:"JM",Kiribati:"KI","St. Kitts & Nevis":"KN","South Korea":"KR","Cayman Islands":"KY","St. Lucia":"LC",Liberia:"LR",Lesotho:"LS",Lithuania:"LT",Latvia:"LV",Madagascar:"MG","Marshall Islands":"MH","Myanmar (Burma)":"MM",Macao:"MO","Northern Mariana Islands":"MP",Montserrat:"MS",Malta:"MT",Mauritius:"MU",Malawi:"MW",Mexico:"MX",Malaysia:"MY","Norfolk Island":"NF",Nigeria:"NG",Netherlands:"NL",Norway:"NO",Nauru:"NR",Niue:"NU","New Zealand":"NZ","Papua New Guinea":"PG",Pakistan:"PK",Poland:"PL","Pitcairn Islands":"PN","Puerto Rico":"PR",Portugal:"PT",Palau:"PW",Rwanda:"RW","Solomon Islands":"SB",Seychelles:"SC",Sweden:"SE",Singapore:"SG","St. Helena":"SH",Slovenia:"SI",Slovakia:"SK","Sierra Leone":"SL","Sint Maarten":"SX",Eswatini:"SZ","Turks & Caicos Islands":"TC",Thailand:"TH",Tokelau:"TK",Tonga:"TO",Trkiye:"TR","Trinidad & Tobago":"TT",Tuvalu:"TV",Taiwan:"TW",Ukraine:"UA","U.S. Outlying Islands":"UM","St. Vincent & Grenadines":"VC","British Virgin Islands":"VG","U.S. Virgin Islands":"VI",Vanuatu:"VU",Samoa:"WS",Zimbabwe:"ZW",Bolivia:"BO","Caribbean Netherlands":"BQ","Costa Rica":"CR",Cuba:"CU",Curaao:"CW","Dominican Republic":"DO","Ceuta & Melilla":"EA",Ecuador:"EC","Equatorial Guinea":"GQ",Guatemala:"GT",Honduras:"HN",Haiti:"HT","Canary Islands":"IC",Nicaragua:"NI",Panama:"PA",Peru:"PE",Paraguay:"PY","El Salvador":"SV",Uruguay:"UY",Venezuela:"VE",Afghanistan:"AF","Burkina Faso":"BF",Guinea:"GN","Guinea-Bissau":"GW","Faroe Islands":"FO",Benin:"BJ","St. Barthlemy":"BL","Congo - Kinshasa":"CD","Central African Republic":"CF","Congo - Brazzaville":"CG","Cte d'Ivoire":"CI",Gabon:"GA","French Guiana":"GF",Guadeloupe:"GP",Monaco:"MC","St. Martin":"MF",Martinique:"MQ","New Caledonia":"NC","French Polynesia":"PF","St. Pierre & Miquelon":"PM",Runion:"RE","Wallis & Futuna":"WF",Mayotte:"YT",Croatia:"HR",Armenia:"AM",Iceland:"IS","San Marino":"SM","Vatican City":"VA",Georgia:"GE",Kazakhstan:"KZ",Cambodia:"KH","North Korea":"KP",Kyrgyzstan:"KG",Angola:"AO",Laos:"LA",Mozambique:"MZ","North Macedonia":"MK",Mongolia:"MN","Svalbard & Jan Mayen":"SJ",Nepal:"NP",Aruba:"AW",Suriname:"SR","So Tom & Prncipe":"ST","Timor-Leste":"TL",Moldova:"MD",Romania:"RO","Sri Lanka":"LK",Kosovo:"XK",Montenegro:"ME",Serbia:"RS","land Islands":"AX",Tajikistan:"TJ",Turkmenistan:"TM",Uzbekistan:"UZ",Vietnam:"VN"},K7=["blowing-dust","blowing-sand","blowing-snow","clear","clear-occasional-rain-or-thunderstorms","clear-then-cloudy","clear-then-occasional-rain","clear-then-occasional-snow","clear-then-rain","clear-then-rain-or-snow","clear-then-rain-or-thunderstorms","clear-then-snow","clear-then-snow-or-rain","clear-then-thunderstorms","clear-with-isolated-snow","clear-with-isolated-thunderstorms","clear-with-occasional-clouds","clear-with-occasional-rain","clear-with-occasional-rain-or-snow","clear-with-occasional-snow","clear-with-occasional-snow-or-rain","cloudy","cloudy-and-occasionally-clear","cloudy-occasional-rain-or-thunderstorms","cloudy-then-clear","cloudy-then-occasional-rain","cloudy-then-occasional-snow","cloudy-then-occasionally-clear","cloudy-then-rain","cloudy-then-rain-or-snow","cloudy-then-rain-or-thunderstorms","cloudy-then-snow","cloudy-then-snow-or-rain","cloudy-with-isolated-rain","cloudy-with-occasional-rain","cloudy-with-occasional-rain-or-snow","cloudy-with-occasional-snow","cloudy-with-occasional-snow-or-rain","cloudy-with-thundersnow-at-times","drifting-sand","drifting-snow","drizzle","duststorm","fair","fog","freezing-drizzle","freezing-fog","freezing-rain","hail","haze","heavy-drizzle","heavy-rain","heavy-snow","heavy-thunderstorms","ice-pellets","light-drizzle","light-fog","light-freezing-drizzle","light-freezing-rain","light-hail","light-rain","light-rain-and-snow","light-rain-and-snow-shower","light-rain-shower","light-snow","light-snow-shower","mostly-clear","mostly-cloudy","mostly-sunny","partly-cloudy","partly-sunny","patchy-fog","rain","rain-and-occasionally-clear","rain-and-occasionally-cloudy","rain-and-snow","rain-and-snow-shower","rain-or-snow","rain-or-snow-then-clear","rain-or-snow-then-cloudy","rain-showers","rain-then-clear","rain-then-cloudy","rain-then-occasional-snow","rain-turning-to-snow","rain-with-occasional-snow","severe-duststorm","sleet","smoke","snow","snow-and-occasionally-clear","snow-and-occasionally-cloudy","snow-or-rain","snow-or-rain-then-clear","snow-or-rain-then-cloudy","snow-showers","snow-then-clear","snow-then-cloudy","snow-then-rain","squalls","sunny","thundersnow","thunderstorms","unknown","windy-rainstorm","windy-with-heavy-snow"],WF=["adult","teen"],$F=["twenty-four-hours","one-day","five-days","one-week","one-month","one-year","five-years","max"],qF=["pro","m365-basic","m365-personal-classic","m365-family-classic-admin","m365-family-classic-guest","m365-personal","m365-family-admin","m365-family-guest","m365-premium-admin","m365-premium-guest"],KF=["direct","apple","google","retail"],ZF=["guest","free","m365-personal","pro","m365-premium"],YF=["python"],QF=["ready","disconnected","disabled","sign-in-required","unavailable"],Z7=["google-drive","google-calendar","gmail","one-drive","outlook","outlook-calendar","google-contacts","edge-browser","unknown"],JF=["implicit-consent","explicit-consent"],XF=5,Y7=10240,ESe=100,wSe=2,eB=15e3,tB=372,nB=352,Q7=6,ct={mediaViewer:"z-10",composer:"z-10",composerBottomSlot:"z-20",coachmark:"z-30",chatScrollToBottomButton:"z-20",babylonCharacter:"z-10",citations:"z-40",settings:"z-30",audioBase:"z-10",audioDisplayContent:"z-40",modalBackground:"z-30",modal:"z-40",sidebar:"z-40",sidebarSmallScreen:"max-md:z-40",tooltip:"z-40",toastNotification:"z-50",dropdownMenuOverModal:"z-50",pages:{warning:"z-10",chat:"z-20",chatSmallScreenOverlay:"z-50",floatingMenu:"z-50"},shopping:{navigation:"z-10"},stickyHeader:"z-20",headerIcon:"z-30",header:"z-[60]",default:"z-0",labs3d:{errorPage:"z-20"},composerDimmedBackground:"z-40",composerModalOnDimmedBackground:"z-50",citationHoverCard:"z-40"},ts={default:.15,slow:.5,composerButton:.2,settings:.1,audio:{available:.5,unavailable:2,deepLinkLanding:.5},suggestions:.2,dailyBriefing:{background:.5,sourcePopoverScale:.2,sourcePopoverOpacity:.15}},ISe=.25,_Se=2,TSe=0,sB=1.5,J7=2e3,oB=1e3,rB=.25,Fe={opacity:0},nt={opacity:1},aB=.2,iB=.025,ASe={initial:Fe,animate:{...nt,transition:{delayChildren:aB,staggerChildren:iB}}},ev={willChange:"auto"},cB="9188040d-6c67-4c5b-b112-36a304b66dad",rg="copilot.cloud.microsoft",kSe=ue("mt-px text-end uppercase text-foreground-450 text-xs dark:text-foreground-600"),MSe="flex items-center justify-between text-start",lB=["Austria","Belgium","Brazil","Bulgaria","Canada","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Netherlands","Norway","China mainland","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland","Trkiye","United Kingdom"],c1=lB.map(e=>Nd[e]),uB=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],dB=uB.map(e=>Nd[e]),mB=["Belarus","China mainland","Lebanon","Macao","Russia","Venezuela","North Korea","Cuba","Syria","Iran"],tv=mB.map(e=>Nd[e]),fB="https://account.live.com/ep",X7="Think Deeper",eS="Smart",tS="Smart (GPT-5)",pB="Search",NSe=1500,rp=24*60*60*1e3,hB=5,nv=451,nS="Not allowed child account",sv="LEGALLY_UNAVAILABLE_STATUS",a2=3,ag=[80,100,110,125,150],Rd=100,gB=1e3,vB=!1,r4=!1,CB=!1,RSe="/chats/private",ap=3,Pd="userInput";function fs(e){const{key:t,schema:n,initialValue:s}=e;return G5(t,s,{getItem:()=>wt(t,n)??s,setItem:(r,a)=>{a===void 0?jt(t):Vn(t,n,a)},removeItem:()=>jt(t)},{getOnInit:!0})}class l1 extends Error{constructor(n,s){super(n);O(this,"endpoint");O(this,"status");this.name="ApiError",this.endpoint=s.route,this.status=s.statusCode}get route(){return this.endpoint}get statusCode(){return this.status}}function Qr(e){const t=e.split("://");return t.length===1?`https://${e}`:t[0]==="http"?`https://${t[1]}`:e}async function yB(e){return new Promise(t=>{let n=!1;e==null||e.catch(s=>{s instanceof Error?(n=!0,t(`Type: ${s.name}, Message: ${s.message}, Stack: ${s.stack}`)):(n=!0,t(`Type: ${typeof s}, Value: ${JSON.stringify(s)}`))}),setTimeout(()=>{n||t("Promise.catch wasn't called. The Promise is not rejected.")},1e3)})}function bB(e){let t;return"route"in e&&typeof e.route=="string"&&(t=e.route),t}function xB(e,t){if(!("route"in e)){const n=e;n.route=t}}function pe(e){return $e().get(e)}const ov=R(!1);function sS(e){const{children:t}=e;return Ld()?t:null}function Ld(){return M(ov)}function oS(){return pe(ov)}const rS=R([]),a4=new Map,SB=R(!0),EB=["sidebar-narrow","sidebar-settings","sidebar-compact-nav-items","composer-v4","library"],ya=e=>{if(!oS()&&EB.includes(e))return SB;let t=a4.get(e);return t||(t=R(n=>n(rS).includes(e)),a4.set(e,t),t)};function W(e){return M(ya(e))}function be(e){return $e().get(ya(e))}function Gt(e){return M(ya(e))}function _t(e){return $e().get(ya(e))}class wB{constructor(){O(this,"latestClientExperimentationAssignmentRequestId",null);O(this,"latestApiExperimentationAssignmentRequestId",null)}getTraceIdAnalytics(){return{TraceId_LastClientAssignment:this.latestClientExperimentationAssignmentRequestId,TraceId_Latest:this.latestApiExperimentationAssignmentRequestId}}trackClientExperimentationAssignment(t){const n=this.getTraceIdFromResponseHeaders(t);n&&(this.latestClientExperimentationAssignmentRequestId=n)}trackLatestApiAssignment(t){const n=this.getTraceIdFromResponseHeaders(t);n&&(this.latestApiExperimentationAssignmentRequestId=n)}trackLatestChatConnectedAssignment(t){const{requestId:n}=t;this.latestApiExperimentationAssignmentRequestId=n}getTraceIdFromResponseHeaders(t){return(t.get("x-ceto-ref")??"").split("|")[0]??null}}const Qu=new wB;function rv(){return"2028ea2"}function IB(){return`mscmc@${rv().substring(0,7)}`}const ni=class ni{constructor(){O(this,"listeners",new Map)}static getInstance(){return ni.instance||(ni.instance=new ni),ni.instance}on(t,n){var s;this.listeners.has(t)||this.listeners.set(t,[]),(s=this.listeners.get(t))==null||s.push(n)}emit(t,n){const s=this.listeners.get(t);if(s)for(const o of s)o(n)}off(t,n){const s=this.listeners.get(t);s&&this.listeners.set(t,s.filter(o=>o!==n))}};O(ni,"instance",null);let i2=ni;const Ge=i2.getInstance();function _B(e){let t="unknown";try{const n=/(?:CopilotNative|BingNative|MicrosoftLauncher)\/([0-9]+(?:\.[0-9]+)*(?:-[a-zA-Z0-9]+)?)/,s=e==null?void 0:e.match(n);if(s!=null&&s[1]){const[,o]=s;t=o}return t}catch{return t}}function ca(e,t){typeof sessionStorage>"u"||sessionStorage.setItem(e,t)}function fr(e){return typeof sessionStorage>"u"?null:sessionStorage.getItem(e)}function PSe(e){return fr(e)==="true"}function TB(e){typeof sessionStorage>"u"||sessionStorage.removeItem(e)}const ps=x({partId:p()}),gl=x({event:w("invokeAction"),actionId:p()}),AB=["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv","application/json","application/xml","text/html","text/css","text/javascript","text/markdown","application/javascript","image/jpeg","image/png","image/gif","image/svg+xml","image/webp","audio/mpeg","audio/wav","audio/ogg","video/mp4","video/webm","video/ogg","application/zip","application/x-rar-compressed","application/x-7z-compressed"],kB=ke(YF),Od=ke(AB),MB=x({type:w("code"),language:kB,content:p()}),NB=x({type:w("file"),url:p().refine(e=>e.startsWith("/")||Tt().safeParse(e).success,{error:"Must be a valid URL or relative path"}),name:p(),contentType:Od}),RB=x({type:w("browser"),screenshot:p().optional(),tabIds:j().array().optional(),activeTabId:j().optional()}),PB=st("type",[MB,NB,RB]),aS=Re([w("running"),w("completed"),w("failed")]),LB=x({title:p(),status:aS}),iS=x({status:aS,title:p(),steps:L(LB),artifacts:L(PB)}),cS=ps.extend({type:w("activity"),activity:iS}),fn=x({amount:j(),currency:p().nullable(),currencySymbol:p().nullable()}),OB=ke(["current-search-term","recent-searches","age","gender","website-visits","interests","custom-audience","similar-audience","profile-targeting"]);ke(["multimedia","product","tourActivity","propertyPromotion","text","miniShowroom","mainShowroom"]);const DB=ke(["top","bottom","left","right"]),lS=x({adDomain:p(),advertiser:x({name:p(),country:p()}),isVerified:he(),selectionReasons:L(OB)}),Pi=x({url:p(),urlPingSuffix:p()}),vr=x({url:p(),width:j().nullish(),height:j().nullish(),link:Pi.nullish(),impressionToken:p().nullish()}),uS=x({downPayment:p(),description:p()}),jB=x({rating:j(),link:Pi,impressionToken:p()}),Dd=x({businessName:p(),image:vr,impressionToken:p().nullish()}),av=x({text:p(),url:p(),urlPingSuffix:p()}),UB=x({title:p(),text:p(),url:p(),layout:ke(["inline","overlay"])}),vl=x({impressionToken:p(),selectionCriteria:lS}),dS=x({rowIndex:cr(),columnIndex:cr(),textPosition:DB,imagesPerRow:cr()}),FB=vl.extend({type:w("multimedia"),description:p(),title:p(),displayUrl:p(),link:Pi,image:vr.nullish(),logo:Dd.nullish(),action:av.nullish()}),jd=x({category:p(),value:p()}),mS=x({seller:p(),link:Pi,price:fn,lowPrice:fn.nullish(),item:x({name:p(),image:vr})}),fS=x({isFree:he(),description:p()}),pS=vl.extend({type:w("product"),offer:mS,tags:L(jd).nullish(),shipping:fS.nullish(),productRating:jB.nullish(),installment:uS.nullish(),pricePerUnit:p().nullish(),energyRating:p().nullish()}),hS=vl.extend({type:w("tourActivity"),title:p(),domain:p(),startingPrice:fn,image:vr,link:Pi,tags:L(jd).nullish()}),gS=vl.extend({type:w("propertyPromotion"),title:p(),domain:p(),price:fn,image:vr,link:Pi,tags:L(jd).nullish()}),BB=vl.extend({type:w("text"),title:p(),description:p(),displayUrl:p(),link:Pi,image:vr.nullish(),logo:Dd.nullish(),disclaimer:UB.nullish()}),VB=vl.extend({type:w("miniShowroom"),title:p(),description:p(),displayUrl:p(),image:vr,logo:Dd.nullish(),brandId:p().nullish(),brandBackground:cr().nullish()}),vS=x({impressionToken:p(),layout:dS,selectionCriteria:lS.nullish()}),HB=vS.extend({type:w("multimedia"),image:vr,title:p(),description:p(),action:av.nullish()}),zB=vS.extend({type:w("product"),offer:mS,shipping:fS.nullish(),installment:uS.nullish(),pricePerUnit:p().nullish()}),GB=Re([zB,HB]),WB=x({ad:GB,adId:p().nullish()}),$B=x({isLoading:he().nullish(),loadErrorCount:cr().nullish()}),CS=$B.extend({type:w("mainShowroom"),id:p(),impressionToken:p(),brandId:p().nullish(),title:p().nullish(),description:p().nullish(),backgroundColor:cr().nullish(),images:L(vr).nullish(),logo:Dd.nullish(),slotAds:L(WB).nullish(),action:av.nullish(),layout:dS.nullish()}),yS=Re([FB,pS,hS,gS,BB,VB,CS]),qB=Re([pS,hS,gS]),iv=x({pageLoadPingUrl:p(),visibilityPingUrlBase:p(),clickPingUrlBase:p()}),ig=x({tagsSupported:he()});x({supportedTypes:L(ke(["multimedia","product","tourActivity","propertyPromotion","text","showroom","miniShowroom","mainShowroom"])),product:ig.nullish(),propertyPromotion:ig.nullish(),tourActivity:ig.nullish(),optOutOfPersonalization:he().nullish()});const bS=ke(["open","expand","chat"]);x({showroom:x({scenario:bS.nullish(),brandId:p(),brandName:p().nullish(),adId:p().nullish()})});const KB=x({requestId:p(),ads:L(CS),instrumentation:iv}),ZB=KB.extend({key:p()}),YB=x({brandBackground:cr().nullish(),brandLogo:Dd.nullish(),conversationId:p(),miniShowroomAd:x({messageId:p(),partId:p(),rguid:p()}),showroomData:L(ZB).nullish(),openAt:j(),theme:ke(["light","dark"]).nullish(),viewMode:ke(["cardView","extendedView"]),activeCardRguid:p().nullish(),lastUserMessageRguid:p().nullish()});YB.extend({brandId:p(),adId:p().nullish(),scenario:bS.nullish()});x({brandId:p(),brandName:p().nullish(),messageId:p(),conversationId:p(),visible:he()});const QB=x({selectedTag:jd.nullish(),collapsed:he().nullish(),filteredAds:L(qB).nullish(),createdAt:j().nullish()}),JB=QB.extend({type:w("ads"),requestId:p(),summary:p(),ads:L(yS).nullish(),instrumentation:iv,adsSessionId:p().nullish(),adTags:L(jd).nullish()}),LSe=x({requestId:p(),ads:L(yS).nullish(),instrumentation:iv}),vs={OneDriveAccess:"one-drive-access",BrowserAction:"browser-action",BrowserActions:"browser-actions",ComputerUseActions:"computer-use-actions",OutlookAccess:"outlook-access",OutlookCalendarAccess:"outlook-calendar-access",GoogleDriveAccess:"google-drive-access",GoogleCalendarAccess:"google-calendar-access",GoogleContactsAccess:"google-contacts-access",GmailAccess:"gmail-access",EdgePasswords:"edge-passwords",EdgeBrowserAccess:"edge-browser-access"},XB=ke([vs.OneDriveAccess,vs.BrowserAction,vs.BrowserActions,vs.ComputerUseActions,vs.OutlookAccess,vs.OutlookCalendarAccess,vs.GoogleDriveAccess,vs.GoogleCalendarAccess,vs.GoogleContactsAccess,vs.GmailAccess,vs.EdgePasswords,vs.EdgeBrowserAccess]),i4={active:"active",rejected:"rejected"},xS=ke([i4.active,i4.rejected]),eV=x({type:w("consent"),consentTypes:L(XB),status:xS}),cg={notAllowed:"not-allowed",blocked:"blocked",safetyCheck:"safety-check"},tV=ke([cg.notAllowed,cg.blocked,cg.safetyCheck]),nV=x({type:w("browserAction"),title:p(),description:p().nullish(),url:p().nullish(),reason:tV}),sV=st("type",[nV]),oV=x({type:w("consentV2"),status:xS,consents:L(sV)}),rV=st("type",[eV,oV]),OSe={BrowserAction:"browser-action"};x({type:w("command"),command:x({type:w("updateCard"),messageId:p(),partId:p(),update:x({type:w("consent"),status:w("rejected")})})});const aV=x({type:w("computerUseFeedback")}),Li=Re([w("startTask"),w("pauseTask"),w("resumeTask"),w("cancelTask"),w("takeTaskControl"),w("releaseTaskControl"),w("sendFormData")]),iV=Re([w("bringAgentTabsToForeground"),w("failedTask"),w("completedTask"),w("moveAgentTabsToBackground"),w("showConsentDialog")]);Re([Li,iV]);const cV=Re([w("allSessionInfo"),w("activeSessionInfo"),w("failedTask"),w("completedTask")]);Re([Li,cV]);const lV=Re([w("allSessionInfo"),w("activeSessionInfo"),w("failedTask"),w("completedTask")]);Re([Li,lV]);const SS=Re([w("askUserInput"),w("safetyRiskDetected"),w("userTakeControl"),w("giveBackControl"),w("resumeFromInput"),w("resumeFromRisk"),w("pauseByClick"),w("resumeByClick"),w("taskCompleted")]),uV=x({reason:SS,title:p().optional(),text:p().optional()}),Oi=x({taskId:p()}),dV=Oi.extend({type:w("startTask")}),mV=Oi.extend({type:w("pauseTask")}),fV=Oi.extend({type:w("resumeTask")}),pV=Oi.extend({type:w("cancelTask")}),hV=Oi.extend({type:w("takeTaskControl")}),gV=Oi.extend({type:w("releaseTaskControl")}),vV=x({identifier:p(),value:p()}),CV=Oi.extend({type:w("sendFormData"),fields:L(vV)}),ES=x({title:p(),instruction:x({text:p(),websites:L(x({url:Tt(),iconUrl:Tt().optional()}))})}),DSe=ES.extend({id:p()});ES.extend({isActive:he()});const yV=ke(["choose","replay"]),bV=ke(["2","1","0.5"]),xV=x({isRunning:he().nullish(),speed:bV.nullish()}),SV=x({name:p(),url:p().nullish(),description:p().nullish(),phoneNumber:p().nullish(),smsNumber:p().nullish(),chatUrl:p().nullish(),whatsAppUrl:p().nullish()}),EV=x({type:w("safetyHelpline"),countryEmergencyNumber:p().nullable(),helplines:L(SV)}),wV=x({type:w("artifact"),title:p(),artifact:x({type:Re([w("code")]),language:Re([w("html")]),content:p()})}),IV=x({type:w("document"),attachmentId:p(),fileName:p(),contentType:Od}),_V=x({username:p(),password:p()}),TV=x({type:w("edge-passwords"),websiteName:p(),usernameSuggestion:p().optional(),savedCredentials:L(_V).optional(),allowManualEntry:he().optional()}),AV=ke(["email","google","microsoft","apple","phone","x","facebook","amazon"]),kV=x({type:w("federatedLogin"),providers:L(AV),websiteName:p()}),MV=x({type:w("file"),url:Tt(),name:p(),contentType:Od}),NV=x({name:p(),disclaimerUrl:p(),url:p()}),wS=x({price:j().nullish(),changeInPercentage:j().nullish(),changeInAmount:j().nullish()}),RV=ke(["unavailable","upcoming","live","beat","miss","inline"]),PV=x({releaseAt:p().nullish(),status:RV}),IS=x({id:p(),symbol:p(),displayName:p(),price:j(),previousClosePrice:j(),changeInPercentage:j(),changeInAmount:j(),updatedAt:p(),iconUrl:p(),provider:NV,isFollowed:he().nullish()}),LV=x({priceOpen:j().nullish(),priceHigh:j().nullish(),priceLow:j().nullish(),price52wHigh:j().nullish(),price52wLow:j().nullish()}),Ud=IS.extend({intradayPricing:LV,isMarketLastSale:he(),exchangeTimeZoneId:p().nullish(),isMarketRegularHours:he().nullish(),lastUpdatedAt:p(),tradingDayEndAt:p(),accumulatedVolume:j().nullish()}),OV=Ud.extend({securityType:w("stock"),marketCap:j().nullish(),marketCapCurrency:p().nullish(),averageVolume:j().nullish(),peRatio:j().nullish(),postMarket:wS.nullish(),earnings:PV.nullish()}),DV=Ud.extend({securityType:w("etf"),netAssets:j().nullish(),expenseRatio:j().nullish(),yieldPercent:j().nullish(),postMarket:wS.nullish()}),jV=Ud.extend({securityType:w("index")}),UV=IS.extend({securityType:w("fund"),price52wHigh:j().nullish(),price52wLow:j().nullish(),netAssets:j().nullish(),expenseRatio:j().nullish(),yieldPercent:j().nullish(),oneYearReturn:j().nullish()}),_S=x({amount:j().nullish(),currency:p().nullish(),currencySymbol:p().nullish()}),c4=x({value:_S,fullName:p().nullish()}),FV=x({oneMonth:j().nullish(),sixMonths:j().nullish(),oneYear:j().nullish()}),BV=Ud.extend({securityType:w("currencyExchange"),fromCurrency:c4,toCurrency:c4,percentageReturns:FV}),VV=Ud.extend({securityType:w("cryptocurrency"),marketDominancePercentage:j().nullish(),circulatingSupply:j().nullish(),maxSupply:j().nullish(),oneYearReturn:j().nullish(),marketCap:_S,marketCapCurrency:p().nullish()}),HV=ke($F),zV=x({price:j(),volume:j(),at:p()}),l4=L(zV),GV=x({afterHoursSeries:l4,series:l4,chartType:HV}),WV=st("securityType",[OV,DV,jV,UV,BV,VV]),TS=x({currency:p(),instrument:WV,chart:GV.nullish()}),$V=TS.extend({type:w("financeChart")}),qV=x({securities:L(TS)}),KV=qV.extend({type:w("financeComparisonChart")}),ZV=st("type",[$V,KV]),YV=x({id:p()}),QV=L(YV),jSe=x({entities:QV}),JV=x({type:w("basic"),front:p(),back:p()}),XV=x({type:w("flashcard"),title:p(),flashcards:L(JV)}),eH=x({id:j(),autocompleteAttribute:p(),autofillType:p(),fieldLabel:p(),fieldName:p(),formControlType:p()}),tH=x({fields:L(eH)}),nH=x({forms:L(tH)}),sH=x({type:w("form-fill"),websiteName:p(),headerText:p().optional(),bodyText:p().optional(),formStructure:nH}),oH=x({type:w("generativeUI"),markup:p(),data:ki(p(),C8())}),rH=x({latitude:j(),longitude:j()}),ip=x({name:p(),location:rH}),aH=x({value:j(),count:j().nullish(),maxRating:j().nullish()}),iH=ip.extend({npi:p(),name:p(),primarySpecialtyTitle:p(),rating:aH.nullish(),professionalCredentials:L(p()).nullish(),location:ip.shape.location.extend({uuid:p(),address:p(),name:p().nullish(),phoneNumber:p().nullish()}),url:p().nullish()}),cH=x({type:w("healthcareEntity"),entities:L(iH)}),lH=x({name:p(),type:p().nullish(),year:cr().nullish()}),uH=x({carrierName:p().nullish()}),dH=x({name:p().nullish(),address:p(),latitude:j(),longitude:j(),phoneNumber:p().nullish()}),mH=x({npi:p(),name:p(),professionalCredentials:L(p()).nullish(),location:dH.nullish(),url:p().nullish(),primarySpecialtyTitle:p().nullish(),otherSpecialtyTitles:L(p()).nullish(),educations:L(lH).nullish(),insurances:L(uH).nullish(),performanceOutcomesIndex:j().nullish(),languages:L(p()).nullish(),dataSourceUrl:p()}),fH=x({name:p(),subtitle:p(),logoUrl:p()}),pH=x({title:p(),previewContent:p(),detailedContent:p().nullish()}),hH=x({type:w("healthcareInfo"),content:pH,source:fH}),gH=Re([cH,hH]),AS=x({image:x({url:p(),thumbnailUrl:p(),altText:p(),width:j(),height:j()}),source:x({title:p(),url:p(),iconUrl:p().nullable()})}),vH=x({type:w("image"),images:L(AS)}),CH=x({type:w("inlineImage"),title:p(),description:p()}).extend(AS.shape),kS=x({title:p(),description:p(),startTime:j(),endTime:j()}),yH=x({title:p(),description:p(),videos:L(x({title:p(),description:p(),url:p(),embedUrl:p(),thumbnailUrl:p(),iconUrl:p().optional()}))}),bH=x({video:x({url:p(),thumbnailUrl:p(),duration:j(),title:p(),isShort:he(),playlistIndex:j().optional()}),source:x({url:p(),iconUrl:p().optional()}),bestMomentIndex:j().optional(),moments:L(kS).optional(),playlists:L(yH).optional()}),xH=x({type:w("video"),videos:L(bH)}),SH=x({type:w("inlineVideo"),title:p(),description:p(),video:x({url:p(),thumbnailUrl:p(),title:p(),isShort:he()}),source:x({url:p(),iconUrl:p().optional()}),moments:L(kS).optional()}),EH=x({name:p(),logoUrl:p().nullable(),postUrl:p()}),wH=x({title:p(),companyName:p(),companyLogoUrl:p().nullable(),postedAt:p(),location:p(),providers:L(EH),description:p(),salary:p().nullable(),type:p().nullable(),locationType:p().nullable(),tags:L(p()).nullable()}),IH=x({type:w("job"),jobs:L(wH)}),_H=x({type:w("localEntity"),entities:L(ip.extend({phoneNumber:p().nullish(),url:p().nullish(),reviews:L(x({count:j(),rating:j(),providerName:p(),providerIconUrl:p().nullish(),url:p()})),location:ip.shape.location.extend({address:p().nullish()}),photos:L(x({url:p(),altText:p().nullish(),providerName:p().nullish(),providerUrl:p()})),openState:p().nullish(),category:p().nullish(),price:p().nullish()}))}),TH=x({providerName:p(),url:p().nullish(),thumbnailUrl:p(),providerOptions:L(p()).nullish(),source:x({url:p(),name:p()}).nullish()}),AH=x({sourceName:p(),maxRating:j(),rating:j(),url:p()}),kH=x({url:p(),source:x({url:p(),name:p()}).nullish()}),c2=x({url:p().nullish(),name:p().nullish()}),MH={thumbnail:x({url:p(),source:c2.nullish()}),source:c2.nullish()},NH=x({type:w("mediaSpotlight"),title:p(),label:p().nullish(),description:p(),thumbnail:kH,facts:ki(p(),p()).nullish(),criticRatings:L(AH).nullish(),watchLinks:L(TH).nullish(),featuredVideo:x(MH).nullish(),sources:L(c2).nullish()}),RH=x({entityId:p(),title:p(),subtitle:p(),thumbnailUrl:p()}),PH=x({type:w("mediaCarousel"),items:L(RH)}),MS=x({url:Tt(),title:p(),snippet:p().nullish(),publisher:p().nullish(),iconUrl:Re([Tt(),w("")]).nullish()}),LH=L(MS),OH=x({relatedResults:LH}),DH=MS.extend({type:w("navigation")}),jH=x({name:p(),thumbnailUrl:p()}),UH=x({provider:jH,title:p(),url:p(),thumbnailUrl:p(),updatedAt:p()}),FH=x({title:p(),articles:L(UH)}),BH=FH.extend({type:w("newsCarousel")}),VH=x({id:p(),type:w("oneDrive"),name:p(),lastModifiedAt:p(),url:p(),webDavUrl:p().optional(),contentType:p(),size:j()}),HH=x({type:w("m365"),items:L(VH)}),zH=x({type:w("linkedin"),firstName:p().nullish(),lastName:p().nullish(),profileUrl:Tt().nullish(),backgroundPictureUrl:Tt().nullish(),profilePictureUrl:Tt().nullish(),headline:p().nullish(),location:p().nullish(),followerCount:j().nullish(),positions:L(x({title:p().nullish(),company:p().nullish(),description:p().nullish()})).nullish(),educations:L(x({degree:p().nullish(),fieldOfStudy:p().nullish(),school:p().nullish()})).nullish(),isLimitedResult:he().nullish()}),GH=x({type:w("bing"),title:p().nullish(),label:p().nullish(),description:p().nullish(),thumbnail:x({url:Tt(),source:x({url:Tt(),name:p()}).nullish()}),facts:L(x({name:p(),value:p()})).nullish(),sources:L(x({url:Tt(),name:p()})).nullish()}),WH=st("type",[zH,GH]),$H=x({type:w("person"),persons:L(WH)}),qH=ke(["one-drive","google-drive","outlook-calendar","google-calendar","google-contacts","gmail","outlook","edge-browser","windows"]),Cl=x({id:p(),source:qH,url:p().nullish()}),KH=Cl.extend({type:w("document"),fileName:p(),modifiedAt:p().nullish(),contentType:p().optional()}),ZH=Cl.extend({type:w("image"),fileName:p(),modifiedAt:p().nullish(),thumbnailUrl:p().optional()}),YH=Cl.extend({type:w("event"),subject:p().nullish(),startsAt:p(),endsAt:p(),location:p().nullish(),calendarName:p().nullish()}),QH=Cl.extend({type:w("contact"),displayName:p(),thumbnailUrl:p().nullish(),emailAddresses:L(p()).nullish(),phoneNumbers:L(x({type:p().nullish(),value:p().nullish()})).nullish()}),JH=Cl.extend({type:w("email"),id:p(),senderEmailAddress:p(),receivedAt:p(),subject:p().nullish()}),XH=Cl.extend({type:w("webPage"),url:p(),title:p(),iconUrl:p().optional(),visitedAt:p()}),ez=st("type",[KH,ZH,YH,QH,JH,XH]),tz=x({type:w("personalArtifacts"),artifacts:L(ez)}),nz=x({name:p(),url:p(),width:j().optional(),height:j().optional(),thumbnailUrl:p().optional()}),sz=x({images:L(nz)}),oz=sz.extend({type:w("phoneImages")}),rz=x({qrCodeUrl:p(),linkDeviceUrl:p()}),az=rz.extend({type:w("phoneLinking")}),iz=Re([w("executing"),w("completed"),w("failed")]),cv=x({deviceName:p().optional(),state:iz.optional(),disabled:he().optional(),completedAt:p().optional()}),cz=ke(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),lz=cv.extend({triggerAt:p(),repeatDays:L(cz).optional().nullable()}),uz=lz.extend({type:w("phoneAlarm")}),dz=cv.extend({seconds:j()}),mz=dz.extend({type:w("phoneTimer")}),fz=cv.extend({actionId:p(),text:p(),phoneNumber:p().nullable().optional(),contactName:p().nullable().optional(),deviceName:p().optional()}),pz=fz.extend({type:w("phoneSendMessage")}),hz=gl.extend({actionName:w("phone_send_message"),parameters:x({text:p(),phoneNumber:p().nullable().optional(),contactName:p().nullable().optional()})}),gz=st("type",[az,oz,uz,mz,pz]),vz=x({id:p(),label:p(),type:w("single-select"),options:L(p()),defaultOptionIndex:j()}),Cz=x({id:p(),label:p(),type:w("multiple-select"),options:L(p())}),yz=Re([vz,Cz]),bz=x({id:p(),displayName:p(),previewImageUrl:p()}),xz=x({type:w("powerPointCreator"),actionId:p(),actionType:p(),text:p(),questions:L(yz),themes:L(bz)}),Sz=x({type:w("quiz"),title:p(),quiz:L(x({type:w("singleSelect"),question:p(),options:L(p()),answer:j(),topics:L(p()).nullable(),explanation:p()}))}),Ez=x({value:j(),count:j().nullish(),maxRating:j().nullish()}),wz=x({hours:j(),minutes:j()}),NS=x({name:p(),quantity:j().nullish(),unit:p().nullish()}),Iz=x({title:p(),url:Tt(),source:p(),imageUrl:Tt().nullish(),rating:Ez.nullish(),serving:j().nullish(),calories:j().nullish(),cookingTime:wz.nullish(),instructions:L(p()).nullish(),ingredients:L(NS).nullish()}),_z=x({type:w("recipe"),recipes:L(Iz)});x({title:p(),url:Tt(),ingredients:L(NS),instructions:L(p()).nullish(),imageUrl:Tt().nullish(),messageId:p().nullish()});const lv=x({position:j(),url:p(),title:p(),iconUrl:p().nullish(),publisher:p().nullish(),snippet:p().nullish()}),RS=x({url:p(),name:p(),imageUrl:p(),images:L(p()).nullish(),price:fn,seller:p().nullish()}),uv=x({value:j(),count:j()}).nullish(),Tz=RS.extend({type:w("shopping"),id:p(),rating:uv}),Az=x({emailEnabled:he(),anyRetailer:he()}),PS=RS.extend({isNotificationEnabled:he().nullish(),offerId:p(),currentPrice:fn.nullish(),percentageDrop:j(),durationInWeeks:j(),notificationOptions:Az.nullish()}),dv=x({title:p().nullish(),url:p()}),kz=ke(["textual","visual"]),Mz=x({displayName:p(),value:p(),isActive:he(),isSelected:he(),thumbnailImage:dv.nullish()}),LS=x({id:p(),displayName:p(),filterValues:L(Mz),filterType:kz}),OS=x({id:p().nullish(),groupId:p().nullish(),brandGroupId:p().nullish()}),DS=x({displayName:p(),values:L(p())}),jS=x({offerUrl:p(),domain:p(),logoUrl:p().nullish()}),US=x({summary:p(),attributions:L(jS)}),FS=x({pros:L(p()).nullish(),cons:L(p()).nullish(),attributions:L(jS)}),BS=st("type",[x({type:w("buyWithMerchant"),checkoutUrl:p().nullish(),merchant:p().nullish()}),x({type:w("buyWithCopilot"),merchantProvider:p().nullish(),storeId:p().nullish()})]),mv=x({product:OS,offerId:p(),url:p(),name:p(),description:p().nullish(),images:L(dv).nullish(),filters:L(LS).nullish(),specifications:L(DS).nullish(),review:US.nullish(),prosAndCons:FS.nullish(),price:fn,discountPrice:fn.nullish(),seller:p(),sellerLogoUrl:p().nullish(),brandName:p().nullish(),rating:uv.nullish(),checkoutOption:BS.nullish(),curation:p().nullish(),canTrackPrice:he()}),Nz=x({type:w("shoppingProducts"),products:L(mv)}),fv=Re([w("lowest-price"),w("free-shipping")]),VS=x({offerName:p(),offerId:p(),url:p(),price:fn,discountPrice:fn.nullish(),seller:p(),sellerLogoUrl:p().nullish(),tags:L(fv).nullish(),canTrackPrice:he()}),USe=x({error:p(),message:p()}),HS=x({minPrice:fn,maxPrice:fn,averagePrice:fn,timePeriodInDays:j()}),zS=x({date:Wp(),price:fn}),GS=x({daily:zS.array()}),WS=x({label:p(),prompt:p()}),Rz=Re([w("nudge"),w("flyout")]),$S=x({edgeEntryPoint:Rz.optional()}),Pz=$S.extend({scenario:w("priceHistory"),priceHistory:x({dailyPrices:zS.array(),type:Re([w("increase"),w("decrease")]),percentage:j()})}),Lz=$S.extend({scenario:w("cashback"),cashbackData:x({isAdOffer:he()})}),qS=st("scenario",[Pz,Lz]),pv=x({name:p(),logoUrl:p().nullish()}),hv=ke(["affiliate","storewideAd","productAd"]),u1=ke(["flat","percentage"]),Oz=x({type:w(u1.enum.percentage),percentage:j()}),Dz=x({type:w(u1.enum.flat),cashback:fn}),jz=st("type",[Oz,Dz]),Uz=x({rebate:jz,name:p()}),Fz=x({type:w(u1.enum.percentage),percentage:j(),maxCashback:fn}),Bz=x({type:w(u1.enum.flat),cashback:fn,minPurchaseRequired:fn}),Vz=st("type",[Fz,Bz]),KS=x({type:w(hv.enum.productAd),cashback:fn,expiresAt:p()}),Hz=KS.extend({seller:pv}),ZS=x({type:w(hv.enum.storewideAd),rebate:Vz,expiresAt:p()}),zz=ZS.extend({seller:pv}),YS=x({type:w(hv.enum.affiliate),categories:L(Uz),exclusions:p()}),Gz=YS.extend({seller:pv}),Wz=st("type",[KS,ZS,YS]);st("type",[Hz,zz,Gz]);const FSe=mv.extend({otherBuyingOptions:L(VS).nullish(),priceInsight:HS.nullish(),tags:L(fv).nullish(),priceHistory:GS.nullish(),conversationStarters:L(WS).nullish(),insights:qS.nullish(),supportsPriceInsights:he()}),$z=x({product:OS.nullish(),offerId:p().nullish(),url:p().nullish(),name:p().nullish(),description:p().nullish(),images:L(dv).nullish(),filters:L(LS).nullish(),specifications:L(DS).nullish(),review:US.nullish(),prosAndCons:FS.nullish(),price:fn.nullish(),discountPrice:fn.nullish(),seller:p().nullish(),sellerLogoUrl:p().nullish(),brandName:p().nullish(),rating:uv.nullish(),checkoutOption:BS.nullish(),curation:p().nullish(),canTrackPrice:he().nullish(),otherBuyingOptions:L(VS).nullish(),priceInsight:HS.nullish(),tags:L(fv).nullish(),priceHistory:GS.nullish(),conversationStarters:L(WS).nullish(),insights:qS.nullish()});x({metadata:$z.nullish(),cashbackOffers:L(Wz).nullish(),seller:p().nullish(),sellerLogoUrl:p().nullish()});const BSe=x({products:PS.array()}),qz=x({category:p(),curationGroupId:p(),position:Re([w("top"),w("middle"),w("bottom")]).nullish()}),If=mv.extend({curationInfo:qz.nullish()});x({product:If,messageId:p(),allProducts:L(If).nullish(),accessories:L(If).nullish()});const Kz=x({type:w("shoppingCurated"),title:p().optional(),products:L(If),groupType:p().nullish()}),Zz=st("type",[Tz,Nz,Kz]),VSe=x({emailNotificationEnabled:he()}),Yz=x({name:p(),url:p(),offerId:p()}),Qz=x({url:p(),source:p()}),Jz=x({reason:p(),references:L(Qz)}),Xz=ke(["buy-now","buy-later"]),HSe=x({whenToBuy:Xz,seller:Yz,supportingReasons:L(Jz)}),eG=Re([w("top-highlight"),w("buying-tip"),w("ideal-for"),w("review-snapshot")]),zSe=x({title:p(),content:p(),type:eG,citations:L(lv)}),tG=x({muid:p().default(""),isShoppingEnabled:he().default(!1),isPersonalizationDataConsentEnabled:he().default(!1)}),nG=x({isRebatesActive:he().nullish(),ldClickData:p().nullish(),msClickId:p().nullish(),uClickData:p().nullish()});x({isPDP:he().nullish(),name:p().nullish(),image:Tt().nullish(),base64_image:p().nullish(),price_currency:p().nullish(),price_value:NL().nullish(),isShoppingEnabled:he().nullish(),cashback:nG.nullish(),isPersonalizationDataConsentEnabled:he().nullish(),muid:p().nullish(),"aggregateRating/ratingValue":Re([p(),ab()]).nullish(),"aggregateRating/reviewCount":Re([p(),ab()]).nullish(),"offers/price":p().nullish()});x({name:p().optional(),rating:x({value:j(),count:j()}).optional(),images:L(x({url:p()})).optional(),price:x({amount:j(),currency:p().nullable(),currencySymbol:p().nullable()}).optional(),offerPrice:p().optional(),isPDP:he().optional()});const sG=x({title:p(),prompt:p(),imageUrl:p()}),QS=x({name:p(),cards:L(sG)});x({tabs:L(QS)});x({title:p(),description:p(),imageUrl:p(),prompt:p()});x({title:p(),description:p(),videoSourceDarkMode:p(),videoSourceLightMode:p()});const oG=x({imageUrls:L(p()),title:p(),prompt:p()}),JS=x({title:p(),prompt:p()});L(JS);const rG=x({type:w("continueShopping"),items:L(oG)}),aG=x({type:w("forYou"),items:L(JS)}),iG=x({type:w("trackedProducts"),products:L(PS)}),cG=x({type:w("momentInTime"),tabs:L(QS)}),lG=st("type",[rG,aG,iG,cG]),GSe=x({sections:L(lG).nullable()}),uG=ke(["home","away"]),mo=ke(["win","loss","tie","no-game"]),XS=ke(["pre-game","in-progress","final","postponed","delayed","abandoned","cancelled"]),dG=ke(["test","odi","t20"]),mG=ke(["test","limited-overs","super-over"]),fG=ke([...XS.options,"drinks","dinner","tea","lunch","innings-break","super-over","toss","stumps","strategic-timeout","forfeited"]),pG=ke([...XS.options,"bye","retired","forfeited","unscheduled","suspended"]),hG=ke(["men-singles","men-doubles","women-singles","women-doubles","mixed-doubles"]),gG=ke(["round-of256","round-of128","round-of64","round-of32","round-of16","quarter-final","semi-final","final"]),eE=x({name:p(),city:p().nullish()}),vG=x({name:p(),thumbnailUrl:p().nullish(),seasonPhase:p().nullish(),seasonStartsAt:p().nullish(),seasonEndsAt:p().nullish(),leagueId:p()}),CG=x({type:w("league"),league:vG}),cp=x({name:p(),thumbnailUrl:p().nullish()}),yG=x({type:w("team"),team:cp}),bG=x({type:w("matchup"),matchup:x({teamA:cp,teamB:cp})}),Fd=st("type",[CG,yG,bG]),xG=x({name:p(),alias:p().nullish(),thumbnailUrl:p().nullish()}),SG=x({playerName:p(),clock:x({minutes:j(),seconds:j()})}),EG=x({ballPossessionPercentage:j().nullish(),goals:L(SG).nullish()}),d1=x({wins:j(),losses:j(),overtimeLosses:j().nullish()}),wG=ke(["quarter","half","halftime","extra","penalties","shoot-out","overtime","inning","period"]),IG=ke(["top","bottom"]),Cr=x({type:wG,period:j().nullish(),division:IG.nullish()}),Bd=x({playingPeriod:Cr,score:p()}),os=xG.extend({primaryColorHex:p().nullish(),venueType:uG.nullish(),previousGameOutcomes:L(mo).nullish(),seed:j().nullish(),gameOutcome:mo.nullish(),score:p().nullish(),record:d1.nullish(),winProbability:j().nullish(),playingPeriodScores:L(Bd).nullish()}),gv=os.extend({winProbability:j().nullish()}),tE=os.extend({score:p(),gameStats:EG.nullish()}),_G=tE.extend({gameOutcome:mo}),TG=x({wins:j(),participantName:p()}),AG=ke(["final","not-started","in-progress"]),kG=ke(["national-championship","first-four","first-round","second-round","conference-semifinal","conference-final","sweet16","sweet-sixteen","elite-eight","final-four","final"]),MG=x({state:AG,winsInfo:L(TG).nullish(),gameNumber:j().nullish(),conference:p().nullish()}),nE=MG.extend({phase:kG}),vv=x({name:p(),score:p()}),NG=x({current:j(),total:j(),aggregatedScores:L(vv).nullish()}),Cv=x({startsAt:p(),status:p(),leagueName:p(),legInfo:NG.nullish(),leagueId:p().nullish(),gameId:p().nullish(),startTimeToBeAnnounced:he().nullish(),seasonPhase:p().nullish()}),Di=x({minutes:j(),seconds:j()}),RG=gv.extend({record:d1.nullish(),gameOutcome:mo.nullish(),score:p().nullish(),playingPeriodScores:L(Bd).nullish(),gameStats:xd().nullish()}),ji=Cv.extend({name:p().nullish(),week:j().nullish(),clock:Di.nullish(),bracket:xd().nullish(),currentPlayingPeriod:Cr.nullish()}),Ui=Cv.extend({name:p().nullish(),bracket:nE.nullish(),week:j().nullish(),clock:Di.nullish(),currentPlayingPeriod:Cr.nullish()}),PG=ji.extend({status:w("pre-game"),participants:L(gv)}),yv=x({clock:Di,description:p(),team:cp,participantScores:L(vv).nullish()}),sE=yv.extend({type:ke(["score-change","yellow-card","red-card"])}),bv=yv.extend({type:ke(["three-point-made","two-point-made","touchdown","field-goal","extra-point","safety","two-point-conversion","blocked-punt-safety","blocked-field-goal-safety","fumble-safety"])}),Fi=x({url:p(),thumbnailUrl:p(),title:p(),durationInSeconds:j().nullish()}),LG=Ui.extend({status:w("pre-game"),participants:L(RG),timeline:x({events:L(bv)}).nullish(),videos:L(Fi).nullish()}),OG=ji.extend({status:w("in-progress"),participants:L(tE),clock:Di,currentPlayingPeriod:Cr.nullish(),timeline:x({events:L(sE)}).nullish(),videos:L(Fi).nullish()}),DG=ji.extend({status:w("final"),participants:L(_G),videos:L(Fi).nullish(),timeline:x({events:L(sE)}).nullish()}),jG=ji.extend({status:w("postponed"),participants:L(os)}),UG=ji.extend({status:w("delayed"),participants:L(os)}),FG=ji.extend({status:w("abandoned"),participants:L(os)}),BG=ji.extend({status:w("cancelled"),participants:L(os)}),l2=st("status",[PG,OG,DG,FG,BG,UG,jG]),oE=os.extend({playingPeriodScores:L(Bd).nullish(),score:p(),record:d1.nullish(),gameOutcome:mo.nullish(),winProbability:j().nullish(),gameStats:xd().nullish()}),VG=oE.extend({gameOutcome:mo}),HG=Ui.extend({status:w("in-progress"),participants:L(oE),clock:Di,currentPlayingPeriod:Cr,timeline:x({events:L(bv)}).nullish(),videos:L(Fi).nullish()}),zG=Ui.extend({status:w("final"),participants:L(VG),videos:L(Fi).nullish(),clock:Di.nullish(),currentPlayingPeriod:Cr.nullish(),timeline:x({events:L(bv)}).nullish()}),GG=Ui.extend({status:w("postponed"),participants:L(os)}),WG=Ui.extend({status:w("delayed"),participants:L(os)}),$G=Ui.extend({status:w("abandoned"),participants:L(os)}),qG=Ui.extend({status:w("cancelled"),participants:L(os)}),u2=st("status",[LG,HG,zG,$G,qG,WG,GG]),KG=x({type:w("sportsSchedule"),sport:ke(["basketball","ice-hockey","football"]),games:L(u2),header:Fd.nullish(),heroGame:u2.nullish()}),ZG=x({type:w("sportsSchedule"),sport:w("soccer"),games:L(l2),header:Fd.nullish(),heroGame:l2.nullish()}),YG=x({type:w("sportsGame"),sport:ke(["basketball","ice-hockey","football"]),game:u2}),QG=x({type:w("sportsGame"),sport:w("soccer"),game:l2}),Bi=Cv.extend({name:p().nullish(),week:j().nullish(),videos:L(Fi).nullish(),bracket:nE.nullish(),clock:Di.nullish(),currentPlayingPeriod:Cr.nullish()}),rE=x({hits:j(),errors:j(),runs:j()}),xv=yv.extend({type:ke(["conversion","bat"]),playingPeriod:Cr,participantScores:L(vv)}),aE=gv.extend({record:d1.nullish(),gameOutcome:mo.nullish(),score:p().nullish(),playingPeriodScores:L(Bd).nullish(),gameStats:rE.nullish()}),iE=aE.extend({playingPeriodScores:L(Bd).nullish(),score:p(),gameStats:rE.nullish()}),JG=iE.extend({gameOutcome:mo}),XG=Bi.extend({status:w("pre-game"),participants:L(aE),timeline:x({events:L(xv)}).nullish()}),eW=Bi.extend({status:w("in-progress"),participants:L(iE),currentPlayingPeriod:Cr.nullish(),timeline:x({events:L(xv)}).nullish()}),tW=Bi.extend({status:w("final"),participants:L(JG),videos:L(Fi).nullish(),timeline:x({events:L(xv)}).nullish()}),nW=Bi.extend({status:w("postponed"),participants:L(os)}),sW=Bi.extend({status:w("delayed"),participants:L(os)}),oW=Bi.extend({status:w("abandoned"),participants:L(os)}),rW=Bi.extend({status:w("cancelled"),participants:L(os)}),d2=st("status",[XG,eW,tW,nW,sW,oW,rW]),aW=x({type:w("sportsSchedule"),sport:w("baseball"),games:L(d2),header:Fd.nullish(),heroGame:d2.nullish()}),iW=x({type:w("sportsGame"),sport:w("baseball"),game:d2}),cW=x({ballsFaced:j(),runsScored:j(),isBatting:he()}),lW=x({oversBowled:p(),wicketsTaken:j(),runsConceded:j(),isBowling:he()}),uW=cW.extend({type:w("batting")}),dW=lW.extend({type:w("bowling")}),cE=st("type",[uW,dW]),mW=x({name:p(),stats:cE}),fW=x({playerName:p(),teamName:p(),gameStats:L(cE).nullish()}),pW=x({current:j(),required:j().nullish()}),hW=x({name:p(),currentMatch:j(),totalMatches:j(),roundName:p().nullish(),equation:p().nullish()}),lE=x({type:mG,runs:j(),wickets:j(),oversPlayed:p(),isFollowedOn:he(),isDeclared:he(),duckworthLewisEquation:x({target:j(),revisedOvers:p()}).nullish()}),Sv=x({name:p(),alias:p().nullish(),thumbnailUrl:p().nullish()}),gW=Sv.extend({previousGameOutcomes:L(mo).nullish()}),vW=Sv.extend({inningScores:L(lE).nullish(),playersStats:L(mW).nullish(),yetToBat:he()}),CW=Sv.extend({gameOutcome:mo,didNotBat:he(),inningScores:L(lE).nullish()}),yW=x({startsAt:p(),startTimeToBeAnnounced:he(),tossInfo:p().nullish(),participants:L(gW),type:w("pre")}),bW=x({gameSummary:p(),runRate:pW.nullish(),participants:L(vW),type:w("live")}),xW=x({startsAt:p(),gameSummary:p(),playerOfTheMatch:fW.nullish(),participants:L(CW),type:w("final")}),SW=st("type",[yW,bW,xW]),m2=x({gameId:p(),leagueId:p(),venue:eE.nullish(),format:dG,status:fG,seriesInfo:hW,phase:SW}),EW=x({type:w("sportsGame"),sport:w("cricket"),game:m2}),wW=x({type:w("sportsSchedule"),sport:w("cricket"),games:L(m2),header:Fd.nullish(),heroGame:m2.nullable()}),IW=x({name:p(),countryFlagThumbnailUrl:p().nullish(),seed:j().nullish()}),_W=x({points:j(),isServing:he(),tieBreakerPoints:j().nullish(),currentGamePoints:p().nullish(),setWon:he().nullish()}),uE=x({players:L(IW)}),TW=uE,dE=uE.extend({setPoints:L(_W)}),AW=dE.extend({gameOutcome:mo}),kW=x({type:w("pre"),participants:L(TW)}),MW=x({type:w("live"),participants:L(dE)}),NW=x({type:w("final"),participants:L(AW)}),RW=st("type",[kW,MW,NW]),u4=x({gameId:p(),leagueId:p(),status:pG,startsAt:p().nullish(),startTimeToBeAnnounced:he(),venue:eE.nullish(),matchType:hG,round:gG.nullish(),phase:RW}),PW=x({type:w("sportsSchedule"),sport:w("tennis"),games:L(u4),header:Fd.nullish(),heroGame:u4.nullish()}),LW=Re([KG,ZG,aW,wW,PW]),OW=st("sport",[QG,YG,iW,EW]),DW=Re([LW,OW]),jW=x({type:w("suggestVision")}),UW=ke(["c","f"]),FW=ke(["mm","cm","in"]),BW=ke(["hPa","inHg","mb","mmHg"]),VW=ke(["bft","kph","mph","ms"]),HW=ke(["m","km","mi"]),zW=x({temperature:UW,height:FW,pressure:BW.optional(),speed:VW.optional(),distance:HW.optional()}),Ev=ke(K7),GW=ke(["rain","snow"]),wv=x({type:GW.nullish(),amount:j().nullish(),chance:j()}),WW=x({current:j(),high:j().optional(),low:j().optional()}),$W=x({at:p(),state:Ev,summary:p(),description:p().optional(),temperature:WW,precipitation:wv.optional()}),mE=x({high:j(),low:j()}),qW=x({date:p(),state:Ev,temperature:mE,precipitation:wv.optional()}),KW=x({at:p(),state:Ev,temperature:mE,precipitation:wv.optional()}),ZW=x({daily:L(qW),hourly:L(KW).nullish().optional()}),YW=x({type:w("weather"),location:p(),units:zW,spotlight:$W.optional(),forecast:ZW}),Ju=ke(K7),QW=x({type:w("weatherTemperatureHourly"),location:p(),unit:Re([w("f"),w("c")]),spotlight:x({date:p(),state:Ju,summary:p(),temperature:j().optional(),high:j(),low:j()}),forecast:L(x({at:p(),state:Ju,temperature:j(),precipitationChance:j()}))}),JW=x({type:w("weatherTemperatureDaily"),location:p(),unit:Re([w("f"),w("c")]),forecast:L(x({date:p(),state:Ju,high:j(),low:j(),precipitationChance:j()}))}),fE=Re([w("rain"),w("snow")]),pE=Re([w("in"),w("mm")]),XW=x({type:w("weatherPrecipitationHourly"),location:p(),unit:pE,precipitationType:fE,spotlight:x({date:p(),summary:p(),amount:j(),chance:j()}),forecast:L(x({at:p(),state:Ju,amount:j(),chance:j()}))}),e$=x({type:w("weatherPrecipitationDaily"),location:p(),unit:pE,precipitationType:fE,forecast:L(x({date:p(),state:Ju,amount:j(),chance:j()}))}),t$=Re([YW,QW,JW,XW,e$]),hE=Re([JB,wV,rV,TV,kV,ZV,sH,oH,gH,vH,CH,IH,_H,HH,NH,PH,$H,gz,Sz,MV,EV,Zz,SH,DW,xH,t$,_z,aV,IV,BH,tz,XV,DH,jW,xz]),gE="clicked",Iv="dismissed",WSe=x({mainColor:p().nullable().optional(),secondaryColor:p().nullable().optional(),leftAccentColor:p().nullable().optional(),rightAccentColor:p().nullable().optional(),selectedVariant:p().nullable().optional(),palette:p().nullable().optional(),randomPalette:he().optional()}),d4=Re([ke([gE,Iv]),y8()]),vE=x({primaryColor:p(),secondaryColor:p().nullable().optional(),leftAccentColor:p().nullable().optional(),rightAccentColor:p().nullable().optional()}),$Se=x({appearance:x({body:vE}).nullable()}),f2=x({userId:p(),userDisplayName:p().nullish()}),n$=x({participants:L(f2).nullish(),owner:f2.nullish()});f2.extend({isYou:he(),avatar:p().optional(),isOwner:he()});x({token:p().min(1),displayName:p().trim().min(1).optional()});const qSe=x({conversationId:p()}),s$=x({url:Tt()}),o$=x({url:Tt().nullish()}),KSe=x({owner:p().nullish(),conversationTitle:p().nullish(),numberOfOtherParticipants:j().min(1)}),ZSe=x({errorCode:p().optional()}),r$=x({id:p(),imageUrl:p(),voiceId:p()}),YSe=st("type",[x({type:w("media"),delta:p()}),x({type:w("remainingTime"),seconds:j()}),x({type:w("startFailed"),startFailedType:Re([w("time-expired"),w("start-model-failed"),w("throttled")])}),x({type:w("terminated"),reason:Re([w("time-expired-day"),w("interrupted")])})]),a$=x({id:p(),previewImageUrl:p(),voiceId:p().optional()}),QSe=x({portraits:L(a$)});Re([w("take-photo"),w("select-voice")]);ke(["free-talk","prepare-interview","learn-about-x","practice-speaking","talk-to-future-self"]);const Lr=x({light:p(),dark:p()}),i$=x({foreground1:Lr,foreground2:Lr,accent:Lr,shape:Lr,shapeInverse:Lr,background1:Lr,background2:Lr,background3:Lr}),m4=x({name:ke(["ginto-copilot-nord-bold","ginto-copilot-nord-medium-italic","ginto-copilot-480","kari-regular"]),url:Tt()}),c$=x({name:p(),url:Tt()}),rl=x({url:Tt()}),al=x({urlLight:Tt(),urlDark:Tt()}),p2=x({url:Tt()}),yl=x({type:p(),title:p()}),l$=yl.extend({type:w("coverPage"),content:p(),template:ke(["image-background","fuzzy-image"]),image0:rl,sticker0:al.nullish(),sticker1:al.nullish()}),u$=yl.extend({type:w("heroImage"),content:p(),template:ke(["noisy-circle","macaron","wavy-shape"]),image0:rl}),d$=yl.extend({type:w("stickerSheet"),content:p(),template:ke(["sticker1","sticker2"]),sticker0:al,sticker1:al,accent0:p2,accent1:p2}),m$=yl.extend({type:w("simpleText"),content:p(),template:p().nullish()}),f$=yl.extend({type:w("photoJournal"),content:p().nullish(),template:ke(["shapes-only","shapes-accents"]),variation:ke(["shape-group1","shape-group2"]),label0:p(),label1:p(),image0:rl,image1:rl,sticker0:al.nullish(),accent0:p2.nullish()}),p$=yl.extend({type:w("endPage"),content:p(),template:ke(["wide-cards","tall-cards"]),variation:ke(["shape-group1","shape-group2"]),questions:L(p()),image0:rl,image1:rl.nullish(),sticker0:al}),h$=x({type:w("shareDefault"),template:p().nullish()}),g$=st("type",[l$,u$,d$,m$,f$,p$,h$]),v$=x({id:p(),modifiedAt:p(),theme:i$,font:m4,fontHandwriting:m4.nullish(),masks:L(c$),sections:L(g$)}),C$=x({type:w("chatAboutNarrative"),narrativeId:p(),messageIndex:j()}),y$=x({id:p(),text:p(),createdAt:p()}),b$=x({results:L(y$),next:p().nullable()}),x$=x({type:w("provideImageFeedback"),messageId:p(),feedbackTypes:L(p())}),S$=x({type:w("createPage"),messageId:p()}),E$=x({type:w("appendToPage"),messageId:p(),pageId:p()}),CE=x({id:p(),conversationId:p()}),w$=x({id:p(),fileName:p(),contentType:p()}),JSe=x({title:p().nullish(),content:p().nullish(),conversationId:p(),attachments:L(w$).optional().nullable()}),I$=ps.extend({type:w("page"),page:x({id:p(),conversationId:p(),title:p().nullish()})}),_$=x({id:p(),title:p().nullish(),updatedAt:p(),conversationId:p().optional(),type:ke(["page","sharedPage"]).optional(),previewContent:p().nullish()}),T$=x({results:L(_$),next:p().nullish()}),XSe=x({title:p().nullish(),content:p().nullish(),shareLink:p(),page:x({id:p()}).nullable()}),eEe=x({id:p(),url:p()}),A$=ke(["page-count-exceeded","page-content-length-exceeded"]),k$=x({errorCode:A$}),tEe=x({title:p().nullish()}).nullish(),nEe=ke(["public","user"]),sEe=x({id:p(),url:p()});x({type:w("podcast"),id:p().min(1)});const yE=w("generatePodcast"),M$=x({type:yE,taskId:p().min(1)}),bE=w("createPowerPoint"),N$=x({type:bE,messageId:p(),themeId:p(),responses:ki(p(),L(j()))}),R$=x({prompt:p()}),m1=w("executeTask"),P$=x({type:m1,taskId:p(),context:R$.optional()}),L$=p(),O$=x({currentConversationId:p().nullable(),isNewUser:he(),banExpiresAt:p().nullable(),remainingTurns:j().nullable(),features:L(L$),allowBeta:he().nullish(),userId:p().nullish(),inDataUseWaitingPeriod:he().nullish()}),D$=x({id:p(),name:p(),previewUrl:p(),voicemails:L(p())}),j$=x({id:p(),backgroundImageUrl:p()}),U$=x({id:p(),name:p(),location:j$.nullish()}),uo=x({type:p(),label:p()}),F$=L(uo),B$=x({positive:L(uo),negative:L(uo)}),qn=Re([F$,B$]),Fa=x({type:p(),label:p(),subOptions:L(uo).nullish()}),xE=x({local:qn,ads:qn,video:qn,image:qn,sports:qn,job:qn,shopping:qn,recipe:qn,finance:qn,quiz:qn,weather:qn,personalArtifacts:qn,healthcareInfo:qn,navigation:qn,healthcareEntity:qn}),V$=x({positive:L(uo).nullish(),negative:L(uo)});xE.keyof();const SE=x({newsArticle:L(Fa),newsVideo:L(Fa),newsGem:L(Fa),chat:L(Fa),dailyBriefing:L(Fa),podcast:L(Fa),default:L(Fa)});SE.keyof();const H$=x({computerUse:L(uo)}),z$=x({text:L(uo),image:L(uo),call:L(uo),appearance:L(uo),card:xE,showroom:V$.nullish(),discover:SE.nullish(),task:H$.nullish()}),G$=x({maxFilesPerMessage:j(),maxFileNameLength:j(),image:x({mimeTypes:L(p()),maxBytes:j()}),document:x({mimeTypes:L(p()),maxBytes:j()}),binary:x({mimeTypes:L(p()),maxBytes:j()})}),W$=x({minTextLength:j().min(0),textDeltaPercent:j().min(0).max(100),debounceInMilliseconds:j().min(0)}),$$=x({signInPrompts:L(j()),voices:L(D$),maxTextMessageLength:j(),feedbackOptions:z$,characters:L(U$).nullish(),pageLimit:j(),maxPageContentLength:j(),maxPageTitleLength:j(),messagePreview:W$,attachments:G$,portraits:L(r$).nullish()});x({hasVisionAccess:he(),allowedDomains:L(p()).nullable(),allowedDomainSuffixes:L(p()).nullable(),blockedDomains:L(p()).nullable(),blockedDomainSuffixes:L(p()).nullable()});const q$=x({startTime:p(),text:p()}),K$=x({startTime:p(),text:p(),words:L(q$)}),f4=x({url:p(),duration:j(),transcript:L(K$).nullish()}),Z$=x({title:p(),image:p(),url:p(),createdAt:p()}),Y$=x({publisherName:p(),publisherIcon:p(),articles:L(Z$)}),p4=x({url:p(),foregroundColor:p(),backgroundColor:p()}),h4=x({name:p(),foregroundColor:p(),backgroundColor:p(),altText:p().nullish(),url:p()}),Q$=x({landscape:h4,portrait:h4}),J$=x({id:p(),title:p(),image:x({landscape:p4,portrait:p4}),audio:ki(p(),f4),transitionMusic:f4.nullable(),sources:L(Y$)}),EE=x({topics:L(x({id:p(),label:p(),imageUrl:p(),isFollowed:he()}))}),X$=x({position:j(),chapterId:p()}),wE=x({isAvailable:he(),podcastId:p(),chapters:L(J$),topics:EE.optional(),playback:X$}),eq=x({positionInSeconds:j(),chapterId:p()}),tq=x({id:p(),title:p(),topic:p().nullable().optional(),image:Q$,audio:x({name:p(),duration:j()})}),lp=x({isAvailable:he(),podcastId:p(),chapters:L(tq),playback:eq}),nq=ke(ZF),IE=ke(qF),sq=ke(KF),oq=x({channel:sq,tier:IE,isAutoRenew:he()}),rq=x({portrait:x({consentType:w("portrait"),version:p().nullable()}).nullable()}),_E=Zm({id:p(),firstName:p().nullable(),anid:p().nullable(),isPro:he(),isDeprecated:he().nullish(),inEeaPlusRegion:he(),inGdprRegion:he(),regionCode:ke(Object.values(Nd)),isHistoryMigrationPending:he(),isInsider:he(),isEligibleForFreeTrial:he().optional(),phoneLink:Zm({deviceName:p().nullable()}).nullable(),ageGroup:ke(WF).nullable(),allowedToggles:Zm({textTraining:he(),voiceTraining:he(),personalization:he()}),remainingUsage:Zm({reasoningCalls:j(),podcastGenerations:j(),researchCalls:j(),visionCallSeconds:j(),videoGenerations:j()}).nullish(),accountTier:nq.nullish(),subscriptions:L(oq).nullish(),requiredConsents:rq,privacyRequirement:ke(JF).nullable()}),aq=x({preferredVoice:p().nullable(),preferredCharacter:p().nullable().optional(),optOutOfTraining:he(),optInToVoiceTraining:he(),optOutOfPersonalization:he(),optOutOfPhoneConnection:he(),optInToGenerativeUI:he().optional(),allowBiometricDataUse:he().optional(),allowOneDriveAccess:he().optional(),allowEdgePasswordsAccess:he().optional(),allowBrowserActions:he().optional(),allowComputerUseActions:he().optional(),allowOutlookAccess:he().optional(),features:x({suggestedFollowups:he().optional()}).nullish()}),TE=x({errorCode:Re([w("attachment-too-large"),w("unsupported-content-type"),w("empty-attachment"),w("content-blocked"),w("rate-limit-exceeded"),w("not-signed-in")])}),iq=Re([x({url:p()}),TE]),AE=Re([x({id:p()}),TE]),_v=x({id:p(),title:p().optional(),updatedAt:p(),characterId:p().nullable().optional(),continuedAt:p().nullable(),group:n$.nullish()}),cq=x({results:L(_v),next:p().nullable()}),lq=x({id:p()}),kE=Re([w("thumbs-down"),w("thumbs-up"),xd()]),Vd=Re([w("running"),w("completed"),w("failed"),w("cancelled"),w("pending"),w("paused")]),uq=Re([w("research"),w("computerUse"),w("podcast"),w("videoGeneration")]),dq=x({type:w("chainOfThought"),text:p()}),mq=x({type:w("query"),text:p()}),fq=x({type:w("citation"),title:p(),url:p()}),pq=ke(["start","preplan","plan","exploration","reflection","report"]),hq=x({completion:j().min(0).max(1),step:pq}),gq=st("type",[dq,mq,fq]),vq=x({url:p().nullish(),prompt:p()}),ME=x({id:p(),title:p().nullish(),contents:L(gq).nullish(),inlineCitations:L(lv).nullish(),partialOutput:L(p()).nullish(),finalResponse:p().nullish(),summary:p().nullish(),coverImage:vq.nullish(),type:w("research"),status:Vd,prompt:p().optional(),progress:hq.nullish()}),oEe=ME.omit({id:!0}).extend({shareId:p()}),NE=x({url:p(),createdAt:p()}),Cq=x({type:w("computerUse"),title:p().nullish(),conversationId:p().nullish(),id:p(),status:Vd,lastScreenshot:NE.nullish(),updatedAt:p().nullish()}),RE=x({id:p(),title:p().nullish(),thumbnail:x({name:p().nullish()}).nullish()}),yq=x({type:w("podcast"),id:p(),podcast:RE.nullish(),status:Vd,updatedAt:p().nullish()}),bq=x({type:w("error"),errorCode:ke(["Failed","Blocked","Throttled"])}),xq=x({type:w("success"),thumbnailUrl:p().nullish(),videoUrl:p().nullish()}),PE=st("type",[bq,xq]),Sq=x({type:w("videoGeneration"),id:p(),result:PE.nullish(),status:Vd,prompt:p().nullish(),updatedAt:p().nullish()}),LE=st("type",[ME,Cq,yq,Sq]),f1=x({id:p(),title:p().optional(),conversationId:p().optional(),updatedAt:p(),status:Vd,type:uq}),Eq=f1.extend({type:w("research")}),wq=f1.extend({type:w("computerUse"),screenshot:p().nullish(),lastScreenshot:NE.nullish(),chainOfThought:L(p()).nullish(),computerAction:p().nullish(),statusChange:uV.optional(),lastUserCommand:Li.optional(),reaction:kE.optional(),activeTabFaviconUrl:p().nullish(),activeTabTitle:p().nullish(),viewMode:yV.nullish(),replay:xV.nullish()}),Iq=f1.extend({type:w("podcast"),podcast:RE.nullish()}),_q=f1.extend({type:w("videoGeneration"),result:PE.nullish()}),Tq=st("type",[Eq,wq,Iq,_q]),rEe=x({results:L(Tq),next:p().nullable()}),Vi=Re([w("report"),...kE.options]),Aq=Re([w("generating"),w("generated"),w("failed"),w("non-complete")]),p1=x({id:p(),createdAt:p()}),kq=x({index:p(),title:p(),url:p(),iconUrl:p().nullable(),publisher:p().nullable(),snippet:p().nullish()}),Mq=ps.extend({type:w("image"),url:p().optional(),prompt:p().optional().nullable(),isPartiallyLoading:he().optional(),reaction:Vi.optional(),partialGenerationStep:j().optional(),status:Aq.optional(),progressionText:p().nullable().optional()}),Nq=ps.extend({type:w("citation"),...lv.shape}),Rq=ps.extend({type:w("text"),text:p(),citations:L(kq).optional(),reaction:Vi.optional()}),Pq=ps.extend({type:w("task"),task:LE.nullish(),reaction:Vi.optional()}),Lq=ps.extend({type:w("card"),card:hE,reaction:Vi.optional()}),Oq=Re([w("loading"),w("success"),w("failed")]),Dq=ps.extend({type:w("indicator-ai-response"),text:p(),state:Oq}),jq=ps.extend({type:w("document"),attachmentId:p(),fileName:p(),contentType:Od,reaction:Vi.optional()}),Uq=ps.extend({type:w("deleted"),partType:ke(["page","task"])}),Fq=ps.extend({type:w("error"),text:p()});x({text:p(),title:p().optional(),lastSubActionScreenshotUrl:p().nullish()});const OE=ps.extend({type:w("chainOfThought"),text:p(),title:p().optional(),screenshotUrl:p().nullish(),reaction:Vi.optional(),partId:p()}),Bq=Re([OE,cS]),Vq=ps.extend({type:w("chainOfThoughtGroup"),items:L(Bq).optional(),isComplete:he()}),Hq=ps.extend({type:w("memorySignal"),text:p(),signalType:Re([w("remember"),w("forget")]).nullish()}),zq=x({position:Re([w("left"),w("right")]),isDefault:he(),isStreamingComplete:he().optional()}),Gq=st("type",[Rq,Mq,I$,Nq,Fq,Lq,jq,Pq,Uq,OE,Vq,cS,Hq,Dq]),Wq=x({type:w("text"),text:p()}),$q=x({type:w("browserTabs"),tabs:L(x({title:p().optional(),url:p().optional(),id:j().optional(),favIconUrl:p().optional(),windowId:j()}))}),qq=x({type:w("image"),url:p()}),Kq=x({type:w("document"),partId:p(),fileName:p(),contentType:p()});x({type:w("document"),attachmentId:p()});const Tv=w("startProductCheckoutActions"),Zq=x({type:Tv,offerId:p().nullish()}),DE=w("requestPrompt"),Yq=x({type:DE,promptKey:p()});Re([Li,m1,Tv]);Re([w("provideImageFeedback"),w("createPage"),w("appendToPage"),w("promptCharacterSpeech"),w("chatAboutNarrative"),w("sendFormData"),w("topicClick"),w("setCharacterAppearance"),Li,m1,yE,bE,Tv,DE]);const Qq=x({type:w("promptCharacterSpeech")}),Jq=x({type:w("topicClick"),topic:p()}),Xq=x({type:w("setCharacterAppearance"),body:vE}),eK=st("type",[x$,S$,E$,dV,mV,fV,pV,hV,gV,CV,Qq,C$,P$,M$,N$,Jq,Zq,Xq,Yq]),tK=x({type:w("command"),command:eK}),nK=x({type:w("dailyBriefing"),chapterId:p()}),sK=x({type:w("greeting"),greetingMessage:p()}),oK=x({type:w("news"),articleId:p()}),rK=x({type:w("newsGem"),gemId:p(),snapshotKey:p()}),aK=st("type",[nK,sK,oK,rK]);x({type:w("reference"),reference:aK});const jE=st("type",[Wq,qq,Kq,tK,$q]),iK=["chat","smart","study","reasoning","research","computerUse","search","coco"],ba=ke(iK),Av=x({type:w("ai")}),kv=x({type:w("human")}),Mv=x({type:w("groupParticipant"),id:p(),displayName:p().nullish()});st("type",[Av,kv,Mv]);const cK=ke(["idle","streaming"]),Nv=p1.extend({author:w("ai"),authorMetadata:Av.optional(),content:L(Gq),mode:ba.optional(),sideBySideConfig:zq.optional(),reaction:Vi.optional(),streamingState:cK.optional().default("idle")}),Rv=p1.extend({author:w("human"),authorMetadata:kv.optional(),content:L(jE),mode:ba.nullable()}),Pv=p1.extend({author:w("groupParticipant"),authorMetadata:Mv.optional(),content:L(jE),mode:ba.nullable()}),lK=p1.extend({author:w("system")}),uK=ke(["kicked","joined","left"]),dK=lK.extend({participant:x({userId:p(),userDisplayName:p()}),updateType:uK}),UE=Re([Nv.omit({authorMetadata:!0}).extend({author:Av}),Rv.omit({authorMetadata:!0}).extend({author:kv}),Pv.omit({authorMetadata:!0}).extend({author:Mv})]),FE=x({results:L(UE),next:p().nullable()}),aEe=x({url:p()}),mK=x({conversation:x({id:p(),title:p()})});x({qc:x({q:p(),gt:p(),sc:p()}),s:L(x({st:p(),t:p()}))});const fK=x({suggestions:L(x({text:p(),source:p()}))}),Lv=Re([w("active"),w("banned"),w("ineligible")]),Ov=Re([w("active"),w("not-started"),w("expired"),w("paused")]),pK=Re([w("not-started"),w("completed"),w("ineligible")]),hK=x({id:p(),type:p(),points:j()}),gK=x({redeemableCount:j(),redeemedCount:j(),skus:L(hK)}),iEe=x({userStatus:Lv,status:Ov,startAt:p(),endAt:p(),referralCode:p().nullish(),referralTaskStatus:pK.nullish(),rewards:gK.nullish()}),cEe=x({userStatus:Lv.nullish(),programStatus:Ov}),lEe=x({userStatus:Lv.nullish(),programStatus:Ov,lastRequestTime:p(),userId:p()}),g4=ke(["prefillComposer","sendMessage"]),Dv=st("type",[x({type:w(g4.enum.prefillComposer),prompt:p()}),x({type:w(g4.enum.sendMessage),prompt:p()})]),BE=x({id:p(),text:p(),action:Dv}),vK=x({id:p(),text:p(),thumbnail:x({url:p(),altText:p()}),action:Dv});x({id:p(),text:p(),action:Dv});const CK=x({id:p(),label:p(),items:L(BE)}),VE=st("type",[x({type:w("text"),id:p(),title:p().nullish(),items:L(BE)}),x({type:w("textAndImage"),id:p(),title:p().nullish(),items:L(vK)}),x({type:w("categories"),id:p(),title:p().nullish(),categories:L(CK)})]);x({widgets:L(VE)});const yK=x({text:p()}),bK=x({greetingOptions:L(yK),widgets:L(VE)}),xK=x({pages:L(bK)});x({Questions:L(p()),Url:p(),NormalizedUrl:p().optional(),DebugInfo:p().optional()});x({tabId:j(),windowId:j(),url:p(),title:p(),content:p().optional(),favIconUrl:p().optional()});const HE=x({id:p(),type:ke(Z7),status:ke(QF)}),SK=x({connections:L(HE)}),EK=x({connection:HE,loginUrl:p()}),wK=x({encrypted:x({keyName:p(),blob:p()}),unencryptedMetadata:x({url:p(),blacklisted:he().optional(),dateLastUsedWindowsEpochMicros:j().optional(),passwordIssues:ki(p(),C8()).optional(),type:j()}),encryptedNotesBackup:x({keyName:p(),blob:p()}).optional()});x({passwords:L(wK),count:j(),hasMore:he().optional()});const IK=st("author",[Nv,Rv,Pv]),uEe=st("author",[Nv,Rv,Pv,dK]),_K=st("eventName",[x({eventName:w("auth0.accountAdded")}),x({eventName:w("auth0.accountRemoved")})]),TK=["imagegeneration","f1","school","msn","bing"],Kr={OPENED:0,RECENT:1,HISTORY:2},AK=x({messages:L(IK),conversationTitle:p()}),kK={ocid:"OCID",OCID:"OCID",msclkid:"msclkid",gclid:"gclid",rdt_cid:"rdtCid",fbclid:"fbclid",ttclid:"ttclid",li_fat_id:"liFatId",vmcid:"vmcid",ttd_clk:"ttdClk"},v4={gclid:"Google",msclkid:"Bing",rdt_cid:"Reddit",fbclid:"Meta",ttclid:"TikTok",li_fat_id:"LinkedIn",vmcid:"Yahoo",ttd_clk:"TradeDesk"};let h2=null;function tn(e){return typeof window>"u"?null:new URLSearchParams(window.location.search).get(e)}function pr(e){jv([e])}function jv(e){const t=new URL(window.location.href),n=e.filter(s=>t.searchParams.has(s));if(n.length!==0){for(const s of n)t.searchParams.delete(s);window.history.replaceState(null,"",t)}}function MK(){return Object.entries(kK).reduce((e,[t,n])=>{const s=tn(t);return s?{...e,[n]:s}:e},{})}function zE(){jv(["ocid","OCID","msclkid","gclid","rdt_cid","fbclid","ttclid","li_fat_id","vmcid","ttd_clk"])}function NK(){const e=tn("form");if(e)return pr("form"),e;const t=tn("FORM");return t&&pr("FORM"),t}function RK(){const e=tn("ocid");return e||tn("OCID")}function PK(){return tn("alias")}function LK(){const e=tn("chat-mode");return e&&pr("chat-mode"),e}function dEe(){const e=tn("audiomode");return e&&pr("audiomode"),e}function OK(){const e=tn("q");return e&&pr("q"),e}function DK(){const e=tn("prompt");return e&&pr("prompt"),e}function jK(){const e=tn("sandbox");return e&&pr("sandbox"),e==="1"}function UK(){if(typeof window>"u")return!1;const e=tn("disable-all-features");return e!==null&&e!=="0"&&e!=="false"}function mEe(){return tn("payflow-correlationId")}function fEe(){return tn("entry-point")??""}function pEe(){const e=tn("campaign");return e?(ca("campaignId",e),e):null}function hEe(){const e=tn("referral-code");return e?(ca("referralCode",e),e):null}function FK(){const e=tn("windows");return e&&pr("windows"),e==="1"}function BK(){return tn("charid")}const VK=[["payflowCorrelationId","pfcid"],["payflowFrom","pff"],["payflowAuthHint","pfah"],["payflowEntry","pfe"],["payflowRequiresPremium","pfrp"]];function gEe(){const e={payflowCorrelationId:"",payflowFrom:"",payflowAuthHint:"",payflowEntry:"",payflowRequiresPremium:""};for(const[t,n]of VK){const s=tn(n);s&&(e[t]=s)}return e}function HK(){const e=tn("intent");return h2===null&&(h2=e),e}function zK(){return h2}function GK(e){const t=e.toLowerCase();return TK.includes(t)}const WK=["text","queryParam"];function $K(e){return WK.includes(e)}function qK(){const e=tn("input-method");return e?(pr("input-method"),$K(e)?e:"queryParam"):"queryParam"}function vEe(){return[]}function CEe(){return[]}function xa(e){const t=typeof navigator<"u"?navigator.userAgent:null;return t?e.test(t):!1}function KK(){return xa(/BingSapphire/gi)}function ZK(){return xa(/NewsSapphire/gi)}function Uv(){return typeof navigator>"u"?!1:!!(navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Macintosh/i.test(navigator.userAgent)&&"ontouchend"in document)}function Hd(){return Uv()||xa(/iPad|iPhone|Android|iPod/gi)}function YK(){return xa(/macintosh|mac os x/gi)&&!Uv()&&!Fv()}function QK(){return xa(/Android/gi)}function Fv(){return Uv()||xa(/iPhone|iPad|iPod/gi)}function GE(){return xa(/Windows|Win32|WOW64/i)}function JK(){return xa(/CopilotNative.*macOS/gi)}const h1=R(!1),XK=he().optional(),il=fs({key:wF,schema:XK,initialValue:void 0}),eZ=he().optional(),lg=fs({key:IF,schema:eZ,initialValue:void 0});function tZ(){return pe(h1)&&!!pe(il)}function WE(){return typeof window>"u"||window.isStudioServer?"studio":"snr"}function $E(){if(!(typeof window>"u"))return window.isStudioSsr?"ssr":"csr"}const nZ={"thumbs-up":"thumbsUp","thumbs-down":"thumbsDown",report:"reportMessage"},C4="homepage";function sZ(){return _t("kill-analytics-custom-batch")?{instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0}:{instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3,autoFlushEventsLimit:5},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0,extensionConfig:{PostChannel:{maxBatchInterval:1e4,maxBatchCount:20,immediateEventLimit:100}}}}class oZ{constructor(t={}){O(this,"analytics",null);O(this,"features");O(this,"picassoId",null);O(this,"anid",null);O(this,"formCode",null);O(this,"landingPage",C4);O(this,"trafficAlias",null);O(this,"settings",null);O(this,"isAADUser",null);O(this,"isNewUser",null);O(this,"isCopilotMode",null);O(this,"accountType",null);O(this,"referrer",null);O(this,"deviceInfo",null);O(this,"anaheimId",null);O(this,"pluginProvider",null);O(this,"pluginCache",null);O(this,"publisherInfo",null);O(this,"isInitializing",!1);O(this,"pendingEvents",[]);O(this,"initRetryCount",0);O(this,"maxRetries");O(this,"maxPendingEvents");O(this,"delay");O(this,"onInitializeError");O(this,"initializationPromise",null);this.maxRetries=t.maxRetries??3,this.maxPendingEvents=t.maxPendingEvents??1e3,this.delay=t.delay??0,this.onInitializeError=t.onInitializeError}getSurface(){return this.getPlatformSurface("cmc")}getAppName(){return`CopilotN-${this.currentEnv}-web-${this.getSurface()}`}ensureInitialized(t){!this.isInitialized&&!this.isInitializing&&(this.pluginProvider=t,this.isInitializing=!0,this.initialize())}get plugin(){return this.pluginCache===null&&this.pluginProvider!==null&&this.analytics!==null&&(this.pluginCache=this.pluginProvider(),this.pluginCache&&this.analytics.addNotificationListener(this.pluginCache)),this.pluginCache}get isInitialized(){return this.analytics!==null&&this.analytics.isInitialized()}get currentEnv(){return"prod"}get initializationFailed(){return this.initRetryCount>=this.maxRetries}setFeatures(t){this.features=t.join(",")}setAnid(t){this.anid=t}getAnid(){return this.anid}setIsNewUser(t){this.isNewUser===null&&(this.isNewUser=t)}setIsAad(t){this.isAADUser=t}setCopilotMode(t){this.isCopilotMode=t}setSettings(t){this.settings={...this.settings,...t}}getPicassoId(){return this.picassoId}setPicassoId(t){this.picassoId=t}setFormCode(t){this.formCode=t}getFormCode(){return this.formCode}setDeviceInfo(t){this.deviceInfo=t}setLandingPage(t){this.landingPage===C4&&(this.landingPage=t)}getLandingPage(){return this.landingPage}isValidLowercaseUserAccountType(t){return["msa","aad","apple","google"].includes(t)}setUserAccountType(t){if(!t){this.accountType=null;return}const n=t.toLowerCase();this.isValidLowercaseUserAccountType(n)?this.accountType=n:this.accountType=null}getUserAccountType(){return this.accountType}processFormCode(){const t=NK();this.formCode=t}processAlias(){const t=PK();t&&(this.trafficAlias=t)}processReferrer(){this.referrer===null&&typeof document<"u"&&(this.referrer=document.referrer)}getAnaheimIdFromHTML(){try{const t=document.querySelector("meta[name='x-client-data']");if(!t)return null;const n=t.getAttribute("content");if(!n)return null;const s=atob(n),o=JSON.parse(s);if(typeof o!="object"||o===null)return null;const r=o;if(!("4"in r))return null;const a=r[4];return typeof a=="string"?a:null}catch{return null}}processAnaheimId(){const t=this.getAnaheimIdFromHTML();t&&(this.anaheimId=t)}initialize(){this.isInitialized||(this.processFormCode(),this.processAlias(),this.processReferrer(),this.processAnaheimId(),this.processPublisherFromUrl(),this.initializationPromise=this.dynamicInitialization(),this.initializationPromise.catch(()=>{}))}async dynamicInitialization(){var n,s;this.delay>0&&await new Promise(o=>{setTimeout(o,this.delay)});const t=await B(()=>import("./vendor-BvnAIcm_.js").then(o=>o.ay),[]).catch(o=>o instanceof Error?o:new Error(`Failed to load @microsoft/1ds-analytics-js: ${o}`));if(t instanceof Error)(n=this.onInitializeError)==null||n.call(this,t),this.initRetryCount+=1,this.initRetryCount>=this.maxRetries&&((s=this.onInitializeError)==null||s.call(this,new Error("ApplicationInsights initialization: Max retries reached")),this.pendingEvents.length=0);else{const{ApplicationInsights:o}=t;this.analytics=new o;const r=sZ();this.analytics.initialize(r,[]),this.flushPendingEvents()}this.isInitializing=!1}flushPendingEvents(){for(let t=0,n=this.pendingEvents.length;t<n;t+=1){const s=this.pendingEvents[t];s&&this.trackEventInternal(s)}this.pendingEvents.length=0}getPlatformSurface(t){if(t==="pageseditor"){if(QK())return"android";if(Fv())return"ios";if(JK())return"mac"}return t}getAppFlavor(){return tZ()?{eventInfo_appFlavor:"beta"}:null}processPublisherFromUrl(){const t=new URLSearchParams(window.location.search),n=Object.keys(v4).find(s=>t.has(s));n&&(this.publisherInfo={publisher:v4[n]})}getFixEventProperties(){var t;return{appName:this.getAppName(),appVersion:rv(),surface:this.getSurface(),server:WE(),surfaceVersion:_B(navigator.userAgent),accountType:this.accountType,userMuid:ia("MUID"),aliasMuid:ia("MUID",1),userAnid:this.anid,userPicassoId:this.picassoId,userFlightIds:this.features,trafficAlias:this.trafficAlias,eventInfo_entryPoint:this.formCode,eventInfo_surfaceVisible:document.visibilityState==="visible",eventInfo_isCopilotMode:this.isCopilotMode,isAADUser:this.isAADUser,isNewUser:this.isNewUser,pathname:window.location.pathname,msalVersion:(t=window.msal)==null?void 0:t.version,referrer:this.referrer,anaheimId:this.anaheimId,renderingType:$E(),"UserInfo.Id":this.picassoId,...Qu.getTraceIdAnalytics(),...this.settings,...this.deviceInfo,...this.getAppFlavor(),...this.publisherInfo}}trackEvent(t){if(!this.initializationFailed){if(this.pendingEvents.length>=this.maxPendingEvents){console.warn(`Analytics pending events queue is full (${this.maxPendingEvents}). Dropping event: ${JSON.stringify(t)}`);return}if(this.ensureInitialized(this.pluginProvider),this.isInitializing||!this.isInitialized){this.pendingEvents.push(t);return}this.trackEventInternal(t)}}async trackEventAsyncAfterInit(t){this.isInitialized?this.trackEvent(t):this.initializationPromise&&await this.initializationPromise}trackEventInternal(t){var l,u;const n=this.getFixEventProperties(),s=Ni(),o=R7(),r=((l=this.plugin)==null?void 0:l.generateClientEventId(t))??void 0;if(!this.analytics){console.error("Failed to initialize AnalyticsService.");return}const a={name:t.name,data:{...n,eventInfo_clientEventId:r,...t.data},ext:{web:{consentDetails:JSON.stringify({Required:!0,Analytics:s.analytics,SocialMedia:s.socialMedia,Advertising:s.advertising,GPC_DataSharingOptIn:o})}}};(t.data.eventName==="copilotCompose"||t.data.eventName==="copilotAudioInput")&&Ge.emit("composer:send-query",{isNewUser:this.isNewUser,event:t.data}),(u=this.plugin)==null||u.onBeforeTrackEvent(a),this.analytics.track(a)}}const D=new oZ({maxRetries:3,maxPendingEvents:1e3,delay:200,onInitializeError:e=>{console.error("AnalyticsService initialization error:",e)}}),rZ=.03,aZ=.1;function iZ(){return re.instance().config().sentryDsnOverride??"https://323dd84fb4f632ccd95493debe9312e0@o4508134825000960.ingest.us.sentry.io/4508799962644480"}let ug,fc;async function cZ(e,t){const n=await Bv();n&&n.captureReactException(e,t)}async function Bv(){if(ug)return ug;if(!_t("kill-sentry"))return fc||(fc=(async()=>{try{const t=await B(()=>import("./build-esm-index-Dgs0Kfls.js"),__vite__mapDeps([2,1]));ug=t;const n=[t.browserTracingIntegration(),t.tanstackRouterBrowserTracingIntegration(Ma())],s=r4?[t.browserProfilingIntegration()]:[];t.init({dsn:iZ(),release:IB(),sampleRate:aZ,environment:"production",integrations:[...n,...s],tracesSampleRate:rZ,profilesSampleRate:r4?.1:0,replaysSessionSampleRate:0,replaysOnErrorSampleRate:0}),t.setTag("surface","cmc"),t.setTag("isMobile",Hd()?"1":"0"),t.setTag("server",WE());const o=$E();return o&&t.setTag("renderingType",o),fc=void 0,t}catch{fc=void 0;return}})(),fc)}async function lZ(e){const t=await Bv();t!==void 0&&t.setUser(e?{id:e}:null)}function qE(e,t){const n=bB(e);D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ErrorBoundary",eventInfo_errorName:e.name,eventInfo_errorMessage:e.message,eventInfo_errorStack:e.stack??"",eventInfo_componentStack:t.componentStack??"",...n&&{eventInfo_apiRoute:n},...e instanceof l1&&{eventInfo_statusCode:e.statusCode}}}),cZ(e,t)}function Xu(e,t,n=!1){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"APIResponseParseError",eventInfo_apiUrl:t,eventInfo_errors:JSON.stringify(e.format()),eventInfo_safe:n}})}async function y4(e){const t=await yB(e.promise);D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"UnhandledRejection",eventInfo_reason:`${e.reason}`,eventInfo_customData:t}})}function uZ(e,t,n){try{new URL(Qr(e)).hostname}catch(s){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"invalidCitationURL",eventInfo_url:e,eventInfo_errorMessage:s instanceof Error?s.message:"",eventInfo_conversationId:t,eventInfo_messageId:n}})}}function KE(e){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"PlaybackApiError",eventInfo_errorMessage:e instanceof Error?e.message:"",eventInfo_details:"An error occurred during media playback tracking api call."}})}function dZ(e,t,n){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"InvalidJsonResponse",eventInfo_apiUrl:n,eventInfo_errorMessage:e.message,eventInfo_errorCode:t.statusText,eventInfo_details:JSON.stringify(Object.fromEntries(t.headers.entries()))}})}const mZ=25,fZ=25,pZ=6e3,hZ=12,gZ=["mica","aqua","erin"];function ZE(e){switch(e){case"mica":case"aqua":case"erin":return e;default:return null}}function vZ(e,t){switch(e){case"mica":return t("characterAnimation.characterNameMica");case"aqua":return t("characterAnimation.characterNameAqua");case"erin":return t("characterAnimation.characterNameErin");default:return""}}function CZ(e,t){return(n,s)=>{D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CharacterError",eventInfo_details:`animatingMessageId: ${e}, characterId: ${t}, name: ${n.name}, info: ${s.componentStack}`,eventInfo_errorMessage:n.message}}),qE(n,s)}}function yZ(e,t){try{const n=e==null?void 0:e.updatedAt;if(!t||!n)return;const s=new Date(n),o=new Date(t);(s.getTime()-o.getTime())/1e3/60>1&&D.trackEvent({name:"system",data:{eventName:"historyUpdatedAtDiscrepancy",eventInfo_conversationId:e.id,eventInfo_conversationUpdatedAt:n,eventInfo_lastMessageCreatedAt:t}})}catch{}}function Vv(e){return e?e.history.some(t=>t.author==="ai"&&t.streamingState==="streaming"):!1}const vn=()=>be("smart-mode-default")?"smart":"chat";function bZ(e){return e.author==="human"}function xZ(e){const t=e.filter(bZ);if(t.length===0)return;const n=t[t.length-1];return(n==null?void 0:n.mode)??null}function SZ(e){const t=xZ(e);return t===void 0?"undetermined":t===null?"unknown":t==="coco"?"coco":"non-coco"}function EZ(e,t){if(t==="undetermined")return e;const n=t==="unknown",s=t==="coco",o=e==="coco";return s?"coco":o?vn():e}GF();const Sa=R(!1),YE=R(!1),wZ=R(!1),IZ=R(!1),zd=R(void 0),vt=R(new Map),je=R(void 0),g2=R(null),dg=R(void 0),QE=R(e=>e(dg),(e,t,n)=>{const s=e(dg);s!==n&&(t(vt,o=>{const r=new Map(o);return s&&r.delete(s),r}),t(dg,n))}),JE=R(null),hn=R(e=>{const t=e(je);if(t)return e(vt).get(t)}),Hv=z5(hn,e=>e?Vv(e):!1,(e,t)=>e===t),yEe=e=>z5(vt,t=>{const n=t.get(e);return n?Vv(n):!1},(t,n)=>t===n),jc=R(!1),fo=R(new Map),bEe=R([]);R([]);const xEe=e=>R(t=>t(fo).get(e)),Ea=R(e=>{var t;return((t=e(hn))==null?void 0:t.history)??[]}),XE=R(e=>{const t=e(hn);return t?SZ(t.history):"undetermined"}),g1=R(e=>{const t=e(vt);for(const n of t.values())if(!n.title&&!n.history.length&&n.isNew)return n.id}),_Z=z5(vt,e=>{if(!(e instanceof Map))return!1;for(const t of e.values()){const{history:n}=t;if(Array.isArray(n)&&n.length>0)return!0}return!1},(e,t)=>e===t),v1=R(new Map),TZ=R(new Map),xu=R(void 0),C1=R([]),zv=R(e=>{var t;return ZE((t=e(hn))==null?void 0:t.characterId)}),hi=R("idle"),ew=R(!1),zo=R(null),b4=R("idle"),Ja=R("checking-availability"),AZ=R(null),tw=R([]),bi=R(null),Gv=R(null),Wv=R([]),kZ=R([]),nw=R(null),MZ=R(e=>e(bi)===0),$v=R(null),qv=R(null),NZ=R(null),gi=R(!1),RZ=R(!1),sw=R(!1),ow=R(Y7),ed=R(void 0),PZ=R(!0),rw=R(null),LZ=R(e=>!!e(rw));R(null);const bl=R(!1),y1=R(void 0),OZ=R(void 0),DZ=R(e=>{const t=e(hn);return t==null?void 0:t.suggestedFollowup}),SEe=R(void 0),aw=R(null),EEe=R(!1),jZ=R(!1),Kv=R(void 0),wEe=R(!1),IEe=R(void 0);R(null);const UZ=R(!1),_Ee=i1({}),Hn=R("chat-only"),TEe=R(null),AEe=R(null),kEe=R(null),b1=R(null),iw=R({}),Zv=R(!1),rr=R(null),cw=R({data:void 0,isLoading:!1}),FZ=R(e=>e(cw).data),lw=R(e=>e(cw).isLoading),_f=R(!1),uw=R(null);R(e=>{const t=e(uw);return(t==null?void 0:t.lcp)??null});const Yv=R(null),BZ=R(null),dw=R(null),v2=fs({key:EF,schema:ki(p(),p()),initialValue:{}}),Qv=R(null),Jv=R(!1),td=R([]),mw=R(null),VZ=R(null);x({url:p().optional()});const Sn=R(null);x({enabled:he().optional()});function HZ(){return!1}const zZ="https://www.copilot.com",GZ="https://www.copilot-stg.com";function fw(){return typeof window>"u"?!1:window.location.origin===zZ||window.location.origin===GZ}function Xv(){return fw()?`${window.location.origin}/c/api`:"https://copilot.microsoft.com/c/api"}function WZ(){return wt(X0,he().nullable())===!0}function $Z(){return wt(Q0,he().nullable())===!0}function qZ(){return wt(J0,he().nullable())===!0}function KZ(){return wt(e2,he().nullable())===!0}const Xa={UNDEFINED:"0",CHILD:"1",ADULT:"3",NOT_ADULT:"4",CHILD_NO_PARENTAL_CONSENT_REQUIRED:"5"},ZZ=x({name:p(),email:p(),ageGroup:ke([Xa.UNDEFINED,Xa.CHILD,Xa.ADULT,Xa.NOT_ADULT,Xa.CHILD_NO_PARENTAL_CONSENT_REQUIRED]),sub:p()}),Es={LOGIN_START:"auth0:loginStart",LOGIN_SUCCESS:"auth0:loginSuccess",LOGIN_FAILURE:"auth0:loginFailure",LOGOUT_SUCCESS:"auth0:logoutSuccess",LOGOUT_FAILURE:"auth0:logoutFailure",ACQUIRE_TOKEN_START:"auth0:acquireTokenStart",ACQUIRE_TOKEN_FAILURE:"auth0:acquireTokenFailure",REAUTH_START:"auth0:reauthStart",REAUTH_SUCCESS:"auth0:reauthSuccess",INITIALIZE_START:"auth0:initializeStart",INITIALIZE_END:"auth0:initializeEnd",ACQUIRE_TOKEN_OVERALL_SUCCESS:"auth0:acquireTokenOverallSuccess",ACQUIRE_TOKEN_OVERALL_FAILURE:"auth0:acquireTokenOverallFailure",ACQUIRE_TOKEN_TIMEOUT:"auth0:acquireTokenTimeout"},yr={ACQUIRE_TOKEN_OVERALL_SUCCESS:"msal:acquireTokenOverallSuccess",ACQUIRE_TOKEN_OVERALL_FAILURE:"msal:acquireTokenOverallFailure",ACQUIRE_TOKEN_TIMEOUT:"msal:acquireTokenTimeout",INTERACTION_IN_PROGRESS:"msal:interactionInProgress",REAUTH_ACQUIRETOKENREDIRECT_START:"msal:reauthAcquireTokenRedirectStart",REAUTH_ACQUIRETOKENREDIRECT_SUCCESS:"msal:reauthAcquireTokenRedirectSuccess",REAUTH_POPUP_SHOW:"msal:reauthPopupShow",RETRIEVE_LOGIN_WITH_LOGIN_HINT_START:"msal:retrieveLoginWithLoginHintStart",RETRIEVE_LOGIN_WITH_LOGIN_HINT_SUCCESS:"msal:retrieveLoginWithLoginHintSuccess"};function x1(){return HZ()||!1}function S1(){if(!x1())return"140e65af-45d1-4427-bf08-3e7295db6836/ChatAI.ReadWrite"}const YZ={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowPlatformBroker:!1},cache:{cacheLocation:"localStorage"}},QZ={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowNativeBroker:!1},cache:{cacheLocation:"localStorage"}},JZ={scopes:[S1()],extraQueryParameters:{lw:"1",coa:"1",nopa:"2",fl:"easi2_nowld",cobrandid:"8c0b039e-5a73-4399-9b56-7e237be2cd06"},prompt:"select_account",redirectUri:typeof window<"u"?window.location.origin:void 0},XZ={scopes:[S1()],prompt:"none",authority:"https://login.microsoftonline.com/consumers",redirectUri:typeof window<"u"?window.location.origin:void 0};function eY(){return{...XZ,scopes:[S1()]}}function Gd(){return{...JZ,scopes:[S1()]}}const x4={scopes:["User.Read"]},tY={scopes:["OneDrive.ReadWrite"],authority:"https://login.microsoftonline.com/consumers"},nY={scopes:["service::http://Passport.NET/purpose::PURPOSE_GETKEYDATA_ANAHEIM"],authority:"https://login.microsoftonline.com/consumers"},eC={graphMeApiSuffix:"/me",graphMeImageApiSuffix:"/me/photo/$value",graphMeLicenseDetails:"/me/licenseDetails"},S4={appName:"copilot_studio",enableMATS:!0,appVersion:"0.0.0"};function sY(){return x1()?void 0:"IalDS3vRtEI5X0zvsmGG7zJP9UrHTcei"}function oY(){return x1()?void 0:"auth.copilot.microsoft.com"}function pw(){return x1()?void 0:"https://copilot.microsoft.com"}function rY(){return{clientId:sY(),domain:oY(),cacheLocation:"localstorage",useRefreshTokens:!0,useRefreshTokensFallback:!0}}const hw="openid profile email offline_access ChatAI.ReadWrite",gw=typeof window<"u"?window.location.origin:void 0;function E1(){return{authorizationParams:{audience:pw(),scope:hw,redirect_uri:gw}}}function aY(){return{authorizationParams:{audience:pw(),scope:hw,redirect_uri:gw,prompt:"select_account"}}}const C2="cp-pro";function iY(e){switch(e){case"login":return Gd();case"graph":return x4;case"oneDrive":return tY;case"decryptionService":return nY;default:return x4}}const cY={actAsBroker:!0,preferredInteractionType:"redirect"};function mt(e,t){$e().set(e,t)}const lY=1e4,uY=1e4,dY=1.8,mY=2.6,vw={initialDelayMs:100,maxDelayMs:500,backoffFactor:2,maxRetries:2},Cw=["UpsellProToPremium","UpsellProToPremium-FromWinNative","ActionsLimit","ActionsLimit-FromWinNative","ActionsLimit-FromEdgeCopilotMode","DeepResearchLimit","DeepResearchLimit-FromWinNative","DeepResearchLimit-FromEdgeCopilotMode","VisionLimit","VisionLimit-FromWinNative","VisionLimit-FromEdge","VisionLimit-FromEdgeCopilotMode","PodcastLimit","PodcastLimit-FromWinNative","PodcastLimit-FromEdgeCopilotMode","Management","Management-FromWinNative","MarketSelect","Settings","Settings-FromWinNative","ProfileUpdateRequired","VoiceLimit","VideoLimit","UpsellPFToPremium","UpsellPFToPremium-FromWinNative","Unknown"],MEe={Pageseditor:"pageseditor-supported-features"},fY=["m365-family-classic-guest","m365-family-guest","m365-premium-guest"],pY="App Store",hY="Google Play",gY=["m365-personal","m365-family-admin"],yw=["m365-family-guest","m365-premium-guest","m365-premium-admin"],bw=["m365-personal","m365-family-admin"],vY=["m365-personal","m365-family-admin"];function tC(e){const t=_t("kill-subs-pro-to-premium"),n=e.some(a=>a.tier==="pro"),s=e.some(a=>vY.includes(a.tier)),o=e.some(a=>a.channel!=="direct");return{isEligible:!t&&n&&!o&&(e.length===1||s&&e.length===2),hasM365Transition:s}}const xw=["m365-personal-classic","m365-premium-guest","m365-family-guest","m365-family-classic-admin","m365-family-classic-guest","m365-basic"],Sw=["m365-family-admin","m365-personal"],w1=["m365-premium-admin","pro"],E4=[...w1,...Sw,...xw];function CY(e,t=!1){if(e.length===0)return t?"buypremium":"buym365";if(e.some(n=>n.tier==="pro")){if(_t("kill-subs-pro-to-premium"))return null;const{isEligible:n,hasM365Transition:s}=tC(e);return n?s?"switchpremiumm365dual":"switchpremiumsolo":"buypremium"}return e.some(n=>yw.includes(n.tier))?null:e.some(n=>bw.includes(n.tier))||t?"upgradepremium":"upgradem365"}function yY(e,t=[]){return t.length===0?null:e.length===0?t.includes("m365-personal")?"buym365":t.includes("m365-premium")?"buypremium":null:t.includes("m365-personal")?e.some(n=>xw.includes(n.tier))?"upgradem365":null:t.includes("m365-premium")?e.some(n=>w1.includes(n.tier))?null:"upgradepremium":null}function NEe(e){return["m365-personal","m365-family-admin","m365-premium-admin"].find(n=>n===e)??null}function REe(e){var t;return e.length>0&&((t=Ew(e)[0])==null?void 0:t.tier)!=="pro"}function PEe(e){return e.some(t=>gY.includes(t.tier))&&!e.some(t=>w1.includes(t.tier))}function Ew(e){return e.slice().sort((t,n)=>E4.indexOf(t.tier)-E4.indexOf(n.tier))}function LEe(e){const t=e.find(n=>n.tier==="pro");return(t==null?void 0:t.isAutoRenew)??!1}function bY(e){const t=e==null?void 0:e.tier,n=e==null?void 0:e.channel,s=t!==void 0&&!fY.includes(t)&&(n==="apple"||n==="google");return{shouldRedirectMobile:s,redirectMobileSource:s?n:null}}function OEe({isPro:e,subscriptions:t}){if(t.length===0&&!e)return!0;if(e){const{isEligible:n}=tC(t);return n}return!1}function xY(e){return e.toLowerCase()==="zh-hant"?"zh-TW":e}function DEe(e,t){const n=t?`${e}-From${t}`:e;return Cw.find(s=>s.toLowerCase()===n.toLowerCase())??"Unknown"}function jEe(e){if(!e)return"settings.accountPlan.freePlan";switch(e.tier){case"pro":return"settings.accountPlan.proPlan";case"m365-premium-admin":return"settings.accountPlan.premiumPlan";case"m365-family-admin":return"settings.accountPlan.familyPlan";case"m365-personal":return"settings.accountPlan.personalPlan";default:return null}}const wa="ellie",ww=[wa],w4=Re([ke(ww),y8()]),SY=x({model:w("vasa"),eyesOpenRatio:L(j()).min(1),eyesPose:L(j()).min(6),jawPose:L(j()).length(3),neckPose:L(j()).length(3),rotation:L(j()).length(3),translation:L(j()).length(3),viseme:L(j()).min(10)}),EY=x({model:w("spda2e"),poseDiffusion:L(j())}),wY=x({type:w("summary"),text:p()}),IY=x({type:w("topicList"),id:p(),topics:L(x({text:p()})).nullable(),selectedIndex:j().nullable()}),_Y=st("type",[IY,wY]).nullable(),TY=Re([p(),j(),he(),xd()]),nd=RL(()=>Re([TY,L(nd),ki(p(),nd)])),AY=x({op:w("add"),path:p(),value:nd}),kY=x({op:w("remove"),path:p()}),MY=x({op:w("replace"),path:p(),value:nd}),NY=x({op:w("move"),from:p(),path:p()}),RY=x({op:w("copy"),from:p(),path:p()}),PY=x({op:w("test"),path:p(),value:nd}),LY=st("op",[AY,kY,MY,NY,RY,PY]),mg=L(LY),OY=Re([w("event-not-recognized"),w("over-turn-limit"),w("unknown-error"),w("message-too-large"),w("invalid-event"),w("empty-message"),w("empty-text"),w("text-too-long"),w("multiple-text-parts"),w("multiple-image-parts"),w("too-many-messages"),w("over-lifetime-task-quota"),w("over-task-quota"),w("page-content-length-exceeded"),w("page-count-exceeded"),w("character-out-of-capacity"),p()]),DY=Re([w("blocked"),w("not-signed-in"),w("failed"),p()]),Iw=Re([w("quiz"),w("generative-ui"),w("flashcard")]),_w=Re([w("throttled"),w("throttled-non-pro"),w("time-expired"),w("time-expired-non-pro"),w("not-in-flight"),w("error"),w("signed-out"),w("region-not-available"),w("time-expired-month"),w("time-expired-month-non-pro")]),jY=Re([w("throttled"),w("error"),w("time-expired"),w("inactivity")]),UY=ke(["human","ai"]),FY=x({voice:p().optional(),speed:j().min(50).max(200).optional(),initiator:UY.optional()}).partial(),I4=j().min(0).max(200).prefault(100),_4=Re([w("standard"),w("character")]),T4=st("event",[gl,x({event:w("pong"),id:p()}),x({event:w("connected"),id:p(),requestId:p()}),x({event:w("received"),conversationId:p(),messageId:p(),createdAt:p()}),x({event:w("newMessage"),id:p(),conversationId:p(),message:UE}),x({event:w("emojiReaction"),messageId:p(),emoji:p()}),x({event:w("startMessage"),conversationId:p(),messageId:p(),createdAt:p()}),x({event:w("appendText"),messageId:p(),text:p(),partId:p()}),x({event:w("replaceText"),messageId:p(),text:p(),partId:p()}),x({event:w("titleUpdate"),conversationId:p(),title:p()}),x({event:w("generatingImage"),messageId:p(),prompt:p(),partId:p(),progressionText:p().nullable().optional()}),x({id:p(),event:w("generatingImages"),messageId:p(),partIds:L(p()),prompt:p()}),x({event:w("imageGenerated"),messageId:p(),url:p(),partId:p()}),x({event:w("partialImageGenerated"),messageId:p(),url:p(),partId:p(),content:p()}),x({event:w("page"),messageId:p(),partId:p(),page:x({id:p(),conversationId:p(),title:p().nullish()})}),x({event:w("challenge"),method:Re([w("copilot"),w("hashcash"),w("cloudflare")]).nullish(),parameter:p().nullish()}),x({event:w("imageGenerationFailed"),messageId:p(),errorCode:DY,partId:p()}),x({id:p(),event:w("generatingCard"),messageId:p(),partId:p(),type:Iw}),x({id:p(),event:w("cardGenerationFailed"),messageId:p(),partId:p()}),x({event:w("transcriptEvent"),text:p()}),x({event:w("audioStart"),conversationId:p()}),x({event:w("audio"),audio:p()}),x({event:w("audioStartFailed"),reason:_w}),x({event:w("audioTimeRemaining"),seconds:j()}),x({event:w("callTerminated"),reason:jY}),x({event:w("audioEnd")}),x({event:w("callEnded"),id:p()}),x({event:w("audioConfig"),options:FY}),x({event:w("interruptAudio")}),x({event:w("speechEndDetected")}),x({event:w("speechStartDetected")}),x({event:w("citation"),messageId:p(),url:p(),title:p(),partId:p(),iconUrl:p().nullable(),publisher:p().nullable(),snippet:p().nullish()}),x({event:w("chainOfThought"),messageId:p(),partId:p(),text:p()}),x({event:w("turnLimitReached"),id:p()}),x({event:w("done"),messageId:p()}),x({event:w("error"),errorCode:OY}),x({event:w("card"),messageId:p(),partId:p(),card:hE}),x({event:w("document"),messageId:p(),partId:p(),attachmentId:p(),fileName:p(),contentType:Od}),x({event:w("callUI"),id:p(),callUI:_Y}),x({event:w("callUIUpdate"),id:p(),update:mg}),x({event:w("banned"),expiresAt:p()}),x({id:p(),event:w("suggestedFollowups"),messageId:p(),suggestions:L(p())}),x({event:w("taskStart"),id:p(),messageId:p(),partId:p(),task:LE}),x({event:w("taskUpdate"),id:p().nullish(),taskId:p(),update:mg}),x({event:w("startSuggestion"),id:p(),pageId:p(),suggestionId:p(),editTargets:L(x({startIndex:j(),endIndex:j()}))}),x({event:w("appendSuggestion"),id:p(),pageId:p(),suggestionId:p(),text:p()}),x({event:w("characterAnimation"),id:p(),offsetInMilliseconds:j().nullable().optional(),frame:st("model",[SY,EY]).nullable().optional()}),x({event:w("characterAnimationEnd"),messageId:p()}),x({event:w("setCallType"),callType:_4}),x({event:w("callTypeChanged"),callType:_4}),x({event:w("activityStart"),activity:iS,id:p(),messageId:p(),partId:p()}),x({event:w("activityUpdate"),id:p(),messageId:p(),partId:p(),update:mg}),x({event:w("memorySignal"),messageId:p(),partId:p(),text:p(),signalType:Re([w("remember"),w("forget")]).nullish()}),x({event:w("sideBySideComparison"),id:p(),conversationId:p(),sideBySideComparisonId:p(),defaultMessageId:p(),options:L(x({messageId:p(),position:Re([w("left"),w("right")])}))}),x({event:w("characterEmotion"),emotion:p(),bodyReaction:p()}),x({event:w("modeSelected"),id:p(),messageId:p(),mode:Re([w("chat"),w("reasoning")])}),x({event:w("partCompleted"),id:p(),messageId:p(),partId:p()}),x({event:w("characterAppearance"),body:x({primaryColor:p().nullable(),secondaryColor:p().nullable(),leftAccentColor:p().nullable(),rightAccentColor:p().nullable(),colorParticles:p().nullable().optional(),shape:p().nullable().optional()}),props:x({hat:p().nullable().optional(),glasses:p().nullable().optional(),accessory:p().nullable().optional()}).optional(),id:p()}),x({event:w("browserAutomate"),messageId:p(),partId:p(),tabIds:L(j()),activeTabId:j().optional()}),x({event:w("relatedSearchResultsAvailable"),messageId:p()}),x({event:w("participantUpdate"),conversationId:p(),participant:x({userId:p(),userDisplayName:p()}),updateType:Re([w("kicked"),w("joined"),w("left")]),id:p()}),x({event:w("suggestVision"),conversationId:p()})]),Tw={kNotPresent:0,kAccepted:1},UEe={kNoError:0,kUnknownError:1,kNoConsent:2,kBlockedByDlp:3,kNotSupportedError:4,kNetworkError:5,kNoVideoTranscript:6,kNoWebContents:7,kNoDocumentHelper:8},FEe={kNotYetDetermined:0,kWeb:1,kVideoTranscript:4};function BEe(e){return typeof e=="object"&&e!==null&&"eventName"in e&&"requestId"in e&&(!("isOutgoing"in e)||!e.isOutgoing)&&"args"in e}const Yt=R(void 0),Wd=R(e=>e(Yt)!==void 0),Aw=fs({key:O7,schema:p().optional(),initialValue:void 0}),kw=R(e=>{const t=e(Yt),n=e(Aw);return t===void 0?n:t.firstName??t.givenName}),I1=R(e=>{var t;return(t=e(Yt))==null?void 0:t.id}),$d=R(void 0),VEe=R(e=>e(C1).find(t=>t.id===e($d))),HEe=R(e=>{var s,o;const t=e(C1),n=e($d)??((s=t[0])==null?void 0:s.id);return(o=t.find(r=>r.id===n))==null?void 0:o.voicemails}),BY=fs({key:Qb,schema:I4,initialValue:wt(Qb,I4)??Rd}),Co=fs({key:qb,schema:w4,initialValue:wt(qb,w4)??void 0}),VY=fs({key:vF,schema:he().optional(),initialValue:void 0}),zEe=fs({key:Kb,schema:he(),initialValue:wt(Kb,he())??!1}),Mw=R(null),qd=R(null),Nw=R(e=>e(Wv).find(t=>t.id===e(qd))),GEe=R(!1),WEe=R(Tw.kNotPresent),$Ee=R(Tw.kNotPresent),Rw=R(void 0),nC=R(!1),_1=R(void 0),HY=R(!1);R(!1);const Pw=R(void 0),zY=R(!1),GY=R(!1),WY=R(!1),Lw=R(void 0),Ow=R(void 0),T1=R(null),Kd=R(null),A1=R(null),$Y=R(!0),qEe=R(!1),KEe=R(!1),Dw=R(e=>{const t=e(Yt),n=(t==null?void 0:t.subscriptions)??[];return n.some(s=>s.tier==="pro")&&!n.some(s=>s.tier==="m365-premium-admin")}),qY=R(e=>{var t;return(t=e(Yt))==null?void 0:t.isStudent}),jw=R(e=>{var t;return(t=e(Yt))==null?void 0:t.inEeaPlusRegion}),Mn=R(void 0),KY=R(!1);R(e=>{const t=e(Mn);return t&&dB.includes(t)});const Uw=R(void 0),ZEe=R(e=>{var t;return((t=e(Yt))==null?void 0:t.isEligibleForFreeTrial)??!1}),Fw=R(void 0),Zd=R(e=>{var t;return((t=e(Yt))==null?void 0:t.ageGroup)==="teen"}),YEe=R(!1),QEe=R(e=>{var t;return(t=e(Yt))==null?void 0:t.allowedToggles.computerUseActions}),ZY=R(e=>{var t;return(t=e(Yt))==null?void 0:t.allowedToggles.personalization}),YY=R(e=>{var t;return(t=e(Yt))==null?void 0:t.allowedToggles.textTraining}),QY=R(e=>{var t;return(t=e(Yt))==null?void 0:t.allowedToggles.voiceTraining}),Bw=R(!1),Vw=R(null),Yd=R(e=>{var t,n;return((n=(t=e(Yt))==null?void 0:t.subscriptions)==null?void 0:n.filter(s=>IE.safeParse(s.tier).success))??[]}),Hi=R(e=>{const t=e(Yd);return Ew(t)[0]}),JY=R(e=>{const t=e(Hi);return(t==null?void 0:t.tier)??"free"}),XY=R(null),sC=R(null);R(e=>{var t;return((t=e(Yt))==null?void 0:t.accountTier)??null});const eQ=R(e=>{var n;const t=(n=e(Hi))==null?void 0:n.tier;return t!==void 0&&Sw.includes(t)}),oC=R(e=>{var n;const t=(n=e(Hi))==null?void 0:n.tier;return t!==void 0&&w1.includes(t)}),k1=R(e=>{const t=e(eQ),n=e(oC);return t||n}),tQ=R(e=>e(Yd).length>0);function Hw(e,t,n){return n!==void 0?n:t&&!e}function Qt(){const e=M(Uw),t=M(Ri),n=!!M(cn);return Hw(t,n,e)}function M1(){const e=$e(),t=e.get(Uw),n=e.get(Ri),s=!!e.get(cn);return Hw(n,s,t)}const nQ=ke(["upgrade-subscription","mobile-cross-selling","mac-cross-selling"]),zw={connectorConsentFlowStartUrl:p(),parsedPayflowEntryPoint:ke(Cw),payflowAuthHint:p(),payflowCorrelationId:p(),payflowInstanceId:p(),payflowRequiresPremium:he(),reauthAcquireTokenStartTime:p(),redirectPathOnNextStart:p(),retrieveLoginWithLoginHintStartTime:p(),settingsPromoteContent:nQ,shouldStartSubscription:he(),"sticky-conversation-mode":ba};function Ws(e,t){if(typeof sessionStorage>"u")return!1;try{return zw[e].parse(t),sessionStorage.setItem(e,JSON.stringify(t)),!0}catch{return!1}}function Dn(e){if(typeof sessionStorage>"u")return null;const t=sessionStorage.getItem(e);if(!t)return null;try{const n=JSON.parse(t);return zw[e].parse(n)}catch{return null}}function Jr(e){typeof sessionStorage>"u"||sessionStorage.removeItem(e)}async function sQ(e){var s;const t=(s=e.body)==null?void 0:s.getReader();if(!t)return 0;let n=0;try{const o=performance.now();for(;performance.now()-o<2e3;){const{value:r,done:a}=await t.read();if(a)break;n+=r.byteLength}return n}catch{return 0}}const oQ=1e3;function qt(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_clickDestination:e.destination,eventInfo_conversationId:e.conversationId,eventInfo_podcastId:e.podcastId,eventInfo_messageId:e.messageId,eventInfo_mode:e.chatMode,eventInfo_messageType:e.messageType,eventInfo_cardType:e.cardType,eventInfo_merchantPlatform:e.merchantPlatform,eventInfo_additionalData:e.additionalData?JSON.stringify(e.additionalData):void 0}})}function ye(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_pageName:e.pageName,eventInfo_sectionName:e.sectionName,eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_clickDestination:e.destination,eventInfo_conversationId:e.conversationId,eventInfo_customData:e.customData}})}const rQ=30*60*1e3;function Gw(e){const t=Date.now(),n={eventInfo_pageName:e.pageName,eventInfo_sectionName:e.sectionName,eventInfo_clickSource:e.source,eventInfo_clickScenario:e.scenario,eventInfo_conversationId:e.conversationId,eventInfo_correlationId:`${e.conversationId}-${t}`};D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickDestination:e.destination,eventInfo_customData:e.customData,...n}});let s=!1,o=null;const r=()=>{o!==null&&(window.clearTimeout(o),o=null),document.removeEventListener("visibilitychange",a)},a=()=>{if(document.visibilityState==="visible"&&!s){s=!0;const l=Math.floor((Date.now()-t)/1e3);D.trackEvent({name:"interaction",data:{eventName:"copilotClickDwellTime",eventInfo_dwellTime:l,...n}}),r()}};document.addEventListener("visibilitychange",a),o=window.setTimeout(()=>{r()},rQ)}function un(e){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionScenario:e.scenario,eventInfo_impressionPage:e.page,eventInfo_impressionElement:e.element,eventInfo_status:e.status,eventInfo_customData:e.customData}})}function po(e){D.trackEvent({name:"health",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:e.feature,eventInfo_scenario:e.scenario,eventInfo_duration:e.duration,eventInfo_customData:e.customData}})}function Kt(e){D.trackEvent({name:"health",data:{eventName:"copilotError",eventInfo_feature:e.feature,eventInfo_scenario:e.scenario,eventInfo_errorType:e.errorType,eventInfo_errorMessage:e.errorMessage,eventInfo_exception:e.exception,eventInfo_customData:e.customData}})}function aQ(e){D.trackEvent({name:"interaction",data:{eventName:"copilotSettingChange",eventInfo_settingName:e.settingName,eventInfo_settingOldValue:e.oldValue,eventInfo_settingNewValue:e.newValue}})}function Ww(e,t=oQ){let n;function s(){n=window.setTimeout(()=>{e()},t)}function o(){window.clearTimeout(n)}return{onHoverStart:s,onHoverEnd:o}}function $w(e,t,n,s){setTimeout(async()=>{try{const{status:o}=s,r=await sQ(s),a=s.headers.get("x-ceto-ref")??"";D.trackEvent({name:"apiresponse",data:{eventName:"copilotApiResponse",eventInfo_path:e,eventInfo_method:t,eventInfo_status:o,eventInfo_duration:n,eventInfo_responseContentLength:r,eventInfo_cetoRef:a}})}catch{}},0)}function A4(){performance.mark("userSession-end",{startTime:performance.now()});const{duration:e}=performance.measure("userSession-duration","startupTime-begin","userSession-end");D.trackEvent({name:"system",data:{eventName:"copilotExitEvent",eventInfo_duration:e}})}function iQ(e,t,n){D.trackEvent({name:"interaction",data:{eventName:"copilotComposerInput",eventInfo_conversationId:e,eventInfo_inputMethod:t,eventInfo_customData:n}})}function cQ(e){D.trackEvent({name:"interaction",data:{eventName:"copilotScroll",eventInfo_ScrollSource:e.scrollSource,eventInfo_ScrollStartX:e.scrollStartX,eventInfo_ScrollStartY:e.scrollStartY,eventInfo_ScrollEndX:e.scrollEndX,eventInfo_ScrollEndY:e.scrollEndY,eventInfo_ScrollDuration:e.scrollDuration,eventInfo_userInitiated:e.userInitiated,eventInfo_customData:e.customData}})}const y2="authInitStartTime";function qw(e,t){if(M1()){const s=$e().get(cn),o=s==null?void 0:s.accountType;Kt({feature:"api",scenario:t,errorType:"missingToken",errorMessage:`User is authenticated but no token was available for ${t==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:e,accountType:o})})}}function Kw(e,t){const s=$e().get(cn),o=s==null?void 0:s.accountType,r=s==null?void 0:s.provider,a=s==null?void 0:s.tenantId;o||Kt({feature:"api",scenario:t,errorType:"emptyAccountTypeWithToken",errorMessage:`Can get the token but with no user account type ${t==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:e,provider:r,tenantId:a})})}function Zw(e){const{providerType:t,apiName:n,extraInfo:s}=e,o=Date.now().toString();ca(y2,o),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}function Yw(e){const{providerType:t,apiName:n,extraInfo:s}=e,o=Date.now(),r=fr(y2);if(r){const a=parseFloat(r),l=o-a;sessionStorage.removeItem(y2),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_duration:l,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}}function Qw(e){const{authWorkflowAccountType:t,interactionType:n,correlationId:s,prompt:o,redirectUri:r,apiName:a,extraInfo:l}=e,u=Date.now().toString();An(Z0,u),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:a,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_interactionType:n??"",eventInfo_correlationId:s??"",eventInfo_prompt:o??"",eventInfo_redirectUri:r??"",...l})}})}function Jw(e){const{authWorkflowAccountType:t,isMSA:n,authority:s,correlationId:o,interactionType:r,apiName:a,extraInfo:l}=e,u=Date.now(),d=rn(Z0);let m;if(d){const f=parseFloat(d);m=u-f,jt(Z0)}D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:a,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_interactionType:r,eventInfo_correlationId:o,eventInfo_authority:s,eventInfo_isMSA:n??!1,...l}),eventInfo_duration:m??0}})}function Xw(e){const{providerType:t,apiName:n,extraInfo:s}=e;D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_providerType:t,...s})}})}function jo(e){const{authWorkflowAccountType:t,apiName:n,duration:s,extraInfo:o}=e;D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:N1(),...o})}})}async function eI(e){const{authWorkflowAccountType:t,apiName:n,duration:s,extraInfo:o}=e;await D.trackEventAsyncAfterInit({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:N1(),...o})}})}function la(e){const{authWorkflowAccountType:t,apiName:n,errorMessage:s,errorType:o,errorExtraInfo:r,errorCode:a,extraInfo:l}=e;D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!1,eventInfo_apiName:n,eventInfo_errorType:o,eventInfo_errorMessage:s,eventInfo_errorCode:a,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t??"unknown",eventInfo_wasInBackground:N1(),...l,...r})}})}function fg(e){const{authWorkflowAccountType:t,apiName:n}=e;An(Y0,"1"),D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t})}})}function lQ(e){const{authWorkflowAccountType:t,apiName:n,duration:s}=e,o=rn(Y0);o==="1"&&jt(Y0),o==="1"&&D.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:s??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:t})}})}function rC(e,t){return{eventInfo_requestType:t,eventInfo_retryAttemptCount:e.attemptCount,eventInfo_retryStartTime:e.startTime,eventInfo_retryEndDelay:e.endTime,eventInfo_retryDelayTimings:e.delayTimings.join(","),eventInfo_allErrors:JSON.stringify(e.errors),eventInfo_wasInBackground:N1()}}function tI(e,t,n){jo({authWorkflowAccountType:n,apiName:n==="microsoft"?yr.ACQUIRE_TOKEN_OVERALL_SUCCESS:Es.ACQUIRE_TOKEN_OVERALL_SUCCESS,extraInfo:rC(e,t)})}function nI(e,t,n){const s=rC(e,t),o=e.errors[e.errors.length-1];la({authWorkflowAccountType:n,apiName:n==="microsoft"?yr.ACQUIRE_TOKEN_OVERALL_FAILURE:Es.ACQUIRE_TOKEN_OVERALL_FAILURE,errorType:(o==null?void 0:o.errorType)??"unknown",errorMessage:(o==null?void 0:o.errorMessage)??"unknown error",extraInfo:{...s,eventInfo_exitReason:e.exitReason}})}function sI(e,t,n){const s=rC(e,t);la({authWorkflowAccountType:n,apiName:n==="microsoft"?yr.ACQUIRE_TOKEN_TIMEOUT:Es.ACQUIRE_TOKEN_TIMEOUT,errorType:"RequestTimeoutError",errorMessage:`Token acquisition timed out on attempt ${e.attemptCount}`,extraInfo:{...s,eventInfo_totalDuration:e.endTime-e.startTime}})}function uQ(e){const t=e instanceof Error?e.message:String(e);D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"GraphAPITimeout",eventInfo_errorMessage:t,eventInfo_details:"Student status check failed or timed out"}})}function N1(){return typeof document<"u"&&document.visibilityState==="hidden"}async function dQ(e){Ws("reauthAcquireTokenStartTime",Date.now().toString()),await eI({apiName:yr.REAUTH_ACQUIRETOKENREDIRECT_START,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_errorMessage:e.errorMessage,eventInfo_correlationId:e.correlationId}})}function mQ(){const e=Dn("reauthAcquireTokenStartTime"),t=Date.now();if(e){const n=t-parseInt(e,10);Ws("reauthAcquireTokenStartTime",""),jo({apiName:yr.REAUTH_ACQUIRETOKENREDIRECT_SUCCESS,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_duration:n}})}}function fQ(e){jo({apiName:yr.REAUTH_POPUP_SHOW,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_errorMessage:e}})}async function pQ(){Ws("retrieveLoginWithLoginHintStartTime",Date.now().toString()),await eI({apiName:yr.RETRIEVE_LOGIN_WITH_LOGIN_HINT_START,authWorkflowAccountType:"microsoft"})}function hQ(){const e=Dn("retrieveLoginWithLoginHintStartTime"),t=Date.now();if(e){const n=t-parseInt(e,10);Ws("retrieveLoginWithLoginHintStartTime",""),jo({apiName:yr.RETRIEVE_LOGIN_WITH_LOGIN_HINT_SUCCESS,authWorkflowAccountType:"microsoft",extraInfo:{eventInfo_duration:n}})}}var bd,Wr,Gc,sr;class zi{constructor(t,n){Vt(this,bd);Vt(this,Wr,null);Vt(this,Gc);Vt(this,sr,null);bt(this,bd,t),bt(this,Gc,n)}async get(t){return(me(this,sr)===null||me(this,Gc)&&(!me(this,Wr)||me(this,Wr)<Date.now()-me(this,Gc)))&&(bt(this,sr,me(this,bd).call(this,t)),bt(this,Wr,Date.now())),me(this,sr)}set(t){bt(this,sr,t),bt(this,Wr,Date.now())}reset(){bt(this,sr,null),bt(this,Wr,null)}get isInstantiated(){return me(this,sr)!==null}}bd=new WeakMap,Wr=new WeakMap,Gc=new WeakMap,sr=new WeakMap;function Qd(e){return new Promise(t=>{setTimeout(t,e)})}class Jd extends Error{constructor(n,s){super(s??`Request timed out after ${n}ms`);O(this,"name","RequestTimeoutError");O(this,"timeoutMs");this.timeoutMs=n,Object.setPrototypeOf(this,Jd.prototype)}}async function gQ(e,t){const n=new AbortController,s=setTimeout(()=>{n.abort()},t);try{const o=await e(n);return clearTimeout(s),o}catch(o){throw clearTimeout(s),n.signal.aborted||o instanceof Error&&o.name==="AbortError"?new Jd(t):o}}async function oI(e,t,n,s,o){let r=s!==void 0&&n!==void 0?t*s**n:t,a;const l=new Promise((d,m)=>{a=setTimeout(()=>{m(new Jd(r))},r)}),u=e().then(d=>(clearTimeout(a),d)).catch(d=>{throw clearTimeout(a),d});return Promise.race([u,l])}function vQ(e){return e instanceof Jd}const CQ={maxRetries:2,initialDelayMs:100,maxDelayMs:500,backoffFactor:2,jitterFactor:.1};function yQ(e){return e instanceof Error?{errorType:e.name,errorMessage:e.message}:{errorType:"Unknown",errorMessage:String(e)}}function bQ(e,t,n,s){const o=e.maxDurationMs!==void 0&&s>=e.maxDurationMs;return n>e.maxRetries?{shouldExit:!0,exitReason:"maxRetriesReached"}:o?{shouldExit:!0,exitReason:"maxDurationReached"}:e.shouldRetry&&!e.shouldRetry(t)?{shouldExit:!0,exitReason:"shouldRetryFalse"}:{shouldExit:!1,exitReason:null}}function xQ(e,t){const n=t.jitterFactor?e*t.jitterFactor*(Math.random()*2-1):0,s=e+n;return Math.min(Math.max(s,0),t.maxDelayMs)}async function Xd(e,t={}){var u,d,m,f;const n={...CQ,...t},s=performance.now();let o=n.initialDelayMs,r=0;const a=[],l=[];for(let h=0;h<=n.maxRetries;h+=1)try{const g=await e(h),C=performance.now();return(u=n.onSuccess)==null||u.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:C,errors:a}),g}catch(g){r=h+1,a.push(yQ(g));const C=performance.now(),v=vQ(g);if(v&&n.onTimeout&&n.onTimeout({attemptCount:h+1,delayTimings:l,startTime:s,endTime:C,errors:a}),h===n.maxRetries)throw(d=n.onFailure)==null||d.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:C,errors:a,exitReason:v?"requestTimeout":"maxRetriesReached"}),g;const y=C-s,{shouldExit:b,exitReason:E}=bQ(n,g,r,y);if(b)throw(m=n.onFailure)==null||m.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:C,errors:a,exitReason:E}),g;let S=xQ(o,n);if(n.maxDurationMs!==void 0){const A=n.maxDurationMs-y;if(A<=0)throw(f=n.onFailure)==null||f.call(n,{attemptCount:h+1,delayTimings:l,startTime:s,endTime:C,errors:a,exitReason:"maxDurationReached"}),g;S=Math.min(S,A)}const I=performance.now();await Qd(S);const T=performance.now()-I;l.push(T),o=Math.min(o*n.backoffFactor,n.maxDelayMs)}throw new Error("Unexpected end of retry loop")}const Lo=new zi(SQ);async function SQ(){Zw({apiName:Es.INITIALIZE_START,providerType:"auth0"});const e=await PL(rY());Yw({apiName:Es.INITIALIZE_END,providerType:"auth0"});const t=new Map([["on",null],["off",null],["cache-only",null]]);async function n(r,a){const l=performance.now();jo({authWorkflowAccountType:a,apiName:Es.ACQUIRE_TOKEN_START});const u=qZ();try{if(!u){const h=await e.getTokenSilently(r),g=performance.now();return po({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:g-l,customData:JSON.stringify({cacheMode:r.cacheMode??"on"})}),h}const d={...vw,shouldRetry:h=>!(h instanceof ib&&h.error==="login_required"),onSuccess:h=>tI(h,"graph",a??"google"),onFailure:h=>nI(h,"graph",a??"google"),onTimeout:h=>sI(h,"graph",a??"google")},m=await Xd((h=0)=>oI(()=>e.getTokenSilently(r),uY,h,mY),d),f=performance.now();return po({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:f-l,customData:JSON.stringify({cacheMode:r.cacheMode??"on"})}),m}catch(d){d instanceof ib?(o({options:r,startTime:l,authWorkflowAccountType:a,errorType:d.error,errorMessage:d.error_description,exception:d.stack}),d.error==="login_required"&&mt(qr,{reason:"token-expired",provider:"auth0"})):d instanceof Error?o({options:r,startTime:l,authWorkflowAccountType:a,errorType:d.name,errorMessage:d.message,exception:d.stack}):o({options:r,startTime:l,authWorkflowAccountType:a,errorType:"unknown",errorMessage:`${d}`});return}}async function s(r){const a=await e.getUser();if(!a)return;const l=a.sub&&a.sub.startsWith("google")?"google":"apple",u=r.cacheMode??"on",d=t.get(u);if(!d){const m=n(r,l);t.set(u,m);const f=await m;return t.set(u,null),f}return d}function o(r){const{startTime:a,options:l,authWorkflowAccountType:u,errorType:d,errorMessage:m,exception:f}=r;la({authWorkflowAccountType:u,apiName:Es.ACQUIRE_TOKEN_FAILURE,errorType:d,errorMessage:m,errorExtraInfo:{eventInfo_providerType:"auth0",eventInfo_exception:f??"",cacheMode:l.cacheMode??"on",duration:performance.now()-a}})}return{auth0:e,getAuth0AccessToken:s}}function aC(e){const t=e.split(".")[1];if(t===void 0)return;const n=t.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(n).split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{const o=JSON.parse(s);return ZZ.parse(o)}catch{return}}async function EQ(e,t){const{getAuth0AccessToken:n}=await Lo.get(),{authorizationParams:s}=E1(),o={...s,dob:e,ctry:t},r=await n({authorizationParams:o,cacheMode:"off"});if(!r)return;const a=aC(r);if(a)return a}async function wQ(){const{getAuth0AccessToken:e}=await Lo.get(),t=await e(E1());if(!t)return;const n=aC(t);if(n){if(n.sub.startsWith("google"))return"Google";if(n.sub.startsWith("apple"))return"Apple"}}function IQ(e){switch(e){case"apple":return"Apple";case"google":return"Google";case"msa":return"MSA";default:return}}function _Q(){const e=wt(tp,p());return WZ()&&(!e||!e.startsWith("3."))}const b2=new BroadcastChannel("cp.broadcast");class TQ{constructor(){O(this,"hasTrackedRedirectError",!1);O(this,"CODE_RE",/[?&]code=[^&]+/);O(this,"STATE_RE",/[?&]state=[^&]+/);O(this,"ERROR_RE",/[?&]error=[^&]+/)}async handleRedirectWithoutAccount(){try{const{auth0:t}=await Lo.get();if(this.hasAuthParams()){const n=performance.now();await t.handleRedirectCallback();const s=performance.now();po({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:s-n});const o=await t.getUser();if(!o)return;const r=o.sub?this.getTokenType(o.sub):void 0;Jw({apiName:Es.LOGIN_SUCCESS,authWorkflowAccountType:r}),b2.postMessage({eventName:"auth0.accountAdded"})}}catch(t){this.trackRedirectErrorOncePerSession(t)}}async getCurrentActiveUserAccount(){const{auth0:t}=await Lo.get(),n=await t.getUser();if(!n)return null;const{sub:s}=n;return s?{id:s,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(s)}:null}async logIn(t){const{connection:n}=t;if(!n)throw new Error("connection in LoginOpts are required");const{auth0:s}=await Lo.get();return Qw({apiName:Es.LOGIN_START,authWorkflowAccountType:t.connection??void 0}),s.loginWithRedirect({authorizationParams:{...aY().authorizationParams,connection:this.getConnectionFromTokenType(n)}})}async logOut(){const{auth0:t}=await Lo.get(),n=await t.getUser(),s=n&&n.sub?this.getTokenType(n.sub):void 0;try{await t.logout({logoutParams:{returnTo:window.location.origin}}),b2.postMessage({eventName:"auth0.accountRemoved"}),Xw({apiName:Es.LOGOUT_SUCCESS,providerType:"auth0"})}catch(o){la({authWorkflowAccountType:s,apiName:Es.LOGOUT_FAILURE,errorMessage:`${o}`,errorExtraInfo:{eventInfo_providerType:"auth0"}}),console.error("Auth0 logout failed:",o)}}async getAuthToken(t="login"){if(t!=="graph")try{const{auth0:n,getAuth0AccessToken:s}=await Lo.get(),o=await s(E1());if(!o)return;const r=await n.getUser();if(r){const a=r.sub,l=this.getTokenType(a);return{accessToken:o,tokenType:l}}}catch{return}}async getUserInfo(){const{auth0:t}=await Lo.get(),n=await t.getUser();if(n)return{mail:n.email??"",givenName:n.given_name??"",surname:n.surname??"",imgSrc:n.picture,isStudent:!1}}async getUserInfoFromToken(t){const n=aC(t);if(!n)return;const{email:s,name:o}=n;return{mail:s,givenName:o.split(" ")[0]??"",surname:"",imgSrc:"",isStudent:!1}}supportsTokenType(t){return t==="apple"||t==="google"}getTokenType(t){return t.startsWith("google")?"google":"apple"}getAccountType(t){return t.startsWith("google")?"Google":"Apple"}getConnectionFromTokenType(t){return t==="apple"?"apple":"google-oauth2"}hasAuthParams(t=window.location.search){return(this.CODE_RE.test(t)||this.ERROR_RE.test(t))&&this.STATE_RE.test(t)}trackRedirectErrorOncePerSession(t){this.hasTrackedRedirectError||(D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"auth0HandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${t}`}}),la({apiName:Es.LOGIN_FAILURE,errorExtraInfo:{eventInfo_providerType:"auth0"},errorMessage:`${t}`})),this.hasTrackedRedirectError=!0}}var x2=function(e,t){return x2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},x2(e,t)};function JEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");x2(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var k4=function(){return k4=Object.assign||function(t){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k4.apply(this,arguments)};function Nt(e,t,n,s){function o(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function l(m){try{d(s.next(m))}catch(f){a(f)}}function u(m){try{d(s.throw(m))}catch(f){a(f)}}function d(m){m.done?r(m.value):o(m.value).then(l,u)}d((s=s.apply(e,t||[])).next())})}function XEe(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},s,o,r,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(d){return function(m){return u([d,m])}}function u(d){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(s=1,o&&(r=d[0]&2?o.return:d[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,d[1])).done)return r;switch(o=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){n.label=d[1];break}if(d[0]===6&&n.label<r[1]){n.label=r[1],r=d;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(d);break}r[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(m){d=[6,m],o=0}finally{s=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function ewe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],s=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function twe(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),o,r=[],a;try{for(;(t===void 0||t-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return r}function nwe(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,r;s<o;s++)(r||!(s in t))&&(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}var ys;(function(e){e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"})(ys||(ys={}));const AQ="v1.0",kQ="https://graph.microsoft.com/",MQ=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class xi extends Error{static setGraphClientError(t){let n;return t instanceof Error?n=t:(n=new xi,n.customError=t),n}constructor(t){super(t),Object.setPrototypeOf(this,xi.prototype)}}const NQ=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],RQ=e=>{const t=r=>r.replace(/\/+$/,""),n=r=>r.replace(/^\/+/,""),s=(r,a)=>[t(r),n(a)].join("/");return Array.prototype.slice.call(e).reduce(s)},pg=e=>{const t=e&&e.constructor&&e.constructor.name;if(t==="Buffer"||t==="Blob"||t==="File"||t==="FormData"||typeof e=="string")return e;if(t==="ArrayBuffer")e=Buffer.from(e);else if(t==="Int8Array"||t==="Int16Array"||t==="Int32Array"||t==="Uint8Array"||t==="Uint16Array"||t==="Uint32Array"||t==="Uint8ClampedArray"||t==="Float32Array"||t==="Float64Array"||t==="DataView")e=Buffer.from(e.buffer);else try{e=JSON.stringify(e)}catch{throw new Error("Unable to stringify the content")}return e},rI=e=>iI(e),aI=(e,t)=>(t.forEach(n=>PQ(n)),iI(e,t)),iI=(e,t=MQ)=>{if(e=e.toLowerCase(),e.indexOf("https://")!==-1){e=e.replace("https://","");const n=e.indexOf(":"),s=e.indexOf("/");let o="";if(s!==-1)return n!==-1&&n<s?(o=e.substring(0,n),t.has(o)):(o=e.substring(0,s),t.has(o))}return!1},PQ=e=>{if(e.indexOf("/")!==-1)throw new xi("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class Si{constructor(t=[]){this.middlewareOptions=new Map;for(const n of t){const s=n.constructor;this.middlewareOptions.set(s,n)}}getMiddlewareOptions(t){return this.middlewareOptions.get(t)}setMiddlewareOptions(t,n){this.middlewareOptions.set(t,n)}}const LQ=()=>{let e="";for(let t=0;t<32;t++)(t===8||t===12||t===16||t===20)&&(e+="-"),e+=Math.floor(Math.random()*16).toString(16);return e},cI=(e,t,n)=>{let s=null;if(typeof Request<"u"&&e instanceof Request)s=e.headers.get(n);else if(typeof t<"u"&&t.headers!==void 0)if(typeof Headers<"u"&&t.headers instanceof Headers)s=t.headers.get(n);else if(t.headers instanceof Array){const o=t.headers;for(let r=0,a=o.length;r<a;r++)if(o[r][0]===n){s=o[r][1];break}}else t.headers[n]!==void 0&&(s=t.headers[n]);return s},lI=(e,t,n,s)=>{if(typeof Request<"u"&&e instanceof Request)e.headers.set(n,s);else if(typeof t<"u")if(t.headers===void 0)t.headers=new Headers({[n]:s});else if(typeof Headers<"u"&&t.headers instanceof Headers)t.headers.set(n,s);else if(t.headers instanceof Array){let o=0;const r=t.headers.length;for(;o<r;o++){const a=t.headers[o];if(a[0]===n){a[1]=s;break}}o===r&&t.headers.push([n,s])}else Object.assign(t.headers,{[n]:s})},uI=(e,t,n,s)=>{typeof Request<"u"&&e instanceof Request?e.headers.append(n,s):typeof t<"u"&&(t.headers===void 0?t.headers=new Headers({[n]:s}):typeof Headers<"u"&&t.headers instanceof Headers?t.headers.append(n,s):t.headers instanceof Array?t.headers.push([n,s]):t.headers===void 0?t.headers={[n]:s}:t.headers[n]===void 0?t.headers[n]=s:t.headers[n]+=`, ${s}`)},OQ=(e,t)=>Nt(void 0,void 0,void 0,function*(){const n=t.headers.get("Content-Type")?yield t.blob():yield Promise.resolve(void 0),{method:s,headers:o,referrer:r,referrerPolicy:a,mode:l,credentials:u,cache:d,redirect:m,integrity:f,keepalive:h,signal:g}=t;return new Request(e,{method:s,headers:o,body:n,referrer:r,referrerPolicy:a,mode:l,credentials:u,cache:d,redirect:m,integrity:f,keepalive:h,signal:g})});class DQ{constructor(t,n){this.authenticationProvider=t,this.authenticationProviderOptions=n}}var cl;(function(e){e[e.NONE=0]="NONE",e[e.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",e[e.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",e[e.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(cl||(cl={}));class Xr{constructor(){this.featureUsage=cl.NONE}static updateFeatureUsageFlag(t,n){let s;t.middlewareControl instanceof Si?s=t.middlewareControl.getMiddlewareOptions(Xr):t.middlewareControl=new Si,typeof s>"u"&&(s=new Xr,t.middlewareControl.setMiddlewareOptions(Xr,s)),s.setFeatureUsage(n)}setFeatureUsage(t){this.featureUsage=this.featureUsage|t}getFeatureUsage(){return this.featureUsage.toString(16)}}class sd{constructor(t){this.authenticationProvider=t}execute(t){return Nt(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(rI(n)||t.customHosts&&aI(n,t.customHosts)){let s;t.middlewareControl instanceof Si&&(s=t.middlewareControl.getMiddlewareOptions(DQ));let o,r;s&&(o=s.authenticationProvider,r=s.authenticationProviderOptions),o||(o=this.authenticationProvider);const l=`Bearer ${yield o.getAccessToken(r)}`;uI(t.request,t.options,sd.AUTHORIZATION_HEADER,l),Xr.updateFeatureUsageFlag(t,cl.AUTHENTICATION_HANDLER_ENABLED)}else t.options.headers&&delete t.options.headers[sd.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}sd.AUTHORIZATION_HEADER="Authorization";class jQ{execute(t){return Nt(this,void 0,void 0,function*(){t.response=yield fetch(t.request,t.options)})}}class en{constructor(t=en.DEFAULT_DELAY,n=en.DEFAULT_MAX_RETRIES,s=en.defaultShouldRetry){if(t>en.MAX_DELAY&&n>en.MAX_MAX_RETRIES){const o=new Error(`Delay and MaxRetries should not be more than ${en.MAX_DELAY} and ${en.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(t>en.MAX_DELAY){const o=new Error(`Delay should not be more than ${en.MAX_DELAY}`);throw o.name="MaxLimitExceeded",o}else if(n>en.MAX_MAX_RETRIES){const o=new Error(`MaxRetries should not be more than ${en.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(t<0&&n<0){const o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(t<0){const o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(n<0){const o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(t,en.MAX_DELAY),this.maxRetries=Math.min(n,en.MAX_MAX_RETRIES),this.shouldRetry=s}getMaxDelay(){return en.MAX_DELAY}}en.DEFAULT_DELAY=3;en.DEFAULT_MAX_RETRIES=3;en.MAX_DELAY=180;en.MAX_MAX_RETRIES=10;en.defaultShouldRetry=()=>!0;class ea{constructor(t=new en){this.options=t}isRetry(t){return ea.RETRY_STATUS_CODES.indexOf(t.status)!==-1}isBuffered(t,n){const s=typeof t=="string"?n.method:t.method;return!((s===ys.PUT||s===ys.PATCH||s===ys.POST)&&cI(t,n,"Content-Type")==="application/octet-stream")}getDelay(t,n,s){const o=()=>Number(Math.random().toFixed(3)),r=t.headers!==void 0?t.headers.get(ea.RETRY_AFTER_HEADER):null;let a;return r!==null?Number.isNaN(Number(r))?a=Math.round((new Date(r).getTime()-Date.now())/1e3):a=Number(r):a=n>=2?this.getExponentialBackOffTime(n)+s+o():s+o(),Math.min(a,this.options.getMaxDelay()+o())}getExponentialBackOffTime(t){return Math.round(1/2*(Math.pow(2,t)-1))}sleep(t){return Nt(this,void 0,void 0,function*(){const n=t*1e3;return new Promise(s=>setTimeout(s,n))})}getOptions(t){let n;return t.middlewareControl instanceof Si&&(n=t.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new en,this.options)),n}executeWithRetry(t,n,s){return Nt(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(t),n<s.maxRetries&&this.isRetry(t.response)&&this.isBuffered(t.request,t.options)&&s.shouldRetry(s.delay,n,t.request,t.options,t.response)){++n,lI(t.request,t.options,ea.RETRY_ATTEMPT_HEADER,n.toString());const o=this.getDelay(t.response,n,s.delay);return yield this.sleep(o),yield this.executeWithRetry(t,n,s)}else return})}execute(t){return Nt(this,void 0,void 0,function*(){const s=this.getOptions(t);return Xr.updateFeatureUsageFlag(t,cl.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(t,0,s)})}setNext(t){this.nextMiddleware=t}}ea.RETRY_STATUS_CODES=[429,503,504];ea.RETRY_ATTEMPT_HEADER="Retry-Attempt";ea.RETRY_AFTER_HEADER="Retry-After";class Gs{constructor(t=Gs.DEFAULT_MAX_REDIRECTS,n=Gs.defaultShouldRedirect){if(t>Gs.MAX_MAX_REDIRECTS){const s=new Error(`MaxRedirects should not be more than ${Gs.MAX_MAX_REDIRECTS}`);throw s.name="MaxLimitExceeded",s}if(t<0){const s=new Error("MaxRedirects should not be negative");throw s.name="MinExpectationNotMet",s}this.maxRedirects=t,this.shouldRedirect=n}}Gs.DEFAULT_MAX_REDIRECTS=5;Gs.MAX_MAX_REDIRECTS=20;Gs.defaultShouldRedirect=()=>!0;class xs{constructor(t=new Gs){this.options=t}isRedirect(t){return xs.REDIRECT_STATUS_CODES.indexOf(t.status)!==-1}hasLocationHeader(t){return t.headers.has(xs.LOCATION_HEADER)}getLocationHeader(t){return t.headers.get(xs.LOCATION_HEADER)}isRelativeURL(t){return t.indexOf("://")===-1}shouldDropAuthorizationHeader(t,n){const s=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=s.exec(t);let r,a;o!==null&&(r=o[0]);const l=s.exec(n);return l!==null&&(a=l[0]),typeof r<"u"&&typeof a<"u"&&r!==a}updateRequestUrl(t,n){return Nt(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?t:yield OQ(t,n.request)})}getOptions(t){let n;return t.middlewareControl instanceof Si&&(n=t.middlewareControl.getMiddlewareOptions(Gs)),typeof n>"u"&&(n=Object.assign(new Gs,this.options)),n}executeWithRedirect(t,n,s){return Nt(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(t);const o=t.response;if(n<s.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&s.shouldRedirect(o)){if(++n,o.status===xs.STATUS_CODE_SEE_OTHER)t.options.method=ys.GET,delete t.options.body;else{const r=this.getLocationHeader(o);!this.isRelativeURL(r)&&this.shouldDropAuthorizationHeader(o.url,r)&&delete t.options.headers[xs.AUTHORIZATION_HEADER],yield this.updateRequestUrl(r,t)}yield this.executeWithRedirect(t,n,s)}else return})}execute(t){return Nt(this,void 0,void 0,function*(){const s=this.getOptions(t);return t.options.redirect=xs.MANUAL_REDIRECT,Xr.updateFeatureUsageFlag(t,cl.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(t,0,s)})}setNext(t){this.nextMiddleware=t}}xs.REDIRECT_STATUS_CODES=[301,302,303,307,308];xs.STATUS_CODE_SEE_OTHER=303;xs.LOCATION_HEADER="Location";xs.AUTHORIZATION_HEADER="Authorization";xs.MANUAL_REDIRECT="manual";const UQ="3.0.7";class bs{execute(t){return Nt(this,void 0,void 0,function*(){const n=typeof t.request=="string"?t.request:t.request.url;if(rI(n)||t.customHosts&&aI(n,t.customHosts)){let s=cI(t.request,t.options,bs.CLIENT_REQUEST_ID_HEADER);s||(s=LQ(),lI(t.request,t.options,bs.CLIENT_REQUEST_ID_HEADER,s));let o=`${bs.PRODUCT_NAME}/${UQ}`,r;if(t.middlewareControl instanceof Si&&(r=t.middlewareControl.getMiddlewareOptions(Xr)),r){const a=r.getFeatureUsage();o+=` (${bs.FEATURE_USAGE_STRING}=${a})`}uI(t.request,t.options,bs.SDK_VERSION_HEADER,o)}else delete t.options.headers[bs.CLIENT_REQUEST_ID_HEADER],delete t.options.headers[bs.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(t)})}setNext(t){this.nextMiddleware=t}}bs.CLIENT_REQUEST_ID_HEADER="client-request-id";bs.SDK_VERSION_HEADER="SdkVersion";bs.PRODUCT_NAME="graph-js";bs.FEATURE_USAGE_STRING="featureUsage";function FQ(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var M4;(function(e){e[e.MANUAL=0]="MANUAL",e[e.RANDOM=1]="RANDOM"})(M4||(M4={}));var Ro;(function(e){e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.RAW="raw",e.STREAM="stream",e.TEXT="text"})(Ro||(Ro={}));var S2;(function(e){e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML="application/xhtml+xml"})(S2||(S2={}));var up;(function(e){e.TEXT_PLAIN="text/plain",e.APPLICATION_JSON="application/json"})(up||(up={}));var dp;(function(e){e.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",e.IMAGE="^image\\/.+"})(dp||(dp={}));class Nu{static parseDocumentResponse(t,n){return typeof DOMParser<"u"?new Promise((s,o)=>{t.text().then(r=>{try{const l=new DOMParser().parseFromString(r,n);s(l)}catch(a){o(a)}})}):Promise.resolve(t.body)}static convertResponse(t,n){return Nt(this,void 0,void 0,function*(){if(t.status===204)return Promise.resolve();let s;const o=t.headers.get("Content-type");switch(n){case Ro.ARRAYBUFFER:s=yield t.arrayBuffer();break;case Ro.BLOB:s=yield t.blob();break;case Ro.DOCUMENT:s=yield Nu.parseDocumentResponse(t,S2.TEXT_XML);break;case Ro.JSON:s=yield t.json();break;case Ro.STREAM:s=yield Promise.resolve(t.body);break;case Ro.TEXT:s=yield t.text();break;default:if(o!==null){const r=o.split(";")[0];new RegExp(dp.DOCUMENT).test(r)?s=yield Nu.parseDocumentResponse(t,r):new RegExp(dp.IMAGE).test(r)?s=t.blob():r===up.TEXT_PLAIN?s=yield t.text():r===up.APPLICATION_JSON?s=yield t.json():s=Promise.resolve(t.body)}else s=Promise.resolve(t.body);break}return s})}static getResponse(t,n,s){return Nt(this,void 0,void 0,function*(){if(n===Ro.RAW)return Promise.resolve(t);{const o=yield Nu.convertResponse(t,n);if(t.ok)if(typeof s=="function")s(null,o);else return o;else throw o}})}}class BQ{constructor(t){this.provider=t}getAccessToken(){return Nt(this,void 0,void 0,function*(){return new Promise((t,n)=>{this.provider((s,o)=>Nt(this,void 0,void 0,function*(){if(o)t(o);else{if(!s){const a="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";s=new xi(a)}const r=yield xi.setGraphClientError(s);n(r)}}))})})}}class Ru extends Error{constructor(t=-1,n,s){super(n||s&&s.message),Object.setPrototypeOf(this,Ru.prototype),this.statusCode=t,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=s?s.stack:this.stack}}class mp{static constructError(t,n,s){const o=new Ru(n,"",t);return t.name!==void 0&&(o.code=t.name),o.body=t.toString(),o.date=new Date,o.headers=s==null?void 0:s.headers,o}static constructErrorFromResponse(t,n,s){const o=t.error,r=new Ru(n,o.message);return r.code=o.code,o.innerError!==void 0&&(r.requestId=o.innerError["request-id"],r.date=new Date(o.innerError.date)),r.body=JSON.stringify(o),r.headers=s==null?void 0:s.headers,r}static getError(t=null,n=-1,s,o){return Nt(this,void 0,void 0,function*(){let r;if(t&&t.error?r=mp.constructErrorFromResponse(t,n,o):t instanceof Error?r=mp.constructError(t,n,o):(r=new Ru(n),r.body=t),typeof s=="function")s(r,null);else return r})}}class VQ{constructor(t,n,s){this.parsePath=o=>{if(o.indexOf("https://")!==-1){o=o.replace("https://","");const a=o.indexOf("/");a!==-1&&(this.urlComponents.host="https://"+o.substring(0,a),o=o.substring(a+1,o.length));const l=o.indexOf("/");l!==-1&&(this.urlComponents.version=o.substring(0,l),o=o.substring(l+1,o.length))}o.charAt(0)==="/"&&(o=o.substr(1));const r=o.indexOf("?");if(r===-1)this.urlComponents.path=o;else{this.urlComponents.path=o.substr(0,r);const a=o.substring(r+1,o.length).split("&");for(const l of a)this.parseQueryParameter(l)}},this.httpClient=t,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(s)}addCsvQueryParameter(t,n,s){this.urlComponents.oDataQueryParams[t]=this.urlComponents.oDataQueryParams[t]?this.urlComponents.oDataQueryParams[t]+",":"";let o=[];s.length>1&&typeof n=="string"?o=Array.prototype.slice.call(s):typeof n=="string"?o.push(n):o=o.concat(n),this.urlComponents.oDataQueryParams[t]+=o.join(",")}buildFullUrl(){const t=RQ([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(t),t}createQueryString(){const t=this.urlComponents,n=[];if(Object.keys(t.oDataQueryParams).length!==0)for(const s in t.oDataQueryParams)Object.prototype.hasOwnProperty.call(t.oDataQueryParams,s)&&n.push(s+"="+t.oDataQueryParams[s]);if(Object.keys(t.otherURLQueryParams).length!==0)for(const s in t.otherURLQueryParams)Object.prototype.hasOwnProperty.call(t.otherURLQueryParams,s)&&n.push(s+"="+t.otherURLQueryParams[s]);if(t.otherURLQueryOptions.length!==0)for(const s of t.otherURLQueryOptions)n.push(s);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(t){if(typeof t=="string")if(t.charAt(0)==="?"&&(t=t.substring(1)),t.indexOf("&")!==-1){const n=t.split("&");for(const s of n)this.parseQueryParamenterString(s)}else this.parseQueryParamenterString(t);else if(t.constructor===Object)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.setURLComponentsQueryParamater(n,t[n]);return this}parseQueryParamenterString(t){if(this.isValidQueryKeyValuePair(t)){const n=t.indexOf("="),s=t.substring(0,n),o=t.substring(n+1);this.setURLComponentsQueryParamater(s,o)}else this.urlComponents.otherURLQueryOptions.push(t)}setURLComponentsQueryParamater(t,n){if(NQ.indexOf(t)!==-1){const s=this.urlComponents.oDataQueryParams[t],o=s&&(t==="$expand"||t==="$select"||t==="$orderby");this.urlComponents.oDataQueryParams[t]=o?s+","+n:n}else this.urlComponents.otherURLQueryParams[t]=n}isValidQueryKeyValuePair(t){const n=t.indexOf("=");return!(n===-1||t.indexOf("(")!==-1&&t.indexOf("(")<n)}updateRequestOptions(t){const n=Object.assign({},t.headers);if(this.config.fetchOptions!==void 0){const s=Object.assign({},this.config.fetchOptions);Object.assign(t,s),typeof this.config.fetchOptions.headers!==void 0&&(t.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(t,this._options),t.headers!==void 0&&Object.assign(n,t.headers),Object.assign(n,this._headers),t.headers=n}send(t,n,s){var o;return Nt(this,void 0,void 0,function*(){let r;const a=new Si(this._middlewareOptions);this.updateRequestOptions(n);const l=(o=this.config)===null||o===void 0?void 0:o.customHosts;try{return r=(yield this.httpClient.sendRequest({request:t,options:n,middlewareControl:a,customHosts:l})).response,yield Nu.getResponse(r,this._responseType,s)}catch(u){if(u instanceof xi)throw u;let d;throw r&&(d=r.status),yield mp.getError(u,d,s,r)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const t=Object.keys(this._headers);for(const n of t)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(t,n){return this._headers[t]=n,this}headers(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._headers[n]=t[n]);return this}option(t,n){return this._options[t]=n,this}options(t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._options[n]=t[n]);return this}middlewareOptions(t){return this._middlewareOptions=t,this}version(t){return this.urlComponents.version=t,this}responseType(t){return this._responseType=t,this}select(t){return this.addCsvQueryParameter("$select",t,arguments),this}expand(t){return this.addCsvQueryParameter("$expand",t,arguments),this}orderby(t){return this.addCsvQueryParameter("$orderby",t,arguments),this}filter(t){return this.urlComponents.oDataQueryParams.$filter=t,this}search(t){return this.urlComponents.oDataQueryParams.$search=t,this}top(t){return this.urlComponents.oDataQueryParams.$top=t,this}skip(t){return this.urlComponents.oDataQueryParams.$skip=t,this}skipToken(t){return this.urlComponents.oDataQueryParams.$skipToken=t,this}count(t=!0){return this.urlComponents.oDataQueryParams.$count=t.toString(),this}query(t){return this.parseQueryParameter(t)}get(t){return Nt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:ys.GET};return yield this.send(n,s,t)})}post(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl(),o={method:ys.POST,body:pg(t)};return(t&&t.constructor&&t.constructor.name)==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),yield this.send(s,o,n)})}create(t,n){return Nt(this,void 0,void 0,function*(){return yield this.post(t,n)})}put(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl();this.setHeaderContentType();const o={method:ys.PUT,body:pg(t)};return yield this.send(s,o,n)})}patch(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl();this.setHeaderContentType();const o={method:ys.PATCH,body:pg(t)};return yield this.send(s,o,n)})}update(t,n){return Nt(this,void 0,void 0,function*(){return yield this.patch(t,n)})}delete(t){return Nt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:ys.DELETE};return yield this.send(n,s,t)})}del(t){return Nt(this,void 0,void 0,function*(){return yield this.delete(t)})}getStream(t){return Nt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),s={method:ys.GET};return this.responseType(Ro.STREAM),yield this.send(n,s,t)})}putStream(t,n){return Nt(this,void 0,void 0,function*(){const s=this.buildFullUrl(),o={method:ys.PUT,headers:{"Content-Type":"application/octet-stream"},body:t};return yield this.send(s,o,n)})}}class dI{constructor(...t){if(!t||!t.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...t)}setMiddleware(...t){t.length>1?this.parseMiddleWareArray(t):this.middleware=t[0]}parseMiddleWareArray(t){t.forEach((n,s)=>{s<t.length-1&&n.setNext(t[s+1])}),this.middleware=t[0]}sendRequest(t){return Nt(this,void 0,void 0,function*(){if(typeof t.request=="string"&&t.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(t),t})}}const HQ=()=>typeof process=="object"&&typeof FQ=="function";class iC{static createWithAuthenticationProvider(t){const n=new sd(t),s=new ea(new en),o=new bs,r=new jQ;if(n.setNext(s),HQ()){const a=new xs(new Gs);s.setNext(a),a.setNext(o)}else s.setNext(o);return o.setNext(r),iC.createWithMiddleware(n)}static createWithMiddleware(...t){return new dI(...t)}}const zQ=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const e=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw e.name="PolyFillNotAvailable",e}else if(typeof Promise>"u"){const e=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}else if(typeof fetch>"u"){const e=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}return!0};class fp{static init(t){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=s==="authProvider"?new BQ(t[s]):t[s]);return fp.initWithMiddleware(n)}static initWithMiddleware(t){return new fp(t)}constructor(t){this.config={baseUrl:kQ,debugLogging:!1,defaultVersion:AQ},zQ();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(this.config[s]=t[s]);let n;if(t.authProvider!==void 0&&t.middleware!==void 0){const s=new Error;throw s.name="AmbiguityInInitialization",s.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",s}else if(t.authProvider!==void 0)n=iC.createWithAuthenticationProvider(t.authProvider);else if(t.middleware!==void 0)n=new dI(...[].concat(t.middleware));else{const s=new Error;throw s.name="InvalidMiddlewareChain",s.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",s}this.httpClient=n}api(t){return new VQ(this.httpClient,this.config,t)}}const GQ=["CAREERCOACH_STUDENTS","EXCHANGESTANDARD_STUDENT","M365EDU_A3_STUDENT","M365EDU_A3_STUUSEBNFT","M365EDU_A3_STUUSEBNFT_RPA1","M365EDU_A5_STUDENT","M365EDU_A5_STUUSEBNFT","M365EDU_A5_NOPSTNCONF_STUUSEBNFT","OFFICESUBSCRIPTION_STUDENT","ATP_ENTERPRISE_STUDENT","ATP_ENTERPRISE_STUDENTS_USE_BENEFIT","POWER_BI_STANDARD_STUDENT","MCOEV_STUDENT","MEE_STUDENT","STANDARDWOFFPACK_STUDENT","STANDARDWOFFPACK_IW_STUDENT","ENTERPRISEPACKPLUS_STUDENT","ENTERPRISEPREMIUM_STUDENT","WIN10_ENT_A3_STU","MCO_TEAMS_EDU_HS_STUDENT","PROJECT_PROFESSIONAL_STUDENT","PROJECT_P1_STUDENT"];function WQ(e){return fp.init({authProvider:t=>{t(null,e)}})}async function hg(e,t){const n=performance.now(),s=await t;return D.trackEvent({name:"system",data:{eventName:"externalApiResponse",eventInfo_id:e,eventInfo_duration:performance.now()-n,eventInfo_service:"microsoft-graph"}}),s}async function $Q(e){return e.api(eC.graphMeApiSuffix).get()}async function qQ(e){try{const t=await e.api(eC.graphMeImageApiSuffix).get();return URL.createObjectURL(t)}catch{return}}async function KQ(e){const t=pe(Ri);if(be("aad-student")&&t)try{const n=await e.api(eC.graphMeLicenseDetails).get();return n&&n.value.some(o=>o.skuPartNumber&&GQ.includes(o.skuPartNumber))}catch(n){return console.error("Error checking student status:",n),!1}else return!1}async function N4(e){const t=WQ(e),[n,s,o]=await Promise.all([hg("user",$Q(t)),hg("user_photo",qQ(t)),hg("is_student",KQ(t))]);return{...n,imgSrc:s,isStudent:o}}class ZQ{supportsNaa(){return!1}supportsPwBBroker(){return!1}async handleInteractionRequiredError(t,n,s,o){var r;mt(cn,null),mt(qr,{reason:"token-expired",provider:"microsoft",loginHint:(r=n.account)==null?void 0:r.username,errorMessage:s,correlationId:o})}}class YQ extends ZQ{supportsPwBBroker(){return re.instance().config().useMSALPwBApp??!1}async instantiateMsal(){let t,n,s;if(_Q()){const l=(await B(()=>import("./azure-msal-browser-1p-v4-index-CJGT3s_5.js"),[])).default;window.msal=l;const{PublicClientApplication:u,PairwiseBrokerApplication:d}=l;t=u,n=d,s=YZ}else{const a=await B(()=>import("./vendor-BvnAIcm_.js").then(d=>d.az),[]);window.msal=a;const{PublicClientApplication:l,PairwiseBrokerApplication:u}=a;t=l,n=u,s=QZ}const o=this.supportsPwBBroker();Zw({apiName:window.msal.EventType.INITIALIZE_START,providerType:"microsoft",extraInfo:{eventInfo_isPwB:o}});let r;return o?(r=new n(s,cY,S4),await r.initialize(),await r.initializeBrokering()):r=await t.createPublicClientApplication(s,S4),Yw({apiName:window.msal.EventType.INITIALIZE_END,providerType:"microsoft",extraInfo:{eventInfo_isPwB:o}}),r}}const mI=new zi(QQ);async function QQ(){return new YQ}function JQ(e){return!(window.msal&&e instanceof window.msal.InteractionRequiredAuthError||window.msal&&e instanceof window.msal.AuthError&&(e.errorMessage===nS||parseInt(e.errorCode,10)===nv))}const cs=new zi(XQ);async function XQ(){const e=await mI.get(),t=await e.instantiateMsal(),n=new Map([["login",null],["graph",null],["oneDrive",null],["decryptionService",null]]);async function s(r,a){var m,f;const l=iY(r),u={account:a,...l,extraQueryParameters:{sus:"1"},tokenQueryParameters:{sus:"1"}},d=$Z();try{if(!d)return{accessToken:(await t.acquireTokenSilent(u)).accessToken};const h={...vw,shouldRetry:C=>JQ(C),onSuccess:C=>tI(C,r,"microsoft"),onFailure:C=>nI(C,r,"microsoft"),onTimeout:C=>sI(C,r,"microsoft")};return await Xd(async(C=0)=>oI(async()=>({accessToken:(await t.acquireTokenSilent(u)).accessToken}),lY,C,dY),h)}catch(h){if(window.msal&&h instanceof window.msal.InteractionRequiredAuthError){if(D.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenRedirect",eventInfo_requestType:r,eventInfo_traceId:h.traceId,eventInfo_errorMessage:h.errorMessage,eventInfo_errorCode:h.errorCode,eventInfo_correlationId:h.correlationId,eventInfo_timeSinceStartMs:performance.now()-window.appStart,eventInfo_localAccountId:a==null?void 0:a.localAccountId,eventInfo_homeAccountId:a==null?void 0:a.homeAccountId}}),KZ()&&!e.supportsNaa()){await dQ({correlationId:h.correlationId,errorMessage:h.errorMessage}),await t.acquireTokenRedirect({...Gd(),loginHint:(f=(m=u.account)==null?void 0:m.idTokenClaims)==null?void 0:f.login_hint,account:u.account,prompt:void 0});return}return e.handleInteractionRequiredError(t,u,h.errorMessage,h.correlationId)}if(window.msal&&h instanceof window.msal.AuthError&&(h.errorMessage===nS||parseInt(h.errorCode,10)===nv))throw D.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenUnderaged",eventInfo_requestType:r,eventInfo_errorMessage:h.errorMessage,eventInfo_errorCode:h.errorCode,eventInfo_correlationId:h.correlationId}}),new Error(sv);return}}return{msal:t,getMsalAccessToken:async r=>{const a=t.getActiveAccount();if(!a&&!e.supportsNaa())return;const l=n.get(r);if(!l){const u=s(r,a??void 0);n.set(r,u);const d=await u;return n.set(r,null),d}return l}}}function eJ(e){var n;const t=(n=e.payload)==null?void 0:n.scopes;return Array.isArray(t)?t.some(s=>typeof s!="string"?!1:s==="ConsumerStore.Purchase"||s.endsWith("purchase.create")):!1}async function tJ(e){var n,s,o,r,a,l,u,d,m,f,h;const t=eJ(e);if(e.eventType===((n=window.msal)==null?void 0:n.EventType.LOGIN_START)){const g=e.payload;Qw({apiName:window.msal.EventType.LOGIN_START,authWorkflowAccountType:"microsoft",interactionType:e.interactionType??void 0,correlationId:g.correlationId,prompt:g.prompt,redirectUri:g.redirectUri,extraInfo:{eventInfo_isBrokered:t}})}else if(e.eventType===((s=window.msal)==null?void 0:s.EventType.LOGIN_SUCCESS)||e.eventType===((o=window.msal)==null?void 0:o.EventType.SSO_SILENT_SUCCESS)){const g=e.payload&&"account"in e.payload?e.payload.account:null,C=g?!ta(g.tenantId):void 0,v=e.payload,y=(r=g==null?void 0:g.idTokenClaims)==null?void 0:r.login_hint;y&&Vn(or,p(),y),Jw({apiName:e.eventType,authWorkflowAccountType:"microsoft",interactionType:e.interactionType??void 0,correlationId:v.correlationId,authority:v.authority,isMSA:C,extraInfo:{eventInfo_isBrokered:t}})}else if(e.eventType===((a=window.msal)==null?void 0:a.EventType.LOGOUT_SUCCESS))wt(or,p())&&jt(or),wt(tp,p())&&jt(tp),Xw({apiName:window.msal.EventType.LOGOUT_SUCCESS,providerType:"microsoft",extraInfo:{eventInfo_isBrokered:t}});else if(e.eventType===((l=window.msal)==null?void 0:l.EventType.ACQUIRE_TOKEN_START)||e.eventType===((u=window.msal)==null?void 0:u.EventType.ACQUIRE_TOKEN_NETWORK_START)){ca("msalAcquireTokenStartTime",Date.now().toString());const g=e.payload;jo({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_correlationId:g.correlationId,eventInfo_redirectUri:g.redirectUri,eventInfo_cacheLookupPolicy:g.cacheLookupPolicy,eventInfo_prompt:g.prompt,eventInfo_isBrokered:t,eventInfo_localAccountId:(d=g.account)==null?void 0:d.localAccountId,eventInfo_homeAccountId:(m=g.account)==null?void 0:m.homeAccountId}})}else if(e.eventType===((f=window.msal)==null?void 0:f.EventType.ACQUIRE_TOKEN_SUCCESS)){const g=Date.now()-parseInt(fr("msalAcquireTokenStartTime")??"0",10);ca("msalAcquireTokenStartTime","");const C=e.payload,{account:v}=C,y=(h=v.idTokenClaims)==null?void 0:h.login_hint;y&&Vn(or,p(),y),jo({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_correlationId:C.correlationId,eventInfo_expiresOn:C.expiresOn,eventInfo_extExpiresOn:C.extExpiresOn,eventInfo_refreshOn:C.refreshOn,eventInfo_duration:g,eventInfo_fromCache:C.fromCache,eventInfo_isBrokered:t,eventInfo_localAccountId:C.account.localAccountId,eventInfo_homeAccountId:C.account.homeAccountId}})}else if(window.msal&&(e.eventType===window.msal.EventType.LOGIN_FAILURE||e.eventType===window.msal.EventType.ACQUIRE_TOKEN_FAILURE||e.eventType===window.msal.EventType.SSO_SILENT_FAILURE||e.eventType===window.msal.EventType.ACQUIRE_TOKEN_BY_CODE_FAILURE||e.eventType===window.msal.EventType.LOGOUT_FAILURE)){const{msal:g}=await cs.get();let C;e.eventType===window.msal.EventType.ACQUIRE_TOKEN_FAILURE&&(C=Date.now()-parseInt(fr("msalAcquireTokenStartTime")??"0",10)),e.eventType===window.msal.EventType.LOGIN_FAILURE&&jt(or);const v=e.error,y=g.getActiveAccount(),b=y==null?void 0:y.localAccountId,E=y==null?void 0:y.homeAccountId;la({authWorkflowAccountType:"microsoft",apiName:e.eventType,errorType:(v==null?void 0:v.name)??"",errorMessage:(v==null?void 0:v.message)??"",extraInfo:{eventInfo_isBrokered:t},errorExtraInfo:{eventInfo_correlationId:v==null?void 0:v.correlationId,eventInfo_errorMessage:v==null?void 0:v.errorMessage,eventInfo_errorCode:v==null?void 0:v.errorCode,eventInfo_name:v==null?void 0:v.name,eventInfo_interactionType:e.interactionType??void 0,eventInfo_subError:v==null?void 0:v.subError,eventInfo_duration:C,eventInfo_localAccountId:b,eventInfo_homeAccountId:E}})}else jo({authWorkflowAccountType:"microsoft",apiName:e.eventType,extraInfo:{eventInfo_interactionType:e.interactionType??void 0,eventInfo_isBrokered:t}})}function ta(e){return e!==cB}function nJ(e){jo({apiName:"msal:silentSSOCustomSuccess",authWorkflowAccountType:"microsoft",duration:e.duration,extraInfo:{eventInfo_accountUpdate:e.accountUpdate,eventInfo_accountType:e.accountType,eventInfo_message:e.message}})}function gg(e){la({apiName:"msal:silentSsoCustomError",authWorkflowAccountType:"microsoft",errorMessage:e.message,errorCode:e.errorCode})}class sJ{constructor(){O(this,"hasTrackedRedirectError",!1);O(this,"isHandlingRedirect",!1)}async handleRedirectWithoutAccount(){try{const{msal:t}=await cs.get();this.isHandlingRedirect&&la({authWorkflowAccountType:"microsoft",apiName:yr.INTERACTION_IN_PROGRESS,errorType:"interaction_in_progress",errorMessage:"Attempted to call handleRedirectPromise while already handling a redirect"}),this.isHandlingRedirect=!0;try{const n=await t.handleRedirectPromise();n&&(t.setActiveAccount(n.account),hQ(),mQ(),lQ({authWorkflowAccountType:"microsoft",apiName:"msal:reauthSuccess"}))}finally{this.isHandlingRedirect=!1}}catch(t){this.trackRedirectErrorOncePerSession(t)}}async logIn(){var o;const{msal:t}=await cs.get(),n={...Gd()};Vn(tp,p(),((o=window.msal)==null?void 0:o.version)??"");const s=this.buildRedirectUri();return s&&(n.redirectUri=s),t.loginRedirect(n)}buildRedirectUri(){const{surfaceQueryParam:t}=re.instance().config(),n=new URLSearchParams;let s;if(t!=null&&t.useForLoginRedirect)for(const[r,a]of Object.entries(t.params))n.set(r,a);const o=new URLSearchParams(window.location.search).get("back");return o&&n.set("back",o),n.toString()&&(s=`${window.location.origin}?${n}`),s}async logOut(){const{msal:t}=await cs.get(),n=t.getActiveAccount();await t.logoutRedirect({account:n,onRedirectNavigate:()=>!1}),D.setPicassoId(null)}async getAuthToken(t="login"){return(await cs.get()).getMsalAccessToken(t)}async getUserInfo(){const t=await this.getAuthToken("graph");if(t)return N4(t.accessToken)}async getUserInfoFromToken(t){return N4(t)}supportsTokenType(t){return t===void 0}trackRedirectErrorOncePerSession(t){this.hasTrackedRedirectError||D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"msalHandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${t}`}}),this.hasTrackedRedirectError=!0}async getAccount(){var o;const{msal:t}=await cs.get(),n=t.getAllAccounts(),s=t.getActiveAccount();if((n.length>1||n.length===1&&(s==null?void 0:s.homeAccountId)!==((o=n[0])==null?void 0:o.homeAccountId))&&jo({authWorkflowAccountType:"microsoft",apiName:"msal:getAllAccounts",extraInfo:{eventInfo_accountCount:n.length,eventInfo_accountTypes:n.map(r=>ta(r.tenantId)?"AAD":"MSA")}}),n.length!==0){if(n.length===1)return n[0];if(n.length>1&&s)return s}}async getCurrentActiveUserAccount(){var n;const t=await this.getAccount();return t?{id:((n=t.idTokenClaims)==null?void 0:n.oid)??"",tenantId:t.tenantId,provider:"microsoft",accountType:ta(t.tenantId)?"AAD":"MSA"}:null}async NAAGetTokenAndSetAccount(){var s;const{msal:t}=await cs.get(),n=await this.getAuthToken();if(n){const o=await this.getAccount();return o?(t.setActiveAccount(o),{userAccount:{id:((s=o.idTokenClaims)==null?void 0:s.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:ta(o.tenantId)?"AAD":"MSA"},authToken:n}):null}return null}}class It{constructor(){O(this,"middlewares",[])}add(t){this.middlewares.push(t)}async run(t){let n={...t};for(const s of this.middlewares)try{n=await s(n)}catch{continue}return n}}class fI{constructor(){O(this,"handlers",[])}add(t){this.handlers.push(t)}run(t){let n={...t};for(const s of this.handlers)try{n=s(n)}catch{continue}return n}}const pI=new It,R4=new It,swe=new It,owe=new It,oJ=new It,rJ=new It,aJ=new It,iJ=new It,cJ=new It,lJ=new It,uJ=new It,dJ=new It,rwe=new It,P4=new It,awe=new It,mJ=new It,fJ=new It,pJ=new It,hJ=new It,gJ=new It,vJ=new It,hI=new It,CJ=new It,yJ=new It,iwe=new fI,cwe=new fI,lwe=new It,uwe={ContextualConsent:"browser.underside_chat_consent",VideoTranscriptConsent:"browser.underside_video_transcript_consent"},dwe=new It,mwe=new It,fwe=new It,pwe=new It;var Wc;const si=class si{constructor(){O(this,"providers");this.providers={microsoft:new sJ,auth0:new TQ}}async handleRedirectWithoutAccount(){await this.providers.microsoft.handleRedirectWithoutAccount(),re.instance().config().enableAuth0&&await this.providers.auth0.handleRedirectWithoutAccount()}async getCurrentActiveUserAccountAndSetGlobalUserAccount(){const t=await this.providers.microsoft.getCurrentActiveUserAccount();if(t){this.setUserAccount(t);return}if(!re.instance().config().enableAuth0)return;const n=await this.providers.auth0.getCurrentActiveUserAccount();n&&this.setUserAccount(n)}static instance(){return me(si,Wc)||bt(si,Wc,new si),me(si,Wc)}getCurrentProvider(){const t=pe(cn);return t?this.providers[t.provider]:null}async getAccountFromProviders(){var t;return((t=this.getCurrentProvider())==null?void 0:t.getCurrentActiveUserAccount())??null}setUserAccount(t){mt(cn,t),D.setUserAccountType(t==null?void 0:t.accountType)}async getAuthToken(t="login"){var o,r,a;const n=await R4.run({type:t});if(n.isHandled){if(t==="login"&&((o=n.authToken)==null?void 0:o.tokenType)!==void 0){const l=IQ(n.authToken.tokenType);D.setUserAccountType(l)}return n.authToken}const s=this.getCurrentProvider();if(!s&&t==="login"){if((await mI.get()).supportsNaa()){const u=await((a=(r=this.providers.microsoft).NAAGetTokenAndSetAccount)==null?void 0:a.call(r));if(u){const{authToken:d,userAccount:m}=u;return this.setUserAccount(m),d}}return}return s==null?void 0:s.getAuthToken(t)}async getUserInfo(){const t=await R4.run({type:"graph"});if(t.isHandled){if(!t.authToken)return;const{tokenType:s,accessToken:o}=t.authToken,r=s!=="msa"?s:void 0;if(this.providers.microsoft.supportsTokenType(r))return this.providers.microsoft.getUserInfoFromToken(o);if(this.providers.auth0.supportsTokenType(r)){const a=await this.providers.auth0.getUserInfoFromToken(o);if(a)return a}return}const n=this.getCurrentProvider();if(n)return n.getUserInfo()}logIn(t,n){return this.providers[t].logIn(n)}async logOut(){const t=this.getCurrentProvider();return t&&(await t.logOut(),this.setUserAccount(null)),Promise.resolve()}async initAuthAccount(){await this.handleRedirectWithoutAccount(),await this.getCurrentActiveUserAccountAndSetGlobalUserAccount()}};Wc=new WeakMap,Vt(si,Wc,null);let ua=si;function gI(){return null}function bJ(){return null}function vI(){return null}function CI({featureOverrides:e,localFeatureOverrides:t,localFeaturesToDisable:n,serverFeatures:s,surfaceConfig:o}){var a,l,u;const r=new Set([...s]);(a=o.settingsOverrides)!=null&&a.shouldHideShopping&&r.delete("shopping-card"),o.startInVoice&&r.add("start-in-voice"),(l=o.pages)!=null&&l.enabled?r.add("pages"):((u=o.pages)==null?void 0:u.enabled)===!1&&r.delete("pages");for(const d of e)r.add(d);for(const d of t)r.add(d);for(const d of n)r.delete(d);return Array.from(r)}function yI(){return[]}function bI(){return[]}async function cC(){const{msal:e}=await cs.get();return e.getActiveAccount()}async function lC(){const e=await cC();return e?ta(e.tenantId):!1}async function L4(){const e=await cC();if(!(!e||!ta(e.tenantId)))return e}async function xI(){const e=await cC();if(!(!e||ta(e.tenantId)))return e}async function xJ(){return(await cs.get()).getMsalAccessToken("oneDrive")}async function SJ(){if(!await lC())return;jt(or);const{msal:e}=await cs.get(),t=e.getActiveAccount();t&&e.clearCache({account:t})}const SI="urlFeatureOverrides";function EJ(){return typeof window>"u"?null:sessionStorage.getItem(SI)}function EI(){const e=EJ();return e?e.split(",").map(n=>n):[]}function wJ(){const e=tn("features");return e!=null&&e.trim()&&typeof window<"u"&&sessionStorage.setItem(SI,e.trim()),EI()}const IJ={VITE_API_URL:"copilot.microsoft.com/c/api"};async function _J(e,t){try{return await e.json()}catch(n){throw(n instanceof SyntaxError||n instanceof TypeError||n instanceof DOMException)&&dZ(n,e,t),n}}function wI(e={}){const{query:t={}}=e,n=new URLSearchParams;for(const[l,u]of Object.entries(t))n.append(l,u);const s=CI({featureOverrides:EI(),localFeatureOverrides:yI(),localFeaturesToDisable:bI(),serverFeatures:[],surfaceConfig:re.instance().config()}).join(",");s&&(n.append("features",s),n.append("setflight",s));const o=gI();o&&(n.append("promptBranch",o),bJ()&&n.append("useSxs","true"));const r=vI();r&&n.append("sxsFeature",r);const{surfaceQueryParam:a}=re.instance().config();if(a)for(const[l,u]of Object.entries(a.params))n.append(l,u);return n}function II(e){return e!==void 0&&e.tokenType!==void 0&&e.tokenType!=="msa"}async function O4(e,t){const{VITE_API_URL:n}=IJ;let s;if(fw()?s=`${window.location.host}/c/api`:s=n,!s)throw new Error("Cannot initialize websocket because the required env vars are not set: VITE_API_URL");const o={...t,"api-version":"2"},r=await ua.instance().getAuthToken(),a=await lC();r&&!a&&(o.accessToken=r.accessToken,II(r)&&(o["X-UserIdentityType"]=r.tokenType)),r===void 0?qw(e,"getWssAPIUrl"):Kw(e,"getWssAPIUrl"),pe(il)&&(o.appFlavor="beta");const l=wI({query:o});return`wss://${s}/${e}?${l}`}function TJ(e,t){const n=[Xv(),e],s=wI({query:t});return s.toString()&&n.push("?",String(s)),n.join("")}function AJ(e,t,n){if(e.attemptCount>1){const s=e.errors.filter(l=>l.errorType==="RequestTimeoutError").length,o=e.errors[e.errors.length-1],r=o==null?void 0:o.errorType,a=o==null?void 0:o.errorMessage;D.trackEvent({name:"system",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:"apiRetry",eventInfo_scenario:t,eventInfo_duration:e.endTime-e.startTime,eventInfo_customData:JSON.stringify({attemptCount:e.attemptCount,errorCount:e.errors.length,timeoutErrorCount:s,delayTimings:e.delayTimings,lastErrorType:r,lastErrorMessage:a})}})}n==null||n(e)}function kJ(e,t,n){var r,a;const s=e.exitReason==="requestTimeout",o={path:t,attemptCount:e.attemptCount,totalDuration:e.endTime-e.startTime,exitReason:e.exitReason,errorCount:e.errors.length,isTimeoutFailure:s,lastErrorType:(r=e.errors[e.errors.length-1])==null?void 0:r.errorType,lastErrorMessage:(a=e.errors[e.errors.length-1])==null?void 0:a.errorMessage,delayTimings:e.delayTimings};D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ApiRetryFailure",eventInfo_errorMessage:s?`API retry failed due to timeout after ${e.attemptCount} attempts`:`API retry failed after ${e.attemptCount} attempts. Exit reason: ${e.exitReason}`,eventInfo_details:JSON.stringify(o)}}),n==null||n(e)}function MJ(e,t,n){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ApiRetryTimeout",eventInfo_errorMessage:`Request timed out after ${e.timeoutMs}ms (attempt ${e.attemptCount})`,eventInfo_details:JSON.stringify({timeoutMs:e.timeoutMs,attemptCount:e.attemptCount,errorCount:e.errors.length,delayTimings:e.delayTimings,scenario:t,duration:e.endTime-e.startTime})}}),n==null||n(e)}async function zn(e,t={}){const{options:n,query:s,analytics:o,retry:r,requestTimeoutMs:a}=t;if(r){const{onSuccess:l,onFailure:u,onTimeout:d,retryOn401:m}=r,f={...r,onSuccess:g=>{AJ(g,(o==null?void 0:o.anonymousPath)??e,l)},onFailure:g=>{kJ(g,(o==null?void 0:o.anonymousPath)??e,u)},onTimeout:g=>{MJ({...g,timeoutMs:a??-1},(o==null?void 0:o.anonymousPath)??e,d)}};return Xd(a?()=>gQ(g=>vg({path:e,options:n,query:s,analytics:o,abortController:g,retryOn401:m}),a):()=>vg({path:e,options:n,query:s,analytics:o,retryOn401:m}),f)}return vg({path:e,options:n,query:s,analytics:o})}async function vg(e){const{path:t,options:n,query:s,analytics:o,abortController:r,retryOn401:a}=e,l=new Headers(n==null?void 0:n.headers);Rt.resolvedLanguage?l.set("X-Search-UILang",Rt.resolvedLanguage.toLowerCase()):Rt.language&&l.set("X-Search-UILang",Rt.language.toLowerCase());const u=await ua.instance().getAuthToken(),d=await lC();u&&!d&&(l.set("Authorization",`Bearer ${u.accessToken}`),II(u)&&l.set("X-UserIdentityType",u.tokenType)),u===void 0?qw(t,"fetchApi"):Kw(t,"fetchApi"),pe(il)&&l.set("X-Copilot-App-Flavor","beta");const m=performance.now(),f=await fetch(TJ(t,s),{...n,credentials:"include",headers:l,signal:r==null?void 0:r.signal}),h=performance.now();if($w((o==null?void 0:o.anonymousPath)??t,(n==null?void 0:n.method)??"GET",h-m,f.clone()),Qu.trackLatestApiAssignment(f.headers),a&&f.status===401)throw new l1(`401 Unauthorized: ${t}`,{statusCode:401,route:t});return f}async function kn({path:e,args:t={}}){var s;const n={method:"POST",...t.options,headers:{"Content-Type":"application/json",...(s=t.options)==null?void 0:s.headers},body:t.body?JSON.stringify(t.body):void 0};return zn(e,{...t,options:n})}async function Ct(e,t,n={}){const{analytics:s,onFailedRequest:o}=n,r=(s==null?void 0:s.anonymousPath)??e,a=await zn(e,n);let l=!0;if(!a.ok&&o&&(l=!!o(a)),!l)return{data:void 0,response:{ok:a.ok,status:a.status,headers:a.headers},zodError:void 0};const u=await _J(a,r);let d,m;const{safe:f}=n.parseOptions??{};if(f){const h=t.safeParse(u);h.error&&Xu(h.error,r,!0),d=u,m=h.error}else try{d=t.parse(u)}catch(h){throw h instanceof Wf&&Xu(h,r,!1),h}return{data:d,response:{ok:a.ok,status:a.status,headers:a.headers},zodError:m}}class NJ{generateClientEventId(t){if(this.shouldLogForEventName(t.data.eventName))return crypto.randomUUID()}onBeforeTrackEvent(t){this.logEventIfNeededNonBlocking(t,"prepared")}eventsSent(t){for(const n of t)this.logEventIfNeededNonBlocking(n,"success")}eventsDiscarded(t,n){for(const s of t)this.logEventIfNeededNonBlocking(s,this.getStatusFromDiscardedReason(n))}logEventIfNeededNonBlocking(t,n){this.logEventIfNeeded(t,n).catch(()=>{})}async logEventIfNeeded(t,n){var s,o,r,a,l,u,d,m;this.shouldLogForEventName((s=t.data)==null?void 0:s.eventName)&&await zn("/client-telemetry",{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:(o=t.data)==null?void 0:o.eventInfo_clientEventId,eventName:(r=t.data)==null?void 0:r.eventName,status:n,retryCount:"sendAttempt"in t?t.sendAttempt:0,appInfoName:(a=t.data)==null?void 0:a.appName,userId:(l=t.data)==null?void 0:l.userPicassoId,userMuid:(u=t.data)==null?void 0:u.userMuid,conversationId:(d=t.data)==null?void 0:d.eventInfo_conversationId,messageId:(m=t.data)==null?void 0:m.eventInfo_messageId,isSdkInitialized:!0,clientTimestamp:t.time??new Date().toISOString()})}})}getStatusFromDiscardedReason(t){switch(t){case 1:return"nonRetryableStatus";case 2:return"invalidEvent";case 3:return"sizeLimitExceeded";case 4:return"killSwitch";case 5:return"queueFull";default:return"unknown"}}shouldLogForEventName(t){switch(t){case"copilotCompose":case"copilotResponseRender":case"copilotStart":return!0;default:return!1}}}const D4={global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lrn_uni;u1={REGION};u2={LANG_LOCALE};u6=CMC;u50=submit_message;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://secure.adnxs.com/px?id=1869141&t=2","https://servedby.flashtalking.com/spot/1/5155;147512;16638/?spotName=USA_FY25H2_Copilot_Consumer_Chat_Send_button_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=Custom&m.customEventName=COPChatSend&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:e8n8utj&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://secure.adnxs.com/px?id=1869542&t=2&seg=39793132&consent={CONSENT}","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://servedby.flashtalking.com/spot/1/3360;147492;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Chat_Send_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:7s8ltxf&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}"]},Tf={onPageLoad:{global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lp_uniq;u1={REGION};u2={LANG_LOCALE};u6=CMC;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869069&t=2","https://servedby.flashtalking.com/spot/1/5155;147507;16638/?spotName=USA_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=PageVisit&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:tzodkxv&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869539&seg=39793125&t=2&consent={CONSENT}","https://servedby.flashtalking.com/spot/1/3360;147490;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:2slc99p&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}"]},onMessageSend:D4,onStartVoiceChat:D4,onSuggestionChipClicked:{global:[],us:[],gb:[],other:[]},onDiscoverCardClicked:{global:[],us:[],gb:[],other:[]},onQueryParamSubmit:{global:[],us:[],gb:[],other:[]}},RJ={onPageLoad:{behavior:20,Content:{Id:"CMCChatLoaded",cN:"CMC Chat Loaded"}},onMessageSend:{behavior:63,Content:{Id:"ChatManualMessage",cN:"Chat Manual Message"}},onStartVoiceChat:{behavior:300,Content:{Id:"VoiceMessageClick",cN:"Voice Message Click"}},onSuggestionChipClicked:{behavior:60,Content:{Id:"SuggestionChipClicked",cN:"Suggestion Chip Clicked"}},onDiscoverCardClicked:{behavior:144,Content:{Id:"DiscoverCardClicked",cN:"Discover Card Clicked"}},onQueryParamSubmit:{behavior:141,Content:{Id:"QueryParamMessageSubmit",cN:"Query Param Message Submit"}}};function PJ(e,t){return t==="US"?Tf[e].us:t==="GB"?Tf[e].gb:t&&["AU","CA","DE","FR","JP"].includes(t)?Tf[e].other:[]}function LJ(e){if(!be("ads-pixels"))return;const t=$e().get(Mn),n=Rt.language,s=Date.now().toString(),o=Tf[e].global,r=PJ(e,t),{set:a}=$e();a(iw,l=>{for(const u of o.concat(r))l[u]||(l[u]={url:u.replace("{CACHE_BUSTER}",s).replace("{REGION}",t??"").replace("{LANG_LOCALE}",n).replace("{CONSENT}",jJ(t)).replace("{td1}",t??"").replace("{td2}",n).replace("{td3}","CMC").replace("{td4}","").replace("{td5}","").replace("{td6}",UJ(e)),isMounted:!0,timestamp:Date.now()});return{...l}})}function OJ(e){be("custom-1ds")&&(window.OneDsAzureAnalytics.capturePageAction(null,RJ[e]),zE())}function Ac(e){try{LJ(e),OJ(e)}catch{Kt({feature:"sendIdeasTelemetry",customData:JSON.stringify({eventName:e})})}}function DJ(e){Ac(e==="suggestion"?"onSuggestionChipClicked":e==="discover"?"onDiscoverCardClicked":e==="queryParam"?"onQueryParamSubmit":"onMessageSend")}function jJ(e){return(e&&c1.includes(e))===!0?Ni().advertising?"1":"0":""}function UJ(e){switch(e){case"onPageLoad":return"page_load";case"onMessageSend":return"submit_message";case"onStartVoiceChat":return"voice_message";case"onSuggestionChipClicked":return"suggestion_chip";case"onDiscoverCardClicked":return"discover_card";case"onQueryParamSubmit":return"query_param_submit";default:return""}}function FJ(e){const t=M(Mn);c.useEffect(()=>{D.ensureInitialized(BJ()),e&&(window.appEnd=performance.now(),performance.getEntriesByName("startupTime-begin").length||performance.mark("startupTime-begin",{startTime:window.appStart}),performance.mark("startupTime-end",{startTime:window.appEnd}),performance.measure("startupTime","startupTime-begin","startupTime-end"))},[e]),c.useEffect(()=>{e&&t&&setTimeout(()=>{Ac("onPageLoad")},1e3)},[e,t])}function BJ(){return()=>be("picasso-telemetry")?new NJ:null}function VJ({appInitialized:e}){const t=M(cn);c.useEffect(()=>{e&&Bv().catch(console.error)},[e]),c.useEffect(()=>{e&&lZ(t==null?void 0:t.id).catch(console.error)},[e,t])}function HJ(e){c.useEffect(()=>(document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}),[e])}function zJ(){HJ(()=>{document.visibilityState==="visible"?D.trackEvent({name:"system",data:{eventName:"copilotVisible",eventInfo_landingPage:D.getLandingPage()}}):D.trackEvent({name:"system",data:{eventName:"copilotBackground"}})})}function GJ(){const e=BK(),t=se(qd);e&&(s=>gZ.includes(s))(e)&&t(e)}const R1=R(void 0),_s=R(void 0),WJ=R(e=>{var t;return(t=e(_s))==null?void 0:t.showroomData},(e,t,n)=>{const s=e(_s);if(s){const o=typeof n=="function"?n(s.showroomData):n;t(_s,{...s,showroomData:o})}});R(!1);function $J(e){$e().set(WJ,t=>Un(t,n=>{e(n)}))}const hwe="https://aka.ms/copilot-ads/ads-settings",gwe="https://aka.ms/copilot-ads/verification-program",vwe=["website-visits","interests","similar-audience"],Cwe="data-ad-part",ywe={text:"textAd",multimedia:"multimediaAd",product:"productAd",propertyPromotion:"propertyPromotionAd",tourActivity:"tourActivityAd",miniShowroom:"miniShowroomAd",mainShowroom:"mainShowroomAd"},qJ=.05,bwe="focus:underline hover:underline group-focus/trackable-link:underline",KJ=128,ZJ=128,YJ=147,QJ=95,xwe=59*60*1e3;function Swe(e,t,n){const s=t==="product"?KJ:YJ,o=t==="product"?ZJ:QJ;if(n.length===0||!e)return{width:s,height:o,resize:"object-contain"};const{maxDeviation:r,averageAspectRatio:a,count:l}=_I(n);return l===0||a===0?{width:s,height:o,resize:"object-contain"}:r>qJ?{width:s,height:JJ(n,s,o),resize:"object-contain"}:{width:s,height:s/a,resize:"object-cover"}}function JJ(e,t,n){const s=XJ(e,t);return s===-1?n:Math.min(n,s)}function XJ(e,t){const n=e.map(s=>{const o=s.type==="product"?s.offer.item.image:s.image;if(o.width&&o.height)return o.height/o.width*t}).filter(s=>typeof s=="number");return n.length>0?Math.max(...n):-1}function _I(e){if(e.length===0)return{maxDeviation:0,averageAspectRatio:0,count:0};const t=[];for(const o of e){const r=o.type==="product"?o.offer.item.image:o.image;if(r.width&&r.height){const a=r.width/r.height;t.push(a)}}if(t.length===0)return{maxDeviation:0,averageAspectRatio:0,count:0};const n=t.reduce((o,r)=>o+r,0)/t.length;return{maxDeviation:t.reduce((o,r)=>{const a=Math.abs(r/n-1);return Math.max(o,a)},0),averageAspectRatio:n,count:t.length}}function eX(e){if(e.length===0)return{};const t=e.map(s=>{const o=s.type==="product"?s.offer.item.image:s.image;return{originalWidth:o.width,originalHeight:o.height}}),n=_I(e);return{imageSizes:t.length>0?t:void 0,imageAspectRatioVariance:n}}function tX(e){var n;const t=[];for(const s of e){if(s.type!=="product"&&s.type!=="propertyPromotion"&&s.type!=="tourActivity")return null;if(!s.tags)continue;if(s.tags.length>1)return null;const o=s.tags[0];if(!(!o||!o.value))if(t.length===0)t.push(o);else{if(((n=t[0])==null?void 0:n.category)!==o.category)return null;t.find(r=>r.value===o.value)||t.push(o)}}return t}function Ewe(e,t){var n;return e!=null&&e.length?JSON.stringify({tagCategory:(n=e[0])==null?void 0:n.category,tagValue:(t==null?void 0:t.value)??"recommended",tagPosition:t?e.indexOf(t)+1:null,tagCount:e.length}):""}function nX(e){return e.every(t=>t.type==="product"||t.type==="propertyPromotion"||t.type==="tourActivity")}function wwe(e,t,n){let s=e;return t!=null&&t.length&&n?s=e.filter(o=>{var r;return o.tags&&((r=o.tags[0])==null?void 0:r.value)===n.value}):t!=null&&t.length&&!n&&(s=e.filter(o=>!o.tags)),s}class sX{constructor(t){O(this,"startTime",0);O(this,"timeToFirstToken",0);O(this,"receivedFirstToken",!1);O(this,"receivedLastToken",!1);O(this,"currentAdditionalData");O(this,"currentMessageId","");O(this,"receivedMessageTime",0);O(this,"startMessageTime",0);O(this,"mostRecentTokenTime",0);this.startTime=t}resetStartTime(t){this.startTime=t,this.timeToFirstToken=0}onBeforeSend(){this.receivedFirstToken=!1,this.receivedLastToken=!1}onSent(t){this.currentAdditionalData=t}onReceived(t){this.receivedMessageTime=performance.now(),D.trackEvent({name:"system",data:{eventName:"copilotChatRequest",eventInfo_additionalData:this.currentAdditionalData,eventInfo_duration:this.receivedMessageTime-this.startTime,eventInfo_conversationId:t.conversationId,eventInfo_messageId:this.currentMessageId,eventInfo_mode:t.chatMode}})}onStartMessage(t){this.startMessageTime=performance.now(),this.currentMessageId=t.messageId,this.receivedMessageTime||(this.receivedMessageTime=this.startTime),D.trackEvent({name:"system",data:{eventName:"copilotChatReqToResp",eventInfo_duration:this.startMessageTime-this.receivedMessageTime,eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:t.conversationId,eventInfo_messageId:t.messageId,eventInfo_mode:t.chatMode}})}onFirstToken(t,n,s){if(!this.receivedFirstToken&&t===this.currentMessageId){const o=performance.now()-this.startTime;this.timeToFirstToken=o,this.receivedFirstToken=!0,D.trackEvent({name:"system",data:{eventName:"copilotChatRespToReceived",eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:s,eventInfo_duration:performance.now()-this.receivedMessageTime,eventInfo_messageId:t,eventInfo_mode:n}}),D.trackEvent({name:"system",data:{eventName:"copilotFirstTokenReceived",eventInfo_conversationId:s,eventInfo_messageId:t,eventInfo_duration:o,eventInfo_mode:n,eventInfo_additionalData:this.currentAdditionalData}}),yJ.run({duration:o})}this.mostRecentTokenTime=performance.now()}onLastToken(t){const{citationCount:n,imageCount:s,messageId:o,inputMethod:r,conversationId:a,chatMode:l,chainOfThoughtCount:u,guidedLinksCount:d,uploadImageCount:m,uploadFileCount:f}=t;if(!this.receivedLastToken&&o===this.currentMessageId){const h=this.mostRecentTokenTime-this.startTime;this.receivedLastToken=!0,D.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_numCitations:n,eventInfo_numImagesGenerated:s,eventInfo_numChainOfThoughts:u,eventInfo_numGuidedLinks:d,eventInfo_inputMethod:r,eventInfo_responseMethod:"text",eventInfo_mode:l,eventInfo_additionalData:this.currentAdditionalData,eventInfo_landingPage:D.getLandingPage(),eventInfo_firstToLastTokenDuration:h-this.timeToFirstToken,eventInfo_customData:JSON.stringify({eventInfo_numImagesUploaded:m,eventInfo_numDocumentsUploaded:f})}}),D.trackEvent({name:"system",data:{eventName:"copilotLastTokenReceived",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_duration:h,eventInfo_mode:l,eventInfo_additionalData:this.currentAdditionalData}}),D.trackEvent({name:"system",data:{eventName:"copilotChatE2E",eventInfo_conversationId:a,eventInfo_messageId:o,eventInfo_duration:performance.now()-this.startTime,eventInfo_mode:l,eventInfo_additionalData:this.currentAdditionalData}}),this.currentAdditionalData=void 0}}onAdsRender(t){const n=performance.now()-this.startTime,{ads:s}=t,o=s==null?void 0:s.find(g=>g.type==="miniShowroom"),r=o??(s&&s.length>0?s[0]:void 0),a=s&&nX(s)?tX(s):[],l=s==null?void 0:s.find(g=>g.type==="mainShowroom"),u=pe(_s),d=be("adsshowroombrandagent"),m=s&&s.length>0&&((r==null?void 0:r.type)==="product"||(r==null?void 0:r.type)==="tourActivity"||(r==null?void 0:r.type)==="propertyPromotion")?eX(s):{};let f;o?f={brandId:o.brandId??(l==null?void 0:l.brandId),miniShowroom:{messageId:t.messageId,rguid:t.requestId}}:l&&u&&(f={brandId:u.brandId,brandLogo:u.brandLogo,brandBackground:u.brandBackground,viewMode:u.viewMode,brandAgentScenario:d?"chat":void 0,triggeredAtRguid:u.lastUserMessageRguid??void 0,miniShowroom:{messageId:u.miniShowroomAd.messageId,adId:u.adId},activeCard:{adId:l.id,rguid:t.requestId},previousCard:{adId:u.adId,rguid:u.activeCardRguid}});const h=JSON.stringify({eventType:t.eventType,adTags:a!=null&&a.length?a:void 0,showroom:f,...m});D.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"render",eventInfo_adType:r==null?void 0:r.type,eventInfo_adCount:s==null?void 0:s.length,eventInfo_rguid:t.requestId,eventInfo_messageId:t.messageId,eventInfo_conversationId:t.conversationId,eventInfo_duration:n,eventInfo_additionalData:h}})}onSubmitMessageBlocked(t,n,s){D.trackEvent({name:"interaction",data:{eventName:"copilotUserInputBlocked",eventInfo_inputMethod:n,eventInfo_mode:t,eventInfo_messageId:this.currentMessageId,eventInfo_conversationId:s,eventInfo_duration:performance.now()-this.startTime,eventInfo_additionalData:this.currentAdditionalData}})}onImageGenerationStart(t){const{messageId:n,conversationId:s,chatMode:o}=t,a=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenStarted",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:a}})}onImageReceived(t){const{messageId:n,conversationId:s,chatMode:o}=t,r=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:r}})}onPartialImageReceived(t){const{messageId:n,imageGenPhase:s,conversationId:o,chatMode:r}=t,a=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"PartialImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:o,eventInfo_mode:r,eventInfo_duration:a,eventInfo_customData:`${s}`}})}onMemorySignalReceived(t){const{messageId:n,conversationId:s}=t,r=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"MemorySignalReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_duration:r}})}onChainOfThoughtReceived(t){const{messageId:n,conversationId:s,chatMode:o}=t,r=performance.now()-this.startTime;D.trackEvent({name:"system",data:{eventName:"copilotCoTFirstTokenReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_mode:o,eventInfo_duration:r}})}}function uC(e,t){let n=null;return(...s)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>e(...s),t)}}const TI=300,Iwe=2e3,oX=new Map([["image","chat"],["podcast","chat"],["researchReport","research"],["quiz","chat"],["actions","computerUse"],["video","chat"]]);function AI(e){return oX.get(e)}const xl=$e(),rX=500;function aX(){let e="";if(typeof document<"u"){const t=document.querySelector(`#${Pd}`);t&&(e=t.value)}return e}let j4=!1;function iX(){let e="";j4||(e=aX(),j4=!0),jU([[em,e]])}const em=R(""),kI=R("starter-prompts"),MI=R(!0),NI=R(!1),Cg=R(vn()),od=R(e=>e(Cg),(e,t,n)=>{const s=e(Cg),o=be("sticky-conversation-mode"),r=be("persist-conversation-mode");o&&(Ws("sticky-conversation-mode",n),r&&Vn(kd,ba,n)),s!==n&&t(Cg,n)}),Uc=R(null);function E2(e){xl.set(em,e)}function rd(){xl.set(em,"")}function Su(e){xl.set(kI,e)}function Ka(e){xl.set(MI,e)}function RI(e){xl.set(bl,e)}function pp(e){xl.set(NI,e)}function Zt(e){const t=pe(od);switch((t==="computerUse"||t==="research")&&mt(Uc,null),mt(od,e),e){case"computerUse":{mt(Uc,"actions");break}case"research":{mt(Uc,"researchReport");break}}}function P1(e){if(mt(Uc,e),e===null)return;const t=AI(e);t&&mt(od,t)}function dC(){return M(em)}function cX(){return pe(em)}function lX(){return M(kI)}function uX(){return M(MI)}function Ys(){return M(od)}function yo(){return pe(od)}function dX(){return M(NI)}function mC(){return M(Uc)}function mX(){return pe(Uc)}const fX=uC((e,t)=>{iQ(pe(je),e,JSON.stringify(t))},rX);function pX(e,t){fX(e,t)}async function hX(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n);return new Uint8Array(s)}function gX({bytes:e,difficulty:t}){const n=Math.floor(t/8),s=t%8;for(let o=0;o<n;o+=1)if(e[o]!==0)return!1;if(s>0){const o=255<<8-s,r=e[n];if(r!==void 0&&(r&o)!==0)return!1}return!0}async function vX(e){const{token:t,difficulty:n,startNonce:s=0,batchSize:o=1e4}=e;let r=s,a=0;const l=async u=>{const d=t+u,m=await hX(d);return a+=1,gX({bytes:m,difficulty:n})?{found:!0,nonce:u}:{found:!1,nonce:0}};for(;;){const u=[];for(let m=0;m<o;m+=1){const f=r+m;u.push(l(f))}const d=await Promise.all(u);for(const m of d)if(m.found)return{nonce:m.nonce,totalHashes:a};r+=o,await new Promise(m=>{setTimeout(m,0)})}}const CX=10*1e3;function Af({duration:e,success:t,errorMessage:n}){const{userAgent:s}=navigator;D.trackEvent({name:"system",data:{eventName:"webWorkerRegistrationEvent",eventInfo_name:"hashcash-worker",eventInfo_userAgent:s,eventInfo_duration:e,eventInfo_success:t,eventInfo_errorMessage:t?void 0:n??"Unknown error"}})}async function yX(e,t){const{token:n,difficulty:s,startNonce:o=0,batchSize:r=1e4}=e,a=Math.floor(Number.MAX_SAFE_INTEGER/t),l=[],u=[],d=()=>{for(const f of l)f.terminate()};window.addEventListener("beforeunload",d,{once:!0});const m=f=>{const h=new Worker(new URL("/static/cmc/assets/hashcash.worker-BKwywZyM.js",import.meta.url),{type:"module"});return l.push(h),new Promise((g,C)=>{const v=performance.now(),y=setTimeout(()=>{const E=performance.now()-v;Af({duration:E,success:!1,errorMessage:"Registration timeout"}),h.terminate(),C(new Error(`Worker ${f} timeout`))},CX);h.onmessage=E=>{const{data:S}=E;if(S.type==="ready"){const I=performance.now()-v;Af({duration:I,success:!0}),clearTimeout(y);return}if(S.type==="success"){for(const[I,_]of l.entries())I!==f&&(_.postMessage({type:"cancel"}),_.terminate());g({nonce:S.nonce,timeElapsed:S.timeElapsed,totalHashes:S.totalHashes})}S.type==="error"&&(clearTimeout(y),h.terminate(),C(new Error(S.error)))},h.onerror=E=>{const S=performance.now()-v;Af({duration:S,success:!1,errorMessage:E.message||"Worker error"}),clearTimeout(y),h.terminate(),C(E)},h.postMessage({type:"register"});const b=o+f*a;h.postMessage({type:"start",token:n,difficulty:s,startNonce:b,batchSize:r})})};for(let f=0;f<t;f+=1)u.push(m(f));try{const f=await Promise.any(u);return window.removeEventListener("beforeunload",d),d(),f}catch(f){if(window.removeEventListener("beforeunload",d),d(),f instanceof AggregateError){const h=f.errors.map(g=>g instanceof Error?g.message:String(g)).join(", ");throw new Error(`All ${t} workers failed: ${h}`)}throw f}}async function bX(e,t){const{hardwareConcurrency:n}=navigator,s=Math.max(n-2,1),o=Date.now(),r=be("web-worker"),a=be("web-worker-multi-thread"),{webWorkerEnabled:l}=re.instance().config();try{if(!r||!l)throw new Error(`Web Worker feature flag is enabled: ${r}
        Web Worker surface config is enabled: ${l}`);const u=a?t??s:1;return{...await yX(e,u),numberOfWorkers:u,method:"webworker"}}catch(u){Af({duration:Date.now()-o,success:!1,errorMessage:`Web worker registration failed or worker feature is disabled: ${u instanceof Error?u.message:String(u)}`});const d=await vX(e),m=Date.now()-o;return{...d,timeElapsed:m,method:"mainthread"}}}function xX(e,t,n){switch(e.type){case"research":return{type:"task",task:{id:e.id,type:e.type,contents:[],partialOutput:[],inlineCitations:[],status:"pending",prompt:e.prompt,progress:e.progress},partId:t};case"computerUse":return{type:"task",task:{id:e.id,conversationId:e.conversationId,type:e.type,status:"running",updatedAt:n},partId:t};case"podcast":return{type:"task",task:{id:e.id,type:e.type,status:e.status,podcast:e.podcast,updatedAt:e.updatedAt??n},partId:t};case"videoGeneration":return{type:"task",task:{id:e.id,type:e.type,status:e.status,result:e.result,updatedAt:e.updatedAt??n},partId:t};default:return null}}const PI=["ceo-thinkdeeper","ceo-smart-mode","ceo","webretrieval","webcontent","browser-actions"],SX=R(e=>{const t=e(Ea);if(!PI.some(o=>e(ya(o)))||t.length===0)return!1;const s=t[t.length-1];return(s==null?void 0:s.author)==="ai"&&s.content.some(o=>o.type==="activity"&&o.activity.status==="running")});function w2(){return PI.some(be)}const hp=["completed","failed","cancelled"];function EX(e){if(e.author==="ai")return e.content.find(t=>{var s;if(t.type!=="task")return!1;const n=(s=t.task)==null?void 0:s.status;return n&&!hp.includes(n)})}function wX(e){for(let t=e.length-1;t>=0;t-=1){const n=e[t];if(n&&n.type==="task")return n}}function fC(e){for(const t of e){const n=EX(t);if(n)return{message:t,part:n}}return null}const IX=R(0),_X=R(null),TX=R(null),LI=R(void 0),bo=R(null),AX=R(null),tm=R(null),L1=R(null),kX=R(e=>{var s;const t=e(Ea),n=fC(t);return((s=n==null?void 0:n.part.task)==null?void 0:s.type)==="research"}),MX=R(!1);R(new Map);const NX=R(!1),_we=R(!1),pC=R(null),Gi=R(!1),RX=R(!1),I2=R(!1),PX=R(e=>e(Ia).isOpen||e(OI)),Ia=R({isOpen:!1,scenario:null}),OI=R(e=>{const t=e(bi);return t===null?!1:t===0||e(tw).includes(t)}),LX=R(e=>{const t=e(OI),n=e(ya("location-prompt")),s=e(Ea).filter(({author:r})=>r==="human").length,o=!!rn(hF);return t||!n||o?!1:s===XF});function DI(e){const{tasks:t,conversationId:n,taskType:s}=e;for(const o of t.values())if(o.conversationId===n){if(s&&o.type!==s)continue;return o.id}return""}function jI(e,t){return DI({tasks:e,conversationId:t,taskType:"computerUse"})!==""}async function qs({from:e,to:t,params:n,search:s,state:o}){t.startsWith("/chats/")||$e().set(g2,null),await Qd(0),await Ma().navigate({to:t,params:n,state:r=>({...r,from:e,...o}),search:s})}function xo(){return qs}const UI=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3.28034 2.21968C2.98745 1.92678 2.51257 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98743 2.21966 3.28032L3.48326 4.54395C3.17684 5.03983 3 5.62426 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C18.3757 21 18.96 20.8232 19.4559 20.5169L20.7194 21.7805C21.0123 22.0734 21.4872 22.0734 21.7801 21.7805C22.073 21.4876 22.073 21.0127 21.7801 20.7198L3.28034 2.21968ZM11.1189 12.1797C10.8678 12.2864 10.6322 12.4409 10.4258 12.643L4.60326 18.3437C4.53643 18.1583 4.5 17.9584 4.5 17.75V6.25C4.5 6.0437 4.5357 5.84574 4.60125 5.66196L11.1189 12.1797ZM19.5 6.25V16.3183L20.9993 17.8176C20.9998 17.7951 21 17.7726 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25C6.2275 3 6.20505 3.00023 6.18265 3.00068L7.68194 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25ZM18.3305 19.4014C18.1489 19.4653 17.9535 19.5 17.75 19.5H6.25C6.04613 19.5 5.8504 19.4651 5.66845 19.4011L11.4752 13.7148L11.5588 13.644C11.8501 13.4316 12.2596 13.4553 12.5247 13.7148L18.3305 19.4014ZM15.2521 6.5C16.4959 6.5 17.5042 7.50831 17.5042 8.75212C17.5042 9.99592 16.4959 11.0042 15.2521 11.0042C14.0083 11.0042 13 9.99592 13 8.75212C13 7.50831 14.0083 6.5 15.2521 6.5ZM15.2521 8C14.8367 8 14.5 8.33673 14.5 8.75212C14.5 9.1675 14.8367 9.50423 15.2521 9.50423C15.6675 9.50423 16.0042 9.1675 16.0042 8.75212C16.0042 8.33673 15.6675 8 15.2521 8Z"})),Twe=Object.freeze(Object.defineProperty({__proto__:null,default:UI},Symbol.toStringTag,{value:"Module"}));function OX(e,t=200,n=50){const[s,o]=c.useState(!1),[r,a]=c.useState(null);return c.useEffect(()=>{let l;if(!e)l=setTimeout(()=>{o(!0),a(Date.now())},t);else if(s){const u=r?Date.now()-r:1/0,d=n-u;d>0?l=setTimeout(()=>{o(!1),a(null)},d):(o(!1),a(null))}return()=>{clearTimeout(l)}},[e,t,n,s,r]),s}const hC="-",DX=e=>{const t=UX(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:a=>{const l=a.split(hC);return l[0]===""&&l.length!==1&&l.shift(),FI(l,t)||jX(a)},getConflictingClassGroupIds:(a,l)=>{const u=n[a]||[];return l&&s[a]?[...u,...s[a]]:u}}},FI=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),o=s?FI(e.slice(1),s):void 0;if(o)return o;if(t.validators.length===0)return;const r=e.join(hC);return(a=t.validators.find(({validator:l})=>l(r)))==null?void 0:a.classGroupId},U4=/^\[(.+)\]$/,jX=e=>{if(U4.test(e)){const t=U4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},UX=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return BX(Object.entries(e.classGroups),n).forEach(([r,a])=>{_2(a,s,r,t)}),s},_2=(e,t,n,s)=>{e.forEach(o=>{if(typeof o=="string"){const r=o===""?t:F4(t,o);r.classGroupId=n;return}if(typeof o=="function"){if(FX(o)){_2(o(s),t,n,s);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([r,a])=>{_2(a,F4(t,r),n,s)})})},F4=(e,t)=>{let n=e;return t.split(hC).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},FX=e=>e.isThemeGetter,BX=(e,t)=>t?e.map(([n,s])=>{const o=s.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([a,l])=>[t+a,l])):r);return[n,o]}):e,VX=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const o=(r,a)=>{n.set(r,a),t++,t>e&&(t=0,s=n,n=new Map)};return{get(r){let a=n.get(r);if(a!==void 0)return a;if((a=s.get(r))!==void 0)return o(r,a),a},set(r,a){n.has(r)?n.set(r,a):o(r,a)}}},BI="!",HX=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,o=t[0],r=t.length,a=l=>{const u=[];let d=0,m=0,f;for(let y=0;y<l.length;y++){let b=l[y];if(d===0){if(b===o&&(s||l.slice(y,y+r)===t)){u.push(l.slice(m,y)),m=y+r;continue}if(b==="/"){f=y;continue}}b==="["?d++:b==="]"&&d--}const h=u.length===0?l:l.substring(m),g=h.startsWith(BI),C=g?h.substring(1):h,v=f&&f>m?f-m:void 0;return{modifiers:u,hasImportantModifier:g,baseClassName:C,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},zX=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},GX=e=>({cache:VX(e.cacheSize),parseClassName:HX(e),...DX(e)}),WX=/\s+/,$X=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:o}=t,r=[],a=e.trim().split(WX);let l="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{modifiers:m,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:g}=n(d);let C=!!g,v=s(C?h.substring(0,g):h);if(!v){if(!C){l=d+(l.length>0?" "+l:l);continue}if(v=s(h),!v){l=d+(l.length>0?" "+l:l);continue}C=!1}const y=zX(m).join(":"),b=f?y+BI:y,E=b+v;if(r.includes(E))continue;r.push(E);const S=o(v,C);for(let I=0;I<S.length;++I){const _=S[I];r.push(b+_)}l=d+(l.length>0?" "+l:l)}return l};function qX(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=VI(t))&&(s&&(s+=" "),s+=n);return s}const VI=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=VI(e[s]))&&(n&&(n+=" "),n+=t);return n};function KX(e,...t){let n,s,o,r=a;function a(u){const d=t.reduce((m,f)=>f(m),e());return n=GX(d),s=n.cache.get,o=n.cache.set,r=l,l(u)}function l(u){const d=s(u);if(d)return d;const m=$X(u,n);return o(u,m),m}return function(){return r(qX.apply(null,arguments))}}const Ht=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},HI=/^\[(?:([a-z-]+):)?(.+)\]$/i,ZX=/^\d+\/\d+$/,YX=new Set(["px","full","screen"]),QX=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JX=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,XX=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jo=e=>Fc(e)||YX.has(e)||ZX.test(e),Or=e=>Sl(e,"length",lee),Fc=e=>!!e&&!Number.isNaN(Number(e)),yg=e=>Sl(e,"number",Fc),ru=e=>!!e&&Number.isInteger(Number(e)),nee=e=>e.endsWith("%")&&Fc(e.slice(0,-1)),rt=e=>HI.test(e),Dr=e=>QX.test(e),see=new Set(["length","size","percentage"]),oee=e=>Sl(e,see,zI),ree=e=>Sl(e,"position",zI),aee=new Set(["image","url"]),iee=e=>Sl(e,aee,dee),cee=e=>Sl(e,"",uee),au=()=>!0,Sl=(e,t,n)=>{const s=HI.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},lee=e=>JX.test(e)&&!XX.test(e),zI=()=>!1,uee=e=>eee.test(e),dee=e=>tee.test(e),mee=()=>{const e=Ht("colors"),t=Ht("spacing"),n=Ht("blur"),s=Ht("brightness"),o=Ht("borderColor"),r=Ht("borderRadius"),a=Ht("borderSpacing"),l=Ht("borderWidth"),u=Ht("contrast"),d=Ht("grayscale"),m=Ht("hueRotate"),f=Ht("invert"),h=Ht("gap"),g=Ht("gradientColorStops"),C=Ht("gradientColorStopPositions"),v=Ht("inset"),y=Ht("margin"),b=Ht("opacity"),E=Ht("padding"),S=Ht("saturate"),I=Ht("scale"),_=Ht("sepia"),T=Ht("skew"),A=Ht("space"),k=Ht("translate"),N=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",rt,t],U=()=>[rt,t],K=()=>["",Jo,Or],Q=()=>["auto",Fc,rt],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",rt],te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Fc,rt];return{cacheSize:500,separator:":",theme:{colors:[au],spacing:[Jo,Or],blur:["none","",Dr,rt],brightness:G(),borderColor:[e],borderRadius:["none","","full",Dr,rt],borderSpacing:U(),borderWidth:K(),contrast:G(),grayscale:ee(),hueRotate:G(),invert:ee(),gap:U(),gradientColorStops:[e],gradientColorStopPositions:[nee,Or],inset:V(),margin:V(),opacity:G(),padding:U(),saturate:G(),scale:G(),sepia:ee(),skew:G(),space:U(),translate:U()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[Dr]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),rt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ru,rt]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",ru,rt]}],"grid-cols":[{"grid-cols":[au]}],"col-start-end":[{col:["auto",{span:["full",ru,rt]},rt]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[au]}],"row-start-end":[{row:["auto",{span:[ru,rt]},rt]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,t]}],"min-w":[{"min-w":[rt,t,"min","max","fit"]}],"max-w":[{"max-w":[rt,t,"none","full","min","max","fit","prose",{screen:[Dr]},Dr]}],h:[{h:[rt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Dr,Or]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yg]}],"font-family":[{font:[au]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",Fc,yg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jo,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jo,Or]}],"underline-offset":[{"underline-offset":["auto",Jo,rt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:U()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),ree]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},iee]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:Y()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Jo,rt]}],"outline-w":[{outline:[Jo,Or]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Jo,Or]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Dr,cee]}],"shadow-color":[{shadow:[au]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Dr,rt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[ru,rt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":U()}],"scroll-mx":[{"scroll-mx":U()}],"scroll-my":[{"scroll-my":U()}],"scroll-ms":[{"scroll-ms":U()}],"scroll-me":[{"scroll-me":U()}],"scroll-mt":[{"scroll-mt":U()}],"scroll-mr":[{"scroll-mr":U()}],"scroll-mb":[{"scroll-mb":U()}],"scroll-ml":[{"scroll-ml":U()}],"scroll-p":[{"scroll-p":U()}],"scroll-px":[{"scroll-px":U()}],"scroll-py":[{"scroll-py":U()}],"scroll-ps":[{"scroll-ps":U()}],"scroll-pe":[{"scroll-pe":U()}],"scroll-pt":[{"scroll-pt":U()}],"scroll-pr":[{"scroll-pr":U()}],"scroll-pb":[{"scroll-pb":U()}],"scroll-pl":[{"scroll-pl":U()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Jo,Or,yg]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fee=KX(mee);function F(...e){return fee(ue(e))}const nm="overflow-hidden",br="backdrop-blur-2xl backdrop-saturate-200",gC="bg-white/70 dark:bg-muted-200/70",Qs=ue(nm,br,gC),pee=ue(nm,br),hee=ue(br,gC),gee="bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]",vee="dark:bg-white/70  bg-slate-800/70",Cee=ue(nm,br,vee);ue(br,gC);const GI="bg-accent-100/60 dark:bg-muted-200/50",yee=ue(br,GI),Zr=ue(nm,br,GI),bee="bg-acrylic-thin-fallback-light/95 dark:bg-acrylic-thin-fallback-dark/[92]",WI="dark:bg-accent-900/60 bg-slate-800/50";ue(br,WI);const xee=ue(nm,br,WI);function See(){const e=fl(),{userAgent:t}=e.options.context||{};return typeof t=="string"?/^.*(EdgA|EdgiOS|Edg).*/i.test(t):!1}function Eee(e={},t=!1){const[n,s]=c.useState(!1),[o,r]=c.useState(!1),{onFocus:a,onBlur:l,onPointerDown:u}=e;return[n,{onFocus:m=>{(!o||t)&&s(!0),a==null||a(m)},onBlur:m=>{s(!1),r(!1),l==null||l(m)},onPointerDown:m=>{r(!0),u==null||u(m)}}]}const kc="bg-background-300/20 dark:bg-background-650/5",Ba="border-black/10 dark:border-white/10";function wee(e,t){return e?e===!0?{animate:{...t}}:{animate:e}:{style:t}}function Iee(e,t,n,s){const o=t?s:n;return e?{animate:o}:{style:o}}function O1(e){const{children:t,size:n="md",position:s="default",nested:o=!1,background:r="default",stroke:a,strokeChildren:l,className:u,containerRef:d,interactable:m=!1,label:f,animate:h,onFocus:g,onBlur:C,onPointerDown:v,onAnimationStart:y,onAnimationComplete:b,focusOnPointerDown:E,isSelected:S=!1,...I}=e,[_,T]=Eee({onFocus:g,onBlur:C,onPointerDown:v},E),A=S||_,k=See(),P=o&&(r==="acrylic"||r==="acrylic-thin"),V=P?bg[`${n}-${s}`]:_ee[`${n}-${s}`],U=P?bg[`${n}-${s}`]:Tee[`${n}-${s}`],K=P?bg[`${n}-${s}`]:Aee[`${n}-${s}`],Q={default:"bg-white/45 dark:bg-background-650/10",darker:kc,acrylic:Qs,"acrylic-fallback":gee,"acrylic-thin":Zr,"acrylic-thin-fallback":bee,transparent:"bg-transparent"},Z=m?{"aria-label":f,role:"button",tabIndex:0,...T,onKeyDown:$=>{var ee;($.key==="Enter"||$.key===" ")&&($.preventDefault(),(ee=I.onClick)==null||ee.call(I,$))}}:{onFocus:g,onBlur:C,onPointerDown:v},Y=wee(h,V),X=Iee(h,A,U,K);return i.jsxs(ge.div,{className:F("relative isolate will-change-transform",Q[r],u,P&&"outline-1 outline-offset-2",h&&k&&"transition-[clip-path]"),ref:d,onAnimationComplete:b,...Y,...Z,...I,children:[t,i.jsx(ge.div,{className:F(A&&"before:border-foreground-750 dark:before:border-white",a&&!A&&"before:border-black/10 dark:before:border-white/10",r==="transparent"&&a&&!A&&"dark:before:border-white/18",!a&&!A&&"before:border-transparent",!P&&"before:border-[20px]",P&&a&&!A&&"before:border",P&&a&&A&&"before:border-2","pointer-events-none absolute inset-0 before:absolute before:inset-0 before:rounded-inherit",h&&k&&"transition-[clip-path]"),...X,children:l})]})}const _ee={"xs-default":{clipPath:"var(--clip-path-squircle-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-24)"},"md-default":{clipPath:"var(--clip-path-squircle-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-48-60)"}},Tee={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-48-60)"}},Aee={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-focused-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-focused-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-focused-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-focused-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-focused-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-focused-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-focused-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-focused-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-focused-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-focused-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-48-60)"}},bg={"xs-default":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-default":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-default":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-default":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-default":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:60,borderBottomRightRadius:60},"xs-top":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:12,borderBottomRightRadius:12},"sm-top":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:16,borderBottomRightRadius:16},"md-top":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:24,borderBottomRightRadius:24},"lg-top":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:36,borderBottomRightRadius:36},"xl-top":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xs-bottom":{borderTopLeftRadius:12,borderTopRightRadius:12,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-bottom":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-bottom":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-bottom":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-bottom":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:60,borderBottomRightRadius:60}};function Pu(e){const{onError:t,onLoad:n,loadingPlaceholder:s,"aria-hidden":o,alt:r,errorClass:a,className:l,src:u,fallbackSrc:d,stableKey:m,...f}=e,[h,g]=c.useState(!1),[C,v]=c.useState(!1),[y,b]=c.useState(!1),E=OX(C);if(c.useEffect(()=>{g(!1),v(!1),b(!1)},[u]),h)return i.jsx($I,{className:a});const S=y&&d?d:u;return i.jsxs(i.Fragment,{children:[E&&(s==null?void 0:s()),c.createElement("img",{...f,alt:r,"aria-hidden":o,key:m??S,src:S,className:F(l,!C&&s&&"absolute size-px opacity-0"),onLoad:I=>{v(!0),n==null||n(I)},onError:I=>{d&&!y?b(!0):g(!0),t==null||t(I)}})]})}function $I(e){const{className:t}=e;return i.jsx("div",{className:F("flex size-full items-center justify-center",kc,t),children:i.jsx(UI,{className:"size-6"})})}function qI(e){const{path:t,args:n,onLoad:s,alt:o,...r}=e,{data:a,isPending:l}=Ms({queryKey:["apiImg",t],queryFn:async()=>{const m=await(await zn(t,n)).blob();return URL.createObjectURL(m)}});c.useEffect(()=>{!l&&s&&s()},[l,s]);const u=()=>i.jsx("div",{...r});return i.jsx(Pu,{...r,alt:o,className:r.className,errorClass:r.className,loadingPlaceholder:l?u:void 0,src:l?void 0:a})}const B4=$e();function kee(e){var n,s;if(e.status!=="completed")return;const t=B4.get(je);Ma().latestLocation.pathname.startsWith("/chats")&&t&&e.conversationId===t||B4.set(Sn,{iconProvider:()=>{var o,r,a;return i.jsx(qI,{path:`/podcasts/user/${(o=e.podcast)==null?void 0:o.id}/Files/${(a=(r=e.podcast)==null?void 0:r.thumbnail)==null?void 0:a.name}`,className:"rounded-xl object-cover"})},title:z("podcasts.generationNotification.title"),subtitle:((n=e.podcast)==null?void 0:n.title)??"",action:()=>{var o;qs({from:window.location.pathname,to:`/podcasts/user/${(o=e.podcast)==null?void 0:o.id}`})},trackingArgs:{scenario:"podcastGenerationNotification",customData:JSON.stringify({podcastId:(s=e.podcast)==null?void 0:s.id})},dismissAfter:3e4})}const Mee=R(!1),KI=R(void 0),Nee=R(!1),Ree=R(void 0);function Pee(e,t){if(!t)return e;const[n,s,o]=e.slice(-3);if(!(Ei(o)&&Ei(s)&&(n==null?void 0:n.author)==="human"))return e;const a={left:o.sideBySideConfig.position==="left"?o:s,right:o.sideBySideConfig.position==="right"?o:s,createdAt:o.createdAt,id:t};return[n,a]}function Lee(e){return ZI(e)||Ei(e)}function ZI(e){return"left"in e&&"right"in e}function Ei(e){return!e||e.author!=="ai"?!1:!!e.sideBySideConfig}const Wi=$e();function sn({history:e,messageId:t}){const n=e.find(({id:s})=>s===t);if((n==null?void 0:n.author)==="ai")return n}function Oee(e,t){const n=e.find(({author:s})=>s==="human");if((n==null?void 0:n.id)===t&&n.author==="human")return n}function Dee(e){if(!e)return;const t=Wi.get(vt).get(e);if(!t)return;const{history:n}=t,s=n.find(({author:o})=>o==="human");if((s==null?void 0:s.author)==="human")return s}function vi(e){const t=e.at(-1);if((t==null?void 0:t.author)==="ai")return t}function No(e,t){return e.find(n=>n.partId===t)}function V4(e){for(let t=e.length-1;t>=0;t-=1){const n=e[t];if(n&&n.type==="text")return n}}function Awe(e){return e.filter(t=>t.author==="ai").map(t=>({...t,content:t.content.filter(n=>n.type==="image")})).filter(t=>t.content.length>0)}function kwe(e,t,n){const s=e.find(o=>o.id===t);if(!(!s||s.author!=="ai")){for(const o of s.content)if("partId"in o&&o.partId===n)return o}}function YI(e){if(!e)return null;const t=Wi.get(vt).get(e);if(!t)return null;const{history:n}=t;return fC(n)}function ot(e,t){Wi.set(vt,n=>Un(n,s=>{const o=s.get(e);o&&t(o.history)}))}function jee(e,t,n,s){ot(e,o=>{const r=o.find(a=>a.id===t);if((r==null?void 0:r.author)==="ai"){const a=No(r.content,n);a&&s(a)}})}function vC(e,t){Wi.set(fo,n=>Un(n,s=>{const o=s.get(e);o&&t(o)}))}function T2(e,t){Wi.set(vt,n=>Un(n,s=>{const o=s.get(e);o&&t(o)}))}function Ec(e,t){Wi.set(v1,n=>Un(n,s=>{if(!t)return;const o=s.get(e);o?o.add(t):s.set(e,new Set([t]))}))}function Uee(e){Wi.set(TZ,t=>Un(t,n=>{e&&n.set(e,!0)}))}function QI(e){Zt(e)}function kf(e,t){const n={type:"error",text:e,partId:"0"},s=Math.random().toString(),o={id:s,createdAt:new Date().toISOString(),author:"ai",content:[n],mode:vn(),streamingState:"idle"};Ec(t,s),ot(t,r=>{r.push(o)})}function Fee(e){if(w2())for(const t of e.content)t.type==="activity"&&t.activity.status==="running"&&(t.activity.status="completed")}function JI(e){T2(e,t=>{t.sideBySideComparisonId=void 0})}function XI(e,t){const n=!t;ot(e,s=>{const[o,r]=s.slice(-2);if(!(Ei(r)&&Ei(o)))return;const l=n?!r.sideBySideConfig.isDefault:r.id!==t,u=n?!o.sideBySideConfig.isDefault:o.id!==t;l?s.splice(s.length-1,1):u&&s.splice(s.length-2,1)})}function Bee(e,t){XI(e,t),JI(e)}function CC(e){XI(e,void 0),JI(e)}function Vee(e,t){const n=`indicator-ai-response-${Math.random().toString()}`;return ot(e,s=>{const o=vi(s);o&&o.content.push({type:"indicator-ai-response",partId:n,state:"loading",text:t})}),n}function H4(e,t,n){t&&ot(e,s=>{const o=vi(s);if(!o)return;const r=No(o.content,t);!r||r.type!=="indicator-ai-response"||r.state!==n&&(o.content=o.content.map(a=>a.type==="indicator-ai-response"&&t===a.partId?{...a,state:n}:a))})}const xg=$e();function Hee(e,t){const n=xg.get(je);if(be("ds-new-progress")&&e.status!=="completed"||!hp.includes(e.status)||(QI(vn()),!n||n===t))return;const o=e.id,r={title:z("research.generationNotification.title"),subtitle:z("research.generationNotification.subTitle"),link:z("research.generationNotification.subTitleLink"),action:()=>{qs({from:window.location.pathname,to:`/chats/${t}`})},onClick:()=>{xg.set(Ree,o)},dismissable:!0,trackingArgs:{scenario:"researchCompletionNotification",customData:JSON.stringify({researchId:e.id,sourceConversationId:t})}};xg.set(Sn,r)}function zee(){const e=M(fo),t=M(je);return c.useMemo(()=>{if(t){for(const n of e.values())if(n.conversationId===t)return n}},[t,e])}function Gee(){const e=$e(),t=e.get(fo),n=e.get(je);if(n){for(const s of t.values())if(s.conversationId===n)return s}}async function e_(e){const{conversationId:t=pe(je),talk:n=!1,location:s}=e;t&&await qs({to:`/chats/$conversationId${n?"/talk":""}`,params:{conversationId:t},from:s.pathname,search:s.search?Object.fromEntries(new URLSearchParams(s.search)):{}})}async function Js(e={}){await e_({conversationId:e.conversationId,talk:e.talk,location:Ma().state.location})}function t_(){const e=fl(),{location:t}=e.state;return c.useCallback(async(n={})=>e_({conversationId:n.conversationId,talk:n.talk,location:{pathname:t.pathname,search:t.search}}),[t.search,t.pathname])}function El(e){mt(bC,e)}function yC(){return M(bC)}function Wee(){return pe(bC)}const bC=R(null);function sm(e){var l,u;const{id:t,shouldNavigateToChat:n=!0,shouldClearParentConversation:s=!0}=e;s&&pe(je)!==pe(g2)&&mt(g2,null),El(null),mt(je,t),mt(bl,!1),mt(vt,d=>Un(d,m=>{const f=m.get(t);if(f!=null&&f.history.length&&(f.isNew=!1),f!=null&&f.history.some(h=>h.author!=="system"&&h.content.some(g=>g.type==="card"&&g.card.type==="ads"))){for(const h of f.history)if(h.author==="ai"&&h.content.some(g=>g.type==="card"&&g.card.type==="ads")){const g=h.content.filter(C=>C.type!=="card"||C.card.type!=="ads");h.content=g}}}));const o=pe(g1);if(o&&o!==t&&mt(vt,d=>Un(d,m=>{m.delete(o)})),((u=(l=YI(t))==null?void 0:l.part.task)==null?void 0:u.type)==="research")Zt("research");else{let d=vn();be("sticky-conversation-mode")&&(be("persist-conversation-mode")?d=wt(kd,ba)??d:Dn("sticky-conversation-mode")&&(d=Dn("sticky-conversation-mode")??vn())),Zt(d)}const a=pe(fo);jI(a,t)?mt(Hn,"side-by-side"):mt(Hn,"chat-only"),n&&Js({conversationId:t})}function $ee(){return e=>sm(e)}const Bc=$e(),qee="MissingUrlFromApi",Kee="https://aka.ms/copilot-actions-faq";function Zee(e,t){const n=Bc.get(fo).get(e);return(n==null?void 0:n.type)==="computerUse"&&!n.lastUserCommand&&Yee(n)&&t.some(o=>o.op==="replace"&&o.path==="/status"&&o.value==="paused")?A2(t,["userTakeControl","pauseByClick"]):!1}function n_(e){return e==="paused"||e==="running"||e==="pending"}function Yee(e){var t,n;return e.status==="paused"&&(((t=e.statusChange)==null?void 0:t.reason)==="safetyRiskDetected"||((n=e.statusChange)==null?void 0:n.reason)==="askUserInput")}function Qee(e){var t;return e.status==="paused"&&((t=e.statusChange)==null?void 0:t.reason)==="safetyRiskDetected"}function Jee(e){var t;return e.status==="paused"&&((t=e.statusChange)==null?void 0:t.reason)==="userTakeControl"&&e.lastUserCommand==="takeTaskControl"}function Sg(e,t=!1){return e.map(n=>({type:"chainOfThought",text:n.text,screenshotUrl:t?qee:null,reaction:null,partId:Math.random().toString()}))}function A2(e,t){return e.some(n=>{if(n.op==="replace"&&n.path==="/statusChange"){const{value:s}=n;if(typeof s=="object"&&s!==null&&"reason"in s){const{reason:o}=s;if(typeof o=="string"){const r=SS.safeParse(o);return r.success&&t.includes(r.data)}}}return!1})}function Xee(e,t){const n=Bc.get(fo).get(e);if((n==null?void 0:n.type)==="computerUse"){const{conversationId:s,status:o,statusChange:r}=n;if(!s)return;if(o==="cancelled"&&ot(s,f=>{const h=z4(e,"cancelTask");f.push(h)}),A2(t,["giveBackControl"])?ot(s,f=>{const h=z4(e,"takeTaskControl");f.push(h)}):(r==null?void 0:r.reason)==="giveBackControl"&&G4(e),A2(t,["taskCompleted"])&&ot(s,f=>{const h={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",streamingState:"idle",content:[{type:"card",partId:Math.random().toString(),card:{type:"computerUseFeedback"}}]};f.push(h)}),r)switch(r.reason){case"askUserInput":case"safetyRiskDetected":{o==="paused"?(r.reason==="askUserInput"&&po({feature:"computerUse",scenario:"askUserInput",customData:JSON.stringify({id:n.id,conversationId:n.conversationId})}),s===Bc.get(je)||Bc.set(Sn,{title:n.title&&n.title!==""?z("actions.alertTitleTemplate",{conversationName:n.title}):z("actions.defaultAlertTitle"),subtitle:r.reason==="safetyRiskDetected"?z("actions.safetyRiskAlertSubTitle"):z("actions.askUserInputAlertSubTitle"),action:()=>sm({id:s}),dismissAfter:30*1e3,dismissable:!0}),vC(e,h=>{"lastUserCommand"in h&&(h.lastUserCommand=void 0)})):G4(e);break}}const u=t.filter(f=>f.op==="add"&&f.path==="/chainOfThought/-").map(f=>({text:"value"in f?f.value:""}));u.length>0&&ot(s,f=>{if(f.length===0)return;const h=W4(f);if(h)h.push(...Sg(u));else{const g={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",streamingState:"idle",content:Sg(u)};f.push(g)}}),t.filter(f=>f.op==="replace"&&f.path==="/computerAction").length>0&&ot(s,f=>{const h=W4(f);h&&h.push(...Sg([{text:n.computerAction??""}],!0))}),t.filter(f=>f.op==="replace"&&f.path==="/formStructure").length>0}}function ete(e,t,n){switch(t){case"sendFormData":return{type:t,taskId:e,fields:n??[]};default:return{type:t,taskId:e}}}function z4(e,t,...n){const s=n[0],o=ete(e,t,s);return{id:Math.random().toString(),createdAt:new Date().toISOString(),author:"human",content:[{type:"command",command:o}],mode:null}}function G4(e){vC(e,t=>{"statusChange"in t&&(t.statusChange=void 0)})}function W4(e){const t=e.at(-1);if(t&&t.author==="ai"&&t.content.find(n=>n.type==="chainOfThought"))return t.content}function Mwe(e){var n;const t=Gee();return(t==null?void 0:t.type)==="computerUse"?t.status!=="running"&&!((n=t.replay)!=null&&n.isRunning)?!0:!e:!0}function Nwe(e){return!!(be("labs-actions-replay")&&e&&e.type==="computerUse"&&!n_(e.status))}function Rwe(e){return{cancelTask:"copilotActionsCancelTask",takeTaskControl:"copilotActionsTakeControl",sendFormData:"copilotActionsSendFormData",startTask:void 0,pauseTask:void 0,resumeTask:void 0,releaseTaskControl:void 0}[e]}function tte(e){return DI({tasks:Bc.get(fo),conversationId:e,taskType:"computerUse"})}function nte(e,t){e===t&&(Bc.set(Hn,"side-by-side"),QI(vn()))}const ste=$e();function ote(e){if(!be("video-gen")||e.status!=="completed"||!e.conversationId||!e.result||e.result.type!=="success"||!e.result.videoUrl)return;const{conversationId:t,result:n}=e,s=be("library")&&be("library-video"),o=z("video.generationNotification.title"),r=s?z("video.generationNotification.subtitle"):z("video.generationNotification.subtitleToChat"),a=()=>{s?qs({from:window.location.pathname,to:"/library",search:{type:"video"}}):sm({id:t})};ste.set(Sn,{iconProvider:()=>i.jsx("img",{src:n.thumbnailUrl??"",alt:n.thumbnailUrl??"",className:"rounded-xl object-cover"}),title:o,subtitle:r,action:a,trackingArgs:{scenario:"videoGenerationNotification"},dismissAfter:3e4})}function rte(e){return e?!e.slotAds||e.slotAds.length===0?!0:e.slotAds.every(t=>!!t.ad.layout):!1}function ate(e,t){const n=be("adsshowroombrandagent"),s=pe(_s),o=!!s;if(o){if(e)return{isValid:!1,detailedInfoObj:{hasEntryAd:!0,isShowroomOpened:o}};if(n){const r=!!((t==null?void 0:t.logo)??(s==null?void 0:s.brandLogo)),a=rte(t);return{isValid:!!(a&&r),detailedInfoObj:{noBrandLogo:!r,noValidMainAd:!a,isShowroomAgentEnabled:!0,isShowroomOpened:o}}}return{isValid:!1,detailedInfoObj:{isShowroomAgentEnabled:!1,isShowroomMvpEnabled:!1,isShowroomOpened:o}}}return e?n?{isValid:!!(e.brandId&&!t),detailedInfoObj:{noBrandId:!e.brandId,hasMainAd:!!t,isShowroomAgentEnabled:!0,isShowroomOpened:o}}:{isValid:!1,detailedInfoObj:{isShowroomAgentEnabled:!1,isShowroomMvpEnabled:!1,isShowroomOpened:o}}:{isValid:!1,detailedInfoObj:{noEntryAd:!0,isShowroomOpened:o}}}function ite({entryAd:e,mainAd:t,messageId:n,partId:s,conversationId:o}){const{isValid:r,detailedInfoObj:a}=ate(e,t);return r||D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_details:JSON.stringify({messageId:n,partId:s,conversationId:o,...a}),eventInfo_errorMessage:"Unexpected showroom data received"}}),r}function cte({card:e,messageId:t,partId:n,conversationState:s,conversationId:o}){const{ads:r}=e,a=pe(_s);if(r!=null&&r.some(l=>l.type==="mainShowroom"||l.type==="miniShowroom")){const l=r[0],u=(l==null?void 0:l.type)==="miniShowroom",d=u?l:void 0,m=u?r[1]:l;if(!ite({entryAd:d,partId:n,conversationId:o,messageId:t,mainAd:(m==null?void 0:m.type)==="mainShowroom"?m:void 0}))return}if(s.timing.onAdsRender({requestId:e.requestId,messageId:t,conversationId:o,eventType:"card",ads:r}),a){const l=r==null?void 0:r.filter(u=>u.type==="mainShowroom");if(l){$J(u=>u==null?void 0:u.push({key:t,requestId:e.requestId,ads:l,instrumentation:e.instrumentation}));return}}ot(o,l=>{const u=sn({history:l,messageId:t});u&&u.content.push({type:"card",partId:n,card:{...e,createdAt:Date.now()}})})}function s_(e){mt(vt,t=>Un(t,n=>{const s=n.get(e.id);s&&(e.title!==void 0&&(s.title=e.title),s.updatedAt=e.updatedAt,s.continuedAt=e.continuedAt,e.characterId!==void 0&&(s.characterId=e.characterId),e.group!==void 0&&(s.group=e.group))}))}async function o_(e){const t=await Ct(`/conversations/${e}`,_v,{options:{method:"GET"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*"}}).then(n=>n.data);s_(t)}function Pwe(e,t){const{data:n,isLoading:s,error:o,refetch:r}=Ms({queryKey:["conversationMetadata",e],queryFn:async()=>await Ct(`/conversations/${e}`,_v,{options:{method:"GET"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*"}}).then(l=>l.data),enabled:!!e,...t});return c.useEffect(()=>{n&&s_(n)},[n,e]),{data:n,isLoading:s,error:o,refetch:c.useCallback(()=>{r()},[r])}}function ut(){return b8({select:t=>t.pathname})}function wl(){return ut(),!1}function xC(e){return!1}function r_(e,t){var s;const n=re.instance().config();return e&&!((s=n.settingsOverrides)!=null&&s.shouldHideMultipleCharacters)&&!t}function om(){const e=W("multiplecharacters"),t=wl();return r_(e,t)}function k2(){const e=be("multiplecharacters"),t=xC();return r_(e,t)}const lte=gl.extend({actionName:w("edge_get_page_content"),parameters:L(x({tabId:j(),windowId:j(),pageUrl:p().nullish(),pageTitle:p().nullish(),pageType:p().nullish(),lastAccessedTime:j().nullish()}))}),ute=gl.extend({actionName:w("browser_search"),parameters:x({queries:L(p()),startTime:p().nullish(),endTime:p().nullish(),maxResults:cr().positive().prefault(10),states:L(p()).prefault(["history"])})}),dte=x({state:p(),title:p(),url:p(),pageSummary:p().nullish(),lastAccessed:Wp().nullish()});x({results:L(dte)});const xr=gl.extend({actionType:p(),id:p()}),mte=xr.extend({actionName:w("edge_navigate_to"),parameters:x({tabId:j().optional(),url:p(),foregroundRun:he().optional()})}),fte=xr.extend({actionName:w("edge_switch_tab"),parameters:x({tabId:j()})}),pte=xr.extend({actionName:w("edge_close_tabs"),parameters:x({tabIds:L(j())})}),hte=xr.extend({actionName:w("edge_find_browser_tab_groups"),parameters:x({queries:p().array()})}),gte=xr.extend({actionName:w("edge_group_open_browser_tabs"),parameters:x({tabGroups:x({title:p(),tabIds:L(j()),color:Re([w("red"),w("green"),w("blue")]),collapsed:he()}).array()})}),vte=xr.extend({actionName:w("edge_ungroup_open_browser_tabs"),parameters:x({tabGroupIds:j().array()})}),Cte=xr.extend({actionName:w("edge_media_controls"),parameters:x({action:Re([w("play"),w("pause")])})}),yte=xr.extend({actionName:w("edge_go_back_forward"),parameters:x({direction:Re([w("back"),w("forward")]),tabId:j().optional()})}),bte=Re([mte,pte,hte,gte,vte,Cte,fte,yte]),xte=x({type:w("screenshot")}),Ste=x({type:w("click"),x:j(),y:j(),button:Re([w("back"),w("forward"),w("left"),w("right"),w("middle")])}),Ete=x({type:w("scroll"),x:j(),y:j(),scrollX:j(),scrollY:j()}),wte=x({type:w("doubleClick"),x:j(),y:j()}),Ite=x({type:w("moveMouse"),x:j(),y:j()}),_te=x({type:w("keyPress"),keys:p().array()}),Tte=x({type:w("drag"),path:x({x:j(),y:j()}).array()}),Ate=x({type:w("type"),text:p()}),kte=x({type:w("wait"),seconds:j()}),Mte=st("type",[xte,Ste,wte,Ite,_te,Tte,Ete,Ate,kte]),Nte=Re([w("blocked"),w("not-allowed")]),Rte=xr.extend({actionName:w("computer_use"),parameters:x({tabId:j(),callId:p(),given:x({required:Nte,allowed:Re([w("always-allow"),w("allow-once"),w("not-now")]),url:p()}).nullish(),action:Mte})}),Pte=Re([...bte.options,Rte]),Lte=x({Prefill:p(),Position:j(),PhraseLength:j()}),Ote=gl.extend({actionName:w("guided_conversation"),actionType:p(),id:p(),parameters:Lte}),Dte=st("actionName",[lte,ute,hz,Ote,...Pte.options]),jte=["edge://discover-chat-v2","edge://discover-chat-v2.top-chrome","edge://copilot-ntp"];let Eg;function Ute(){if(Eg===void 0){const e=window.location.ancestorOrigins[0]??"";if(!jte.includes(e))throw new Error(`Unexpected browser origin: ${e}.`);Eg=e}return Eg}const Fte="82864fa0-ed49-4711-8395-a0e6003dca1f",$4="Edge.Context.Pref",Bte="Edge.Context.OnPref",Vte="Edge.Context.GetDocumentBody",Hte="Edge.Context.OnGetDocumentBody",Lwe=32e3,zte=48e3,q4=64e3,Gte=128e3,Wte="Edge.Chat.Ready",$te="Edge.Chat.IsVisionCapable",qte="Edge.Chat.OnIsVisionCapable",Kte="Edge.Chat.VisionLaunch",Zte="Edge.Chat.OnVisionLaunch",Yte="Edge.Chat.Screenshot",Qte="Edge.Chat.OnScreenshot",Jte="Edge.Chat.HistorySearch",Xte="Edge.Chat.OnHistorySearch",ene="Edge.RealnameAuth.GetStatus",tne="Edge.RealnameAuth.OnGetStatus",nne="Edge.RealnameAuth.Start",sne="Edge.RealnameAuth.OnStart",one="chrome.tabs.create",K4="chrome.tabs.onActivated",Z4="chrome.tabs.onUpdated",rne="chrome.tabs.reload",ane="chrome.tabs.query",ine="chrome.tabs.update",Y4="chrome.authPrivate.onSignInStateChanged",Q4="chrome.authPrivate.getPrimaryAccountInfo",cne="chrome.metricsPrivate.recordMediumTime",lne="chrome.authPrivate.acquireAccessTokenWithUserInteraction",une="chrome.authPrivate.acquireAccessTokenSilently",J4="chrome.authPrivate.startEdgeSignIn",X4="chrome.windows.getCurrent",e6="chrome.copilotAuthPrivate.startSignIn",t6="chrome.copilotAuthPrivate.startSignOut",dne="Edge.Chat.ActivateRebates",mne="Edge.Chat.OnActivateRebates",fne="Edge.Chat.SignInToRebates",pne="Edge.Chat.AgentMessage",hne="Edge.Chat.OnAgentMessage",gne="Edge.Auth.NaaRequest",vne="Edge.Auth.NaaResponse",Cne="Edge.Notify.Conv",yne="Edge.Notify.User",bne="Edge.Notify.MessageSent",xne="Edge.Notify.OnUserClosedChatSettings",Sne="Edge.Notify.HeaderCommand.ClosePane",Ene="Edge.Notify.HeaderCommand.SendFeedback",wne="Edge.Notify.HeaderCommand.TogglePinState",Ine="Edge.Notify.Error",_ne="Edge.Notify.OpenSidepane.WithConversation",Tne="Edge.Notify.ContentSize",Ane="Edge.Chat.GetCopilotMode",kne="Edge.IsFeatureEnabled",Mne="Edge.OnIsFeatureEnabled",Nne="Edge.NTP.QueryQuickLinks",Rne="Edge.NTP.UpdateQuickLink",Pne="Edge.NTP.RemoveQuickLink",Lne="Edge.NTP.OnReceivedQuickLinks",n6="Edge.ToolAction",One="Edge.ShowTabs",Dne="Edge.LockTabs",jne="Edge.ReleaseTabs",Une="Edge.AllowActionForUrl",Fne="Edge.Searchbox.QueryAutocomplete",Bne="Edge.Searchbox.OpenAutocompleteMatch",Owe="isCopilotToolsSupported",Dwe="isShowCopilotButtonSupported",Vne="Edge.Chat.SetVideoCurrentTime",Hne="Edge.WCP.Notify.DraggableRegions",zne="Edge.WCP.Notify.OpenCopilotSettings",Gne="Copilot.Tabs.Query",jwe="edge_tools.enabled",oi=class oi{constructor(){O(this,"config",null)}static instance(){return oi.singleton||(oi.singleton=new oi),oi.singleton}getConfig(){return this.config}setConfig(t){this.config=t}};O(oi,"singleton",null);let M2=oi;class bn{constructor(){O(this,"resolve",null);O(this,"isCancelled");O(this,"token");this.token=new Promise(t=>{this.resolve=t}),this.isCancelled=!1}static cancelled(){const t=new bn;return t.cancel(),t}static create(t){const n=new bn;return t&&t.then(()=>n.cancel()),n}static delay(t){return this.create(new Promise(n=>{setTimeout(()=>n(null),t)}))}cancelled(){return this.isCancelled}cancel(){return!this.isCancelled&&this.resolve&&this.resolve(this),this.isCancelled=!0,this.isCancelled}dispose(){this.cancel()}}class Ot{constructor(t,n="",s,o,r){O(this,"listenerKey",Ot.name);O(this,"result",null);O(this,"priority","Normal");O(this,"createdDate",new Date);O(this,"id");O(this,"resolveListener");O(this,"eventName");O(this,"canResolve");O(this,"options");this.eventName=t,this.id=r!=null&&r.ignoreRequestId?"-1":n,s==null||s.then(()=>this.cancel()),this.canResolve=o,this.options=r}init(t){var s;!t||((s=this.options)==null?void 0:s.autoRemoveWhenResolveListenerReturnTrue)?this.result=new Promise((o,r)=>{t?this.resolveListener=a=>{if(a===null)return;const l=t(a);Promise.resolve(l).then(u=>{u&&o(a)}).catch(r)}:this.resolveListener=o}):this.resolveListener=t}maybeHandleEvent(t){var o,r;if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");const{eventName:n,requestId:s}=t;return!((o=this.options)!=null&&o.ignoreRequestId)&&s!==this.id?!1:n===this.eventName?this.canResolve&&!this.canResolve(t)?!1:(this.resolveListener(t),!((r=this.options)!=null&&r.ignoreRequestId)):!1}cancel(){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");return this.result&&this.resolveListener(null),!0}}const ri=class ri{constructor(){O(this,"activeListeners",[])}static instance(){return ri.singleton||(ri.singleton=new ri),ri.singleton}push(t,n,s){return t.init(s),this.activeListeners.push(t),n&&n(),t.result===null?Promise.resolve(null):t.result.then(o=>(this.pop(t),o)).catch(()=>(this.pop(t),null))}pop(t){const n=this.activeListeners.indexOf(t);n>-1&&this.activeListeners.splice(n,1)}findAndHandleListener(t){for(const n of[...this.activeListeners].sort((s,o)=>s.createdDate<o.createdDate?-1:1))if(n.maybeHandleEvent(t))break}};O(ri,"singleton",null);let Dt=ri;class Wne{notifySidepaneOpened(t){const n={conversationId:t};this.postMessageToBrowser(_ne,n)}notifyConversationId(t){const n={convId:t};this.postMessageToBrowser(Cne,n)}notifyBrowserOnHeaderCommand(t){let n;switch(t){case"sendFeedback":n=Ene;break;case"closePane":n=Sne;break;case"togglePinState":n=wne;break;default:return}this.postMessageToBrowser(n,{})}notifyErrorPageState(t){const n={type:t};this.postMessageToBrowser(Ine,n)}notifyContentSize(t){const n={height:t};this.postMessageToBrowser(Tne,n)}notifyDraggableRegions(t){this.postMessageToBrowser(Hne,t)}notifyMessageSent(t){const n={isOrganic:t};this.postMessageToBrowser(bne,n)}notifyUserClosedSettings(){this.postMessageToBrowser(xne,{})}notifyOpenCopilotSettings(){this.postMessageToBrowser(zne,{})}notifyUserId(t){const n={picassoId:t};this.postMessageToBrowser(yne,n)}notifyEdgeChatReady(){this.postMessageToBrowser(Wte,{})}createTab(t){const n={url:t};this.postMessageToBrowser(one,n)}lockTabs(t,n){const s={activityId:t,tabIds:n};this.postMessageToBrowser(Dne,s)}releaseTabs(t,n){const s={activityId:t,tabIds:n};this.postMessageToBrowser(jne,s)}showTabs(t){this.postMessageToBrowser(One,t)}async getTabs(t,n,s){const o=crypto.randomUUID(),r=M2.instance().getConfig(),a=(r==null?void 0:r.shouldPassConversationIdWithTabQuery)??!1,l=n&&a,u=l?Gne:ane,d=l?t:(({conversationId:m,...f})=>f)(t);return Dt.instance().push(new Ot(u,o,bn.create(s).token),()=>{this.postMessageToBrowser(u,d,o)})}reloadTab(t){this.postMessageToBrowser(rne,t)}updateTab(t){const n={url:t};this.postMessageToBrowser(ine,n)}async onTabsActivated(t,n){const s=crypto.randomUUID();return Dt.instance().push(new Ot(K4,s,bn.create(t).token),()=>{this.postMessageToBrowser(K4,{},s)},n)}async onTabsUpdated(t,n,s=crypto.randomUUID(),o=void 0){const r=o?{autoRemoveWhenResolveListenerReturnTrue:o}:void 0;return Dt.instance().push(new Ot(Z4,s,bn.create(t).token,void 0,r),()=>{this.postMessageToBrowser(Z4,{},s)},n)}async getQuickLinks(t,n){const s=crypto.randomUUID(),o={count:t};return Dt.instance().push(new Ot(Lne,s,bn.create(n).token),()=>{this.postMessageToBrowser(Nne,o,s)})}updateQuickLink(t,n,s){const o={rid:n??-1,url:s??"",title:t};this.postMessageToBrowser(Rne,o)}removeQuickLink(t){const n={rid:t};this.postMessageToBrowser(Pne,n)}async isVisionCapable(t){const n=crypto.randomUUID();return Dt.instance().push(new Ot(qte,n,bn.create(t).token),()=>{this.postMessageToBrowser($te,{},n)})}async launchVision(t,n){const s=crypto.randomUUID(),o={formCode:t};return Dt.instance().push(new Ot(Zte,s,bn.create(n).token),()=>{this.postMessageToBrowser(Kte,o,s)})}async listenPreference(t,n,s,o){const r=crypto.randomUUID(),a={key:t,notifyOnChange:!0};await Dt.instance().push(new Ot(Bte,void 0,bn.create(o).token,n,{ignoreRequestId:!0}),()=>{this.postMessageToBrowser($4,a,r)},s)}setPreference(t,n){const s={key:t,value:n};this.postMessageToBrowser($4,s)}async startListeningForSignedInStateChanges(t,n){const s=crypto.randomUUID();return Dt.instance().push(new Ot(Y4,s,bn.create(t).token),()=>{this.postMessageToBrowser(Y4,{},s)},n)}async getPrimaryAccount(){const t=crypto.randomUUID(),n=await Dt.instance().push(new Ot(Q4,t),()=>{this.postMessageToBrowser(Q4,void 0,t)});return n!=null&&n.args?n.args:null}async acquireToken(t,n,s){const o=crypto.randomUUID(),r={account_id:n.account_id,account_type:n.account_type,client_id:Fte,scope_or_resource:s??"",use_msa_v2_api:!0},a=t?lne:une,l=await Dt.instance().push(new Ot(a,o),()=>{this.postMessageToBrowser(a,r,o)});return l!=null&&l.args?l.args:null}async startEdgeSignIn(){const t=crypto.randomUUID(),n=await Dt.instance().push(new Ot(J4,t),()=>{this.postMessageToBrowser(J4,void 0,t)});return n!=null&&n.args?n.args:null}async startCopilotSignIn(t){const n=crypto.randomUUID(),s=await Dt.instance().push(new Ot(e6,n),()=>{this.postMessageToBrowser(e6,t,n)});return s!=null&&s.args?s.args:null}async startCopilotSignOut(){const t=crypto.randomUUID(),n=await Dt.instance().push(new Ot(t6,t),()=>{this.postMessageToBrowser(t6,void 0,t)});return n!=null&&n.args?n.args:null}async getRealNameAuthStatus(t){const n=crypto.randomUUID(),s=bn.delay(t),o=await Dt.instance().push(new Ot(tne,n,s.token),()=>{this.postMessageToBrowser(ene,{},n)});return s.cancelled()?null:o!=null&&o.args?o.args:null}async startRealNameAuth(){const t=crypto.randomUUID(),n=await Dt.instance().push(new Ot(sne,t),()=>{this.postMessageToBrowser(nne,{},t)});return n!=null&&n.args?n.args:null}queryAutocomplete(t){const n={query:t,preventInlineAutocomplete:!0};this.postMessageToBrowser(Fne,n)}openAutocompleteMatch(t,n,s,o,r){const a={line:t,url:n,areMatchesShowing:!0,mouseButton:s,altKey:!1,ctrlKey:o,metaKey:!1,shiftKey:r};this.postMessageToBrowser(Bne,a)}fetchIsCopilotMode(){this.postMessageToBrowser(Ane,{})}setVideoTime(t){const n={selector:"video",time:t};this.postMessageToBrowser(Vne,n)}async isFeatureEnabled(t){const n={featureNames:t},s=crypto.randomUUID(),o=1e3;return Dt.instance().push(new Ot(Mne,s,bn.delay(o).token),()=>{this.postMessageToBrowser(kne,n,s)})}async searchHistory(t,n){const s=crypto.randomUUID();return Dt.instance().push(new Ot(Xte,s,bn.create(n).token),()=>{this.postMessageToBrowser(Jte,t,s)})}async executeBrowserAction(t){const n=crypto.randomUUID();return Dt.instance().push(new Ot(n6,n),()=>{this.postMessageToBrowser(n6,t,n)})}allowActionForUrl(t){const n=crypto.randomUUID();this.postMessageToBrowser(Une,t,n)}recordMediumTimeMetric(t,n){const s={eventName:t,value:Math.round(n)};this.postMessageToBrowser(cne,s)}async takeScreenshot(){const t=crypto.randomUUID(),n=await Dt.instance().push(new Ot(Qte,t),()=>{this.postMessageToBrowser(Yte,{range:0},t)});return n!=null&&n.args?n.args:null}async getComputerUse(t,n,s){const o=Date.now().toString(),r={eventType:t,requestId:o,sessionId:n},a=bn.create(s),l=await Dt.instance().push(new Ot(hne,o,a.token),()=>{this.postMessageToBrowser(pne,r,o)});if(a.cancelled())return!1;const u=l!=null&&l.args?l.args:null;return(u==null?void 0:u.result)??!1}async makeNaaRequest(t,n){const s=crypto.randomUUID();return Dt.instance().push(new Ot(vne,s,bn.create(n).token),()=>{this.postMessageToBrowser(gne,t,s)})}async getDocumentBody(t,n,s,o,r,a){const l={cleanBody:!0,maxChars:n,domSelector:"",frameName:"",retry:1,...o,fetchVideoTranscript:s};return Dt.instance().push(new Ot(Hte,t,bn.create(a).token,r),()=>{this.postMessageToBrowser(Vte,l,t)})}async getCurrentWindow(t){const n=crypto.randomUUID(),s=bn.create(t),o=await Dt.instance().push(new Ot(X4,n,s.token),()=>{this.postMessageToBrowser(X4,{},n)});return s.cancelled()?null:o!=null&&o.args?o.args:null}async activateCashback(){const t=crypto.randomUUID(),n={},s=1e4,o=await Dt.instance().push(new Ot(mne,t,bn.delay(s).token),()=>{this.postMessageToBrowser(dne,n,t)});return o?o.args.result:!1}signInAndActivateCashback(){this.postMessageToBrowser(fne,{})}postMessageToBrowser(t,n,s=crypto.randomUUID()){const o={eventName:t,requestId:s,isOutgoing:!0,args:n};window.parent.postMessage(o,Ute())}}const $ne=new Wne;class qne{constructor(){O(this,"isFeatureAvailableApiSupported");O(this,"enabledFeatures",new Map);this.isFeatureAvailableApiSupported=this.getFeatureAvailableApiSupported()}async isFeatureEnabled(t){return this.enabledFeatures.has(t)||await this.retrieveEnabledFeatures([t]),this.enabledFeatures.get(t)??!1}updateFeatureEnabledForTest(t,n){this.enabledFeatures.set(t,n)}async retrieveEnabledFeatures(t){if(!this.isFeatureAvailableApiSupported)return;await this.waitForNativeBridgeConnected();const n=await $ne.isFeatureEnabled(t);if(n){const s=n.args;for(const o of t){const r=s.featureNames.includes(o);this.enabledFeatures.set(o,r)}}}getFeatureAvailableApiSupported(){if(typeof navigator>"u")return!1;const t=132;for(const n of navigator.userAgent.split(" "))if(n.startsWith("Edg/")){const s=n.split("/")[1];if(s!==void 0){const o=s.split(".")[0];if(o!==void 0)return parseInt(o,10)>=t}}return!1}waitForNativeBridgeConnected(){const t=$e();return t.get(_f)?Promise.resolve():new Promise(n=>{const s=t.sub(_f,()=>{t.get(_f)&&(s(),n())})})}}const Uwe=new qne;function Kne(e){return e!=null&&typeof e=="object"&&"id"in e&&typeof e.id=="number"&&"windowId"in e&&typeof e.windowId=="number"&&"url"in e&&typeof e.url=="string"}function Zne(e){return Array.isArray(e)&&e.every(t=>Kne(t))}function Fwe(e=q4){return be("edge-long-doc-128k")?Gte:be("edge-long-doc-64k")?q4:be("edge-long-doc-48k")?zte:e}function s6(e){const t=new Date(e).getTime();if(!Number.isNaN(t))return t}const Yne={OPENED:Kr.OPENED,RECENT:Kr.RECENT,RECENTLY_CLOSED_TAB:Kr.RECENT,HISTORY:Kr.HISTORY};function Qne(e){return e.map(t=>{const n=t.toUpperCase();return Yne[n]??Kr.HISTORY})}const Jne=$e();function Xne(e){Jne.set(vt,t=>Un(t,n=>{for(const{title:s,id:o,updatedAt:r,continuedAt:a,group:l}of e){const u=n.get(o);u?(u.title=s,u.id=o,u.updatedAt=r,u.continuedAt=a,u.group=l??null):n.set(o,{id:o,title:s,updatedAt:r,history:[],continuedAt:a,group:l??null})}}))}const ese=$e();function tse(e,t,n){sse(e.map(s=>nse(s,t,n)).filter(s=>s!==void 0))}function nse(e,t,n){switch(e.type){case"research":return{id:e.id,conversationId:t,type:e.type,status:e.status,updatedAt:""};case"computerUse":return{id:e.id,conversationId:e.conversationId??"",type:e.type,status:e.status,updatedAt:e.updatedAt??"",title:e.title??"",lastScreenshot:e.lastScreenshot};case"podcast":return{id:e.id,conversationId:t,status:e.status==="completed"?"completed":"running",type:e.type,podcast:e.podcast,updatedAt:e.updatedAt??n};case"videoGeneration":return{id:e.id,conversationId:t,status:e.status,type:e.type,result:e.result,updatedAt:e.updatedAt??n};default:return}}function sse(e){ese.set(fo,n=>Un(n,s=>{for(const o of e){const r=s.get(o.id);if(r)r.title=o.title,r.conversationId=o.conversationId,r.updatedAt=o.updatedAt,r.status=o.status,r.type=o.type,r.type==="computerUse"&&o.type==="computerUse"&&(r.lastScreenshot=o.lastScreenshot);else{const a={id:o.id,title:o.title,conversationId:o.conversationId,updatedAt:o.updatedAt,status:o.status,type:o.type};a.type==="computerUse"&&o.type==="computerUse"&&(a.chainOfThought=[],a.lastScreenshot=o.lastScreenshot),o.type==="podcast"&&a.type==="podcast"&&(a.podcast=o.podcast),o.type==="videoGeneration"&&a.type==="videoGeneration"&&(a.result=o.result),s.set(o.id,a)}}}));const t=e.filter(n=>n.type==="computerUse"&&n.conversationId).map(n=>{const{conversationId:s,title:o,updatedAt:r}=n;return{id:s??"",title:o,updatedAt:r,continuedAt:null,history:[]}});Xne(t)}const ose=e=>e;function D1(e=ose){const t=c.useRef(null);return c.useEffect(()=>{const n=typeof document<"u"?document:void 0,s=n==null?void 0:n.defaultView;if(!s)return()=>{};const o=LL(s,{autoRoot:{}});return t.current=e(o),()=>{OL(o),t.current=null}},[e]),t}const gp=e=>{D1();const t=DL(e,!0);return c.useMemo(()=>({[jL]:t}),[t])},rse="data-tabster-never-hide",ase=e=>e.hasAttribute(rse);function ise(e){UL(e,void 0,ase),FL(e)}const j1=(e={})=>{const{trapFocus:t,alwaysFocusable:n,legacyTrapFocus:s}=e;D1(ise);const o=c.useId(),r=e.id??`modal-${o}`,a=gp({restorer:{type:cb.Source},...t&&{modalizer:{id:r,isOthersAccessible:!t,isAlwaysAccessible:n,isTrapped:!!s&&!!t}}}),l=gp({restorer:{type:cb.Target}});return{modalAttributes:a,triggerAttributes:l}},SC={type:"spring",mass:.5,stiffness:450,damping:35},cse={type:"spring",mass:.5,stiffness:450,damping:35},Bwe={type:"spring",mass:1.8,stiffness:440,damping:40},N2={type:"spring",mass:1.4,stiffness:320,damping:40},a_={type:"spring",mass:1,stiffness:1200,damping:40},i_={type:"spring",mass:1.8,stiffness:640,damping:40},lse={type:"spring",mass:3.2,stiffness:640,damping:40},pn={type:"spring",mass:.5,stiffness:450,damping:35},o6={duration:1.2,ease:"easeInOut",repeat:3,repeatType:"reverse",type:"tween"},c_=.2,l_=.25,use=1.5,dse=[.16,1,.3,1];function mse(e,t){const{children:n,id:s,eleId:o,labelById:r,role:a,className:l,mode:u="wait",duration:d=ts.default,exitDuration:m=ts.default,exitDelay:f=0,delay:h=0,delayChildren:g=0,onAnimationComplete:C,"data-testid":v,initial:y="initial"}=e;return i.jsx(pt,{mode:u,children:n&&i.jsx(ge.div,{id:o,"aria-labelledby":r,animate:"animate",exit:"exit",ref:t,role:a,initial:y,variants:{initial:Fe,animate:nt,exit:{...Fe,transition:{duration:m,delay:f}}},transition:{duration:d,ease:"easeInOut",delay:h,delayChildren:g},className:l,onAnimationComplete:C,"data-testid":v,children:n},s)})}const ln=c.forwardRef(mse),Il=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M4.20889 10.7327C3.9232 11.0326 3.93475 11.5074 4.23467 11.7931C4.5346 12.0788 5.00933 12.0672 5.29502 11.7673L11.2495 5.516V20.25C11.2495 20.6642 11.5853 21 11.9995 21C12.4137 21 12.7495 20.6642 12.7495 20.25V5.51565L18.7043 11.7673C18.99 12.0672 19.4648 12.0788 19.7647 11.7931C20.0646 11.5074 20.0762 11.0326 19.7905 10.7327L12.7238 3.31379C12.5627 3.14474 12.3573 3.04477 12.1438 3.01386C12.0971 3.00477 12.0489 3 11.9995 3C11.9498 3 11.9012 3.00483 11.8543 3.01406C11.6412 3.04518 11.4363 3.14509 11.2756 3.31379L4.20889 10.7327Z"})),Vwe=Object.freeze(Object.defineProperty({__proto__:null,default:Il},Symbol.toStringTag,{value:"Module"})),an=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M4.39705 4.55379L4.46967 4.46967C4.73594 4.2034 5.1526 4.1792 5.44621 4.39705L5.53033 4.46967L12 10.939L18.4697 4.46967C18.7626 4.17678 19.2374 4.17678 19.5303 4.46967C19.8232 4.76256 19.8232 5.23744 19.5303 5.53033L13.061 12L19.5303 18.4697C19.7966 18.7359 19.8208 19.1526 19.6029 19.4462L19.5303 19.5303C19.2641 19.7966 18.8474 19.8208 18.5538 19.6029L18.4697 19.5303L12 13.061L5.53033 19.5303C5.23744 19.8232 4.76256 19.8232 4.46967 19.5303C4.17678 19.2374 4.17678 18.7626 4.46967 18.4697L10.939 12L4.46967 5.53033C4.2034 5.26406 4.1792 4.8474 4.39705 4.55379L4.46967 4.46967L4.39705 4.55379Z"})),Hwe=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"}));function $i(e,t=!0,n=!1){c.useEffect(()=>{var s;t&&((s=e.current)==null||s.focus({preventScroll:n}))},[e,t,n])}function u_(){const e=c.useRef(null);return{captureFocus:()=>{document.activeElement instanceof HTMLElement&&(e.current=document.activeElement)},restoreFocus:()=>{e.current&&e.current.focus()}}}function qi(){const{i18n:e}=q();return e.dir(e.language)==="rtl"}function EC(){return Gt("kill-domain-referrer")?"noopener noreferrer":"noopener"}function fse(e){return e==="."||e==="!"||e==="?"}function pse(e){return e===" "||e===`
`||e==="	"}function hse(e){let t=e.length-1;for(;t>=0&&pse(e[t]);)t-=1;return[e.slice(0,t+1),e.slice(t+1)]}function gse(e,t,n){return e.slice(0,n)+t+e.slice(n)}const vse=/^(?:(?:https?):\/\/)?(?:(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.))+[a-z]{2,}(?:\/[\w%.-]*)*\/?(?:\?[^\s#]*)?(?:#[^\s]*)?$/,Cse=/\b((https?:\/\/|www\.)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})([/?#][\w\-._~:/?#@!$&'()*+,;=%]*)?(?=[\s<>()"'.,!?)}\]]|$)/gi;function rm(e){return vse.test(e)}function yse(e){return e.startsWith("/attachments/onedrive/")}function zwe(e){return!!yse(e)}function bse(e){const[t,n]=hse(e),s=fse(t[t.length-1]),o=s?t.slice(0,-1):t;if(rm(o)){const r=s?t[t.length-1]:"";return{url:Qr(o),word:o,suffix:`${r}${n}`}}return{word:e}}function es(e){let t="";try{t=new URL(e).hostname}catch{}return t}function R2(e){const t=es(e),n=t.match(/^(?:https?:\/\/)?(?:www\.)?([^/]+)/i);return n&&n[1]?n[1]:t}function xse(e,t,n){const{overwrite:s}=n??{};try{const o=new URL(e);for(const[r,a]of Object.entries(t))s&&o.searchParams.delete(r),o.searchParams.append(r,a);return o.toString()}catch{}return e}function lo(e){const{formCodeParamOnLinks:t}=re.instance().config();return t?xse(e,{form:t}):e}function Sse(e){return e.replace(/[.,!?]+$/,"")}function Ese(e,t){return!e||t<=0?!1:e[t-1]==="@"||/[\w.-]+@/.test(e.slice(Math.max(0,t-20),t+1))}function Gwe(e){const t=[];if(!e)return t;for(const n of e.matchAll(Cse)){const s=n[0],{index:o}=n;if(o<0||Ese(e,o))continue;const r=Sse(s),a=Qr(r),l=o+r.length;t.push({url:a,from:o,to:l})}return t}function Wwe(e){return rm(e)?e:Xv()+e}function $we(e){const t=e.match(/^(?:https?:\/\/)?(?:www\.)?(.+)/i);return(t&&t[1]?t[1]:e).replace(/\/$/,"")}function qwe(e){return e?rm(e)?e.replace(/\/$/,"").replace(/\//g,"").replace("","//").replace(//g,"  "):e:""}const ls=c.forwardRef((e,t)=>{const{children:n,href:s,className:o,title:r,"aria-controls":a,"aria-expanded":l,"aria-haspopup":u,"aria-label":d,id:m,target:f,onClick:h,onPointerDown:g,onFocus:C}=e,v=EC();return i.jsx("a",{id:m,ref:t,"aria-controls":a,"aria-expanded":l,"aria-haspopup":u,"aria-label":d,className:o,title:r,href:s&&lo(s),target:f??"_blank",rel:v,onClick:h,onPointerDown:g,onFocus:C,children:n})});ls.displayName="Link";const d_=c.forwardRef((e,t)=>{const{children:n,...s}=e;return i.jsx(BL,{ref:t,...s,children:n})});d_.displayName="RouterLink";function U1(){return typeof window<"u"}function _a(e){return m_(e)?(e.nodeName||"").toLowerCase():"#document"}function us(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Go(e){var t;return(t=(m_(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function m_(e){return U1()?e instanceof Node||e instanceof us(e).Node:!1}function Ut(e){return U1()?e instanceof Element||e instanceof us(e).Element:!1}function gn(e){return U1()?e instanceof HTMLElement||e instanceof us(e).HTMLElement:!1}function P2(e){return!U1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof us(e).ShadowRoot}const wse=new Set(["inline","contents"]);function am(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=As(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!wse.has(o)}const Ise=new Set(["table","td","th"]);function _se(e){return Ise.has(_a(e))}const Tse=[":popover-open",":modal"];function F1(e){return Tse.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ase=["transform","translate","scale","rotate","perspective"],kse=["transform","translate","scale","rotate","perspective","filter"],Mse=["paint","layout","strict","content"];function wC(e){const t=B1(),n=Ut(e)?As(e):e;return Ase.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||kse.some(s=>(n.willChange||"").includes(s))||Mse.some(s=>(n.contain||"").includes(s))}function Nse(e){let t=hr(e);for(;gn(t)&&!lr(t);){if(wC(t))return t;if(F1(t))return null;t=hr(t)}return null}function B1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Rse=new Set(["html","body","#document"]);function lr(e){return Rse.has(_a(e))}function As(e){return us(e).getComputedStyle(e)}function V1(e){return Ut(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hr(e){if(_a(e)==="html")return e;const t=e.assignedSlot||e.parentNode||P2(e)&&e.host||Go(e);return P2(t)?t.host:t}function f_(e){const t=hr(e);return lr(t)?e.ownerDocument?e.ownerDocument.body:e.body:gn(t)&&am(t)?t:f_(t)}function na(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=f_(e),r=o===((s=e.ownerDocument)==null?void 0:s.body),a=us(o);if(r){const l=L2(a);return t.concat(a,a.visualViewport||[],am(o)?o:[],l&&n?na(l):[])}return t.concat(o,na(o,[],n))}function L2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function co(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Pn(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&P2(n)){let s=t;for(;s;){if(e===s)return!0;s=s.parentNode||s.host}}return!1}function p_(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function h_(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:s}=t;return n+"/"+s}).join(" "):navigator.userAgent}function g_(e){return e.mozInputSource===0&&e.isTrusted?!0:O2()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function IC(e){return Lse()?!1:!O2()&&e.width===0&&e.height===0||O2()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function v_(){return/apple/i.test(navigator.vendor)}function O2(){const e=/android/i;return e.test(p_())||e.test(h_())}function Pse(){return p_().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Lse(){return h_().includes("jsdom/")}function ad(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function Ose(e){return"nativeEvent"in e}function Dse(e){return e.matches("html,body")}function On(e){return(e==null?void 0:e.ownerDocument)||document}function wg(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function zr(e){return"composedPath"in e?e.composedPath()[0]:e.target}const jse="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function _C(e){return gn(e)&&e.matches(jse)}function Ln(e){e.preventDefault(),e.stopPropagation()}function C_(e){return e?e.getAttribute("role")==="combobox"&&_C(e):!1}const Use=["top","right","bottom","left"],da=Math.min,Ss=Math.max,vp=Math.round,Mc=Math.floor,Uo=e=>({x:e,y:e}),Fse={left:"right",right:"left",bottom:"top",top:"bottom"},Bse={start:"end",end:"start"};function D2(e,t,n){return Ss(e,da(t,n))}function Ki(e,t){return typeof e=="function"?e(t):e}function ma(e){return e.split("-")[0]}function _l(e){return e.split("-")[1]}function y_(e){return e==="x"?"y":"x"}function TC(e){return e==="y"?"height":"width"}const Vse=new Set(["top","bottom"]);function ar(e){return Vse.has(ma(e))?"y":"x"}function AC(e){return y_(ar(e))}function Hse(e,t,n){n===void 0&&(n=!1);const s=_l(e),o=AC(e),r=TC(o);let a=o==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(a=Cp(a)),[a,Cp(a)]}function zse(e){const t=Cp(e);return[j2(e),t,j2(t)]}function j2(e){return e.replace(/start|end/g,t=>Bse[t])}const r6=["left","right"],a6=["right","left"],Gse=["top","bottom"],Wse=["bottom","top"];function $se(e,t,n){switch(e){case"top":case"bottom":return n?t?a6:r6:t?r6:a6;case"left":case"right":return t?Gse:Wse;default:return[]}}function qse(e,t,n,s){const o=_l(e);let r=$se(ma(e),n==="start",s);return o&&(r=r.map(a=>a+"-"+o),t&&(r=r.concat(r.map(j2)))),r}function Cp(e){return e.replace(/left|right|bottom|top/g,t=>Fse[t])}function Kse(e){return{top:0,right:0,bottom:0,left:0,...e}}function b_(e){return typeof e!="number"?Kse(e):{top:e,right:e,bottom:e,left:e}}function yp(e){const{x:t,y:n,width:s,height:o}=e;return{width:s,height:o,top:n,left:t,right:t+s,bottom:n+o,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Zse=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],bp=Zse.join(","),x_=typeof Element>"u",ll=x_?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,xp=!x_&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Sp=function e(t,n){var s;n===void 0&&(n=!0);var o=t==null||(s=t.getAttribute)===null||s===void 0?void 0:s.call(t,"inert"),r=o===""||o==="true",a=r||n&&t&&e(t.parentNode);return a},Yse=function(t){var n,s=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return s===""||s==="true"},Qse=function(t,n,s){if(Sp(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(bp));return n&&ll.call(t,bp)&&o.unshift(t),o=o.filter(s),o},Jse=function e(t,n,s){for(var o=[],r=Array.from(t);r.length;){var a=r.shift();if(!Sp(a,!1))if(a.tagName==="SLOT"){var l=a.assignedElements(),u=l.length?l:a.children,d=e(u,!0,s);s.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else{var m=ll.call(a,bp);m&&s.filter(a)&&(n||!t.includes(a))&&o.push(a);var f=a.shadowRoot||typeof s.getShadowRoot=="function"&&s.getShadowRoot(a),h=!Sp(f,!1)&&(!s.shadowRootFilter||s.shadowRootFilter(a));if(f&&h){var g=e(f===!0?a.children:f.children,!0,s);s.flatten?o.push.apply(o,g):o.push({scopeParent:a,candidates:g})}else r.unshift.apply(r,a.children)}}return o},S_=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},E_=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Yse(t))&&!S_(t)?0:t.tabIndex},Xse=function(t,n){var s=E_(t);return s<0&&n&&!S_(t)?0:s},eoe=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},w_=function(t){return t.tagName==="INPUT"},toe=function(t){return w_(t)&&t.type==="hidden"},noe=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(s){return s.tagName==="SUMMARY"});return n},soe=function(t,n){for(var s=0;s<t.length;s++)if(t[s].checked&&t[s].form===n)return t[s]},ooe=function(t){if(!t.name)return!0;var n=t.form||xp(t),s=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=s(window.CSS.escape(t.name));else try{o=s(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var r=soe(o,t.form);return!r||r===t},roe=function(t){return w_(t)&&t.type==="radio"},aoe=function(t){return roe(t)&&!ooe(t)},ioe=function(t){var n,s=t&&xp(t),o=(n=s)===null||n===void 0?void 0:n.host,r=!1;if(s&&s!==t){var a,l,u;for(r=!!((a=o)!==null&&a!==void 0&&(l=a.ownerDocument)!==null&&l!==void 0&&l.contains(o)||t!=null&&(u=t.ownerDocument)!==null&&u!==void 0&&u.contains(t));!r&&o;){var d,m,f;s=xp(o),o=(d=s)===null||d===void 0?void 0:d.host,r=!!((m=o)!==null&&m!==void 0&&(f=m.ownerDocument)!==null&&f!==void 0&&f.contains(o))}}return r},i6=function(t){var n=t.getBoundingClientRect(),s=n.width,o=n.height;return s===0&&o===0},coe=function(t,n){var s=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var r=ll.call(t,"details>summary:first-of-type"),a=r?t.parentElement:t;if(ll.call(a,"details:not([open]) *"))return!0;if(!s||s==="full"||s==="legacy-full"){if(typeof o=="function"){for(var l=t;t;){var u=t.parentElement,d=xp(t);if(u&&!u.shadowRoot&&o(u)===!0)return i6(t);t.assignedSlot?t=t.assignedSlot:!u&&d!==t.ownerDocument?t=d.host:t=u}t=l}if(ioe(t))return!t.getClientRects().length;if(s!=="legacy-full")return!0}else if(s==="non-zero-area")return i6(t);return!1},loe=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var s=0;s<n.children.length;s++){var o=n.children.item(s);if(o.tagName==="LEGEND")return ll.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},uoe=function(t,n){return!(n.disabled||Sp(n)||toe(n)||coe(n,t)||noe(n)||loe(n))},U2=function(t,n){return!(aoe(n)||E_(n)<0||!uoe(t,n))},doe=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},moe=function e(t){var n=[],s=[];return t.forEach(function(o,r){var a=!!o.scopeParent,l=a?o.scopeParent:o,u=Xse(l,a),d=a?e(o.candidates):l;u===0?a?n.push.apply(n,d):n.push(l):s.push({documentOrder:r,tabIndex:u,item:o,isScope:a,content:d})}),s.sort(eoe).reduce(function(o,r){return r.isScope?o.push.apply(o,r.content):o.push(r.content),o},[]).concat(n)},H1=function(t,n){n=n||{};var s;return n.getShadowRoot?s=Jse([t],n.includeContainer,{filter:U2.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:doe}):s=Qse(t,n.includeContainer,U2.bind(null,n)),moe(s)},foe=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ll.call(t,bp)===!1?!1:U2(n,t)};function c6(e,t,n){let{reference:s,floating:o}=e;const r=ar(t),a=AC(t),l=TC(a),u=ma(t),d=r==="y",m=s.x+s.width/2-o.width/2,f=s.y+s.height/2-o.height/2,h=s[l]/2-o[l]/2;let g;switch(u){case"top":g={x:m,y:s.y-o.height};break;case"bottom":g={x:m,y:s.y+s.height};break;case"right":g={x:s.x+s.width,y:f};break;case"left":g={x:s.x-o.width,y:f};break;default:g={x:s.x,y:s.y}}switch(_l(t)){case"start":g[a]-=h*(n&&d?-1:1);break;case"end":g[a]+=h*(n&&d?-1:1);break}return g}const poe=async(e,t,n)=>{const{placement:s="bottom",strategy:o="absolute",middleware:r=[],platform:a}=n,l=r.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:m,y:f}=c6(d,s,u),h=s,g={},C=0;for(let v=0;v<l.length;v++){const{name:y,fn:b}=l[v],{x:E,y:S,data:I,reset:_}=await b({x:m,y:f,initialPlacement:s,placement:h,strategy:o,middlewareData:g,rects:d,platform:a,elements:{reference:e,floating:t}});m=E??m,f=S??f,g={...g,[y]:{...g[y],...I}},_&&C<=50&&(C++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(d=_.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:o}):_.rects),{x:m,y:f}=c6(d,h,u)),v=-1)}return{x:m,y:f,placement:h,strategy:o,middlewareData:g}};async function id(e,t){var n;t===void 0&&(t={});const{x:s,y:o,platform:r,rects:a,elements:l,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:h=!1,padding:g=0}=Ki(t,e),C=b_(g),y=l[h?f==="floating"?"reference":"floating":f],b=yp(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(y)))==null||n?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:d,rootBoundary:m,strategy:u})),E=f==="floating"?{x:s,y:o,width:a.floating.width,height:a.floating.height}:a.reference,S=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),I=await(r.isElement==null?void 0:r.isElement(S))?await(r.getScale==null?void 0:r.getScale(S))||{x:1,y:1}:{x:1,y:1},_=yp(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:S,strategy:u}):E);return{top:(b.top-_.top+C.top)/I.y,bottom:(_.bottom-b.bottom+C.bottom)/I.y,left:(b.left-_.left+C.left)/I.x,right:(_.right-b.right+C.right)/I.x}}const hoe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:o,rects:r,platform:a,elements:l,middlewareData:u}=t,{element:d,padding:m=0}=Ki(e,t)||{};if(d==null)return{};const f=b_(m),h={x:n,y:s},g=AC(o),C=TC(g),v=await a.getDimensions(d),y=g==="y",b=y?"top":"left",E=y?"bottom":"right",S=y?"clientHeight":"clientWidth",I=r.reference[C]+r.reference[g]-h[g]-r.floating[C],_=h[g]-r.reference[g],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let A=T?T[S]:0;(!A||!await(a.isElement==null?void 0:a.isElement(T)))&&(A=l.floating[S]||r.floating[C]);const k=I/2-_/2,N=A/2-v[C]/2-1,P=da(f[b],N),V=da(f[E],N),U=P,K=A-v[C]-V,Q=A/2-v[C]/2+k,Z=D2(U,Q,K),Y=!u.arrow&&_l(o)!=null&&Q!==Z&&r.reference[C]/2-(Q<U?P:V)-v[C]/2<0,X=Y?Q<U?Q-U:Q-K:0;return{[g]:h[g]+X,data:{[g]:Z,centerOffset:Q-Z-X,...Y&&{alignmentOffset:X}},reset:Y}}}),goe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:o,middlewareData:r,rects:a,initialPlacement:l,platform:u,elements:d}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:v=!0,...y}=Ki(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const b=ma(o),E=ar(l),S=ma(l)===l,I=await(u.isRTL==null?void 0:u.isRTL(d.floating)),_=h||(S||!v?[Cp(l)]:zse(l)),T=C!=="none";!h&&T&&_.push(...qse(l,v,C,I));const A=[l,..._],k=await id(t,y),N=[];let P=((s=r.flip)==null?void 0:s.overflows)||[];if(m&&N.push(k[b]),f){const Q=Hse(o,a,I);N.push(k[Q[0]],k[Q[1]])}if(P=[...P,{placement:o,overflows:N}],!N.every(Q=>Q<=0)){var V,U;const Q=(((V=r.flip)==null?void 0:V.index)||0)+1,Z=A[Q];if(Z&&(!(f==="alignment"?E!==ar(Z):!1)||P.every($=>ar($.placement)===E?$.overflows[0]>0:!0)))return{data:{index:Q,overflows:P},reset:{placement:Z}};let Y=(U=P.filter(X=>X.overflows[0]<=0).sort((X,$)=>X.overflows[1]-$.overflows[1])[0])==null?void 0:U.placement;if(!Y)switch(g){case"bestFit":{var K;const X=(K=P.filter($=>{if(T){const ee=ar($.placement);return ee===E||ee==="y"}return!0}).map($=>[$.placement,$.overflows.filter(ee=>ee>0).reduce((ee,te)=>ee+te,0)]).sort(($,ee)=>$[1]-ee[1])[0])==null?void 0:K[0];X&&(Y=X);break}case"initialPlacement":Y=l;break}if(o!==Y)return{reset:{placement:Y}}}return{}}}};function l6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function u6(e){return Use.some(t=>e[t]>=0)}const voe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...o}=Ki(e,t);switch(s){case"referenceHidden":{const r=await id(t,{...o,elementContext:"reference"}),a=l6(r,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:u6(a)}}}case"escaped":{const r=await id(t,{...o,altBoundary:!0}),a=l6(r,n.floating);return{data:{escapedOffsets:a,escaped:u6(a)}}}default:return{}}}}},Coe=new Set(["left","top"]);async function yoe(e,t){const{placement:n,platform:s,elements:o}=e,r=await(s.isRTL==null?void 0:s.isRTL(o.floating)),a=ma(n),l=_l(n),u=ar(n)==="y",d=Coe.has(a)?-1:1,m=r&&u?-1:1,f=Ki(t,e);let{mainAxis:h,crossAxis:g,alignmentAxis:C}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof C=="number"&&(g=l==="end"?C*-1:C),u?{x:g*m,y:h*d}:{x:h*d,y:g*m}}const boe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:o,y:r,placement:a,middlewareData:l}=t,u=await yoe(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:o+u.x,y:r+u.y,data:{...u,placement:a}}}}},xoe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:o}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x:b,y:E}=y;return{x:b,y:E}}},...u}=Ki(e,t),d={x:n,y:s},m=await id(t,u),f=ar(ma(o)),h=y_(f);let g=d[h],C=d[f];if(r){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",E=g+m[y],S=g-m[b];g=D2(E,g,S)}if(a){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",E=C+m[y],S=C-m[b];C=D2(E,C,S)}const v=l.fn({...t,[h]:g,[f]:C});return{...v,data:{x:v.x-n,y:v.y-s,enabled:{[h]:r,[f]:a}}}}}},Soe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:o,rects:r,platform:a,elements:l}=t,{apply:u=()=>{},...d}=Ki(e,t),m=await id(t,d),f=ma(o),h=_l(o),g=ar(o)==="y",{width:C,height:v}=r.floating;let y,b;f==="top"||f==="bottom"?(y=f,b=h===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,y=h==="end"?"top":"bottom");const E=v-m.top-m.bottom,S=C-m.left-m.right,I=da(v-m[y],E),_=da(C-m[b],S),T=!t.middlewareData.shift;let A=I,k=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=S),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(A=E),T&&!h){const P=Ss(m.left,0),V=Ss(m.right,0),U=Ss(m.top,0),K=Ss(m.bottom,0);g?k=C-2*(P!==0||V!==0?P+V:Ss(m.left,m.right)):A=v-2*(U!==0||K!==0?U+K:Ss(m.top,m.bottom))}await u({...t,availableWidth:k,availableHeight:A});const N=await a.getDimensions(l.floating);return C!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function I_(e){const t=As(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const o=gn(e),r=o?e.offsetWidth:n,a=o?e.offsetHeight:s,l=vp(n)!==r||vp(s)!==a;return l&&(n=r,s=a),{width:n,height:s,$:l}}function kC(e){return Ut(e)?e:e.contextElement}function Vc(e){const t=kC(e);if(!gn(t))return Uo(1);const n=t.getBoundingClientRect(),{width:s,height:o,$:r}=I_(t);let a=(r?vp(n.width):n.width)/s,l=(r?vp(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Eoe=Uo(0);function __(e){const t=us(e);return!B1()||!t.visualViewport?Eoe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function woe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==us(e)?!1:t}function wi(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),r=kC(e);let a=Uo(1);t&&(s?Ut(s)&&(a=Vc(s)):a=Vc(e));const l=woe(r,n,s)?__(r):Uo(0);let u=(o.left+l.x)/a.x,d=(o.top+l.y)/a.y,m=o.width/a.x,f=o.height/a.y;if(r){const h=us(r),g=s&&Ut(s)?us(s):s;let C=h,v=L2(C);for(;v&&s&&g!==C;){const y=Vc(v),b=v.getBoundingClientRect(),E=As(v),S=b.left+(v.clientLeft+parseFloat(E.paddingLeft))*y.x,I=b.top+(v.clientTop+parseFloat(E.paddingTop))*y.y;u*=y.x,d*=y.y,m*=y.x,f*=y.y,u+=S,d+=I,C=us(v),v=L2(C)}}return yp({width:m,height:f,x:u,y:d})}function z1(e,t){const n=V1(e).scrollLeft;return t?t.left+n:wi(Go(e)).left+n}function T_(e,t){const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-z1(e,n),o=n.top+t.scrollTop;return{x:s,y:o}}function Ioe(e){let{elements:t,rect:n,offsetParent:s,strategy:o}=e;const r=o==="fixed",a=Go(s),l=t?F1(t.floating):!1;if(s===a||l&&r)return n;let u={scrollLeft:0,scrollTop:0},d=Uo(1);const m=Uo(0),f=gn(s);if((f||!f&&!r)&&((_a(s)!=="body"||am(a))&&(u=V1(s)),gn(s))){const g=wi(s);d=Vc(s),m.x=g.x+s.clientLeft,m.y=g.y+s.clientTop}const h=a&&!f&&!r?T_(a,u):Uo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+m.x+h.x,y:n.y*d.y-u.scrollTop*d.y+m.y+h.y}}function _oe(e){return Array.from(e.getClientRects())}function Toe(e){const t=Go(e),n=V1(e),s=e.ownerDocument.body,o=Ss(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=Ss(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+z1(e);const l=-n.scrollTop;return As(s).direction==="rtl"&&(a+=Ss(t.clientWidth,s.clientWidth)-o),{width:o,height:r,x:a,y:l}}const d6=25;function Aoe(e,t){const n=us(e),s=Go(e),o=n.visualViewport;let r=s.clientWidth,a=s.clientHeight,l=0,u=0;if(o){r=o.width,a=o.height;const m=B1();(!m||m&&t==="fixed")&&(l=o.offsetLeft,u=o.offsetTop)}const d=z1(s);if(d<=0){const m=s.ownerDocument,f=m.body,h=getComputedStyle(f),g=m.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,C=Math.abs(s.clientWidth-f.clientWidth-g);C<=d6&&(r-=C)}else d<=d6&&(r+=d);return{width:r,height:a,x:l,y:u}}const koe=new Set(["absolute","fixed"]);function Moe(e,t){const n=wi(e,!0,t==="fixed"),s=n.top+e.clientTop,o=n.left+e.clientLeft,r=gn(e)?Vc(e):Uo(1),a=e.clientWidth*r.x,l=e.clientHeight*r.y,u=o*r.x,d=s*r.y;return{width:a,height:l,x:u,y:d}}function m6(e,t,n){let s;if(t==="viewport")s=Aoe(e,n);else if(t==="document")s=Toe(Go(e));else if(Ut(t))s=Moe(t,n);else{const o=__(e);s={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return yp(s)}function A_(e,t){const n=hr(e);return n===t||!Ut(n)||lr(n)?!1:As(n).position==="fixed"||A_(n,t)}function Noe(e,t){const n=t.get(e);if(n)return n;let s=na(e,[],!1).filter(l=>Ut(l)&&_a(l)!=="body"),o=null;const r=As(e).position==="fixed";let a=r?hr(e):e;for(;Ut(a)&&!lr(a);){const l=As(a),u=wC(a);!u&&l.position==="fixed"&&(o=null),(r?!u&&!o:!u&&l.position==="static"&&!!o&&koe.has(o.position)||am(a)&&!u&&A_(e,a))?s=s.filter(m=>m!==a):o=l,a=hr(a)}return t.set(e,s),s}function Roe(e){let{element:t,boundary:n,rootBoundary:s,strategy:o}=e;const a=[...n==="clippingAncestors"?F1(t)?[]:Noe(t,this._c):[].concat(n),s],l=a[0],u=a.reduce((d,m)=>{const f=m6(t,m,o);return d.top=Ss(f.top,d.top),d.right=da(f.right,d.right),d.bottom=da(f.bottom,d.bottom),d.left=Ss(f.left,d.left),d},m6(t,l,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Poe(e){const{width:t,height:n}=I_(e);return{width:t,height:n}}function Loe(e,t,n){const s=gn(t),o=Go(t),r=n==="fixed",a=wi(e,!0,r,t);let l={scrollLeft:0,scrollTop:0};const u=Uo(0);function d(){u.x=z1(o)}if(s||!s&&!r)if((_a(t)!=="body"||am(o))&&(l=V1(t)),s){const g=wi(t,!0,r,t);u.x=g.x+t.clientLeft,u.y=g.y+t.clientTop}else o&&d();r&&!s&&o&&d();const m=o&&!s&&!r?T_(o,l):Uo(0),f=a.left+l.scrollLeft-u.x-m.x,h=a.top+l.scrollTop-u.y-m.y;return{x:f,y:h,width:a.width,height:a.height}}function Ig(e){return As(e).position==="static"}function f6(e,t){if(!gn(e)||As(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Go(e)===n&&(n=n.ownerDocument.body),n}function k_(e,t){const n=us(e);if(F1(e))return n;if(!gn(e)){let o=hr(e);for(;o&&!lr(o);){if(Ut(o)&&!Ig(o))return o;o=hr(o)}return n}let s=f6(e,t);for(;s&&_se(s)&&Ig(s);)s=f6(s,t);return s&&lr(s)&&Ig(s)&&!wC(s)?n:s||Nse(e)||n}const Ooe=async function(e){const t=this.getOffsetParent||k_,n=this.getDimensions,s=await n(e.floating);return{reference:Loe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Doe(e){return As(e).direction==="rtl"}const joe={convertOffsetParentRelativeRectToViewportRelativeRect:Ioe,getDocumentElement:Go,getClippingRect:Roe,getOffsetParent:k_,getElementRects:Ooe,getClientRects:_oe,getDimensions:Poe,getScale:Vc,isElement:Ut,isRTL:Doe};function M_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Uoe(e,t){let n=null,s;const o=Go(e);function r(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function a(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),r();const d=e.getBoundingClientRect(),{left:m,top:f,width:h,height:g}=d;if(l||t(),!h||!g)return;const C=Mc(f),v=Mc(o.clientWidth-(m+h)),y=Mc(o.clientHeight-(f+g)),b=Mc(m),S={rootMargin:-C+"px "+-v+"px "+-y+"px "+-b+"px",threshold:Ss(0,da(1,u))||1};let I=!0;function _(T){const A=T[0].intersectionRatio;if(A!==u){if(!I)return a();A?a(!1,A):s=setTimeout(()=>{a(!1,1e-7)},1e3)}A===1&&!M_(d,e.getBoundingClientRect())&&a(),I=!1}try{n=new IntersectionObserver(_,{...S,root:o.ownerDocument})}catch{n=new IntersectionObserver(_,S)}n.observe(e)}return a(!0),r}function Ta(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,d=kC(e),m=o||r?[...d?na(d):[],...na(t)]:[];m.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),r&&b.addEventListener("resize",n)});const f=d&&l?Uoe(d,n):null;let h=-1,g=null;a&&(g=new ResizeObserver(b=>{let[E]=b;E&&E.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(t)})),n()}),d&&!u&&g.observe(d),g.observe(t));let C,v=u?wi(e):null;u&&y();function y(){const b=wi(e);v&&!M_(v,b)&&n(),v=b,C=requestAnimationFrame(y)}return n(),()=>{var b;m.forEach(E=>{o&&E.removeEventListener("scroll",n),r&&E.removeEventListener("resize",n)}),f==null||f(),(b=g)==null||b.disconnect(),g=null,u&&cancelAnimationFrame(C)}}const Foe=boe,Boe=xoe,Voe=goe,Hoe=Soe,zoe=voe,p6=hoe,Goe=(e,t,n)=>{const s=new Map,o={platform:joe,...n},r={...o.platform,_c:s};return poe(e,t,{...o,platform:r})};var Woe=typeof document<"u",$oe=function(){},Mf=Woe?c.useLayoutEffect:$oe;function Ep(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Ep(e[s],t[s]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,o[s]))return!1;for(s=n;s--!==0;){const r=o[s];if(!(r==="_owner"&&e.$$typeof)&&!Ep(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function N_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function h6(e,t){const n=N_(e);return Math.round(t*n)/n}function _g(e){const t=c.useRef(e);return Mf(()=>{t.current=e}),t}function MC(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:o,elements:{reference:r,floating:a}={},transform:l=!0,whileElementsMounted:u,open:d}=e,[m,f]=c.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,g]=c.useState(s);Ep(h,s)||g(s);const[C,v]=c.useState(null),[y,b]=c.useState(null),E=c.useCallback($=>{$!==T.current&&(T.current=$,v($))},[]),S=c.useCallback($=>{$!==A.current&&(A.current=$,b($))},[]),I=r||C,_=a||y,T=c.useRef(null),A=c.useRef(null),k=c.useRef(m),N=u!=null,P=_g(u),V=_g(o),U=_g(d),K=c.useCallback(()=>{if(!T.current||!A.current)return;const $={placement:t,strategy:n,middleware:h};V.current&&($.platform=V.current),Goe(T.current,A.current,$).then(ee=>{const te={...ee,isPositioned:U.current!==!1};Q.current&&!Ep(k.current,te)&&(k.current=te,Sd.flushSync(()=>{f(te)}))})},[h,t,n,V,U]);Mf(()=>{d===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[d]);const Q=c.useRef(!1);Mf(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Mf(()=>{if(I&&(T.current=I),_&&(A.current=_),I&&_){if(P.current)return P.current(I,_,K);K()}},[I,_,K,P,N]);const Z=c.useMemo(()=>({reference:T,floating:A,setReference:E,setFloating:S}),[E,S]),Y=c.useMemo(()=>({reference:I,floating:_}),[I,_]),X=c.useMemo(()=>{const $={position:n,left:0,top:0};if(!Y.floating)return $;const ee=h6(Y.floating,m.x),te=h6(Y.floating,m.y);return l?{...$,transform:"translate("+ee+"px, "+te+"px)",...N_(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ee,top:te}},[n,l,Y.floating,m.x,m.y]);return c.useMemo(()=>({...m,update:K,refs:Z,elements:Y,floatingStyles:X}),[m,K,Z,Y,X])}const qoe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:o}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?p6({element:s.current,padding:o}).fn(n):{}:s?p6({element:s,padding:o}).fn(n):{}}}},fa=(e,t)=>({...Foe(e),options:[e,t]}),pa=(e,t)=>({...Boe(e),options:[e,t]}),Tl=(e,t)=>({...Voe(e),options:[e,t]}),R_=(e,t)=>({...Hoe(e),options:[e,t]}),Koe=(e,t)=>({...zoe(e),options:[e,t]}),P_=(e,t)=>({...qoe(e),options:[e,t]});function cd(e){return c.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const L_={...VL},Zoe=L_.useInsertionEffect,Yoe=Zoe||(e=>e());function xn(e){const t=c.useRef(()=>{});return Yoe(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t.current==null?void 0:t.current(...s)},[])}const NC="ArrowUp",im="ArrowDown",sa="ArrowLeft",oa="ArrowRight";function ef(e,t,n){return Math.floor(e/t)!==n}function Lu(e,t){return t<0||t>=e.current.length}function Tg(e,t){return Bn(e,{disabledIndices:t})}function g6(e,t){return Bn(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Bn(e,t){let{startingIndex:n=-1,decrement:s=!1,disabledIndices:o,amount:r=1}=t===void 0?{}:t;const a=e.current;let l=n;do l+=s?-r:r;while(l>=0&&l<=a.length-1&&Nf(a,l,o));return l}function Qoe(e,t){let{event:n,orientation:s,loop:o,rtl:r,cols:a,disabledIndices:l,minIndex:u,maxIndex:d,prevIndex:m,stopEvent:f=!1}=t,h=m;if(n.key===NC){if(f&&Ln(n),m===-1)h=d;else if(h=Bn(e,{startingIndex:h,amount:a,decrement:!0,disabledIndices:l}),o&&(m-a<u||h<0)){const g=m%a,C=d%a,v=d-(C-g);C===g?h=d:h=C>g?v:v-a}Lu(e,h)&&(h=m)}if(n.key===im&&(f&&Ln(n),m===-1?h=u:(h=Bn(e,{startingIndex:m,amount:a,disabledIndices:l}),o&&m+a>d&&(h=Bn(e,{startingIndex:m%a-a,amount:a,disabledIndices:l}))),Lu(e,h)&&(h=m)),s==="both"){const g=Mc(m/a);n.key===(r?sa:oa)&&(f&&Ln(n),m%a!==a-1?(h=Bn(e,{startingIndex:m,disabledIndices:l}),o&&ef(h,a,g)&&(h=Bn(e,{startingIndex:m-m%a-1,disabledIndices:l}))):o&&(h=Bn(e,{startingIndex:m-m%a-1,disabledIndices:l})),ef(h,a,g)&&(h=m)),n.key===(r?oa:sa)&&(f&&Ln(n),m%a!==0?(h=Bn(e,{startingIndex:m,decrement:!0,disabledIndices:l}),o&&ef(h,a,g)&&(h=Bn(e,{startingIndex:m+(a-m%a),decrement:!0,disabledIndices:l}))):o&&(h=Bn(e,{startingIndex:m+(a-m%a),decrement:!0,disabledIndices:l})),ef(h,a,g)&&(h=m));const C=Mc(d/a)===g;Lu(e,h)&&(o&&C?h=n.key===(r?oa:sa)?d:Bn(e,{startingIndex:m-m%a-1,disabledIndices:l}):h=m)}return h}function Joe(e,t,n){const s=[];let o=0;return e.forEach((r,a)=>{let{width:l,height:u}=r,d=!1;for(n&&(o=0);!d;){const m=[];for(let f=0;f<l;f++)for(let h=0;h<u;h++)m.push(o+f+h*t);o%t+l<=t&&m.every(f=>s[f]==null)?(m.forEach(f=>{s[f]=a}),d=!0):o++}}),[...s]}function Xoe(e,t,n,s,o){if(e===-1)return-1;const r=n.indexOf(e),a=t[e];switch(o){case"tl":return r;case"tr":return a?r+a.width-1:r;case"bl":return a?r+(a.height-1)*s:r;case"br":return n.lastIndexOf(e)}}function ere(e,t){return t.flatMap((n,s)=>e.includes(n)?[s]:[])}function Nf(e,t,n){if(n)return n.includes(t);const s=e[t];return s==null||s.hasAttribute("disabled")||s.getAttribute("aria-disabled")==="true"}var $t=typeof document<"u"?c.useLayoutEffect:c.useEffect;let v6=!1,tre=0;const C6=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+tre++;function nre(){const[e,t]=c.useState(()=>v6?C6():void 0);return $t(()=>{e==null&&t(C6())},[]),c.useEffect(()=>{v6=!0},[]),e}const sre=L_.useId,cm=sre||nre,ore=c.forwardRef(function(t,n){const{context:{placement:s,elements:{floating:o},middlewareData:{arrow:r,shift:a}},width:l=14,height:u=7,tipRadius:d=0,strokeWidth:m=0,staticOffset:f,stroke:h,d:g,style:{transform:C,...v}={},...y}=t,b=cm(),[E,S]=c.useState(!1);if($t(()=>{if(!o)return;As(o).direction==="rtl"&&S(!0)},[o]),!o)return null;const[I,_]=s.split("-"),T=I==="top"||I==="bottom";let A=f;(T&&a!=null&&a.x||!T&&a!=null&&a.y)&&(A=null);const k=m*2,N=k/2,P=l/2*(d/-8+1),V=u/2*d/4,U=!!g,K=A&&_==="end"?"bottom":"top";let Q=A&&_==="end"?"right":"left";A&&E&&(Q=_==="end"?"left":"right");const Z=(r==null?void 0:r.x)!=null?A||r.x:"",Y=(r==null?void 0:r.y)!=null?A||r.y:"",X=g||"M0,0"+(" H"+l)+(" L"+(l-P)+","+(u-V))+(" Q"+l/2+","+u+" "+P+","+(u-V))+" Z",$={top:U?"rotate(180deg)":"",left:U?"rotate(90deg)":"rotate(-90deg)",bottom:U?"":"rotate(180deg)",right:U?"rotate(-90deg)":"rotate(90deg)"}[I];return i.jsxs("svg",{...y,"aria-hidden":!0,ref:n,width:U?l:l+k,height:l,viewBox:"0 0 "+l+" "+(u>l?u:l),style:{position:"absolute",pointerEvents:"none",[Q]:Z,[K]:Y,[I]:T||U?"100%":"calc(100% - "+k/2+"px)",transform:[$,C].filter(ee=>!!ee).join(" "),...v},children:[k>0&&i.jsx("path",{clipPath:"url(#"+b+")",fill:"none",stroke:h,strokeWidth:k+(g?0:1),d:X}),i.jsx("path",{stroke:k&&!g?y.fill:"none",d:X}),i.jsx("clipPath",{id:b,children:i.jsx("rect",{x:-N,y:N*(U?-1:1),width:l+k,height:l})})]})});function O_(){const e=new Map;return{emit(t,n){var s;(s=e.get(t))==null||s.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var s;e.set(t,((s=e.get(t))==null?void 0:s.filter(o=>o!==n))||[])}}}const D_=c.createContext(null),j_=c.createContext(null),Zi=()=>{var e;return((e=c.useContext(D_))==null?void 0:e.id)||null},Al=()=>c.useContext(j_);function rre(e){const t=cm(),n=Al(),o=Zi();return $t(()=>{if(!t)return;const r={id:t,parentId:o};return n==null||n.addNode(r),()=>{n==null||n.removeNode(r)}},[n,t,o]),t}function are(e){const{children:t,id:n}=e,s=Zi();return i.jsx(D_.Provider,{value:c.useMemo(()=>({id:n,parentId:s}),[n,s]),children:t})}function ire(e){const{children:t}=e,n=c.useRef([]),s=c.useCallback(a=>{n.current=[...n.current,a]},[]),o=c.useCallback(a=>{n.current=n.current.filter(l=>l!==a)},[]),r=c.useState(()=>O_())[0];return i.jsx(j_.Provider,{value:c.useMemo(()=>({nodesRef:n,addNode:s,removeNode:o,events:r}),[s,o,r]),children:t})}function Ii(e){return"data-floating-ui-"+e}function ws(e){const t=c.useRef(e);return $t(()=>{t.current=e}),t}const y6=Ii("safe-polygon");function Ag(e,t,n){return n&&!ad(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function cre(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,dataRef:o,events:r,elements:a}=e,{enabled:l=!0,delay:u=0,handleClose:d=null,mouseOnly:m=!1,restMs:f=0,move:h=!0}=t,g=Al(),C=Zi(),v=ws(d),y=ws(u),b=ws(n),E=c.useRef(),S=c.useRef(-1),I=c.useRef(),_=c.useRef(-1),T=c.useRef(!0),A=c.useRef(!1),k=c.useRef(()=>{}),N=c.useRef(!1),P=c.useCallback(()=>{var X;const $=(X=o.current.openEvent)==null?void 0:X.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[o]);c.useEffect(()=>{if(!l)return;function X($){let{open:ee}=$;ee||(clearTimeout(S.current),clearTimeout(_.current),T.current=!0,N.current=!1)}return r.on("openchange",X),()=>{r.off("openchange",X)}},[l,r]),c.useEffect(()=>{if(!l||!v.current||!n)return;function X(ee){P()&&s(!1,ee,"hover")}const $=On(a.floating).documentElement;return $.addEventListener("mouseleave",X),()=>{$.removeEventListener("mouseleave",X)}},[a.floating,n,s,l,v,P]);const V=c.useCallback(function(X,$,ee){$===void 0&&($=!0),ee===void 0&&(ee="hover");const te=Ag(y.current,"close",E.current);te&&!I.current?(clearTimeout(S.current),S.current=window.setTimeout(()=>s(!1,X,ee),te)):$&&(clearTimeout(S.current),s(!1,X,ee))},[y,s]),U=xn(()=>{k.current(),I.current=void 0}),K=xn(()=>{if(A.current){const X=On(a.floating).body;X.style.pointerEvents="",X.removeAttribute(y6),A.current=!1}}),Q=xn(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);c.useEffect(()=>{if(!l)return;function X(G){if(clearTimeout(S.current),T.current=!1,m&&!ad(E.current)||f>0&&!Ag(y.current,"open"))return;const ie=Ag(y.current,"open",E.current);ie?S.current=window.setTimeout(()=>{b.current||s(!0,G,"hover")},ie):n||s(!0,G,"hover")}function $(G){if(Q())return;k.current();const ie=On(a.floating);if(clearTimeout(_.current),N.current=!1,v.current&&o.current.floatingContext){n||clearTimeout(S.current),I.current=v.current({...o.current.floatingContext,tree:g,x:G.clientX,y:G.clientY,onClose(){K(),U(),Q()||V(G,!0,"safe-polygon")}});const ce=I.current;ie.addEventListener("mousemove",ce),k.current=()=>{ie.removeEventListener("mousemove",ce)};return}(E.current==="touch"?!Pn(a.floating,G.relatedTarget):!0)&&V(G)}function ee(G){Q()||o.current.floatingContext&&(v.current==null||v.current({...o.current.floatingContext,tree:g,x:G.clientX,y:G.clientY,onClose(){K(),U(),Q()||V(G)}})(G))}if(Ut(a.domReference)){var te;const G=a.domReference;return n&&G.addEventListener("mouseleave",ee),(te=a.floating)==null||te.addEventListener("mouseleave",ee),h&&G.addEventListener("mousemove",X,{once:!0}),G.addEventListener("mouseenter",X),G.addEventListener("mouseleave",$),()=>{var ie;n&&G.removeEventListener("mouseleave",ee),(ie=a.floating)==null||ie.removeEventListener("mouseleave",ee),h&&G.removeEventListener("mousemove",X),G.removeEventListener("mouseenter",X),G.removeEventListener("mouseleave",$)}}},[a,l,e,m,f,h,V,U,K,s,n,b,g,y,v,o,Q]),$t(()=>{var X;if(l&&n&&(X=v.current)!=null&&X.__options.blockPointerEvents&&P()){A.current=!0;const ee=a.floating;if(Ut(a.domReference)&&ee){var $;const te=On(a.floating).body;te.setAttribute(y6,"");const G=a.domReference,ie=g==null||($=g.nodesRef.current.find(xe=>xe.id===C))==null||($=$.context)==null?void 0:$.elements.floating;return ie&&(ie.style.pointerEvents=""),te.style.pointerEvents="none",G.style.pointerEvents="auto",ee.style.pointerEvents="auto",()=>{te.style.pointerEvents="",G.style.pointerEvents="",ee.style.pointerEvents=""}}}},[l,n,C,a,g,v,P]),$t(()=>{n||(E.current=void 0,N.current=!1,U(),K())},[n,U,K]),c.useEffect(()=>()=>{U(),clearTimeout(S.current),clearTimeout(_.current),K()},[l,a.domReference,U,K]);const Z=c.useMemo(()=>{function X($){E.current=$.pointerType}return{onPointerDown:X,onPointerEnter:X,onMouseMove($){const{nativeEvent:ee}=$;function te(){!T.current&&!b.current&&s(!0,ee,"hover")}m&&!ad(E.current)||n||f===0||N.current&&$.movementX**2+$.movementY**2<2||(clearTimeout(_.current),E.current==="touch"?te():(N.current=!0,_.current=window.setTimeout(te,f)))}}},[m,s,n,b,f]),Y=c.useMemo(()=>({onMouseEnter(){clearTimeout(S.current)},onMouseLeave(X){Q()||V(X.nativeEvent,!1)}}),[V,Q]);return c.useMemo(()=>l?{reference:Z,floating:Y}:{},[l,Z,Y])}let b6=0;function Za(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:s=!0,sync:o=!1}=t;s&&cancelAnimationFrame(b6);const r=()=>e==null?void 0:e.focus({preventScroll:n});o?r():b6=requestAnimationFrame(r)}function x6(e,t){var n;let s=[],o=(n=e.find(r=>r.id===t))==null?void 0:n.parentId;for(;o;){const r=e.find(a=>a.id===o);o=r==null?void 0:r.parentId,r&&(s=s.concat(r))}return s}function Hc(e,t){let n=e.filter(o=>{var r;return o.parentId===t&&((r=o.context)==null?void 0:r.open)}),s=n;for(;s.length;)s=e.filter(o=>{var r;return(r=s)==null?void 0:r.some(a=>{var l;return o.parentId===a.id&&((l=o.context)==null?void 0:l.open)})}),n=n.concat(s);return n}function lre(e,t){let n,s=-1;function o(r,a){a>s&&(n=r,s=a),Hc(e,r).forEach(u=>{o(u.id,a+1)})}return o(t,0),e.find(r=>r.id===n)}let pc=new WeakMap,tf=new WeakSet,nf={},kg=0;const ure=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,U_=e=>e&&(e.host||U_(e.parentNode)),dre=(e,t)=>t.map(n=>{if(e.contains(n))return n;const s=U_(n);return e.contains(s)?s:null}).filter(n=>n!=null);function mre(e,t,n,s){const o="data-floating-ui-inert",r=s?"inert":n?"aria-hidden":null,a=dre(t,e),l=new Set,u=new Set(a),d=[];nf[o]||(nf[o]=new WeakMap);const m=nf[o];a.forEach(f),h(t),l.clear();function f(g){!g||l.has(g)||(l.add(g),g.parentNode&&f(g.parentNode))}function h(g){!g||u.has(g)||[].forEach.call(g.children,C=>{if(_a(C)!=="script")if(l.has(C))h(C);else{const v=r?C.getAttribute(r):null,y=v!==null&&v!=="false",b=pc.get(C)||0,E=r?b+1:b,S=(m.get(C)||0)+1;pc.set(C,E),m.set(C,S),d.push(C),E===1&&y&&tf.add(C),S===1&&C.setAttribute(o,""),!y&&r&&C.setAttribute(r,"true")}})}return kg++,()=>{d.forEach(g=>{const C=pc.get(g)||0,v=r?C-1:C,y=(m.get(g)||0)-1;pc.set(g,v),m.set(g,y),v||(!tf.has(g)&&r&&g.removeAttribute(r),tf.delete(g)),y||g.removeAttribute(o)}),kg--,kg||(pc=new WeakMap,pc=new WeakMap,tf=new WeakSet,nf={})}}function S6(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=On(e[0]).body;return mre(e.concat(Array.from(s.querySelectorAll("[aria-live]"))),s,t,n)}const G1=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function F_(e,t){const n=H1(e,G1());t==="prev"&&n.reverse();const s=n.indexOf(co(On(e)));return n.slice(s+1)[0]}function B_(){return F_(document.body,"next")}function V_(){return F_(document.body,"prev")}function Ou(e,t){const n=t||e.currentTarget,s=e.relatedTarget;return!s||!Pn(n,s)}function fre(e){H1(e,G1()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function E6(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const s=n.dataset.tabindex;delete n.dataset.tabindex,s?n.setAttribute("tabindex",s):n.removeAttribute("tabindex")})}const W1={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let pre;function w6(e){e.key==="Tab"&&(e.target,clearTimeout(pre))}const wp=c.forwardRef(function(t,n){const[s,o]=c.useState();$t(()=>(v_()&&o("button"),document.addEventListener("keydown",w6),()=>{document.removeEventListener("keydown",w6)}),[]);const r={ref:n,tabIndex:0,role:s,"aria-hidden":s?void 0:!0,[Ii("focus-guard")]:"",style:W1};return i.jsx("span",{...t,...r})}),H_=c.createContext(null),I6=Ii("portal");function hre(e){e===void 0&&(e={});const{id:t,root:n}=e,s=cm(),o=z_(),[r,a]=c.useState(null),l=c.useRef(null);return $t(()=>()=>{r==null||r.remove(),queueMicrotask(()=>{l.current=null})},[r]),$t(()=>{if(!s||l.current)return;const u=t?document.getElementById(t):null;if(!u)return;const d=document.createElement("div");d.id=s,d.setAttribute(I6,""),u.appendChild(d),l.current=d,a(d)},[t,s]),$t(()=>{if(n===null||!s||l.current)return;let u=n||(o==null?void 0:o.portalNode);u&&!Ut(u)&&(u=u.current),u=u||document.body;let d=null;t&&(d=document.createElement("div"),d.id=t,u.appendChild(d));const m=document.createElement("div");m.id=s,m.setAttribute(I6,""),u=d||u,u.appendChild(m),l.current=m,a(m)},[t,n,s,o]),r}function kl(e){const{children:t,id:n,root:s,preserveTabOrder:o=!0}=e,r=hre({id:n,root:s}),[a,l]=c.useState(null),u=c.useRef(null),d=c.useRef(null),m=c.useRef(null),f=c.useRef(null),h=a==null?void 0:a.modal,g=a==null?void 0:a.open,C=!!a&&!a.modal&&a.open&&o&&!!(s||r);return c.useEffect(()=>{if(!r||!o||h)return;function v(y){r&&Ou(y)&&(y.type==="focusin"?E6:fre)(r)}return r.addEventListener("focusin",v,!0),r.addEventListener("focusout",v,!0),()=>{r.removeEventListener("focusin",v,!0),r.removeEventListener("focusout",v,!0)}},[r,o,h]),c.useEffect(()=>{r&&(g||E6(r))},[g,r]),i.jsxs(H_.Provider,{value:c.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:u,afterOutsideRef:d,beforeInsideRef:m,afterInsideRef:f,portalNode:r,setFocusManagerState:l}),[o,r]),children:[C&&r&&i.jsx(wp,{"data-type":"outside",ref:u,onFocus:v=>{if(Ou(v,r)){var y;(y=m.current)==null||y.focus()}else{const b=V_()||(a==null?void 0:a.domReference);b==null||b.focus()}}}),C&&r&&i.jsx("span",{"aria-owns":r.id,style:W1}),r&&Sd.createPortal(t,r),C&&r&&i.jsx(wp,{"data-type":"outside",ref:d,onFocus:v=>{if(Ou(v,r)){var y;(y=f.current)==null||y.focus()}else{const b=B_()||(a==null?void 0:a.domReference);b==null||b.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,v.nativeEvent,"focus-out"))}}})]})}const z_=()=>c.useContext(H_),F2="data-floating-ui-focusable";function B2(e){return e?e.hasAttribute(F2)?e:e.querySelector("["+F2+"]")||e:null}const gre=20;let Ya=[];function Mg(e){Ya=Ya.filter(t=>t.isConnected),e&&_a(e)!=="body"&&(Ya.push(e),Ya.length>gre&&(Ya=Ya.slice(-20)))}function _6(){return Ya.slice().reverse().find(e=>e.isConnected)}function vre(e){const t=G1();return foe(e,t)?e:H1(e,t)[0]||e}const Cre=c.forwardRef(function(t,n){return i.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:W1})});function $1(e){const{context:t,children:n,disabled:s=!1,order:o=["content"],guards:r=!0,initialFocus:a=0,returnFocus:l=!0,restoreFocus:u=!1,modal:d=!0,visuallyHiddenDismiss:m=!1,closeOnFocusOut:f=!0,outsideElementsInert:h=!1}=e,{open:g,onOpenChange:C,events:v,dataRef:y,elements:{domReference:b,floating:E}}=t,S=xn(()=>{var oe;return(oe=y.current.floatingContext)==null?void 0:oe.nodeId}),I=typeof a=="number"&&a<0,_=C_(b)&&I,T=ure(),A=T?r:!0,k=!A||T&&h,N=ws(o),P=ws(a),V=ws(l),U=Al(),K=z_(),Q=c.useRef(null),Z=c.useRef(null),Y=c.useRef(!1),X=c.useRef(!1),$=c.useRef(-1),ee=K!=null,te=B2(E),G=xn(function(oe){return oe===void 0&&(oe=te),oe?H1(oe,G1()):[]}),ie=xn(oe=>{const le=G(oe);return N.current.map(J=>b&&J==="reference"?b:te&&J==="floating"?te:le).filter(Boolean).flat()});c.useEffect(()=>{if(s||!d)return;function oe(J){if(J.key==="Tab"){Pn(te,co(On(te)))&&G().length===0&&!_&&Ln(J);const Ce=ie(),Pe=zr(J);N.current[0]==="reference"&&Pe===b&&(Ln(J),J.shiftKey?Za(Ce[Ce.length-1]):Za(Ce[1])),N.current[1]==="floating"&&Pe===te&&J.shiftKey&&(Ln(J),Za(Ce[0]))}}const le=On(te);return le.addEventListener("keydown",oe),()=>{le.removeEventListener("keydown",oe)}},[s,b,te,d,N,_,G,ie]),c.useEffect(()=>{if(s||!E)return;function oe(le){const J=zr(le),Pe=G().indexOf(J);Pe!==-1&&($.current=Pe)}return E.addEventListener("focusin",oe),()=>{E.removeEventListener("focusin",oe)}},[s,E,G]),c.useEffect(()=>{if(s||!f)return;function oe(){X.current=!0,setTimeout(()=>{X.current=!1})}function le(J){const Ce=J.relatedTarget;queueMicrotask(()=>{const Pe=S(),qe=!(Pn(b,Ce)||Pn(E,Ce)||Pn(Ce,E)||Pn(K==null?void 0:K.portalNode,Ce)||Ce!=null&&Ce.hasAttribute(Ii("focus-guard"))||U&&(Hc(U.nodesRef.current,Pe).find(Xe=>{var et,fe;return Pn((et=Xe.context)==null?void 0:et.elements.floating,Ce)||Pn((fe=Xe.context)==null?void 0:fe.elements.domReference,Ce)})||x6(U.nodesRef.current,Pe).find(Xe=>{var et,fe,Ee;return[(et=Xe.context)==null?void 0:et.elements.floating,B2((fe=Xe.context)==null?void 0:fe.elements.floating)].includes(Ce)||((Ee=Xe.context)==null?void 0:Ee.elements.domReference)===Ce})));if(u&&qe&&co(On(te))===On(te).body){gn(te)&&te.focus();const Xe=$.current,et=G(),fe=et[Xe]||et[et.length-1]||te;gn(fe)&&fe.focus()}(_||!d)&&Ce&&qe&&!X.current&&Ce!==_6()&&(Y.current=!0,C(!1,J,"focus-out"))})}if(E&&gn(b))return b.addEventListener("focusout",le),b.addEventListener("pointerdown",oe),E.addEventListener("focusout",le),()=>{b.removeEventListener("focusout",le),b.removeEventListener("pointerdown",oe),E.removeEventListener("focusout",le)}},[s,b,E,te,d,U,K,C,f,u,G,_,S]);const xe=c.useRef(null),ce=c.useRef(null),ae=cd([xe,K==null?void 0:K.beforeInsideRef]),Se=cd([ce,K==null?void 0:K.afterInsideRef]);c.useEffect(()=>{var oe;if(s||!E)return;const le=Array.from((K==null||(oe=K.portalNode)==null?void 0:oe.querySelectorAll("["+Ii("portal")+"]"))||[]),J=U&&!d?x6(U==null?void 0:U.nodesRef.current,S()).map(qe=>{var Xe;return(Xe=qe.context)==null?void 0:Xe.elements.floating}):[],Ce=[E,...le,...J,Q.current,Z.current,xe.current,ce.current,K==null?void 0:K.beforeOutsideRef.current,K==null?void 0:K.afterOutsideRef.current,N.current.includes("reference")||_?b:null].filter(qe=>qe!=null),Pe=d||_?S6(Ce,!k,k):S6(Ce);return()=>{Pe()}},[s,b,E,d,N,K,_,A,k,U,S]),$t(()=>{if(s||!gn(te))return;const oe=On(te),le=co(oe);queueMicrotask(()=>{const J=ie(te),Ce=P.current,Pe=(typeof Ce=="number"?J[Ce]:Ce.current)||te,qe=Pn(te,le);!I&&!qe&&g&&Za(Pe,{preventScroll:Pe===te})})},[s,g,te,I,ie,P]),$t(()=>{if(s||!te)return;let oe=!1;const le=On(te),J=co(le);let Pe=y.current.openEvent;Mg(J);function qe(fe){let{open:Ee,reason:Ae,event:Ye,nested:De}=fe;Ee&&(Pe=Ye),Ae==="escape-key"&&b&&Mg(b),["hover","safe-polygon"].includes(Ae)&&Ye.type==="mouseleave"&&(Y.current=!0),Ae==="outside-press"&&(De?(Y.current=!1,oe=!0):Y.current=!(g_(Ye)||IC(Ye)))}v.on("openchange",qe);const Xe=le.createElement("span");Xe.setAttribute("tabindex","-1"),Xe.setAttribute("aria-hidden","true"),Object.assign(Xe.style,W1),ee&&b&&b.insertAdjacentElement("afterend",Xe);function et(){return typeof V.current=="boolean"?_6()||Xe:V.current.current||Xe}return()=>{v.off("openchange",qe);const fe=co(le),Ee=Pn(E,fe)||U&&Hc(U.nodesRef.current,S()).some(De=>{var Ke;return Pn((Ke=De.context)==null?void 0:Ke.elements.floating,fe)});(Ee||Pe&&["click","mousedown"].includes(Pe.type))&&b&&Mg(b);const Ye=et();queueMicrotask(()=>{const De=vre(Ye);V.current&&!Y.current&&gn(De)&&(!(De!==fe&&fe!==le.body)||Ee)&&De.focus({preventScroll:oe}),Xe.remove()})}},[s,E,te,V,y,v,U,ee,b,S]),c.useEffect(()=>{queueMicrotask(()=>{Y.current=!1})},[s]),$t(()=>{if(!s&&K)return K.setFocusManagerState({modal:d,closeOnFocusOut:f,open:g,onOpenChange:C,domReference:b}),()=>{K.setFocusManagerState(null)}},[s,K,d,g,C,f,b]),$t(()=>{if(s||!te||typeof MutationObserver!="function"||I)return;const oe=()=>{const J=te.getAttribute("tabindex"),Ce=G(),Pe=co(On(E)),qe=Ce.indexOf(Pe);qe!==-1&&($.current=qe),N.current.includes("floating")||Pe!==b&&Ce.length===0?J!=="0"&&te.setAttribute("tabindex","0"):J!=="-1"&&te.setAttribute("tabindex","-1")};oe();const le=new MutationObserver(oe);return le.observe(te,{childList:!0,subtree:!0,attributes:!0}),()=>{le.disconnect()}},[s,E,te,b,N,G,I]);function Me(oe){return s||!m||!d?null:i.jsx(Cre,{ref:oe==="start"?Q:Z,onClick:le=>C(!1,le.nativeEvent),children:typeof m=="string"?m:"Dismiss"})}const Oe=!s&&A&&(d?!_:!0)&&(ee||d);return i.jsxs(i.Fragment,{children:[Oe&&i.jsx(wp,{"data-type":"inside",ref:ae,onFocus:oe=>{if(d){const J=ie();Za(o[0]==="reference"?J[0]:J[J.length-1])}else if(K!=null&&K.preserveTabOrder&&K.portalNode)if(Y.current=!1,Ou(oe,K.portalNode)){const J=B_()||b;J==null||J.focus()}else{var le;(le=K.beforeOutsideRef.current)==null||le.focus()}}}),!_&&Me("start"),n,Me("end"),Oe&&i.jsx(wp,{"data-type":"inside",ref:Se,onFocus:oe=>{if(d)Za(ie()[0]);else if(K!=null&&K.preserveTabOrder&&K.portalNode)if(f&&(Y.current=!0),Ou(oe,K.portalNode)){const J=V_()||b;J==null||J.focus()}else{var le;(le=K.afterOutsideRef.current)==null||le.focus()}}})]})}function T6(e){return gn(e.target)&&e.target.tagName==="BUTTON"}function A6(e){return _C(e)}function RC(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,dataRef:o,elements:{domReference:r}}=e,{enabled:a=!0,event:l="click",toggle:u=!0,ignoreMouse:d=!1,keyboardHandlers:m=!0,stickIfOpen:f=!0}=t,h=c.useRef(),g=c.useRef(!1),C=c.useMemo(()=>({onPointerDown(v){h.current=v.pointerType},onMouseDown(v){const y=h.current;v.button===0&&l!=="click"&&(ad(y,!0)&&d||(n&&u&&(!(o.current.openEvent&&f)||o.current.openEvent.type==="mousedown")?s(!1,v.nativeEvent,"click"):(v.preventDefault(),s(!0,v.nativeEvent,"click"))))},onClick(v){const y=h.current;if(l==="mousedown"&&h.current){h.current=void 0;return}ad(y,!0)&&d||(n&&u&&(!(o.current.openEvent&&f)||o.current.openEvent.type==="click")?s(!1,v.nativeEvent,"click"):s(!0,v.nativeEvent,"click"))},onKeyDown(v){h.current=void 0,!(v.defaultPrevented||!m||T6(v))&&(v.key===" "&&!A6(r)&&(v.preventDefault(),g.current=!0),v.key==="Enter"&&s(!(n&&u),v.nativeEvent,"click"))},onKeyUp(v){v.defaultPrevented||!m||T6(v)||A6(r)||v.key===" "&&g.current&&(g.current=!1,s(!(n&&u),v.nativeEvent,"click"))}}),[o,r,l,d,m,s,n,f,u]);return c.useMemo(()=>a?{reference:C}:{},[a,C])}const yre={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},bre={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},k6=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function lm(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,elements:o,dataRef:r}=e,{enabled:a=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:d="pointerdown",referencePress:m=!1,referencePressEvent:f="pointerdown",ancestorScroll:h=!1,bubbles:g,capture:C}=t,v=Al(),y=xn(typeof u=="function"?u:()=>!1),b=typeof u=="function"?y:u,E=c.useRef(!1),S=c.useRef(!1),{escapeKey:I,outsidePress:_}=k6(g),{escapeKey:T,outsidePress:A}=k6(C),k=c.useRef(!1),N=xn(Z=>{var Y;if(!n||!a||!l||Z.key!=="Escape"||k.current)return;const X=(Y=r.current.floatingContext)==null?void 0:Y.nodeId,$=v?Hc(v.nodesRef.current,X):[];if(!I&&(Z.stopPropagation(),$.length>0)){let ee=!0;if($.forEach(te=>{var G;if((G=te.context)!=null&&G.open&&!te.context.dataRef.current.__escapeKeyBubbles){ee=!1;return}}),!ee)return}s(!1,Ose(Z)?Z.nativeEvent:Z,"escape-key")}),P=xn(Z=>{var Y;const X=()=>{var $;N(Z),($=zr(Z))==null||$.removeEventListener("keydown",X)};(Y=zr(Z))==null||Y.addEventListener("keydown",X)}),V=xn(Z=>{var Y;const X=E.current;E.current=!1;const $=S.current;if(S.current=!1,d==="click"&&$||X||typeof b=="function"&&!b(Z))return;const ee=zr(Z),te="["+Ii("inert")+"]",G=On(o.floating).querySelectorAll(te);let ie=Ut(ee)?ee:null;for(;ie&&!lr(ie);){const Se=hr(ie);if(lr(Se)||!Ut(Se))break;ie=Se}if(G.length&&Ut(ee)&&!Dse(ee)&&!Pn(ee,o.floating)&&Array.from(G).every(Se=>!Pn(ie,Se)))return;if(gn(ee)&&Q){const Se=lr(ee),Me=As(ee),Oe=/auto|scroll/,oe=Se||Oe.test(Me.overflowX),le=Se||Oe.test(Me.overflowY),J=oe&&ee.clientWidth>0&&ee.scrollWidth>ee.clientWidth,Ce=le&&ee.clientHeight>0&&ee.scrollHeight>ee.clientHeight,Pe=Me.direction==="rtl",qe=Ce&&(Pe?Z.offsetX<=ee.offsetWidth-ee.clientWidth:Z.offsetX>ee.clientWidth),Xe=J&&Z.offsetY>ee.clientHeight;if(qe||Xe)return}const xe=(Y=r.current.floatingContext)==null?void 0:Y.nodeId,ce=v&&Hc(v.nodesRef.current,xe).some(Se=>{var Me;return wg(Z,(Me=Se.context)==null?void 0:Me.elements.floating)});if(wg(Z,o.floating)||wg(Z,o.domReference)||ce)return;const ae=v?Hc(v.nodesRef.current,xe):[];if(ae.length>0){let Se=!0;if(ae.forEach(Me=>{var Oe;if((Oe=Me.context)!=null&&Oe.open&&!Me.context.dataRef.current.__outsidePressBubbles){Se=!1;return}}),!Se)return}s(!1,Z,"outside-press")}),U=xn(Z=>{var Y;const X=()=>{var $;V(Z),($=zr(Z))==null||$.removeEventListener(d,X)};(Y=zr(Z))==null||Y.addEventListener(d,X)});c.useEffect(()=>{if(!n||!a)return;r.current.__escapeKeyBubbles=I,r.current.__outsidePressBubbles=_;let Z=-1;function Y(G){s(!1,G,"ancestor-scroll")}function X(){window.clearTimeout(Z),k.current=!0}function $(){Z=window.setTimeout(()=>{k.current=!1},B1()?5:0)}const ee=On(o.floating);l&&(ee.addEventListener("keydown",T?P:N,T),ee.addEventListener("compositionstart",X),ee.addEventListener("compositionend",$)),b&&ee.addEventListener(d,A?U:V,A);let te=[];return h&&(Ut(o.domReference)&&(te=na(o.domReference)),Ut(o.floating)&&(te=te.concat(na(o.floating))),!Ut(o.reference)&&o.reference&&o.reference.contextElement&&(te=te.concat(na(o.reference.contextElement)))),te=te.filter(G=>{var ie;return G!==((ie=ee.defaultView)==null?void 0:ie.visualViewport)}),te.forEach(G=>{G.addEventListener("scroll",Y,{passive:!0})}),()=>{l&&(ee.removeEventListener("keydown",T?P:N,T),ee.removeEventListener("compositionstart",X),ee.removeEventListener("compositionend",$)),b&&ee.removeEventListener(d,A?U:V,A),te.forEach(G=>{G.removeEventListener("scroll",Y)}),window.clearTimeout(Z)}},[r,o,l,b,d,n,s,h,a,I,_,N,T,P,V,A,U]),c.useEffect(()=>{E.current=!1},[b,d]);const K=c.useMemo(()=>({onKeyDown:N,...m&&{[yre[f]]:Z=>{s(!1,Z.nativeEvent,"reference-press")},...f!=="click"&&{onClick(Z){s(!1,Z.nativeEvent,"reference-press")}}}}),[N,s,m,f]),Q=c.useMemo(()=>({onKeyDown:N,onMouseDown(){S.current=!0},onMouseUp(){S.current=!0},[bre[d]]:()=>{E.current=!0}}),[N,d]);return c.useMemo(()=>a?{reference:K,floating:Q}:{},[a,K,Q])}function xre(e){const{open:t=!1,onOpenChange:n,elements:s}=e,o=cm(),r=c.useRef({}),[a]=c.useState(()=>O_()),l=Zi()!=null,[u,d]=c.useState(s.reference),m=xn((g,C,v)=>{r.current.openEvent=g?C:void 0,a.emit("openchange",{open:g,event:C,reason:v,nested:l}),n==null||n(g,C,v)}),f=c.useMemo(()=>({setPositionReference:d}),[]),h=c.useMemo(()=>({reference:u||s.reference||null,floating:s.floating||null,domReference:s.reference}),[u,s.reference,s.floating]);return c.useMemo(()=>({dataRef:r,open:t,onOpenChange:m,elements:h,events:a,floatingId:o,refs:f}),[t,m,h,a,o,f])}function Ml(e){e===void 0&&(e={});const{nodeId:t}=e,n=xre({...e,elements:{reference:null,floating:null,...e.elements}}),s=e.rootContext||n,o=s.elements,[r,a]=c.useState(null),[l,u]=c.useState(null),m=(o==null?void 0:o.domReference)||r,f=c.useRef(null),h=Al();$t(()=>{m&&(f.current=m)},[m]);const g=MC({...e,elements:{...o,...l&&{reference:l}}}),C=c.useCallback(S=>{const I=Ut(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;u(I),g.refs.setReference(I)},[g.refs]),v=c.useCallback(S=>{(Ut(S)||S===null)&&(f.current=S,a(S)),(Ut(g.refs.reference.current)||g.refs.reference.current===null||S!==null&&!Ut(S))&&g.refs.setReference(S)},[g.refs]),y=c.useMemo(()=>({...g.refs,setReference:v,setPositionReference:C,domReference:f}),[g.refs,v,C]),b=c.useMemo(()=>({...g.elements,domReference:m}),[g.elements,m]),E=c.useMemo(()=>({...g,...s,refs:y,elements:b,nodeId:t}),[g,y,b,t,s]);return $t(()=>{s.dataRef.current.floatingContext=E;const S=h==null?void 0:h.nodesRef.current.find(I=>I.id===t);S&&(S.context=E)}),c.useMemo(()=>({...g,context:E,refs:y,elements:b}),[g,y,b,E])}function Sre(e,t){t===void 0&&(t={});const{open:n,onOpenChange:s,events:o,dataRef:r,elements:a}=e,{enabled:l=!0,visibleOnly:u=!0}=t,d=c.useRef(!1),m=c.useRef(),f=c.useRef(!0);c.useEffect(()=>{if(!l)return;const g=us(a.domReference);function C(){!n&&gn(a.domReference)&&a.domReference===co(On(a.domReference))&&(d.current=!0)}function v(){f.current=!0}return g.addEventListener("blur",C),g.addEventListener("keydown",v,!0),()=>{g.removeEventListener("blur",C),g.removeEventListener("keydown",v,!0)}},[a.domReference,n,l]),c.useEffect(()=>{if(!l)return;function g(C){let{reason:v}=C;(v==="reference-press"||v==="escape-key")&&(d.current=!0)}return o.on("openchange",g),()=>{o.off("openchange",g)}},[o,l]),c.useEffect(()=>()=>{clearTimeout(m.current)},[]);const h=c.useMemo(()=>({onPointerDown(g){IC(g.nativeEvent)||(f.current=!1)},onMouseLeave(){d.current=!1},onFocus(g){if(d.current)return;const C=zr(g.nativeEvent);if(u&&Ut(C))try{if(v_()&&Pse())throw Error();if(!C.matches(":focus-visible"))return}catch{if(!f.current&&!_C(C))return}s(!0,g.nativeEvent,"focus")},onBlur(g){d.current=!1;const C=g.relatedTarget,v=g.nativeEvent,y=Ut(C)&&C.hasAttribute(Ii("focus-guard"))&&C.getAttribute("data-type")==="outside";m.current=window.setTimeout(()=>{var b;const E=co(a.domReference?a.domReference.ownerDocument:document);!C&&E===a.domReference||Pn((b=r.current.floatingContext)==null?void 0:b.refs.floating.current,E)||Pn(a.domReference,E)||y||s(!1,v,"focus")})}}),[r,a.domReference,s,u]);return c.useMemo(()=>l?{reference:h}:{},[l,h])}const M6="active",N6="selected";function Ng(e,t,n){const s=new Map,o=n==="item";let r=e;if(o&&e){const{[M6]:a,[N6]:l,...u}=e;r=u}return{...n==="floating"&&{tabIndex:-1,[F2]:""},...r,...t.map(a=>{const l=a?a[n]:null;return typeof l=="function"?e?l(e):null:l}).concat(e).reduce((a,l)=>(l&&Object.entries(l).forEach(u=>{let[d,m]=u;if(!(o&&[M6,N6].includes(d)))if(d.indexOf("on")===0){if(s.has(d)||s.set(d,[]),typeof m=="function"){var f;(f=s.get(d))==null||f.push(m),a[d]=function(){for(var h,g=arguments.length,C=new Array(g),v=0;v<g;v++)C[v]=arguments[v];return(h=s.get(d))==null?void 0:h.map(y=>y(...C)).find(y=>y!==void 0)}}}else a[d]=m}),a),{})}}function q1(e){e===void 0&&(e=[]);const t=e.map(l=>l==null?void 0:l.reference),n=e.map(l=>l==null?void 0:l.floating),s=e.map(l=>l==null?void 0:l.item),o=c.useCallback(l=>Ng(l,e,"reference"),t),r=c.useCallback(l=>Ng(l,e,"floating"),n),a=c.useCallback(l=>Ng(l,e,"item"),s);return c.useMemo(()=>({getReferenceProps:o,getFloatingProps:r,getItemProps:a}),[o,r,a])}function K1(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function R6(e,t){return K1(t,e===NC||e===im,e===sa||e===oa)}function Rg(e,t,n){return K1(t,e===im,n?e===sa:e===oa)||e==="Enter"||e===" "||e===""}function Ere(e,t,n){return K1(t,n?e===sa:e===oa,e===im)}function P6(e,t,n){return K1(t,n?e===oa:e===sa,e===NC)}function wre(e,t){const{open:n,onOpenChange:s,elements:o}=e,{listRef:r,activeIndex:a,onNavigate:l=()=>{},enabled:u=!0,selectedIndex:d=null,allowEscape:m=!1,loop:f=!1,nested:h=!1,rtl:g=!1,virtual:C=!1,focusItemOnOpen:v="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:b=!0,disabledIndices:E=void 0,orientation:S="vertical",cols:I=1,scrollItemIntoView:_=!0,virtualItemRef:T,itemSizes:A,dense:k=!1}=t,N=B2(o.floating),P=ws(N),V=Zi(),U=Al(),K=xn(()=>{l(Y.current===-1?null:Y.current)}),Q=C_(o.domReference),Z=c.useRef(v),Y=c.useRef(d??-1),X=c.useRef(null),$=c.useRef(!0),ee=c.useRef(K),te=c.useRef(!!o.floating),G=c.useRef(n),ie=c.useRef(!1),xe=c.useRef(!1),ce=ws(E),ae=ws(n),Se=ws(_),Me=ws(d),[Oe,oe]=c.useState(),[le,J]=c.useState(),Ce=xn(()=>{function Ae(Ke){C?(oe(Ke.id),U==null||U.events.emit("virtualfocus",Ke),T&&(T.current=Ke)):Za(Ke,{sync:ie.current,preventScroll:!0})}const Ye=r.current[Y.current];Ye&&Ae(Ye),(ie.current?Ke=>Ke():requestAnimationFrame)(()=>{const Ke=r.current[Y.current]||Ye;if(!Ke)return;Ye||Ae(Ke);const Be=Se.current;Be&&qe&&(xe.current||!$.current)&&(Ke.scrollIntoView==null||Ke.scrollIntoView(typeof Be=="boolean"?{block:"nearest",inline:"nearest"}:Be))})});$t(()=>{u&&(n&&o.floating?Z.current&&d!=null&&(xe.current=!0,Y.current=d,K()):te.current&&(Y.current=-1,ee.current()))},[u,n,o.floating,d,K]),$t(()=>{if(u&&n&&o.floating)if(a==null){if(ie.current=!1,Me.current!=null)return;if(te.current&&(Y.current=-1,Ce()),(!G.current||!te.current)&&Z.current&&(X.current!=null||Z.current===!0&&X.current==null)){let Ae=0;const Ye=()=>{r.current[0]==null?(Ae<2&&(Ae?requestAnimationFrame:queueMicrotask)(Ye),Ae++):(Y.current=X.current==null||Rg(X.current,S,g)||h?Tg(r,ce.current):g6(r,ce.current),X.current=null,K())};Ye()}}else Lu(r,a)||(Y.current=a,Ce(),xe.current=!1)},[u,n,o.floating,a,Me,h,r,S,g,K,Ce,ce]),$t(()=>{var Ae;if(!u||o.floating||!U||C||!te.current)return;const Ye=U.nodesRef.current,De=(Ae=Ye.find(ve=>ve.id===V))==null||(Ae=Ae.context)==null?void 0:Ae.elements.floating,Ke=co(On(o.floating)),Be=Ye.some(ve=>ve.context&&Pn(ve.context.elements.floating,Ke));De&&!Be&&$.current&&De.focus({preventScroll:!0})},[u,o.floating,U,V,C]),$t(()=>{if(!u||!U||!C||V)return;function Ae(Ye){J(Ye.id),T&&(T.current=Ye)}return U.events.on("virtualfocus",Ae),()=>{U.events.off("virtualfocus",Ae)}},[u,U,C,V,T]),$t(()=>{ee.current=K,G.current=n,te.current=!!o.floating}),$t(()=>{n||(X.current=null)},[n]);const Pe=a!=null,qe=c.useMemo(()=>{function Ae(De){if(!n)return;const Ke=r.current.indexOf(De);Ke!==-1&&Y.current!==Ke&&(Y.current=Ke,K())}return{onFocus(De){let{currentTarget:Ke}=De;ie.current=!0,Ae(Ke)},onClick:De=>{let{currentTarget:Ke}=De;return Ke.focus({preventScroll:!0})},...y&&{onMouseMove(De){let{currentTarget:Ke}=De;ie.current=!0,xe.current=!1,Ae(Ke)},onPointerLeave(De){let{pointerType:Ke}=De;if(!(!$.current||Ke==="touch")&&(ie.current=!0,Y.current=-1,K(),!C)){var Be;(Be=P.current)==null||Be.focus({preventScroll:!0})}}}}},[n,P,y,r,K,C]),Xe=xn(Ae=>{if($.current=!1,ie.current=!0,Ae.which===229||!ae.current&&Ae.currentTarget===P.current)return;if(h&&P6(Ae.key,S,g)){Ln(Ae),s(!1,Ae.nativeEvent,"list-navigation"),gn(o.domReference)&&(C?U==null||U.events.emit("virtualfocus",o.domReference):o.domReference.focus());return}const Ye=Y.current,De=Tg(r,E),Ke=g6(r,E);if(Q||(Ae.key==="Home"&&(Ln(Ae),Y.current=De,K()),Ae.key==="End"&&(Ln(Ae),Y.current=Ke,K())),I>1){const Be=A||Array.from({length:r.current.length},()=>({width:1,height:1})),ve=Joe(Be,I,k),ze=ve.findIndex(Ie=>Ie!=null&&!Nf(r.current,Ie,E)),yt=ve.reduce((Ie,Ze,at)=>Ze!=null&&!Nf(r.current,Ze,E)?at:Ie,-1),Ne=ve[Qoe({current:ve.map(Ie=>Ie!=null?r.current[Ie]:null)},{event:Ae,orientation:S,loop:f,rtl:g,cols:I,disabledIndices:ere([...E||r.current.map((Ie,Ze)=>Nf(r.current,Ze)?Ze:void 0),void 0],ve),minIndex:ze,maxIndex:yt,prevIndex:Xoe(Y.current>Ke?De:Y.current,Be,ve,I,Ae.key===im?"bl":Ae.key===(g?sa:oa)?"tr":"tl"),stopEvent:!0})];if(Ne!=null&&(Y.current=Ne,K()),S==="both")return}if(R6(Ae.key,S)){if(Ln(Ae),n&&!C&&co(Ae.currentTarget.ownerDocument)===Ae.currentTarget){Y.current=Rg(Ae.key,S,g)?De:Ke,K();return}Rg(Ae.key,S,g)?f?Y.current=Ye>=Ke?m&&Ye!==r.current.length?-1:De:Bn(r,{startingIndex:Ye,disabledIndices:E}):Y.current=Math.min(Ke,Bn(r,{startingIndex:Ye,disabledIndices:E})):f?Y.current=Ye<=De?m&&Ye!==-1?r.current.length:Ke:Bn(r,{startingIndex:Ye,decrement:!0,disabledIndices:E}):Y.current=Math.max(De,Bn(r,{startingIndex:Ye,decrement:!0,disabledIndices:E})),Lu(r,Y.current)&&(Y.current=-1),K()}}),et=c.useMemo(()=>C&&n&&Pe&&{"aria-activedescendant":le||Oe},[C,n,Pe,le,Oe]),fe=c.useMemo(()=>({"aria-orientation":S==="both"?void 0:S,...Q?{}:et,onKeyDown:Xe,onPointerMove(){$.current=!0}}),[et,Xe,S,Q]),Ee=c.useMemo(()=>{function Ae(De){v==="auto"&&g_(De.nativeEvent)&&(Z.current=!0)}function Ye(De){Z.current=v,v==="auto"&&IC(De.nativeEvent)&&(Z.current=!0)}return{...et,onKeyDown(De){$.current=!1;const Ke=De.key.startsWith("Arrow"),Be=["Home","End"].includes(De.key),ve=Ke||Be,ze=Ere(De.key,S,g),yt=P6(De.key,S,g),Ne=R6(De.key,S),Ie=(h?ze:Ne)||De.key==="Enter"||De.key.trim()==="";if(C&&n){const dt=U==null?void 0:U.nodesRef.current.find(Bt=>Bt.parentId==null),At=U&&dt?lre(U.nodesRef.current,dt.id):null;if(ve&&At&&T){const Bt=new KeyboardEvent("keydown",{key:De.key,bubbles:!0});if(ze||yt){var Ze,at;const Rs=((Ze=At.context)==null?void 0:Ze.elements.domReference)===De.currentTarget,Xs=yt&&!Rs?(at=At.context)==null?void 0:at.elements.domReference:ze?r.current.find(Ps=>(Ps==null?void 0:Ps.id)===Oe):null;Xs&&(Ln(De),Xs.dispatchEvent(Bt),J(void 0))}if((Ne||Be)&&At.context&&At.context.open&&At.parentId&&De.currentTarget!==At.context.elements.domReference){var Te;Ln(De),(Te=At.context.elements.domReference)==null||Te.dispatchEvent(Bt);return}}return Xe(De)}if(!(!n&&!b&&Ke)){if(Ie&&(X.current=h&&Ne?null:De.key),h){ze&&(Ln(De),n?(Y.current=Tg(r,ce.current),K()):s(!0,De.nativeEvent,"list-navigation"));return}Ne&&(d!=null&&(Y.current=d),Ln(De),!n&&b?s(!0,De.nativeEvent,"list-navigation"):Xe(De),n&&K())}},onFocus(){n&&!C&&(Y.current=-1,K())},onPointerDown:Ye,onPointerEnter:Ye,onMouseDown:Ae,onClick:Ae}},[Oe,et,Xe,ce,v,r,h,K,s,n,b,S,g,d,U,C,T]);return c.useMemo(()=>u?{reference:Ee,floating:fe,item:qe}:{},[u,Ee,fe,qe])}const Ire=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Z1(e,t){var n;t===void 0&&(t={});const{open:s,floatingId:o}=e,{enabled:r=!0,role:a="dialog"}=t,l=(n=Ire.get(a))!=null?n:a,u=cm(),m=Zi()!=null,f=c.useMemo(()=>l==="tooltip"||a==="label"?{["aria-"+(a==="label"?"labelledby":"describedby")]:s?o:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":l==="alertdialog"?"dialog":l,"aria-controls":s?o:void 0,...l==="listbox"&&{role:"combobox"},...l==="menu"&&{id:u},...l==="menu"&&m&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[l,o,m,s,u,a]),h=c.useMemo(()=>{const C={id:o,...l&&{role:l}};return l==="tooltip"||a==="label"?C:{...C,...l==="menu"&&{"aria-labelledby":u}}},[l,o,u,a]),g=c.useCallback(C=>{let{active:v,selected:y}=C;const b={role:"option",...v&&{id:o+"-option"}};switch(a){case"select":return{...b,"aria-selected":v&&y};case"combobox":return{...b,...v&&{"aria-selected":!0}}}return{}},[o,a]);return c.useMemo(()=>r?{reference:f,floating:h,item:g}:{},[r,f,h,g])}function _re(e,t){var n;const{open:s,dataRef:o}=e,{listRef:r,activeIndex:a,onMatch:l,onTypingChange:u,enabled:d=!0,findMatch:m=null,resetMs:f=750,ignoreKeys:h=[],selectedIndex:g=null}=t,C=c.useRef(),v=c.useRef(""),y=c.useRef((n=g??a)!=null?n:-1),b=c.useRef(null),E=xn(l),S=xn(u),I=ws(m),_=ws(h);$t(()=>{s&&(clearTimeout(C.current),b.current=null,v.current="")},[s]),$t(()=>{if(s&&v.current===""){var P;y.current=(P=g??a)!=null?P:-1}},[s,g,a]);const T=xn(P=>{P?o.current.typing||(o.current.typing=P,S(P)):o.current.typing&&(o.current.typing=P,S(P))}),A=xn(P=>{function V(Y,X,$){const ee=I.current?I.current(X,$):X.find(te=>(te==null?void 0:te.toLocaleLowerCase().indexOf($.toLocaleLowerCase()))===0);return ee?Y.indexOf(ee):-1}const U=r.current;if(v.current.length>0&&v.current[0]!==" "&&(V(U,U,v.current)===-1?T(!1):P.key===" "&&Ln(P)),U==null||_.current.includes(P.key)||P.key.length!==1||P.ctrlKey||P.metaKey||P.altKey)return;s&&P.key!==" "&&(Ln(P),T(!0)),U.every(Y=>{var X,$;return Y?((X=Y[0])==null?void 0:X.toLocaleLowerCase())!==(($=Y[1])==null?void 0:$.toLocaleLowerCase()):!0})&&v.current===P.key&&(v.current="",y.current=b.current),v.current+=P.key,clearTimeout(C.current),C.current=setTimeout(()=>{v.current="",y.current=b.current,T(!1)},f);const Q=y.current,Z=V(U,[...U.slice((Q||0)+1),...U.slice(0,(Q||0)+1)],v.current);Z!==-1?(E(Z),b.current=Z):P.key!==" "&&(v.current="",T(!1))}),k=c.useMemo(()=>({onKeyDown:A}),[A]),N=c.useMemo(()=>({onKeyDown:A,onKeyUp(P){P.key===" "&&T(!1)}}),[A,T]);return c.useMemo(()=>d?{reference:k,floating:N}:{},[d,k,N])}const Tre="(hover: hover) and (pointer: fine)";function Are(){return typeof window<"u"&&typeof window.matchMedia=="function"}function Pg(){return Are()?window.matchMedia(Tre):null}function G_(){let e=Pg();const t=()=>(e??(e=Pg()),(e==null?void 0:e.matches)??!1),n=()=>!1,s=o=>{e??(e=Pg());const r=e;return r?(r.addEventListener("change",o),()=>r.removeEventListener("change",o)):()=>{}};return c.useSyncExternalStore(s,t,n)}const kre=40,Mre=40;function Nre(e={}){const{defaultOpen:t=!1,placement:n="top",gap:s=6,open:o,onOpenChange:r,openDelay:a=kre,closeDelay:l=Mre,disabled:u=!1,disableOnTouch:d=!0,closeOnTrigger:m=!0}=e,[f,h]=c.useState(t),g=o??f,C=c.useCallback(V=>{r?r(V):h(V)},[r]),v=c.useMemo(()=>[fa(s),Tl({crossAxis:n.includes("-"),fallbackAxisSideDirection:"start",padding:s}),pa({padding:s})],[n,s]),y=Ml({placement:n,open:u?!1:g,onOpenChange:u?void 0:C,whileElementsMounted:Ta,middleware:v}),{context:b}=y,E=G_(),S=!u&&o===void 0&&(!d||E),I=cre(b,{move:!1,enabled:S,restMs:a,delay:{open:a,close:l}}),_=Sre(b,{enabled:S}),T=E?m:!1,A=lm(b,{enabled:!u,escapeKey:!0,referencePress:T!==!1,referencePressEvent:typeof T=="string"?T:"pointerdown"}),k=Z1(b,{role:"tooltip",enabled:!u}),N=q1([I,_,A,k]),P=c.useId();return c.useMemo(()=>({open:u?!1:g,setOpen:C,labelId:P,disabled:u,...N,...y}),[g,u,C,P,N,y])}const W_=c.createContext(null),$_=()=>{const e=c.useContext(W_);if(e===null)throw new Error("Tooltip components must be wrapped in <Tooltip />");return e};function Rre(e){const{children:t,...n}=e,s=Nre(n);return i.jsx(W_.Provider,{value:s,children:t})}const q_=c.forwardRef((e,t)=>{const{children:n,asChild:s=!1,...o}=e,r=$_(),a=c.isValidElement(n)&&n.props!==null&&typeof n.props=="object"&&"ref"in n.props?n.props.ref:void 0,l=cd([r.refs.setReference,t,a]),u=cd([g=>r.refs.setReference(g),t]),d={...o,...r.disabled?{}:{"aria-describedby":r.open?r.labelId:void 0}};let m;r.disabled?m=d:s&&c.isValidElement(n)?m=r.getReferenceProps({...d,...n.props,ref:l}):m=r.getReferenceProps(d);const f={...m,onBlur:g=>{var C;(C=m.onBlur)==null||C.call(m,g),r.setOpen(!1)}},h=()=>{if(!r.disabled)return r.open?"open":"closed"};if(s&&c.isValidElement(n)){const g=n;return c.cloneElement(g,{ref:l,...f,"data-tooltip-state":h()})}return i.jsx("button",{ref:u,type:"button",...f,"data-tooltip-state":h(),children:n})});q_.displayName="TooltipTrigger";const K_=c.forwardRef((e,t)=>{const{style:n,className:s,...o}=e,r=$_(),a=cd([r.refs.setFloating,t]);if(!(r.open&&!r.disabled))return null;const u=r.getFloatingProps({id:r.labelId,role:"tooltip",...o});return i.jsx(kl,{children:i.jsx("div",{ref:a,className:F("pointer-events-none w-max rounded-lg border border-white/20 bg-background-100 px-2 py-1 text-foreground-800 shadow-lg text-xs",ct.tooltip,s),style:{...r.floatingStyles,...n},...u,"data-tooltip-state":"open"})})});K_.displayName="TooltipContent";const Pre="SN:ROOT",Lre=c.createContext(null);function Z_(){return c.useContext(Lre)}const Y1=c.createContext(Pre);Y1.displayName="FocusContext";function Ore(){return c.useContext(Y1)}function iu(){}function Dre({focusable:e=!0,saveLastFocusedChild:t=!0,trackChildren:n=!1,autoRestoreFocus:s=!0,forceFocus:o=!1,isFocusBoundary:r=!1,focusBoundaryDirections:a,focusKey:l,preferredChildFocusKey:u,onEnterPress:d=iu,onEnterRelease:m=iu,onArrowPress:f=()=>!0,onArrowRelease:h=iu,onFocus:g=iu,onBlur:C=iu}){const v=Z_(),y=c.useCallback(Q=>{Q&&d(Q)},[d]),b=c.useCallback(()=>{m()},[m]),E=c.useCallback((Q,Z)=>f(Q,Z),[f]),S=c.useCallback(Q=>{h(Q)},[h]),I=c.useCallback((Q,Z)=>{g(Q,Z)},[g]),_=c.useCallback((Q,Z)=>{C(Q,Z)},[C]),T=c.useRef(null),[A,k]=c.useState(!1),[N,P]=c.useState(!1),V=Ore(),U=c.useMemo(()=>v?l??crypto.randomUUID():void 0,[l,v]),K=c.useCallback((Q={})=>{U&&(v==null||v.setFocus(U,Q))},[U,v]);return c.useEffect(()=>{const Q=T.current;return Q&&U&&(v==null||v.addFocusable({focusKey:U,node:Q,parentFocusKey:V,preferredChildFocusKey:u,onEnterPress:y,onEnterRelease:b,onArrowPress:E,onArrowRelease:S,onFocus:I,onBlur:_,onUpdateFocus:(Z=!1)=>k(Z),onUpdateHasFocusedChild:(Z=!1)=>P(Z),saveLastFocusedChild:t,trackChildren:n,isFocusBoundary:r,focusBoundaryDirections:a,autoRestoreFocus:s,forceFocus:o,focusable:e})),()=>{U&&(v==null||v.removeFocusable({focusKey:U}))}},[]),c.useEffect(()=>{const Q=T.current;Q&&U&&(v==null||v.updateFocusable(U,{node:Q,preferredChildFocusKey:u,focusable:e,isFocusBoundary:r,focusBoundaryDirections:a,onEnterPress:y,onEnterRelease:b,onArrowPress:E,onArrowRelease:S,onFocus:I,onBlur:_}))},[U,u,e,r,a,y,b,E,S,I,_,v]),{ref:T,focusSelf:K,focused:A,hasFocusedChild:N,focusKey:U}}function Y_(...e){return t=>{for(const n of e)n&&(typeof n=="function"?n(t):n.current=t)}}function Aa(e,...t){const n=Dre({onEnterPress:()=>{var o;(o=n.ref.current)==null||o.click()},onFocus:()=>{var o,r;(o=n.ref.current)==null||o.focus(),e.scrollIntoViewOnFocus&&((r=n.ref.current)==null||r.scrollIntoView({block:"nearest"}))},onBlur:()=>{var o;(o=n.ref.current)==null||o.blur()},...e}),s=Y_(...t,n.ref);return{focusable:n,refCallback:s}}const ld="relative flex items-center",oo="text-foreground-800 fill-foreground-800 active:text-foreground-600 active:fill-foreground-600 dark:active:text-foreground-650 dark:active:fill-foreground-650",L6="text-neutral-200 fill-neutral-200 active:text-neutral-300 active:fill-neutral-300 dark:text-neutral-800 dark:fill-neutral-800 dark:active:text-neutral-600 dark:active:fill-neutral-600",jre="text-foreground-250 fill-foreground-250 active:text-foreground-350 active:fill-foreground-350 dark:text-foreground-750 dark:fill-foreground-750 dark:active:text-foreground-650 dark:active:fill-foreground-650",Ure="text-accent-550 fill-accent-550 active:text-accent-450/80 active:fill-accent-450/80 dark:text-accent-850 dark:fill-accent-850 dark:active:text-accent-700 dark:active:fill-accent-700",cu="shadow-sm",O6="shadow-with-highlight-sm",Fre="text-muted-550 safe-hover:text-accent-450 dark:text-foreground-700 dark:active:text-foreground-800",Bre="bg-white/70 safe-hover:bg-accent-200 active:bg-accent-200/20 dark:bg-muted-550/30 dark:safe-hover:bg-background-100 dark:active:bg-background-200/20",Vre="border-[0.5px] border-transparent safe-hover:border-accent-400 dark:safe-hover:border-accent-650",Hre="text-accent-600 fill-accent-600 active:text-accent-400 active:fill-accent-400 dark:text-foreground-800 dark:fill-text-foreground-800 dark:active:text-foreground-900 dark:active:fill-foreground-900",zre="bg-accent-200 safe-hover:bg-accent-250 active:bg-accent-250 dark:bg-muted-350 dark:safe-hover:bg-muted-300 dark:active:bg-muted-300",Lg="bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-black/30 dark:active:bg-black/20",_i={default:`${oo} ${O6} bg-white/70 safe-hover:bg-white active:bg-white/60 dark:bg-muted-550/30 dark:safe-hover:bg-muted-550/40 dark:active:bg-muted-550/20`,strong:`${jre} ${cu} bg-background-800 safe-hover:bg-black active:bg-background-750 dark:bg-muted-400 dark:safe-hover:bg-muted-450 dark:active:bg-muted-400/80`,accent:`${Ure} bg-accent-250 safe-hover:bg-accent-300 active:bg-accent-200 dark:bg-accent-550 dark:safe-hover:bg-accent-450 dark:active:bg-accent-600/80`,"overlay-bright":`${oo} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"overlay-bright-inverted":`${oo} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed":`${oo} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed-inverted":`${oo} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"subtle-bright":`${oo} bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,"subtle-bright-inverted":`${oo} ${Lg}`,"subtle-dimmed":`${oo} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-black/30 dark:active:bg-black/20`,"subtle-dimmed-inverted":`${oo} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,acrylic:`${oo} ${cu} ${Lg}`,"acrylic-inverted":`${L6} ${cu} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,"acrylic-thin":`${oo} ${cu} ${Lg}`,"acrylic-thin-inverted":`${L6} ${cu} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,chip:`${Fre} ${Bre} ${O6} ${Vre}`,alert:"bg-system-red-600 safe-hover:bg-system-red-650 active:bg-system-red-550","composer-selected":`${Hre} ${zre}`},Q_={acrylic:`${Qs}`,"acrylic-inverted":`${Cee}`,"acrylic-thin":`${Zr}`,"acrylic-thin-inverted":`${xee}`};function Gre(e){return e in Q_}const Wre={start:"justify-start",center:"justify-center",end:"justify-end"},PC={"28-xxs":"text-sm","32-xs":"text-sm","36-sm":"text-sm","40-base":"text-sm","48-lg":"text-base","56-xl":"text-base","64-xxl":"text-base"},Br={"28-xxs":"gap-x-1.5","32-xs":"gap-x-1.5","36-sm":"gap-x-1.5","40-base":"gap-x-2","48-lg":"gap-x-3","56-xl":"gap-x-3","64-xxl":"gap-x-3"},LC={"28-xxs":`min-h-7 min-w-8 px-3 py-1 ${Br["28-xxs"]}`,"32-xs":`min-h-8 min-w-8 px-2.5 py-1 ${Br["32-xs"]}`,"36-sm":`min-h-9 min-w-9 px-2.5 py-1 ${Br["36-sm"]}`,"40-base":`min-h-10 min-w-10 px-3 py-2 ${Br["40-base"]}`,"48-lg":`min-h-12 min-w-12 px-3 py-2.5 ${Br["48-lg"]}`,"56-xl":`min-h-14 min-w-14 px-4 py-3.5 ${Br["56-xl"]}`,"64-xxl":`min-h-16 min-w-16 p-4 ${Br["64-xxl"]}`},$re={"28-xxs":"size-7","32-xs":"size-8","36-sm":"size-9","40-base":"size-10","48-lg":"size-12","56-xl":"size-14","64-xxl":"size-16"},V2={"28-xxs":"rounded-lg after:rounded-lg","32-xs":"rounded-lg after:rounded-lg","36-sm":"rounded-xl after:rounded-xl","40-base":"rounded-xl after:rounded-xl","48-lg":"rounded-3xl after:rounded-3xl","56-xl":"rounded-4xl after:rounded-4xl","64-xxl":"rounded-4xl after:rounded-4xl"},qre={none:"",weak:"after:border after:border-black/10 dark:after:border-white/10",regular:"after:border after:border-black/30 dark:after:border-white/30",strong:"after:border after:border-2 after:border-black/30 dark:after:border-white/30"},D6="rounded-full after:rounded-full",Kre="opacity-40 pointer-events-none",um="after:absolute after:inset-0 after:pointer-events-none after:border after:border-transparent after:contrast-more:border-2 outline-2 outline-offset-1 focus-visible:z-[1] focus-visible:outline focus-visible:outline-stroke-900",Zre=F("safe-hover:bg-background-800 dark:safe-hover:bg-white","focus-visible:bg-background-800 dark:focus-visible:bg-white","safe-hover:text-foreground-200 safe-hover:fill-foreground-200 dark:safe-hover:text-foreground-200 dark:safe-hover:fill-foreground-200","focus-visible:text-foreground-200 focus-visible:fill-foreground-200 dark:focus-visible:text-foreground-200 dark:focus-visible:fill-foreground-200","safe-hover:after:border-transparent dark:safe-hover:after:border-transparent","focus-visible:after:border-transparent dark:focus-visible:after:border-transparent","safe-hover:outline-transparent safe-hover:dark:outline-transparent","focus-visible:outline-transparent focus-visible:dark:outline-transparent","group/button-stronger-focus"),Yre=F("group-hover/button-stronger-focus:fill-foreground-200 group-hover/button-stronger-focus:text-foreground-200","group-focus-visible/button-stronger-focus:fill-foreground-200 group-focus-visible/button-stronger-focus:text-foreground-200"),ne=c.forwardRef((e,t)=>{var le;const{children:n,onFocus:s,onBlur:o,onKeyDown:r,onKeyUp:a,onMouseEnter:l,onMouseLeave:u,className:d,title:m,variant:f="rect",alignment:h="center",color:g="default",outline:C="none",size:v="40-base",id:y,role:b,testId:E,tabIndex:S,tooltip:I,strongerFocusColors:_,spatialNavigationAutofocus:T=!1,"aria-controls":A,"aria-expanded":k,"aria-haspopup":N,"aria-pressed":P,"aria-checked":V,"aria-label":U,"aria-selected":K,"aria-describedby":Q}=e,Z="disabled"in e&&e.disabled,Y=typeof _=="boolean"?_:((le=re.instance().config().uiOverrides)==null?void 0:le.enableStrongerFocusButtons)??!1,X=f==="circle"||f==="square",$=f==="circle"||f==="pill",ee=F(ld,_i[g],PC[v],Wre[h],X?$re[v]:LC[v],$?D6:V2[v],um,Z&&Kre,qre[C],Y&&Zre,d);let te=n;if(Gre(g)){const J=F(Q_[g],$?D6:V2[v]);te=i.jsxs(i.Fragment,{children:[i.jsx("div",{className:F("absolute inset-0",J,Y&&"group-hover/button-stronger-focus:hidden group-focus-visible/button-stronger-focus:hidden")}),i.jsx("div",{className:F(ld,Br[v]),children:n})]})}const{refCallback:G,focusable:ie}=Aa({autoRestoreFocus:!0,forceFocus:!0},t),xe=!!I,ce=typeof I=="boolean"?void 0:I,ae=xe?void 0:m;let Se=U;xe&&!(U!=null&&U.trim())&&(Se=m);let Me;if("href"in e&&e.href!==void 0){const{href:J,target:Ce,onClick:Pe,onPointerDown:qe}=e;Me=i.jsx(ls,{id:y,onPointerDown:qe,"aria-controls":A,"aria-describedby":Q,"aria-expanded":k,"aria-haspopup":N,"aria-label":Se,"aria-selected":K,href:J,target:Ce,ref:ie.ref,onClick:Pe,title:ae,className:ee,"data-testid":E,children:te})}else if("to"in e&&e.to!==void 0){const{to:J,params:Ce,search:Pe,hash:qe,preload:Xe,resetScroll:et,onClick:fe,onPointerDown:Ee}=e;Me=i.jsx(d_,{id:y,ref:ie.ref,onPointerDown:Ee,"aria-controls":A,"aria-describedby":Q,"aria-expanded":k,"aria-haspopup":N,"aria-label":Se,"aria-selected":K,to:J,params:Ce,search:Pe,hash:qe,preload:Xe,resetScroll:et,disabled:Z,onClick:fe,title:ae,className:ee,"data-testid":E,children:te})}else{const{onClick:J,onPointerDown:Ce}=e;Me=i.jsx("button",{onPointerDown:Ce,ref:G,id:y,"aria-controls":A,"aria-describedby":Q,"aria-expanded":k,"aria-haspopup":N,"aria-label":Se,"aria-pressed":P,"aria-checked":V,"aria-selected":K,type:"button",className:ee,title:ae,role:b,disabled:Z,onClick:J,onFocus:s,onBlur:o,onKeyDown:r,onKeyUp:a,onMouseEnter:l,onMouseLeave:u,"data-testid":E,"data-spatial-navigation-autofocus":T,"data-spatial-focus-key":ie.focusKey,tabIndex:S,children:te})}if(!xe)return Me;const{tooltipContentProps:Oe,...oe}=ce??{};return i.jsxs(Rre,{...oe,children:[i.jsx(q_,{asChild:!0,children:Me}),i.jsx(K_,{...Oe,children:m})]})});ne.displayName="Button";const Og=ts.default,Bo=c.forwardRef((e,t)=>{const{isOpen:n,onBack:s,headerText:o,children:r,onClose:a,className:l,disableCloseOutside:u,headerTextClassName:d,headerClassName:m,trapFocus:f=!1,variant:h="modal"}=e,{t:g}=q(),C=c.useId(),{modalAttributes:v}=j1({trapFocus:f,legacyTrapFocus:f,alwaysFocusable:f}),y=f?v:{},b=qi()?-1:1,E=c.useRef(null),{captureFocus:S,restoreFocus:I}=u_();c.useEffect(()=>{n?S():I()},[n,S,I]),$i(E,n),c.useEffect(()=>{const N=P=>{P.key==="Escape"&&n&&a&&(P.stopPropagation(),P.preventDefault(),a())};return n&&document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}},[n,a]);const _=N=>{(u??!a)||N.target===N.currentTarget&&a()},T=N=>{N.stopPropagation()},A=h==="drawer",k=A?{initial:{x:`${b*100}%`},animate:{x:0,transition:N2},exit:{x:`${b*100}%`,transition:{duration:Og}}}:void 0;return i.jsx(ln,{id:String(n),mode:"sync",duration:Og,exitDuration:Og,className:F("fixed inset-0",ct.modal),children:n&&i.jsxs("div",{...y,role:"dialog","aria-modal":"true","aria-labelledby":o?C:void 0,children:[i.jsx("div",{className:F("fixed inset-0 bg-background-850/30 backdrop-blur-[10px] dark:bg-background-150/70",ct.modalBackground)}),i.jsx("div",{className:F("fixed inset-0 flex",A?"items-start justify-end":"items-center justify-center",ct.modal),onClick:_,children:i.jsxs(ge.div,{...k,className:F("t-custom-scrollbar flex flex-col gap-3 border border-white/10 bg-background-150 p-6 shadow-xl dark:bg-background-250",A?"h-full w-96":"min-h-[150px] rounded-4xl",l),onClick:T,tabIndex:-1,ref:N=>{E.current!==N&&(E.current=N),typeof t=="function"?t(N):t&&(t.current=N)},children:[i.jsxs("div",{className:F("flex items-center justify-between gap-2",m),children:[s&&i.jsx(ne,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.backText"),"aria-label":g("common.backText"),onClick:s,children:i.jsx(Il,{className:"size-5 -rotate-90"})}),o&&i.jsx("h2",{id:C,className:F("text-foreground-800 text-lg-strong",d),children:o}),a&&i.jsx(ne,{className:!s&&!o?"ms-auto":"",variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.closeText"),"aria-label":g("common.closeText"),onClick:a,children:i.jsx(an,{className:"size-5"})})]}),r]})})]})})});Bo.displayName="Modal";const J_="cf-turnstile",Qre=`#${J_}`;function Jre(){const e=M(gi),t=M(zo);return Gt("kill-cf-turnstile")?null:i.jsx(Bo,{isOpen:e,className:"w-3/4 sm:w-[350px]",children:i.jsx("div",{id:J_,className:"flex flex-1 items-center justify-center","data-theme":t})})}const Xre=new zi(()=>new Promise((e,t)=>{const n=setTimeout(()=>{t(new Error("CF Turnstile script took too long to load"))},15e3),s=document.createElement("script");s.type="text/javascript",s.defer=!0,s.src="https://challenges.cloudflare.com/turnstile/v0/api.js",s.onload=()=>{clearTimeout(n),e()},s.onerror=()=>{clearTimeout(n),t(new Error("Failed to load turnstile script"))},document.body.appendChild(s)}));async function X_(e){var s;if(_t("kill-cf-turnstile")||pe(gi))return;const n=$e();D.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"attempt"}}),Sd.flushSync(()=>{n.set(gi,!0),n.set(RZ,!0)});try{await Xre.get()}catch{n.set(ed,"cf-turnstile");return}try{(s=window.turnstile)==null||s.render(Qre,{sitekey:"0x4AAAAAAAg146IpY3lPNWte",callback:async o=>{var r;e(o),Ge.emit("challenge:success"),(r=window.turnstile)==null||r.remove(),n.set(gi,!1),D.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"success"}})},"error-callback":o=>{Ge.emit("challenge:error",o),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRenderErrorCallback",eventInfo_details:"Error rendering CF Turnstile.",eventInfo_errorMessage:o}})}})}catch(o){Ge.emit("challenge:error",o),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRender",eventInfo_details:"Error rendering CF Turnstile",eventInfo_errorMessage:o instanceof Error?o.message:""}}),n.set(ed,"cf-turnstile")}}function eae(e){const t=e.match(/^\*\*(.*?)\*\*\n\n$/);if(t){const[,n]=t;return{title:(n==null?void 0:n.trim())??"",text:""}}return{title:"",text:e}}function H2(e){if(window.clarity)for(const[t,n]of Object.entries(e))window.clarity("set",t,n)}function j6(e){if(window.clarity)for(const t of e)window.clarity("event",t)}function Ip(e,t){return e?Date.now()-parseInt(e,10)<=t:!1}function OC(e,t){return!e||parseInt(e,10)<t}var u8;const Kn=(u8=re.instance().config().crossPromotion)==null?void 0:u8.aggressive;var d8,m8,f8,p8,h8;const Yi={"thumbs-up":{cardFeature:"cross-promo-card-thumbsup",popupFeature:"cross-promo-popup-thumbsup",cardConfig:(d8=Kn==null?void 0:Kn.card)==null?void 0:d8.thumbsUp,popupConfig:(m8=Kn==null?void 0:Kn.popup)==null?void 0:m8.thumbsUp},copied:{cardFeature:void 0,popupFeature:"cross-promo-popup-copied",cardConfig:void 0,popupConfig:(f8=Kn==null?void 0:Kn.popup)==null?void 0:f8.copied},engaging:{cardFeature:void 0,popupFeature:"cross-promo-popup-engaging",cardConfig:void 0,popupConfig:(p8=Kn==null?void 0:Kn.popup)==null?void 0:p8.engaging},"think-deeper":{cardFeature:void 0,popupFeature:"cross-promo-popup-think-deeper",cardConfig:void 0,popupConfig:(h8=Kn==null?void 0:Kn.popup)==null?void 0:h8.thinkDeeper}};function tae(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.thumbsUpTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.thumbsUpSubTitle"),images:Yi["thumbs-up"].popupConfig}}function nae(){return{type:"card",title:z("crossSelling.aggressivePromotion.card.thumbsUpTitle"),subTitle:z("crossSelling.aggressivePromotion.card.thumbsUpSubTitle"),images:Yi["thumbs-up"].cardConfig}}function sae(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.copiedTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.copiedSubTitle"),images:Yi.copied.popupConfig}}function oae(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.engagingTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.engagingSubTitle"),images:Yi.engaging.popupConfig}}function rae(){return{type:"popup",title:z("crossSelling.aggressivePromotion.popup.thinkDeeperTitle"),subTitle:z("crossSelling.aggressivePromotion.popup.thinkDeeperSubTitle"),images:Yi["think-deeper"].popupConfig}}function eT(e){const n=$e().get(Kv),s=n===!0?!1:n!==void 0,o=rn(K5),r=!Ip(o,2*rp),a=rn(Xf),l=OC(a,2);s&&iae(e)&&r&&l&&cae(e)}let U6=!1;function aae(){const e=yo();!U6&&(e==="reasoning"||e==="research")&&(eT("think-deeper"),U6=!0)}function iae(e){return Eu(e)||tT(e)}function Eu(e){const t=Yi[e];return be(t.popupFeature)&&t.popupConfig!==void 0}function tT(e){const t=Yi[e];return t.cardFeature!==void 0&&be(t.cardFeature)&&t.cardConfig!==void 0&&!Hd()}function cae(e){const t=$e();e==="thumbs-up"&&Eu(e)?t.set(rr,tae()):e==="thumbs-up"&&tT(e)?t.set(rr,nae()):e==="copied"&&Eu(e)?t.set(rr,sae()):e==="engaging"&&Eu(e)?t.set(rr,oae()):e==="think-deeper"&&Eu(e)&&t.set(rr,rae())}const Dg=R({counter:0,isActive:!0});function lae(){const e=$e(),t=e.get(Dg);if(!t.isActive)return;const n=t.counter+1;n===hB?(eT("engaging"),e.set(Dg,{counter:n,isActive:!1})):e.set(Dg,{counter:n,isActive:t.isActive})}function uae(e){const{artifacts:t}=e;return t.find(n=>n.type==="browser")}function DC(e,t="all"){const n=c.useRef(e),s=c.useMemo(()=>{const o=n.current.map(ya);return R(r=>t==="all"?o.every(a=>r(a)):o.some(a=>r(a)))},[t]);return M(s)}function ud(e,t="all"){return t==="all"?e.every(n=>be(n)):e.some(n=>be(n))}const dae="guide://action",mae="prefill";function Rf(){return ud(["guided-conversations-black","guided-conversations-cocoa","guided-conversations-caramel"],"any")}function fae(e){return e.startsWith("guide://")}function pae(e){const t=new URL(e);if(t.protocol==="guide:"&&t.search){const s=new URLSearchParams(t.search).get("prefill");if(s)return decodeURIComponent(s)}return null}function hae(e){const{parameters:t}=e,{Prefill:n}=t,s=z("guidedConversation.actionPrefix"),o=n.startsWith(s)?n.substring(s.length).trim():n.trim();return{prefill:n,targetText:o}}function Kwe(e){var t,n;return((n=(t=re.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}function gae(){return be("media-spotlight-card")||be("media-spotlight-card-v2")}async function vae(){const e=be("weather-cards"),t=!_t("kill-image-cards"),n=!_t("kill-local-cards"),s=!_t("kill-sports-cards"),o=!_t("kill-video-cards"),r=!_t("kill-searchhealthcareinfo"),a=!_t("kill-searchhealthcareprovider"),l=be("shopping-card"),u=be("shopping-curated"),d=gae(),m=be("job-cards"),f=be("safetycards"),h=be("quiz-cards"),g=be("generateads"),C=be("generateadsint"),v=be("adsparity"),y=!_t("kill-finance-cards"),b=be("adstagsonline"),E=be("product-ads-dynamic-filter"),S=be("property-promotion-ads-dynamic-filter"),I=be("tour-activity-ads-dynamic-filter"),_=be("adsshowroombrandagent"),T=be("emoji-reactions"),A=be("imagegenv3");be("turn-telemetry");const k=!_t("kill-recipe-cards"),N=be("file-cards"),P=be("side-by-side-comparison"),V=be("inline-image"),U=be("inline-video"),{adsEnabled:K,adsShowroomEnabled:Q,disableAnswerCards:Z,enforceAdsOptOutOfPersonalization:Y,answerCardOverrides:X}=re.instance().config(),$=!!$e().get(tQ),ee=(g||C||v)&&K&&!$,te=be("ppt-generation"),G=d&&(X==null?void 0:X.shouldEnableMediaSpotlightCard),ie=be("news-card"),xe=be("media-carousel-card"),ce=be("search-personal-data"),ae=be("onedrive-search"),Se=be("nav-links"),Me=be("consent-card-v2"),Oe=be("flash-cards"),oe=be("person-cards"),le=Rf(),J=[];Z||(e&&J.push("weather"),n&&J.push("local"),t&&J.push("image"),V&&J.push("inlineImage"),s&&J.push("sports"),o&&J.push("video"),U&&J.push("inlineVideo"),a&&J.push("healthcareEntity"),r&&J.push("healthcareInfo"),l&&J.push("shopping"),m&&J.push("job"),ee&&J.push("ads"),f&&J.push("safetyHelpline"),h&&J.push("quiz"),y&&J.push("finance"),u&&J.push("shoppingCurated"),k&&J.push("recipe"),N&&J.push("file"),G&&J.push("mediaSpotlight"),ie&&J.push("newsCarousel"),xe&&J.push("mediaCarousel"),ce&&J.push("personalArtifacts"),ae&&J.push("m365"),Oe&&J.push("flashcard"),Se&&J.push("navigation"),Me&&J.push("consent"),oe&&J.push("person"),te&&J.push("powerPointCreator"));const Ce={supportedTypes:["text","product","multimedia","tourActivity","propertyPromotion"]};Y&&(Ce.optOutOfPersonalization=!0),_&&K&&Q&&Ce.supportedTypes.push("showroom"),(E||b)&&(Ce.product={tagsSupported:!0}),S&&(Ce.propertyPromotion={tagsSupported:!0}),I&&(Ce.tourActivity={tagsSupported:!0});const Pe=[];T&&Pe.push("emoji-reactions"),A&&Pe.push("partial-generated-images"),le&&Pe.push("guided-conversations");const qe=!e1({breakpoint:"lg"});P&&qe&&Pe.push("side-by-side-comparison");const Xe={supportedFeatures:Pe,supportedCards:J.length>0?J:void 0,ads:ee?Ce:null};return await fJ.run(Xe)}const nT="space-y-3 break-words",z2="bg-accent-200 dark:bg-accent-250",Zwe=`group/ai-message-item ${nT}`,dm="&#95;{{{CITATION{{{&#95;",dd="{";function sT(e,t){return`[${dm}${e}${dd}](${t})`}const Cae=new RegExp(`\\[${dm}.*?\\)`,"g");function yae(e){return e.replace(Cae,"")}const bae=new RegExp(`\\[${dm}([^${dd}]+)${dd}\\]`,"g");function Ywe(e,t,n){return e.replace(bae,(s,o)=>{if(!n)return`  [${o}]`;const r=t.find(a=>a.index===o);return`  [${(r==null?void 0:r.publisher)??(r!=null&&r.url?R2(r.url):o)}]`})}function xae(e){return e.type==="word"}function Sae(e){return xae(e)&&e.word.trim()==="."}function Eae(e,t){var n,s;for(let o=t-1;o>=0;o-=1){if(((n=e[o])==null?void 0:n.type)==="citation"){const r=o+1;return r<e.length&&Sae(e[r])?r+1:r}if(((s=e[o])==null?void 0:s.type)==="word"&&e[o].word.includes(`
`))return o+1}return 0}function wae(e,t,n){return t!==null&&n!==null&&e>=t&&e<n}function oT(e){const{author:t}=e;return t.type==="ai"?{...e,author:"ai",authorMetadata:t,streamingState:"idle"}:t.type==="human"?{...e,author:"human",authorMetadata:t}:{...e,author:"groupParticipant",authorMetadata:t}}function Iae(e){return e.map(oT)}const _ae=2500,Tae=255,Qwe=["pdf","docx"],Q1=i1(new Map),Jwe=R(null),Aae=R(eB),kae=R(Tae),Mae=R(_ae),Nae=R([]),So=R(e=>e(Nae).filter(t=>t.uploadStatus==="success").length);function Rae(e,t,n){return`${e}_${t}_${n}`}function Pae(e,t){$e().set(Q1,s=>{const o=s.get(e)??[],r=[];for(const a of t.editTargets){const l={id:Rae(t.id,a.startIndex,a.endIndex),pageSuggestionId:t.id,startIndex:a.startIndex,endIndex:a.endIndex,text:t.text};r.push(l)}s.set(e,[...o,...r])})}function Xwe(e,t){$e().set(Q1,s=>{const o=s.get(e);o&&s.set(e,o.filter(r=>r.id!==t))})}function eIe(e){$e().set(Q1,n=>{n.delete(e)})}function Lae(e,t,n){$e().set(Q1,o=>{const r=o.get(e);if(r){const a=r.filter(l=>l.pageSuggestionId===t);for(const l of a)l.text===void 0&&(l.text=""),l.text+=n}})}function rT(e){try{return new URL(e,window.location.origin).origin!==window.location.origin}catch{return!1}}function Nl(e){pe(Sa)&&rT(e)?$e().set(y1,e.toString()):window.location.href=e}function Rl(){jC()}function jC(e){const{surfaceQueryParam:t}=re.instance().config(),n=new URL(window.location.href);if(e&&(n.pathname=e),t)for(const[s,o]of Object.entries(t.params))n.searchParams.delete(s),n.searchParams.append(s,o);Nl(n.href)}function Oae(e){un({scenario:"sideBySideMessages",page:"chat",customData:JSON.stringify({eventInfo_event:"receivedSxsEvent",eventInfo_sideBySideComparisonId:e})})}function Dae(e){const{sideBySideComparisonId:t,reason:n}=e;un({scenario:"sideBySideMessages",page:"chat",customData:JSON.stringify({eventInfo_event:"skippedSxsMessages",eventInfo_sideBySideComparisonId:t,eventInfo_skippedReason:n})})}function jae(e){const{sideBySideComparisonId:t,sideBySideConfig:n}=e,{position:s,isDefault:o}=n;ye({pageName:"chat",sectionName:"sideBySideMessages",source:"selectedSxs",customData:JSON.stringify({eventInfo_sideBySideComparisonId:t,eventInfo_position:s,eventInfo_isControlMessage:o})})}function aT(e){const{sideBySideComparisonId:t,reason:n}=e;ye({pageName:"chat",sectionName:"sideBySideMessages",source:"defaultedSxs",customData:JSON.stringify({eventInfo_sideBySideComparisonId:t,eventInfo_defaultReason:n})})}function Uae(e){const{card:t,messageId:n,conversationId:s}=e,o={eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_impressionScenario:"answerCardReceived",eventInfo_answerCardType:t.type,eventInfo_messageId:n,eventInfo_conversationId:s};switch(t.type){case"image":o.eventInfo_answerCardContentLength=t.images.length;break;case"localEntity":o.eventInfo_answerCardContentLength=t.entities.length;break;case"financeChart":o.eventInfo_answerCardScenario=t.instrument.securityType;break}D.trackEvent({name:"system",data:o})}function Fae(e){const{card:t,messageId:n,conversationId:s}=e,o=performance.now(),r=pe(JE);if(!r)return;const a={eventName:"copilotAnswerCardReceived",eventInfo_messageId:n,eventInfo_conversationId:s,eventInfo_cardType:t.type,eventInfo_duration:o-r};D.trackEvent({name:"system",data:a})}function Bae(e){const{message:t,conversationId:n}=e;for(const s of t.content)switch(s.type){case"card":Uae({card:s.card,messageId:t.id,conversationId:n}),Fae({card:s.card,messageId:t.id,conversationId:n});break}}function Vae(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}const tIe=6048e5,Hae=864e5,nIe=6e4,zae=36e5,sIe=1e3,oIe=43200,rIe=1440,aIe=60;function Gae(e,t){return+Ft(e)-+Ft(t)}function Wae(e,t,n){const s=Gae(e,t)/zae;return Vae(n==null?void 0:n.roundingMethod)(s)}function UC(e){if(!e)return null;let t=null;const n=new Date(e).toISOString(),s=new Date().toISOString(),o=Wae(n,s,{roundingMethod:"ceil"});return o>24?t="permanent":o>1&&o<=24?t="24-hr":o>0&&o<=1&&(t="1-hr"),t}function FC(e,t,n){if(!e){jt(G0);return}const s=$e();D.trackEvent({name:"system",data:{eventName:"copilotUserBan",eventInfo_banDuration:e,eventInfo_banSource:t,eventInfo_banExpiryTimestamp:n}}),s.set(Fw,e),s.set(ed,"user-banned")}async function BC(e){D.setSettings({userConsentModelTraining:!e.optOutOfTraining,userConsentPersonalization:!e.optOutOfPersonalization,userSettingPhoneConnection:!e.optOutOfPhoneConnection,userSettingBrowserActions:e.allowBrowserActions,userSettingComputerUseActions:e.allowComputerUseActions,userSettingGenUI:!e.optInToGenerativeUI}),await kn({path:"/user/settings",args:{options:{method:"PATCH"},body:{optOutOfTraining:e.optOutOfTraining,optOutOfPersonalization:e.optOutOfPersonalization,optInToVoiceTraining:e.optInToVoiceTraining,optOutOfPhoneConnection:e.optOutOfPhoneConnection,optInToGenerativeUI:e.optInToGenerativeUI,allowBiometricDataUse:e.allowBiometricDataUse,allowOneDriveAccess:e.allowOneDriveAccess,allowBrowserActions:e.allowBrowserActions,allowComputerUseActions:e.allowComputerUseActions,allowOutlookAccess:e.allowOutlookAccess,allowEdgePasswordsAccess:e.allowEdgePasswordsAccess,features:e.features}}})}async function $ae(){var t,n,s;const e=await Ct("/user",_E,{parseOptions:{safe:!0},query:{"api-version":"4"}}).then(o=>o.data);$e().set(T1,((t=e.remainingUsage)==null?void 0:t.podcastGenerations)??null),$e().set(Kd,((n=e.remainingUsage)==null?void 0:n.researchCalls)??null),$e().set(A1,((s=e.remainingUsage)==null?void 0:s.videoGenerations)??null)}const Et=$e();function F6(e){return{chatMode:vn(),timing:new sX(e),citationCount:0,imageCount:0,chainOfThoughtCount:0,inputMethod:"text",pendingGuidedActions:[],processedGuidedLinksCount:0,uploadImageCount:0,uploadFileCount:0}}let jg=null;async function B6(){return jg||(jg=B(()=>import("./fast-json-patch-index-DS1hydBz.js"),[]).then(e=>e.applyPatch)),jg}class qae{constructor(t){O(this,"ws");O(this,"conversationMetadata",new Map);O(this,"conversationIdByMessageId",new Map);O(this,"messageIdByTaskId",new Map);O(this,"latestMessagePartIdentifier",null);O(this,"pendingSideBySideMessages",new Map);this.ws=t,this.send=this.send.bind(this),this.regenerate=this.regenerate.bind(this),this.sendChallengeResponse=this.sendChallengeResponse.bind(this),this.resetConversationState=this.resetConversationState.bind(this),this.resetConversationTiming=this.resetConversationTiming.bind(this),this.setConversationIdByMessageId=this.setConversationIdByMessageId.bind(this),this.setMessageIdByTaskId=this.setMessageIdByTaskId.bind(this),this.onSubmitMessageBlocked=this.onSubmitMessageBlocked.bind(this),this.callBeforeSendForConversation=this.callBeforeSendForConversation.bind(this),this.callOnSentForConversation=this.callOnSentForConversation.bind(this),this.setChatModeForConversation=this.setChatModeForConversation.bind(this),this.setInputMethodForConversation=this.setInputMethodForConversation.bind(this),this.setUploadCountsForConversation=this.setUploadCountsForConversation.bind(this),this.setUserMessageForConversation=this.setUserMessageForConversation.bind(this),this.processEvent=this.processEvent.bind(this),this.sendMessagePreview=this.sendMessagePreview.bind(this),this.updateChatOptions=this.updateChatOptions.bind(this),this.sendAudioClick=this.sendAudioClick.bind(this)}getConversationState(t){return this.conversationMetadata.has(t)||this.conversationMetadata.set(t,F6(performance.now())),this.conversationMetadata.get(t)}get latestMessagePartId(){return this.latestMessagePartIdentifier}resetConversationState(t,n){this.conversationMetadata.set(t,F6(n))}resetConversationTiming(t,n){this.getConversationState(t).timing.resetStartTime(n)}setConversationIdByMessageId(t){const{messageId:n,conversationId:s}=t;this.conversationIdByMessageId.set(n,s)}setMessageIdByTaskId(t){const{taskId:n,messageId:s}=t;this.messageIdByTaskId.set(n,s)}onSubmitMessageBlocked(t){const{timing:n,chatMode:s,inputMethod:o}=this.getConversationState(t);n.onSubmitMessageBlocked(s,o,t)}callBeforeSendForConversation(t){this.getConversationState(t).timing.onBeforeSend()}callOnSentForConversation(t,n){this.getConversationState(t).timing.onSent(n)}setChatModeForConversation(t,n){const s=this.getConversationState(t);s.chatMode=n}setInputMethodForConversation(t,n){const s=this.getConversationState(t);s.inputMethod=n}setUploadCountsForConversation(t,n,s){const o=this.getConversationState(t);o.uploadImageCount=n,o.uploadFileCount=s}setUserMessageForConversation(t,n){const s=this.getConversationState(t);s.lastUserMessage=n}send(t){const{content:n,conversationId:s,data:o,mode:r,context:a}=t,l={event:"send",conversationId:s,content:Array.isArray(n)?n:[n],mode:r,context:a,...o};this.ws.send(JSON.stringify(l))}sendChallengeResponse(t){this.ws.send(JSON.stringify({event:"challengeResponse",token:t.token,method:t.method}))}regenerate(t){const{messageId:n,mode:s,allowedConsents:o,context:r}=t,a={event:"regenerate",messageId:n,mode:s,...r?{context:r}:{},...o!=null&&o.length?{allowedConsents:o}:{}};this.ws.send(JSON.stringify(a))}sendMessagePreview(t){const{content:n,conversationId:s,data:o,mode:r,context:a}=t,l={event:"messagePreview",conversationId:s,content:Array.isArray(n)?n:[n],mode:r,context:a,...o};this.ws.send(JSON.stringify(l))}sendAudioClick(t,n){if(!n)return;const{chatMode:s}=this.getConversationState(n);this.send({conversationId:n,content:[{type:"command",command:{type:"topicClick",topic:t}}],mode:s})}setCharacterAppearance(t){var o;const n=(o=Et.get(hn))==null?void 0:o.id;if(!n)return;const{chatMode:s}=this.getConversationState(n);this.send({conversationId:n,content:[{type:"command",command:{type:"setCharacterAppearance",body:t}}],mode:s})}async updateChatOptions(){const n={event:"setOptions",...await vae()};this.ws.send(JSON.stringify(n))}processEvent(t){switch("id"in t&&(this.latestMessagePartIdentifier=t.id??null),t.event){case"received":this.handleReceived(t);break;case"newMessage":this.handleNewMessage(t);break;case"connected":this.handleConnected(t);break;case"emojiReaction":this.handleEmojiReaction(t);break;case"startMessage":this.handleStartMessage(t);break;case"appendText":this.handleAppendText(t);break;case"replaceText":this.handleReplaceText(t);break;case"invokeAction":this.handleInvokeAction(t);break;case"browserAutomate":this.handleBrowserAutomate(t);break;case"chainOfThought":this.handleChainOfThought(t);break;case"citation":this.handleCitation(t);break;case"generatingImage":this.handleGeneratingImage(t);break;case"imageGenerated":this.handleImageGenerated(t);break;case"partialImageGenerated":this.handlePartialImageGenerated(t);break;case"imageGenerationFailed":this.handleImageGenerationFailed(t);break;case"generatingCard":this.handleGeneratingCard(t);break;case"cardGenerationFailed":this.handleCardGenerationFailed(t);break;case"page":this.handlePage(t);break;case"titleUpdate":this.handleTitleUpdate(t);break;case"challenge":this.handleChallenge(t);break;case"card":this.handleCard(t);break;case"document":this.handleDocument(t);break;case"taskStart":this.handleTaskStart(t);break;case"taskUpdate":this.handleTaskUpdate(t);break;case"error":this.handleError(t);break;case"banned":this.handleBanned(t);break;case"suggestedFollowups":this.handleSuggestedFollowups(t);break;case"done":this.handleDone(t);break;case"startSuggestion":this.handleStartSuggestion(t);break;case"appendSuggestion":this.handleAppendSuggestion(t);break;case"activityStart":this.handleActivityStart(t);break;case"activityUpdate":this.handleActivityUpdate(t);break;case"memorySignal":this.handleMemorySignal(t);break;case"sideBySideComparison":this.handleSideBySideComparison(t);break;case"suggestVision":{const n=Et.get(je);ot(n,s=>{const o=vi(s);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"suggestVision"}})});break}case"modeSelected":this.handleModeSelected(t);break;case"pong":break;case"audio":case"interruptAudio":case"speechEndDetected":case"callTerminated":case"characterAnimation":case"characterAnimationEnd":case"characterAppearance":case"characterEmotion":case"callUI":case"callUIUpdate":break;case"relatedSearchResultsAvailable":this.handleRelatedSearchResultsAvailable(t);break;case"participantUpdate":this.handleParticipantUpdate(t);break}}handleMemorySignal(t){if(_t("kill-memory-edf-basic"))return;const{messageId:n,partId:s,text:o,signalType:r}=t,a=this.conversationIdByMessageId.get(n);if(!a)return;this.getConversationState(a).timing.onMemorySignalReceived({messageId:n,conversationId:a}),ot(a,u=>{const d=sn({history:u,messageId:n});d&&d.content.push({type:"memorySignal",partId:s,text:o,signalType:r})})}handleSideBySideComparison(t){if(!be("side-by-side-comparison"))return;const{sideBySideComparisonId:n,conversationId:s,options:o,defaultMessageId:r}=t;Oae(n),T2(s,a=>{a.sideBySideComparisonId=n});for(const{messageId:a,position:l}of o)this.pendingSideBySideMessages.set(a,{position:l,isDefault:a===r})}handleModeSelected(t){const{messageId:n,mode:s}=t,o=this.conversationIdByMessageId.get(n),r=yo();if(!o)return;D.trackEvent({name:"system",data:{eventName:"modeSelectedEvent",eventInfo_conversationId:o,eventInfo_messageId:n,eventInfo_customData:JSON.stringify({eventInfo_selectedMode:s})}}),be("smart-mode-cot")&&r==="smart"&&s==="reasoning"&&ot(o,l=>{const u=sn({history:l,messageId:n});u&&u.content.push({type:"chainOfThought",text:z("chat.reasoningLoading.emptyCoTText"),partId:"-1"})})}clearAllStreamingStates(){const t=Et.get(vt);for(const n of t.values())ot(n.id,s=>{for(const o of s)o.author==="ai"&&o.streamingState==="streaming"&&(o.streamingState="idle")})}handleReceived(t){const{messageId:n,conversationId:s}=t;this.conversationIdByMessageId.set(n,s);const o=this.getConversationState(s);o.timing.onReceived({messageId:n,conversationId:s,chatMode:o.chatMode}),j6([`humanMessage_${n}`,`conversation_${s}`]),Et.set(bi,r=>r&&!M1()?r-1:r),ot(s,r=>{const a=r.at(-1);(a==null?void 0:a.author)==="human"&&(a.id=n)}),lae()}handleNewMessage(t){const{message:n,conversationId:s}=t,o=oT(n);this.conversationIdByMessageId.set(o.id,s),ot(s,r=>{r.push(o)})}handleConnected(t){Qu.trackLatestChatConnectedAssignment(t)}handleEmojiReaction(t){const{messageId:n,emoji:s}=t,o=this.conversationIdByMessageId.get(n);o&&ot(o,r=>{const a=Oee(r,n);a&&(a.emojiReaction=s)})}handleStartMessage(t){const{messageId:n,conversationId:s,createdAt:o}=t;this.conversationIdByMessageId.set(n,s);const r=this.getConversationState(s),{chatMode:a}=r;r.citationCount=0,r.processedGuidedLinksCount=0,r.timing.onStartMessage({messageId:n,conversationId:s,chatMode:a}),k2()&&Et.set(hi,"responding"),j6([`aiMesssage_${n}`,`conversation_${s}`]);const l=this.pendingSideBySideMessages.get(n),u={id:n,createdAt:o,author:"ai",content:[],mode:a,sideBySideConfig:l,streamingState:"streaming"};ot(s,d=>{d.length===0&&jI(Et.get(fo),s)||d.push(u)})}handleAppendText(t){const{text:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const a=this.getConversationState(r);a.timing.onFirstToken(s,a.chatMode,r),ot(r,l=>{const u=sn({history:l,messageId:s});if(u){Ec(r,u.id);let d=No(u.content,o);if(!d)d={type:"text",text:"",partId:o},u.content.push(d);else if(d.type!=="text"){console.error(`appendText event with partId that is not a text item. Item is of type ${d.type}`,t);return}d.text=d.text.concat(n),Fee(u)}}),Rf()&&this.applyPendingGuidedActions(r)}handleReplaceText(t){const{text:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const a=Et.get(hn),l=a==null?void 0:a.sideBySideComparisonId;l&&(Dae({sideBySideComparisonId:l,reason:"replacedText"}),CC(r)),ot(r,u=>{const d=sn({history:u,messageId:s});if(d){Ec(r,d.id);let m=No(d.content,o);if(!m)m={type:"text",text:"",partId:o},d.content.push(m);else if(m.type!=="text"){console.error("replaceText event with partId that is not a text item",t);return}m.text=n,m.citations=void 0}})}handleCitation(t){const{title:n,url:s,messageId:o,publisher:r,iconUrl:a,snippet:l}=t,u=this.conversationIdByMessageId.get(o);if(!u)return;const d=this.getConversationState(u);uZ(s,u,o),ot(u,m=>{const f=sn({history:m,messageId:o});if(f){Ec(u,f.id);const h=V4(f.content);if(h){h.citations||(h.citations=[]);const g=h.citations.find(v=>v.url===s);let C;if(g?C=g.index:(d.citationCount+=1,C=`${d.citationCount}`,h.citations.push({index:C,url:s,iconUrl:a,title:n,publisher:r,snippet:l})),h.text=h.text.concat(sT(C,s)),d.citationCount===1){const v=Wee();(v==null?void 0:v.type)==="citations"&&v.data.conversationId===u&&v.data.messageId!==o&&El({type:"citations",data:{conversationId:u,messageId:o}})}}}})}handleGeneratingImage(t){const{prompt:n,messageId:s,partId:o,progressionText:r}=t,a=this.conversationIdByMessageId.get(s);if(!a)return;const l=this.getConversationState(a);l.timing.onImageGenerationStart({messageId:s,conversationId:a,chatMode:l.chatMode}),ot(a,u=>{const d=sn({history:u,messageId:s});d&&d.content.push({type:"image",prompt:n,partId:o,partialGenerationStep:0,status:"generating",progressionText:r})})}handleImageGenerated(t){const{url:n,partId:s,messageId:o}=t,r=this.conversationIdByMessageId.get(o);if(!r)return;const a=this.getConversationState(r);a.imageCount+=1,a.timing.onImageReceived({messageId:o,conversationId:r,chatMode:a.chatMode}),ot(r,l=>{const u=sn({history:l,messageId:o});if(u){const d=No(u.content,s);(d==null?void 0:d.type)==="image"&&(d.isPartiallyLoading=!1,d.url=n,d.partialGenerationStep=void 0,d.status="generated",d.progressionText=void 0)}})}handlePartialImageGenerated(t){const{content:n,messageId:s,partId:o}=t,r=this.conversationIdByMessageId.get(s);if(!r)return;const a=this.getConversationState(r);ot(r,l=>{const u=sn({history:l,messageId:s});if(u){const d=No(u.content,o);if((d==null?void 0:d.type)==="image"){d.isPartiallyLoading=!0,d.url=`data:image/png;base64,${n}`;const m=(d.partialGenerationStep??0)+1;d.partialGenerationStep=m,d.status="generating",a.timing.onPartialImageReceived({messageId:s,conversationId:r,chatMode:a.chatMode,imageGenPhase:m})}}})}getImageGenerationErrorMessage(t){switch(t){case"not-signed-in":return;case"throttled":return;case"blocked":return;default:return z("error.imageGenerationFailed")}}handleImageGenerationFailed(t){const{messageId:n,partId:s,errorCode:o}=t,r=this.conversationIdByMessageId.get(n);if(!r)return;ot(r,l=>{const u=sn({history:l,messageId:n});u&&(u.content=u.content.filter(d=>d.type!=="image"||d.partId!==s))});const a=this.getImageGenerationErrorMessage(o);o==="not-signed-in"&&Et.set(Ia,{isOpen:!0,scenario:null,reason:"imageGeneration"}),a&&kf(a,r)}handleCardGenerationFailed(t){const n=Et.get(xu);if(n&&this.isGeneratedCards(n)){Et.set(xu,void 0);const s=this.conversationIdByMessageId.get(t.messageId);if(!s)return;n==="quiz"&&kf(z("quizCard.generatedQuizFailed"),s)}}handleGeneratingCard(t){const{type:n}=t;this.isGeneratedCards(n)&&Et.set(xu,n)}isGeneratedCards(t){return Iw.safeParse(t).success}handleTitleUpdate(t){const{conversationId:n,title:s}=t;Et.set(vt,o=>Un(o,r=>{const a=r.get(n);a&&(a.title=s)}))}handleCard(t){const{messageId:n,partId:s,card:o}=t,r=this.conversationIdByMessageId.get(n);if(!r)return;const a=this.getConversationState(r);if(o.type==="ads"){cte({card:o,messageId:n,partId:s,conversationState:a,conversationId:r});return}ot(r,l=>{const u=sn({history:l,messageId:n});u&&u.content.push({type:"card",partId:s,card:o})})}handleDocument(t){const{messageId:n,partId:s,attachmentId:o,fileName:r,contentType:a}=t,l=this.conversationIdByMessageId.get(n);l&&ot(l,u=>{const d=sn({history:u,messageId:n});d&&d.content.push({type:"document",partId:s,attachmentId:o,fileName:r,contentType:a})})}handleBanned(t){const{expiresAt:n}=t,s=UC(n);s&&FC(s,"chat",n)}handlePage(t){const{messageId:n,page:s,partId:o}=t,r=this.conversationIdByMessageId.get(n);r&&(ot(r,a=>{const l=sn({history:a,messageId:n});l&&l.content.push({type:"page",partId:o,page:s})}),Ge.emit("pages:page-created",s))}handleStartSuggestion(t){const{pageId:n,suggestionId:s,editTargets:o}=t;Pae(n,{id:s,text:void 0,editTargets:o})}applyPendingGuidedActions(t){const n=this.getConversationState(t),{pendingGuidedActions:s}=n;s.length!==0&&ot(t,o=>{const r=vi(o);if(!r)return;const a=V4(r.content);if(!a||!a.text)return;const{text:l}=a,u=n.pendingGuidedActions[0];if(!u)return;const{targetText:d,prefill:m}=u;if(!d||!m)return;const f=l.lastIndexOf(d);if(f!==-1){const h=l.substring(0,f),g=l.substring(f+d.length),C=`[${d}](${dae}?${mae}=${encodeURIComponent(m)})`,v=h+C+g;a.text=v,n.processedGuidedLinksCount+=1,n.pendingGuidedActions.shift()}})}handleGuidedConversationAction(t,n){if(!Rf())return;const s=hae(t);this.getConversationState(n).pendingGuidedActions.push(s)}handleAppendSuggestion(t){const{pageId:n,suggestionId:s,text:o}=t;Lae(n,s,o)}handleActivityStart(t){if(!w2())return;const{messageId:n,partId:s,activity:o}=t,r=this.conversationIdByMessageId.get(n);r&&ot(r,a=>{const l=sn({history:a,messageId:n});l?(Ec(r,l.id),l.content.push({activity:o,type:"activity",partId:s})):Kt({feature:"activity",errorType:"handleActivityStart",errorMessage:"Could not find message with messageId to start activity",customData:JSON.stringify({messageId:n})})})}async handleActivityUpdate(t){if(!w2())return;const{messageId:n,partId:s,update:o}=t,r=this.conversationIdByMessageId.get(n);if(r)try{const a=await B6();ot(r,l=>{const u=sn({history:l,messageId:n});if(!u)return;const d=No(u.content,s);if(!d||d.type!=="activity"){Kt({feature:"activity",errorType:"handleActivityUpdate",errorMessage:"Could not find activity message with partId in message with messageId",customData:JSON.stringify({messageId:n,partId:s})});return}a(d.activity,o),P4.run({conversationId:r,partId:s,activity:d.activity})})}catch(a){Kt({feature:"activity",errorType:"handleActivityUpdate",errorMessage:"Error updating activity",exception:JSON.stringify({error:a})})}}processInvokeAction(t){const n=Et.get(je);if(n)switch(t.actionName){case"phone_send_message":{ot(n,s=>{const o=vi(s);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"phoneSendMessage",actionId:t.actionId,contactName:t.parameters.contactName,text:t.parameters.text,phoneNumber:t.parameters.phoneNumber}})});break}case"edge_get_page_content":{const s=t.parameters.map(o=>({tabId:o.tabId,windowId:o.windowId,pageUrl:o.pageUrl??"",pageTitle:o.pageTitle??""}));uJ.run({actionId:t.actionId,tabs:s,inputMethod:this.getConversationState(n).inputMethod});break}case"edge_navigate_to":case"edge_switch_tab":case"edge_close_tabs":case"edge_group_open_browser_tabs":case"edge_ungroup_open_browser_tabs":case"edge_find_browser_tab_groups":case"edge_media_controls":case"edge_go_back_forward":case"computer_use":{dJ.run(t);break}case"browser_search":{const s=Vee(n,z("chat.multiTabsSearchIndicatorForHistory"));mJ.run({actionId:t.actionId,queries:t.parameters.queries,startTime:t.parameters.startTime?s6(t.parameters.startTime):void 0,endTime:t.parameters.endTime?s6(t.parameters.endTime):void 0,maxResults:t.parameters.maxResults,states:Qne(t.parameters.states),inputMethod:this.getConversationState(n).inputMethod}).then(()=>{H4(n,s,"success")}).catch(o=>{Kt({feature:"multiTabsSearch",errorType:"fetchTabsContent",errorMessage:o instanceof Error?o.message:"unknown"}),H4(n,s,"failed")});break}case"guided_conversation":{this.handleGuidedConversationAction(t,n);break}}}handleInvokeAction(t){const{success:n,data:s}=Dte.safeParse(t);n?this.processInvokeAction(s):console.error("Invalid action data:",t)}handleBrowserAutomate(t){const{partId:n,tabIds:s,activeTabId:o,messageId:r}=t,a=this.conversationIdByMessageId.get(r);a&&(D.trackEvent({name:"system",data:{eventName:"browserAutomate",eventInfo_conversationId:a,eventInfo_messageId:r}}),ot(a,l=>{const u=sn({history:l,messageId:r});if(u){const d=No(u.content,n);if(d&&d.type==="activity"){const m=d.activity.artifacts.find(f=>f.type==="browser");m?(m.tabIds=s,m.activeTabId=o):d.activity.artifacts.push({type:"browser",tabIds:s,activeTabId:o}),P4.run({conversationId:a,partId:n,activity:d.activity})}}}))}handleTaskStart(t){const{messageId:n,task:s,partId:o}=t,r=this.conversationIdByMessageId.get(n);this.messageIdByTaskId.set(s.id,n);const a=new Date().toISOString();if(r){tse([s],r,a),Et.set(jc,!1),ot(r,u=>{const d=sn({history:u,messageId:n});if(d){const m=xX(s,o,a);m&&d.content.push(m)}}),iJ.run({task:s,action:"startTask"});const l=Et.get(je);s.type==="computerUse"&&r===l&&nte(s.conversationId,r),(s.type==="podcast"||s.type==="research"||s.type==="videoGeneration")&&$ae()}}async handleTaskUpdate(t){const{taskId:n,update:s}=t;if(Zee(n,s))return;let o=!1;const r=this.messageIdByTaskId.get(n),a=r?this.conversationIdByMessageId.get(r):void 0;try{const l=await B6();r&&a&&ot(a,u=>{const d=sn({history:u,messageId:r});if(d){const m=wX(d.content),f=m==null?void 0:m.task;f&&f.type==="research"&&(l(f,s),Hee(f,a))}}),vC(n,u=>{var d;if(u.type==="computerUse"&&l(u,s),u.type==="podcast"){const m=((d=u.podcast)==null?void 0:d.id)??"";l(u,s),u.podcast&&(u.podcast.id=m)}u.type==="videoGeneration"&&l(u,s)}),o=!0}catch(l){console.error("Error applying task update patch:",l)}if(o){const l=Et.get(fo).get(n);switch(l==null?void 0:l.type){case"computerUse":Xee(n,s);break;case"podcast":kee(l);break;case"videoGeneration":ote(l);break}}}handleSuggestedFollowups(t){const{disableMultiturn:n}=re.instance().config();if(!n){const{suggestions:s,messageId:o}=t,r=this.conversationIdByMessageId.get(o);r&&T2(r,a=>{a.suggestedFollowup={messageId:o,suggestions:s}})}}handleError(t){const{errorCode:n}=t;if(n==="over-turn-limit")Et.set(bi,0);else if(n==="over-task-quota"||n==="over-lifetime-task-quota")Et.set(OZ,n),Et.set(bo,"over-task-quota");else if(n==="unknown-error")for(const[s]of this.conversationMetadata.entries())ot(s,o=>{for(const r of o)r.author==="ai"&&r.streamingState==="streaming"&&(r.streamingState="idle")});else if(n==="page-content-length-exceeded"||n==="page-count-exceeded"){Ge.emit("page:message-error",n);for(const[s]of this.conversationMetadata.entries())ot(s,o=>{for(const r of o)r.author==="ai"&&r.streamingState==="streaming"&&(r.streamingState="idle")})}else for(const[s]of this.conversationMetadata.entries())kf(z("error.eventNotRecognized"),s);Et.set(jc,!1)}handleChainOfThought(t){const{messageId:n,partId:s,text:o}=t,r=this.conversationIdByMessageId.get(n);r&&ot(r,a=>{const l=sn({history:a,messageId:n});if(l){Ec(r,l.id);let u=No(l.content,s);const d=this.getConversationState(r);if(u)u.type!=="chainOfThought"?console.error(`chainOfThought event with partId that is not a chainOfThought item. Item is of type ${u.type}`,t):u.text=u.text.concat(o);else{u={type:"chainOfThought",text:"",title:"",partId:s},l.content.push(u);const{title:m,text:f}=eae(o);u.title=m,u.text=f,d.timing.onChainOfThoughtReceived({messageId:n,conversationId:r,chatMode:d.chatMode}),d.chainOfThoughtCount+=1}}})}async handleHashcashChallenge(t){if(!t)return;const n=Et.get(je);D.trackEvent({name:"system",data:{eventName:"challengeRequest",eventInfo_method:"hashcash",eventInfo_customData:JSON.stringify({conversationId:n,parameter:t})}});const[s,o]=t.split(":"),r=Number(o);if(!s||Number.isNaN(r)||r<=0)return;const a=await bX({token:s,difficulty:r});this.sendChallengeResponse({method:"hashcash",token:a.nonce.toString()}),D.trackEvent({name:"system",data:{eventName:"challengeResponse",eventInfo_method:"hashcash",eventInfo_duration:a.timeElapsed,eventInfo_customData:JSON.stringify({difficulty:r,numberOfTries:a.nonce,totalHashes:a.totalHashes,method:a.method,numberOfWorkers:a.numberOfWorkers})}})}async handleChallenge(t){const n=()=>{const s=Et.get(je);if(!s)return;const{lastUserMessage:o}=this.getConversationState(s);o&&this.send(o)};if(t.method==="copilot"){const{parameter:s}=t,o=Number(s),r=Math.round((o**3/100+o*25)%22).toString();this.sendChallengeResponse({method:"copilot",token:r}),n(),Ge.emit("challenge:success");return}if(be("hashcash")&&t.method==="hashcash"){await this.handleHashcashChallenge(t.parameter),n(),Ge.emit("challenge:success");return}_t("kill-cf-turnstile")||X_(s=>{this.sendChallengeResponse({token:s,method:"cloudflare"}),n()})}handleRelatedSearchResultsAvailable(t){const{messageId:n}=t;Uee(n)}handleParticipantUpdate(t){const{conversationId:n,participant:s,updateType:o,id:r}=t,a={id:r,createdAt:new Date().toISOString(),author:"system",participant:s,updateType:o};ot(n,u=>{u.push(a)});const l=pe(Yt);if(s.userId===(l==null?void 0:l.id)&&o==="kicked"){Rl();return}o_(n)}handleDone(t){var d;k2()&&Et.get(hi)==="responding"&&Et.set(hi,"idle");const{messageId:n}=t,s=this.conversationIdByMessageId.get(n);if(!s)return;Rf()&&this.applyPendingGuidedActions(s);const o=this.getConversationState(s);o.timing.onLastToken({messageId:n,conversationId:s,citationCount:o.citationCount,imageCount:o.imageCount,chainOfThoughtCount:o.chainOfThoughtCount,chatMode:o.chatMode,inputMethod:o.inputMethod,uploadImageCount:o.uploadImageCount,uploadFileCount:o.uploadFileCount,guidedLinksCount:o.processedGuidedLinksCount});const a=((d=Et.get(vt).get(s))==null?void 0:d.history)??[],l=sn({history:a,messageId:n});ot(s,m=>{if(!l)return;const f=sn({history:m,messageId:l.id}),h=l.content.find(g=>g.type==="image"&&g.partialGenerationStep!==void 0);if(f&&h){const g=No(f.content,h.partId);g&&(g.partialGenerationStep===0?g.type="deleted":g.type==="image"&&(g.isPartiallyLoading=!1,g.partialGenerationStep=void 0,g.status="non-complete"))}if(f){f.streamingState="idle";const g=f.content.filter(C=>C.type==="activity");for(const C of g)if(uae(C.activity)){C.activity.status==="running"&&(C.activity.status="failed");for(const y of C.activity.steps)y.status==="running"&&(y.status="completed")}}});const u=this.pendingSideBySideMessages.get(n);u&&(this.pendingSideBySideMessages.delete(n),ot(s,m=>{const f=sn({history:m,messageId:n});f&&(f.streamingState="idle",f.sideBySideConfig={...u,isStreamingComplete:!0})})),Et.set(xu,void 0),Et.set(jc,!1),window.setTimeout(()=>{Et.set(v1,m=>Un(m,f=>{const h=f.get(s);h!=null&&h.has(n)&&(h.delete(n),h.size===0&&f.delete(s))}))},3e3),Et.set(sw,!0),l&&Bae({message:l,conversationId:s}),hJ.run({conversationMessages:a,messageId:n,inputMethod:o.inputMethod})}}async function Kae(){try{const{load:e}=await B(async()=>{const{load:s}=await import("./botd.esm-m5kJVUyo.js");return{load:s}},__vite__mapDeps([3,1])),t=await e({monitoring:!1}),{bot:n}=t.detect();return n}catch(e){return D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"BotDetectionError",eventInfo_details:"Failed on bot detection",eventInfo_errorMessage:e instanceof Error?e.message:"Unknown bot detection error"}}),!1}}async function Zae(){return new Promise((e,t)=>{X_(async n=>{try{const s=await kn({path:"/challenges/verify",args:{body:{token:n,method:"cloudflare"}}}),{isValid:o}=await s.json();e(o)}catch(s){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CloudflareChallengeVerificationError",eventInfo_details:"Error verifying Cloudflare challenge",eventInfo_errorMessage:s instanceof Error?s.message:""}})}t()})})}const Yae="eval/chat",Ug=1e3,Qae=3e4,Jae=5e3,Xae=1e4,eie=3,V6=6e4;class tie{constructor({autoReconnect:t=!1}={}){O(this,"connection");O(this,"autoReconnect");O(this,"reconnectInterval");O(this,"maxReconnectInterval");O(this,"reconnectTimeout");O(this,"sendQueue",[]);O(this,"connecting",!1);O(this,"state",null);O(this,"cachedSendData",null);O(this,"pongTimeout",null);O(this,"windowStartTime",null);O(this,"connectionCount",0);O(this,"cooldownStart",null);O(this,"boundReconnectIfNeeded");O(this,"boundDisconnect");O(this,"boundVisibilityChange");O(this,"getUrl",null);O(this,"onopen");O(this,"onmessage");O(this,"onclose");O(this,"onerror");this.connection=null,this.autoReconnect=t,this.reconnectInterval=Ug,this.maxReconnectInterval=t?Qae:0,this.reconnectTimeout=null,this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.connect=this.connect.bind(this),this.reconnect=this.reconnect.bind(this),this.processSendQueue=this.processSendQueue.bind(this)}async initialize(){this.state=null,await this.connect(),this.autoReconnect&&(this.boundReconnectIfNeeded=this.reconnectIfNeeded.bind(this),this.boundDisconnect=this.disconnect.bind(this),this.boundVisibilityChange=()=>{document.visibilityState==="visible"&&this.reconnectIfNeeded()},window.addEventListener("online",this.boundReconnectIfNeeded),window.addEventListener("offline",this.boundDisconnect),document.addEventListener("visibilitychange",this.boundVisibilityChange))}async connect(){var n;if(((n=this.connection)==null?void 0:n.readyState)===WebSocket.CONNECTING||this.connecting||this.pongTimeout)return;if(!this.getUrl)throw new Error("getUrl function is not set");this.connecting=!0;const t=await this.getUrl();this.connection=new WebSocket(t),this.connecting=!1,this.connection.onopen=s=>{if(this.state=null,!_t("kill-rapid-reconnect-detect")){const o=performance.now();!this.windowStartTime||o-this.windowStartTime>=Xae?(this.windowStartTime=o,this.connectionCount=1):this.connectionCount+=1,this.connectionCount>=eie&&(this.cooldownStart=o,this.windowStartTime=null,this.connectionCount=0,this.sendQueue=[])}this.onopen&&this.onopen(s),this.processSendQueue(),this.reconnectInterval=Ug,this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},this.connection.onmessage=s=>{if(this.state!=="destroyed")try{const o=JSON.parse(s.data);this.onmessage&&this.onmessage(o),o.event==="pong"&&(this.removePongTimeout(),this.processSendQueue())}catch{}},this.connection.onclose=s=>{this.connection&&this.connection.bufferedAmount>0&&this.cachedSendData&&(this.sendQueue.push(this.cachedSendData),this.cachedSendData=null),this.onclose&&this.onclose(s),this.autoReconnect&&this.state===null&&this.reconnect(),this.removePongTimeout()},this.connection.onerror=s=>{this.onerror&&this.onerror(s),this.connection&&this.connection.close(),this.removePongTimeout()}}reconnect(){if(this.reconnectTimeout&&window.clearTimeout(this.reconnectTimeout),!_t("kill-rapid-reconnect-detect")&&this.cooldownStart){const t=performance.now()-this.cooldownStart;if(t<V6){const n=V6-t;this.reconnectTimeout=window.setTimeout(this.connect,n);return}this.cooldownStart=null,this.reconnectInterval=Ug}this.reconnectTimeout=window.setTimeout(this.connect,this.reconnectInterval),this.reconnectInterval=Math.min(this.reconnectInterval*2,this.maxReconnectInterval)}processSendQueue(){if(this.sendQueue.length>0){const t=this.sendQueue;this.sendQueue=[];for(const n of t)this.send(n)}}reconnectIfNeeded(){if(this.state!=="destroyed"){if(!this.connection||this.connection.readyState!==WebSocket.OPEN){this.reconnect();return}this.pongTimeout===null&&(this.connection.send(JSON.stringify({event:"ping"})),this.pongTimeout=window.setTimeout(()=>{var t;this.pongTimeout=null,(t=this.connection)==null||t.close(),this.reconnect()},Jae))}}removePongTimeout(){this.pongTimeout!==null&&(window.clearTimeout(this.pongTimeout),this.pongTimeout=null)}send(t){if(this.state!=="destroyed")if(this.connection&&this.connection.readyState===WebSocket.OPEN&&this.pongTimeout===null)try{this.cachedSendData=t,this.connection.send(t)}catch{this.sendQueue.push(t),this.connect()}else this.sendQueue.push(t),this.connect()}cleanup(){this.boundReconnectIfNeeded&&window.removeEventListener("online",this.boundReconnectIfNeeded),this.boundDisconnect&&window.removeEventListener("offline",this.boundDisconnect),this.boundVisibilityChange&&document.removeEventListener("visibilitychange",this.boundVisibilityChange)}disconnect(){this.connection&&(this.state="disconnected",this.connection.close())}destroy(){this.connection&&(this.state="destroyed",this.cleanup(),this.connection.close(),this.connection=null,this.windowStartTime=null,this.connectionCount=0,this.cooldownStart=null)}}async function ks({useMockConnection:e}={}){const t=async({cursor:n})=>{const o=!!gI()||!!vI()?Yae:"chat";return n?O4(o,{cursor:n}):O4(o)};return Pf.get({getUrl:t})}async function nie({getUrl:e}){if(typeof WebSocket>"u")return{destroy:()=>{},send:()=>{},regenerate:()=>{},sendSkipReasoning:()=>{},sendContext:()=>{},sendAudioStart:()=>{},sendAudio:()=>{},sendAudioEnd:()=>{},sendAudioClick:()=>{},setCharacterAppearance:()=>{},setCallType:()=>{},stop:()=>{},setOnEvent:()=>()=>{},setOnOpen:()=>{},sendChallengeResponse:()=>{},sendActionResult:()=>{},sendMessagePreview:()=>{},updateChatOptions:()=>Promise.resolve(),selectSxSMessage:()=>{},resetConversationState:()=>{},resetConversationTiming:()=>{},setConversationIdByMessageId:()=>{},setMessageIdByTaskId:()=>{},setChatModeForConversation:()=>{},setInputMethodForConversation:()=>{},setUploadCountsForConversation:()=>{},callBeforeSendForConversation:()=>{},callOnSentForConversation:()=>{},setUserMessageForConversation:()=>{},onSubmitMessageBlocked:()=>{}};const t=M1(),n=!!re.instance().config().isBotDetectionEnabled;if(be("client-side-request-challenge")&&!_t("kill-client-side-request-challenge")&&n&&!t){const s=await Kae(),o=!s||await Zae();if(D.trackEvent({name:"system",data:{eventName:"botDetectionTriggered",eventInfo_result:o?"success":"failed",eventInfo_isBot:s}}),!o)return Promise.reject()}return new Promise((s,o)=>{const r=_t("kill-chat-auto-reconnect"),a=new tie({autoReconnect:!r}),l=new qae(a);let u=null;a.getUrl=()=>e({cursor:l.latestMessagePartId}),a.onopen=async()=>{a.onmessage=d=>{try{T4.parse(d)}catch(m){m instanceof Wf&&Xu(m,"/chat")}l.processEvent(d)},await l.updateChatOptions(),u&&u(),s({destroy:()=>{a.destroy(),l.clearAllStreamingStates()},stop:(d={})=>{const{conversationId:m,taskId:f}=d;a.send(JSON.stringify({event:"stop",conversationId:m})),f&&a.send(JSON.stringify({event:"send",conversationId:m,content:[{type:"command",command:{type:"cancelTask",taskId:f}}],mode:"research"})),m&&ot(m,h=>{for(const g of h)g.author==="ai"&&g.streamingState==="streaming"&&(g.streamingState="idle")})},send:l.send,regenerate:l.regenerate,sendSkipReasoning:d=>{const{messageId:m}=d;a.send(JSON.stringify({event:"skipReasoning",messageId:m}))},sendContext:d=>{a.send(JSON.stringify({event:"sendContext",context:d}))},sendAudioStart:d=>{const{conversationId:m,options:f,clientType:h,mode:g,context:C}=d,v={event:"audioStart",conversationId:m,mode:g,options:f,clientType:h,context:C};a.send(JSON.stringify(v))},sendAudio:d=>{const m={event:"audio",audio:d};a.send(JSON.stringify(m))},sendAudioEnd:()=>{const d={event:"audioEnd"};a.send(JSON.stringify(d))},sendAudioClick:(d,m)=>{l.sendAudioClick(d,m)},setCharacterAppearance:d=>{l.setCharacterAppearance(d)},setCallType:d=>{const m={event:"setCallType",callType:d};a.send(JSON.stringify(m))},sendChallengeResponse:l.sendChallengeResponse,setOnEvent:d=>{a.onmessage=m=>{try{T4.parse(m),l.processEvent(m)}catch(f){f instanceof Wf&&Xu(f,"/chat")}d(m)}},setOnOpen:d=>{u=d},sendActionResult:d=>{a.send(JSON.stringify({event:"actionResult",actionId:d.actionId,result:d.result}))},selectSxSMessage:d=>{const{sideBySideComparisonId:m,selectedMessageId:f}=d,h={event:"selectMessage",sideBySideComparisonId:m,selectedMessageId:f};a.send(JSON.stringify(h))},resetConversationState:l.resetConversationState,resetConversationTiming:l.resetConversationTiming,setConversationIdByMessageId:l.setConversationIdByMessageId,setMessageIdByTaskId:l.setMessageIdByTaskId,setChatModeForConversation:l.setChatModeForConversation,setInputMethodForConversation:l.setInputMethodForConversation,setUploadCountsForConversation:l.setUploadCountsForConversation,callBeforeSendForConversation:l.callBeforeSendForConversation,callOnSentForConversation:l.callOnSentForConversation,setUserMessageForConversation:l.setUserMessageForConversation,onSubmitMessageBlocked:l.onSubmitMessageBlocked,sendMessagePreview:l.sendMessagePreview.bind(l),updateChatOptions:l.updateChatOptions.bind(l)})},a.onclose=()=>{},a.onerror=d=>{const m=d instanceof ErrorEvent?d.message:"Unknown WebSocket error";D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketError",eventInfo_errorMessage:m,eventInfo_details:JSON.stringify(d)}}),o(new Error(`WebSocket connection error: ${m}`))},a.initialize().catch(d=>{const m=d instanceof Error?d.message:"Unknown WebSocket error";D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketInitializationError",eventInfo_errorMessage:m,eventInfo_details:d instanceof Error?d.stack??"":""}}),o(new Error(`WebSocket initialization error: ${m}`))})})}async function VC(){if(Pf.isInstantiated){const e=pe(hn),t=pe(Hv),n=await Pf.get();n.stop(),n.destroy(),n.stop({conversationId:e==null?void 0:e.id}),Pf.reset();try{D.trackEvent({name:"system",data:{eventName:"chatClientReset",eventInfo_isMessageStreaming:t}})}catch{}}}const Pf=new zi(e=>nie(e));function sie(){const e=M(cn),t=W("account-change-chat-reset");c.useEffect(()=>{t&&VC()},[e,t])}function iT(e){const{onStartComplete:t}=e;c.useEffect(()=>{const n=()=>{t(),Ge.off("app:start-complete",n)};return Ge.on("app:start-complete",n),()=>{Ge.off("app:start-complete",n)}},[t])}function oie(){iT({onStartComplete:()=>{e()}});const e=()=>{try{const n="n59ae4ieqq";if(_t("kill-clarity")||!t(n))return()=>{};window.clarity||(window.clarity=function(...a){window.clarity&&(window.clarity.q=window.clarity.q??[]).push(a)});const o=document.createElement("script");return o.type="text/javascript",o.async=!0,o.src=`/cl/tag/${n}`,document.body.appendChild(o),window.clarity("signal",async r=>{if(r.type==="cl_dtrs"&&r.value){const a=pe(je);try{await kn({path:"/clarity/signal",args:{body:{token:r.value,conversationId:a}}}),D.trackEvent({name:"system",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:"Clarity",eventInfo_scenario:"Clarity signal event sent via API",eventInfo_customData:JSON.stringify(r)}})}catch(l){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ClaritySignalError",eventInfo_details:"Failed to send clarity via API",eventInfo_errorMessage:l instanceof Error?l.message:"Unknown clarity signal error"}})}}}),window.clarity("metadata",()=>{H2({surface:"cmc"});const r=pe(Vw);r!==null&&H2({isNewUser:r.toString()})},!1,!0),()=>{delete window.clarity,o.remove()}}catch(n){return D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"useClarity",eventInfo_details:"Error loading Clarity",eventInfo_errorMessage:`${n}`}}),()=>{}}},t=n=>n.trim()!==""}function rie(){c.useEffect(()=>{jv(["ak_failover"])},[])}function Fg(e){if(re.instance().config().persistThemeChoice){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e!==n?(An($r,e),tl($r,e,{expireDays:365*10})):(jt($r),N7($r))}document.documentElement.setAttribute("data-theme",e),Ge.emit("theme:color-applied",e)}function aie(){const e=ia($r),t=rn($r);return e??t??null}function iie(){const{persistThemeChoice:e,enforceTheme:t}=re.instance().config(),[n,s]=Ue(zo);c.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),r=l=>{const u=l.matches?"dark":"light";s(u),Fg(u),e&&(jt($r),N7($r))};let a=e?aie():"";return a!=="dark"&&a!=="light"&&(a=o.matches?"dark":"light"),t&&(a=t),s(a),Fg(a),o.addEventListener("change",r),()=>{o.removeEventListener("change",r)}},[s,e,t]),c.useEffect(()=>{n&&Fg(n)},[n])}const HC=new Set;function cie(e=!1){return rn(z0)!==null&&!e?!1:(jt(n1),jt(nl),fie(),An(z0,"true"),!0)}function cT(){return parseInt(rn(n1)??"0",10)}function lie(){return new Date(rn(nl)??new Date().toISOString())}function uie(e){rn(nl)||An(nl,e)}function die(e){let t;try{t=cT()}catch{t=0}t<a2&&(t+=1,An(n1,`${t}`),HC.add(e),t===a2&&uie(new Date().toISOString()))}function mie(e){e&&(HC.has(e)||die(e))}function fie(){HC.clear()}function pie(){const e=Qt(),t=se(Bw);c.useEffect(()=>{e&&cie()&&t(!0)},[e,t])}function hie(){c.useEffect(()=>{if(window.ReportingObserver===void 0)return()=>{};const e=new ReportingObserver(t=>{for(const n of t){if(n.type!=="csp-violation"||!n.body)continue;const{body:s}=n,{blockedURL:o,documentURL:r,effectiveDirective:a,disposition:l}=s;console.error("Reporting CSP violation",{blockedURL:o,documentURL:r,effectiveDirective:a,disposition:l}),D.trackEvent({name:"system",data:{eventName:"copilotCSPViolation",eventInfo_blockedURL:o,eventInfo_documentURL:r,eventInfo_effectiveDirective:a,eventInfo_disposition:l}})}},{buffered:!0,types:["csp-violation"]});return e.observe(),()=>{e.disconnect()}},[])}function gie(){const e=W("custom-1ds"),t=M(Mn);c.useEffect(()=>{if(!e||!re.instance().config().enableCustom1DS)return zE(),()=>{};if(!t)return()=>{};const n=()=>{if(window.oneDS){const{ApplicationInsights:r}=window.oneDS;return new r}},s=()=>{var u;window.OneDsAzureAnalytics=window.OneDsAzureAnalytics??n();function r(){var m;return!!!((m=window.OneDsAzureAnalytics)!=null&&m.getCookieMgr().get("MSCC"))}const a={adobe:r(),google:r()},l={instrumentationKey:"c72e6b24df604532a6282edd268b4ba4-9cdee1fe-5d2f-4626-9620-dbad9b53a8e5-8065",channelConfiguration:{eventsLimitInMem:50,autoFlushEventsLimit:1},propertyConfiguration:{userConsentCookieName:t1.name,gpcDataSharingOptIn:R7(),callback:{userConsentDetails:()=>{if(!c1.includes(t))return{Required:!0,Analytics:!0,SocialMedia:!0,Advertising:!0};const d=Ni();return{Required:Object.values(d).includes(!0),Analytics:d.analytics,SocialMedia:d.socialMedia,Advertising:d.advertising}}}},webAnalyticsConfiguration:{coreData:{appId:"JS:Copilot_microsoft_com"},cookiesToCollect:["_mkto_trk"],urlCollectQuery:!0,syncMuid:r()},extensionConfig:{IdSyncPlugin:a}};window.postConsAzure1DSInit||((u=window.OneDsAzureAnalytics)==null||u.initialize(l,[]),window.postConsAzure1DSInit=!0)},o=document.createElement("script");return o.src="https://az416426.vo.msecnd.net/scripts/c/ms.analytics-web-4.min.js",o.async=!0,o.onload=s,document.head.appendChild(o),()=>{document.head.removeChild(o)}},[e,t])}function J1(){const[e,t]=Ue(NZ),n=ut();return c.useEffect(()=>{n.endsWith("/chats/new/talk")&&(D.setLandingPage("deepLinkVoiceCall"),t("audioCall"))},[n,t]),[e,()=>t(null)]}function lT(e){const{deferred:t=!1}=e??{},n=b8(),[s,o]=Ue(qv),r=se(tm);c.useEffect(()=>{const u=DK();u&&o(u)},[n.search,o]);const a=c.useCallback(()=>{o(null)},[o]),l=c.useCallback(u=>{u&&r({source:"promptInUrl",prompt:u})},[r]);return c.useEffect(()=>{s&&!t&&l(s)},[t,l,s]),{prompt:s,handler:t?l:void 0,clear:a}}function vie(){const e=W("prompt-pt-learn-partial"),t=W("prompt-pt-learn-full"),n=W("prompt-pt-learn-fill"),s=W("prompt-pt-advice-partial"),o=W("prompt-pt-advice-full"),r=W("prompt-pt-advice-fill"),a=W("prompt-pt-ideas-partial"),l=W("prompt-pt-ideas-full"),u=W("prompt-pt-ideas-fill"),d=W("prompt-pt-msn-answers"),m=W("prompt-pt-msn-headlines"),f=W("prompt-pt-msn-events"),h=W("prompt-pt-msn-answers-full"),g=W("prompt-pt-msn-headlines-full"),C=W("prompt-pt-msn-events-full"),v=D.getFormCode();let y=null,b=!1,E=!1,S=!1;switch(v){case"NTPCHB":{e||t||n?y="teach":s||o||r?y="advice":(a||l||u)&&(y="ideas"),b=e||s||a,E=t||o||l,S=n||r||u;break}case"MSNCHB":{d||h?y="answers":m||g?y="headlines":(f||C)&&(y="events"),E=h||g||C,S=d||m||f;break}default:y=null}let I=null;b?I="prefix":(E||S)&&(I="complete");let _=null;return b||S?_="partial":E&&(_="full"),{formCode:v,treatment:y,lengthVariant:I,passthroughType:_}}function uT(e){var h;const{inEeaPlusRegion:t,labsFeatureEnabled:n,region:s,isUpsellFeatureEnabled:o,isAuthenticated:r,isTeenUser:a,isPremiumTierUser:l,skipPremiumTierUserCheck:u}=e;if(t&&!n)return!1;const d=!s||tv.includes(s),m=((h=re.instance().config().actions)==null?void 0:h.overrideFreemiumActionsUpsellFeatureEnabled)??!1;return l||u||(o||m)&&r&&!a&&!d}function Cie(){const e=pe(oC),t=be("labs-actions"),n=be("labs-actions-skipprocheck"),s=!1,o=M1(),r=pe(Zd),a=pe(Mn),l=!!pe(jw);return uT({inEeaPlusRegion:l,labsFeatureEnabled:t,region:a,isUpsellFeatureEnabled:s,isAuthenticated:o,isTeenUser:r,isPremiumTierUser:e,skipPremiumTierUserCheck:n})}function dT(e){const{actionsAvailableForAccount:t,actionsAvailableForSurface:n}=e;return t&&n}async function yie(){var s;const e=Cie(),n=await(((s=re.instance().config().actions)==null?void 0:s.enableActions)??(()=>Promise.resolve(!1)))();return dT({actionsAvailableForAccount:e,actionsAvailableForSurface:n})}function bie(e,t,n){return e&&(n&&t)}function mT(){const e=M(oC),t=W("labs-actions"),n=W("labs-actions-skipprocheck"),s=!1,o=Qt(),r=!!M(Zd),a=M(Mn),l=!!M(jw);return uT({inEeaPlusRegion:l,labsFeatureEnabled:t,region:a,isUpsellFeatureEnabled:s,isAuthenticated:o,isTeenUser:r,isPremiumTierUser:e,skipPremiumTierUserCheck:n})}function fT(){const[e,t]=c.useState(!1),n=M(_f);return c.useEffect(()=>{async function s(){var r;await(((r=re.instance().config().actions)==null?void 0:r.enableActions)??(()=>Promise.resolve(!1)))()&&t(!0)}s().catch(()=>{})},[t,n]),e}function zC(){const e=mT(),t=fT();return dT({actionsAvailableForAccount:e,actionsAvailableForSurface:t})}function iIe(){var s;const e=mT(),t=fT(),n=((s=re.instance().config().actions)==null?void 0:s.overrideLabsActionsFeatureEnabled)??!1;return bie(e,t,n)}function GC(){var s;const e=W("coco-mode"),t=((s=M(Yt))==null?void 0:s.ageGroup)==="adult";return e&&t}function WC(){const e=W("searchmode")||(re.instance().config().enableSearchMode??!1),t=Gt("kill-search-mode");return e&&!t}const pT=["smart-mode-6e0b4c6f","smart-mode-cd0c997b","smart-mode"];function Pl(){return DC(pT,"any")}function xie(){return ud(pT,"any")}let Lf=null;function Sie(){const e=se(YE),t=zC(),n=Pl(),s=WC(),o=W("study-mode"),r=GC();c.useEffect(()=>{const a=LK(),l=FK();Lf===null&&(Lf=a);const u=m=>m==="td"?"reasoning":t&&m==="ac"?"computerUse":n&&m==="sm"?"smart":s&&m==="cs"?"search":o&&m==="st"?"study":r&&m==="co"?"coco":null,d=u(a||Lf);d&&Zt(d),l&&e(!0)},[t,s,n,o,r,e])}function Eie(){return Lf}function wie(e,t,n,s={text:"",atTimestamp:0,files:[]}){return n?t.length!==s.files.length?!0:!!!(e&&e.length>=n.minTextLength)||s.atTimestamp&&s.atTimestamp+n.debounceInMilliseconds>=Date.now()?!1:e&&s.text&&(e.includes(s.text)||s.text.includes(e))?Math.abs((e.length-s.text.length)/s.text.length)>=n.textDeltaPercent/100:!0:!1}function cIe(e){let t,n;for(let s=e.length-1;s>=0;s-=1){const o=e[s];if((o==null?void 0:o.author)!=="system")if(!t)t=o;else{n=o;break}}return{lastNonSystemMessage:t,secondToLastNonSystemMessage:n}}R(null);const H6=R(new Map),hT=R(null),Iie=R(!1),ra=R(null),$C=R(e=>{const t=e(ra);return(t==null?void 0:t.type)==="attachments"?t.uploadAttachments:[]},(e,t,n)=>{const s=e(ra),o=e($C),r=typeof n=="function"?n(o):n;r.length===0&&(s==null?void 0:s.type)!=="attachments"||t(ra,{type:"attachments",uploadAttachments:r})}),Vo=R(e=>{const t=e(ra);return(t==null?void 0:t.type)==="tabs"?t.userAddedTabs:new Map},(e,t,n)=>{const s=e(ra),o=e(Vo),r=typeof n=="function"?n(o):n;r.size===0&&(s==null?void 0:s.type)!=="tabs"||t(ra,{type:"tabs",userAddedTabs:r})}),_ie=R(e=>{const t=e(ra);return(t==null?void 0:t.type)==="attachments"&&t.uploadAttachments.length>0}),Tie=R(e=>{const t=e(ra);if((t==null?void 0:t.type)!=="tabs"||t.userAddedTabs.size===0)return!1;for(const n of t.userAddedTabs.values())if(n.sourceType==="journeysNTP")return!1;return!0});function Aie(){var t;const e=pe(Nw);if(e)return{character:{id:e.id,locationId:(t=e.location)==null?void 0:t.id}}}function gT(){const e=hl(vt),t=se(zd);return c.useCallback((n,s)=>{e(o=>{const r=o.get(n);if(r){const{history:a}=r;s(a);const l=a.at(-1);if(l){const u=new Date(r.updatedAt),d=new Date(l.createdAt);u<d&&(r.updatedAt=l.createdAt)}a.length>2&&(r.isNew=!1,t(!0))}return o})},[e,t])}const kie=$e();function qC(e,t){$e().set(vt,n=>Un(n,s=>{const o=s.get(e);if(o){const{history:r}=o;t(r);const a=r.at(-1);if(a){const l=new Date(o.updatedAt),u=new Date(a.createdAt);l<u&&(o.updatedAt=a.createdAt)}r.length>2&&(o.isNew=!1,kie.set(zd,!0))}}))}function X1(e){const t=W("force-cookie-banner-location");return(e&&c1.includes(e))===!0||t}const Mie=5e3,Nie="largest-contentful-paint";function Rie(e,t=Mie){if(!Pie())return G2(e,t);try{return Oie(e,t)}catch{return G2(e,t)}}function Pie(){return"PerformanceObserver"in window}function G2(e,t){const n=setTimeout(e,t);return()=>clearTimeout(n)}function Lie(e){typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,0)}function Oie(e,t){let n=!1;const s=new PerformanceObserver(l=>{if(n)return;l.getEntries().length>0&&r()});try{s.observe({type:Nie,buffered:!0})}catch{return G2(e,t)}const o=setTimeout(()=>{n||r()},t);function r(){n=!0,s.disconnect(),Lie(e)}function a(){n||(n=!0,s.disconnect(),clearTimeout(o))}return a}function Die(){const e=Gt("kill-bing-uet"),t=M(Mn),n=X1(t);c.useEffect(()=>{const s=Ni(),o=!!q5(),r=n?o&&s.advertising:!0;if(e||!r||!t)return;const a=document.createElement("script");a.src="https://bat.bing.com/bat.js",a.defer=!0,a.onload=()=>{if(!window.UET)return;window.uetq=window.uetq??[];const d={ti:"355045625",enableAutoSpaTracking:!0};window.uetq=new window.UET(d),window.uetq.push("pageLoad")};const u=Rie(()=>{document.querySelector('script[src="https://bat.bing.com/bat.js"]')||document.head.appendChild(a)});return()=>{u();try{const d=document.querySelector('script[src="https://bat.bing.com/bat.js"]');d&&document.head.removeChild(d)}catch{}}},[e,t,n])}let z6=!1;function jie(){z6||(z6=!0,window.uetq=window.uetq??[],window.uetq.push("event","outbound_click",{}))}function vT(){const e=W("smart-mode-6e0b4c6f"),t=W("smart-mode-cd0c997b"),n=yT(t),s=e||t?z("composer.chatModes.smart.coachmarkDescriptionGPT5Variant"):z("composer.chatModes.smart.description");return{title:e?tS:eS,description:z(n),coachmarkDescription:s}}function CT(){const e=be("smart-mode-6e0b4c6f"),t=be("smart-mode-cd0c997b"),n=yT(t);return{title:e?tS:eS,description:z(n)}}function yT(e){return e?"composer.chatModes.smart.descriptionGPT5Variant":"composer.chatModes.smart.description"}function bT(e){return e?e.startsWith("!"):!1}function md(e){return e==="reasoning"?X7:e==="smart"?CT().title:z(`composer.chatModes.${e}.title`)}function Uie(e){const t=CT();return e==="smart"?t.description:z(`composer.chatModes.${e}.description`)}const er=$e(),G6={};async function xT(e){const{text:t,filesWithAttachment:n=[],command:s}=e,o=yo(),r=pe(je),{result:a}=await gJ.run({chatMode:o,message:t??""}),l=n.length===0||n.every(({error:f,attachment:h})=>!!f||!h);return{isSubmittable:!!r&&!(!t&&l&&!s),shouldDropAccordingToMiddleware:!!a}}async function ST(e,t=!1){const{text:n,filesWithAttachment:s=[],inputMethod:o,command:r,context:a,reference:l,galleryImageUrl:u}=e,d=Aie(),m=yo(),f=pe(je),h=pe(_s),g=pe(Vo),C=be("adsshowroombrandagent");if(!f)throw new Error("No conversation ID found");let v=0,y=0;const b=[];if(u){const k=Kie(u);b.push(k)}for(const k of s)k.attachment&&(k.attachment.item.type==="image"?v+=1:k.attachment.item.type==="document"&&(k.attachment.item.partId=`${y}`,y+=1),b.push(k));const E=[],S={id:"",createdAt:new Date().toISOString(),author:"human",content:[],inputMethod:o,mode:m};h&&h.conversationId===f&&(S.brand=h);for(const{attachment:k}of b)k&&(S.content.push(k.item),E.push(k.content));if(g.size>0&&(pe(hT)==="currentPage"?er.set(Vo,new Map):S.content.push({type:"browserTabs",tabs:Array.from(g.values()).map(N=>({id:N.id,title:N.title,url:N.url,windowId:N.windowId,favIconUrl:N.favIconUrl}))})),n){S.content.push({type:"text",text:n});let{textToSend:k}=await vJ.run({textToSend:n,chatMode:m});g.size>0&&!k.startsWith("/")&&(k=`${z("composer.multiTabs.multitabsprompt",{CountOfAddTabs:g.size})} ${k}`),E.push({type:"text",text:k})}r&&(S.content.push({type:"command",command:r}),E.push({type:"command",command:r})),l&&E.push({type:"reference",reference:l}),!(r&&Re([m1,Li]).safeParse(r.type).success)&&!t&&qC(f,k=>{k.push(S)});const{sendData:_,additionalData:T}=await pI.run(S);return{sendMessageParams:{content:E,conversationId:f,data:_,mode:m,context:{...d,...a,ads:h?{showroom:{brandId:h.brandId,adId:h.adId??void 0,scenario:C?"chat":void 0}}:void 0}},newMessage:S,filesToSubmit:b,additionalData:T,imagesUploaded:v,documentsUploaded:y}}async function Fie(e){var E,S,I,_,T;const{text:t,inputMethod:n,scenario:s,customData:o,entryPoint:r}=e,a=yo(),l=pe(je),u=pe(_s),d=pe(Vo),m=pe(H6),f=be("multi-file-upload"),{isSubmittable:h,shouldDropAccordingToMiddleware:g}=await xT(e);if(g){a==="computerUse"&&Zt(vn());return}const C=performance.now();if(er.set(JE,C),!h||!l)return;await yie()&&(a==="computerUse"?(ye({source:"copilotActionsStartTask",customData:JSON.stringify({conversationId:l})}),er.set(jc,!0)):er.set(jc,!1)),aT({sideBySideComparisonId:l,reason:"sentNewMessage"}),CC(l);const v=await ST(e);er.set(vt,A=>Un(A,k=>{const N=k.get(l);N&&(N.suggestedFollowup=void 0)})),er.set(_s,A=>A&&{...A,lastUserMessageRguid:A.activeCardRguid});const y=await ks({useMockConnection:bT(t)});d.size>0&&er.set(Vo,new Map),m.size>0&&(er.set(H6,new Map),er.set(hT,null)),y.send(v.sendMessageParams),y.resetConversationState(l,C),y.setChatModeForConversation(l,a),y.setInputMethodForConversation(l,n),y.setUploadCountsForConversation(l,v.imagesUploaded,v.documentsUploaded),y.callBeforeSendForConversation(l),y.callOnSentForConversation(l,v.additionalData),y.setUserMessageForConversation(l,v.sendMessageParams);const b={eventName:"copilotCompose",eventInfo_conversationId:l,eventInfo_inputMethod:n,eventInfo_numImagesUploaded:v.imagesUploaded,eventInfo_numDocumentsUploaded:v.documentsUploaded,eventInfo_mode:a,eventInfo_landingPage:D.getLandingPage(),...v.filesToSubmit.length>0?{eventInfo_uploadFileSize:((S=(E=v.filesToSubmit[0])==null?void 0:E.file)==null?void 0:S.size)??0,eventInfo_uploadFileType:(_=(I=v.filesToSubmit[0])==null?void 0:I.attachment)==null?void 0:_.type}:{}};f&&(b.eventInfo_uploadFilesInfo=JSON.stringify(v.filesToSubmit.map(({file:A,attachment:k,scenario:N})=>({scenario:N,type:(k==null?void 0:k.type)??"",size:(A==null?void 0:A.size)??""})))),v.additionalData&&(b.eventInfo_additionalData=v.additionalData),s&&(b.eventInfo_scenario=s),o&&(b.eventInfo_customData=o),u&&(b.eventInfo_adsContext=JSON.stringify({showroomBrandId:u.brandId,showroomBrandName:(T=u.brandLogo)==null?void 0:T.businessName})),r&&(b.eventInfo_entryPoint=r),D.trackEvent({name:"interaction",data:b}),jie(),DJ(n),aae(),a==="computerUse"&&Zt(vn())}async function Bie(){const e=pe(je);e&&(await ks()).onSubmitMessageBlocked(e)}async function Vie(){var s,o;const e=await ks(),t=pe(je),n=(o=(s=YI(t))==null?void 0:s.part.task)==null?void 0:o.id;t&&(CC(t),aT({sideBySideComparisonId:t,reason:"stoppedMessage"})),e.stop({conversationId:t,taskId:n})}async function Hie(e){const{messageId:t,runHumanMessageSendDataMiddleware:n}=e,s=performance.now(),o=pe(je);if(!o)return;qC(o,l=>{const u=vi(l);u&&u.id===t&&l.pop()});let r={...e};if(n){const l=Dee(o);if(l){const{sendData:u}=await pI.run({id:l.id,createdAt:l.createdAt,author:l.author,content:l.content,mode:l.mode});u&&(r={...r,...u})}}const a=await ks();a.regenerate(r),a.resetConversationTiming(o,s),a.setChatModeForConversation(o,yo()),a.callBeforeSendForConversation(o)}async function zie(e){const t=performance.now(),n=pe(je);if(!n)return;const s=await ks();s.sendSkipReasoning(e),qC(n,o=>{const r=vi(o);(r==null?void 0:r.id)===e.messageId&&o.pop()}),s.resetConversationTiming(n,t),s.callBeforeSendForConversation(n)}async function Gie(e){const{text:t,filesWithAttachment:n=[]}=e,s=pe(je),o=pe(nw),{isSubmittable:r}=await xT(e);if(!r||!s)return;if(wie(t??"",n,o,G6[s])){const l=await ks({useMockConnection:bT(t)}),u=await ST(e,!0);l.sendMessagePreview(u.sendMessageParams),G6[s]={text:t??"",atTimestamp:Date.now(),files:n}}}async function Wie(e){(await ks()).selectSxSMessage(e)}async function $ie(e){const t=pe(je);if(!t)return;const{messageId:n,partId:s}=e,o=await ks(),r=yo(),a={conversationId:t,mode:r,content:{type:"command",command:{type:"updateCard",messageId:n,partId:s,update:{type:"consent",status:"rejected"}}}};o.send(a)}async function qie(){await ks()}const jn={connect:qie,submitMessage:Fie,stopMessage:Vie,onSubmitMessageBlocked:Bie,regenerateMessage:Hie,skipReasoningForMessage:zie,sendMessagePreview:Gie,selectSideBySideMessage:Wie,updateCardMessageCommand:$ie};function lIe(e,t){return e.find(n=>n.partId===t)}function Kie(e){return{attachment:{item:{type:"image",url:e},content:{type:"image",url:e},size:0,type:"image/webp"}}}function ET(e){const{deferred:t=!1}=e??{},n=!!M(je),s=M(Wd),[o,r]=Ue($v),a=se(tm),l=ut(),u=l.startsWith("/chats")&&l!=="/chats/new";c.useEffect(()=>{const h=Eie()==="ac"||u?null:OK();if(h){const g=qK();r({prompt:h,inputMethod:g}),a({source:"queryInUrl",prompt:h})}},[a,r,u]);const d=c.useCallback(()=>{r(null)},[r]),m=c.useCallback(f=>{f&&(a({source:"queryInUrl",prompt:f}),(async()=>{if(n&&s&&f){const g=(o==null?void 0:o.inputMethod)??"queryParam";await Js(),await jn.submitMessage({text:f,inputMethod:g}),d()}})().catch(console.error))},[a,n,s,d,o]);return c.useEffect(()=>{!t&&o&&m(o.prompt)},[t,m,o]),{prompt:(o==null?void 0:o.prompt)??null,handler:t?m:void 0,clear:d}}function wT(){const e=Zie(),t=Yie();return e.prompt?e:t}function Zie(){const{t:e}=q(),{formCode:t,lengthVariant:n,treatment:s,passthroughType:o}=vie();if(t&&n&&s){const r=e(`promptsByFormCode.${t}.${s}.${n}`,"");return{passthroughType:o,prompt:r,source:r?{type:"formCode",formCode:t}:void 0}}return{passthroughType:null}}function Yie(){const{prompt:e}=lT({deferred:!0}),{prompt:t}=ET({deferred:!0});let n=null,s;return e?(n="partial",s=e):t&&(n="full",s=t),{passthroughType:n,prompt:s,source:s?{type:"query"}:void 0}}const Qie=["www.bing.com"];function Jie(){if(!be("restrict-prompt-passthrough-by-domain")||!re.instance().config().restrictPromptPassthroughDomains)return!0;const{referrer:e}=document;if(!e)return!1;const t=new URL(e);return Qie.includes(t.hostname)}function Xie(e){const{handler:t,clear:n}=lT({deferred:!0}),{handler:s,clear:o}=ET({deferred:!0}),{passthroughType:r,prompt:a}=wT(),l=c.useCallback(f=>{D.setLandingPage("chatWithPartialPromptPassthrough"),t(f)},[t]),u=c.useCallback(f=>{D.setLandingPage("chatWithFullPromptPassthrough"),s(f)},[s]),d=c.useCallback(()=>{n(),o()},[o,n]),m=c.useCallback(()=>{if(!Jie()){d();return}if(a&&r)switch(r){case"partial":l(a);break;case"full":u(a);break}},[u,l,d,r,a]);c.useEffect(()=>{e&&m()},[e,m])}const IT=R(null),_T=R(!1),ece=R(!1),uIe=R(0),tce=R("free-talk");function KC(){const e=ut(),t=M(IT),n=M(_T),s=M(tce),o=W("labs-portrait-enabled")&&e.startsWith("/labs/portrait"),r=W("labs-portrait-v2"),a=o&&t,l=a?t.id:void 0,u=a&&!n?t.voiceId:void 0;return{isPortraitEnabled:o,isPortraitV2Enabled:r,portraitId:l,portraitVoiceId:u,portraitScenario:s}}const nce=["study-mode-lumi","study-mode-lumi-v2","study-mode-summary"];function eh(){const e=W("study-mode-summary"),n=Ys()==="study";return e&&n&&!Hd()}const TT=["character-animation-spda2e","character-animation-vasa"],sce=[...TT,...nce];function AT(e){return e==="study"?sce:TT}function mm(){const{isPortraitEnabled:e}=KC(),t=Ys(),{lumiEnabled:n=!1}=re.instance().config();return!!((!!DC(AT(t),"any")||n)&&!e&&(!Hd()||be("appr-mobile")))}function ZC(){const e=M(Co);return mm()&&!!e}function Bs(){const e=$e().get(Co),t=yo(),{lumiEnabled:n=!1}=re.instance().config();return!!((!!ud(AT(t),"any")||n)&&e)}function sf(e){return ww.includes(e)}function oce(){const e=ut(),t=c.useRef(!1),n=M(Yt),[s,o]=Ue(Co),r=mm();c.useEffect(()=>{e.startsWith("/chats")&&tn("appearance-talk")==="1"&&(t.current=!0)},[e]),c.useEffect(()=>{r&&n&&t.current&&(t.current=!1,o(wa))},[n,t,s,o,r])}function Qi(){const e=M(Ea),t=M(hn);return e.length===0&&!!(t!=null&&t.isNew)}function kT(){try{return Ma().latestLocation.pathname}catch{return typeof window<"u"&&window.location.pathname?window.location.pathname:"/"}}function Sr(){return kT()==="/"}function MT(e){c.useEffect(()=>{const t=()=>{e()};return Rt.on("languageChanged",t),()=>{Rt.off("languageChanged",t)}},[e])}function YC(){const e=HK()??zK();if(e&&GK(e))return e}const _p=R(0),rce=R(0),NT=R(void 0),th=R(!1),QC=R(e=>{const t=e(FZ),n=e(lw),s=e(NT),o=e(th);if(t)return t;if(!(o||n))return s}),nh=R(e=>{const t=e(QC),n=t==null?void 0:t.widgets,s=e(_p);if(!n||n.length===0)return;const o=Math.max(0,Math.min(s,n.length-1));return n[o]}),JC=R(e=>{var o;const t=e(QC),n=e(th),s=e(_p);if(n||!t)return null;if(t.greetingOptions.length>0){const r=Math.max(0,Math.min(s,t.greetingOptions.length-1));return((o=t.greetingOptions[r])==null?void 0:o.text)??null}return null}),RT=R(!1),ace=R(e=>{const t=e(nh);return t==null?void 0:t.id}),ice=R(e=>{const t=e(nh);return(t==null?void 0:t.type)==="textAndImage"}),cce=R(null,(e,t)=>{const n=e(QC),s=e(_p);if(!n||n.widgets.length<=1||n.greetingOptions.length<=1)return;const o=Math.min(n.widgets.length,n.greetingOptions.length),r=(s+1)%o;t(_p,r)}),Tp=1e3*60*60,lce={refetchInterval:Tp,refetchOnWindowFocus:!1,staleTime:Tp};async function uce(e,t,n){return Ct(e,xK,{query:{supportedWidgets:t.join(","),...n?{intent:n}:{}},options:{method:"GET",headers:{"Content-Type":"application/json"}},analytics:{anonymousPath:e}}).then(s=>s.data)}function W6(e){return e?["conversation-starter"]:["conversation-starter","image-generation","conversation-starter-prompted-greeting","categorized-conversation-starter","conversation-starter-send-message"]}function dce(){var h;const e=se(NT),[t,n]=c.useState(!1),s=YC(),o=se(th),r=Gt("kill-landing-widgets"),a=!!((h=re.instance().config().landingPage)!=null&&h.shouldFetchWidgetsData);iT({onStartComplete:()=>{n(!0)}});const l=t&&a,{data:u,isLoading:d,error:m,refetch:f}=Ms({queryKey:["homepage",W6(r),s],enabled:l,queryFn:()=>uce("/activation/homepage",W6(r),s),...lce});c.useEffect(()=>{o(d)},[d,o]),MT(()=>l&&f()),c.useEffect(()=>{if(u!=null&&u.pages){const g=u.pages[0];g&&e(g)}},[u,e]),c.useEffect(()=>{m&&(D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"homepage",eventInfo_errorMessage:String(m),eventInfo_details:"Homepage API error"}}),o(!1),e(void 0))},[m,e,o])}function mce(){const e=M(JC),t=Qi(),n=Sr(),s=e&&t&&n;return c.useMemo(()=>{if(s)return{type:"greeting",greetingMessage:e}},[e,s])}function fce(e=5){const t=M(je),n=M(I1),s=W("adsidsync"),o=M(Mn),r=Qt(),a=X1(o),l=M(Zv),u=wl();c.useEffect(()=>{const{adsEnabled:d,adsIdSyncEnabled:m,enforceAdsOptOutOfPersonalization:f}=re.instance().config(),h=d&&!u;if(t&&n&&(s||m)){const g=q5(),v=Ni().advertising;if(D.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"syncAdvertisingId",eventInfo_conversationId:t,eventInfo_additionalData:JSON.stringify({isAdsEnabled:h,isAdPersonalizationEnabled:v,isAuthenticated:r,adsIdSyncEnabled:m,isGdprPlusRegion:a,isChoiceCookieEmpty:!g})}}),!m&&!h)return;const y=new URLSearchParams;if(y.append("cpid",n),y.append("cvid",t),r&&y.append("cp","1"),g){if(a&&!v)return;v&&!f?y.append("ps","1"):y.append("ps","0")}else{if(a)return;y.append("ps","1")}const b=`https://c.bing.com/cp?${y}`,E=performance.now();Xd(async()=>{const S=await fetch(b,{method:"GET",mode:"no-cors",credentials:"include"}),I=performance.now();$w(b,"GET",I-E,S.clone())},{maxRetries:e,initialDelayMs:1e3,backoffFactor:2,maxDelayMs:6e4,jitterFactor:0,onFailure:({attemptCount:S,errors:I,exitReason:_})=>{const T=I[I.length-1],A={errorType:(T==null?void 0:T.errorType)??"Unknown",errorMessage:(T==null?void 0:T.errorMessage)??"Unknown error",attemptNumber:S,maxRetries:e,url:b,userAgent:navigator.userAgent,onlineStatus:navigator.onLine,exitReason:_};D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_errorMessage:"Ads Id Sync failed with error",eventInfo_details:JSON.stringify(A)}})}}).catch(()=>{})}},[l,t,o,e,a,s,n,r,u])}function PT(){return M(Mn)==="US"&&re.instance().config().proSubscription.enabled}const LT="free";function Gr(e){return e instanceof Error?{errorCode:e.toString(),errorDetails:e.message}:{errorCode:"unknown",errorDetails:String(e)}}function Ll(e,t,n){const s={eventInfo_payflowEntryPoint:t.payflowEntryPoint,eventInfo_upsellReason:t.upsellReason,eventInfo_loginProvider:t.loginProvider,eventInfo_payflowType:"DIME",eventInfo_payflowInstanceId:t.payflowInstanceId,eventInfo_curatedSubscription:t.curatedSubscription,eventInfo_correlationId:t.correlationId,eventInfo_dimeMarket:t.dimeMarket,eventInfo_campaignId:t.campaignId};let o;switch(e){case"payflowEnter":o={eventName:"payflowEnter",...s,eventInfo_upsellEntryStyle:(n==null?void 0:n.eventInfo_upsellEntryStyle)||"Banner"};break;case"payflowLoginClick":o={eventName:"payflowLoginClick",...s};break;case"dimeCheckoutRendering":o={eventName:"dimeCheckoutRendering",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutSuccess":o={eventName:"dimeCheckoutSuccess",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutClosed":o={eventName:"dimeCheckoutClosed",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;case"dimeCheckoutError":o={eventName:"dimeCheckoutError",eventInfo_errorCode:(n==null?void 0:n.eventInfo_errorCode)??"",eventInfo_errorDetails:(n==null?void 0:n.eventInfo_errorDetails)??"",...s,eventInfo_dimeExperienceId:(n==null?void 0:n.eventInfo_dimeExperienceId)??""};break;default:o={eventName:"unknown",...s};break}D.trackEvent({name:"interaction",data:o})}function pce(e){Ll("payflowEnter",e,{eventInfo_upsellEntryStyle:e.upsellEntryStyle??""})}function dIe(e){Ll("payflowLoginClick",e)}function hce(e){Ll("dimeCheckoutRendering",e,{eventInfo_dimeExperienceId:e.dimeExperienceId,eventInfo_upsellEntryStyle:e.upsellEntryStyle??""})}function gce(e){Ll("dimeCheckoutSuccess",e,{eventInfo_dimeExperienceId:e.dimeExperienceId,eventInfo_upsellEntryStyle:e.upsellEntryStyle??""})}function vce(e){Ll("dimeCheckoutClosed",e,{eventInfo_dimeExperienceId:e.dimeExperienceId,eventInfo_upsellEntryStyle:e.upsellEntryStyle??""})}function mIe(e){D.trackEvent({name:"interaction",data:{eventName:"manageSubPageActionClick",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription,eventInfo_actionTarget:e.actionTarget}})}function fIe(e){D.trackEvent({name:"interaction",data:{eventName:"manageSubFREShown",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription}})}function pIe(e){D.trackEvent({name:"interaction",data:{eventName:"manageSubPageLoaded",eventInfo_loginProvider:e.loginProvider,eventInfo_curatedSubscription:e.curatedSubscription,eventInfo_willShowFre:e.willShowFre,eventInfo_willShowProDeprecation:e.willShowProDeprecation,eventInfo_upgradeButtonShown:e.upgradeButtonShown,eventInfo_upgradeButtonTarget:e.upgradeButtonTarget,eventInfo_manageButtonShown:e.manageButtonShown,eventInfo_manageButtonTarget:e.manageButtonTarget,eventInfo_cancelButtonShown:e.cancelButtonShown,eventInfo_cancelButtonTarget:e.cancelButtonTarget,eventInfo_proAutoRenewOn:e.proAutoRenewOn}})}function Bg(e){Ll("dimeCheckoutError",e,{eventInfo_dimeExperienceId:e.dimeExperienceId,eventInfo_errorCode:e.errorCode,eventInfo_errorDetails:e.errorDetails})}function Oo({scenario:e,duration:t=0,customData:n}){po({feature:"subscriptions",scenario:e,duration:t,customData:n?JSON.stringify(n):void 0})}function ir({errorCode:e,errorDetails:t,scenario:n,customData:s}){Kt({feature:"subscriptions",scenario:n,errorType:e,errorMessage:t,customData:s?JSON.stringify(s):void 0})}function OT(e){const{correlationId:t,payflowInstanceId:n}=e;D.trackEvent({name:"system",data:{eventName:"payflowUserMismatched",eventInfo_correlationId:t,eventInfo_payflowInstanceId:n}})}function Cce(e){const{payflowEntryPoint:t,upsellReason:n,loginProvider:s,disabledReason:o,curatedSubscription:r}=e;D.trackEvent({name:"interaction",data:{eventName:"payflowEntryDisabled",eventInfo_payflowEntryPoint:t,eventInfo_upsellReason:n,eventInfo_loginProvider:s,eventInfo_disabledReason:o,eventInfo_curatedSubscription:r}})}function yce(e){const{upsellEntryStyle:t,actionButton:n,payflowEntryPoint:s,upsellReason:o,loginProvider:r,payflowType:a,curatedSubscription:l}=e;D.trackEvent({name:"interaction",data:{eventName:"payflowEntryImpression",eventInfo_upsellEntryStyle:t,eventInfo_actionButton:n,eventInfo_payflowEntryPoint:s,eventInfo_upsellReason:o,eventInfo_loginProvider:r,eventInfo_payflowType:a,eventInfo_curatedSubscription:l}})}function Vg(e){const{entryPoint:t,featureName:n}=e;D.trackEvent({name:"interaction",data:{eventName:"featureQuotaRunningOutShown",eventInfo_entryPoint:t,eventInfo_featureName:n}})}function Hg(e){const{entryPoint:t,featureName:n}=e;D.trackEvent({name:"interaction",data:{eventName:"featureQuotaRunningOutOptionClick",eventInfo_entryPoint:t,eventInfo_featureName:n}})}function hIe(e){const{upsellEntryStyle:t,actionButton:n,payflowEntryPoint:s,upsellReason:o,loginProvider:r,payflowType:a,curatedSubscription:l,payflowInstanceId:u,correlationId:d,duration:m}=e;D.trackEvent({name:"interaction",data:{eventName:"upgradeBenefitDialogLoad",eventInfo_upsellEntryStyle:t,eventInfo_actionButton:n,eventInfo_payflowEntryPoint:s,eventInfo_upsellReason:o,eventInfo_loginProvider:r,eventInfo_payflowType:a,eventInfo_curatedSubscription:l,eventInfo_payflowInstanceId:u,eventInfo_correlationId:d,eventInfo_duration:m}})}function gIe(e){const{upsellEntryStyle:t,actionButton:n,payflowEntryPoint:s,upsellReason:o,loginProvider:r,payflowType:a,curatedSubscription:l,payflowInstanceId:u,correlationId:d}=e;D.trackEvent({name:"interaction",data:{eventName:"upgradeBenefitDialogContinue",eventInfo_upsellEntryStyle:t,eventInfo_actionButton:n,eventInfo_payflowEntryPoint:s,eventInfo_upsellReason:o,eventInfo_loginProvider:r,eventInfo_payflowType:a,eventInfo_curatedSubscription:l,eventInfo_payflowInstanceId:u,eventInfo_correlationId:d}})}function vIe(e){const{payflowEntryPoint:t,upsellEntryStyle:n,pageName:s,clickSource:o,entryPoint:r}=e;D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_payflowEntryPoint:t,eventInfo_upsellEntryStyle:n,eventInfo_pageName:s,eventInfo_clickSource:o,eventInfo_entryPoint:r}})}const bce="https://content.lifecycle.office.net/dime/v1/dime.js";function xce(){return new Promise((e,t)=>{const n=performance.now(),s=document.createElement("script");s.src=bce,s.type="text/javascript",s.async=!0,s.onload=()=>{Oo({scenario:"loadDimeScript",duration:performance.now()-n}),e()},s.onerror=()=>{const o=new Error("Failed to load Dime script");ir({...Gr(o),scenario:"loadDimeScript",customData:{duration:performance.now()-n}}),t(o)},document.head.appendChild(s)})}const $6=new zi(xce);async function Sce({language:e,market:t,sessionId:n}){var r,a;const s={language:e,market:t,sessionId:n},o=performance.now();try{const[l]=await Promise.all([xI(),$6.get()]);Oo({scenario:"prepareDimeInitialization",duration:performance.now()-o,customData:s}),l||ir({scenario:"initializeDime",errorCode:"noUserInfo",customData:s}),l!=null&&l.username||ir({scenario:"initializeDime",errorCode:"NoMSAAuthHint",customData:s}),(r=l==null?void 0:l.idTokenClaims)!=null&&r.puid||ir({scenario:"initializeDime",errorCode:"NoMSAPuid",customData:s});const u=new window.Dime({language:e,market:t,sessionId:n,partnerId:"cmc",authHint:l==null?void 0:l.username,userInfo:{puid:(a=l==null?void 0:l.idTokenClaims)==null?void 0:a.puid}});return Oo({scenario:"initializeDime",duration:performance.now()-o,customData:s}),u}catch(l){return $6.reset(),ir({...Gr(l),scenario:"initializeDime",customData:{...s,duration:performance.now()-o}}),null}}const zg=new zi(e=>Sce(e));var li,$c;class Ece{constructor(){Vt(this,li,Dn("payflowCorrelationId")??crypto.randomUUID());Vt(this,$c);O(this,"ensureDime",async({language:t,market:n})=>{const s=performance.now(),o={language:t,market:n,sessionId:me(this,li)};me(this,$c)&&t!==me(this,$c)&&(zg.reset(),Oo({scenario:"resetDimeForLanguageChange",customData:o})),bt(this,$c,t);const r=await zg.get({language:t,market:n,sessionId:me(this,li)});return Oo({scenario:"ensureDime",duration:performance.now()-s,customData:o}),r});O(this,"overrideSessionId",t=>{zg.reset(),bt(this,li,t)})}get sessionId(){return me(this,li)}}li=new WeakMap,$c=new WeakMap;const of=new Ece;function Eo(e,t={}){const{preventReferrer:n=!1}=t,s=n?"noopener,noreferrer":"noopener";return window.open(e,"_blank",s)}const DT="https://go.microsoft.com/fwlink/?linkid=2281226&client=cmc&ocid=cmme6wdx8nv",q6="cmme6wdx8nv",K6="cmmipliy5qj";function wce(e){const{urlParams:t}=re.instance().config().proSubscription;if(!t)return DT;const{client:n}=t,{linkid:s,ocid:o,language:r,market:a}=e,l=new URL("https://go.microsoft.com/fwlink/");return l.searchParams.append("linkid",s),l.searchParams.append("client",n),l.searchParams.append("ocid",o),a&&l.searchParams.append("market",a),r&&l.searchParams.append("language",r),l.toString()}function Ice(e,t){var o,r;const{urlParams:n}=re.instance().config().proSubscription;if(!n)return q6;const{ocids:s}=n;return(t?(o=s[e])==null?void 0:o.freeTrial:(r=s[e])==null?void 0:r.buy)??q6}function CIe(e,t,n,s){var d;const{urlParams:o}=re.instance().config().proSubscription;if(!o)return DT;const{ocids:r}=o,a=Ice(e,t),l=s??((d=r[e])==null?void 0:d.market);return wce({linkid:t?"2243582":"2281226",ocid:a,language:n,market:l})}function _ce(e){const{ocid:t}=e,n=new URL("https://aka.ms/AA84f4p");return n.searchParams.append("ocid",t),n.toString()}function Tce(e){var s;const{m365UrlParams:t}=re.instance().config().proSubscription;if(!t)return K6;const{ocids:n}=t;return((s=n[e])==null?void 0:s.buy)??K6}const Ace="https://account.microsoft.com/services/copilot/details",kce="https://account.microsoft.com/services/microsoft365/details",yIe="https://account.microsoft.com/";function bIe({entryPoint:e,isPro:t}){const{manageRefId:n}=re.instance().config().proSubscription,s=`copilot.${n}.${e}`,o=new URL(t?Ace:kce);return o.searchParams.append("ref",s),o.hash="billing",o.toString()}function Mce(e){re.instance().config().subscribeInNewWindow?Eo(e):Nl(e)}function XC(e){const{payflowEntryPoint:t,upsellReason:n,entryStyle:s,requiresPremium:o=!1,enableDimePreload:r=!1,upsellEligibleSubscription:a}=e,l=Gt("kill-subs-dime"),u=Gt("kill-subs-user-mismatched-dialog"),d=PT(),m=!l,f=M(Mn),h=M(Zd),{i18n:{resolvedLanguage:g}}=q(),C=M(cn),v=M(zo),y=M(Yd),b=M(Hi),{shouldRedirectMobile:E,redirectMobileSource:S}=bY(b??null),I=se(Yv),_=se(b1),T=M(Wd),A=c.useRef(!1),k=se(dw),N=M(Yt),P=c.useMemo(()=>{const $=yY(y,a);return $||CY(y,o)},[a,o,y]),V=c.useMemo(()=>m?"DIME":d?"ProSubPaywall":"UniPux",[m,d]);c.useEffect(()=>{m&&r&&P&&(C==null?void 0:C.accountType)==="MSA"&&(async()=>{const ee=await of.ensureDime({language:g??"en-US",market:f}),te={language:g,market:f,sessionId:of.sessionId,experiences:P};if(ee){const G=performance.now();try{await ee.preload({experiences:[P]}),Oo({scenario:"preloadDime",duration:performance.now()-G,customData:te})}catch(ie){ir({...Gr(ie),scenario:"preloadDime",customData:{...te,duration:performance.now()-G}})}}else ir({...Gr(new Error("Dime not a valid instance")),scenario:"preloadDime",customData:te})})()},[g,f,P,m,r,C==null?void 0:C.accountType]);const U=c.useMemo(()=>Tce(t),[t]),K=c.useCallback(()=>{const $=_ce({ocid:U});Oo({scenario:"redirectToExternalUpsell",customData:{url:$}}),Mce($)},[U]),Q=c.useMemo(()=>({payflowEntryPoint:t,upsellReason:n??"unknown",loginProvider:(C==null?void 0:C.accountType)??"unknown",curatedSubscription:(b==null?void 0:b.tier)??LT,campaignId:U,dimeMarket:f??"unknown",correlationId:of.sessionId,dimeExperienceId:P??"",upsellEntryStyle:s}),[t,n,C==null?void 0:C.accountType,b==null?void 0:b.tier,U,f,P,s]),Z=c.useCallback(async $=>{const ee={...Q,payflowInstanceId:$};pce({...ee});const te=await of.ensureDime({language:xY(g??"en-US"),market:f});if(!P)throw new Error("No dime experience available");if(te)try{hce({...ee,dimeExperienceId:P}),(await te.launch({experience:P,theme:v??"light",campaignId:U},()=>{gce({...ee,dimeExperienceId:P})})).status==="Success"?Rl():vce({...ee,dimeExperienceId:P})}catch(G){Bg({...ee,dimeExperienceId:P,...Gr(G)}),K()}else Bg({...ee,dimeExperienceId:P,...Gr(new Error("Dime not a valid instance"))}),K()},[g,f,v,P,U,Q,K]),Y=c.useCallback(async()=>{if(!T){Oo({scenario:"subscriptionUserNotFetched"}),A.current=!0;return}if(A.current=!1,f&&tv.includes(f)){Oo({scenario:"subscriptionRegionRestricted",customData:{region:f}});return}if(h){Oo({scenario:"subscriptionUserAgeRestricted"});return}if(E&&S!==null){I({source:S,entryStyle:s,upsellReason:n,payflowEntryPoint:t});return}if((!d||m)&&(C==null?void 0:C.provider)==="auth0"){Ws("parsedPayflowEntryPoint",t),_({source:"Composer"});return}let $=Dn("payflowInstanceId");$||($=crypto.randomUUID(),Ws("payflowInstanceId",$),ir({scenario:"missingPayflowInstanceId",errorCode:"payflowInstanceIdMissing",customData:{generatedPayflowInstanceId:$}}));const ee=Dn("payflowAuthHint"),te=(N==null?void 0:N.id.toLowerCase())??"";if(typeof(N==null?void 0:N.id)=="string"&&typeof ee=="string"&&ee.length>0&&!te.endsWith(ee.toLowerCase())&&!te.startsWith(ee.toLowerCase()))if(u)OT({correlationId:Dn("payflowCorrelationId")??"",payflowInstanceId:$});else{k({correlationId:Dn("payflowCorrelationId")??"",payflowInstanceId:$,payflowEntryPoint:t});return}if(Jr("payflowRequiresPremium"),Jr("payflowCorrelationId"),Jr("payflowAuthHint"),l){K();return}try{await Z($)}catch(G){Bg({...Q,...Gr(G),payflowInstanceId:$,dimeExperienceId:P??""}),K()}},[f,l,E,S,d,m,C==null?void 0:C.provider,_,I,s,n,t,Z,Q,K,P,T,k,N==null?void 0:N.id,h,u]);return c.useEffect(()=>{T&&A.current&&(A.current=!1,Y())},[T,Y]),{handleSubscription:c.useCallback(async()=>{const $=crypto.randomUUID();return Ws("payflowInstanceId",$),Y()},[Y]),handleResumeSubscriptionWithCurrentInstanceId:Y,shouldUseDime:m,payflowType:V}}function sh(){const e=M(Yt),t=M(Dw),n=M(Hi),s=M(Yd),o=M(Zd),r=M(Mn);return c.useMemo(()=>re.instance().config().proSubscription.enabled?e?(n==null?void 0:n.tier)==="m365-premium-admin"||t?{subscriptions:[],disabledReason:"AlreadyPurchased"}:o?{subscriptions:[],disabledReason:"RestrictedAgeGroup"}:!r||tv.includes(r)?{subscriptions:[],disabledReason:"RestrictedRegion"}:(n==null?void 0:n.tier)==="m365-family-guest"||(n==null?void 0:n.tier)==="m365-premium-guest"||(n==null?void 0:n.tier)==="m365-family-classic-guest"?{subscriptions:[],disabledReason:"Guest"}:s.length===0?{subscriptions:["m365-personal","m365-premium"]}:s.some(a=>a.tier==="pro")?{subscriptions:["m365-premium"]}:s.some(a=>yw.includes(a.tier))?{subscriptions:[]}:s.some(a=>bw.includes(a.tier))?{subscriptions:["m365-premium"]}:{subscriptions:["m365-personal","m365-premium"]}:{subscriptions:[],disabledReason:"UserProfileUnavailable"}:{subscriptions:[],disabledReason:"SurfaceNotSupported"},[e,t,n==null?void 0:n.tier,o,r,s])}function Nce(e){const t=M(cn),n=M(Wd),s=M(Zd),{upsellFromAuth0:o}=re.instance().config().proSubscription,a=Qt()&&(t==null?void 0:t.provider)==="microsoft",l=sh(),u=M(Yd),d=Dn("shouldStartSubscription"),m=Dn("parsedPayflowEntryPoint")??"Unknown",f=Dn("payflowRequiresPremium")??!1,h=ut(),g=c.useRef(!1),{handleResumeSubscriptionWithCurrentInstanceId:C}=XC({payflowEntryPoint:m,upsellReason:"",entryStyle:"Redirect",requiresPremium:f});c.useEffect(()=>{if(d&&a&&!h.startsWith("/subscription/start")){Jr("shouldStartSubscription"),setTimeout(()=>{C()},0);return}if(!(o!=null&&o.navigateToProSubPageAfterLogin))return;const v=sessionStorage.getItem(C2);if(!v)return;async function y(b){const[,E]=b.split("-");if(E==="link"){const S=performance.now(),{getAuth0AccessToken:I,auth0:_}=await Lo.get(),T=await I(E1());if(!T){Kt({feature:"accountLinkAuth0WithMSA",errorType:"LinkStartedWithoutAuth0Token"});return}try{await kn({path:"/user/link",args:{body:{token:T}}})}catch(A){A instanceof Error&&Kt({feature:"accountLinkAuth0WithMSA",errorType:A.name,errorMessage:A.message,exception:A.stack})}finally{_.logout({openUrl:!1}),po({feature:"accountLinkAuth0WithMSA",duration:performance.now()-S}),(l.subscriptions.length!==0||tC(u).isEligible)&&await C()}}}if(e&&!g.current&&n){if(g.current=!0,sessionStorage.removeItem(C2),Jr("parsedPayflowEntryPoint"),(t==null?void 0:t.accountType)!=="MSA"||s)return;y(v)}},[e,C,o,t,s,n,h,a,d,l,u])}function Rce(e){const{isEnabled:t,onIntercept:n,shouldIntercept:s,clickSource:o}=e;c.useEffect(()=>{if(!t)return()=>{};const r=u=>s(u)?(n(u.toString()),!0):!1,a=u=>{const d=u.target.closest("a");d&&d instanceof HTMLAnchorElement&&r(d.href)&&(o&&ye({source:o}),u.preventDefault())},l=window.open;return window.open=function(...d){return d.length>0&&typeof d[0]=="string"&&!r(d[0])?l.apply(window,d):null},document.addEventListener("click",a),()=>{window.open=l,document.removeEventListener("click",a)}},[t,n,s,o])}function Pce(){c.useEffect(()=>{const e=rn(W0),t=Date.now();e||An(W0,t.toString())},[])}function jT(){const[e,t]=Ue(Sa);return c.useEffect(()=>{t(n=>n||jK())},[t]),e}function Lce(){c.useEffect(()=>{},[])}const xIe=[6,3,1],SIe=[20,10],EIe=6,wIe=20,IIe=1e4,_Ie={ChartHeight:250,Colors:{stroke:"white",gray:"#999",highPrice:"#D8001D",mediumHighPrice:"#F85900",mediumPrice:"#F8B200",mediumLowPrice:"#B4B400",lowPrice:"#56A503",label:"rgb(var(--color-background-900))"},GradientStopIndex:{Low:0,MediumLow:1,Medium:2,MediumHigh:3,High:4},GradientStepMultipliers:[.8,.9,1,1.1,1.2],LabelPositionThreshold:.85},TIe={initial:{height:0,opacity:0,overflow:"hidden"},animate:{height:"auto",opacity:1,transition:{height:{duration:.4},opacity:{duration:.25,delay:.15}}},exit:{height:0,opacity:0,transition:{height:{duration:.4},opacity:{duration:.25}}}},AIe="https://www.microsoft.com/microsoft-copilot/learn/#faqs8",kIe="https://www.bing.com/rebates/history",MIe=30;function Oce(){return{hasMinimumMetadata:!1,hasRichMetadata:!1,canShowGenInsights:!1,breakdown:{hasProductTitle:!1,hasProductImage:!1,hasBuyingOptions:!1,hasReviews:!1,hasPriceHistory:!1,hasConversationStarters:!1,conversationStartersLength:0}}}const Dce=R(void 0),NIe=R(!1),jce=R(void 0),Uce=R(Oce()),Fce=R(void 0),UT=R(!1);R(void 0);const Bce=i1(new Map),RIe=R(e=>{const t=e(Bce);return Array.from(t.values()).some(n=>n.isTracked)});R(void 0);const PIe=R(null),LIe=i1(void 0),OIe=R(null);R(tG.parse({}));const Vce=R(void 0);function Hce(e){var r;const{offer:t}=e,n=Qt(),s=((r=M(Vce))==null?void 0:r.isRebatesActive)===!0;return c.useMemo(()=>!t||!n?!1:t.type==="affiliate"?s:!FT(t),[t,n,s])}function FT(e){if(!e||!e.expiresAt)return!0;const t=new Date(e.expiresAt).getTime();return Number.isNaN(t)?!0:t<Date.now()}function zce(e){const{cashbackOffers:t,shoppingInsights:n}=e,s=t??[],o=s.filter(u=>u.type==="productAd"||u.type==="storewideAd"),r=o.length>0?o.reduce((u,d)=>{const m=new Date(u.expiresAt);return new Date(d.expiresAt)>m?d:u}):null,a=s.find(u=>u.type==="affiliate")??null,l=r?!FT(r):!1;return(n==null?void 0:n.scenario)==="cashback"?{selectedOffer:n.cashbackData.isAdOffer?r:a}:l?{selectedOffer:r}:a?{selectedOffer:a}:{selectedOffer:null}}function Gce(e){const{cashbackOffers:t,shoppingInsights:n,hasProductMetaData:s}=e,{selectedOffer:o}=zce({cashbackOffers:t,shoppingInsights:n}),r=W("edge-shopping-enable-product-ads-cashback"),a=(t==null?void 0:t.find(d=>d.type==="affiliate"))??null;return{overriddenCashbackOffer:!s&&(o==null?void 0:o.type)==="productAd"&&!r?a:o}}const Wce=[{offerType:"affiliate",isActivated:!0,isAuthenticated:!0,scenario:"affiliateActivated"},{offerType:"affiliate",isActivated:!1,isAuthenticated:!1,scenario:"affiliateUnauthenticated"},{offerType:"productAd",isActivated:!0,isAuthenticated:!0,scenario:"productAdsActivatedMultipleOffers"},{offerType:"storewideAd",isActivated:!0,isAuthenticated:!0,scenario:"storewideActivated"},{offerType:"storewideAd",isActivated:!1,isAuthenticated:!1,scenario:"storewideUnauthenticated"}];function $ce(e){const t=Wce.find(n=>n.offerType===e.offerType&&n.isActivated===e.isActivated&&n.isAuthenticated===e.isAuthenticated);return t?t.scenario:null}function qce(e){const{cashbackOffer:t}=e,n=Qt(),s=Hce({offer:t});return t?!!$ce({offerType:t.type,isActivated:s,isAuthenticated:n}):!1}function Kce(e,t){const{hasMinimumMetadata:n}=e;if(n)return"shoppingCard";if(t)return"cashbackCard"}function Ji(){var h;const e=M(UT),t=M(Uce),n=M(jce),s=(h=M(Fce))==null?void 0:h.offers,{overriddenCashbackOffer:o}=Gce({cashbackOffers:s,shoppingInsights:(n==null?void 0:n.insights)??void 0,hasProductMetaData:!!n}),r=Qi(),a=!Gt("kill-contextual-shopping"),l=r&&a&&(!!n||!!o),u=l?Kce(t,!!o):void 0,d=l&&!!(n!=null&&n.insights),m=qce({cashbackOffer:o})&&u==="cashbackCard";return{isContextualShoppingCardExpanded:e,showShoppingCardInNewChat:l,shoppingScenario:u,cashbackOffer:o,shoppingProductMetadata:n,isCopilotOpenedViaEdgeCTAs:d,hasInsightsSummary:l&&(d||m)}}function Zce(e){if(!e.length)return;const t=fr("greetingIndex"),n=e.length,s=t?(parseInt(t,10)+1)%n:0;return ca("greetingIndex",s.toString()),e[s]}const e3=R(!1),Yce=R(!1),BT=$e(),Qce=["chat.launchMessage.authenticatedV3Type1","chat.launchMessage.authenticatedV3Type2","chat.launchMessage.authenticatedV3Type3"],Jce=["chat.launchMessage.unauthenticatedV3Type1","chat.launchMessage.unauthenticatedV3Type2","chat.launchMessage.unauthenticatedV3Type3"],Xce=["chat.launchMessage.authenticatedV4Type1","chat.launchMessage.authenticatedV4Type2","chat.launchMessage.authenticatedV4Type3","chat.launchMessage.authenticatedV4Type4","chat.launchMessage.authenticatedV4Type5","chat.launchMessage.authenticatedV4Type6","chat.launchMessage.authenticatedV4Type7","chat.launchMessage.authenticatedV4Type8","chat.launchMessage.authenticatedV4Type9","chat.launchMessage.authenticatedV4Type10"],ele=["chat.launchMessage.unauthenticatedV4Type1","chat.launchMessage.unauthenticatedV4Type2","chat.launchMessage.unauthenticatedV4Type3","chat.launchMessage.unauthenticatedV4Type4","chat.launchMessage.unauthenticatedV4Type5","chat.launchMessage.unauthenticatedV4Type6","chat.launchMessage.unauthenticatedV4Type7","chat.launchMessage.unauthenticatedV4Type8","chat.launchMessage.unauthenticatedV4Type9","chat.launchMessage.unauthenticatedV4Type10"];function tle(){BT.set(e3,!0)}function nle(){BT.set(e3,!1)}function VT(){const{t:e}=q(),t=M(e3),n=M(kw),s=M(ace),o=M(JC),r=W("landing-rotating-greeting"),{showShoppingCardInNewChat:a,shoppingScenario:l}=Ji(),d=c.useCallback(()=>a?n?l==="cashbackCard"?["chat.launchMessage.authenticatedShoppingCashback"]:["chat.launchMessage.authenticatedShoppingType1"]:l==="cashbackCard"?["chat.launchMessage.unauthenticatedShoppingCashback"]:["chat.launchMessage.unauthenticatedShoppingType1"]:s&&s==="image-generation"?["chat.launchMessage.unauthenticatedImageWidgets"]:n?r?Xce:Qce:r?ele:Jce,[n,r,a,l,s])(),m=c.useMemo(()=>Zce(d),[d]),f=Number(fr("greetingIndex"))||0,h=c.useCallback(()=>s==="image-generation"?e("chat.launchMessage.subheadingImageGenWidget"):null,[s,e]);return{launchGreetingShown:t,greetingKey:m,widgetGreeting:o,widgetSubheading:h(),greetingIndex:f}}const sle={headers:{"content-type":"application/json"},body:JSON.stringify({type:"private"})};function t3({arg:e}={}){const n=(e==null?void 0:e.isPrivate)??!1?sle:void 0;return Ct("/conversations",lq,{options:{method:"POST",...n}}).then(s=>s.data)}function fm(){const e=M(g1),{mutateAsync:t}=Mi({mutationKey:["create-conversation"],mutationFn:async m=>t3({arg:m}),retry:!1}),n=M(vt),s=hl(vt),o=se(zd),r=se(QE),a=se(cce),l=$ee(),[u,d]=c.useState(!1);return{startConversationDisabled:u,createConversation:c.useCallback(async m=>{const{shouldNavigateToChat:f=!0,characterId:h,isPrivate:g=!1}=m??{};if(e){const C=n.get(e);if((C==null?void 0:C.characterId)===h)return l({id:e,shouldNavigateToChat:f}),e}if(!u)try{d(!0);const{id:C}=await t({isPrivate:g}),v={id:C,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:h,continuedAt:null,group:null};return g&&r(C),s(b=>{b.set(C,v)}),l({id:C,shouldNavigateToChat:!g&&f}),o(!0),nle(),a(),C}catch(C){console.error(C)}finally{d(!1)}},[e,u,n,l,t,s,r,o,a])}}const n3="shouldPerformUserMerge";function ole(e){ca(n3,String(e))}function rle(){TB(n3)}function ale(){return fr(n3)!=="false"}function DIe(){const e=M(_Z),t=Qt(),[n,s]=Ue(PF),o=!t&&e;return c.useEffect(()=>{ole(n)},[n]),{shouldShowMergeCheckbox:o,shouldMerge:n,setShouldMerge:s}}const HT=R([]),ile={"connector-detail":"connector-list","delete-account":"account",name:"account"};function Er(){var u;const[e,t]=Ue(HT),n=c.useRef([]);c.useEffect(()=>{const d=n.current,m=e;if(d.length>m.length){const f=d.filter((g,C)=>C>=m.length),h=f.length;for(let g=h-1;g>=0;g-=1){const C=f[g];C!=null&&C.onPopPage&&C.onPopPage()}}n.current=e},[e]);const s=e.length>0?(u=e[e.length-1])==null?void 0:u.page:void 0,o=d=>r([d]),r=d=>{const m=d.map(f=>({page:f,onPopPage:void 0}));t(f=>[...f,...m])};return{currentPage:s,pushPage:o,pushPages:r,goBackOrClose:()=>{t(d=>d.length<=0?d:d.slice(0,-1))},closeSettings:()=>{t([])},parentPageOf:ile}}function zT(e,t){const n={page:e,onPopPage:t==null?void 0:t.onPopPageCallback};$e().set(HT,s=>[...s,n])}function Ol(e){const{pages:t,className:n,children:s,disableLink:o,clickSource:r,onClick:a,pushPagesDelay:l=0}=e,{pushPages:u}=Er(),d=()=>{setTimeout(()=>{Ge.emit("disclaimer:open-settings"),u(t)},l),a==null||a(),ye({source:r??"settingsLink",destination:t[t.length-1]})};return o?i.jsx("span",{children:s}):i.jsx("button",{className:n,type:"button",title:"",onClick:d,children:s})}function cle(){const e=se(Sn);return i.jsx("p",{children:i.jsx(mn,{i18nKey:"settings.copilotBeta.announcementSubtitle",components:{settingsLink:i.jsx(Ol,{pages:["menu","copilot-beta"],className:"underline",clickSource:"disclaimerSettingsLink",onClick:()=>e(null)})}})})}function lle(){if(!be("copilot-beta-automatic-opt-in"))return;const e=pe(il);if(e===void 0)mt(lg,!0),mt(il,!0),Rl();else if(e&&pe(lg)){const n={title:z("settings.copilotBeta.announcementTitle"),subtitle:i.jsx(cle,{})};mt(Sn,n),mt(lg,void 0)}}function s3(e){const t=fl(),n=c.useRef(e);n.current=e,c.useEffect(()=>t.subscribe("onBeforeNavigate",s=>{const{pathChanged:o}=s;o&&n.current(s)}),[t])}let GT=!0,WT=!0;function ule(e){WT=e}function pm(){return GT}function dle(){s3(()=>{WT||(GT=!1)})}const mle=(e,t,n)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((o,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},{slice:fle,forEach:ple}=[];function hle(e){return ple.call(fle.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function gle(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const Z6=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,vle=function(e,t){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},o=encodeURIComponent(t);let r=`${e}=${o}`;if(s.maxAge>0){const a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(a)}`}if(s.domain){if(!Z6.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!Z6.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(r+="; Partitioned"),r},Y6={create(e,t,n,s){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),s&&(o.domain=s),document.cookie=vle(e,t,o)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let o=n[s];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return o.substring(t.length,o.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var Cle={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return Y6.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:s,cookieDomain:o,cookieOptions:r}=t;n&&typeof document<"u"&&Y6.create(n,e,s,o,r)}},yle={name:"querystring",lookup(e){var s;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((s=window.location.hash)==null?void 0:s.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const a=o.substring(1).split("&");for(let l=0;l<a.length;l++){const u=a[l].indexOf("=");u>0&&a[l].substring(0,u)===t&&(n=a[l].substring(u+1))}}return n}},ble={name:"hash",lookup(e){var o;let{lookupHash:t,lookupFromHashIndex:n}=e,s;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const a=r.substring(1);if(t){const l=a.split("&");for(let u=0;u<l.length;u++){const d=l[u].indexOf("=");d>0&&l[u].substring(0,d)===t&&(s=l[u].substring(d+1))}}if(s)return s;if(!s&&n>-1){const l=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?(o=l[typeof n=="number"?n:0])==null?void 0:o.replace("/",""):void 0}}}return s}};let hc=null;const Q6=()=>{if(hc!==null)return hc;try{if(hc=typeof window<"u"&&window.localStorage!==null,!hc)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{hc=!1}return hc};var xle={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Q6())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Q6()&&window.localStorage.setItem(n,e)}};let gc=null;const J6=()=>{if(gc!==null)return gc;try{if(gc=typeof window<"u"&&window.sessionStorage!==null,!gc)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{gc=!1}return gc};var Sle={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&J6())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&J6()&&window.sessionStorage.setItem(n,e)}},Ele={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:o}=navigator;if(n)for(let r=0;r<n.length;r++)t.push(n[r]);s&&t.push(s),o&&t.push(o)}return t.length>0?t:void 0}},wle={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const s=t||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},Ile={name:"path",lookup(e){var o;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(o=n[typeof t=="number"?t:0])==null?void 0:o.replace("/",""):void 0}},_le={name:"subdomain",lookup(e){var o,r;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,s=typeof window<"u"&&((r=(o=window.location)==null?void 0:o.hostname)==null?void 0:r.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(s)return s[n]}};let $T=!1;try{document.cookie,$T=!0}catch{}const qT=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];$T||qT.splice(1,1);const Tle=()=>({order:qT,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class KT{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=hle(n,this.options||{},Tle()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(Cle),this.addDetector(yle),this.addDetector(xle),this.addDetector(Sle),this.addDetector(Ele),this.addDetector(wle),this.addDetector(Ile),this.addDetector(_le),this.addDetector(ble)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(s=>{if(this.detectors[s]){let o=this.detectors[s].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),n=n.filter(s=>s!=null&&!gle(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(t,this.options)}))}}KT.type="languageDetector";const ZT="i18next";function Ale(e){return V5(e)[0]??e}let rf=null;function YT(){return!!re.instance().config().useI18nHttpApi}async function QT(e={}){const t=YT();return rf&&!t||(rf=(async()=>{const n=Rt.use(KT).use(HL);t&&B(()=>import("./i18next-http-backend-esm-index-Bpq-hV22.js"),__vite__mapDeps([4,1])).then(o=>{n.use(o.default)});const s=t?void 0:pU();return await n.init({lng:s?s.lng:void 0,resources:s?s.resources:void 0,supportedLngs:S7.map(({i18nCode:o})=>o),fallbackLng:V5,detection:s?void 0:{lookupLocalStorage:"BUST-LOCAL-STORAGE",lookupCookie:ZT,caches:[],convertDetectedLanguage:Ale,...e},interpolation:{escapeValue:!1}}),s||(document.documentElement.dir=Rt.dir(Rt.language.toLowerCase()),document.documentElement.lang=Rt.language.toLowerCase(),await kle(Rt.language,!1)),Rt.on("languageChanged",o=>{typeof document<"u"&&(document.documentElement.dir=Rt.dir(o.toLowerCase()),document.documentElement.lang=o.toLowerCase())}),n.t})()),rf}async function kle(e,t=!0){if(!e)return;await Promise.all(V5(e).map(async s=>{if(!(Rt.hasResourceBundle(s,"translation")&&!YT()))try{const o=await mle(Object.assign({"../../../config/strings/af/strings.json":()=>B(()=>import("./strings-BFN7iOml.js"),[]),"../../../config/strings/am/strings.json":()=>B(()=>import("./strings-DGSle350.js"),[]),"../../../config/strings/ar/strings.json":()=>B(()=>import("./strings-BDkYVQTT.js"),[]),"../../../config/strings/as/strings.json":()=>B(()=>import("./strings-JyrpZ29d.js"),[]),"../../../config/strings/az/strings.json":()=>B(()=>import("./strings-BuEYuHZu.js"),[]),"../../../config/strings/bg/strings.json":()=>B(()=>import("./strings-Crg8sDPi.js"),[]),"../../../config/strings/bn-IN/strings.json":()=>B(()=>import("./strings-CJ2a3d0y.js"),[]),"../../../config/strings/bs/strings.json":()=>B(()=>import("./strings-05I_GI6P.js"),[]),"../../../config/strings/ca-Es-VALENCIA/strings.json":()=>B(()=>import("./strings-g9Np7ZNL.js"),[]),"../../../config/strings/ca/strings.json":()=>B(()=>import("./strings-CWskf4zn.js"),[]),"../../../config/strings/cs/strings.json":()=>B(()=>import("./strings-CP-ZYbpn.js"),[]),"../../../config/strings/cy/strings.json":()=>B(()=>import("./strings-C7QlSgoQ.js"),[]),"../../../config/strings/da/strings.json":()=>B(()=>import("./strings-BdK05UZU.js"),[]),"../../../config/strings/de/strings.json":()=>B(()=>import("./strings-BnQGMw7U.js"),[]),"../../../config/strings/el/strings.json":()=>B(()=>import("./strings-CtdKLpby.js"),[]),"../../../config/strings/en-GB/strings.json":()=>B(()=>import("./strings-BPtebQAx.js"),[]),"../../../config/strings/en-US/strings.json":()=>B(()=>import("./strings-C9tXaik9.js"),[]),"../../../config/strings/es-MX/strings.json":()=>B(()=>import("./strings-Cw8MYhoH.js"),[]),"../../../config/strings/es/strings.json":()=>B(()=>import("./strings-63agAwKQ.js"),[]),"../../../config/strings/et/strings.json":()=>B(()=>import("./strings--S_tFZhX.js"),[]),"../../../config/strings/eu/strings.json":()=>B(()=>import("./strings-Dnqv5s9H.js"),[]),"../../../config/strings/fa/strings.json":()=>B(()=>import("./strings-AiC1hLsw.js"),[]),"../../../config/strings/fi/strings.json":()=>B(()=>import("./strings-C8i3SwG9.js"),[]),"../../../config/strings/fil/strings.json":()=>B(()=>import("./strings-DSFquLZU.js"),[]),"../../../config/strings/fr-CA/strings.json":()=>B(()=>import("./strings-B1lDCD-Q.js"),[]),"../../../config/strings/fr/strings.json":()=>B(()=>import("./strings-Cq-MVbxn.js"),[]),"../../../config/strings/ga/strings.json":()=>B(()=>import("./strings-D5iZnKaS.js"),[]),"../../../config/strings/gd/strings.json":()=>B(()=>import("./strings-sppT16Sv.js"),[]),"../../../config/strings/gl/strings.json":()=>B(()=>import("./strings-DUei-dSv.js"),[]),"../../../config/strings/gu/strings.json":()=>B(()=>import("./strings-_jWzrlXA.js"),[]),"../../../config/strings/he/strings.json":()=>B(()=>import("./strings-DPVQMHdX.js"),[]),"../../../config/strings/hi/strings.json":()=>B(()=>import("./strings-2dmGjhjU.js"),[]),"../../../config/strings/hr/strings.json":()=>B(()=>import("./strings-DnmkR6Eu.js"),[]),"../../../config/strings/hu/strings.json":()=>B(()=>import("./strings-f1usC3Um.js"),[]),"../../../config/strings/hy/strings.json":()=>B(()=>import("./strings-yh7Bk9Du.js"),[]),"../../../config/strings/id/strings.json":()=>B(()=>import("./strings-DpWBchw5.js"),[]),"../../../config/strings/is/strings.json":()=>B(()=>import("./strings-CEFiGOGD.js"),[]),"../../../config/strings/it/strings.json":()=>B(()=>import("./strings-Co4M-wpn.js"),[]),"../../../config/strings/ja/strings.json":()=>B(()=>import("./strings-Bh9f8jZv.js"),[]),"../../../config/strings/ka/strings.json":()=>B(()=>import("./strings-DrnTeSwD.js"),[]),"../../../config/strings/kk/strings.json":()=>B(()=>import("./strings-D4BI4F2Z.js"),[]),"../../../config/strings/km-KH/strings.json":()=>B(()=>import("./strings-BJHauvYl.js"),[]),"../../../config/strings/kn/strings.json":()=>B(()=>import("./strings-Bg60xlw8.js"),[]),"../../../config/strings/ko/strings.json":()=>B(()=>import("./strings-D_LDWDkP.js"),[]),"../../../config/strings/kok/strings.json":()=>B(()=>import("./strings-CyXYyfw_.js"),[]),"../../../config/strings/lb/strings.json":()=>B(()=>import("./strings-Bc_mthuk.js"),[]),"../../../config/strings/lo/strings.json":()=>B(()=>import("./strings-BV4oYdOh.js"),[]),"../../../config/strings/lt/strings.json":()=>B(()=>import("./strings-B9hOqdcN.js"),[]),"../../../config/strings/lv/strings.json":()=>B(()=>import("./strings-sQQ8gwvv.js"),[]),"../../../config/strings/mi/strings.json":()=>B(()=>import("./strings-DttrECnB.js"),[]),"../../../config/strings/mk/strings.json":()=>B(()=>import("./strings-CslHP7bW.js"),[]),"../../../config/strings/ml/strings.json":()=>B(()=>import("./strings-nHbVFiR1.js"),[]),"../../../config/strings/mr/strings.json":()=>B(()=>import("./strings-vTaHHuxk.js"),[]),"../../../config/strings/ms/strings.json":()=>B(()=>import("./strings-EB9bQahT.js"),[]),"../../../config/strings/mt/strings.json":()=>B(()=>import("./strings-DIraTNzo.js"),[]),"../../../config/strings/nb-NO/strings.json":()=>B(()=>import("./strings-CKGq0C4u.js"),[]),"../../../config/strings/ne/strings.json":()=>B(()=>import("./strings-C32mpT-w.js"),[]),"../../../config/strings/nl/strings.json":()=>B(()=>import("./strings-mgS-Wczu.js"),[]),"../../../config/strings/nn-NO/strings.json":()=>B(()=>import("./strings-CJ1rSMoI.js"),[]),"../../../config/strings/or/strings.json":()=>B(()=>import("./strings-CLuDZIju.js"),[]),"../../../config/strings/pa/strings.json":()=>B(()=>import("./strings-CVw0Ev0d.js"),[]),"../../../config/strings/pl/strings.json":()=>B(()=>import("./strings-0mQPqwKF.js"),[]),"../../../config/strings/pt-BR/strings.json":()=>B(()=>import("./strings-Lh6gHrSx.js"),[]),"../../../config/strings/pt-PT/strings.json":()=>B(()=>import("./strings-9d1hxp9O.js"),[]),"../../../config/strings/quz/strings.json":()=>B(()=>import("./strings-BH_v_XWx.js"),[]),"../../../config/strings/ro/strings.json":()=>B(()=>import("./strings-BHGWm1eG.js"),[]),"../../../config/strings/ru/strings.json":()=>B(()=>import("./strings-DTFBBe4t.js"),[]),"../../../config/strings/sk/strings.json":()=>B(()=>import("./strings-Chu9gqPX.js"),[]),"../../../config/strings/sl/strings.json":()=>B(()=>import("./strings-CwviT_gp.js"),[]),"../../../config/strings/sq/strings.json":()=>B(()=>import("./strings-Bb5HmLR0.js"),[]),"../../../config/strings/sr-Cyrl-BA/strings.json":()=>B(()=>import("./strings-Dy_38MEI.js"),[]),"../../../config/strings/sr-Cyrl-RS/strings.json":()=>B(()=>import("./strings-DZzNAr5l.js"),[]),"../../../config/strings/sr-Latn-RS/strings.json":()=>B(()=>import("./strings-DGNO7Njz.js"),[]),"../../../config/strings/sv/strings.json":()=>B(()=>import("./strings-CzOq_Tci.js"),[]),"../../../config/strings/ta/strings.json":()=>B(()=>import("./strings-CGloLLYq.js"),[]),"../../../config/strings/te/strings.json":()=>B(()=>import("./strings-3mo-XX92.js"),[]),"../../../config/strings/th/strings.json":()=>B(()=>import("./strings-Bxpi3FPt.js"),[]),"../../../config/strings/tr/strings.json":()=>B(()=>import("./strings-DjA5ch2p.js"),[]),"../../../config/strings/tt/strings.json":()=>B(()=>import("./strings-CAqlA-6o.js"),[]),"../../../config/strings/ug/strings.json":()=>B(()=>import("./strings-DkXjIrjq.js"),[]),"../../../config/strings/uk/strings.json":()=>B(()=>import("./strings-C9KDnvbX.js"),[]),"../../../config/strings/ur/strings.json":()=>B(()=>import("./strings-Bpa-hW_R.js"),[]),"../../../config/strings/uz-Latn-UZ/strings.json":()=>B(()=>import("./strings-BpItcDBt.js"),[]),"../../../config/strings/vi/strings.json":()=>B(()=>import("./strings-BfwOKHKX.js"),[]),"../../../config/strings/zh-Hans/strings.json":()=>B(()=>import("./strings-hR18lDKd.js"),[]),"../../../config/strings/zh-Hant/strings.json":()=>B(()=>import("./strings-BfKi7S2j.js"),[])}),`../../../config/strings/${s}/strings.json`,7);Rt.addResourceBundle(s,"translation",o,!0,!0)}catch{console.warn(`Translation file for '${s}' not found.`)}}));const n=!Rt.resolvedLanguage||Rt.resolvedLanguage!==e;(Rt.language!==e||n)&&await Rt.changeLanguage(e),t&&tl(ZT,e,{expireDays:365,secure:!1})}function jIe(){return Rt.resolvedLanguage?Rt.resolvedLanguage.split("-")[0]==="en":!1}function UIe(e){Ws("redirectPathOnNextStart",e)}function Mle(){const e=Dn("redirectPathOnNextStart");return Jr("redirectPathOnNextStart"),e!=null&&e.startsWith("/")?e:null}async function Nle(e){try{return(await Ct(`/conversations/${e}/history`,FE,{analytics:{anonymousPath:"/conversations/*/history"},query:{"api-version":"2"},parseOptions:{safe:!0}}).then(n=>n.data)).results.length>0}catch{return!1}}function Rle(){return!_t("kill-student-offer")}function Gg(e){return!e.includes("kill-student-offer")}function o3(e){const{id:t,type:n,source:s,destination:o,scenario:r}=e;ye({source:s,scenario:r,destination:o,customData:JSON.stringify({eventInfo_galleryArtifactId:t,eventInfo_galleryArtifactType:n})})}function FIe(e){o3({...e,scenario:"galleryHomePage"})}function BIe(e){o3({...e,scenario:"galleryDetailPage"})}function VIe(e){const{id:t,type:n}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"galleryDetailPage",eventInfo_impressionElement:"creatorGallery",eventInfo_customData:JSON.stringify({eventInfo_galleryArtifactId:t,eventInfo_galleryArtifactType:n})}})}function HIe(e){const{galleryItemId:t,url:n,thumbnailUrl:s,errorMessage:o,page:r="galleryHomePage",type:a="image"}=e;Kt({feature:"creatorGallery",scenario:"mediaLoad",errorType:"load",errorMessage:o??`Failed to load ${a}`,customData:JSON.stringify({galleryItemId:t,url:n,thumbnailUrl:s,page:r})})}const Ple=R(null),zIe=R(new Map),JT="/gallery",r3="/imagine";function Lle(e){return/\/gallery\/\w+/.test(e)}function Ole(e){return/\/imagine\/\w+/.test(e)}function a3(e){return e.startsWith(JT)||e.startsWith(r3)}async function Dle(e){const{id:t,isLiked:n}=e,s=await zn(`/gallery/${t}/react/like`,{options:{method:n?"POST":"DELETE"},analytics:{anonymousPath:"/gallery/*"}});if(!s.ok)throw new Error("Failed to fetch Gallery Like data");return s}async function GIe(e){try{const{isLiked:t}=e;o3({...e,source:t?"like":"unlike"}),await Dle(e)}catch{}}async function WIe(e){const{index:t,data:n,basePath:s,from:o}=e;$e().set(Ple,t);const{id:a}=n;await qs({from:o,to:`${s}/${a}`})}function $Ie(){An(TF,"true")}function qIe(e){return{eventInfo_galleryLoadNumber:e.maxIndex+1,eventInfo_galleryArtifactTypes:Array.from(e.viewedTypes).join(",")}}function XT(){const e=ut();return eA(e)}function eA(e){return/^\/shares\/[a-zA-Z0-9_-]+$/.test(e)}async function jle(e){const{conversationIdFromUrl:t,conversationIdFromStart:n}=e;return t&&t!=="new"&&await Nle(t)?{conversationId:t,isNew:!1}:n?{conversationId:n,isNew:!0}:{conversationId:null,isNew:!0}}async function Ule(e){const{pathname:t,conversationIdFromUrl:n,conversationFromUrlExists:s,urlPrompt:o,features:r,isBanned:a,enablePageRedirect:l,deepLinkTarget:u,search:d,redirectTargetFromStorage:m,userAccount:f}=e;if(!l||a||xC()||navigator.userAgent.toLowerCase().includes("googlebot")&&t==="/")return null;if(o||n==="new")return{to:u==="audioCall"?"/chats/$conversationId/talk":"/",from:t,needsConversationId:u==="audioCall"};if(t.startsWith("/shares"))return t.startsWith("/shares/pages")?!r.includes("kill-shared-page")?null:Xt(t):t.startsWith("/shares/podcasts")||t.startsWith("/shares/3d-generations")||t.startsWith("/shares/tasks")?null:r.includes("kill-share-conversation")||!eA(t)?Xt(t):null;if(t.startsWith("/campaigns"))if(t.startsWith("/campaigns/gallery")){if(!r.includes("share-campaign-gallery"))return Xt(t)}else if(t.startsWith("/campaigns/image-expression-tool")){if(!r.includes("gallery-expression-tool"))return Xt(t)}else return r.includes("share-campaign")?null:Xt(t);if(["/pro/subscribe","/pro/ewallet/return"].includes(t)||t==="/fang")return null;if(t.startsWith("/referrals")&&!r.includes("user-referral")||t.startsWith("/connector")&&!(r.includes("google-drive-connector")||r.includes("google-calendar-connector")||r.includes("google-mail-connector")||r.includes("google-contacts-connector")))return Xt(t);if(t.startsWith("/memory/narrative"))return r.includes("memory-narrative")?null:Xt(t);if(t.endsWith("/talk"))return t.startsWith("/labs/portrait/talk")&&r.includes("labs-portrait-enabled")?{from:t,to:"/labs/portrait",needsConversationId:!1}:Xt(t);if(t.startsWith("/chats")&&!s)return Xt(t);if(t.startsWith("/pages"))return null;if(t.startsWith("/projects"))return r.includes("projects")?null:{to:"/",from:t};if(t.startsWith("/labs")){if(t.startsWith("/labs/portrait")){const g=r.includes("labs-portrait-enabled"),C=r.includes("labs-portrait-v2");if(!g)return Xt(t);if(!C&&["/labs/portrait/gallery","/labs/portrait/future-self"].some(v=>t.startsWith(v)))return{from:t,to:"/labs/portrait",needsConversationId:!1};if(t.startsWith("/labs/portrait/future-self/create"))return{from:t,to:"/labs/portrait/future-self",needsConversationId:!1}}if(t.startsWith("/labs/career-coach")&&!r.includes("labs-career-coach")||t.startsWith("/labs/audio-expression")&&!r.includes("labs-audio-expression")||!re.instance().config().enableLabs)return Xt(t)}if(t.startsWith("/login"))return Xt(t);if(t.startsWith("/shopping"))return r.includes("shopping-homepage")?null:{to:"/",from:t};if(t.startsWith("/podcasts"))return t.startsWith("/podcasts/user")||t.startsWith("/podcasts/public")?null:Xt(t);if(["/e/so","/e/sol"].includes(t)&&!Gg(r))return Xt(t);if(t==="/e/so"&&Gg(r)&&(f==null?void 0:f.accountType)!=="MSA")return{from:t,to:"/e/sol"};if(t==="/e/sol"&&Gg(r)&&(f==null?void 0:f.accountType)==="MSA")return{from:t,to:"/e/so"};if(t.startsWith("/library")&&!r.includes("library"))return Xt(t);if(m)return{from:t,to:m,needsConversationId:!1};if(t==="/"){if(r.includes("start-in-voice"))return null;const h=d==null?void 0:d.get("back");return Fle(h)&&re.instance().config().redirectBackEnabled?{from:"/login",to:new URL(h).pathname,needsConversationId:!1}:Xt(t)}return Lle(t)?r.includes("kill-gallery-detail")?Xt(t):null:t.startsWith(JT)?r.includes("kill-creator-gallery")?Xt(t):null:Ole(t)?r.includes("kill-imagine-detail")?Xt(t):null:t.startsWith(r3)&&r.includes("kill-creator-gallery")?Xt(t):null}function Fle(e){if(!e)return!1;try{if(new URL(e).origin===window.location.origin)return!0;throw new Error("Invalid redirect URL: not from same origin")}catch{throw new Error("Invalid redirect URL, malformed URL")}}function Xt(e){return{from:e,to:"/"}}function Ble(){try{const{timeZone:e}=Intl.DateTimeFormat().resolvedOptions();return e}catch{return}}const Vle=UK(),W2=1e4;function Hle(){return setTimeout(()=>{Kt({feature:"start",scenario:"callStartTimeout",errorType:"timeout",errorMessage:`Start call exceeded ${W2}ms timeout`})},W2)}async function zle(){let e=fr("sessionId");const t=fr("referralCode");!e&&t&&(e=crypto.randomUUID(),ca("sessionId",e));const n=ale(),s={timeZone:Ble(),startNewConversation:!0,teenSupportEnabled:!0,deviceFingerprint:e??void 0,referralCode:t??void 0,correctPersonalizationSetting:!0,performUserMerge:n,deferredDataUseCapable:!0},o={};Vle&&(o.overrideFeatures="1");const l=wt(K0,he())!==!1?{maxRetries:3,initialDelayMs:100,maxDelayMs:500,backoffFactor:2,jitterFactor:.1}:void 0,{data:u,response:d,zodError:m}=await Ct("/start",O$,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},parseOptions:{safe:!0},query:o,...l&&{retry:l},requestTimeoutMs:W2,onFailedRequest:f=>{throw f.status===nv?new Error(sv):new l1(`Start api failure with status ${f.status}`,{route:"/start",statusCode:f.status})}});if(Qu.trackClientExperimentationAssignment(d.headers),Qu.trackLatestApiAssignment(d.headers),m)throw m;return u}function Gle(){const{i18n:e}=q(),{showBoundary:t}=B7(),n=se(ed),s=se(wZ),o=se(rS),r=se(vt),a=se(QE),l=se(bi),u=se(je),d=se(Vw),m=se(h1),f=se(sC),h=xo(),[g]=J1(),C=ut(),v=c.useRef(C);v.current=C;const y=$p({strict:!1}),b=c.useRef(y);b.current=y;const E=c.useRef(MK()),S=M(tm),I=c.useRef(S);I.current=S;const _=c.useRef(!0),T=c.useRef(!1),{mutateAsync:A}=Mi({mutationKey:["start"],mutationFn:zle,retry:!1}),k=fl();return c.useCallback(async N=>{var K;if(!e.language||T.current&&!N.eventDriven)return!1;T.current=!0;const P=wJ(),{enablePageRedirect:V,overwriteData:U}=N;s(!0);try{const Q=Hle(),{isNewUser:Z,banExpiresAt:Y,remainingTurns:X,features:$,currentConversationId:ee,allowBeta:te,userId:G,inDataUseWaitingPeriod:ie}=await A();clearTimeout(Q),await QT(),Ge.emit("app:start-complete");const xe=D.getPicassoId();xe!==null&&G!==null&&xe!==G&&D.trackEvent({name:"health",data:{eventName:"userIdMismatch",eventInfo_customData:JSON.stringify({existingPicassoId:xe,newPicassoId:G??"",origin:"start"})}}),D.setFeatures($),D.setIsNewUser(Z),H2({isNewUser:Z.toString()});const ce=CI({featureOverrides:[],localFeatureOverrides:yI(),localFeaturesToDisable:bI(),serverFeatures:$,surfaceConfig:re.instance().config()});ce.includes("kill-picasso-id-on-start")||D.setPicassoId(G??null),ce.includes("msal-silent-sso")?Vn(q0,he(),!0):jt(q0),ce.includes("msal-v4-upgrade")?Vn(X0,he(),!0):jt(X0),ce.includes("token-retry-max-2")?Vn(Q0,he(),!0):jt(Q0),ce.includes("token-retry-max-2-auth0")?Vn(J0,he(),!0):jt(J0),ce.includes("no-start-retry")?Vn(K0,he(),!1):jt(K0),ce.includes("reauth-redirect")?Vn(e2,he(),!0):jt(e2);const ae=UC(Y),Se=xC(ce),Me=await jle({conversationIdFromUrl:Se?void 0:b.current.conversationId,conversationIdFromStart:Se?void 0:ee});let{conversationId:Oe}=Me;if(!Oe){const{id:le}=await t3({arg:{isPrivate:Se}});Oe=le,Se&&a(le)}const oe=await Ule({pathname:v.current,conversationIdFromUrl:b.current.conversationId,conversationFromUrlExists:b.current.conversationId===Oe,urlPrompt:((K=I.current)==null?void 0:K.prompt)??null,features:ce,enablePageRedirect:V,isBanned:!!ae,deepLinkTarget:g,search:new URLSearchParams(window.location.search),redirectTargetFromStorage:Mle(),userAccount:pe(cn)});r(le=>{if(!U&&le.size>0)return le;const J=new Map([[Oe,{id:Oe,updatedAt:new Date().toISOString(),history:[],isNew:Me.isNew,characterId:null,continuedAt:null}]]);return!Me.isNew&&ee&&J.set(ee,{id:ee,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:null,continuedAt:null}),J}),u(le=>le&&!U?le:Oe),o(le=>le.length>0&&!U?le:ce),l(X),d(Z),f(ie??null),m(te??!1),te&&lle(),FC(ae,"start",Y),await k.invalidate(),_.current&&(_.current=!1,oe&&await h({...oe,params:oe.needsConversationId?{conversationId:Oe}:{},search:E.current}))}catch(Q){if(D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"StartEndpointError",eventInfo_errorMessage:Q instanceof Error?Q.message:"",eventInfo_details:Q instanceof Error?Q.stack??"":"",...Q instanceof l1&&{eventInfo_statusCode:Q.statusCode}}}),Q instanceof Error){if(Q.message===sv)return n("age-verification"),performance.mark("useStart-legal-unavailable"),!0;xB(Q,"/start")}console.error(Q),performance.mark("useStart-error"),t(Q)}finally{s(!1),ule(!1)}return!0},[A,r,u,a,n,s,o,l,d,m,f,h,e.language,t,g,k])}function Wle(){const e=M(Y5),[t,n]=Ue(ov),s=Gle();return c.useEffect(()=>{t||!e||s({enablePageRedirect:!0,overwriteData:!1}).then(o=>{o&&n(!0)}).catch(console.error)},[s,t,n,e]),c.useEffect(()=>{const o=()=>{s({enablePageRedirect:!1,overwriteData:!0,eventDriven:!0}).catch(console.error)};return Ge.on("auth:account-set-by-msal-sso",o),()=>{Ge.off("auth:account-set-by-msal-sso",o)}},[s]),{appInitialized:t}}let tA=-1;const hm=e=>{addEventListener("pageshow",t=>{t.persisted&&(tA=t.timeStamp,e(t))},!0)},ha=(e,t,n,s)=>{let o,r;return a=>{t.value>=0&&(a||s)&&(r=t.value-(o??0),(r||o===void 0)&&(o=t.value,t.delta=r,t.rating=((l,u)=>l>u[1]?"poor":l>u[0]?"needs-improvement":"good")(t.value,n),e(t)))}},nA=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},i3=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},oh=()=>{const e=i3();return(e==null?void 0:e.activationStart)??0},ga=(e,t=-1)=>{const n=i3();let s="navigate";return tA>=0?s="back-forward-cache":n&&(document.prerendering||oh()>0?s="prerender":document.wasDiscarded?s="restore":n.type&&(s=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},Wg=new WeakMap;function sA(e,t){return Wg.get(e)||Wg.set(e,new t),Wg.get(e)}const rh=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return s.observe({type:e,buffered:!0,...n}),s}}catch{}},oA=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let Nc=-1;const X6=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Ap=e=>{document.visibilityState==="hidden"&&Nc>-1&&(Nc=e.type==="visibilitychange"?e.timeStamp:0,$le())},ex=()=>{addEventListener("visibilitychange",Ap,!0),addEventListener("prerenderingchange",Ap,!0)},$le=()=>{removeEventListener("visibilitychange",Ap,!0),removeEventListener("prerenderingchange",Ap,!0)},rA=()=>{var e;return Nc<0&&(Nc=(document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden")[0])==null?void 0:e.startTime)??X6(),ex(),hm(()=>{setTimeout(()=>{Nc=X6(),ex()})})),{get firstHiddenTime(){return Nc}}},ah=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},tx=[1800,3e3],qle=(e,t={})=>{ah(()=>{const n=rA();let s,o=ga("FCP");const r=rh("paint",a=>{for(const l of a)l.name==="first-contentful-paint"&&(r.disconnect(),l.startTime<n.firstHiddenTime&&(o.value=Math.max(l.startTime-oh(),0),o.entries.push(l),s(!0)))});r&&(s=ha(e,o,tx,t.reportAllChanges),hm(a=>{o=ga("FCP"),s=ha(e,o,tx,t.reportAllChanges),nA(()=>{o.value=performance.now()-a.timeStamp,s(!0)})}))})};let aA=0,$g=1/0,af=0;const Kle=e=>{for(const t of e)t.interactionId&&($g=Math.min($g,t.interactionId),af=Math.max(af,t.interactionId),aA=af?(af-$g)/7+1:0)};let $2;const nx=()=>$2?aA:performance.interactionCount??0,Zle=()=>{"interactionCount"in performance||$2||($2=rh("event",Kle,{type:"event",buffered:!0,durationThreshold:0}))};let sx=0;class Yle{constructor(){O(this,"u",[]);O(this,"l",new Map);O(this,"m");O(this,"p")}v(){sx=nx(),this.u.length=0,this.l.clear()}P(){const t=Math.min(this.u.length-1,Math.floor((nx()-sx)/50));return this.u[t]}h(t){var o,r;if((o=this.m)==null||o.call(this,t),!t.interactionId&&t.entryType!=="first-input")return;const n=this.u.at(-1);let s=this.l.get(t.interactionId);if(s||this.u.length<10||t.duration>n.T){if(s?t.duration>s.T?(s.entries=[t],s.T=t.duration):t.duration===s.T&&t.startTime===s.entries[0].startTime&&s.entries.push(t):(s={id:t.interactionId,entries:[t],T:t.duration},this.l.set(s.id,s),this.u.push(s)),this.u.sort((a,l)=>l.T-a.T),this.u.length>10){const a=this.u.splice(10);for(const l of a)this.l.delete(l.id)}(r=this.p)==null||r.call(this,s)}}}const iA=e=>{const t=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?e():(t(e=oA(e)),document.addEventListener("visibilitychange",e,{once:!0}))},ox=[200,500],Qle=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&ah(()=>{Zle();let n,s=ga("INP");const o=sA(t,Yle),r=l=>{iA(()=>{for(const d of l)o.h(d);const u=o.P();u&&u.T!==s.value&&(s.value=u.T,s.entries=u.entries,n())})},a=rh("event",r,{durationThreshold:t.durationThreshold??40});n=ha(e,s,ox,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(a.takeRecords()),n(!0))}),hm(()=>{o.v(),s=ga("INP"),n=ha(e,s,ox,t.reportAllChanges)}))})};let Jle=class{constructor(){O(this,"m")}h(t){var n;(n=this.m)==null||n.call(this,t)}};const rx=[2500,4e3],Xle=(e,t={})=>{ah(()=>{const n=rA();let s,o=ga("LCP");const r=sA(t,Jle),a=u=>{t.reportAllChanges||(u=u.slice(-1));for(const d of u)r.h(d),d.startTime<n.firstHiddenTime&&(o.value=Math.max(d.startTime-oh(),0),o.entries=[d],s())},l=rh("largest-contentful-paint",a);if(l){s=ha(e,o,rx,t.reportAllChanges);const u=oA(()=>{a(l.takeRecords()),l.disconnect(),s(!0)});for(const d of["keydown","click","visibilitychange"])addEventListener(d,()=>iA(u),{capture:!0,once:!0});hm(d=>{o=ga("LCP"),s=ha(e,o,rx,t.reportAllChanges),nA(()=>{o.value=performance.now()-d.timeStamp,s(!0)})})}})},ax=[800,1800],q2=e=>{document.prerendering?ah(()=>q2(e)):document.readyState!=="complete"?addEventListener("load",()=>q2(e),!0):setTimeout(e)},eue=(e,t={})=>{let n=ga("TTFB"),s=ha(e,n,ax,t.reportAllChanges);q2(()=>{const o=i3();o&&(n.value=Math.max(o.responseStart-oh(),0),n.entries=[o],s(!0),hm(()=>{n=ga("TTFB",0),s=ha(e,n,ax,t.reportAllChanges),s(!0)}))})},tue=e=>{const n=performance.getEntriesByType("navigation")[0],s=n==null?void 0:n.type;let o;const r=navigator;r.connection&&typeof r.connection.effectiveType=="string"&&(o=r.connection.effectiveType);const a={eventName:e.name,eventInfo_duration:e.value,eventInfo_navigationType:s,eventInfo_connectionType:o};D.trackEvent({name:"system",data:a});try{const l=`web-vitals-${e.name}`;performance.mark(l),performance.measure(`web-vitals-measure-${e.name}`)}catch{}};let ix=!1;function nue(){const e=se(uw);if(typeof window>"u"||ix)return;ix=!0;let t=!1;const n=o=>{tue(o),e(r=>({...r,[o.name.toLowerCase()]:o.value}))},s=o=>{t||(t=!0,n(o))};eue(n),qle(n),Xle(s,{reportAllChanges:!0}),Qle(n)}function sue(){c.useEffect(()=>(window.addEventListener("unhandledrejection",y4),()=>{window.removeEventListener("unhandledrejection",y4)}),[])}function oue(e={}){const{isAppInitialized:t=!1}=e,n=window.appStart;return c.useEffect(()=>!t||!n?()=>{}:(window.addEventListener("beforeunload",A4),()=>{window.removeEventListener("beforeunload",A4)}),[t,n]),{startTime:n}}function rue({reason:e,onReload:t}){const{t:n}=q();return i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"pb-3 text-xl",children:n("authentication.accountChanged")}),i.jsx("p",{className:"pb-7",children:n(e==="login"?"authentication.signedInOtherTab":"authentication.signedOutOtherTab")}),i.jsx(ne,{onClick:t,title:n("authentication.reloadToContinue"),variant:"pill",size:"48-lg",className:"w-full",children:n("authentication.reloadToContinue")})]})}const c3=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...e},c.createElement("path",{fill:"#F25022",d:"M12.05 3H3.5v8.55h8.55V3Z"}),c.createElement("path",{fill:"#7FBA00",d:"M21.5 3h-8.55v8.55h8.55V3Z"}),c.createElement("path",{fill:"#00A4EF",d:"M12.05 12.45H3.5V21h8.55v-8.55Z"}),c.createElement("path",{fill:"#FFB900",d:"M21.5 12.45h-8.55V21h8.55v-8.55Z"})),cA=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M16.289 7.53846C17.3723 7.53846 18.7302 6.8061 19.5389 5.82962C20.2712 4.94469 20.8053 3.70884 20.8053 2.47298C20.8053 2.30515 20.79 2.13732 20.7595 2C19.5541 2.04577 18.1047 2.80865 17.235 3.8309C16.5484 4.60903 15.9229 5.82963 15.9229 7.08074C15.9229 7.26383 15.9534 7.44692 15.9686 7.50795C16.0449 7.5232 16.167 7.53846 16.289 7.53846ZM12.4747 26C13.9547 26 14.6107 25.0083 16.4569 25.0083C18.3335 25.0083 18.7455 25.9695 20.3933 25.9695C22.0106 25.9695 23.0939 24.4743 24.1161 23.0095C25.2604 21.3312 25.7334 19.6834 25.7639 19.6071C25.6571 19.5766 22.5599 18.3102 22.5599 14.7552C22.5599 11.6732 25.0011 10.2848 25.1384 10.178C23.5211 7.85887 21.0646 7.79784 20.3933 7.79784C18.5777 7.79784 17.0977 8.89638 16.167 8.89638C15.16 8.89638 13.8326 7.85887 12.2611 7.85887C9.27061 7.85887 6.23438 10.3306 6.23438 14.9994C6.23438 17.8983 7.36343 20.965 8.75186 22.9485C9.94194 24.6268 10.9794 26 12.4747 26Z"})),gm=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M29.546 13.667H16.6074V19.1073H24.0425C23.6865 20.781 22.7411 22.2039 21.3419 23.1773V26.6204H25.6809C28.2662 24.1829 29.754 20.5792 29.754 16.3183C29.754 15.4014 29.6798 14.5178 29.546 13.667Z",fill:"#4285F4"}),c.createElement("path",{d:"M25.6811 26.6202L24.1728 25.4233L21.3422 23.1771C20.0963 24.0439 18.4918 24.5553 16.6077 24.5553C13.0066 24.5553 9.94929 22.0813 8.84297 18.7412H4.37549V22.2862C6.62805 26.8602 11.2579 29.9995 16.6077 29.9995C20.3024 29.9995 23.4137 28.7583 25.6811 26.6202Z",fill:"#34A853"}),c.createElement("path",{d:"M8.84338 18.7412C8.55701 17.8759 8.39918 16.9539 8.39918 16C8.39918 15.0465 8.55701 14.1245 8.84338 13.2592V9.71387H4.37549C3.44448 11.6046 2.91699 13.7387 2.91699 16C2.91699 18.2617 3.44448 20.3958 4.37549 22.2865L8.84338 18.7412Z",fill:"#FBBC05"}),c.createElement("path",{d:"M21.9211 9.56791L25.7683 5.64882C23.3952 3.38751 20.301 2 16.6078 2C11.258 2 6.62807 5.13939 4.37549 9.71335L8.843 13.2583C9.94932 9.91789 13.0066 7.44426 16.6078 7.44426C18.6489 7.44426 20.4778 8.1629 21.9211 9.56791Z",fill:"#EA4335"}));function Dl(){return!!re.instance().config().enableAuth0}function aue(){const e=qp();return c.useCallback(n=>{n?e.removeQueries({queryKey:n}):e.clear()},[e])}function lA(){jt(z0),jt(nl),jt(n1)}function iue(){jt(kd)}function cue(){Jr("sticky-conversation-mode")}function lue(){jt(O7),lA(),iue()}function uue(){cue()}function Xi(){const e=aue(),t=async o=>{const{provider:r,opts:a={},onAuthComplete:l,onAuthError:u}=o;lA(),await ua.instance().logIn(r,a).catch(d=>{console.error(d),u==null||u()})},n=async(o=!0)=>{e(),lue(),uue(),rle(),await ua.instance().logOut().then(async()=>{o&&jC("/")})};return{login:t,logout:n,switchMicrosoftAccount:async()=>{await n(),await t({provider:"microsoft"})}}}function due({accountActionRequired:e,onReload:t}){const{t:n}=q(),s=Dl(),{login:o}=Xi(),{reason:r,provider:a,loginHint:l,correlationId:u}=e,d=async g=>{ye({source:"sessionExpired",scenario:"continueWithMicrosoftWithLoginHint",destination:"continueWithMicrosoftRedirect"}),fg({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"});const{msal:C}=await cs.get();await C.acquireTokenRedirect({...Gd(),loginHint:g,account:C.getAccountByUsername(g)??void 0,prompt:void 0,correlationId:u})},m=async()=>{if(r==="token-expired"&&e.provider==="microsoft"){const{msal:g}=await cs.get();jt(or);const C=g.getActiveAccount();await g.clearCache({account:C})}},f=async(g,C)=>{await m();let v="";switch(g==="microsoft"?(v="MSA",fg({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"})):g==="auth0"&&(v=(C==null?void 0:C.connection)==="apple"?"Apple":"Google",fg({authWorkflowAccountType:(C==null?void 0:C.connection)??"google",apiName:Es.REAUTH_START})),ye({source:"sessionExpired",scenario:`continueWith${v}`,destination:`continueWith${v}Redirect`}),g){case"microsoft":o({provider:g});break;case"auth0":o({provider:g,opts:C});break}},h=async()=>{qt({source:"signin",scenario:"sessionExpired"}),await m(),o({provider:"microsoft"})};return i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"pb-3 text-xl",children:n("authentication.sessionExpired")}),i.jsx("p",{className:"pb-7",children:n("authentication.sessionExpiredMessage")}),r==="token-expired"&&a==="microsoft"&&l&&i.jsx(ne,{onClick:()=>d(l),title:`${n("signInPrompt.continueAs",{name:l})}`,variant:"pill",size:"48-lg",className:"w-full",children:`${n("signInPrompt.continueAs",{name:l})}`}),s?i.jsxs(i.Fragment,{children:[i.jsxs(ne,{onClick:()=>f("microsoft"),title:n("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[i.jsx(c3,{className:"size-6"}),n("signInPrompt.continueWithMicrosoft")]}),i.jsxs(ne,{onClick:()=>f("auth0",{connection:"apple"}),title:n("signInPrompt.continueWithApple"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[i.jsx(cA,{className:"size-6 text-black dark:text-white"}),n("signInPrompt.continueWithApple")]}),i.jsxs(ne,{onClick:()=>f("auth0",{connection:"google"}),title:n("signInPrompt.continueWithGoogle"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[i.jsx(gm,{className:"size-6"}),n("signInPrompt.continueWithGoogle")]})]}):i.jsx(ne,{onClick:h,title:n("common.loginText"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:n("common.loginText")}),i.jsx(ne,{onClick:t,title:n("signInPrompt.continueWithoutSignIn"),variant:"pill",color:"subtle-dimmed-inverted",size:"48-lg",className:"mt-3 w-full",children:n("signInPrompt.continueWithoutSignIn")})]})}function uA(e){const{accountActionRequired:t}=e;return i.jsx(Bo,{isOpen:!0,children:i.jsx(mue,{accountActionRequired:t})})}function mue(e){const{accountActionRequired:t}=e,{reason:n,errorMessage:s}=t;c.useEffect(()=>{D.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"shown",eventInfo_reason:n}}),n==="token-expired"&&t.provider==="microsoft"&&fQ(s)},[n,s,t.provider]);const o=async()=>{if(D.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"reload",eventInfo_reason:n}}),n==="token-expired"&&t.provider==="microsoft"){const{msal:r}=await cs.get(),a=r.getActiveAccount();jt(or),await r.clearCache({account:a})}Rl()};return n==="login"||n==="logout"?i.jsx("div",{className:"flex max-w-72 flex-col items-center p-1 text-center",children:i.jsx(rue,{reason:n,onReload:o})}):i.jsx("div",{className:"flex max-w-96 flex-col items-center p-1 text-center",children:i.jsx(due,{accountActionRequired:t,onReload:o})})}function fue(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function pue(e){if(!fue(e)&&typeof e!="number")return!1;const t=Ft(e);return!isNaN(Number(t))}function dA(e,t){const n=Ft(e);if(isNaN(t))return V0(e,NaN);if(!t)return n;const s=n.getDate(),o=V0(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const r=o.getDate();return s>=r?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function hue(e,t){return dA(e,t*12)}function gue(e,t){return hue(e,-13)}function Xn(e,t,n="en-US"){var o,r;let s;if(e instanceof Date)s=e;else if(typeof e=="number")s=new Date(e<1e12?e*1e3:e);else if(typeof e=="string")s=new Date(e);else throw new Error(`Invalid date input: ${e}`);if(Number.isNaN(s.getTime()))throw new Error(`Invalid date: ${String(e)}`);switch(t){case"yyyyMMdd":{const a=s.getFullYear(),l=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0");return`${a}${l}${u}`}case"yyyyMMdd_HHmmss":{const a=s.getFullYear(),l=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0"),d=s.getHours().toString().padStart(2,"0"),m=s.getMinutes().toString().padStart(2,"0"),f=s.getSeconds().toString().padStart(2,"0");return`${a}${l}${u}_${d}${m}${f}`}case"h:mm aa":case"h:mm a":return new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s);case"h":return((o=new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).formatToParts(s).find(u=>u.type==="hour"))==null?void 0:o.value)??"";case"mm":return new Intl.DateTimeFormat(n,{minute:"2-digit"}).format(s).padStart(2,"0");case"a":return((r=new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).formatToParts(s).find(u=>u.type==="dayPeriod"))==null?void 0:r.value)??"";case"PP":return new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"}).format(s);case"EEEE":return new Intl.DateTimeFormat(n,{weekday:"long"}).format(s);case"eeee":return new Intl.DateTimeFormat(n,{weekday:"long"}).format(s);case"MMMM":return new Intl.DateTimeFormat(n,{month:"long"}).format(s);case"d":return s.getDate().toString();case"MM/dd":{const a=(s.getMonth()+1).toString().padStart(2,"0"),l=s.getDate().toString().padStart(2,"0");return`${a}/${l}`}case"MMM d":return new Intl.DateTimeFormat(n,{month:"short",day:"numeric"}).format(s);case"MMM":return new Intl.DateTimeFormat(n,{month:"short"}).format(s);case"eee, MMM d":return new Intl.DateTimeFormat(n,{weekday:"short",month:"short",day:"numeric"}).format(s);case"eee":return new Intl.DateTimeFormat(n,{weekday:"short"}).format(s);case"EE":return new Intl.DateTimeFormat(n,{weekday:"short"}).format(s);case"h:mma":return new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s).replace(" ","");case"haaa":return new Intl.DateTimeFormat(n,{hour:"numeric",hour12:!0}).format(s).replace(/\s+/g,"").toLowerCase();case"yyyy":return s.getFullYear().toString();case"MM":return(s.getMonth()+1).toString().padStart(2,"0");case"dd":return s.getDate().toString().padStart(2,"0");case"HH":return s.getHours().toString().padStart(2,"0");case"HH:mm":{const a=s.getHours().toString().padStart(2,"0"),l=s.getMinutes().toString().padStart(2,"0");return`${a}:${l}`}case"HH:mm:ss":{const a=s.getHours().toString().padStart(2,"0"),l=s.getMinutes().toString().padStart(2,"0"),u=s.getSeconds().toString().padStart(2,"0");return`${a}:${l}:${u}`}case"ss":return s.getSeconds().toString().padStart(2,"0");case"xD":{const l=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600*24));return z("dates.time.dayAbbrCapitalized",{dayNumber:l})}case"xh":{const l=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600));return z("dates.time.hourAbbr",{hourNumber:Math.max(1,l)})}case"xw":{const l=Math.floor((new Date().getTime()-s.getTime())/(1e3*3600*24*7));return z("dates.time.weekAbbr",{weekNumber:l})}case"yyyy-MM-dd":{const a=s.getFullYear(),l=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0");return`${a}-${l}-${u}`}case"yyyy-MM-dd, h:mm aa":{const a=s.getFullYear(),l=(s.getMonth()+1).toString().padStart(2,"0"),u=s.getDate().toString().padStart(2,"0"),d=new Intl.DateTimeFormat(n,{hour:"numeric",minute:"2-digit",hour12:!0}).format(s);return`${a}-${l}-${u}, ${d}`}default:return s.toLocaleString(n)}}function l3(e,t){if(e){if(e.indexOf("-")!==-1)return e;if(t)return`${e}-${t}`}else if(t)return t;return"en-US"}const ih=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M4.53033 12.9697C4.23744 12.6768 3.76256 12.6768 3.46967 12.9697C3.17678 13.2626 3.17678 13.7374 3.46967 14.0303L7.96967 18.5303C8.26256 18.8232 8.73744 18.8232 9.03033 18.5303L20.0303 7.53033C20.3232 7.23744 20.3232 6.76256 20.0303 6.46967C19.7374 6.17678 19.2626 6.17678 18.9697 6.46967L8.5 16.9393L4.53033 12.9697Z"})),ZIe=Object.freeze(Object.defineProperty({__proto__:null,default:ih},Symbol.toStringTag,{value:"Module"})),vue="p-2 -m-2 bg-slate-200 rounded-xl text-stroke-350";function u3(e){const{disabled:t,checked:n,label:s,className:o,labelClassName:r,setChecked:a,"aria-label":l,"aria-expanded":u,spatialNavigationAutofocus:d=!1}=e,m=c.useId(),{focusable:f,refCallback:h}=Aa({autoRestoreFocus:!0,forceFocus:!0});return i.jsxs("label",{"aria-label":l,className:F("relative flex cursor-pointer items-center",o,f.focused&&vue),ref:h,htmlFor:m,"data-spatial-focus-key":f.focusKey,"data-spatial-navigation-autofocus":d,children:[i.jsx("input",{checked:n,type:"checkbox",id:m,className:"peer sr-only",onChange:g=>a(g.target.checked),disabled:t,"aria-expanded":u}),i.jsx("span",{className:F("flex aspect-square size-5 items-center justify-center rounded-full border transition-colors duration-200 peer-focus:ring-1 peer-focus:ring-black peer-focus:ring-offset-2 peer-disabled:pointer-events-none peer-disabled:opacity-40 dark:peer-focus:ring-white","contrast-more:peer-focus:outline contrast-more:peer-focus:outline-2 contrast-more:peer-focus:outline-offset-2",n&&"bg-black contrast-more:bg-white dark:bg-white"),children:i.jsx(ih,{className:F("size-3 text-white transition-opacity duration-200 contrast-more:text-current dark:text-black contrast-more:dark:text-current",n?"opacity-100":"opacity-0")})}),i.jsx("span",{className:F("mt-px ps-4 peer-disabled:pointer-events-none peer-disabled:opacity-40",r),children:s})]})}const ds=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M8.46967 4.21967C8.17678 4.51256 8.17678 4.98744 8.46967 5.28033L15.1893 12L8.46967 18.7197C8.17678 19.0126 8.17678 19.4874 8.46967 19.7803C8.76256 20.0732 9.23744 20.0732 9.53033 19.7803L16.7803 12.5303C17.0732 12.2374 17.0732 11.7626 16.7803 11.4697L9.53033 4.21967C9.23744 3.92678 8.76256 3.92678 8.46967 4.21967Z"})),YIe=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),Cue={top:36,bottom:36,left:24,right:24};function cf(e){const{ariaLabelId:t,options:n,renderOption:s,onSelect:o,value:r,id:a,actionLabel:l,placeholder:u,className:d,menuClassName:m,expandIconClassName:f,disabled:h=!1,isValid:g=!0,supportsBrowserAutofill:C,supportsTypeahead:v=!1,autoComplete:y,boundary:b,padding:E=Cue,useFloatingContainer:S=!0,multiSelect:I=!1,multiSelectedValues:_=[],onMultiSelectionChange:T}=e,{t:A}=q(),[k,N]=c.useState(!1),[P,V]=c.useState(null),U=n.findIndex(J=>J.key===r),K=c.useRef([]),Q=c.useRef([]);c.useEffect(()=>{k&&V(U>=0?U:0)},[k,U]);const Z=c.useCallback(J=>{var Pe;const Ce=(Pe=n[J])==null?void 0:Pe.key;Ce&&o(Ce)},[o,n]),{refs:Y,floatingStyles:X,context:$}=Ml({placement:"bottom-start",strategy:"absolute",open:k,onOpenChange:N,whileElementsMounted:Ta,middleware:[Tl({padding:E}),R_({boundary:b,apply({rects:J,elements:Ce,availableHeight:Pe}){Object.assign(Ce.floating.style,{maxHeight:`${Pe}px`,minWidth:`${J.reference.width}px`})},padding:E})]}),ee=RC($,{event:"mousedown",enabled:!h}),te=lm($),G=Z1($,{role:"listbox"}),ie=wre($,{listRef:K,activeIndex:P,selectedIndex:U,onNavigate:V,loop:!0,focusItemOnHover:!1,openOnArrowKeyDown:!h}),xe=_re($,{enabled:v,listRef:Q,activeIndex:P,onMatch:k?V:Z}),{getReferenceProps:ce,getFloatingProps:ae,getItemProps:Se}=q1([te,G,ie,ee,xe]),Me=c.useCallback(J=>{if(I){if(!T)return;const Ce=_.includes(J);T(Ce?_.filter(Pe=>Pe!==J):[..._,J])}else o(J),N(!1)},[I,o,T,_]);let Oe;I?_.length>0?Oe=i.jsx("div",{className:"truncate",children:A("dropdown.multiselect.itemsSelected",{count:_.length})}):Oe=i.jsx("div",{className:"truncate text-foreground-550 dark:text-foreground-600",children:u}):U>-1?Oe=s(n[U]):Oe=i.jsx("div",{className:"truncate text-foreground-550 dark:text-foreground-600",children:u});const oe=c.useCallback(J=>{h||o(J.currentTarget.value)},[o,h]),le=c.useRef(null);return i.jsxs(i.Fragment,{children:[C&&i.jsx("select",{"aria-hidden":!0,className:"hidden",onChange:oe,autoComplete:y,disabled:h,children:n.map(J=>i.jsx("option",{value:J.key,children:J.text},J.key))}),i.jsxs("button",{role:"combobox",type:"button",id:a,ref:Y.setReference,"aria-labelledby":t,"aria-expanded":k,"aria-haspopup":"listbox","aria-autocomplete":"none","aria-invalid":!g,"aria-disabled":h,className:ue("flex w-full cursor-pointer items-center justify-between gap-2 rounded-2xl bg-black/5 px-[1.125rem] py-4 dark:bg-background-450/25",d,h&&"pointer-events-none opacity-50"),...ce(),children:[i.jsx("div",{className:"min-w-0",children:Oe}),i.jsxs("div",{className:ue("flex min-h-[26px] shrink-0 grow items-center justify-end gap-2",f),children:[l&&i.jsx("span",{children:l}),i.jsx(ds,{className:"size-6 rotate-90"})]})]}),S&&i.jsx("div",{ref:le}),k&&i.jsx(kl,{root:S?le.current:void 0,children:i.jsx($1,{context:$,modal:!1,initialFocus:-1,returnFocus:!1,children:i.jsx("div",{ref:Y.setFloating,style:X,className:ue("flex overflow-hidden rounded-2xl shadow-md",m),...ae(),children:i.jsx("div",{className:ue("flex w-full flex-col p-2",hee),children:i.jsx("div",{className:ue("vertical-scrollbar overflow-y-auto py-1 pe-1"),children:n.map((J,Ce)=>i.jsx("div",{ref:Pe=>{K.current[Ce]=Pe,Q.current[Ce]=J.text},role:"option",tabIndex:Ce===P?0:-1,"aria-selected":I?_.includes(J.key):Ce===U&&Ce===P,className:"relative cursor-default rounded-xl px-3 py-2 -outline-offset-2 hover:bg-black/5 dark:hover:bg-white/8",...Se({onClick(){I||Me(J.key)},onKeyDown(Pe){Pe.key==="Enter"&&(Pe.preventDefault(),Me(J.key))}}),children:I?i.jsx(u3,{label:J.text,checked:_.includes(J.key),setChecked:()=>Me(J.key)}):s(J)},J.key))})})})})})]})}function cx(e){const{htmlFor:t,content:n,required:s,className:o,afterContent:r}=e;return i.jsxs("div",{className:"flex items-center",children:[i.jsxs("label",{htmlFor:t,className:ue("flex items-center gap-0.5 text-foreground-900",o),children:[n,s&&i.jsx("span",{className:"text-system-red-550 dark:text-system-red-350",children:"*"})]}),r]})}const lx="absolute size-full",yue="bg-gradient-discover-light dark:bg-gradient-discover-dark",bue="bg-gradient-authentication-light dark:bg-gradient-authentication-dark";function ec(e){const{isBottomFade:t,forceGradient:n,isFixed:s,overrideGradientType:o,customColor:r}=e,a=ut(),l=a==="/login",u=n===!0||l,m=(o??(l?"authentication":"default"))==="authentication"?bue:yue;return i.jsxs("div",{className:ue(s?"fixed":"absolute",t?"-inset-x-4 bottom-0 h-dvh":"inset-0","overflow-hidden"),children:[i.jsx("div",{className:ue(lx,"bg-none",r??"bg-background-150")}),i.jsx(pt,{children:u&&i.jsx(ge.div,{className:ue(lx,m),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Fe,animate:nt,exit:Fe},transition:SC},a)})]})}const mA=R(void 0);function xue(e){const{buttonClassName:t}=e,{t:n}=q(),{closeSettings:s}=Er(),o=se(mA),r=M(je);function a(){qt({source:"complianceLinks",scenario:"cookies",conversationId:r,destination:"#"}),o("more-options"),s()}return i.jsx(ne,{role:"menuitem",variant:"rect",size:"28-xxs",color:"subtle-dimmed-inverted",className:t,title:n("settings.cookies"),onClick:()=>a(),testId:"cookies-compliance-button",children:i.jsx("span",{children:n("settings.cookies")})})}const ul="https://www.bing.com/new/termsofuse",Jn="https://go.microsoft.com/fwlink/?LinkId=521839",kp="https://www.microsoft.com/microsoft-copilot/learn/?form=MG0AUO&OCID=MG0AUO#faqs",Of="hover:underline focus:underline";function ux(e){var t,n;return((n=(t=re.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}function QIe(e){const{component:t="link",buttonClassName:n}=e,s=M(je),{pushPage:o}=Er(),r=M(Mn),a=X1(r),l=(d,m)=>{qt({source:"complianceLinks",scenario:d,conversationId:s,destination:m})},u=W("manage-cookies");return i.jsxs("div",{role:"menuitem",className:ue("flex w-full flex-wrap justify-center gap-x-3 gap-y-1 text-black/80 text-xs dark:text-white/80",t==="button"?"flex-col p-0":"px-5 py-2"),children:[t==="link"?i.jsx(Sue,{handleAnalytics:l}):i.jsx(Eue,{handleAnalytics:l,className:n??"",setPage:o}),u&&a&&i.jsx(xue,{buttonClassName:F(Of,{"text-xs p-0 min-h-0 mx-0 min-w-0 gap-x-0 safe-hover:bg-transparent dark:safe-hover:bg-transparent dark:text-white/80":t==="link",[n??""]:t==="button"})})]})}function Sue(e){const{handleAnalytics:t}=e;return i.jsxs(i.Fragment,{children:[i.jsx(ls,{href:Jn,title:z(ux("settings.privacyLink")),className:Of,onClick:()=>t("privacy",Jn),children:z(ux("settings.privacyLink"))}),i.jsx(ls,{href:ul,title:z("settings.termsOfServiceLink"),className:Of,onClick:()=>t("terms",ul),children:z("settings.termsOfServiceLink")}),i.jsx(ls,{href:kp,title:z("settings.faqLink"),className:Of,onClick:()=>t("faq",kp),children:z("settings.faqLink")})]})}function Eue(e){const{handleAnalytics:t,className:n,setPage:s}=e,o=(r,a)=>{var m;t(r,a);const u=(m=re.instance().config().settingsOverrides)==null?void 0:m.shouldShowPolicyTermsQRCodes,d={privacy:"privacyStatement",terms:"terms",faq:"faq",cookies:void 0};u&&r in d?s==null||s(d[r]):Eo(a)};return i.jsxs(i.Fragment,{children:[i.jsx(ne,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:z("settings.privacyLink"),onClick:()=>o("privacy",Jn),children:i.jsx("span",{children:z("settings.privacyLink")})}),i.jsx(ne,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:z("settings.termsOfServiceLink"),onClick:()=>o("terms",ul),children:i.jsx("span",{children:z("settings.termsOfServiceLink")})}),i.jsx(ne,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:z("settings.faqLink"),onClick:()=>o("faq",kp),children:i.jsx("span",{children:z("settings.faqLink")})})]})}const dx={...Nd,"United Kingdom":"UK"},mx={termsLink:i.jsx(fx,{link:ul}),privacyLink:i.jsx(fx,{link:Jn})};function fx(e){const{children:t,link:n}=e;return i.jsx(ls,{className:"underline",href:n,title:"",children:t})}function wue(e,t,n){const s=new Date(n,t-1,e);return pue(s)&&s.getFullYear()===n&&s.getMonth()===t-1&&s.getDate()===e}function Iue(e,t,n){const s=new Date(n,t-1,e),o=gue(new Date);return s<=o}const qg="border-2 border-system-red-550/50 bg-system-red-550/10 text-system-red-550 dark:text-system-red-350";function _ue(){const[e,t]=c.useState(!1),[n,s]=c.useState(void 0),[o,r]=c.useState(void 0);c.useEffect(()=>{async function k(){const N=await wQ();r(N)}k()},[]),c.useEffect(()=>{const k=new URLSearchParams(window.location.search);k.delete("code"),k.delete("state"),k.delete("error"),window.history.replaceState({},document.title,`${window.location.pathname}?${k}`)},[]),c.useEffect(()=>{o&&un({page:"auth0AccountVerificationPage",scenario:"auth0Verification",customData:JSON.stringify({accountType:o})})},[o]);const[a,l]=c.useState(""),[u,d]=c.useState(""),[m,f]=c.useState(""),[h,g]=c.useState(dx["United States"]),{i18n:C}=q(),v=l3(C.resolvedLanguage),y=new Intl.NumberFormat(v,{minimumIntegerDigits:2,useGrouping:!1}),b=new Intl.NumberFormat(v,{minimumIntegerDigits:4,useGrouping:!1});c.useEffect(()=>{t(!!!(u&&m&&a&&h))},[u,m,a,h]);const E=[{key:"01",text:z("common.date.month.january")},{key:"02",text:z("common.date.month.february")},{key:"03",text:z("common.date.month.march")},{key:"04",text:z("common.date.month.april")},{key:"05",text:z("common.date.month.may")},{key:"06",text:z("common.date.month.june")},{key:"07",text:z("common.date.month.july")},{key:"08",text:z("common.date.month.august")},{key:"09",text:z("common.date.month.september")},{key:"10",text:z("common.date.month.october")},{key:"11",text:z("common.date.month.november")},{key:"12",text:z("common.date.month.december")}],S=Object.entries(dx).sort().map(([k,N])=>({key:N,text:k})),I=Array.from({length:31},(k,N)=>{const P=N+1,V=y.format(P);return{key:P.toString(),text:V}}),_=Array.from({length:125},(k,N)=>{const P=new Date().getFullYear()-N,V=b.format(P);return{key:`${new Date().getFullYear()-N}`,text:V}}),T=k=>i.jsx("p",{children:k.text}),A=async()=>{const k=parseInt(a,10),N=parseInt(u,10),P=parseInt(m,10);if(!wue(P,N,k)){ye({source:"auth0AccountVerificationPage",scenario:"auth0VerificationInvalidDate",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}if(!Iue(P,N,k)){ye({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}const K=Xn(new Date(k,N-1,P),"yyyy-MM-dd");s(!0);const Q=await EQ(K,h);if(!Q){ye({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulInvalidToken",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}const{ageGroup:Z}=Q,Y=Z===Xa.NOT_ADULT,X=Z===Xa.ADULT;if(!(Y||X)){ye({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulNotTeenOrAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),s(!1);return}ye({source:"auth0AccountVerificationPage",scenario:"auth0VerificationSuccessful",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),Rl()};return i.jsxs(i.Fragment,{children:[i.jsx(ec,{forceGradient:!0,overrideGradientType:"authentication"}),i.jsxs("section",{className:"relative m-auto flex min-h-dvh max-w-[500px] flex-col items-center justify-center gap-3 overflow-y-auto px-5 py-12 text-center",children:[i.jsx("h1",{className:"mb-4 text-center font-semibold text-2xl sm:text-4xl",children:z("error.auth0VerificationTitle")}),i.jsx("p",{children:z("error.auth0VerificationDescription")}),i.jsxs("div",{className:"mt-12 w-full",children:[i.jsx(cx,{className:"mb-2 text-base",htmlFor:"birthdate-month",content:z("error.auth0VerificationBirthdate"),required:!0}),i.jsxs("div",{id:"birthdate-group",className:"flex gap-2",children:[i.jsx("span",{id:"month-label",className:"sr-only",children:u||z("dates.month")}),i.jsx("span",{id:"day-label",className:"sr-only",children:m||z("dates.day")}),i.jsx("span",{id:"year-label",className:"sr-only",children:a||z("dates.year")}),i.jsx(cf,{renderOption:T,options:E,onSelect:k=>d(k),id:"birthdate-month",ariaLabelId:"month-label",placeholder:z("dates.month"),className:ue("flex-1",Zr,n===!1&&qg),value:u,isValid:n,menuClassName:ct.dropdownMenuOverModal}),i.jsx(cf,{renderOption:T,options:I,onSelect:k=>f(k),id:"birthdate-day",ariaLabelId:"day-label",placeholder:z("dates.day"),className:ue("flex-1",Zr,n===!1&&qg),value:m,menuClassName:ct.dropdownMenuOverModal}),i.jsx(cf,{renderOption:T,options:_,onSelect:k=>l(k),id:"birthdate-year",ariaLabelId:"year-label",placeholder:z("dates.year"),className:ue("flex-1",Zr,n===!1&&qg),value:a,menuClassName:ct.dropdownMenuOverModal})]}),n===!1&&i.jsx("div",{className:ue("mt-2 text-start text-system-red-550 text-sm dark:text-system-red-350"),children:z("error.authh0VerificationAgeError")})]}),i.jsxs("div",{className:"mt-12 w-full",children:[i.jsx(cx,{className:"mb-2 text-base",htmlFor:"country",content:z("error.auth0VerificationCountryRegion"),required:!0}),i.jsx(cf,{renderOption:T,options:S,onSelect:k=>g(k),id:"country","aria-labelledby":"country-group",placeholder:z("error.auth0VerificationCountryRegion"),className:ue("flex-1",Zr),value:h,menuClassName:ct.dropdownMenuOverModal})]}),i.jsxs("div",{className:"mt-12 w-full text-black text-xs dark:text-white/90",children:[i.jsx(mn,{i18nKey:z("error.auth0VerificationDisclaimer"),components:{termsLink:mx.termsLink,privacyLink:mx.privacyLink}}),i.jsx(ne,{className:"mt-4 w-full",color:"strong",size:"56-xl",variant:"rect",onClick:A,title:z("common.continue"),disabled:e,children:z("common.continue")})]})]})]})}function px(e){var t,n;return((n=(t=re.instance().config()).textOverrides)==null?void 0:n.call(t,e))??e}const Kg="w-full";function Tue(){const{switchMicrosoftAccount:e,logout:t,login:n}=Xi(),{t:s}=q(),o=Dl(),r=async()=>{await e()},a=async(d,m)=>{switch(await t(),d){case"microsoft":n({provider:d});break;case"auth0":n({provider:d,opts:m});break}},l=re.instance().config().hideAgeVerificationButton!==!0,u=re.instance().config().hideAgeVerificationSwitchAccountButton!==!0;return i.jsxs(i.Fragment,{children:[i.jsx(ec,{forceGradient:!0}),i.jsxs("section",{className:"relative z-10 m-auto flex h-dvh max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[i.jsx("h1",{className:"text-4xl",children:s(px("error.ageVerificationTitle"))}),i.jsx("h2",{className:"text-foreground-600",children:s(px("error.ageVerification"))}),l&&i.jsx(ne,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",testId:"age-verification",title:s("error.ageVerificationVerifyAge"),onClick:()=>{Nl(fB)},children:s("error.ageVerificationVerifyAge")}),l&&i.jsx("div",{className:"text-balance text-foreground-600",children:s("error.ageVerificationOr")}),o?i.jsxs(i.Fragment,{children:[i.jsxs(ne,{onClick:()=>a("microsoft"),color:"default",title:s("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"56-xl",className:ue(Kg),children:[i.jsx(c3,{className:"size-6"}),s("signInPrompt.continueWithMicrosoft")]}),i.jsxs(ne,{onClick:()=>a("auth0",{connection:"apple"}),color:"default",variant:"pill",size:"56-xl",title:s("signInPrompt.continueWithApple"),className:ue(Kg),children:[i.jsx(cA,{className:"size-6 text-black dark:text-white"}),s("signInPrompt.continueWithApple")]}),i.jsxs(ne,{onClick:()=>a("auth0",{connection:"google"}),color:"default",variant:"pill",size:"56-xl",title:s("signInPrompt.continueWithGoogle"),className:ue(Kg),children:[i.jsx(gm,{className:"size-6"}),s("signInPrompt.continueWithGoogle")]})]}):u&&i.jsx(ne,{className:"w-full",color:"default",size:"56-xl",variant:"rect",title:s("error.ageVerificationSwitchAccount"),onClick:r,children:s("error.ageVerificationSwitchAccount")})]})]})}function Aue(){const e=M(cn);return(e==null?void 0:e.provider)==="auth0"?i.jsx(_ue,{}):i.jsx(Tue,{})}const fA=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 11.6236 19.4723 11.2538 19.4188 10.8923C19.3515 10.4382 19.6839 10 20.1429 10C20.5138 10 20.839 10.2562 20.8953 10.6228C20.9642 11.0718 21 11.5317 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C14.3051 3 16.4077 3.86656 18 5.29168V4.25C18 3.83579 18.3358 3.5 18.75 3.5C19.1642 3.5 19.5 3.83579 19.5 4.25V7.25C19.5 7.66421 19.1642 8 18.75 8H15.75C15.3358 8 15 7.66421 15 7.25C15 6.83579 15.3358 6.5 15.75 6.5H17.0991C15.7609 5.25883 13.9691 4.5 12 4.5Z"})),JIe=Object.freeze(Object.defineProperty({__proto__:null,default:fA},Symbol.toStringTag,{value:"Module"}));function kue(e){const{t}=q(),{btnTitle:n,onBtnClick:s=()=>{}}=e;return i.jsxs("section",{className:"relative z-10 m-auto flex h-full max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[i.jsx("h1",{className:"text-4xl","data-testid":"unhandled-error-title",children:t("error.unhandledErrorTitle")}),i.jsx("h2",{className:"text-foreground-600",children:t("error.unhandledError")}),i.jsx(ne,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:t("error.unhandledErrorReload"),onClick:s,testId:"unhandled-error-reload",children:n??i.jsxs(i.Fragment,{children:[i.jsx(fA,{className:"size-6"}),t("error.unhandledErrorReload")]})})]})}function d3(){return i.jsxs("main",{className:"relative size-full overflow-hidden",children:[i.jsx(ec,{forceGradient:!0}),i.jsx(kue,{onBtnClick:()=>{Rl()}})]})}const Mue=100,Mp=R([]);function pA(){const e=M(Mp),[t,n]=c.useState(!1),s=c.useRef(null);c.useEffect(()=>(s.current=setTimeout(()=>n(!0),Mue),()=>{s.current&&clearTimeout(s.current)}),[]);const o=t?e:[];return i.jsxs("div",{className:"sr-only",children:[i.jsx(hx,{messages:o.filter(r=>r.type==="polite"),type:"polite"}),i.jsx(hx,{messages:o.filter(r=>r.type==="assertive"),type:"assertive"})]})}function hx({messages:e,type:t}){return i.jsx("div",{"aria-live":t,"aria-atomic":"true",children:e.map(n=>i.jsx("div",{"aria-label":n.msg,children:n.msg},n.id))})}function K2(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.floor(Math.random()*16);return(e==="x"?t:Math.floor(Math.random()*4+8)).toString(16)})}const hA=7e3;function Ti(e={}){return Nue(e),null}function Nue(e={}){const{msg:t,id:n,type:s="polite",timeout:o=hA}=e,r=se(Mp),a=c.useRef(n??K2());c.useEffect(()=>{t&&r(l=>{if(l.some(d=>d.id===a.current&&d.msg===t&&d.type===s))return l;a.current=n??K2();const u={msg:t,id:a.current,type:s};return window.setTimeout(()=>{r(d=>d.filter(m=>m.id!==u.id))},o),[...l,u]})},[n,t,s,r,o])}function ho(e){const{msg:t,id:n,type:s="polite",timeout:o=hA}=e;if(!t)return;const r=$e();r.set(Mp,a=>{const l={msg:t,id:n??K2(),type:s};return window.setTimeout(()=>{r.set(Mp,u=>u.filter(d=>d.id!==l.id))},o),[...a,l]})}function Rue(){const{t:e}=q(),t=M(Fw);let n="main";rn(G0)&&t==="permanent"&&(n="confirm-submission");const[s,o]=c.useState(n),[r,a]=c.useState(""),[l,u]=c.useState(!1),d=!r||r.trim().length===0||l,m=t==="permanent"?e("composer.userBan.permanent"):e("composer.userBan.temporary",{duration:e(t==="1-hr"?"composer.userBan.duration1Hr":"composer.userBan.duration24Hr")}),f=e(t==="permanent"?"composer.userBan.banMessagePermanent":"composer.userBan.banMessageTemporary"),h=async()=>{if(!d){qt({source:"submitBanAppeal"}),u(!0);try{await kn({path:"/user/bans/appeal",args:{body:{appealText:`APPEAL: ${r}`}}}),o("confirm-submission"),An(G0,new Date().toISOString())}catch(g){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitBanAppeal",eventInfo_errorMessage:`${g}`,eventInfo_details:"Error submitting ban appeal"}})}u(!1)}};return i.jsxs("main",{className:"relative size-full",children:[i.jsx(ec,{forceGradient:!0}),i.jsxs(ln,{id:s,className:"relative z-10 m-auto flex h-dvh max-w-[540px] flex-col items-center justify-center gap-3 p-12 text-center",children:[s==="main"&&i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-4xl",children:m}),i.jsx("p",{children:f}),t==="permanent"&&i.jsx(ne,{color:"strong",size:"56-xl",className:"mt-6 w-full",title:e("composer.userBan.submitAppeal"),onClick:()=>o("submit-appeal"),children:e("composer.userBan.submitAppeal")}),i.jsx(Ti,{msg:`${m}. ${f}`})]}),s==="submit-appeal"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex w-full items-center pb-4",children:[i.jsx(ne,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:e("common.backText"),onClick:()=>o("main"),children:i.jsx(Il,{className:"size-5 -rotate-90"})}),i.jsx("h2",{className:"grow pe-8",children:e("composer.userBan.submitAppeal")})]}),i.jsx("textarea",{className:"h-[240px] w-full resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",onChange:g=>a(g.target.value),disabled:l,placeholder:e("composer.userBan.submitAppealPlaceholder")}),i.jsx(ne,{color:"strong",className:"w-full",size:"56-xl",title:e("common.submitText"),onClick:h,disabled:d,children:e("common.submitText")})]}),s==="confirm-submission"&&i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-4xl",children:e("composer.userBan.appealSubmitted")}),i.jsx("p",{children:e("composer.userBan.appealSubmittedDescription")}),i.jsx(Ti,{msg:`${e("composer.userBan.appealSubmitted")}, ${e("composer.userBan.appealSubmittedDescription")}`})]})]})]})}function Pue(e){const{children:t}=e;pie(),Pce(),J1(),GJ(),Sie(),dle();const{appInitialized:n}=Wle();dce(),Xie(n),iie(),sue();const s=jT(),o=se(y1);Rce({isEnabled:s,onIntercept:o,shouldIntercept:u=>rT(u)});const r=M(qr),a=M(Y5);oue({isAppInitialized:n}),zJ(),Die(),FJ(n),VJ({appInitialized:n}),gie(),oce();const l=M(ed);return nue(),sie(),Nce(n),Lce(),oie(),hie(),fce(),rie(),l==="user-banned"?i.jsx(Rue,{}):l==="age-verification"?i.jsx(Aue,{}):l?i.jsx(d3,{}):!n||!a?null:r?i.jsx(uA,{accountActionRequired:r}):t}function Lue(){const e=M(I1),t=c.useRef(!1);c.useEffect(()=>{e&&!t.current&&(D.trackEvent({name:"system",data:{eventName:"copilotStart",eventInfo_duration:window.appEnd-window.appStart,eventInfo_landingPage:D.getLandingPage()}}),t.current=!0)},[e])}const Oue=$e();function gA(e){Oue.set(hi,e)}function Due(){const e=om(),t=M(Mw),[n,s]=Ue(qd);c.useEffect(()=>{e&&!n&&s(t)},[e,t,n,s])}const jue=10*1024*1024,Uue=5*1024*1024,Fue=50*1024*1024,Bue=3,$s={"image/png":["png"],"image/jpeg":["jpg","jpeg"],"image/webp":["webp"],"image/svg+xml":["svg"],"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/msword":["doc"],"application/vnd.ms-excel":["xls"],"application/vnd.ms-powerpoint":["ppt"],"application/json":["json"],"text/xml":["xml"],"application/x-sql":["sql"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"],"text/html":["html","htm"],"text/javascript":["js"],"text/css":["css"],"application/xml":["xml"]},Vue={"image/png":["png"],"image/jpeg":["jpg","jpeg"]},Hue={"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/json":["json"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"]},gx=R(null),vA=R(e=>{const t=e(ya("fileasyncprocessing"));return{maxFilesPerMessage:Bue,image:{maxBytes:jue,mimeTypes:Vue},document:{maxBytes:t?Fue:Uue,mimeTypes:Hue}}}),Wo=R(e=>e(gx)??e(vA),(e,t,n)=>{t(gx,n)}),jl=R(e=>{const t=e(Wo);return{...t.image.mimeTypes,...t.document.mimeTypes}});function CA(e){if(e.length===0)throw new Error("Array must have at least one element");return Math.floor(Math.random()*e.length)}function XIe(e,t){if(e.length===1)throw new Error("Array must have at least two elements");let n;do n=CA(e);while(n===t);return n}function zue(e){if(e.length!==0)return e[CA(e)]}function Gue(e){const t=[...e];for(let n=e.length-1;n>0;n-=1){const s=Math.floor(Math.random()*(n+1)),o=t[n];o&&t[s]&&(t[n]=t[s],t[s]=o)}return t}function e_e(e,t){if(e.length!==t.length)return!1;const n=[...e].sort(),s=[...t].sort();return n.every((o,r)=>o===s[r])}const Wue={refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:1/0,refetchInterval:Tp};function $ue(e,t){return Ct(e,$$,t?{query:{"api-version":"2"}}:void 0).then(n=>n.data)}function is(e){return Array.isArray(e)?Vs(e):{positive:Vs(e.positive),negative:Vs(e.negative)}}function Vs(e){const t=e,n=t.slice(0,-1),s=t.slice(-1);return[...Gue(n),...s]}function que(e){return{newsArticle:Vs(e.newsArticle),newsVideo:Vs(e.newsVideo),newsGem:Vs(e.newsGem),chat:Vs(e.chat),dailyBriefing:Vs(e.dailyBriefing),podcast:Vs(e.podcast),default:Vs(e.default)}}function Kue(){const e=W("adspositivefeedbacksurvey"),t=W("file-upload-config"),{data:n,refetch:s}=Ms({queryKey:["config",e?"adsV2":"adsV1"],queryFn:()=>$ue("/config",e),...Wue}),o=se(C1),r=se(tw),a=se(ow),l=se(Aae),u=se(kae),d=se(Mae),m=se(Gv),f=se(Wv),h=se(nw),g=se(Wo),C=se(kZ);MT(s),c.useEffect(()=>{if(n){if(o(n.voices),r(n.signInPrompts),a(n.maxTextMessageLength),l(n.maxPageContentLength),d(n.pageLimit),u(n.maxPageTitleLength),n.characters&&f(n.characters),n.feedbackOptions.text=Vs(n.feedbackOptions.text),n.feedbackOptions.image=Vs(n.feedbackOptions.image),n.feedbackOptions.discover&&(n.feedbackOptions.discover=que(n.feedbackOptions.discover)),n.feedbackOptions.card.local=is(n.feedbackOptions.card.local),n.feedbackOptions.card.ads=is(n.feedbackOptions.card.ads),n.feedbackOptions.card.video=is(n.feedbackOptions.card.video),n.feedbackOptions.card.image=is(n.feedbackOptions.card.image),n.feedbackOptions.card.shopping=is(n.feedbackOptions.card.shopping),n.feedbackOptions.card.recipe=is(n.feedbackOptions.card.recipe),n.feedbackOptions.card.sports=is(n.feedbackOptions.card.sports),n.feedbackOptions.card.finance=is(n.feedbackOptions.card.finance),n.feedbackOptions.card.quiz=is(n.feedbackOptions.card.quiz),n.feedbackOptions.card.weather=is(n.feedbackOptions.card.weather),n.feedbackOptions.card.personalArtifacts=is(n.feedbackOptions.card.personalArtifacts),n.feedbackOptions.card.healthcareInfo=is(n.feedbackOptions.card.healthcareInfo),n.feedbackOptions.card.navigation=is(n.feedbackOptions.card.navigation),n.feedbackOptions.card.healthcareEntity=is(n.feedbackOptions.card.healthcareEntity),m(n.feedbackOptions),h(n.messagePreview),t){const v=I=>{const _={};for(const T of I)T in $s&&$s[T]&&(_[T]=$s[T]);return _},y=v(n.attachments.image.mimeTypes),b=v(n.attachments.document.mimeTypes),E=pe(vA),S=(I,_)=>({maxBytes:I.maxBytes??_.maxBytes,mimeTypes:Object.keys(I.mimeTypes??{}).length?I.mimeTypes??{}:_.mimeTypes});g({maxFilesPerMessage:n.attachments.maxFilesPerMessage||E.maxFilesPerMessage,image:S({maxBytes:n.attachments.image.maxBytes,mimeTypes:y},E.image),document:S({maxBytes:n.attachments.document.maxBytes,mimeTypes:b},E.document)})}C(n.portraits??[])}},[n,r,o,a,l,u,m,f,d,h,g,t,C])}function Zue(){const e=hl(vt);return c.useCallback(n=>{e(s=>{for(const{id:o,title:r,updatedAt:a,characterId:l,continuedAt:u,group:d}of n){const m=s.get(o);m?(m.title=r,m.updatedAt=a,m.characterId=l??null,m.continuedAt=u,m.group=d??null):s.set(o,{id:o,title:r,updatedAt:a,characterId:l??null,history:[],continuedAt:null,group:d??null})}})},[e])}function Yue(){const e=Zue(),t=se(zd),n=W("group-conversations");return c.useCallback(async({url:o,args:r,isFirstPage:a})=>{const l=await Ct(o,cq,{query:{...r,...n?{types:"group,chat"}:{}}}).then(u=>u.data);if(l.results.length>0){const u=l.results.map(d=>({...d,history:[]}));e(u),t(!0)}else a&&t(!1);return l},[e,t,n])}function vm(e){const{data:t,error:n,isPending:s,isFetchingNextPage:o,hasNextPage:r,fetchNextPage:a,refetch:l}=zL({staleTime:6048e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,...e}),u=c.useCallback(async()=>{r&&await a()},[a,r]),d=t==null?void 0:t.pages,m=s||o,f=c.useCallback(async()=>{await l({cancelRefetch:!1})},[l]);return{loader:{loading:m,hasNextPage:r,error:n??void 0,onLoadMore:u,data:d},refetch:f}}function Que(){const e=Yue();return vm({queryKey:["conversations"],queryFn:({pageParam:t})=>e(t),initialPageParam:{url:"/conversations",isFirstPage:!0},getNextPageParam:t=>t.next?{url:"/conversations",args:{cursor:t.next}}:null})}const Jue="aster";function Xue(){const e=se(Mn),t=se(KY),n=!Gt("kill-picasso-id-on-start");return c.useCallback(async()=>{const s=await Ct("/user",_E,{parseOptions:{safe:!0},query:{"api-version":"4"}}).then(u=>u.data),{id:o,anid:r,isHistoryMigrationPending:a}=s;D.setAnid(r);const l=D.getPicassoId();return l!==null&&l!==o&&D.trackEvent({name:"health",data:{eventName:"userIdMismatch",eventInfo_customData:JSON.stringify({existingPicassoId:l,newPicassoId:o,origin:"user"})}}),n||D.setPicassoId(o),t(a),e(s.regionCode),s},[n,t,e])}function ede(){const e=M(cn),t=M(Ri),{refetch:n}=Que(),s=Xue(),o=se(Yt),r=se(IZ),a=se(bi),l=se($d),u=se(Mw),d=se(Rw),m=se(nC),f=se(_1),h=se(HY),g=se(jZ),C=se(Pw),v=se(zY),y=se(GY),b=se(WY),E=se(Lw),S=se(Ow),I=se(Aw),_=se(T1),T=se(Kd),A=se(A1),k=se($Y),N=se(XY),P=om(),V=W("account-change-chat-reset"),U=J1()[0]==="audioCall";c.useEffect(()=>{(async()=>{r(!0);try{const Q=Promise.all([s(),Ct("/user/settings",aq).then(Be=>Be.data),n()]),Z=ua.instance().getUserInfo(),[{id:Y,firstName:X,isPro:$,inEeaPlusRegion:ee,isEligibleForFreeTrial:te,phoneLink:G,ageGroup:ie,allowedToggles:xe,remainingUsage:ce,subscriptions:ae,accountTier:Se,requiredConsents:Me},{preferredVoice:Oe,preferredCharacter:oe,optOutOfTraining:le,optInToVoiceTraining:J,optOutOfPersonalization:Ce,optOutOfPhoneConnection:Pe,optInToGenerativeUI:qe,allowBiometricDataUse:Xe,allowOneDriveAccess:et,allowOutlookAccess:fe,allowEdgePasswordsAccess:Ee,allowBrowserActions:Ae,allowComputerUseActions:Ye,features:De}]=await Q;if(D.setIsAad(t),o({id:Y,firstName:X,isPro:$&&!t,inEeaPlusRegion:ee,isEligibleForFreeTrial:te,phoneLink:G,ageGroup:ie,allowedToggles:xe,subscriptions:ae,accountTier:Se,isStudent:void 0,requiredConsents:Me}),I(X??void 0),!V&&!U&&await VC(),l(Oe||Jue),P&&oe){const Be=ZE(oe);u(Be)}d(le),m(J),f(Ce),h(!!Pe),g(!!qe),C(!!Xe),v(!!et),y(!!fe),b(!!Ee),E(Ae),S(Ye),k((De==null?void 0:De.suggestedFollowups)??!0),N(Me),ce&&(_(ce.podcastGenerations),T(ce.researchCalls),A(ce.videoGenerations)),D.setSettings({userSettingVoiceType:Oe??void 0,userConsentPersonalization:!Ce,userConsentModelTraining:!le,userSettingBrowserActions:Ae??void 0,userSettingComputerUseActions:Ye??void 0,userSubscription:$?"pro":"free",accountTier:Se??"free",activeSubscriptions:(ae==null?void 0:ae.map(Be=>Be.tier).join(","))??""});const Ke=await Z;if(Ke){const{mail:Be,givenName:ve,imgSrc:ze,isStudent:yt}=Ke;o(Ne=>Ne&&{...Ne,givenName:ve,email:Be,imgSrc:ze,isStudent:yt}),ve&&!X&&I(ve),t||a(null)}}finally{r(!1)}})().catch(console.error)},[e,V,o,r,a,n,d,l,P,h,g,m,f,C,v,E,S,s,t,u,U,I,_,T,A,k,N,y,b])}const yA=()=>{const e=W("google-drive-connector"),{isGoogleDriveEnabled:t=!1}=re.instance().config().connectorPlatform??{};return e&&!!t},tde=()=>{const e=W("google-calendar-connector"),{isGoogleCalendarEnabled:t=!1}=re.instance().config().connectorPlatform??{};return e&&!!t},bA=()=>{const e=M(Q5),t=W("outlook-connector"),n=W("email-assist"),{isOutlookEnabled:s=!1}=re.instance().config().connectorPlatform??{};return e&&s&&(t||n)},xA=()=>{const e=M(Q5),t=W("onedrive-connector"),{isOneDriveEnabled:n=!1}=re.instance().config().connectorPlatform??{};return e&&n&&t},SA=()=>{const e=W("google-mail-connector"),{isGmailEnabled:t=!1}=re.instance().config().connectorPlatform??{};return e&&!!t},EA=()=>{const e=W("google-contacts-connector"),{isGoogleContactsEnabled:t=!1}=re.instance().config().connectorPlatform??{};return e&&!!t},wA=()=>{const e=M(Q5),t=W("edge-browser-connector"),{isEdgeBrowserEnabled:n=!1}=re.instance().config().connectorPlatform??{};return e&&t&&!!n},vx="userConnectors",nde="/connections",sde=["one-drive","outlook","edge-browser","gmail","google-calendar","google-contacts","google-drive"];async function ode(){const{data:e}=await Ct(nde,SK,{options:{method:"GET",headers:{"Content-Type":"application/json"}}});return e.connections}function rde(){const e=Qt(),t=yA(),n=tde(),s=bA(),o=xA(),r=SA(),a=EA(),l=wA(),u=e&&(t||n||s||o||r||a||l),d=se(td),m=_t("kill-google-drive-connector"),f=c.useMemo(()=>{let v=[...sde];return(m||!t)&&(v=v.filter(y=>y!=="google-drive")),s||(v=v.filter(y=>y!=="outlook")),n||(v=v.filter(y=>y!=="google-calendar")),o||(v=v.filter(y=>y!=="one-drive")),r||(v=v.filter(y=>y!=="gmail")),a||(v=v.filter(y=>y!=="google-contacts")),l||(v=v.filter(y=>y!=="edge-browser")),v},[m,s,n,o,r,a,t,l]),{data:h,error:g,isLoading:C}=Ms({queryKey:["userConnectors"],queryFn:ode,enabled:u});return c.useEffect(()=>{if(h!==void 0){const v=f.map(y=>{const b=h.find(E=>E.type===y);return{type:y,status:(b==null?void 0:b.status)??"disconnected",id:(b==null?void 0:b.id)??`${y}-${crypto.randomUUID()}`}});d(v)}},[h,d,f]),{isLoading:C,error:!!g,data:C||!h?null:h}}const ade=x({isMobileAppInstalled:he()}),ide="/user/install-status",cde={refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:6e4};async function lde(){try{return(await Ct(ide,ade,{options:{method:"GET"}})).data.isMobileAppInstalled}catch(e){throw console.error("Failed to fetch mobile app install status:",e),e}}function ude(){const e=se(Kv),{data:t,error:n,isLoading:s,refetch:o}=Ms({queryKey:["mobileAppInstallStatus"],queryFn:lde,...cde});return c.useEffect(()=>{t!==void 0&&e(t)},[t,e]),{isMobileAppInstalled:t,isLoading:s,error:n,refetch:o}}function dde(){const e=W("memory-narrative"),t=Qt(),n=M(_1),s=M(sC);return e&&t&&!n&&!s}const IA="/user/narrative";function Cx(e,t){var n;return(n=e.filter(s=>s.name===t)[0])==null?void 0:n.url}function t_e(e){const{background1:t,background2:n,background3:s}=e,r=[n,t,s].filter(l=>typeof l=="object"&&"light"in l&&"dark"in l);if(r.length===0)return[];const a=[];for(let l=0;l<r.length;l+=1){const u=r[l],d=r[(l+1)%r.length];!u||!d||(a.push({type:"gradient",from:u,to:d}),a.push({type:"solid",color:d}))}return a}function n_e(e,t,n){const s=e[t%e.length];return s?s.type==="gradient"?`linear-gradient(to bottom, ${n?`#${s.from.dark}`:`#${s.from.light}`}, ${n?`#${s.to.dark}`:`#${s.to.light}`})`:n?`#${s.color.dark}`:`#${s.color.light}`:"var(--background-color)"}function s_e(e,t){return t==="wavy-shape"?Cx(e,"hero-image-wavy-tablet"):Cx(e,`hero-image-${t}-tablet`)}const mde=x({from:p()});function fde(e){return mde.safeParse(e).success}function o_e(e){return fde(e)?e.from:"/"}const r_e={start:{...Fe,y:300},end:{...nt,y:0}},a_e={duration:use,ease:dse},pde={refetchOnWindowFocus:!1,retry:!1,refetchInterval:Tp},hde=["memoryNarrative",IA];async function gde(e){const{data:t,response:n}=await Ct(e,v$,{options:{method:"GET",headers:{"Content-Type":"application/json"}},query:{"api-version":"2"}});if(!n.ok)return null;const{id:s,sections:o,theme:r,masks:a,font:l,fontHandwriting:u}=t;return{id:s,sections:o.filter(d=>d.type!=="shareDefault"),config:{theme:r,masks:a,font:l,...u?{fontHandwriting:u}:{}}}}function vde(){const e=Qt(),t=dde(),n=e&&t,{data:s,error:o,isPending:r}=Ms({queryKey:hde,enabled:n,queryFn:()=>gde(IA),...pde});return{isLoading:r,error:o,data:r||!s?null:s}}const yx="ms-copilot://chat",Cde=1e3;function yde(e){if(typeof window>"u")return new URLSearchParams;const t=new URLSearchParams,n=D.getFormCode();n&&t.set("form",n);const s=RK();return s&&t.set("ocid",s),e!=null&&e.prompt&&t.set("q",e.prompt),t}function bde(e){return e?`${yx}?${e.toString()}`:yx}async function xde(e){if(!GE())return!1;try{const t=yde(e),n=bde(t),s=document.createElement("iframe");return s.style.display="none",s.src=n,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},Cde),!0}catch{return!1}}function Sde(){const e=Gt("kill-windows-protocol-launcher"),t=M(qv),n=M(YE);c.useEffect(()=>{if(e||!GE()||!n)return;(async()=>{try{await xde({prompt:t??void 0})}catch(o){console.error(o)}})()},[n,e,t])}const Z2="composer-visible",_A="composer-input";function Ede(e){return e.entryType==="element"&&"identifier"in e}function wde(){performance.getEntriesByName("startupTime-begin").length||performance.mark("startupTime-begin",{startTime:window.appStart});const e=performance.measure("measure-TTC","startupTime-begin",Z2);po({feature:"composer",scenario:"measure-TTC",duration:e.duration})}function Ide(){const e=pm();if(typeof window>"u"||!e)return()=>{};const t=new PerformanceObserver(n=>{try{if(performance.getEntriesByName(Z2).length>0){t.disconnect();return}for(const s of n.getEntries()){if(!Ede(s))continue;const{startTime:o,entryType:r,identifier:a}=s;if(r==="element"&&a===_A){performance.mark(Z2,{startTime:o}),wde(),t.disconnect();break}}}catch{}});return t.observe({type:"element",buffered:!0}),()=>t.disconnect()}function _de(){c.useEffect(()=>Ide(),[])}function Tde(){return ede(),rde(),ude(),vde(),Kue(),Due(),Lue(),Sde(),_de(),null}const Ade=7*24*60*60*1e3;function kde(){return wt(q0,he().nullable())===!0}function Mde(){return wt(H0,he().nullable())===!0}function Nde(){return Ma().state.location.pathname==="/login"}function Zg(e){return ta(e)?"AAD":"MSA"}async function Rde(){const e=$e();function t(){if(!kde()||Mde())return!1;const a=wt(Jb,j().nullable());return!(a&&Date.now()-a<Ade)}function n(o){var r;if(o===null){e.set(cn,null),D.setUserAccountType(void 0);return}e.set(cn,{id:((r=o.idTokenClaims)==null?void 0:r.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:Zg(o.tenantId)}),D.setUserAccountType(Zg(o.tenantId))}async function s(){try{re.instance().config().enableAuth0&&await Lo.get();const{msal:o}=await cs.get();D.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"DCL",eventInfo_timing:performance.now()-window.appStart}}),o.addEventCallback(async m=>{var f,h;tJ(m),m.eventType===((f=window.msal)==null?void 0:f.EventType.ACCOUNT_ADDED)?e.set(qr,{reason:"login"}):m.eventType===((h=window.msal)==null?void 0:h.EventType.ACCOUNT_REMOVED)&&e.set(qr,{reason:"logout"})});let r=!1;const a=ua.instance();await a.initAuthAccount(),r=!!await a.getAccountFromProviders(),e.set(Y5,!0);const{monitorAccountChangesAcrossTabs:u,enableAuth0:d}=re.instance().config();if(u&&o.enableAccountStorageEvents(),!r){const m=wt(or,p());m&&(await pQ(),await o.loginRedirect({...Gd(),prompt:"none",loginHint:m}))}if(!r&&t()){const m=performance.now();try{const f=await o.ssoSilent(eY()),h=performance.now()-m,g=Zg(f.account.tenantId)==="MSA";g||gg({message:"SSO Silent returned an AAD account",errorCode:"unexpected_account_type"}),Nde()&&gg({message:"User is on login page, skipping account update",errorCode:"sso_on_login_page"}),g?(o.setActiveAccount(f.account),n(f.account),nJ({accountUpdate:!0,accountType:"MSA",message:"Account set by MSAL silent SSO",duration:h}),Ge.emit("auth:account-set-by-msal-sso")):await o.logoutRedirect({account:f.account,onRedirectNavigate:()=>!1})}catch(f){gg({message:f instanceof Error?f.message:"Unknown error",errorCode:window.msal&&f instanceof window.msal.AuthError?f.errorCode:""})}Vn(Jb,j(),Date.now())}d&&u&&b2.addEventListener("message",m=>{const f=_K.safeParse(m.data);if(!f.success)return;const{eventName:h}=f.data;h==="auth0.accountAdded"?e.set(qr,{reason:"login"}):h==="auth0.accountRemoved"&&e.set(qr,{reason:"logout"})})}catch(o){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"DCL",eventInfo_errorMessage:o instanceof Error?o.message:""}})}}return s()}function Pde(){if(typeof document>"u")return;const e=()=>{setTimeout(()=>Rde(),0)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}function TA(){const e=gt({breakpoint:"sm"});return(re.instance().config().responsiveFullWidthSidebarEnabled??!1)&&e}function Lde(e){return["/login","/e/so","/e/sol","/fang","/referrals","/referrals/rules","/memory/narrative"].includes(e)}function Ns(){const e=ut();return(re.instance().config().sidebarNavigation??!1)&&!Lde(e)}function Ul(){const e=Ns(),t=W("sidebar-narrow"),n=re.instance().config().useCompactSidebarHeader??!1;return e&&t&&!n}function Cm(){const e=Ns(),t=Ul(),n=M(Fo),s=gt({breakpoint:"md"});return e&&t&&!n&&!s}function ym({endDelay:e=200}={}){const[t,n]=c.useState(!1),s=c.useRef(null);return c.useEffect(()=>{if(typeof window>"u")return()=>{};const o=()=>{n(!0),s.current!==null&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{n(!1)},e)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o),s.current!==null&&window.clearTimeout(s.current)}},[e]),t}function Np(e){const{className:t,text:n}=e;return i.jsx("p",{className:F("inline h-min flex-none rounded border px-0.5 uppercase text-2xs",t),children:n})}function m3({defaultValue:e,controlledValue:t,onChange:n}){const s=t!==void 0,[o,r]=c.useState(e);return c.useEffect(()=>{s&&r(t)},[t,s]),{state:s?t:o,setState:u=>{s||r(u),n==null||n(u)}}}function bm(e){var N;const{renderTrigger:t,triggerClick:n,children:s,className:o,options:r,isOpen:a,trapFocus:l,onIsOpenChange:u}=e,{state:d,setState:m}=m3({controlledValue:a,defaultValue:!1,onChange:u}),{disableFocusManager:f=!1}=r??{},h=qi(),{refs:g,x:C,y:v,strategy:y,context:b,middlewareData:E}=Ml({open:d,placement:(r==null?void 0:r.placement)??"bottom-end",onOpenChange:m,middleware:[fa((r==null?void 0:r.offset)??1),Tl({fallbackAxisSideDirection:"end"}),pa(),Koe()],whileElementsMounted:Ta}),S=RC(b),I=lm(b),_=Z1(b,{role:(r==null?void 0:r.roleType)??"dialog"}),{getReferenceProps:T,getFloatingProps:A}=q1([S,I,_]),k=P=>{r!=null&&r.stopReferencePropagation&&P.stopPropagation(),n==null||n(P)};return i.jsxs(i.Fragment,{children:[t==null?void 0:t({ref:g.setReference,...T({onClick:k})},d),d&&i.jsx(kl,{root:r==null?void 0:r.rootRef,children:i.jsx($1,{context:b,modal:l,disabled:f,returnFocus:(r==null?void 0:r.returnFocus)??!0,children:i.jsx("div",{ref:P=>{g.setFloating(P),r!=null&&r.menuRef&&(r.menuRef.current=P)},style:{position:y,top:`${v}px`,[h?"insetInlineEnd":"insetInlineStart"]:`${C}px`,visibility:(N=E.hide)!=null&&N.referenceHidden?"hidden":"visible"},...A({onClick:P=>{r!=null&&r.stopFloatingPropagation&&P.stopPropagation(),r!=null&&r.hideOnMenuClick&&m(!1)}}),className:ue("flex rounded-2xl p-1.5 shadow-xl",(r==null?void 0:r.overrideZIndex)??ct.modal,o),children:s})})})]})}function Ode(e={}){const{disabled:t=!1}=e,n=Gt("kill-shared-page"),s=c.useCallback(async o=>{const{pageParam:r}=o,{url:a,args:l}=r,u={...l,...n?{}:{"api-version":"2"}};return await Ct(a,T$,{query:u,analytics:{anonymousPath:"/pages"}}).then(m=>m.data)},[n]);return vm({queryKey:["pages"],queryFn:s,enabled:!t,initialPageParam:{url:"/pages",isFirstPage:!0},getNextPageParam:o=>o.next?{url:"/pages",args:{cursor:o.next}}:null})}function Dde(){const e=W("pages-anonymous"),t=Qt();return{canCreatePageForSignedOut:e,canCreatePage:t||e}}const f3=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5.25 4H18.75C20.483 4 21.8992 5.35645 21.9949 7.06558L22 7.25V16.75C22 18.483 20.6435 19.8992 18.9344 19.9949L18.75 20H5.25C3.51697 20 2.10075 18.6435 2.00514 16.9344L2 16.75V7.25C2 5.51697 3.35645 4.10075 5.06558 4.00514L5.25 4H18.75H5.25ZM20.5 9.373L12.3493 13.6637C12.1619 13.7623 11.9431 13.7764 11.7468 13.706L11.6507 13.6637L3.5 9.374V16.75C3.5 17.6682 4.20711 18.4212 5.10647 18.4942L5.25 18.5H18.75C19.6682 18.5 20.4212 17.7929 20.4942 16.8935L20.5 16.75V9.373ZM18.75 5.5H5.25C4.33183 5.5 3.57881 6.20711 3.5058 7.10647L3.5 7.25V7.679L12 12.1525L20.5 7.678V7.25C20.5 6.33183 19.7929 5.57881 18.8935 5.5058L18.75 5.5Z"})),i_e=Object.freeze(Object.defineProperty({__proto__:null,default:f3},Symbol.toStringTag,{value:"Module"})),jde=e=>c.createElement("svg",{viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M27.9994 14.0514C27.9994 6.29111 21.7315 0 13.9997 0C6.26795 0 0 6.29111 0 14.0514C0 20.641 4.52023 26.1705 10.6179 27.6892V18.3455H7.73121V14.0514H10.6179V12.2011C10.6179 7.41859 12.7745 5.20184 17.4526 5.20184C18.3396 5.20184 19.8701 5.37664 20.4962 5.55088V9.44312C20.1658 9.40828 19.5918 9.39085 18.8789 9.39085C16.5835 9.39085 15.6965 10.2637 15.6965 12.5328V14.0514H20.2694L19.4837 18.3455H15.6965V28C22.6286 27.1597 28 21.2356 28 14.0514H27.9994Z"})),Ude=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("g",{id:"Linkedin"},c.createElement("path",{id:"Shape",d:"M23.6999 2.75909C23.6999 1.39872 22.5971 0.295929 21.2368 0.295929H2.76308C1.40272 0.295929 0.299927 1.39872 0.299927 2.75909V21.2328C0.299927 22.5931 1.40272 23.6959 2.76308 23.6959H21.2368C22.5971 23.6959 23.6999 22.5931 23.6999 21.2328V2.75909ZM3.63848 9.12156H7.24935V20.6943H3.63848V9.12156ZM16.4313 8.83425C19.8921 8.83425 20.6797 10.9844 20.753 13.861L20.7589 14.3469V20.6942H17.1519L17.1517 14.9161C17.1477 13.5985 17.0603 11.9984 15.278 11.9984C13.4002 11.9984 13.1135 13.4611 13.1135 14.971V20.6942H9.51161V9.12143H12.9689V10.7028H13.0188L13.1052 10.5509C13.6314 9.68925 14.7739 8.83425 16.4313 8.83425ZM3.35125 5.45367C3.35125 4.30239 4.28565 3.36809 5.44404 3.36809C6.59732 3.36809 7.53556 4.30239 7.53556 5.45367C7.53556 6.60623 6.59732 7.54053 5.44404 7.54053C4.28565 7.54053 3.35125 6.60623 3.35125 5.45367Z",fill:"currentColor"}))),Fde=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",...e},c.createElement("g",{clipPath:"url(#clip0_9013_4638)"},c.createElement("path",{d:"M14 0C6.26828 0 0 6.26828 0 14C0 17.8664 1.56734 21.3664 4.10047 23.8995L1.43391 26.5661C0.904531 27.0955 1.27969 28 2.02781 28H14C21.7317 28 28 21.7317 28 14C28 6.26828 21.7317 0 14 0Z",className:"fill-foreground-650"}),c.createElement("path",{d:"M16.8481 6.60187C17.091 7.63109 18.0152 8.39781 19.1188 8.39781C20.4072 8.39781 21.4517 7.35328 21.4517 6.06484C21.4517 4.7764 20.4072 3.73187 19.1188 3.73187C17.9922 3.73187 17.0527 4.53031 16.8339 5.59234C14.9472 5.79469 13.4739 7.39484 13.4739 9.33406C13.4739 9.33843 13.4739 9.34172 13.4739 9.34609C11.4221 9.4325 9.54846 10.0166 8.06096 10.9386C7.50861 10.5109 6.81518 10.2561 6.06268 10.2561C4.25689 10.2561 2.79346 11.7195 2.79346 13.5253C2.79346 14.8356 3.56346 15.9644 4.6758 16.4861C4.78408 20.2814 8.91955 23.3341 14.0066 23.3341C19.0936 23.3341 23.2346 20.2781 23.3374 16.4795C24.441 15.9545 25.2044 14.8291 25.2044 13.5264C25.2044 11.7206 23.741 10.2572 21.9352 10.2572C21.186 10.2572 20.4958 10.5098 19.9446 10.9342C18.4439 10.0056 16.5496 9.42156 14.4769 9.3439C14.4769 9.34062 14.4769 9.33844 14.4769 9.33515C14.4769 7.94609 15.5094 6.79328 16.8481 6.60406V6.60187ZM7.92971 15.6002C7.98439 14.4145 8.77189 13.5045 9.68736 13.5045C10.6028 13.5045 11.3028 14.4659 11.2481 15.6516C11.1935 16.8372 10.5099 17.2681 9.5933 17.2681C8.67674 17.2681 7.87502 16.7858 7.92971 15.6002ZM18.3269 13.5045C19.2435 13.5045 20.031 14.4145 20.0846 15.6002C20.1392 16.7858 19.3364 17.2681 18.421 17.2681C17.5055 17.2681 16.8208 16.8383 16.7661 15.6516C16.7114 14.4659 17.4103 13.5045 18.3269 13.5045ZM17.2375 18.3433C17.4092 18.3608 17.5186 18.5391 17.4519 18.6987C16.8886 20.0452 15.5586 20.9912 14.0066 20.9912C12.4546 20.9912 11.1256 20.0452 10.5613 18.6987C10.4946 18.5391 10.6039 18.3608 10.7756 18.3433C11.7819 18.2416 12.8702 18.1858 14.0066 18.1858C15.143 18.1858 16.2302 18.2416 17.2375 18.3433Z",style:{fill:"rgb(var(--color-foreground-100))"}})),c.createElement("defs",null,c.createElement("clipPath",{id:"clip0_9013_4638"},c.createElement("rect",{width:28,height:28,fill:"white"})))),Bde=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",fill:"currentColor",...e},c.createElement("g",null,c.createElement("path",{d:"M16.6638 11.85L27.0874 0H24.6174L15.5665 10.2892L8.33765 0H0L10.9315 15.5591L0 27.9856H2.47021L12.0281 17.1199L19.6623 27.9856H28L16.6632 11.85H16.6638ZM13.2805 15.6962L12.1729 14.1468L3.36026 1.81862H7.15435L14.2663 11.7679L15.3739 13.3172L24.6185 26.2497H20.8244L13.2805 15.6967V15.6962Z",fill:"currentColor"}))),Vde=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",fill:"currentColor",...e},c.createElement("path",{d:"M23.9202 4.06584C21.2885 1.44525 17.7882 0.00132957 14.0588 0C6.37397 0 0.119658 6.21909 0.116984 13.8635C0.115647 16.3072 0.758058 18.6925 1.97804 20.7946L0 27.9796L7.39072 26.0517C9.4269 27.1566 11.7198 27.7383 14.0528 27.739H14.0588C21.7423 27.739 27.9974 21.5192 28 13.8748C28.0013 10.17 26.5527 6.6871 23.9202 4.0665V4.06584ZM14.0588 25.3975H14.0541C11.9751 25.3969 9.93564 24.8411 8.15617 23.7914L7.73299 23.5415L3.34709 24.6856L4.5176 20.4329L4.24218 19.9968C3.08236 18.162 2.46937 16.0413 2.4707 13.8642C2.47338 7.51078 7.67149 2.34138 14.0635 2.34138C17.1586 2.34271 20.0678 3.54266 22.2557 5.72117C24.4437 7.89902 25.6476 10.7949 25.6463 13.8735C25.6436 20.2275 20.4455 25.3969 14.0588 25.3969V25.3975ZM20.4147 16.7673C20.0664 16.5938 18.3538 15.7561 18.0343 15.6405C17.7147 15.5248 17.4828 15.467 17.2508 15.814C17.0189 16.161 16.3511 16.9415 16.1478 17.1721C15.9446 17.4035 15.7414 17.4321 15.3931 17.2585C15.0449 17.085 13.9225 16.7194 12.5915 15.5394C11.5561 14.6206 10.8568 13.4866 10.6536 13.1395C10.4504 12.7925 10.6322 12.605 10.806 12.4329C10.9624 12.2773 11.1543 12.028 11.3287 11.8259C11.5033 11.6238 11.5607 11.4789 11.677 11.2482C11.7934 11.0168 11.7352 10.8148 11.6483 10.6412C11.5614 10.4677 10.8649 8.76253 10.574 8.06918C10.2912 7.39377 10.0039 7.48551 9.79059 7.47421C9.58736 7.46424 9.35542 7.46225 9.12279 7.46225C8.89016 7.46225 8.51309 7.54867 8.19358 7.89569C7.87407 8.24267 6.97426 9.08097 6.97426 10.7855C6.97426 12.49 8.22236 14.1381 8.39681 14.3694C8.57127 14.6008 10.8534 18.0995 14.3476 19.6006C15.1786 19.9576 15.8276 20.171 16.3336 20.3306C17.168 20.5945 17.9273 20.5573 18.5276 20.4682C19.1968 20.3685 20.5886 19.6299 20.8787 18.8208C21.1688 18.0117 21.1688 17.3177 21.0819 17.1734C20.995 17.0292 20.7624 16.9421 20.4141 16.7686L20.4147 16.7673Z"})),Y2="../../assets/lottie";function Hde(e){return e.startsWith(`${Y2}/`)?e.slice(Y2.length+1):e}function AA(){const e=Object.assign({"../../assets/lottie/chain-of-thought-dark.json":()=>B(()=>import("./chain-of-thought-dark-BPjK_j-x.js"),[]).then(n=>n.default),"../../assets/lottie/chain-of-thought-light.json":()=>B(()=>import("./chain-of-thought-light-D5erdeOr.js"),[]).then(n=>n.default),"../../assets/lottie/character-thinking-cloud-animation.json":()=>B(()=>import("./character-thinking-cloud-animation-Bu4j70Rh.js"),[]).then(n=>n.default),"../../assets/lottie/image-gen-dark.json":()=>B(()=>import("./image-gen-dark-DTw6tnD0.js"),[]).then(n=>n.default),"../../assets/lottie/image-gen-light.json":()=>B(()=>import("./image-gen-light-C_x12-59.js"),[]).then(n=>n.default),"../../assets/lottie/loader-gradient.json":()=>B(()=>import("./loader-gradient-7hu2fPzp.js"),[]).then(n=>n.default),"../../assets/lottie/loader-image-generating.json":()=>B(()=>import("./loader-image-generating-BZL4nXqF.js"),[]).then(n=>n.default),"../../assets/lottie/loader-reasoning-dark.json":()=>B(()=>import("./loader-reasoning-dark-Dh23ceSo.js"),[]).then(n=>n.default),"../../assets/lottie/loader-reasoning-light.json":()=>B(()=>import("./loader-reasoning-light-BmcsjTTD.js"),[]).then(n=>n.default),"../../assets/lottie/loader-spinner-dark.json":()=>B(()=>import("./loader-spinner-dark-D_zqJrW7.js"),[]).then(n=>n.default),"../../assets/lottie/loader-spinner-light.json":()=>B(()=>import("./loader-spinner-light-CUlAhBGz.js"),[]).then(n=>n.default),"../../assets/lottie/loader-spinner-white.json":()=>B(()=>import("./loader-spinner-white-B2mzTARL.js"),[]).then(n=>n.default),"../../assets/lottie/pages-welcome-dark.json":()=>B(()=>import("./pages-welcome-dark-BxeF7F8z.js"),[]).then(n=>n.default),"../../assets/lottie/pages-welcome-light.json":()=>B(()=>import("./pages-welcome-light-BFwITHsU.js"),[]).then(n=>n.default),"../../assets/lottie/voicemail-dark.json":()=>B(()=>import("./voicemail-dark-Bec3gjKS.js"),[]).then(n=>n.default),"../../assets/lottie/voicemail-light.json":()=>B(()=>import("./voicemail-light-DmBzGtqk.js"),[]).then(n=>n.default)});function t(n){return e[n]?n:`${Y2}/${n}`}return{load:n=>{const s=t(n),o=e[s];return o?o():Promise.reject(new Error(`Lottie animation not found: ${n} (resolved: ${s})`))},exists:n=>{const s=t(n);return!!e[s]},getNames:()=>Object.keys(e).map(Hde),getFullPath:n=>t(n)}}const zde=c.lazy(()=>B(()=>import("./index.es-_XtXTdEl.js"),__vite__mapDeps([5,1]))),Gde=AA();function it(e){const{type:t,className:n,rendererSettings:s,colorTheme:o}=e,r=M(zo),a=o??r,[l,u]=c.useState(null),d=c.useMemo(()=>{switch(t){case"gradient":return"loader-gradient.json";case"reasoning":return a==="dark"?"loader-reasoning-dark.json":"loader-reasoning-light.json";case"chainOfThought":return a==="dark"?"chain-of-thought-dark.json":"chain-of-thought-light.json";case"spinnerWhite":return"loader-spinner-white.json";case"imageGen":return a==="dark"?"image-gen-dark.json":"image-gen-light.json";case"spinnerThemed":default:return a==="dark"?"loader-spinner-dark.json":"loader-spinner-light.json"}},[t,a]);return c.useEffect(()=>{Gde.load(d).then(u).catch(()=>u(null))},[d]),l?i.jsx(c.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(zde,{animationData:l,loop:!0,className:n,rendererSettings:s})}):i.jsx("div",{})}const p3=Object.freeze(Object.defineProperty({__proto__:null,default:it},Symbol.toStringTag,{value:"Module"})),c_e=["facebook","twitter","whatsapp","linkedin","reddit","email"],Wde={facebook:"senderToFacebook",twitter:"senderToX",linkedin:"senderToLinkedIn",whatsapp:"senderToWhatsApp",reddit:"senderToReddit",email:"senderToEmail"},kA={facebook:{displayName:"Facebook",linkGenerator:e=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}`,icon:i.jsx(jde,{})},twitter:{displayName:"X",linkGenerator:(e,t)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`,icon:i.jsx(Bde,{})},whatsapp:{displayName:"WhatsApp",linkGenerator:(e,t)=>`https://api.whatsapp.com/send?text=${encodeURIComponent(`${t} ${e}`)}`,icon:i.jsx(Vde,{})},linkedin:{displayName:"LinkedIn",linkGenerator:(e,t)=>`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(e)}&text=${encodeURIComponent(t)}`,icon:i.jsx(Ude,{})},reddit:{displayName:"Reddit",linkGenerator:(e,t)=>`https://www.reddit.com/submit?url=${encodeURIComponent(e)}&title=${encodeURIComponent(t)}`,icon:i.jsx(Fde,{})},email:{displayName:"Email",linkGenerator:(e,t)=>`mailto:?subject=${encodeURIComponent(t)}&body=${encodeURIComponent(e)}`,icon:i.jsx(f3,{})}};function l_e(e){const{socialMedia:t,className:n,loading:s,disabled:o,onClickSocialMedia:r,includeTitle:a,iconClassName:l="size-6"}=e,u=kA[t],d=u.displayNameKey?z(u.displayNameKey):u.displayName,m=i.jsx("div",{className:l,children:u.icon}),f="56-xl",h="subtle-dimmed-inverted",g=F("flex-1 py-2",n);return i.jsxs(ne,{size:f,color:h,title:d,className:g,onClick:C=>r(t,C),disabled:o,children:[s?i.jsx(it,{className:"size-8"}):m,a&&i.jsx("span",{className:"font-medium text-foreground-650 text-2xs",children:d})]})}function u_e(e,t,n,s){if(!t)return;let o;if(e==="email"){const r=s?`${s}

${t}`:t;o=`mailto:?subject=${encodeURIComponent(n)}&body=${encodeURIComponent(r)}`}else o=kA[e].linkGenerator(t,s??n);Eo(o)}function MA(e){const{scenario:t,pageName:n,sectionName:s,customData:o}=e;ye({source:"shareMenu",scenario:t,pageName:n,sectionName:s,customData:o})}function d_e(e){const{conversationId:t,messageId:n}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_impressionElement:"shareBlockedBanner",eventInfo_conversationId:t,eventInfo_messageId:n}})}function m_e(e){const{conversationId:t,messageId:n,uploadedFileType:s}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_conversationId:t,eventInfo_messageId:n,eventInfo_uploadFileType:s}})}function f_e(e){const{scenario:t,uploadedFileType:n,conversationId:s,customData:o,clickDestination:r="copyLink"}=e,a={eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickScenario:t,eventInfo_uploadFileType:n,eventInfo_clickDestination:r,eventInfo_customData:o,eventInfo_conversationId:s};D.trackEvent({name:"interaction",data:a})}function p_e(e){const{scenario:t,socialMedia:n,customData:s,conversationId:o}=e,r={eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickDestination:Wde[n],eventInfo_clickScenario:t,eventInfo_customData:s,eventInfo_conversationId:o};D.trackEvent({name:"interaction",data:r})}function $de(e){const{shareId:t,sharedLevel:n,sharedDataType:s,impressionScenario:o}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"receivePreview",eventInfo_impressionScenario:o,eventInfo_customData:JSON.stringify({eventInfo_shareId:t,sharedLevel:n,sharedDataType:s})}})}function h_e(){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"talkToCopilot"}})}function g_e(e){const{cardType:t,messageId:n,conversationId:s,scenario:o}=e;qt({source:"shareMenu",scenario:o,messageId:n,conversationId:s,cardType:t})}function qde(e){const{conversationId:t,messageId:n,errorName:s,errorMessage:o,errorStack:r}=e;D.trackEvent({name:"system",data:{eventName:"shareMessagesFailed",eventInfo_conversationId:t,eventInfo_messageId:n??"",eventInfo_error:s,eventInfo_errorMessage:o,eventInfo_errorStack:r}})}function Kde(){ye({source:"continueClicked"})}function Zde(e){const{shareId:t,error:n,conversationId:s}=e;Kt({feature:"share",scenario:"continueClickFailed",errorType:n==null?void 0:n.name,errorMessage:n==null?void 0:n.message,customData:JSON.stringify({eventInfo_shareId:t,eventInfo_conversationId:s})})}function v_e(){ye({source:"sharedLinkManagement"})}function Yde(e){ye({source:"delete",scenario:"deleteSingleSharedLink",customData:JSON.stringify({eventInfo_shareId:e})})}function Qde(e){const{details:t,errorMessage:n}=e;D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:t,eventInfo_errorMessage:n}})}function C_e(){ye({pageName:"chatPage",sectionName:"chatResponse",source:"addToPage"})}function y_e(e){ye({pageName:"addToPage",source:e})}function Jde(){ye({sectionName:"actionMenu",source:"createNewPage"})}function Xde(e){ye({pageName:e,source:"openPage"})}function b_e(){ye({pageName:"pages",sectionName:"editBar",source:"askCopilot"})}function x_e(e){const{action:t,pageId:n,conversationId:s,messageId:o,suggestionId:r}=e;ye({pageName:"pages",sectionName:"suggestions",source:t==="accept"?"applyRevision":"reject",conversationId:s,customData:JSON.stringify({eventInfo_pageId:n,eventInfo_messageId:o,eventInfo_suggestionId:r,eventInfo_sourcesCount:pe(So)})})}function S_e(e){const{reaction:t,pageId:n,suggestionId:s,messageId:o,startIndex:r,endIndex:a,oldText:l,replacement:u,conversationId:d}=e;ye({pageName:"pages",sectionName:"suggestions",source:"pagesFeedback",scenario:t,conversationId:d,customData:JSON.stringify({eventInfo_pageId:n,eventInfo_reaction:t,eventInfo_suggestionId:s,eventInfo_messageId:o,eventInfo_startIndex:r,eventInfo_endIndex:a,eventInfo_oldText:l,eventInfo_replacement:u})})}function eme(e){Kt({feature:"pages",...e})}const E_e=["createPage","addToExistingPage","openPageOnChat","openPageOnHistory","openPageOnLibrary","copyPage"];function w_e(e,t,n){po({feature:"pages",scenario:e,duration:Math.round(t),customData:JSON.stringify({eventInfo_pageId:n})})}function I_e(){ye({pageName:"pages",source:"hyperlinkInPages"})}function __e({sectionName:e,pageId:t}){ye({sectionName:e,source:"deletePage",customData:JSON.stringify({eventInfo_pageId:t})})}function T_e({sectionName:e,pageId:t}){ye({sectionName:e,source:"renamePage",customData:JSON.stringify({eventInfo_pageId:t})})}function A_e(e){D.trackEvent({name:"interaction",data:{eventName:"copilotPagesEdited",eventInfo_customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}})}function k_e(e){const{pageName:t,sectionName:n,pageId:s}=e;ye({pageName:t,sectionName:n,source:"pagesSharing",customData:JSON.stringify({eventInfo_pageId:s})})}function M_e(e){const{pageName:t,sectionName:n,pageId:s,source:o}=e;ye({pageName:t,sectionName:n,source:o,customData:JSON.stringify({eventInfo_pageId:s})})}function N_e(e){const{sectionName:t,pageId:n}=e;ye({sectionName:t,source:"removePagesSharing",customData:JSON.stringify({eventInfo_pageId:n})})}const R_e=["pagesHistory","direct"];function P_e(e,t){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pagesSharing",eventInfo_impressionScenario:e}}),$de({shareId:t,sharedLevel:"singleAr",sharedDataType:"page",impressionScenario:"pages"})}const L_e=["responsePreviewedPage","chatCreateNewPage","chatAddToExistingPage","chatDirectToNewPage","pagesHistory","actionMenuCreateNewPage","libraryMenuCreateNewPage","makeACopyViewerPage","makeACopyOwnerPage","makeACopyViewOnly","makeACopyPagesHistory","libraryPageItem"];function O_e(e,t){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pages",eventInfo_impressionScenario:t,eventInfo_customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}})}function D_e(e){const{pageName:t,sectionName:n,pageId:s}=e;ye({pageName:t,sectionName:n,source:"makePagesCopy",customData:JSON.stringify({eventInfo_pageId:s})})}function j_e(){ye({pageName:"pages",source:"printPage"})}function tme(e){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"threePages",eventInfo_impressionScenario:e}})}function U_e(e,t){ye({pageName:"pages",sectionName:"titleBar",source:t,customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function F_e(e){un({page:"sourcesManagement",scenario:"showSources",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function B_e(e,t){ye({pageName:"pages",sectionName:"sourcesManagement",source:t,customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function NA({pageId:e,uploadStatus:t,format:n}){un({scenario:"uploadPageSourceFile",page:"sourcesManagement",element:"sourcesFileItem",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So),eventInfo_sourcesFileFormat:n,eventInfo_uploadStatus:t})})}function V_e(e,t){po({feature:"pages",scenario:"uploadSourceFile",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}),NA({pageId:e,uploadStatus:"Success",format:t})}function H_e(e){ye({pageName:"pages",sectionName:"sourcesManagement",source:"deleteFile",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function z_e(e){ye({pageName:"pages",sectionName:"sourcesFileDeleteModal",source:"confirmDeleteFile",customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})})}function G_e({pageId:e,isSaving:t,errorMessage:n,exception:s,fileExtension:o}){eme({scenario:"uploadSourceFile",errorType:t?"SavePageMappingFailed":"UploadSourceFileFailed",errorMessage:n,exception:s,customData:JSON.stringify({eventInfo_pageId:e,eventInfo_sourcesCount:pe(So)})}),NA({pageId:e,uploadStatus:t?"SavePageMappingFailed":"UploadSourceFileFailed",format:o})}function nme(){const e=xo(),t=fl(),n=se(Fo);return c.useCallback(async({pageId:s,pageType:o,closeSidebar:r,sourcePage:a,impressionScenario:l,featureLatencyInfo:u})=>{if(Xde(a),r&&n(!1),o==="sharedPage"){await e({to:"/shares/pages/$shareId",params:{shareId:s},from:t.state.location.pathname,state:{...u,impressionScenario:l}});return}await e({to:"/pages/$pageId",params:{pageId:s},from:t.state.location.pathname,state:{...u,impressionScenario:l}})},[e,t.state.location.pathname,n])}const sme=$e();function Hr(e){e&&sme.set(Sn,{title:e.title,subtitle:e.message,dismissable:!0,dismissAfter:10*1e3})}const bx="/pages";async function ome(e,t){const n=await kn({path:"/pages",args:{body:{title:e,content:t},analytics:{anonymousPath:bx}}}),s=await n.json(),o=k$.safeParse(s);if(!n.ok&&o.success)throw new Error(o.data.errorCode);try{return CE.parse(s)}catch(r){throw r instanceof Wf&&Xu(r,bx,!1),r}}function rme(){const{canCreatePage:e,canCreatePageForSignedOut:t}=Dde(),{t:n}=q(),[s,o]=c.useState(!1),r=Dl(),a=se(bo),l=se(Ia),u=nme();return{creatingPage:s,createPage:e?async({content:m,sourcePage:f,impressionScenario:h,featureLatencyInfo:g})=>{o(!0);try{const{id:C}=await ome("",m);await u({pageId:C,closeSidebar:!0,sourcePage:f,impressionScenario:h,featureLatencyInfo:g})}catch(C){C instanceof Error&&C.message==="page-count-exceeded"&&t?(tme(f),a(r?"prompt-3p-sign-in":"prompt-sign-in"),l({isOpen:!0,scenario:"sidebarActionCreatePage",reason:"pageLimitReached"})):Hr({title:n("common.somethingWrong"),message:n("pages.errorCreatingMessage")})}finally{o(!1)}}:null}}function RA(e){const{callback:t,signInScenario:n,onShowSignIn:s,signInReason:o}=e,r=Qt(),a=se(Ia);return(...l)=>{if(!r){a({isOpen:!0,scenario:n,reason:o}),s&&typeof s=="function"&&s();return}t(...l)}}function ame(){return qs({to:"/",from:Ma().state.location.pathname})}const Yg=R(!1),PA=R(!1),Q2=R(null),xx=R(null),ime=R(null),cme=R(!0),lme=R(-1),W_e=R(!1),$_e=G5("muteCoachmarkVisible",!0),ume=G5("studyVoiceCoachmarkNumberOfTimesShown",0);function wr(){const{createConversation:e}=fm();return c.useCallback(async()=>{LA(),await e({shouldNavigateToChat:!1}),await ame()},[e])}function LA(){mt(bo,null),mt(tm,null),mt(Q2,null)}function dme(){const{t:e}=q(),t=wr(),{createPage:n}=rme(),s=Qt(),o=W("pages-anonymous"),{refetch:r}=Ode({disabled:!s&&!o}),a=async()=>{Jde(),await(n==null?void 0:n({content:"",sourcePage:"createNewPage",impressionScenario:"actionMenuCreateNewPage",featureLatencyInfo:{scenario:"createPage",startTimestamp:Date.now()}})),await r()},l=RA({callback:a,signInScenario:"sidebarActionCreatePage",signInReason:"createPage"}),u=async()=>{!s&&o?a():l()},d=()=>{setTimeout(()=>{u()},0)};return i.jsxs("div",{className:"flex flex-col",children:[i.jsx(ne,{color:"subtle-dimmed-inverted",size:"40-base",variant:"rect",alignment:"start",title:e("sidebar.actions.newChat"),onClick:()=>{t()},children:e("sidebar.actions.newChat")}),i.jsx(ne,{color:"subtle-dimmed-inverted",size:"40-base",alignment:"start",variant:"rect",title:e("sidebar.actions.newPage"),testId:"create-new-page-button",onClick:d,children:e("sidebar.actions.newPage")})]})}function OA(e){const{buttonSize:t}=e,{t:n}=q(),s=Ld();return i.jsx(bm,{options:{placement:"bottom-end",hideOnMenuClick:!0,roleType:"menu"},className:Qs,renderTrigger:({onClick:o,...r},a)=>i.jsx(ne,{...r,testId:"sidebar-action-menu-button",title:n("sidebar.actions.menuTitle"),tooltip:{placement:"bottom",disabled:a},color:"subtle-dimmed-inverted",variant:"rect",size:t,className:"min-w-6 rounded-sm rounded-e-xl px-0",onClick:l=>{s&&(ye({source:"sidebarActionsMenu",customData:JSON.stringify({buttonSize:t})}),o(l))},id:"sidebar-new-action-menu-button",children:i.jsx(ds,{className:"size-3.5 rotate-90"})}),children:i.jsx(dme,{})})}const DA=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M10.7327 19.7905C11.0326 20.0762 11.5074 20.0646 11.7931 19.7647C12.0788 19.4648 12.0672 18.99 11.7673 18.7043L5.51587 12.7497L20.25 12.7497C20.6642 12.7497 21 12.4139 21 11.9997C21 11.5855 20.6642 11.2497 20.25 11.2497L5.51577 11.2497L11.7673 5.29502C12.0672 5.00933 12.0787 4.5346 11.7931 4.23467C11.5074 3.93475 11.0326 3.9232 10.7327 4.20889L3.31379 11.2756C3.14486 11.4365 3.04491 11.6417 3.01393 11.8551C3.00479 11.9019 3 11.9503 3 11.9997C3 12.0493 3.00481 12.0977 3.01398 12.1446C3.04502 12.3579 3.14496 12.563 3.31379 12.7238L10.7327 19.7905Z"})),q_e=Object.freeze(Object.defineProperty({__proto__:null,default:DA},Symbol.toStringTag,{value:"Module"})),xm=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M21.7803 3.28033C22.0732 2.98744 22.0732 2.51256 21.7803 2.21967C21.4874 1.92678 21.0125 1.92678 20.7196 2.21967L10.7197 12.2197L10.25 13.75L11.7803 13.2803L21.7803 3.28033ZM6.25 3C4.45507 3 3 4.45508 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C19.5449 21 21 19.5449 21 17.75V9.75C21 9.33579 20.6642 9 20.25 9C19.8358 9 19.5 9.33579 19.5 9.75V17.75C19.5 18.7165 18.7165 19.5 17.75 19.5H6.25C5.2835 19.5 4.5 18.7165 4.5 17.75V6.25C4.5 5.2835 5.2835 4.5 6.25 4.5H14.25C14.6642 4.5 15 4.16421 15 3.75C15 3.33579 14.6642 3 14.25 3H6.25Z"})),K_e=Object.freeze(Object.defineProperty({__proto__:null,default:xm},Symbol.toStringTag,{value:"Module"})),ch=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3.75 8.5C3.75 8.08579 4.08579 7.75 4.5 7.75H5.75C6.16421 7.75 6.5 8.08579 6.5 8.5C6.5 8.91421 6.16421 9.25 5.75 9.25H4.5C4.08579 9.25 3.75 8.91421 3.75 8.5ZM3.75 12C3.75 11.5858 4.08579 11.25 4.5 11.25H5.75C6.16421 11.25 6.5 11.5858 6.5 12C6.5 12.4142 6.16421 12.75 5.75 12.75H4.5C4.08579 12.75 3.75 12.4142 3.75 12ZM3.75 15.5C3.75 15.0858 4.08579 14.75 4.5 14.75H5.75C6.16421 14.75 6.5 15.0858 6.5 15.5C6.5 15.9142 6.16421 16.25 5.75 16.25H4.5C4.08579 16.25 3.75 15.9142 3.75 15.5ZM4.25 3C2.45507 3 1 4.45507 1 6.25V17.75C1 19.5449 2.45508 21 4.25 21H19.75C21.5449 21 23 19.5449 23 17.75V6.25C23 4.45507 21.5449 3 19.75 3H4.25ZM19.75 19.5H9V4.5H19.75C20.7165 4.5 21.5 5.2835 21.5 6.25V17.75C21.5 18.7165 20.7165 19.5 19.75 19.5ZM4.25 4.5H7.5V19.5H4.25C3.2835 19.5 2.5 18.7165 2.5 17.75V6.25C2.5 5.2835 3.2835 4.5 4.25 4.5Z"})),Z_e=Object.freeze(Object.defineProperty({__proto__:null,default:ch},Symbol.toStringTag,{value:"Module"})),mme=R(!0),fme=R(!0),pme=R(!1),hme=R(!1),jA=R(!1);function h3(){const e=M(h1),t=M(il);return e&&!!t}function lh(){const e=ut();return e.startsWith("/podcasts")||e.startsWith("/shares/podcasts")}function Ir(e,t={},n){const{initialize:s=!1}=t,o=c.useRef(null);return c.useEffect(()=>{const r=n??o.current,a=new ResizeObserver(([l])=>{l&&e(l.contentRect)});return r&&(a.observe(r),s&&e(r.getBoundingClientRect())),()=>a.disconnect()},[e,s,n]),o}function gme(e,t){const n=re.instance().config().sidebarOverrides;return(n==null?void 0:n[e])??t}const vme=c.lazy(()=>B(()=>import("./llm-selector-CwBIxeZ6.js"),__vite__mapDeps([6,1])));function Cme(e){const{isSidebarOpen:t,toggle:n}=e,s=wr(),[o]=Ue(Hn),r=M(_s),{t:a}=q(),l=ut(),u=lh(),d=o==="chat-only"||t,m=h3(),f=M(jA),h=ym(),g=!t&&(l.startsWith("/daily")||l.endsWith("/talk")||u||l.startsWith("/labs/experiments/3d-generations")||l.startsWith("/shares/3d-generations")||a3(l)),C=c.useRef(null),v=Ir(()=>{const y=document.getElementById("app");if(y){const b=!t&&C.current?C.current.clientWidth:0;y.style.setProperty("--header-controls-inline-start-width",`${b}px`)}});return i.jsx("div",{className:ue("pointer-events-none absolute start-0 top-0 w-full p-1 pe-3.5",ct.sidebar),ref:v,children:i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[i.jsx(pt,{children:g&&i.jsx(ge.div,{className:ue("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",Qs),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Fe,animate:nt,exit:Fe},transition:h?{duration:0}:pn})}),i.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":r&&!t?r.theme:void 0,ref:C,children:[(f||d&&t)&&i.jsxs(i.Fragment,{children:[i.jsx(ne,{title:a(t?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-lg hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{ye({source:"sidebarToggle",pageName:l,customData:JSON.stringify({isOpen:t})}),n()},testId:"sidebar-toggle-button",children:t?i.jsx(DA,{className:"size-4"}):i.jsx(ch,{className:"size-5"})}),m&&!f&&i.jsx(Np,{text:a("settings.copilotBeta.beta"),className:"relative me-2 ms-1 uppercase"})]}),d&&(f||!t)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center rounded-lg hover:bg-black/3 dark:hover:bg-white/5",children:[i.jsx(ne,{title:a("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:async()=>{ye({source:"sidebarNewConversation",destination:"/chat",pageName:l,customData:JSON.stringify({isOpen:t})}),await s()},children:i.jsx(xm,{className:"size-5"})}),i.jsx(OA,{buttonSize:"28-xxs"})]}),gme("showLLMSelector",!1)&&i.jsx(vme,{}),m&&i.jsx(Np,{text:a("settings.copilotBeta.beta"),className:"relative me-2 ms-1 uppercase"})]})]})]})})})}const yme="/static/cmc/assets/meshopt_decoder-3Kt66jYv.js",yn=class yn{static async loadLibraries(){const[t,,n]=await Promise.all([B(()=>import("./index-ClpwLfCc.js").then(s=>s.c),__vite__mapDeps([7,8,9,1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251])),B(()=>import("./index-BLqv0XCf.js").then(s=>s.b),__vite__mapDeps([252,253,1,8,9,23,11,12,29,254,255,124,20,30,47,256,149,257,196,69,26,21,22,258,150,259,208,260,261,262,263,207,28,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,14,15,16,286,287,288,289,71,72,290,291,292,293,294])),B(()=>import("./math.scalar.functions-B0475LkX.js").then(s=>s.m),[])]);t.MeshoptCompression.Configuration={decoder:{url:yme}},t.Logger.LogLevels=t.Logger.NoneLogLevel,yn.Core=t,yn.Math=n,yn.isInitialized=!0}static async loadViewerLibraries(){const t=await B(()=>import("./viewer-lib-index-Bm2gbMTB.js"),__vite__mapDeps([295,1,19,8,9,13,67,296,254]));yn.Viewer=t}static async loadDebugLibraries(){await yn.loadLibraries(),await B(()=>import("./babylon.inspector.bundle-JXRLaH05.js").then(t=>t.b),__vite__mapDeps([297,1,298,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,299,296,253,254,255,252,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,300,301,302]))}static isLoaded(){return yn.isInitialized}static getCore(){return yn.throwIfNotInitialized("Core"),yn.Core}static getMath(){return yn.throwIfNotInitialized("Core"),yn.Math}static getViewer(){return yn.throwIfNotInitialized("Viewer"),yn.Viewer}static throwIfNotInitialized(t){if(!yn.isInitialized)throw new Error(`Libraries ${t} are not loaded yet. Call loadLibraries first.`)}};O(yn,"Core"),O(yn,"Math"),O(yn,"Viewer"),O(yn,"isInitialized",!1);let Ks=yn;function Y_e(e){const t=e.split(/[\\/]/),n=t.pop();return{basePath:`${t.join("/")}/`,fileName:n??""}}function Q_e(e,t){D.trackEvent({name:"interaction",data:{eventName:"characterAnimation",eventInfo_characterAnimationState:e,eventInfo_characterId:t}})}function J_e(e,t){const{Texture:n}=Ks.getCore();return new Promise((s,o)=>{const r=new n(e,t,!1,!1,1,()=>{s(r)},o)})}function X_e(e){const{Vector3:t}=Ks.getCore();return new t(e[0],e[1]??0,e[2]??0)}function eTe(e){return Math.max(...e)-Math.min(...e)}function tTe(e){return e*Math.PI/180}function Sx(e){const{Clamp:t}=Ks.getMath();return t(e,0,1)}function bme(e,t,n){return Math.abs(e-t)>n?t:e}function nTe(e,t,n=.01,s=.2){const{MoveTowards:o}=Ks.getMath();return o(e,bme(e,t,n),s)}let Ex;function lu(...e){Ex===void 0&&(Ex=be("babylon-debug"))}class xme{constructor(){O(this,"resourceObserver");O(this,"entries",[]);O(this,"keyword",null);this.resourceObserver=new PerformanceObserver(t=>{this.handleResources(t)})}trackStart(t){this.keyword=t,this.resourceObserver.observe({type:"resource",buffered:!1})}trackEnd(){const{entries:t}=this,n=t[t.length-1];return this.resourceObserver.disconnect(),this.entries=[],this.keyword=null,n?{name:n.name,duration:Math.round(n.duration)}:null}handleResources(t){if(this.keyword)for(const n of t.getEntries())n.name.includes(this.keyword)&&this.entries.push(n)}}class Sme{constructor(t=!0){O(this,"interactTime",0);O(this,"voiceChatToggledTime",0);O(this,"speechEndDetectedTime",0);O(this,"startMessageTime",0);O(this,"mountedTime",0);O(this,"libsLoadedTime",0);O(this,"sceneInitializedTime",0);O(this,"interactSource","");O(this,"currentConversationId","");O(this,"currentMessageId","");O(this,"serverTurnCounter");O(this,"visualizerEnabled",!1);O(this,"loadedEnd",!1);O(this,"voiceChatToggledOn",!1);O(this,"resourceMonitor",new xme);O(this,"isFirstTime",!1);O(this,"isVoiceCall");O(this,"resetLoading",()=>{lu("%c[] -> resetAppearanceEvent"),this.interactTime=0,this.visualizerEnabled=!1,this.loadedEnd=!1});O(this,"isAvailable",()=>this.isVoiceCall?Bs()&&this.voiceChatToggledOn&&this.interactTime>0:Bs()&&this.mountedTime>0);O(this,"trackLoadingEvent",t=>{if(!this.isAvailable())return;const{eventName:n,duration:s,characterId:o,networkDuration:r}=t;if(o&&!sf(o))return;const l=["voiceChatToggled","appearanceVisible","appearanceLoadingComplete"].includes(n);D.trackEvent({name:"system",data:{eventName:n,eventInfo_duration:Math.round(s),eventInfo_conversationId:this.currentConversationId,eventInfo_firstTime:this.isFirstTime,eventInfo_characterId:o,eventInfo_trigger:l?this.interactSource:void 0,eventInfo_networkDuration:r,eventInfo_customData:JSON.stringify({isVoiceCall:this.isVoiceCall})}}),lu(`%c[] -> ${n} : `,"color: #691dc6",Math.round(s),this.isFirstTime?"firstTime":"",o?`characterId: ${o}`:"",`isVoiceCall: ${this.isVoiceCall===!0}`)});O(this,"onUserInteract",t=>{this.resetLoading(),this.interactTime=performance.now(),this.interactSource=t,lu("%c[] -> onUserInteract","color: #222222")});O(this,"onVoiceChatToggled",(t,n)=>{if(t==="end")this.voiceChatToggledOn=!1,this.speechEndDetectedTime=0,this.resourceMonitor.trackEnd();else{this.voiceChatToggledOn=!0,this.voiceChatToggledTime=performance.now(),this.currentConversationId=n??"";const s=this.voiceChatToggledTime-this.interactTime;this.trackLoadingEvent({eventName:"voiceChatToggled",duration:s})}});O(this,"onMounted",()=>{this.mountedTime=performance.now();let t;this.isVoiceCall?t=this.mountedTime-this.voiceChatToggledTime:(this.interactTime=this.mountedTime,t=0),this.trackLoadingEvent({eventName:"appearanceMounted",duration:t})});O(this,"onUnmounted",()=>{this.resourceMonitor.trackEnd()});O(this,"onBabylonLibrariesLoaded",t=>{if(!sf(t))return;this.libsLoadedTime=performance.now();const n=this.libsLoadedTime-this.mountedTime;this.trackLoadingEvent({eventName:"appearanceBabylonLoaded",duration:n,characterId:t})});O(this,"onSceneInitializationStart",t=>{sf(t)&&this.resourceMonitor.trackStart(".glb")});O(this,"onSceneInitialized",t=>{if(!sf(t))return;this.sceneInitializedTime=performance.now();const n=this.sceneInitializedTime-this.libsLoadedTime,s=this.resourceMonitor.trackEnd();lu("%c[] -> monitorResult : ","color: #5bb173",s),this.trackLoadingEvent({eventName:"appearanceSceneInitialized",duration:n,characterId:t,networkDuration:s?s.duration:void 0}),this.trackLoadingEvent({eventName:"appearanceLoadingComplete",duration:this.sceneInitializedTime-this.interactTime,characterId:t}),this.loadedEnd=!0,this.checkEnd()});O(this,"onVisualizerEnabled",()=>{if(this.visualizerEnabled)return;this.visualizerEnabled=!0,this.isVoiceCall&&!this.voiceChatToggledOn&&(this.voiceChatToggledOn=!0);const t=Math.round(performance.now()-this.interactTime);this.trackLoadingEvent({eventName:"appearanceVisible",duration:t}),this.checkEnd()});O(this,"checkEnd",()=>{this.visualizerEnabled&&this.loadedEnd&&this.resetLoading()});O(this,"onStartMessage",(t,n,s)=>{this.currentMessageId=t,this.startMessageTime=n,this.serverTurnCounter=s});O(this,"onSpeechEndDetected",t=>{this.speechEndDetectedTime=t});O(this,"onAnimationStart",()=>{const t=Math.round(performance.now()-(this.speechEndDetectedTime||this.startMessageTime));D.trackEvent({name:"system",data:{eventName:"copilotAnimationStart",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:t,eventInfo_serverTurnCounter:this.serverTurnCounter}}),lu("%c[] -> onAnimationStart : ","color: #691dc6",Math.round(t))});O(this,"onColorUpdate",t=>{D.trackEvent({name:"system",data:{eventName:"appearanceColorUpdate",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:0,eventInfo_firstTime:this.isFirstTime,eventInfo_customData:JSON.stringify(t)}})});this.isVoiceCall=t,this.isFirstTime=!rn(P7)}}const Qg=new Map,Eme=(e=!0)=>(Qg.has(e)||Qg.set(e,new Sme(e)),Qg.get(e)),dl=Eme(!0),wme="/static/cmc/assets/lumi-square-B1_IY09F.webm",Ime="data:image/webp;base64,UklGRuAGAABXRUJQVlA4WAoAAAAQAAAAPwAAPwAAQUxQSPABAAABkCQAkCFJMZ61bdu2rZNt27Zt27Zt27ZttOKSiogPRMQEAMeQRGlTRAOxUSuMP3jryYOzi+onFJG059UAau/2S8YuRq+HaH6tdgivmlfR+t/EBIxSrPChy43JuATXf4GOdyflEWe2B52vic4h3wWkHBtCV+c9knoaU4UO9SDxqzw0cVcj/b5oFGlPIsd+BDluIcsP2Z0VeoZMVwY7yvMMuf4v5ybdXeS7PchF/FPI+H9FB+FrkfXGYLuByPtXEasKf5nhNJtkd5H7y2QWy5B/c7OGKHBrsEny+xJeZjCZjiIbGuT6IWO2wVyUeS5ck/qxkI9pNPVQqKeMZoYUbKwKPi2mryrBGzHjVTn+iJmtKucVM09V3S9mlqqqT8xoVcn/YrqoMv0QU1sV9Z6Un1lUsFHKzQhNOymTQZv9swxPSV3QNhm7w3RQOyDBUwEMo1yWMAWMGwnYGcMs6lF2OxKCZcX/vLyTY4D1VFbnq4LD+Ff53GkfHZwW+8HkXsc44LoNiw+D4gLhWAa7cwNp6EqqT4PjAHGsvTR36kYB8oRHKQ6ViQIMEx9y5t9QJAawjLvW0Z/puaMB09B+f1y86ZkpOvAtccIqcKh8vHDgHL3jPbMXfVKEBgHzWC32fVZ57w7PBCLDc7SYvnn/2lG1EgM1VlA4IMoEAABQGgCdASpAAEAAPikQhkIhoQoFA34MAUJZgCdMoSEH61+MfsY1T+2fibjkTK9nX6/7jO2B5gHPi3GW8wehn0qflVZgB1gOXQ9ZuWgsxxM66H5AZL7/C/Y7rEv91/J3ZEP63/s/yA9bTzW/RP+9/Kr6Av4l/Kv8H+Zn+F///gl9DX9TlBP4/u5lnqSxFS9F7sD8mqxrREFHwUlkm6bkl3BUp3dXytXljlJLfMn5z+FZCS6lMviAWjwKqkiqz1Xy8kharhmOS1MgUfy/eOZ6gelEO6hsGqJ/gw7RVAAA/v7spf/3Z7/+7Cv//doYIoq5IRecW9KGbtgXQyQn2TgjuovYXnDnncdyY+R9kyVdkZLpdIz8SW7VHDyHDrT7sLm4ac30adnLLsaftHJ7xezOXxRNY0RXMcoxMovA3zTPvq8t7hjxYhHzldhhfTW+U4cThCjbGtlp/vhz0WSNOYdokdPZ//jr2OlfB0IO72/kswbAJqjS147MZJXRDeFIC1s20oYpIN9HA/shgxPJmyMHn6y6ihngKA9SaJ9dHhtR2EY3i4elMvo3L6wE7s4XcZupxF3wYCQz+rRBRiyPGdQTyfLwuMl9pxl1As6e/eu3IyaTd2Ie9VCXVls4d//hcC94pvnml5SxycJDnsm7kQj1PqWDh/pQ+yc3ACFGZ3V516Hv47tbeurTRCIo1VcrqQHxDkCrkiabw95wHTHsHYxGkEi/53r/ixamTbiESmHIGgiAj94RAibdzh+F0Jg56aKeFljUEAipxLxmmIe11/iNGSRN/ZPenrUPpU8L0v/wj/xqbFGAVHORQDAfQ6DAJUj52PpsOijf+kE6B0YO8jciXXEbdil5WzM+qBwQpwAMb/RuUC4qBfZOroG+VfspPagyx/aB7eh/4yaN4/8JSZbiI6sonTdgC9289rk8UTWj8hMT/UPleL4+TSMv2K7N/z5GOTXVjPpagklsdgGkxOfrn5oW+NWIh5M/6XQjizzjny4MB9pfn6r/WAjuTK/xGT+aNC2FD3YujomeqgoF73qZq1EUnj8qtwwUBpGa0KHdVchC0/J78/izwEmlT0MNlf8kFYLT4LglZ3bN+z2qQSB5Cv1/5ia33+vXWV3OWt9ac5JKI8PPFu41gTV7v/mkSDYyC5DP7dTjn9GqvfCiFR5HrdTNnhClUjcLaDRHY0gwJGXkchezt1K5SJhzt6zDpcvo0yXRtf/Yka3U34ixGZa91McoxzIB9/0MeQR0FinLFZvKu3++KgeBu0H/nTpChOyl7Ee4UVHZa4TyiLGtSlkQb2IQePPro155VZ/5LZM9eid/j/njBTn8BxE8femtFkMnZ0IKd2Z+nz2pGCmGzlBGwtHasVAO7OAFNGGe6nta6AWBBAnbQT/rQSDgfZZ3F4sNxVvIPSEL+dz/sZurs65Zx9IWPS0Lyr5bzE70w0zGU5pFcuMlm6OUJw6aQxFoaSxnlgFlJmR472YOJapiJyJl3wEbdOpaigaGhUCf/4zZ7P1hJrqHbTqDLQsvaKER8OYwrOtEOLCRtjeRErWX42YASvAfWt2+8IA4m4bVvKD+Xew0gtkJb96JneNR0gIfszUod84oXj/wGBnf9mP+f8IEzVwQet5ZacFvQTgAAA==";function _me(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function UA(e){const{className:t}=e,{t:n}=q();return _me()?i.jsx("img",{src:Ime,alt:n("settings.appearanceIconAlt"),className:F("size-6")}):i.jsx("video",{src:wme,title:n("settings.appearanceIconAlt"),className:F("size-8 rounded-xl",t),autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}const wx="Sidebar";function Tme(){const{t:e}=q(),t=se(Co),n=c.useRef(!1);c.useEffect(()=>{n.current||(n.current=!0,un({page:wx,scenario:"Displayed",element:"appearanceCtaSidebarBanner"}))},[]);const s=async()=>{t(wa),dl.onUserInteract("appearanceCtaSidebarBanner"),await Js({talk:!0}),ye({pageName:wx,source:"appearanceCtaSidebarBanner",scenario:"open",destination:"AudioCallWithAppearance"})};return i.jsxs(ne,{title:e("settings.appearanceSidebarBannerAltText"),"aria-label":e("settings.appearanceSidebarBannerAltText"),className:"my-4 flex w-full gap-2 p-2",onClick:s,color:"subtle-dimmed-inverted",alignment:"start",children:[i.jsx(UA,{}),i.jsx("div",{className:"text-start text-sm",children:e("settings.appearanceSidebarStartVoiceBannerText")})]})}const Ame=R(!1),kme=R(!1),FA=fs({key:Zb,schema:d4,initialValue:wt(Zb,d4)??void 0}),sTe=fs({key:P7,schema:he(),initialValue:!1}),BA=fs({key:L7,schema:he(),initialValue:!1}),Mme=R(!1),Nme=R(!1),VA=fs({key:yF,schema:he(),initialValue:!1}),Rme=R(!1),Pme=fs({key:bF,schema:he(),initialValue:!1}),Lme=R(!1),HA=fs({key:xF,schema:he(),initialValue:!1}),Ome=R(!1),Jg="Sidebar";function Dme(e){const{onDismiss:t}=e,{t:n}=q(),s=se(Co),o=se(FA),r=c.useRef(!1),a=se(Mme);c.useEffect(()=>{r.current||(r.current=!0,un({page:Jg,scenario:"Displayed",element:"appearanceCtaDiscoverySidebarBanner"}))},[]);const l=async()=>{o(gE),a(!0),s(wa),dl.onUserInteract("appearanceCtaDiscoverySidebarBanner"),await Js({talk:!0}),t(),ye({pageName:Jg,source:"appearanceCtaDiscoverySidebarBanner",scenario:"open",destination:"AudioCallWithAppearance"})},u=d=>{d.stopPropagation(),o(Iv),t(),ye({pageName:Jg,source:"appearanceCtaDiscoverySidebarBanner",scenario:"dismiss"})};return i.jsx("div",{className:"my-2 flex w-full px-1",children:i.jsxs("div",{className:"flex cursor-pointer flex-row items-center justify-center gap-1 rounded-2xl bg-foreground-100 p-3 dark:bg-background-650/10",role:"button",tabIndex:0,title:n("settings.appearanceSidebarBannerText"),"aria-label":n("settings.appearanceSidebarBannerText"),onClick:l,onKeyDown:async d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),await l())},children:[i.jsx(UA,{}),i.jsxs("div",{className:"mx-1 flex flex-1 flex-col gap-2",children:[i.jsx("div",{className:"text-start text-xs",children:n("settings.appearanceSidebarBannerText")}),i.jsxs("div",{className:"flex flex-row items-center gap-1 text-accent-550",children:[i.jsx("div",{className:"text-start text-xs",children:n("settings.appearanceSidebarBannerTryItText")}),i.jsx(ds,{className:"size-3"})]})]}),i.jsx("div",{className:"flex h-full flex-col justify-start self-stretch",children:i.jsx(ne,{title:n("product.dismiss"),"aria-label":n("product.dismiss"),variant:"rect",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:u,children:i.jsx(an,{className:"size-3"})})})]})})}function Du(e){const{children:t,color:n="neutral",className:s}=e;return i.jsx("div",{className:F("flex h-4 shrink-0 items-center rounded px-1.5 text-2xs",n==="neutral"?"bg-black/8 text-foreground-550 dark:bg-white/8 dark:text-foreground-650":"bg-accent-350/30 text-accent-650 dark:bg-accent-450/30",s),children:t})}const jme="relative flex shrink-0 items-center justify-center";function Va(e){const{titleString:t,descriptionString:n,badgeString:s,iconBgColor:o,iconFgColor:r,isSelected:a,isIconOnly:l,children:u,testId:d,buttonClassName:m,onClick:f}=e,h=Cm(),g=be("sidebar-compact-nav-items")&&!_t("kill-sidebar-compact-nav-items");return i.jsx(ge.div,{className:"relative w-full",layout:"position",transition:pn,children:i.jsx(ne,{className:F("pointer-events-auto w-full flex-col px-2",g||l?"py-1.5":"py-2",l&&"h-9 w-10",a&&"bg-black/5 before:contrast-more:border-[4px] dark:bg-white/8",m),title:t,tooltip:{placement:"right",gap:12,disabled:!h},size:g||l?"36-sm":"40-base",color:"subtle-dimmed-inverted",onClick:f,testId:d,"aria-selected":a,children:i.jsx("span",{className:"flex w-full items-center justify-between",children:i.jsxs("span",{className:F("flex min-w-0",g?"gap-2.5":"gap-3"),children:[i.jsx("span",{className:F(jme,g||l?"size-6":"size-10 squircle-16",!g&&!l&&o,!g&&!l&&r),children:u}),i.jsx(pt,{mode:"popLayout",children:!l&&i.jsxs(ge.span,{className:"flex min-w-0 flex-1 flex-col",animate:"animate",exit:"exit",variants:{animate:nt,exit:Fe},transition:pn,children:[i.jsxs("span",{className:"flex min-h-6 w-full items-center gap-1.5 text-start text-base-dense-medium",children:[t,s!==void 0&&s!==""&&i.jsx(Du,{color:"accent",children:s})]}),!g&&n&&i.jsx("span",{className:"w-full text-start text-foreground-550 text-xs",children:n})]})})]})})})})}const Ix=65,Ume=100;function _x({count:e=1}){const t=aU(),n=c.useMemo(()=>{let s=t??Math.floor(Math.random()*4294967295);const o=4294967296,r=1664525,a=1013904223;function l(){return s=(r*s+a)%o,s/o}return Array.from({length:e},()=>{const u=l();return`${Math.floor(u*(Ume-Ix+1))+Ix}%`})},[e,t]);return i.jsx("div",{className:"flex flex-col gap-5 px-3 py-1",children:n.map((s,o)=>i.jsx("div",{style:{width:s},className:ue("relative h-5 overflow-hidden rounded-lg bg-background-300 opacity-30 dark:bg-background-250 dark:opacity-40","border border-background-300 dark:border-background-250","after:absolute after:inset-0 after:h-full","after:opacity-50 dark:after:opacity-5","after:bg-gradient-to-r after:from-transparent after:via-white after:to-transparent","after:bg-[length:80%_100%] after:bg-no-repeat","after:animate-[shimmer-translate-x_2s_infinite]","rtl:after:animate-[shimmer-translate-x-reverse_2s_infinite]")},o))})}const zA=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M8 4.5H8.99998V10.7382C8.99998 11.1132 8.90628 11.4822 8.72739 11.8117L5.14269 18.415C4.50968 19.5811 5.35388 20.9999 6.68068 20.9999H17.3193C18.6461 20.9999 19.4903 19.5811 18.8573 18.415L15.2726 11.8117C15.0937 11.4822 15 11.1132 15 10.7382V4.5H16C16.4142 4.5 16.75 4.16421 16.75 3.75C16.75 3.33579 16.4142 3 16 3H8C7.58579 3 7.25 3.33579 7.25 3.75C7.25 4.16421 7.58579 4.5 8 4.5ZM10.5 10.7382V4.5H13.5V10.7382C13.5 11.3631 13.6561 11.9781 13.9543 12.5273L14.7537 14H9.24621L10.0457 12.5273C10.3438 11.9781 10.5 11.3631 10.5 10.7382ZM8.43192 15.5H15.568L17.539 19.1307C17.6294 19.2973 17.5088 19.4999 17.3193 19.4999H6.68068C6.49114 19.4999 6.37054 19.2973 6.46097 19.1307L8.43192 15.5Z"})),oTe=Object.freeze(Object.defineProperty({__proto__:null,default:zA},Symbol.toStringTag,{value:"Module"})),GA=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M11.0656 8.00389L11.25 7.99875H18.75C20.483 7.99875 21.8992 9.3552 21.9949 11.0643L22 11.2487V18.7487C22 20.4818 20.6435 21.898 18.9344 21.9936L18.75 21.9987H11.25C9.51697 21.9987 8.10075 20.6423 8.00515 18.9332L8 18.7487V11.2487C8 9.51571 9.35646 8.0995 11.0656 8.00389ZM18.75 9.49875H11.25C10.3318 9.49875 9.57881 10.2059 9.5058 11.1052L9.5 11.2487V18.7487C9.5 19.6669 10.2071 20.4199 11.1065 20.4929L11.25 20.4987H18.75C19.6682 20.4987 20.4212 19.7916 20.4942 18.8923L20.5 18.7487V11.2487C20.5 10.2822 19.7165 9.49875 18.75 9.49875ZM15.5818 4.23284L15.6345 4.40964L16.327 6.998H14.774L14.1856 4.79787C13.9355 3.86431 12.9759 3.31029 12.0423 3.56044L4.79787 5.50158C3.91344 5.73856 3.36966 6.61227 3.52756 7.49737L3.56044 7.64488L5.50158 14.8893C5.69372 15.6064 6.30445 16.0996 7.00045 16.1764L7.00056 17.6816C5.69932 17.6051 4.52962 16.7445 4.10539 15.4544L4.05269 15.2776L2.11155 8.03311C1.66301 6.35913 2.6067 4.6401 4.23284 4.10539L4.40964 4.05269L11.6541 2.11155C13.3281 1.66301 15.0471 2.6067 15.5818 4.23284Z"})),rTe=Object.freeze(Object.defineProperty({__proto__:null,default:GA},Symbol.toStringTag,{value:"Module"})),WA=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3.5 12C3.5 7.30558 7.30558 3.5 12 3.5C16.6944 3.5 20.5 7.30558 20.5 12C20.5 16.6944 16.6944 20.5 12 20.5C7.30558 20.5 3.5 16.6944 3.5 12ZM12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM7.08349 8.70767C6.67722 7.6882 7.68791 6.67747 8.7074 7.08372L12.7356 8.68888C13.9078 9.15602 14.8461 10.0704 15.3431 11.2303L17.1969 15.5557C17.6414 16.5929 16.5927 17.6415 15.5555 17.197L11.2301 15.3433C10.0703 14.8462 9.15587 13.908 8.68872 12.7358L7.08349 8.70767ZM8.69209 8.69233L10.0822 12.1805C10.4018 12.9825 11.0274 13.6245 11.821 13.9646L15.572 15.5721L13.9644 11.8212C13.6243 11.0276 12.9824 10.4019 12.1803 10.0823L8.69209 8.69233Z"})),aTe=Object.freeze(Object.defineProperty({__proto__:null,default:WA},Symbol.toStringTag,{value:"Module"})),$A=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 5.25C2 3.45507 3.45507 2 5.25 2H14.75C16.5449 2 18 3.45507 18 5.25V8H16.5V5.25C16.5 4.2835 15.7165 3.5 14.75 3.5H5.25C4.2835 3.5 3.5 4.2835 3.5 5.25V12.75C3.5 13.7165 4.2835 14.5 5.25 14.5H8V16H5.25C3.45507 16 2 14.5449 2 12.75V5.25ZM19 13.25C19 13.9404 18.4404 14.5 17.75 14.5C17.0596 14.5 16.5 13.9404 16.5 13.25C16.5 12.5596 17.0596 12 17.75 12C18.4404 12 19 12.5596 19 13.25ZM9 12.25C9 10.4551 10.4551 9 12.25 9H18.75C20.5449 9 22 10.4551 22 12.25V18.75C22 20.5449 20.5449 22 18.75 22H12.25C10.4551 22 9 20.5449 9 18.75V12.25ZM12.25 10.5C11.2835 10.5 10.5 11.2835 10.5 12.25V18.75C10.5 18.9393 10.5301 19.1216 10.5856 19.2923L13.98 16.1069C14.845 15.2977 16.1892 15.2977 17.0542 16.1069L20.4246 19.2598C20.4736 19.0985 20.5 18.9273 20.5 18.75V12.25C20.5 11.2835 19.7165 10.5 18.75 10.5H12.25ZM12.25 20.5H18.75C18.9854 20.5 19.2099 20.4535 19.4149 20.3693L16.0295 17.2023C15.7411 16.9326 15.2931 16.9326 15.0047 17.2023L11.6167 20.3819C11.8131 20.4582 12.0267 20.5 12.25 20.5ZM5.75 5C6.16421 5 6.5 5.33579 6.5 5.75V6.25C6.5 6.66421 6.16421 7 5.75 7C5.33579 7 5 6.66421 5 6.25V5.75C5 5.33579 5.33579 5 5.75 5ZM6.5 8.75C6.5 8.33579 6.16421 8 5.75 8C5.33579 8 5 8.33579 5 8.75V9.25C5 9.66421 5.33579 10 5.75 10C6.16421 10 6.5 9.66421 6.5 9.25V8.75ZM14.25 5C14.6642 5 15 5.33579 15 5.75V6.25C15 6.66421 14.6642 7 14.25 7C13.8358 7 13.5 6.66421 13.5 6.25V5.75C13.5 5.33579 13.8358 5 14.25 5ZM6.5 11.75C6.5 11.3358 6.16421 11 5.75 11C5.33579 11 5 11.3358 5 11.75V12.25C5 12.6642 5.33579 13 5.75 13C6.16421 13 6.5 12.6642 6.5 12.25V11.75Z"})),iTe=Object.freeze(Object.defineProperty({__proto__:null,default:$A},Symbol.toStringTag,{value:"Module"})),qA=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M7 7V5a3 3 0 0 1 5-2.236A3 3 0 0 1 17 5v2h1.5A1.5 1.5 0 0 1 20 8.5v10.005A3.495 3.495 0 0 1 16.505 22H8a4 4 0 0 1-4-4V8.5A1.5 1.5 0 0 1 5.5 7H7Zm6.635 13.5a3.479 3.479 0 0 1-.625-1.995V8.5H5.5V18A2.5 2.5 0 0 0 8 20.5h5.635ZM11.5 7V5a1.5 1.5 0 0 0-3 0v2h3ZM13 7h2.5V5a1.5 1.5 0 0 0-2.656-.956c.101.3.156.622.156.956v2Zm1.51 11.505a1.995 1.995 0 0 0 3.99 0V8.5h-3.99v10.005Z"})),cTe=Object.freeze(Object.defineProperty({__proto__:null,default:qA},Symbol.toStringTag,{value:"Module"})),Fme="discover",Bme="chat",Vme={CHAT:"chat"},lTe={BIG:"big",SMALL:"small"},g3={COMPOSER:"composer",ADDRESS_BAR_SEARCH:"addressBarSearch",DRAWER:"drawer"};function uTe(e){return e===Vme.CHAT?Bme:Fme}const KA=R(g3.ADDRESS_BAR_SEARCH),Hme="/discover";function zme(e){return e.startsWith(Hme)}function ZA(){const e=ut();return zme(e)}function Tx(e){return e?{x:e.scrollLeft,y:e.scrollTop}:{x:0,y:0}}function Gme(e,t={}){const{checkIsScrolling:n=!0,scrollEndDelay:s=150}=t,[o,r]=c.useState(Tx(e.current)),[a,l]=c.useState(!1),u=c.useRef(void 0);return c.useEffect(()=>{const d=e.current;let m=null;if(d===null)return()=>{};function f(){m===null&&(m=window.requestAnimationFrame(()=>{r(Tx(d)),n&&(l(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{l(!1)},s)),m=null}))}return d.addEventListener("scroll",f),()=>{d.removeEventListener("scroll",f),u.current&&clearTimeout(u.current)}},[n,e,s]),t.checkIsScrolling?{...o,isScrolling:a}:o}function Wme(e,t,n={}){const{leading:s=!0,trailing:o=!1}=n;let r=!1,a=null;const l=u=>{e(...u)};return!s&&!o?()=>{}:(...u)=>{r?a=u:(s?l(u):o&&(a=u),r=!0,setTimeout(()=>{r=!1,o&&a&&(l(a),a=null,r=!0,setTimeout(()=>{r=!1},t))},t))}}function J2(e,t=1e3){const n=c.useRef(null);return c.useEffect(()=>{n.current=e},[e]),c.useMemo(()=>Wme((...r)=>{var a;(a=n.current)==null||a.call(n,...r)},t),[t])}function YA({onScrollStart:e,onScrollEnd:t,scrollRefs:n}){const s=c.useRef({}),o=J2(a=>{const{target:l}=a;l instanceof Window?s.current={scrollSource:"window",scrollStartTime:Date.now(),scrollStartX:l.scrollX,scrollStartY:l.scrollY,scrollWidth:document.documentElement.scrollWidth,scrollHeight:document.documentElement.scrollHeight}:l instanceof HTMLElement&&(s.current={scrollSource:l.id,scrollStartTime:Date.now(),scrollStartX:l.scrollLeft,scrollStartY:l.scrollTop,scrollWidth:l.scrollWidth,scrollHeight:l.scrollHeight}),e==null||e(s.current)}),r=J2(a=>{const{target:l}=a;l instanceof Window?(s.current={...s.current,scrollEndX:l.scrollX,scrollEndY:l.scrollY,scrollDuration:Date.now()-(s.current.scrollStartTime??0)},t==null||t(s.current)):l instanceof HTMLElement?(s.current={...s.current,scrollEndX:l.scrollLeft,scrollEndY:l.scrollTop,scrollDuration:Date.now()-(s.current.scrollStartTime??0)},t==null||t(s.current)):s.current={}});c.useEffect(()=>{var l,u;const a={passive:!0};for(const d of n)(l=d.current)==null||l.addEventListener("scroll",o,a),(u=d.current)==null||u.addEventListener("scrollend",r,a);return()=>{var d,m;for(const f of n)(d=f.current)==null||d.removeEventListener("scroll",o),(m=f.current)==null||m.removeEventListener("scrollend",r)}},[n,o,r])}function v3(e){const{scrollableRef:t,customData:n,customTrackCallback:s}=e,o=c.useCallback(r=>{window.requestAnimationFrame(()=>{if(s)s(r);else{const a=JSON.stringify(typeof n=="object"||n===void 0?{scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,...n??{}}:n);cQ({...r,scrollSource:e.source??r.scrollSource,customData:a})}})},[n,s,e.source]);YA({onScrollEnd:o,scrollRefs:t?[t]:[]})}const $me=/(['"])((\w+:(\/?\/?))?[^\s,]+)\1/,qme={maxRetries:2,initialDelayMs:200,backoffFactor:2,jitterFactor:.1};function Kme(e){const n=String(e).match($me);if(n)return n[2]}function Zme(e,t){const n=s=>import(s);return async s=>{try{return await s()}catch(o){if(!be("lazy-with-retry"))throw o;const r=Kme(s);if(!r)throw Kt({feature:"lazyWithRetry",scenario:e,errorType:"lazyLoadModulePathParsingFailure",errorMessage:"Could not resolve path from importer function",customData:String(s)}),o;const a=async()=>{const m=`${r}?t=${Number(new Date)}`;return n(m)},d={...t,onSuccess:m=>{po({feature:"lazyWithRetry",scenario:e,customData:JSON.stringify({attempts:m.attemptCount})})},onFailure:m=>{Kt({feature:"lazyWithRetry",scenario:e,errorType:"lazyLoadRetryFailure",errorMessage:`Lazy import failed after ${m.attemptCount} attempt(s). Reason: ${m.exitReason??"unknown"}`,customData:JSON.stringify(m.errors)})}};return Xd(a,d)}}}function QA(e,t,n=qme){return c.lazy(()=>Zme(t,n)(e))}function Yme(){ye({pageName:"october-moment",sectionName:"mico",source:"octoberMomentTryNow",scenario:"actions",destination:"mico"})}function Qme(){ye({pageName:"october-moment",sectionName:"learn-live",source:"octoberMomentTryNow",scenario:"actions",destination:"learn-live"})}function Jme(){ye({pageName:"october-moment",sectionName:"groups",source:"octoberMomentTryNow",scenario:"actions",destination:"groups"})}function Xme(){ye({pageName:"october-moment",sectionName:"memory",source:"octoberMomentTryNow",scenario:"actions",destination:"memory"})}function efe(){ye({pageName:"october-moment",sectionName:"connectors",source:"octoberMomentTryNow",scenario:"actions",destination:"connectors"})}function tfe(){ye({pageName:"october-moment",sectionName:"imagine",source:"octoberMomentTryNow",scenario:"actions",destination:"imagine"})}function nfe(){ye({pageName:"october-moment",sectionName:"real-talk",source:"octoberMomentTryNow",scenario:"actions",destination:"real-talk"})}function sfe(){ye({pageName:"october-moment",sectionName:"search-mode",source:"octoberMomentTryNow",scenario:"actions",destination:"search-mode"})}function ofe(){ye({pageName:"october-moment",sectionName:"sources-pages",source:"octoberMomentTryNow",scenario:"actions",destination:"sources-pages"})}function rfe(){ye({pageName:"october-moment",sectionName:"care-navigator",source:"octoberMomentTryNow",scenario:"actions",destination:"care-navigator"})}function afe(){ye({pageName:"sidebar",sectionName:"october-moment-card",source:"octoberMomentCard",scenario:"actions",destination:"october-moment"})}function ife(){ye({pageName:"landingPage",sectionName:"october-moment-card",source:"octoberMomentCard",scenario:"actions",destination:"october-moment"})}function cfe(){ye({pageName:"landingPage",sectionName:"october-moment-card",source:"octoberMomentCard",scenario:"dismiss"})}async function tc(){const e=await t3(),t={id:e.id,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:void 0,continuedAt:null,group:null};return mt(vt,n=>{const s=new Map(n);return s.set(e.id,t),s}),mt(zd,!0),sm({id:e.id,shouldNavigateToChat:!1}),e.id}async function dTe(){Yme(),Zt("chat");const e=await tc();mt(Co,wa),await Js({conversationId:e,talk:!0})}async function mTe(){Qme(),Zt("study");const e=await tc();mt(Co,wa),await Js({conversationId:e,talk:!0})}async function fTe(){Jme(),Zt("chat");const e=await tc();await Js({conversationId:e}),await jn.submitMessage({text:z("octoberMoment.landingPage.features.groupConversation.featurePromptText"),inputMethod:"text"})}async function pTe(){Xme(),mt(Jv,!0)}async function hTe(){efe(),Zt("chat");const e=await tc();await Js({conversationId:e}),await jn.submitMessage({text:z("octoberMoment.landingPage.features.thirdPartyApp.featurePromptText"),inputMethod:"text"})}async function gTe(){tfe(),Zt("chat"),await qs({from:"/",to:"/imagine"})}async function vTe(){nfe(),Zt("coco");const e=await tc();await Js({conversationId:e})}async function CTe(){sfe(),Zt("search");const e=await tc();await Js({conversationId:e}),await jn.submitMessage({text:z("octoberMoment.landingPage.features.copilotSearch.featurePromptText"),inputMethod:"text"})}async function yTe(){ofe(),Zt("chat");const e=await kn({path:"/pages",args:{body:{title:"",content:""},analytics:{anonymousPath:"/pages"}}});if(!e.ok)throw new Error(`Failed to create page: ${e.status}`);const t=await e.json(),n=CE.parse(t);await qs({from:"/",to:`/pages/${n.id}`})}async function bTe(){rfe(),Zt("chat");const e=await tc();await Js({conversationId:e}),await jn.submitMessage({text:z("octoberMoment.landingPage.features.copilotMap.featurePromptText"),inputMethod:"text"})}function JA(){return be("october-moment-2025")}function xTe(e,t){return(e.assets.layouts.order??1/0)-(t.assets.layouts.order??1/0)}function Rp(e){var t;return((t=re.instance().config().settingsOverrides)==null?void 0:t[e.key])??e.default}const wo={image:"ImagesTab",page:"PagesTab",research:"ResearchTab",podcast:"PodcastsTab",video:"VideosTab"},lfe={image:"ImagesList",page:"PagesList",research:"ResearchList",podcast:"PodcastsList",video:"VideosList"},ufe={image:"ImageItem",page:"PageItem",research:"ResearchItem",podcast:"PodcastItem",video:"VideoItem"};function dfe(e){ye({pageName:e,source:"LibraryNavItem",destination:"library"})}function STe(e){const t=wo[e];ye({pageName:"library",source:t})}function ETe(e){un({page:"library",scenario:wo[e],element:lfe[e]})}function wTe(e){const{type:t,index:n}=e;ye({pageName:"library",source:ufe[t],scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function ITe(e){const{type:t,index:n}=e;ye({pageName:"library",source:"Share",scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function _Te(e){const{type:t,index:n}=e;ye({pageName:"library",source:"Delete",scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function TTe(e){const{type:t,index:n,format:s}=e;let o="Download";s==="pdf"?o="ExportAsPdf":o="ExportAsDocx",ye({pageName:"library",source:o,scenario:wo[t],customData:JSON.stringify({itemIndex:n})})}function ATe(e){const{type:t,isEmpty:n}=e;ye({pageName:"library",source:"CreateButton",scenario:wo[t],customData:JSON.stringify({isEmpty:n})})}function kTe(e){ye({pageName:"library",source:"SignInButton",scenario:wo[e]})}function MTe(){un({page:"library",element:"LibrarySignInPromotion"})}function NTe(){un({page:"library"})}function RTe(e){un({page:"library",scenario:wo[e],element:"EmptyState"})}function PTe(e){un({page:"library",scenario:wo[e],element:"ErrorPage"})}function LTe(e){ye({pageName:"library",source:"retryButton",scenario:wo[e]})}const mfe="/static/cmc/assets/october-moment-icon-CapwGCOT.webp";function C3(){const e=gt({breakpoint:"md"}),t=Ns(),n=M(Fo);return t&&n&&!e}function XA(e){const{isNotification:t}=e,{t:n}=q();return i.jsx("div",{className:F("overflow-hidden rounded-xl",!t&&"w-2/5"),children:i.jsx("div",{className:"relative size-full",children:i.jsx("img",{src:mfe,alt:n("octoberMoment.landingPage.header"),className:"block size-full object-cover"})})})}function ffe(){const e=C3(),t=ut(),n=xo(),{t:s}=q();return i.jsx(pt,{mode:"popLayout",children:i.jsx(ge.button,{className:"flex min-w-0 flex-1 flex-col",initial:"initial",animate:"animate",exit:"exit",variants:{initial:Fe,animate:nt,exit:Fe},onClick:async()=>{afe(),await n({to:"/fallrelease",from:t})},transition:pn,children:e&&i.jsxs("div",{className:"relative isolate flex h-full cursor-pointer flex-row gap-3 rounded-3xl bg-white/45 p-2 text-foreground-800 transition-shadow duration-200 ease-entrance will-change-transform hover:shadow-lg focus-visible:shadow-lg dark:bg-background-650/10",children:[i.jsx(XA,{isNotification:!1}),i.jsxs("div",{className:"size-full text-left",children:[i.jsx("div",{className:"text-sm-strong",children:s("octoberMoment.awarenessCard.cardHeader")}),i.jsx("div",{className:"text-xs",children:s("octoberMoment.awarenessCard.cardDescription")})]})]})})})}function Xg(e){const{fallback:t,children:n}=e;return i.jsx(A7,{serverFallback:t,children:i.jsx(c.Suspense,{fallback:t,children:n})})}const pfe=QA(()=>B(()=>import("./sidebar-settings-DBxpnlXd.js"),__vite__mapDeps([303,1,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345])),"sidebar-settings"),e0="bg-sidebar-light dark:bg-sidebar-dark",Ax="before:pointer-events-none before:absolute before:h-10 before:w-full before:from-sidebar-light before:to-transparent dark:before:from-sidebar-dark",hfe=c.lazy(()=>B(()=>import("./sidebar-pages-Bq_c0DJy.js"),__vite__mapDeps([346,1])).then(e=>({default:e.SidebarPages}))),gfe=c.lazy(()=>B(()=>import("./conversations-DCs2p-94.js"),__vite__mapDeps([347,1,348,349,350,351,352,353,354])));function vfe(e){const{toggle:t}=e,{t:n}=q(),s=ut(),o=xo(),r=wr(),a=M(Fo),l=ym(),u=se(KA),d=c.useRef(!0);c.useEffect(()=>{d.current=!1},[]);const m=Qt(),f=Ld(),h=W("pages-sidebar-empty-cta"),g=W("pages-anonymous"),C=W("library"),v=!C&&(m||h||g)&&f,y=mm(),b=W("appearance-discoverability-sidebar-banner"),E=M(FA),S=M(Co),I=M(BA),_=M(Nme),T=re.instance().config().enableLabs,A=!Gt("kill-creator-gallery"),k=W("shopping-homepage"),N=s==="/shopping",P=ZA(),V=P||s==="/daily",{modalType:U}=$p({strict:!1}),K=s.startsWith("/library"),Q=s.startsWith("/labs"),Z=a3(s),Y=r3,[X,$]=c.useState(y&&b&&!I&&!E);c.useEffect(()=>{(E||_)&&$(!1)},[E,_]);const ee=c.useMemo(()=>y&&b&&S&&I&&E!==Iv&&!_,[y,E,b,S,I,_]),te=M(Wd),G=c.useRef(null),{y:ie}=Gme(G),xe=ie>0,ce=TA(),ae=se(Fo);v3({scrollableRef:G,source:"sidebar"});const Se=Rp({key:"shouldUseFlyoutSettings",default:!1}),Me=W("sidebar-settings"),Oe=Me&&!Se&&f,oe=Ul(),le=Cm(),J=oe&&!ce&&!a;return i.jsx("div",{className:F("h-dvh px-0.5 pb-0.5 pt-1",ce?"w-full":"w-sidebar"),children:i.jsx("div",{className:F("t-custom-scrollbar h-full overflow-x-hidden",a?"overflow-y-auto":"overflow-y-hidden"),ref:G,children:i.jsxs("div",{className:F("flex min-h-full w-full flex-col px-1",{"justify-between":Oe}),children:[i.jsx(ge.div,{className:F(e0,Ax,"pointer-events-none sticky top-0 z-10 pb-3 pt-[52px]",xe&&"before:bottom-0 before:top-full before:bg-gradient-to-b before:opacity-90",xe&&"after:absolute after:bottom-0 after:mx-1 after:w-[calc(100%-8px)] after:border-b after:border-black/8 dark:after:border-white/10",ce&&"whitespace-nowrap"),layout:!0,transition:pn,children:i.jsxs("div",{className:F(e0,"pointer-events-auto relative flex flex-col items-start gap-0.5",le?"pt-0":"pt-4"),children:[i.jsx(pt,{mode:"popLayout",children:le&&i.jsxs(ge.div,{className:"flex flex-col gap-0.5",animate:"animate",exit:"exit",variants:{animate:{scale:1,...nt},exit:{scale:.6,...Fe}},transition:l||d.current?{duration:0}:pn,children:[i.jsx(Va,{buttonClassName:"cursor-e-resize",titleString:n("sidebar.open"),isIconOnly:!0,onClick:()=>{ye({source:"sidebarToggle",pageName:s,customData:JSON.stringify({isOpen:a})}),t()},testId:"sidebar-toggle-button",children:i.jsx(ch,{className:"size-6"})}),i.jsx(Va,{titleString:n("composer.startNewChat"),isIconOnly:!0,onClick:async()=>{f&&(ye({source:"sidebarNewConversation",destination:"/",pageName:s,customData:JSON.stringify({isOpen:a})}),await r())},children:i.jsx(xm,{className:"size-6"})})]})}),i.jsx(Va,{titleString:n("sidebar.discover"),descriptionString:n("sidebar.discoverDescription"),isSelected:V,isIconOnly:J,iconBgColor:"bg-caramel-350/40 dark:bg-slate-650/60",iconFgColor:"text-caramel-600 dark:text-slate-250",testId:"sidebar-discover-button",onClick:async()=>{if(!f)return;!P||P&&!!U?(u(g3.DRAWER),ye({source:"sidebarDiscoverButton",destination:"/discover",pageName:s}),await o({to:"/discover",from:s,search:{modalUrl:void 0}})):ce&&ae(!1)},children:i.jsx(WA,{className:"size-6"})}),k&&i.jsx(Va,{titleString:n("sidebar.shopping.title"),descriptionString:n("sidebar.shopping.description"),isSelected:N,isIconOnly:J,iconBgColor:"bg-shopping-purple-350 dark:bg-slate-650/60",iconFgColor:"text-shopping-purple-550 dark:text-slate-250",testId:"sidebar-shopping-button",onClick:async()=>{f&&(await o({to:"/shopping",from:s}),ce&&N&&ae(!1))},children:i.jsx(qA,{className:"size-6"})}),A&&i.jsx(Va,{titleString:n("sidebar.gallery.titleV2"),descriptionString:n("sidebar.gallery.description"),badgeString:n("sidebar.gallery.badge"),iconBgColor:"bg-midnight-350/50 dark:bg-midnight-600/50",iconFgColor:"text-midnight-600 dark:text-midnight-350",isSelected:Z,isIconOnly:J,onClick:async()=>{f&&(ye({source:"sidebarGalleryButton",destination:Y,pageName:s}),await o({to:Y,from:s}),ce&&Z&&ae(!1))},children:i.jsx($A,{className:"size-6"})}),C&&i.jsx(Va,{titleString:n("sidebar.library"),descriptionString:n("sidebar.libraryDescription"),iconBgColor:"bg-spot-green-300/40 dark:bg-spot-green-600/60",iconFgColor:"text-spot-green-600 dark:text-slate-250",isSelected:K,isIconOnly:J,onClick:()=>{f&&(o({to:"/library",from:s}),dfe(s))},children:i.jsx(GA,{className:"size-6"})}),T&&i.jsx(Va,{titleString:n("sidebar.labs"),descriptionString:n("sidebar.labsDescription"),iconBgColor:"bg-labs-light dark:bg-labs-dark",iconFgColor:"text-labs-dark dark:text-labs-light",isSelected:Q,isIconOnly:J,onClick:async()=>{f&&(ye({source:"sidebarLabsButton",destination:"/labs",pageName:s}),await o({to:"/labs",from:s}),ce&&Q&&ae(!1))},children:i.jsx(zA,{className:"size-6"})}),JA()&&f&&i.jsx("div",{className:"mt-3 px-1",children:i.jsx(ffe,{})})]})}),i.jsx(pt,{children:a&&i.jsxs(ge.div,{className:"grow",animate:"animate",exit:"exit",variants:{animate:nt,exit:Fe},layout:"position",transition:pn,children:[ee&&f&&i.jsx(Tme,{}),X&&!ee&&f&&i.jsx(Dme,{onDismiss:()=>$(!1)}),i.jsxs("div",{className:F("relative flex grow flex-col py-5"),children:[v&&i.jsx(Xg,{fallback:null,children:i.jsx(hfe,{isCompact:!ce})}),i.jsx("h2",{className:"mb-6 flex gap-2 px-2.5 align-middle text-base-dense-medium","data-testid":"sidebar-conversations-header",children:n("sidebar.conversations")}),te&&f?i.jsx(Xg,{fallback:i.jsx(_x,{count:16}),children:i.jsx(gfe,{isCompact:!ce})}):i.jsx(_x,{count:16})]})]})}),!Me&&i.jsx("div",{className:F(e0,Ax,"sticky bottom-0 py-1 before:bottom-full before:bg-gradient-to-t")}),i.jsx(Xg,{fallback:null,children:Oe&&i.jsx(pfe,{})})]})})})}const Cfe="/static/cmc/assets/copilot-wordmark-DvWA6bVb.svg",Sm=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M22.9253 4.97196C22.5214 3.79244 21.4126 3 20.1658 3L18.774 3C17.3622 3 16.1532 4.01106 15.9033 5.40051L14.4509 13.4782L15.0163 11.5829C15.3849 10.347 16.5215 9.5 17.8112 9.5L23.0593 9.5L25.3054 10.809L27.4705 9.5H26.5598C25.313 9.5 24.2042 8.70756 23.8003 7.52804L22.9253 4.97196Z",fill:"url(#paint0_radial_262034_2117)"}),c.createElement("path",{d:"M9.39637 27.0147C9.79613 28.2011 10.9084 29 12.1604 29H14.5727C16.1772 29 17.4805 27.704 17.4893 26.0995L17.5315 18.4862L16.9699 20.4033C16.6058 21.6461 15.4659 22.5 14.1708 22.5H8.88959L6.96437 21.0214L4.88007 22.5H5.78013C7.03206 22.5 8.14435 23.299 8.54411 24.4853L9.39637 27.0147Z",fill:"url(#paint1_radial_262034_2117)"}),c.createElement("path",{d:"M19.7501 3H8.81266C5.68767 3 3.81268 7.08916 2.56269 11.1783C1.08177 16.0229 -0.856044 22.5021 4.75017 22.5021H9.66051C10.9615 22.5021 12.105 21.6415 12.4657 20.3915C13.2784 17.5759 14.7501 12.4993 15.9014 8.65192C16.4758 6.73249 16.9543 5.08404 17.6886 4.05749C18.1003 3.48196 18.7864 3 19.7501 3Z",fill:"url(#paint2_radial_262034_2117)"}),c.createElement("path",{d:"M19.7501 3H8.81266C5.68767 3 3.81268 7.08916 2.56269 11.1783C1.08177 16.0229 -0.856044 22.5021 4.75017 22.5021H9.66051C10.9615 22.5021 12.105 21.6415 12.4657 20.3915C13.2784 17.5759 14.7501 12.4993 15.9014 8.65192C16.4758 6.73249 16.9543 5.08404 17.6886 4.05749C18.1003 3.48196 18.7864 3 19.7501 3Z",fill:"url(#paint3_linear_262034_2117)"}),c.createElement("path",{d:"M12.2478 29H23.1852C26.3102 29 28.1852 24.9103 29.4352 20.8207C30.9161 15.9755 32.854 9.49548 27.2477 9.49548H22.3375C21.0364 9.49548 19.893 10.3562 19.5322 11.6062C18.7196 14.4221 17.2479 19.4994 16.0965 23.3474C15.5221 25.2671 15.0436 26.9157 14.3093 27.9424C13.8976 28.518 13.2115 29 12.2478 29Z",fill:"url(#paint4_radial_262034_2117)"}),c.createElement("path",{d:"M12.2478 29H23.1852C26.3102 29 28.1852 24.9103 29.4352 20.8207C30.9161 15.9755 32.854 9.49548 27.2477 9.49548H22.3375C21.0364 9.49548 19.893 10.3562 19.5322 11.6062C18.7196 14.4221 17.2479 19.4994 16.0965 23.3474C15.5221 25.2671 15.0436 26.9157 14.3093 27.9424C13.8976 28.518 13.2115 29 12.2478 29Z",fill:"url(#paint5_linear_262034_2117)"}),c.createElement("defs",null,c.createElement("radialGradient",{id:"paint0_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.37821 -8.55084 -7.96607 7.17216 25.5747 13.5466)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0955758,stopColor:"#00AEFF"}),c.createElement("stop",{offset:.773185,stopColor:"#2253CE"}),c.createElement("stop",{offset:1,stopColor:"#0736C4"})),c.createElement("radialGradient",{id:"paint1_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(6.61516 7.92888 7.80904 -6.47171 7.1753 21.9482)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FFB657"}),c.createElement("stop",{offset:.633728,stopColor:"#FF5F3D"}),c.createElement("stop",{offset:.923392,stopColor:"#C02B3C"})),c.createElement("radialGradient",{id:"paint2_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(-0.990905 -17.2799 98.0282 -5.51056 8.54161 22.4952)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.03,stopColor:"#FFC800"}),c.createElement("stop",{offset:.31,stopColor:"#98BD42"}),c.createElement("stop",{offset:.49,stopColor:"#52B471"}),c.createElement("stop",{offset:.843838,stopColor:"#0D91E1"})),c.createElement("linearGradient",{id:"paint3_linear_262034_2117",x1:9.52186,y1:3,x2:10.3572,y2:22.5029,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#3DCBFF"}),c.createElement("stop",{offset:.246674,stopColor:"#0588F7",stopOpacity:0})),c.createElement("radialGradient",{id:"paint4_radial_262034_2117",cx:0,cy:0,r:1,gradientTransform:"matrix(-8.64067 24.4636 -29.4075 -10.797 27.8096 7.58585)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0661714,stopColor:"#8C48FF"}),c.createElement("stop",{offset:.5,stopColor:"#F2598A"}),c.createElement("stop",{offset:.895833,stopColor:"#FFB152"})),c.createElement("linearGradient",{id:"paint5_linear_262034_2117",x1:28.6736,y1:8.30469,x2:28.6627,y2:13.617,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0581535,stopColor:"#F8ADFA"}),c.createElement("stop",{offset:.708063,stopColor:"#A86EDD",stopOpacity:0}))));function St(e){const{url:t,className:n}=e;return i.jsx("div",{className:F("bg-current forced-color-adjust-none",n),style:{WebkitMaskImage:`url(${t})`,maskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain"}})}const kx={placement:"bottom"};function yfe(e){const{isSidebarOpen:t,toggle:n,isSidebarAtomSynced:s}=e,o=wr(),[r]=Ue(Hn),a=c.useRef(!0);c.useEffect(()=>{a.current=!1},[]);const l=M(_s),{t:u}=q(),d=ym(),m=ut(),f=Sr(),h=lh(),g=gt({breakpoint:"md"}),C=h3(),v=Ul(),y=Cm(),b=Ld(),E=!t&&(m.startsWith("/daily")||m.endsWith("/talk")||h||m.startsWith("/labs/experiments/3d-generations")||m.startsWith("/shares/3d-generations")),S=r==="chat-only"||t,I=c.useRef(null),_=Ir(()=>{const T=document.getElementById("app");if(T){const A=g&&I.current?I.current.clientWidth:0;T.style.setProperty("--sidebar-header-secondary-buttons-collapsed-width",`${A}px`),T.style.setProperty("--header-controls-inline-start-width",`${A}px`)}});return i.jsx("div",{className:F("pointer-events-none absolute start-0 top-0 w-full py-1.5 pe-2.5 md:py-3",!v&&(!t||!s)?"ps-2":"ps-0.5",ct.sidebar),children:i.jsx("div",{className:"relative",children:i.jsxs("div",{className:F("absolute flex min-w-full items-end justify-between p-1",y?"gap-3":"gap-0.5"),ref:_,children:[(t||v)&&i.jsx("div",{className:F("flex w-0 items-center",(!s||v&&!t)&&"max-md:hidden"),children:i.jsxs(ne,{role:"link",title:u("sidebar.homepageLink"),className:F("pointer-events-auto absolute start-1 top-1 flex items-center gap-2.5 pe-2.5 ps-2",y&&"gap-0 px-2"),size:"36-sm",color:"subtle-dimmed-inverted",testId:"sidebar-copilot-brand-button",onClick:async()=>{!f&&b&&(ye({source:"sidebarBrandButton",destination:"/chat",pageName:m}),await o())},children:[i.jsx(Sm,{className:"size-6"}),i.jsx(ln,{className:"flex items-center",mode:"popLayout",initial:a.current?!1:"initial",delay:d?0:ts.default,duration:d?0:ts.slow,children:i.jsxs("span",{className:F("flex items-center text-lg-strong",!s&&v&&"max-md:hidden",!t&&v&&"hidden"),children:[i.jsx(St,{url:Cfe,className:"h-[18px] w-[58px]"}),C&&i.jsx(Np,{text:"BETA",className:"ms-2 uppercase"})]})})]})}),i.jsxs("div",{className:F("pointer-events-auto relative mx-1 flex shrink-0 items-center gap-0.5",y&&"md:hidden"),"data-theme":l&&!t?l.theme:void 0,ref:I,children:[i.jsx(pt,{children:E&&i.jsx(ge.div,{className:F("pointer-events-auto absolute border border-stroke-100 shadow-md dark:border-stroke-300",S?"-inset-1 rounded-2xl":"inset-0 rounded-xl",Qs),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Fe,animate:nt,exit:Fe},transition:d?{duration:0}:pn})}),i.jsx(ne,{title:u(t?"sidebar.close":"sidebar.open"),tooltip:kx,className:F("after:absolute after:inset-0 after:rounded-xl max-md:hover:after:bg-black/3 max-md:dark:after:hover:bg-white/5",!v&&"hover:after:bg-black/3 dark:after:hover:bg-white/5",v&&t&&"md:cursor-w-resize",v&&!t&&"md:cursor-e-resize"),color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{ye({source:"sidebarToggle",pageName:m,customData:JSON.stringify({isOpen:t})}),n()},testId:"sidebar-toggle-button",children:i.jsx(ch,{className:"size-6"})}),S&&i.jsxs("div",{className:F("flex rounded-xl max-md:hover:bg-black/3 max-md:dark:hover:bg-white/5",y?"md:gap-1":"hover:bg-black/3 dark:hover:bg-white/5",!s&&r!=="chat-only"&&"max-md:hidden"),children:[i.jsx(ne,{title:u("composer.startNewChat"),tooltip:kx,color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",className:F("rounded-sm rounded-s-xl max-md:w-[34px]",y?"md:w-10":"w-[34px]"),onClick:async()=>{b&&(ye({source:"sidebarNewConversation",destination:"/chat",pageName:m,customData:JSON.stringify({isOpen:t})}),await o())},testId:"sidebar-new-conversation-button",children:i.jsx(xm,{className:"size-6"})}),i.jsx(OA,{buttonSize:"36-sm"})]}),C&&i.jsx(Np,{text:u("settings.copilotBeta.beta"),className:F("relative m-2 uppercase",t&&s&&"max-md:hidden",(t||v)&&"md:hidden")})]})]})})})}function go({onOutsideEvent:e,elements:t,shouldAttachListeners:n=!0,includeScroll:s=!0,invokeOnce:o=!0,includeFocus:r=!0,includeClick:a=!1}){c.useEffect(()=>{const l=u=>{const d=u.target,m=t.some(h=>{var g;return(g=h.current)==null?void 0:g.contains(d)}),f=d instanceof Element&&d.closest("[data-outside-events-ignore]")!==null;!m&&!f&&e()};return n&&(document.addEventListener("mousedown",l,{once:o}),a&&document.addEventListener("click",l,{once:o}),s&&document.addEventListener("scroll",l,!0),r&&document.addEventListener("focusin",l,!0)),()=>{document.removeEventListener("mousedown",l),a&&document.removeEventListener("click",l),s&&document.removeEventListener("scroll",l,!0),r&&document.removeEventListener("focusin",l,!0)}},[n,s,t,o,r,e,a])}function bfe(e){const{isSidebarAtomSynced:t=!0}=e,{t:n}=q(),[s,o]=Ue(Fo),r=ym(),a=gt({breakpoint:"md"}),[l,u]=c.useState(a),d=c.useRef(a),m=c.useRef(null),f=re.instance().config().useCompactSidebarHeader??!1,h=re.instance().config().isSidebarSmokeLayerVisible??!0;s3(()=>{a&&o(!1)});const g=Cm();c.useEffect(()=>{d.current===!1&&a&&o(!1),d.current===!0&&!a&&o(j7()==="open"),d.current=a,u(a)},[a,o]),go({onOutsideEvent:()=>o(!1),elements:[m],shouldAttachListeners:s&&!h&&a,includeScroll:!1,invokeOnce:!1,includeFocus:!1});const C=()=>{o(!s),a||AF(s?"close":"open")};return i.jsxs(i.Fragment,{children:[i.jsx(pt,{children:l&&s&&h&&i.jsx(ge.div,{className:F("fixed inset-0 bg-black/30",!t&&"hidden"),onClick:()=>o(!1),initial:"initial",animate:"animate",exit:"exit",variants:{initial:Fe,animate:nt,exit:Fe},transition:pn})}),i.jsxs(ge.div,{ref:m,className:ue("relative w-full bg-sidebar-light dark:bg-sidebar-dark",!h&&"shadow-lg"),layout:"position",role:"navigation",children:[!s&&i.jsx("button",{onClick:C,type:"button",className:"absolute size-full cursor-e-resize outline-none max-md:hidden","aria-label":n("sidebar.open")}),f?i.jsx(Cme,{isSidebarOpen:s,toggle:C}):i.jsx(yfe,{isSidebarOpen:s,toggle:C,isSidebarAtomSynced:t}),i.jsx(pt,{children:i.jsx(ge.div,{className:F("overflow-hidden",!s&&!g&&"hidden",s&&!t&&"max-md:hidden"),animate:"animate",exit:"exit",variants:{animate:nt,exit:Fe},transition:r?{duration:0}:pn,children:i.jsx(vfe,{toggle:C})})})]})]})}const xfe=290,Sfe=52,Efe=()=>{const e=Ul(),t=gt({breakpoint:"md"});return e&&!t?Sfe:0},wfe="bg-sidebar-light dark:bg-sidebar-dark";function Ife(e){const{children:t}=e,n=gt({breakpoint:"md"}),s=Ns(),r=M(Fo)&&s,[a,l]=c.useState(!1),u=M(Hn),d=M(gi),m=M(y1),f=TA(),h=Ul(),g=ym(),C=Xp(),v=se(Fo),[y,b]=c.useState(!1);c.useEffect(()=>{C&&!y&&(n&&v(!1),b(!0))},[C,n,v,y]);const E=s&&(r||h),S=E&&!n;c.useEffect(()=>{const P=document.getElementById("app");P&&P.style.setProperty("--layout-offset-y",S?`${Q7}px`:"0px")},[S]);const I=Cm(),_=u==="side-by-side",T=f?"100%":xfe,A=Efe(),k=d||!!m,N=y?{width:r?T:A}:{};return i.jsxs("div",{className:ue("flex h-full overflow-hidden",wfe),inert:k?!0:void 0,children:[s&&i.jsx(ge.div,{className:ue("absolute h-full w-0 will-change-auto max-md:bg-sidebar-light max-md:dark:bg-sidebar-dark md:relative",r?"md:w-[290px]":"md:w-[52px]",ct.sidebarSmallScreen),animate:N,transition:g?{duration:0}:pn,onAnimationStart:()=>l(!0),onAnimationComplete:()=>l(!1),children:i.jsx(bfe,{isSidebarAtomSynced:y})}),i.jsx("main",{className:ue("relative flex w-full min-w-0 will-change-auto","after:pointer-events-none after:fixed after:inset-2 after:z-30 after:rounded-container after:border after:border-transparent after:opacity-0 after:transition-opacity after:duration-0 dark:after:border-white/12 dark:after:border-s-white/8",E&&!a&&"md:after:opacity-100 md:after:duration-1000",I?"after:start-[52px]":"after:start-[290px]",E&&"md:pt-1.5",_&&"pt-1.5",E&&!_&&"md:pb-1.5",E&&"md:pe-1.5",!E&&_&&"pe-1.5 ps-1.5",_&&"max-md:pe-1.5 max-md:ps-1.5"),children:t})]})}function fd(e){const{children:t,className:n,backgroundColor:s}=e,o=Ns(),r=Ul(),l=ut().endsWith("/talk");return i.jsxs("div",{className:F("relative h-full overflow-hidden",n),children:[i.jsx("div",{className:ue("absolute size-full",o&&"md:t-main-clip-path"),children:i.jsx(ec,{customColor:s,isFixed:!0})}),i.jsx("div",{className:ue("relative size-full",!l&&"overflow-hidden",o&&r&&"md:rounded-container"),children:t})]})}const OTe="https://picassostaticassetsstg.azureedge.net/character/try-now/lumi_intro_394_222";function _fe(e,t){if(!e)return!1;const n=wt(L7,he())??wt(SF,he());return!t&&!n}function Tfe(){const e=Bs(),t=be("appearance-first-run-experience"),n=pe(VA);return e&&t&&!n}function Afe(e,t,n,s){return(!e||!t)&&!s?!1:!n&&!wt(CF,he())}function ek(){const e=M(UZ),t=M(Ame),n=mm(),s=eh(),o=W("appearance-discoverability"),r=M(kme),a=W("appearance-try-now-modal"),l=M(Co),u=Afe(n,o,r,s),d=_fe(a,l);return{noModalToShow:!u&&!d&&!e&&!t,shouldShowEducationModal:u,shouldShowTryNowModal:d,isAppearanceTryNowModalDisplayed:e,isAppearanceEducationModalDisplayed:t,isAppearanceEducationModalClicked:r}}function tk(){const e=M($v),{passthroughType:t}=wT();return!!(e!=null&&e.prompt)&&t==="full"}const Pp={CLOSE_BUTTON:"closeButton",ONE_LINE_COMPOSER:"oneLineComposer",IMAGE_VIEWER:"imageViewer"},Fl=R(),kfe=R(e=>{const t=e(Fl);if(!(!t||!Array.isArray(t.media)||typeof t.currentMediaIndex!="number"))return t.media[t.currentMediaIndex]});function Mfe(){return M(kfe)}function Nfe(e){const t=pe(je);qt({source:e.source??"defaultMediaViewerSource",scenario:"mediaViewerOpen",messageId:e.messageId,conversationId:t})}function Rfe(){const e=pe(Fl),t=pe(je);e&&qt({source:"mediaViewer",scenario:"mediaViewerNext",messageId:e.messageId,conversationId:t})}function Pfe(){const e=pe(Fl),t=pe(je);e&&qt({source:"mediaViewer",scenario:"mediaViewerPrevious",messageId:e.messageId,conversationId:t})}function Mx(){const e=pe(Fl),t=pe(je);e&&qt({source:"mediaViewer",scenario:"mediaViewerClose",messageId:e.messageId,conversationId:t})}function nk(){return`Copilot_${Xn(new Date,"yyyyMMdd_HHmmss")}`}function Lfe(e){e.target instanceof HTMLImageElement&&URL.revokeObjectURL(e.target.src)}async function Ofe(e,t=!1){try{const n=await zn(e,{analytics:{anonymousPath:"/attachments/*.png"}});return t&&n.status!==200?null:await n.blob()}catch{return null}}async function Dfe(e,t=!1){try{const n=await Ofe(e,t);return n?URL.createObjectURL(n):null}catch{return null}}const sk={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",webp:"image/webp"},t0="image";function jfe(e){const{pathname:t}=new URL(e,"https://example.com");return t.split("/").pop()??"image.jpg"}function Ufe(e){var o;const{pathname:t}=new URL(e,"https://example.com"),n=t.split("."),s=n.length>1?((o=n.pop())==null?void 0:o.toLowerCase())??"":"";return Object.keys(sk).includes(s)?s:""}function Ffe(e){const t=Ufe(e);return sk[t]??"image/jpeg"}const Bfe=async(e,t="image.jpg")=>{const s=await(await zn(e)).blob(),o=s.type||Ffe(e);return{file:new File([s],t,{type:o}),type:o}};function DTe(e){const t=e.naturalWidth/e.naturalHeight;return t>1.1?"landscape":t<.9?"portrait":"square"}async function Vfe(e,t){const n=t??nk(),o=await(await fetch(e)).blob(),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}const Hfe=R();function ok(){const[e,t]=Ue(Hfe);return{isPictureInPictureOpen:e!==void 0,openPictureInPicture:o=>{t(o),ye({source:"mediaViewer",scenario:"PictureInPictureOpen"})},closePictureInPicture:()=>t(void 0)}}function zfe(e){const t=Xn(new Date,"yyyyMMdd_HHmmss");return{filename:`${e}_${t}.mp4`}}function ka(){const[e,t]=Ue(Fl),n=se(Md),{openPictureInPicture:s}=ok(),{t:o}=q(),r=c.useCallback(()=>{const{onClose:b}=e??{};Mx(),n(!1),t(void 0),b==null||b()},[t,e,n]),a=c.useCallback(()=>{Rfe(),t(b=>{if(!b)return b;if(b.currentMediaIndex<b.media.length-1){const E=b.currentMediaIndex+1;return{...b,currentMediaIndex:E,isCurrentMediaLoading:n0(b.media[E])}}return b})},[t]),l=c.useCallback(()=>{Pfe(),t(b=>{if(!b)return b;if(b.currentMediaIndex>0){const E=b.currentMediaIndex-1;return{...b,currentMediaIndex:E,isCurrentMediaLoading:n0(b.media[E])}}return b})},[t]),u=c.useCallback(b=>{Nfe(b),n(!1),t({...b,isCurrentMediaLoading:n0(b.media[b.currentMediaIndex])})},[t,n]),d=e==null?void 0:e.media[e.currentMediaIndex],m=(d==null?void 0:d.type)==="video",f=(e==null?void 0:e.source)==="videoActionCard"||(e==null?void 0:e.source)==="library",h=m&&f,g=m&&!h,C=c.useCallback(()=>{var b;if(d&&d.type==="video"){const{player:E}=d;s({url:d.url,title:((b=d.source)==null?void 0:b.title)??"",startTime:(E==null?void 0:E.getCurrentTime())??0}),Mx(),t(void 0)}},[s,t,d]),v=c.useCallback(()=>{if(!h)return;const{filename:b}=zfe(o("video.downloadFileName"));Vfe(d.url,b)},[h,d,o]),y=(e==null?void 0:e.contentComposerType)??Pp.CLOSE_BUTTON;return c.useMemo(()=>({openMediaViewer:u,closeMediaViewer:r,isMediaViewerOpen:e!==void 0,next:a,previous:l,isPictureInPictureSupported:g,triggerPictureInPicture:C,contentComposerType:y,showOneLineComposerWhenMediaViewerOpen:y===Pp.ONE_LINE_COMPOSER,contentPageType:e==null?void 0:e.contentPageType,triggerVideoDownload:h?v:void 0}),[u,r,e,a,l,g,C,y,h,v])}function n0(e){if(e&&"initLoading"in e)return e.initLoading}function Gfe(){var m,f;const e=ut(),t=M(Hn),{isAppearanceEducationModalDisplayed:n,isAppearanceTryNowModalDisplayed:s}=ek(),{isMediaViewerOpen:o}=ka(),{disableMultiturn:r}=re.instance().config(),a=((m=re.instance().config().composer)==null?void 0:m.largeScreen)===!0&&((f=re.instance().config().composer)==null?void 0:f.voiceOnly)===!0,l=["/pro/subscribe","/pro/ewallet/return","/referrals","/referrals/rules","/subscription/manage","/subscription/start","/connector/callback"],u=tk(),d=!e.startsWith("/labs")||e==="/labs/portrait/talk";return!l.includes(e)&&!e.startsWith("/topic-selection")&&(!e.startsWith("/fang")||o)&&!e.startsWith("/login")&&e!=="/e/so"&&e!=="/e/sol"&&!e.startsWith("/pro/redeem")&&!e.startsWith("/gaming")&&(!e.startsWith("/library")||o)&&!e.startsWith("/memory/narrative")&&!e.startsWith("/conversations")&&!e.startsWith("/campaigns")&&!e.startsWith("/pages")&&!e.startsWith("/shares/pages")&&!e.startsWith("/research")&&!e.startsWith("/shares/3d-generations")&&!a3(e)&&(!e.startsWith("/shopping")||o)&&d&&t!=="detail-only"&&!s&&!n&&!a&&!r&&!u&&!e.startsWith("/shares/tasks")&&!e.startsWith("/fallrelease")}function Wfe(){var o,r;const e=ut(),n=Sr()&&be("use-tv-talk")||e.endsWith("/talk");return((o=re.instance().config().composer)==null?void 0:o.largeScreen)===!0&&((r=re.instance().config().composer)==null?void 0:r.voiceOnly)===!0&&n}function $fe(e){const{showSettings:t,showSettingsRelyOnChatDetailLayout:n}=e,s=M(Hn);return c.useMemo(()=>n?t&&s!=="side-by-side"&&s!=="detail-only":t,[n,t,s])}function qfe(){const[e,t]=Ue(hme);return c.useEffect(()=>{async function n(){const o=await(re.instance().config().isCommandHeaderSupported??(()=>Promise.resolve(!1)))();t(o)}n().catch(()=>{})},[t]),e}function rk(){return GL().map(t=>t.context)}function uh(){const e=rk(),t=e[e.length-1];return!!(t!=null&&t.customLayout)}function Kfe(){const e=rk(),t=e[e.length-1];return!!(t!=null&&t.standalonePage)}const Zfe=16/9,Yfe=48,ak=296,Qfe=ak/Zfe,Jfe=Qfe+Yfe;function Xfe(){return i.jsx("div",{className:"pointer-events-none absolute inset-0 mb-[calc(var(--composer-container-height)+20px)] me-4 ms-2 mt-[72px]",children:i.jsx("div",{className:"absolute bottom-0 end-4",style:{width:`${ak}px`,height:`${Jfe}px`},children:i.jsx("div",{className:ue("relative flex h-full flex-col overflow-hidden rounded-4xl","bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]"),style:{boxShadow:"0px 16px 24px -2px rgba(0, 0, 0, 0.12)"},children:i.jsx("div",{className:"flex h-full items-center justify-center",children:i.jsx(it,{className:"size-12"})})})})})}function X2(e){Kt({feature:"fileDownload",errorType:"DownloadFileError",errorMessage:e})}const pd=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M18.2498 20.5009C18.664 20.5008 19 20.8365 19 21.2507C19 21.6649 18.6644 22.0008 18.2502 22.0009L5.25022 22.0047C4.836 22.0048 4.5 21.6691 4.5 21.2549C4.5 20.8407 4.83557 20.5048 5.24978 20.5047L18.2498 20.5009ZM11.6482 2.01271L11.75 2.00586C12.1297 2.00586 12.4435 2.28801 12.4932 2.65409L12.5 2.75586L12.499 16.4409L16.2208 12.7205C16.4871 12.4543 16.9038 12.4301 17.1974 12.648L17.2815 12.7206C17.5477 12.9869 17.5719 13.4036 17.354 13.6972L17.2814 13.7813L12.2837 18.7779C12.0176 19.044 11.6012 19.0683 11.3076 18.8507L11.2235 18.7782L6.22003 13.7816C5.92694 13.4889 5.92661 13.014 6.21931 12.7209C6.48539 12.4545 6.90204 12.43 7.1958 12.6477L7.27997 12.7202L10.999 16.4339L11 2.75586C11 2.37616 11.2822 2.06237 11.6482 2.01271L11.75 2.00586L11.6482 2.01271Z",fill:"currentColor"})),jTe=Object.freeze(Object.defineProperty({__proto__:null,default:pd},Symbol.toStringTag,{value:"Module"}));function Bl(e){const t=pe(Wo).document.mimeTypes;return e in t}function y3(e,t){const n=pe(jl),{supportedMimeTypes:s=n}=t??{};if(!e)return!1;const o=gr(e);return o===""?!1:o in s}function UTe(){const e=pe(jl);return Object.keys(e).map(t=>t in $s&&$s[t]?[t,...$s[t].map(n=>`.${n}`)]:[]).flat()}function FTe(){const e=pe(Wo).document.mimeTypes;return Object.keys(e).map(t=>t in $s&&$s[t]?[t,...$s[t].map(n=>`.${n}`)]:[]).flat()}function BTe(){const e=pe(Wo).image.mimeTypes;return Object.keys(e).map(t=>t in $s&&$s[t]?[t,...$s[t].map(n=>`.${n}`)]:[]).flat()}function b3(e){return Object.values(e).flat().map(t=>`.${t}`)}function epe(){const e=pe(Wo).document.mimeTypes;return b3(e)}function tpe(){const e=pe(Wo).image.mimeTypes;return b3(e)}function ik(){const e=pe(Wo);return{documentMaxSize:e.document.maxBytes,imageMaxSize:e.image.maxBytes}}function x3(e){const t=hpe(e),n=pe(jl),s=Object.entries(n).find(([,o])=>o.includes(t??""));return s?s[0]:""}function gr(e){return e?e.type!==""?e.type:x3(e.name):""}function ck(e,t){const n=pe(jl),{supportedMimeTypes:s=n,scenario:o}=t??{};let r,a=null;const l=be("multi-file-upload"),u=ik();if(!y3(e,{supportedMimeTypes:s}))r={title:z("composer.errors.unsupportedAttachmentTypeV2.title"),message:z("composer.errors.unsupportedAttachmentTypeV2.message")},a="fileType";else if(!lk(e)){const d=gr(e);r=l?{title:z("composer.errors.multi.attachmentTooLarge.title"),message:z("composer.errors.multi.attachmentTooLarge.message",{limit:Bl(d)?u.documentMaxSize/1024/1024:u.imageMaxSize/1024/1024})}:{title:z("composer.errors.attachmentTooLargeV2.title"),message:z("composer.errors.attachmentTooLargeV2.message")},a="fileSize"}return D.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:a,eventInfo_fileType:gr(e),eventInfo_fileSize:e.size,eventInfo_customData:o?JSON.stringify({uploadFileScenario:o}):void 0}}),r}function npe(e){return e.type==="text/x-markdown"?new File([e],e.name,{type:"text/markdown"}):e}function lk(e){const t=ik(),n=gr(e),s=Bl(n)?t.documentMaxSize:t.imageMaxSize;return e.size<=s}function spe(e){var n;const t=(n=e.clipboardData)==null?void 0:n.items;if(t)for(let s=0;s<t.length;s+=1){const o=t[s];if((o==null?void 0:o.kind)==="file"){const r=o.getAsFile();if(!y3(r))continue;const a=gr(r);if(r!==null)return lk(r)?{file:r,error:void 0}:(D.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:"fileType",eventInfo_fileSize:r.size,eventInfo_fileType:a,eventInfo_errorMessage:"File size too large in paste"}}),{file:void 0,error:{title:z("composer.errors.attachmentTooLargeV2.title"),message:z("composer.errors.attachmentTooLargeV2.message")}})}}return{file:void 0,error:void 0}}function uk(e){switch(e){case"unsupported-content-type":return{title:z("composer.errors.unsupportedAttachmentTypeV2.title"),message:z("composer.errors.unsupportedAttachmentTypeV2.message")};case"attachment-too-large":return{title:z("composer.errors.attachmentTooLargeV2.title"),message:z("composer.errors.attachmentTooLargeV2.message")};case"empty-attachment":return{title:z("composer.errors.emptyAttachmentV2.title"),message:z("composer.errors.emptyAttachmentV2.message")};case"content-blocked":return{title:z("composer.errors.attachmentContentBlockedV2.title"),message:z("composer.errors.attachmentContentBlockedV2.message")};case"rate-limit-exceeded":return{title:z("composer.errors.attachmentRateLimitExceededV2.title"),message:z("composer.errors.attachmentRateLimitExceededV2.message")};default:return{title:z("composer.errors.attachmentDefault.title"),message:z("composer.errors.attachmentDefault.message")}}}function dk(e,t){const n=window.URL.createObjectURL(e),s=document.createElement("a");s.style.display="none",s.href=n,s.download=t,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(n),s.remove()}function VTe(e,t,n){const s=new Blob([n],{type:t});dk(s,e)}function ope(e){const t=e.headers.get("Content-Disposition");if(!t)return;const n=t.match(/filename\*=UTF-8''([^;]+)/);if(n&&n[1])return decodeURIComponent(n[1]);const s=t.match(/filename=([^;]+)/);if(s&&s[1])return s[1].replace(/^"(.*)"$/,"$1")}async function mk(e){const{url:t,fileName:n,preferResponseFileName:s,args:o}=e,r=rm(t)?await fetch(t,o==null?void 0:o.options):await zn(t,o);if(!r.ok)throw new Error(`Failed to fetch file: ${n} from ${t} (status: ${r.status})`);const a=await r.blob();let l=n;if(s){const u=ope(r);u&&(l=u)}dk(a,l)}function rpe({name:e,size:t,message:n,kind:s}){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:n,eventInfo_details:`Error uploading ${s} attachment`,eventInfo_uploadFileSize:t,eventInfo_uploadFileType:e,eventInfo_numDocumentsUploaded:1}})}function fk(){return`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function HTe(e,t){for(const n of e){const s=ck(n,{supportedMimeTypes:t});if(s)return s}return null}function ape(e){const t=lpe(e);return new File([e],t,{type:"text/plain"})}function ipe(e){return e.replace(/[\\/:*?"<>|]/g,"_").trim()}function cpe(e){return e.length>0&&!/^[_\s]+$/.test(e)}function lpe(e){const n=`${z("fileUpload.pastedTextDefaultFilename")}.txt`;if(!e||e.trim().length===0)return n;const o=e.split(`
`).find(a=>a.trim().length>0);if(!o)return n;let r=o.trim().slice(0,50);return r=ipe(r),cpe(r)?`${r}.txt`:n}const upe=2e3,dpe=500*1024,mpe=1*1024*1024,fpe=.05,ppe=.15;function zTe(e){const{fileSizeBytes:t,minUploadFileTimeMs:n=upe,minUploadSpeedBytesPerSec:s=dpe,maxUploadSpeedBytesPerSec:o=mpe,minBufferRatio:r=fpe,maxBufferRatio:a=ppe}=e,l=s+Math.random()*(o-s),u=t/l*1e3,d=n+u,m=r+Math.random()*(a-r),f=d*m;return d+f}function hpe(e){var t;return(t=e==null?void 0:e.split(".").pop())==null?void 0:t.toLowerCase()}const dh=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5.5028 4.62704L5.5 6.75V17.2542C5.5 19.0491 6.95507 20.5042 8.75 20.5042L17.3663 20.5045C17.0573 21.3782 16.224 22.0042 15.2444 22.0042H8.75C6.12665 22.0042 4 19.8776 4 17.2542V6.75C4 5.76929 4.62745 4.93512 5.5028 4.62704ZM17.75 2C18.9926 2 20 3.00736 20 4.25V17.25C20 18.4926 18.9926 19.5 17.75 19.5H8.75C7.50736 19.5 6.5 18.4926 6.5 17.25V4.25C6.5 3.00736 7.50736 2 8.75 2H17.75ZM17.75 3.5H8.75C8.33579 3.5 8 3.83579 8 4.25V17.25C8 17.6642 8.33579 18 8.75 18H17.75C18.1642 18 18.5 17.6642 18.5 17.25V4.25C18.5 3.83579 18.1642 3.5 17.75 3.5Z"})),GTe=Object.freeze(Object.defineProperty({__proto__:null,default:dh},Symbol.toStringTag,{value:"Module"})),Em=e=>c.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M6.25 10C6.25 10.6904 5.69036 11.25 5 11.25C4.30964 11.25 3.75 10.6904 3.75 10C3.75 9.30964 4.30964 8.75 5 8.75C5.69036 8.75 6.25 9.30964 6.25 10ZM11.25 10C11.25 10.6904 10.6904 11.25 10 11.25C9.30964 11.25 8.75 10.6904 8.75 10C8.75 9.30964 9.30964 8.75 10 8.75C10.6904 8.75 11.25 9.30964 11.25 10ZM15 11.25C15.6904 11.25 16.25 10.6904 16.25 10C16.25 9.30964 15.6904 8.75 15 8.75C14.3096 8.75 13.75 9.30964 13.75 10C13.75 10.6904 14.3096 11.25 15 11.25Z"})),WTe=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"})),gpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("ellipse",{cx:15.9995,cy:16,rx:13.249,ry:13.25,fill:"url(#paint0_linear_105551_393)"}),c.createElement("ellipse",{cx:15.9995,cy:16,rx:13.249,ry:13.25,fill:"url(#paint1_radial_105551_393)"}),c.createElement("ellipse",{cx:15.9995,cy:16,rx:13.249,ry:13.25,fill:"url(#paint2_radial_105551_393)",fillOpacity:.5}),c.createElement("path",{d:"M16.0001 2.75C23.3173 2.75 29.2491 8.68223 29.2491 16C29.2491 18.4375 28.5898 20.7206 27.4415 22.6826L27.5548 22.4336C28.9158 19.4123 26.7044 15.9936 23.3907 15.9961L18.464 15.999C17.1036 15.9999 16.0001 14.8975 16.0001 13.5371V8.60156C16.0001 5.28671 12.5773 3.07782 9.55676 4.44336L9.36731 4.52832C11.318 3.39781 13.5833 2.75002 16.0001 2.75Z",fill:"url(#paint3_linear_105551_393)"}),c.createElement("path",{d:"M16.0001 2.75C23.3173 2.75 29.2491 8.68223 29.2491 16C29.2491 18.4375 28.5898 20.7206 27.4415 22.6826L27.5548 22.4336C28.9158 19.4123 26.7044 15.9936 23.3907 15.9961L18.464 15.999C17.1036 15.9999 16.0001 14.8975 16.0001 13.5371V8.60156C16.0001 5.28671 12.5773 3.07782 9.55676 4.44336L9.36731 4.52832C11.318 3.39781 13.5833 2.75002 16.0001 2.75Z",fill:"url(#paint4_radial_105551_393)"}),c.createElement("path",{d:"M16.0001 2.75C23.3173 2.75 29.2491 8.68223 29.2491 16C29.2491 18.4375 28.5898 20.7206 27.4415 22.6826L27.5548 22.4336C28.9158 19.4123 26.7044 15.9936 23.3907 15.9961L18.464 15.999C17.1036 15.9999 16.0001 14.8975 16.0001 13.5371V8.60156C16.0001 5.28671 12.5773 3.07782 9.55676 4.44336L9.36731 4.52832C11.318 3.39781 13.5833 2.75002 16.0001 2.75Z",fill:"url(#paint5_radial_105551_393)",fillOpacity:.8}),c.createElement("path",{d:"M16.0001 2.75C23.3173 2.75 29.2491 8.68223 29.2491 16C29.2491 18.4375 28.5898 20.7206 27.4415 22.6826L27.5548 22.4336C28.9158 19.4123 26.7044 15.9936 23.3907 15.9961L18.464 15.999C17.1036 15.9999 16.0001 14.8975 16.0001 13.5371V8.60156C16.0001 5.28671 12.5773 3.07782 9.55676 4.44336L9.36731 4.52832C11.318 3.39781 13.5833 2.75002 16.0001 2.75Z",fill:"url(#paint6_radial_105551_393)"}),c.createElement("path",{d:"M16.0001 2.75C23.3173 2.75 29.2491 8.68223 29.2491 16C29.2491 18.4375 28.5898 20.7206 27.4415 22.6826L27.5548 22.4336C28.9158 19.4123 26.7044 15.9936 23.3907 15.9961L18.464 15.999C17.1036 15.9999 16.0001 14.8975 16.0001 13.5371V8.60156C16.0001 5.28671 12.5773 3.07782 9.55676 4.44336L9.36731 4.52832C11.318 3.39781 13.5833 2.75002 16.0001 2.75Z",fill:"url(#paint7_radial_105551_393)"}),c.createElement("rect",{x:2,y:14,width:12,height:12,rx:2.75,fill:"url(#paint8_radial_105551_393)"}),c.createElement("rect",{x:2,y:14,width:12,height:12,rx:2.75,fill:"url(#paint9_radial_105551_393)",fillOpacity:.3}),c.createElement("path",{d:"M7.33095 21.1332V23.25H5.86646V16.75H8.12894C8.93902 16.75 9.55565 16.9268 9.97883 17.2803C10.405 17.6339 10.6181 18.1582 10.6181 18.8532C10.6181 19.5694 10.3793 20.1284 9.90175 20.5303C9.42719 20.9322 8.7894 21.1332 7.98839 21.1332H7.33095ZM7.33095 17.8741V20.0091H7.94305C8.30577 20.0091 8.58537 19.9139 8.78184 19.7235C8.97832 19.5331 9.07656 19.2596 9.07656 18.9031C9.07656 18.5737 8.97983 18.3199 8.78638 18.1416C8.59595 17.9633 8.32239 17.8741 7.96572 17.8741H7.33095Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_105551_393",x1:14.6551,y1:1.90642,x2:-1.57873,y2:17.4368,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0582736,stopColor:"#FF7F48"}),c.createElement("stop",{offset:1,stopColor:"#E5495B"})),c.createElement("radialGradient",{id:"paint1_radial_105551_393",cx:0,cy:0,r:1,gradientTransform:"matrix(-18.8112 18.811 -31.6617 -31.6613 21.2367 10.439)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.151523,stopColor:"#AA1D2D"}),c.createElement("stop",{offset:.380855,stopColor:"#D12B18",stopOpacity:.44}),c.createElement("stop",{offset:.601996,stopColor:"#FF3C00",stopOpacity:0})),c.createElement("radialGradient",{id:"paint2_radial_105551_393",cx:0,cy:0,r:1,gradientTransform:"matrix(22.8026 -10.7704 19.5125 41.3098 -1.87407 26.7704)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.4067,stopColor:"#FF66FB"}),c.createElement("stop",{offset:1,stopColor:"#EA3D01",stopOpacity:0})),c.createElement("linearGradient",{id:"paint3_linear_105551_393",x1:18.5077,y1:18.9549,x2:32.7722,y2:8.38635,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.310768,stopColor:"#FF6E30"}),c.createElement("stop",{offset:.634576,stopColor:"#FFA05C"})),c.createElement("radialGradient",{id:"paint4_radial_105551_393",cx:0,cy:0,r:1,gradientTransform:"matrix(16.7654 3.51442 -4.52076 15.7435 13.7736 17.5903)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.78593,stopColor:"#FFA05C",stopOpacity:0}),c.createElement("stop",{offset:.904889,stopColor:"#FFCE84"})),c.createElement("radialGradient",{id:"paint5_radial_105551_393",cx:0,cy:0,r:1,gradientTransform:"matrix(14.4735 -9.47386 9.06302 13.8421 16.4609 15.8064)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.295239,stopColor:"#FF99E9"}),c.createElement("stop",{offset:.727968,stopColor:"#FF99E9",stopOpacity:0})),c.createElement("radialGradient",{id:"paint6_radial_105551_393",cx:0,cy:0,r:1,gradientTransform:"matrix(12.1147 -13.8748 12.9299 10.767 14.5186 17.83)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FD6EF9"}),c.createElement("stop",{offset:.637205,stopColor:"#FF9944"}),c.createElement("stop",{offset:.85186,stopColor:"#FCC479"})),c.createElement("radialGradient",{id:"paint7_radial_105551_393",cx:0,cy:0,r:1,gradientTransform:"matrix(-1.36843 9.27606 -20.9774 -2.95138 13.3133 4.50181)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.144283,stopColor:"#FF8D13"}),c.createElement("stop",{offset:.537266,stopColor:"#FF7F29",stopOpacity:0})),c.createElement("radialGradient",{id:"paint8_radial_105551_393",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1.99854 14) rotate(45) scale(16.9706)"},c.createElement("stop",{stopColor:"#F8193E"}),c.createElement("stop",{offset:.939062,stopColor:"#920616"})),c.createElement("radialGradient",{id:"paint9_radial_105551_393",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.99854 21.2) rotate(90) scale(8.4 9.5625)"},c.createElement("stop",{offset:.575893,stopColor:"#FFB055",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#FFF2BE"})))),vpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 2C24.3137 2 27 4.68628 27 8V26.5C27 28.433 25.433 30 23.5 30H6.5C4.567 30 3 28.433 3 26.5C3 25.1038 3.81753 23.8986 5 23.3368V5C5 3.34314 6.34315 2 8 2H21Z",fill:"url(#paint0_linear_103584_157300)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 29H21.0505C20.4022 28.3647 20 27.4793 20 26.5C20 25.5207 20.4022 24.6353 21.0505 24H6.5C5.11929 24 4 25.1193 4 26.5C4 27.8807 5.11929 29 6.5 29ZM6.5 23H23.5C23.7761 23 24 23.2238 24 23.5C24 23.7762 23.7761 24 23.5 24C22.1193 24 21 25.1193 21 26.5C21 27.8807 22.1193 29 23.5 29C24.8807 29 26 27.8807 26 26.5V8C26 5.23859 23.7614 3 21 3H8C6.89543 3 6 3.89542 6 5V23.0354C6.1633 23.0121 6.33024 23 6.5 23Z",fill:"url(#paint1_linear_103584_157300)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 29H21.0505C20.4022 28.3647 20 27.4793 20 26.5C20 25.5207 20.4022 24.6353 21.0505 24H6.5C5.11929 24 4 25.1193 4 26.5C4 27.8807 5.11929 29 6.5 29ZM6.5 23H23.5C23.7761 23 24 23.2238 24 23.5C24 23.7762 23.7761 24 23.5 24C22.1193 24 21 25.1193 21 26.5C21 27.8807 22.1193 29 23.5 29C24.8807 29 26 27.8807 26 26.5V8C26 5.23859 23.7614 3 21 3H8C6.89543 3 6 3.89542 6 5V23.0354C6.1633 23.0121 6.33024 23 6.5 23Z",fill:"url(#paint2_radial_103584_157300)"}),c.createElement("path",{d:"M18.1709 7.03024C18.4304 7.12461 18.5643 7.41149 18.4699 7.67101L14.4699 18.671C14.3755 18.9305 14.0886 19.0644 13.8291 18.97C13.5696 18.8757 13.4357 18.5888 13.5301 18.3293L17.5301 7.32926C17.6245 7.06975 17.9114 6.93587 18.1709 7.03024Z",fill:"url(#paint3_linear_103584_157300)"}),c.createElement("path",{d:"M11.3536 10.1466C11.5488 10.3418 11.5488 10.6584 11.3536 10.8537L9.20711 13.0001L11.3536 15.1466C11.5488 15.3418 11.5488 15.6584 11.3536 15.8537C11.1583 16.049 10.8417 16.049 10.6464 15.8537L8.14645 13.3537C7.95118 13.1584 7.95118 12.8418 8.14645 12.6466L10.6464 10.1466C10.8417 9.95132 11.1583 9.95132 11.3536 10.1466Z",fill:"url(#paint4_linear_103584_157300)"}),c.createElement("path",{d:"M20.6464 10.1466C20.8417 9.95132 21.1583 9.95132 21.3536 10.1466L23.8536 12.6466C24.0488 12.8418 24.0488 13.1584 23.8536 13.3537L21.3536 15.8537C21.1583 16.049 20.8417 16.049 20.6464 15.8537C20.4512 15.6584 20.4512 15.3418 20.6464 15.1466L22.7929 13.0001L20.6464 10.8537C20.4512 10.6584 20.4512 10.3418 20.6464 10.1466Z",fill:"url(#paint5_linear_103584_157300)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_157300",x1:10.75,y1:2,x2:15.1208,y2:30.0979,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_157300",x1:10.1111,y1:3,x2:13.9744,y2:29.1515,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_157300",cx:0,cy:0,r:1,gradientTransform:"matrix(11.6111 20.5833 -17.4167 7.71875 11.0278 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_157300",x1:11.5,y1:5,x2:16.9412,y2:19.0003,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint4_linear_103584_157300",x1:11.5,y1:5,x2:16.9412,y2:19.0003,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint5_linear_103584_157300",x1:11.5,y1:5,x2:16.9412,y2:19.0003,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),Cpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_148917)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_148917)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_148917)"}),c.createElement("path",{d:"M24.25 19.25C24.6642 19.2501 25 19.5858 25 20C25 20.6115 24.9926 21.2789 24.7871 21.9033C24.5674 22.5709 24.1422 23.1399 23.416 23.624C23.0714 23.8538 22.6057 23.7607 22.376 23.416C22.1462 23.0714 22.2393 22.6057 22.584 22.376C23.0575 22.0603 23.257 21.7543 23.3623 21.4346C23.4818 21.0715 23.5 20.6385 23.5 20C23.5 19.5858 23.8358 19.25 24.25 19.25Z",fill:"url(#paint3_linear_103584_148917)"}),c.createElement("path",{d:"M16.5 10C17.8468 10 19.0267 10.3456 19.8516 11.2598C20.6609 12.1569 21 13.4626 21 15.0938V21.25C21 21.6642 20.6642 22 20.25 22C19.8358 22 19.5 21.6642 19.5 21.25V20.959C18.6998 21.5588 17.5578 22 16 22C15.6534 22 15.3187 21.9661 15 21.8994V21C15 20.7706 14.9795 20.546 14.9424 20.3272C15.2405 20.4375 15.5913 20.5 16 20.5C17.4573 20.5 18.3334 20.0319 18.8389 19.5615C19.0975 19.3208 19.2693 19.0702 19.374 18.8604C19.4264 18.7553 19.46 18.664 19.4795 18.5947C19.5002 18.521 19.5 18.4902 19.5 18.5V16.0684C19.3218 16.0283 19.1621 15.9603 19.0361 15.8984C18.8982 15.8307 18.7425 15.7426 18.6094 15.6699C18.0734 15.3773 17.3257 15 16 15C15.0161 15 14.4247 15.4254 14.0527 15.96C13.6566 16.5297 13.5 17.2473 13.5 17.75C13.5 17.7946 13.5028 17.8385 13.5039 17.8818C13.0796 17.5407 12.5847 17.2845 12.0439 17.1387C12.1342 16.4934 12.3706 15.7518 12.8223 15.1025C13.4504 14.2 14.4843 13.5 16 13.5C17.6741 13.5 18.6766 13.9977 19.3281 14.3535C19.3828 14.3834 19.4319 14.4086 19.4756 14.4326C19.3955 13.3619 19.1177 12.6842 18.7383 12.2637C18.3014 11.7796 17.6061 11.5 16.5 11.5C15.5111 11.5 14.797 11.5134 14.0303 12.2803C13.7374 12.5731 13.2626 12.5731 12.9697 12.2803C12.6769 11.9874 12.6769 11.5126 12.9697 11.2197C14.2029 9.98642 15.489 10 16.5 10Z",fill:"url(#paint4_linear_103584_148917)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint5_radial_103584_148917)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint6_radial_103584_148917)",fillOpacity:.3}),c.createElement("path",{d:"M10.7227 28H8.83301L7.64648 25.7692C7.60417 25.6911 7.57161 25.6292 7.54883 25.5837C7.5293 25.5349 7.50814 25.4795 7.48535 25.4177H7.46582C7.43652 25.4958 7.40885 25.5593 7.38281 25.6081C7.35677 25.6569 7.32585 25.7171 7.29004 25.7887L6.05957 28H4.27734L6.41602 24.4951L4.42383 21H6.28906L7.34375 22.9916C7.38607 23.073 7.42188 23.1446 7.45117 23.2064C7.48372 23.265 7.51628 23.335 7.54883 23.4163H7.56836C7.61393 23.3219 7.64974 23.2471 7.67578 23.1918C7.70508 23.1364 7.74414 23.0632 7.79297 22.9721L8.88672 21H10.6641L8.64258 24.4414L10.7227 28Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_148917",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_148917",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_148917",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_148917",x1:29.7922,y1:30.5,x2:12.5927,y2:6.95085,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.16806,stopColor:"#15561C"}),c.createElement("stop",{offset:.541154,stopColor:"#15561C"}),c.createElement("stop",{offset:1,stopColor:"#297C2D"})),c.createElement("linearGradient",{id:"paint4_linear_103584_148917",x1:29.7922,y1:30.5,x2:12.5927,y2:6.95085,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.16806,stopColor:"#15561C"}),c.createElement("stop",{offset:.541154,stopColor:"#15561C"}),c.createElement("stop",{offset:1,stopColor:"#297C2D"})),c.createElement("radialGradient",{id:"paint5_radial_103584_148917",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848 52.3364)"},c.createElement("stop",{stopColor:"#20A85E"}),c.createElement("stop",{offset:.94375,stopColor:"#09442A"})),c.createElement("radialGradient",{id:"paint6_radial_103584_148917",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},c.createElement("stop",{offset:.580357,stopColor:"#33A662",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#98F0B0"})))),ype=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_148416)"}),c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint1_radial_103584_148416)"}),c.createElement("path",{d:"M5.5 5C5.5 3.61929 6.61929 2.5 8 2.5H21C24.0376 2.5 26.5 4.96243 26.5 8V27C26.5 28.3807 25.3807 29.5 24 29.5H11C7.96243 29.5 5.5 27.0376 5.5 24V5Z",stroke:"url(#paint2_linear_103584_148416)",strokeLinecap:"round",strokeDasharray:"4 3"}),c.createElement("path",{d:"M22 17V22.5312C21.9998 23.3423 21.3423 23.9998 20.5312 24H15V21C15 19.1461 13.7386 17.5873 12.0273 17.1338L15.5713 13L22 17Z",fill:"url(#paint3_radial_103584_148416)"}),c.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint4_linear_103584_148416)"}),c.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint5_radial_103584_148416)",fillOpacity:.6}),c.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint6_radial_103584_148416)",fillOpacity:.1}),c.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint7_linear_103584_148416)"}),c.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint8_radial_103584_148416)",fillOpacity:.8}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_148416)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint10_radial_103584_148416)",fillOpacity:.65}),c.createElement("path",{d:"M11.6998 21L10.1921 27.9992L8.38988 28L7.4998 23.8L6.56805 28H4.74863L3.2998 21.0008H4.78584L5.6798 25.62L6.56805 21.0008H8.38988L9.3198 25.62L10.1921 21.0008L11.6998 21Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_148416",x1:11.1111,y1:2,x2:15.5764,y2:30.0674,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint1_radial_103584_148416",cx:0,cy:0,r:1,gradientTransform:"matrix(11.6111 22.1667 -17.4167 8.3125 12.0278 9.29167)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint2_linear_103584_148416",x1:12.2813,y1:2.5,x2:16.9026,y2:29.4578,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("radialGradient",{id:"paint3_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(21.4159 23.9997) scale(27.5042 8.52474)"},c.createElement("stop",{offset:.180414,stopColor:"#1657F4"}),c.createElement("stop",{offset:.574542,stopColor:"#0036C4"})),c.createElement("linearGradient",{id:"paint4_linear_103584_148416",x1:10.1071,y1:21.0936,x2:19.1739,y2:21.0936,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#66C0FF"}),c.createElement("stop",{offset:.25606,stopColor:"#0094F0"})),c.createElement("radialGradient",{id:"paint5_radial_103584_148416",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.98381 15.2097 -17.5489 -41.5814 21.9464 13.7445)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.140259,stopColor:"#D471FF"}),c.createElement("stop",{offset:.830508,stopColor:"#509DF5",stopOpacity:0})),c.createElement("radialGradient",{id:"paint6_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.2144 24.1169) rotate(90) scale(13.3025 40.1142)"},c.createElement("stop",{offset:.283333,stopColor:"#4F006F",stopOpacity:0}),c.createElement("stop",{offset:1,stopColor:"#4F006F"})),c.createElement("linearGradient",{id:"paint7_linear_103584_148416",x1:10.1071,y1:12.852,x2:21.9438,y2:13.0288,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#9DEAFF"}),c.createElement("stop",{offset:.201276,stopColor:"#3BD5FF"})),c.createElement("radialGradient",{id:"paint8_radial_103584_148416",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.335 2.92732 -7.10275 -29.8256 21.9464 9.17977)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0606583,stopColor:"#E4A7FE"}),c.createElement("stop",{offset:.538869,stopColor:"#E4A7FE",stopOpacity:0})),c.createElement("radialGradient",{id:"paint9_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},c.createElement("stop",{offset:.0811439,stopColor:"#367AF2"}),c.createElement("stop",{offset:.871875,stopColor:"#001A8F"})),c.createElement("radialGradient",{id:"paint10_radial_103584_148416",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.3715)"},c.createElement("stop",{offset:.586954,stopColor:"#2763E5",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#58AAFE"})))),bpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_148987)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_148987)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_148987)"}),c.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint3_radial_103584_148987)"}),c.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint4_radial_103584_148987)",fillOpacity:.7}),c.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint5_linear_103584_148987)"}),c.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint6_linear_103584_148987)",fillOpacity:.3}),c.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint7_linear_103584_148987)"}),c.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint8_radial_103584_148987)"}),c.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint9_linear_103584_148987)"}),c.createElement("path",{d:"M22 10.25C22 9.55964 21.4404 9 20.75 9H17.25C16.5596 9 16 9.55964 16 10.25V12.75C16 13.4404 16.5596 14 17.25 14H20.75C21.4404 14 22 13.4404 22 12.75V10.25Z",fill:"url(#paint10_radial_103584_148987)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint11_radial_103584_148987)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint12_radial_103584_148987)",fillOpacity:.3}),c.createElement("path",{d:"M10.7227 28H8.83301L7.64648 25.7692C7.60417 25.6911 7.57161 25.6292 7.54883 25.5837C7.5293 25.5349 7.50814 25.4795 7.48535 25.4177H7.46582C7.43652 25.4958 7.40885 25.5593 7.38281 25.6081C7.35677 25.6569 7.32585 25.7171 7.29004 25.7887L6.05957 28H4.27734L6.41602 24.4951L4.42383 21H6.28906L7.34375 22.9916C7.38607 23.073 7.42188 23.1446 7.45117 23.2064C7.48372 23.265 7.51628 23.335 7.54883 23.4163H7.56836C7.61393 23.3219 7.64974 23.2471 7.67578 23.1918C7.70508 23.1364 7.74414 23.0632 7.79297 22.9721L8.88672 21H10.6641L8.64258 24.4414L10.7227 28Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_148987",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_148987",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("radialGradient",{id:"paint3_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.3333 -12.3333 9.54948 -8.77158 22 25)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0647233,stopColor:"#379539"}),c.createElement("stop",{offset:.422149,stopColor:"#297C2D"}),c.createElement("stop",{offset:.703448,stopColor:"#15561C"})),c.createElement("radialGradient",{id:"paint4_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(-4.79167 -4.79167 3.71016 -3.70864 13.6667 16.3333)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#073B10"}),c.createElement("stop",{offset:.992234,stopColor:"#084A13",stopOpacity:0})),c.createElement("linearGradient",{id:"paint5_linear_103584_148987",x1:8.0774,y1:19.6792,x2:15.7988,y2:19.6792,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#52D17C"}),c.createElement("stop",{offset:.328512,stopColor:"#4AA647"})),c.createElement("linearGradient",{id:"paint6_linear_103584_148987",x1:15.6393,y1:14,x2:15.6393,y2:21.8896,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#29852F"}),c.createElement("stop",{offset:.499968,stopColor:"#4AA647",stopOpacity:0})),c.createElement("linearGradient",{id:"paint7_linear_103584_148987",x1:10.2763,y1:17.7979,x2:19.2103,y2:12.4439,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#66D052"}),c.createElement("stop",{offset:1,stopColor:"#85E972"})),c.createElement("radialGradient",{id:"paint8_radial_103584_148987",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.23 13.6212) rotate(-180) scale(3.75784 11.5142)"},c.createElement("stop",{offset:.292495,stopColor:"#4EB43B"}),c.createElement("stop",{offset:1,stopColor:"#72CC61",stopOpacity:0})),c.createElement("linearGradient",{id:"paint9_linear_103584_148987",x1:13.3811,y1:14.0608,x2:10,y2:14.0608,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.183694,stopColor:"#C0E075",stopOpacity:0}),c.createElement("stop",{offset:1,stopColor:"#D1EB95"})),c.createElement("radialGradient",{id:"paint10_radial_103584_148987",cx:0,cy:0,r:1,gradientTransform:"matrix(-5.96857 -5.69975 4.89508 -6.9497 21.9686 14.6997)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.439983,stopColor:"#79E96D"}),c.createElement("stop",{offset:1,stopColor:"#D0EB76"})),c.createElement("radialGradient",{id:"paint11_radial_103584_148987",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848 52.3364)"},c.createElement("stop",{stopColor:"#20A85E"}),c.createElement("stop",{offset:.94375,stopColor:"#09442A"})),c.createElement("radialGradient",{id:"paint12_radial_103584_148987",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},c.createElement("stop",{offset:.580357,stopColor:"#33A662",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#98F0B0"})))),xpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_156665)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_156665)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_156665)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_156665",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_156665",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_156665",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})))),Spe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_157892)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_157892)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_157892)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C19.866 9 23 12.134 23 16C23 19.866 19.866 23 16 23C12.134 23 9 19.866 9 16C9 12.134 12.134 9 16 9ZM17.7096 10.2471C19.1936 10.6874 20.4373 11.6863 21.1973 13H18.7113C18.4854 11.8906 18.1382 10.9418 17.7096 10.2471ZM17.7096 21.7529C19.1936 21.3126 20.4373 20.3137 21.1973 19H18.7113C18.4854 20.1094 18.1382 21.0582 17.7096 21.7529ZM17.6889 19C17.5588 19.586 17.3931 20.1104 17.2022 20.5558C16.9625 21.1151 16.7028 21.5038 16.4653 21.7382C16.2321 21.9683 16.076 22 16 22C15.924 22 15.7679 21.9683 15.5347 21.7382C15.2972 21.5038 15.0375 21.1151 14.7978 20.5558C14.6069 20.1104 14.4412 19.586 14.3111 19H17.6889ZM18.8758 18H21.6586C21.8797 17.3744 22 16.7013 22 16C22 15.2987 21.8797 14.6256 21.6586 14H18.8758C18.9566 14.6337 19 15.305 19 16C19 16.695 18.9566 17.3663 18.8758 18ZM17.8671 14C17.9526 14.6235 18 15.2954 18 16C18 16.7046 17.9526 17.3765 17.8671 18H14.1329C14.0474 17.3765 14 16.7046 14 16C14 15.2954 14.0474 14.6235 14.1329 14H17.8671ZM17.6889 13C17.5588 12.414 17.3931 11.8896 17.2022 11.4442C16.9625 10.8849 16.7028 10.4962 16.4653 10.2618C16.2321 10.0317 16.076 10 16 10C15.924 10 15.7679 10.0317 15.5347 10.2618C15.2972 10.4962 15.0375 10.8849 14.7978 11.4442C14.6069 11.8896 14.4412 12.414 14.3111 13H17.6889ZM13.2887 13C13.5146 11.8906 13.8618 10.9418 14.2904 10.2471C12.8064 10.6874 11.5627 11.6863 10.8027 13H13.2887ZM13.1242 14H10.3414C10.1203 14.6256 10 15.2987 10 16C10 16.7013 10.1203 17.3744 10.3414 18H13.1242C13.0434 17.3663 13 16.695 13 16C13 15.305 13.0434 14.6337 13.1242 14ZM13.2887 19H10.8027C11.5627 20.3137 12.8064 21.3126 14.2904 21.7529C13.8618 21.0582 13.5146 20.1094 13.2887 19Z",fill:"url(#paint3_linear_103584_157892)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_157892",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_157892",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_157892",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_157892",x1:13.2955,y1:10.75,x2:17.3252,y2:22.8327,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),Epe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M11 2C9.34315 2 8 3.34315 8 5C6.34315 5 5 6.34315 5 8V21C5 25.9706 9.02944 30 14 30H21C22.6569 30 24 28.6569 24 27C25.6569 27 27 25.6569 27 24V8C27 4.68629 24.3137 2 21 2H11Z",fill:"url(#paint0_linear_103584_152224)"}),c.createElement("path",{d:"M8 21C8 24.3137 10.6863 27 14 27H23C23 28.1046 22.1046 29 21 29H14C9.58172 29 6 25.4183 6 21V8C6 6.89543 6.89543 6 8 6V21ZM21 3C23.7614 3 26 5.23858 26 8V24C26 25.1046 25.1046 26 24 26H14C11.2386 26 9 23.7614 9 21V5C9 3.89543 9.89543 3 11 3H21Z",fill:"url(#paint1_linear_103584_152224)"}),c.createElement("path",{d:"M8 21C8 24.3137 10.6863 27 14 27H23C23 28.1046 22.1046 29 21 29H14C9.58172 29 6 25.4183 6 21V8C6 6.89543 6.89543 6 8 6V21ZM21 3C23.7614 3 26 5.23858 26 8V24C26 25.1046 25.1046 26 24 26H14C11.2386 26 9 23.7614 9 21V5C9 3.89543 9.89543 3 11 3H21Z",fill:"url(#paint2_radial_103584_152224)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint3_radial_103584_152224)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint4_radial_103584_152224)",fillOpacity:.8}),c.createElement("path",{d:"M10.6494 28H9.05762L6.17188 23.6799C6.09049 23.5497 6.02214 23.4375 5.9668 23.3431C5.91146 23.2455 5.86914 23.1641 5.83984 23.099H5.82031C5.82682 23.2227 5.83171 23.3789 5.83496 23.5676C5.83822 23.7564 5.83984 23.9777 5.83984 24.2315V28H4.35059V21H6.0498L8.82812 25.1834C8.88672 25.2778 8.94369 25.3738 8.99902 25.4714C9.05762 25.5658 9.11133 25.6602 9.16016 25.7545H9.17969C9.17318 25.6732 9.16829 25.5528 9.16504 25.3933C9.16178 25.2306 9.16016 25.0305 9.16016 24.7929V21H10.6494V28Z",fill:"white"}),c.createElement("path",{d:"M23 20.5449C23 21.3484 22.3484 22.0002 21.5449 22L15 21.998V21C15 19.173 13.7749 17.6327 12.1016 17.1543C12.4342 15.9139 13.5638 15 14.9092 15H23V20.5449Z",fill:"url(#paint5_radial_103584_152224)"}),c.createElement("path",{d:"M17 10.7188L23 10.5V15.0455C23 15.8488 22.3488 16.5 21.5455 16.5H17V10.7188Z",fill:"url(#paint6_linear_103584_152224)"}),c.createElement("path",{d:"M21.4443 7C22.3034 7.00009 23 7.69661 23 8.55566V10.9443C23 11.8034 22.3034 12.5 21.4443 12.5H20.5557C19.6966 12.5 19 13.1966 19 14.0557V14.9443C19 15.8034 18.3034 16.5 17.4443 16.5H14.7471C13.9465 16.5 13.2272 16.8435 12.7246 17.3896C12.4935 17.2791 12.2501 17.1899 11.9971 17.125L11.999 9.74902C11.9996 8.23067 13.2316 7.00004 14.75 7H21.4443Z",fill:"url(#paint7_linear_103584_152224)"}),c.createElement("path",{d:"M21.4443 7C22.3034 7.00009 23 7.69661 23 8.55566V10.9443C23 11.8034 22.3034 12.5 21.4443 12.5H20.5557C19.6966 12.5 19 13.1966 19 14.0557V14.9443C19 15.8034 18.3034 16.5 17.4443 16.5H14.7471C13.9465 16.5 13.2272 16.8435 12.7246 17.3896C12.4935 17.2791 12.2501 17.1899 11.9971 17.125L11.999 9.74902C11.9996 8.23067 13.2316 7.00004 14.75 7H21.4443Z",fill:"url(#paint8_radial_103584_152224)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_152224",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_152224",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_152224",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("radialGradient",{id:"paint3_radial_103584_152224",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},c.createElement("stop",{offset:.071875,stopColor:"#AC13EB"}),c.createElement("stop",{offset:.878742,stopColor:"#580087"})),c.createElement("radialGradient",{id:"paint4_radial_103584_152224",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},c.createElement("stop",{offset:.584821,stopColor:"#841FB0",stopOpacity:0}),c.createElement("stop",{offset:.968712,stopColor:"#D373FC"})),c.createElement("radialGradient",{id:"paint5_radial_103584_152224",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(23.621 23) scale(20.6151 9.35577)"},c.createElement("stop",{offset:.158518,stopColor:"#A931D8"}),c.createElement("stop",{offset:.565784,stopColor:"#6E1996"})),c.createElement("linearGradient",{id:"paint6_linear_103584_152224",x1:25.6934,y1:14.3288,x2:18.23,y2:10.6334,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.216532,stopColor:"#CA59F7"}),c.createElement("stop",{offset:.888362,stopColor:"#691A90"})),c.createElement("linearGradient",{id:"paint7_linear_103584_152224",x1:24.5748,y1:10.4292,x2:11.0028,y2:10.4292,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.807408,stopColor:"#DE66FF"}),c.createElement("stop",{offset:1,stopColor:"#FCB1FF"})),c.createElement("radialGradient",{id:"paint8_radial_103584_152224",cx:0,cy:0,r:1,gradientTransform:"matrix(-6.53498 10.8766 -19.1742 -11.0291 24.9349 6.20395)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FFC7A3"}),c.createElement("stop",{offset:.830508,stopColor:"#DE67FD",stopOpacity:0})))),wpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_151909)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_151909)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_151909)"}),c.createElement("path",{d:"M21.5 23C21.7761 23 22 23.2239 22 23.5C22 23.7761 21.7761 24 21.5 24H10.5C10.2239 24 10 23.7761 10 23.5C10 23.2239 10.2239 23 10.5 23H21.5Z",fill:"url(#paint3_linear_103584_151909)"}),c.createElement("path",{d:"M21.5 20C21.7761 20 22 20.2239 22 20.5C22 20.7761 21.7761 21 21.5 21H10.5C10.2239 21 10 20.7761 10 20.5C10 20.2239 10.2239 20 10.5 20H21.5Z",fill:"url(#paint4_linear_103584_151909)"}),c.createElement("path",{d:"M21.5 17C21.7761 17 22 17.2239 22 17.5C22 17.7761 21.7761 18 21.5 18H10.5C10.2239 18 10 17.7761 10 17.5C10 17.2239 10.2239 17 10.5 17H21.5Z",fill:"url(#paint5_linear_103584_151909)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 8C11.7466 8 12.1055 8.06974 12.417 8.29395C12.7541 8.53664 13 8.93704 13 9.5C13 10.063 12.7541 10.4634 12.417 10.7061C12.1055 10.9303 11.7466 11 11.5 11H11V12.5C11 12.7761 10.7761 13 10.5 13C10.2239 13 10 12.7761 10 12.5V8.5L10.0098 8.39941C10.0563 8.17145 10.2583 8 10.5 8H11.5ZM11 10H11.5C11.5866 10 11.7279 9.97017 11.833 9.89453C11.9126 9.83723 12 9.73704 12 9.5C12 9.26296 11.9126 9.16277 11.833 9.10547C11.7279 9.02983 11.5866 9 11.5 9H11V10Z",fill:"#D20112"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 8C16.0928 8 16.7176 8.17579 17.2021 8.59473C17.6985 9.02399 18 9.66792 18 10.5C18 11.3321 17.6985 11.976 17.2021 12.4053C16.7176 12.8242 16.0928 13 15.5 13H14.5C14.2239 13 14 12.7761 14 12.5V8.5L14.0098 8.39941C14.0563 8.17145 14.2583 8 14.5 8H15.5ZM15 12H15.5C15.9071 12 16.2824 11.8788 16.5479 11.6494C16.8014 11.4302 17 11.074 17 10.5C17 9.92596 16.8014 9.56976 16.5479 9.35059C16.2824 9.12122 15.9071 9 15.5 9H15V12Z",fill:"#D20112"}),c.createElement("path",{d:"M21.5 8C21.7761 8 22 8.22386 22 8.5C22 8.77614 21.7761 9 21.5 9H20V10H21C21.2761 10 21.5 10.2239 21.5 10.5C21.5 10.7761 21.2761 11 21 11H20V12.5C20 12.7761 19.7761 13 19.5 13C19.2239 13 19 12.7761 19 12.5V8.5L19.0098 8.39941C19.0563 8.17145 19.2583 8 19.5 8H21.5Z",fill:"#D20112"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_151909",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_151909",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_151909",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_151909",x1:13.875,y1:17,x2:14.4312,y2:24.1512,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#898989"}),c.createElement("stop",{offset:1,stopColor:"#636262"})),c.createElement("linearGradient",{id:"paint4_linear_103584_151909",x1:13.875,y1:17,x2:14.4312,y2:24.1512,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#898989"}),c.createElement("stop",{offset:1,stopColor:"#636262"})),c.createElement("linearGradient",{id:"paint5_linear_103584_151909",x1:13.875,y1:17,x2:14.4312,y2:24.1512,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#898989"}),c.createElement("stop",{offset:1,stopColor:"#636262"})))),Ipe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3 6C3 4.34315 4.34315 3 6 3H23C26.3137 3 29 5.68629 29 9V26C29 27.6569 27.6569 29 26 29H9C5.68629 29 3 26.3137 3 23V6Z",fill:"url(#paint0_linear_103584_156952)"}),c.createElement("path",{d:"M4 6C4 4.89543 4.89543 4 6 4H23C25.7614 4 28 6.23858 28 9V26C28 27.1046 27.1046 28 26 28H9C6.23858 28 4 25.7614 4 23V6Z",fill:"url(#paint1_linear_103584_156952)"}),c.createElement("path",{d:"M4 6C4 4.89543 4.89543 4 6 4H23C25.7614 4 28 6.23858 28 9V26C28 27.1046 27.1046 28 26 28H9C6.23858 28 4 25.7614 4 23V6Z",fill:"url(#paint2_radial_103584_156952)"}),c.createElement("path",{d:"M14.9394 15.0605L9.56142 20.4392C8.61656 21.3842 9.28583 22.9998 10.6221 22.9998H21.3795C22.7159 22.9998 23.3851 21.384 22.4401 20.439L17.0608 15.0604C16.4749 14.4746 15.5252 14.4747 14.9394 15.0605Z",fill:"url(#paint3_linear_103584_156952)"}),c.createElement("circle",{cx:21,cy:11,r:2,fill:"url(#paint4_linear_103584_156952)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_156952",x1:11.3958,y1:3,x2:14.8966,y2:29.2555,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_156952",x1:10.6667,y1:4,x2:13.7026,y2:28.2872,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_156952",cx:0,cy:0,r:1,gradientTransform:"matrix(12.6667 19 -19 7.125 11.6667 10.25)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_156952",x1:9,y1:11.4998,x2:15.5376,y2:29.6106,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint4_linear_103584_156952",x1:19,y1:6.5,x2:23.3454,y2:14.8196,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),_pe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_150141)"}),c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint1_radial_103584_150141)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6C3.89543 6 3 6.89543 3 8V9.85714C3 10.1333 2.77614 10.3571 2.5 10.3571C2.22386 10.3571 2 10.1333 2 9.85714V8C2 6.34315 3.34315 5 5 5H6.80952C7.08567 5 7.30952 5.22386 7.30952 5.5C7.30952 5.77614 7.08567 6 6.80952 6H5ZM9.02381 5.5C9.02381 5.22386 9.24767 5 9.52381 5H13.1429C13.419 5 13.6429 5.22386 13.6429 5.5C13.6429 5.77614 13.419 6 13.1429 6H9.52381C9.24767 6 9.02381 5.77614 9.02381 5.5ZM15.3571 5.5C15.3571 5.22386 15.581 5 15.8571 5H19.4762C19.7523 5 19.9762 5.22386 19.9762 5.5C19.9762 5.77614 19.7523 6 19.4762 6H15.8571C15.581 6 15.3571 5.77614 15.3571 5.5ZM21.6905 5.5C21.6905 5.22386 21.9143 5 22.1905 5H24C24.9321 5 25.8159 5.21289 26.6041 5.59317C26.8528 5.71316 26.9572 6.01205 26.8372 6.26076C26.7172 6.50947 26.4183 6.61382 26.1696 6.49383C25.5139 6.17753 24.7784 6 24 6H22.1905C21.9143 6 21.6905 5.77614 21.6905 5.5ZM28.7392 8.16283C28.988 8.04284 29.2868 8.14719 29.4068 8.3959C29.7871 9.18414 30 10.0679 30 11V12.8571C30 13.1333 29.7761 13.3571 29.5 13.3571C29.2239 13.3571 29 13.1333 29 12.8571V11C29 10.2216 28.8225 9.48606 28.5062 8.83042C28.3862 8.58171 28.4905 8.28282 28.7392 8.16283ZM2.5 12.1429C2.77614 12.1429 3 12.3667 3 12.6429V16.3571C3 16.6333 2.77614 16.8571 2.5 16.8571C2.22386 16.8571 2 16.6333 2 16.3571V12.6429C2 12.3667 2.22386 12.1429 2.5 12.1429ZM29.5 15.1429C29.7761 15.1429 30 15.3667 30 15.6429V19.3571C30 19.6333 29.7761 19.8571 29.5 19.8571C29.2239 19.8571 29 19.6333 29 19.3571V15.6429C29 15.3667 29.2239 15.1429 29.5 15.1429ZM2.5 18.6429C2.77614 18.6429 3 18.8667 3 19.1429V21C3 21.7784 3.17753 22.5139 3.49383 23.1696C3.61382 23.4183 3.50947 23.7172 3.26076 23.8372C3.01205 23.9572 2.71316 23.8528 2.59317 23.6041C2.21289 22.8159 2 21.9321 2 21V19.1429C2 18.8667 2.22386 18.6429 2.5 18.6429ZM29.5 21.6429C29.7761 21.6429 30 21.8667 30 22.1429V24C30 25.6569 28.6569 27 27 27H25.1905C24.9143 27 24.6905 26.7761 24.6905 26.5C24.6905 26.2239 24.9143 26 25.1905 26H27C28.1046 26 29 25.1046 29 24V22.1429C29 21.8667 29.2239 21.6429 29.5 21.6429ZM5.16283 25.7392C5.28282 25.4905 5.58171 25.3862 5.83042 25.5062C6.48606 25.8225 7.22159 26 8 26H9.80952C10.0857 26 10.3095 26.2239 10.3095 26.5C10.3095 26.7761 10.0857 27 9.80952 27H8C7.06791 27 6.18414 26.7871 5.3959 26.4068C5.14719 26.2868 5.04284 25.988 5.16283 25.7392ZM12.0238 26.5C12.0238 26.2239 12.2477 26 12.5238 26H16.1429C16.419 26 16.6429 26.2239 16.6429 26.5C16.6429 26.7761 16.419 27 16.1429 27H12.5238C12.2477 27 12.0238 26.7761 12.0238 26.5ZM18.3571 26.5C18.3571 26.2239 18.581 26 18.8571 26H22.4762C22.7523 26 22.9762 26.2239 22.9762 26.5C22.9762 26.7761 22.7523 27 22.4762 27H18.8571C18.581 27 18.3571 26.7761 18.3571 26.5Z",fill:"url(#paint2_linear_103584_150141)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint3_linear_103584_150141)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint4_radial_103584_150141)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint5_radial_103584_150141)",fillOpacity:.5}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint6_radial_103584_150141)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint7_radial_103584_150141)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint8_radial_103584_150141)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_150141)",fillOpacity:.3}),c.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_150141",x1:9.77778,y1:5,x2:11.9773,y2:27.3951,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint1_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(14.7778 17.4167 -22.1667 6.53125 10.9444 10.7292)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint2_linear_103584_150141",x1:11.2188,y1:5.5,x2:13.4332,y2:26.8537,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint3_linear_103584_150141",x1:15.1255,y1:8.5543,x2:6.54225,y2:16.9404,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0582736,stopColor:"#FF7F48"}),c.createElement("stop",{offset:1,stopColor:"#E5495B"})),c.createElement("radialGradient",{id:"paint4_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(-10.1505 9.93875 -17.0846 -16.7282 18.6769 13.0625)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.151523,stopColor:"#AA1D2D"}),c.createElement("stop",{offset:.380855,stopColor:"#D12B18",stopOpacity:.44}),c.createElement("stop",{offset:.601996,stopColor:"#FF3C00",stopOpacity:0})),c.createElement("radialGradient",{id:"paint5_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(12.3042 -5.69055 10.5289 21.826 6.20639 21.6912)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.4067,stopColor:"#FF66FB"}),c.createElement("stop",{offset:1,stopColor:"#EA3D01",stopOpacity:0})),c.createElement("radialGradient",{id:"paint6_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(6.39204 -7.32044 6.82218 5.68073 15.2277 16.9563)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FD6EF9"}),c.createElement("stop",{offset:.637205,stopColor:"#FF9944"}),c.createElement("stop",{offset:.85186,stopColor:"#FCC479"})),c.createElement("radialGradient",{id:"paint7_radial_103584_150141",cx:0,cy:0,r:1,gradientTransform:"matrix(-0.722024 4.89412 -11.0683 -1.55717 14.5918 9.92427)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.144283,stopColor:"#FF8D13"}),c.createElement("stop",{offset:.537266,stopColor:"#FF7F29",stopOpacity:0})),c.createElement("radialGradient",{id:"paint8_radial_103584_150141",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0.998413 18) rotate(45) scale(18.3848)"},c.createElement("stop",{stopColor:"#F8193E"}),c.createElement("stop",{offset:.939062,stopColor:"#920616"})),c.createElement("radialGradient",{id:"paint9_radial_103584_150141",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.49841 25.8) rotate(90) scale(9.1 10.3594)"},c.createElement("stop",{offset:.575893,stopColor:"#FFB055",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#FFF2BE"})))),Tpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_150063)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_150063)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_150063)"}),c.createElement("path",{d:"M16 18C16.276 18.0002 16.5 18.224 16.5 18.5V22H18.5C18.776 22.0002 19 22.224 19 22.5C19 22.776 18.776 22.9998 18.5 23H15V22H15.5V18.5C15.5 18.2239 15.7239 18 16 18Z",fill:"url(#paint3_linear_103584_150063)"}),c.createElement("path",{d:"M22 17C22 18.1046 21.1046 19 20 19H14.4639C13.7722 17.8046 12.4804 17 11 17H10V10H22V17Z",fill:"url(#paint4_linear_103584_150063)"}),c.createElement("rect",{x:9,y:9,width:14,height:2,rx:1,fill:"url(#paint5_linear_103584_150063)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint6_radial_103584_150063)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint7_radial_103584_150063)",fillOpacity:.3}),c.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_150063",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_150063",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_150063",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_150063",x1:6.50581,y1:9.0599,x2:8.82172,y2:27.9804,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.508018,stopColor:"#FA734C"}),c.createElement("stop",{offset:.725475,stopColor:"#E5495B"}),c.createElement("stop",{offset:.872732,stopColor:"#AA1D2D"})),c.createElement("linearGradient",{id:"paint4_linear_103584_150063",x1:20,y1:10,x2:16,y2:22.5,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.103189,stopColor:"#FFA05C"}),c.createElement("stop",{offset:.76658,stopColor:"#FDB567"})),c.createElement("linearGradient",{id:"paint5_linear_103584_150063",x1:14,y1:5,x2:16,y2:14,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.297917,stopColor:"#FF7F48"}),c.createElement("stop",{offset:.579167,stopColor:"#E5495B"}),c.createElement("stop",{offset:.889583,stopColor:"#AA1D2D"})),c.createElement("radialGradient",{id:"paint6_radial_103584_150063",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0.998413 18) rotate(45) scale(18.3848)"},c.createElement("stop",{stopColor:"#F8193E"}),c.createElement("stop",{offset:.939062,stopColor:"#920616"})),c.createElement("radialGradient",{id:"paint7_radial_103584_150063",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.49841 25.8) rotate(90) scale(9.1 10.3594)"},c.createElement("stop",{offset:.575893,stopColor:"#FFB055",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#FFF2BE"})))),Ape=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_150212)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_150212)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_150212)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint3_linear_103584_150212)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint4_radial_103584_150212)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9998 19.8672 19.8659 23.001 16 23.001C15.6604 23.001 15.3267 22.9755 15 22.9287V21C15 18.7909 13.2091 17 11 17H9.07227C9.02561 16.6736 9.00002 16.3402 9 16.001C9 12.1346 12.134 9 16 9Z",fill:"url(#paint5_radial_103584_150212)",fillOpacity:.5}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint6_radial_103584_150212)"}),c.createElement("path",{d:"M16 9C19.866 9 23 12.1346 23 16.001C22.9999 17.2831 22.6525 18.4831 22.0508 19.5166L22.1621 19.2725C22.8546 17.7349 21.7302 15.9952 20.0439 15.9951H17.248C16.5554 15.995 15.9945 15.4329 15.9951 14.7402L15.9971 11.958C15.9983 10.2697 14.2553 9.14358 12.7168 9.83887L12.5098 9.93262C13.5373 9.34019 14.7287 9.00001 16 9Z",fill:"url(#paint7_radial_103584_150212)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint8_radial_103584_150212)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_150212)",fillOpacity:.3}),c.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_150212",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_150212",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_150212",x1:15.1255,y1:8.5543,x2:6.54225,y2:16.9404,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0582736,stopColor:"#FF7F48"}),c.createElement("stop",{offset:1,stopColor:"#E5495B"})),c.createElement("radialGradient",{id:"paint4_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(-10.1505 9.93875 -17.0846 -16.7282 18.6769 13.0625)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.151523,stopColor:"#AA1D2D"}),c.createElement("stop",{offset:.380855,stopColor:"#D12B18",stopOpacity:.44}),c.createElement("stop",{offset:.601996,stopColor:"#FF3C00",stopOpacity:0})),c.createElement("radialGradient",{id:"paint5_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(12.3042 -5.69055 10.5289 21.826 6.20639 21.6912)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.4067,stopColor:"#FF66FB"}),c.createElement("stop",{offset:1,stopColor:"#EA3D01",stopOpacity:0})),c.createElement("radialGradient",{id:"paint6_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(6.39204 -7.32044 6.82218 5.68073 15.2277 16.9563)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FD6EF9"}),c.createElement("stop",{offset:.637205,stopColor:"#FF9944"}),c.createElement("stop",{offset:.85186,stopColor:"#FCC479"})),c.createElement("radialGradient",{id:"paint7_radial_103584_150212",cx:0,cy:0,r:1,gradientTransform:"matrix(-0.722024 4.89412 -11.0683 -1.55717 14.5918 9.92427)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.144283,stopColor:"#FF8D13"}),c.createElement("stop",{offset:.537266,stopColor:"#FF7F29",stopOpacity:0})),c.createElement("radialGradient",{id:"paint8_radial_103584_150212",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0.998413 18) rotate(45) scale(18.3848)"},c.createElement("stop",{stopColor:"#F8193E"}),c.createElement("stop",{offset:.939062,stopColor:"#920616"})),c.createElement("radialGradient",{id:"paint9_radial_103584_150212",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.49841 25.8) rotate(90) scale(9.1 10.3594)"},c.createElement("stop",{offset:.575893,stopColor:"#FFB055",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#FFF2BE"})))),kpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_149982)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_149982)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_149982)"}),c.createElement("path",{d:"M17 9C17.5523 9 18 9.44772 18 10V14L13.7168 14.9521C13.574 14.9838 13.426 14.9838 13.2832 14.9521L9 14V10C9 9.44772 9.44772 9 10 9H17Z",fill:"#33C481"}),c.createElement("path",{d:"M20 14C20.5523 14 21 14.4477 21 15V18L17 19L13.8721 18.2178C13.145 17.4673 12.1274 17 11 17H9V14H20Z",fill:"#21A366"}),c.createElement("path",{d:"M22 18C22.5523 18 23 18.4477 23 19V22C23 22.5523 22.5523 23 22 23H15V21C15 19.805 14.4754 18.733 13.6445 18H22Z",fill:"#185C37"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"#107C41"}),c.createElement("path",{d:"M7.01855 25.7204V28H5.44141V21H7.87793C8.75033 21 9.41439 21.1904 9.87012 21.5711C10.3291 21.9519 10.5586 22.5165 10.5586 23.265C10.5586 24.0363 10.3014 24.6383 9.78711 25.0711C9.27604 25.504 8.58919 25.7204 7.72656 25.7204H7.01855ZM7.01855 22.2106V24.5098H7.67773C8.06836 24.5098 8.36947 24.4073 8.58105 24.2022C8.79264 23.9972 8.89844 23.7027 8.89844 23.3187C8.89844 22.964 8.79427 22.6906 8.58594 22.4986C8.38086 22.3066 8.08626 22.2106 7.70215 22.2106H7.01855Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_149982",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_149982",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_149982",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})))),Mpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_157128)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_157128)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_157128)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4617 8.30769C13.384 8.12137 13.202 8 13.0001 8C12.7983 8 12.6162 8.12137 12.5386 8.30769L10.0386 14.3077C9.93238 14.5626 10.0529 14.8553 10.3078 14.9615C10.5627 15.0677 10.8555 14.9472 10.9617 14.6923L11.6668 13H14.3335L15.0386 14.6923C15.1448 14.9472 15.4375 15.0677 15.6924 14.9615C15.9473 14.8553 16.0679 14.5626 15.9617 14.3077L13.4617 8.30769ZM13.0001 9.8L13.9168 12H12.0835L13.0001 9.8Z",fill:"url(#paint3_linear_103584_157128)"}),c.createElement("path",{d:"M17.5001 11C17.224 11 17.0001 11.2239 17.0001 11.5C17.0001 11.7761 17.224 12 17.5001 12H21.5001C21.7763 12 22.0001 11.7761 22.0001 11.5C22.0001 11.2239 21.7763 11 21.5001 11H17.5001Z",fill:"url(#paint4_linear_103584_157128)"}),c.createElement("path",{d:"M17.5001 14C17.224 14 17.0001 14.2239 17.0001 14.5C17.0001 14.7761 17.224 15 17.5001 15H21.5001C21.7763 15 22.0001 14.7761 22.0001 14.5C22.0001 14.2239 21.7763 14 21.5001 14H17.5001Z",fill:"url(#paint5_linear_103584_157128)"}),c.createElement("path",{d:"M10.5001 17C10.224 17 10.0001 17.2239 10.0001 17.5C10.0001 17.7761 10.224 18 10.5001 18H21.5001C21.7763 18 22.0001 17.7761 22.0001 17.5C22.0001 17.2239 21.7763 17 21.5001 17H10.5001Z",fill:"url(#paint6_linear_103584_157128)"}),c.createElement("path",{d:"M10.5001 20C10.224 20 10.0001 20.2239 10.0001 20.5C10.0001 20.7761 10.224 21 10.5001 21H14.5001C14.7763 21 15.0001 20.7761 15.0001 20.5C15.0001 20.2239 14.7763 20 14.5001 20H10.5001Z",fill:"url(#paint7_linear_103584_157128)"}),c.createElement("path",{d:"M10.5001 23C10.224 23 10.0001 23.2239 10.0001 23.5C10.0001 23.7761 10.224 24 10.5001 24H14.5001C14.7763 24 15.0001 23.7761 15.0001 23.5C15.0001 23.2239 14.7763 23 14.5001 23H10.5001Z",fill:"url(#paint8_linear_103584_157128)"}),c.createElement("path",{d:"M17.0001 20C16.4478 20 16.0001 20.4477 16.0001 21V23C16.0001 23.5523 16.4478 24 17.0001 24H21.0001C21.5524 24 22.0001 23.5523 22.0001 23V21C22.0001 20.4477 21.5524 20 21.0001 20H17.0001Z",fill:"url(#paint9_linear_103584_157128)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_157128",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_157128",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_157128",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint4_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint5_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint6_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint7_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint8_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint9_linear_103584_157128",x1:10,y1:2,x2:21.5,y2:28,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),Npe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H8.5C6.567 30 5 28.433 5 26.5V5Z",fill:"url(#paint0_linear_103584_148750)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3H21C23.7614 3 26 5.23859 26 8V21C26 22.1046 25.1046 23 24 23H8.5C7.52066 23 6.63525 23.4022 6 24.0505V5C6 3.89542 6.89543 3 8 3ZM6 26.5C6 27.8807 7.11929 29 8.5 29H24C25.1046 29 26 28.1046 26 27V26.2361C25.4692 26.7112 24.7684 27 24 27H8.5C8.22386 27 8 26.7762 8 26.5C8 26.2238 8.22386 26 8.5 26H24C25.1046 26 26 25.1046 26 24V23.2361C25.4692 23.7112 24.7684 24 24 24H8.5C7.11929 24 6 25.1193 6 26.5Z",fill:"url(#paint1_linear_103584_148750)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 3H21C23.7614 3 26 5.23859 26 8V21C26 22.1046 25.1046 23 24 23H8.5C7.52066 23 6.63525 23.4022 6 24.0505V5C6 3.89542 6.89543 3 8 3ZM6 26.5C6 27.8807 7.11929 29 8.5 29H24C25.1046 29 26 28.1046 26 27V26.2361C25.4692 26.7112 24.7684 27 24 27H8.5C8.22386 27 8 26.7762 8 26.5C8 26.2238 8.22386 26 8.5 26H24C25.1046 26 26 25.1046 26 24V23.2361C25.4692 23.7112 24.7684 24 24 24H8.5C7.11929 24 6 25.1193 6 26.5Z",fill:"url(#paint2_radial_103584_148750)"}),c.createElement("path",{d:"M21 18.5449C21 19.3484 20.3484 20.0002 19.5449 20L14.873 19.998C14.4283 18.2739 12.8631 17 11 17H10V16.7842C10 15.1775 11.3025 13.875 12.9092 13.875H21V18.5449Z",fill:"url(#paint3_radial_103584_148750)"}),c.createElement("path",{d:"M15.9231 9.25391L21 9.0625V14.0455C21 14.8488 20.3488 15.5 19.5455 15.5H15.9231V9.25391Z",fill:"url(#paint4_linear_103584_148750)"}),c.createElement("path",{d:"M19.4443 6C20.3034 6.00003 21 6.69658 21 7.55566V9.44434C21 10.3035 20.3034 11 19.4443 11H19.1377C18.272 11.0002 17.5733 11.7075 17.583 12.5732L17.5977 13.9268C17.6073 14.7926 16.9079 15.5 16.042 15.5H12.25C11.2708 15.5 10.4401 16.1266 10.1309 17H10L10.002 8.74902C10.0025 7.23065 11.2335 6 12.752 6H19.4443Z",fill:"url(#paint5_linear_103584_148750)"}),c.createElement("path",{d:"M19.4443 6C20.3034 6.00003 21 6.69658 21 7.55566V9.44434C21 10.3035 20.3034 11 19.4443 11H19.1377C18.272 11.0002 17.5733 11.7075 17.583 12.5732L17.5977 13.9268C17.6073 14.7926 16.9079 15.5 16.042 15.5H12.25C11.2708 15.5 10.4401 16.1266 10.1309 17H10L10.002 8.74902C10.0025 7.23065 11.2335 6 12.752 6H19.4443Z",fill:"url(#paint6_radial_103584_148750)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint7_radial_103584_148750)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint8_radial_103584_148750)",fillOpacity:.8}),c.createElement("path",{d:"M10.6494 28H9.05762L6.17188 23.6799C6.09049 23.5497 6.02214 23.4375 5.9668 23.3431C5.91146 23.2455 5.86914 23.1641 5.83984 23.099H5.82031C5.82682 23.2227 5.83171 23.3789 5.83496 23.5676C5.83822 23.7564 5.83984 23.9777 5.83984 24.2315V28H4.35059V21H6.0498L8.82812 25.1834C8.88672 25.2778 8.94369 25.3738 8.99902 25.4714C9.05762 25.5658 9.11133 25.6602 9.16016 25.7545H9.17969C9.17318 25.6732 9.16829 25.5528 9.16504 25.3933C9.16178 25.2306 9.16016 25.0305 9.16016 24.7929V21H10.6494V28Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_148750",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_148750",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_148750",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("radialGradient",{id:"paint3_radial_103584_148750",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.6793 20) scale(17.4436 8.1863)"},c.createElement("stop",{offset:.158518,stopColor:"#A931D8"}),c.createElement("stop",{offset:.565784,stopColor:"#6E1996"})),c.createElement("linearGradient",{id:"paint4_linear_103584_148750",x1:23.2791,y1:12.4127,x2:16.8822,y2:9.34981,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.216532,stopColor:"#CA59F7"}),c.createElement("stop",{offset:.888362,stopColor:"#691A90"})),c.createElement("linearGradient",{id:"paint5_linear_103584_148750",x1:21.4864,y1:9.20518,x2:10.0024,y2:9.20518,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.807408,stopColor:"#DE66FF"}),c.createElement("stop",{offset:1,stopColor:"#FCB1FF"})),c.createElement("radialGradient",{id:"paint6_radial_103584_148750",cx:0,cy:0,r:1,gradientTransform:"matrix(-5.5296 10.1659 -16.2243 -10.3085 21.7912 5.25597)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FFC7A3"}),c.createElement("stop",{offset:.830508,stopColor:"#DE67FD",stopOpacity:0})),c.createElement("radialGradient",{id:"paint7_radial_103584_148750",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},c.createElement("stop",{offset:.071875,stopColor:"#AC13EB"}),c.createElement("stop",{offset:.878742,stopColor:"#580087"})),c.createElement("radialGradient",{id:"paint8_radial_103584_148750",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},c.createElement("stop",{offset:.584821,stopColor:"#841FB0",stopOpacity:0}),c.createElement("stop",{offset:.968712,stopColor:"#D373FC"})))),Rpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_157341)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_157341)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_157341)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 8.5C10 8.22386 10.2239 8 10.5 8H21.5C21.7761 8 22 8.22386 22 8.5C22 8.77614 21.7761 9 21.5 9H10.5C10.2239 9 10 8.77614 10 8.5ZM10 11.5C10 11.2239 10.2239 11 10.5 11H21.5C21.7761 11 22 11.2239 22 11.5C22 11.7761 21.7761 12 21.5 12H10.5C10.2239 12 10 11.7761 10 11.5ZM10 14.5C10 14.2239 10.2239 14 10.5 14H21.5C21.7761 14 22 14.2239 22 14.5C22 14.7761 21.7761 15 21.5 15H10.5C10.2239 15 10 14.7761 10 14.5ZM10 17.5C10 17.2239 10.2239 17 10.5 17H21.5C21.7761 17 22 17.2239 22 17.5C22 17.7761 21.7761 18 21.5 18H10.5C10.2239 18 10 17.7761 10 17.5ZM10 20.5C10 20.2239 10.2239 20 10.5 20H21.5C21.7761 20 22 20.2239 22 20.5C22 20.7761 21.7761 21 21.5 21H10.5C10.2239 21 10 20.7761 10 20.5ZM10 23.5C10 23.2239 10.2239 23 10.5 23H21.5C21.7761 23 22 23.2239 22 23.5C22 23.7761 21.7761 24 21.5 24H10.5C10.2239 24 10 23.7761 10 23.5Z",fill:"url(#paint3_linear_103584_157341)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_157341",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_157341",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_157341",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_157341",x1:13.6818,y1:10,x2:19.3789,y2:22.8113,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})))),Ppe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5 5C5 3.34315 6.34315 2 8 2H21C24.3137 2 27 4.68629 27 8V27C27 28.6569 25.6569 30 24 30H11C7.68629 30 5 27.3137 5 24V5Z",fill:"url(#paint0_linear_103584_148497)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint1_linear_103584_148497)"}),c.createElement("path",{d:"M6 5C6 3.89543 6.89543 3 8 3H21C23.7614 3 26 5.23858 26 8V27C26 28.1046 25.1046 29 24 29H11C8.23858 29 6 26.7614 6 24V5Z",fill:"url(#paint2_radial_103584_148497)"}),c.createElement("path",{d:"M22 17V22.5312C21.9998 23.3423 21.3423 23.9998 20.5312 24H15V21C15 19.1461 13.7386 17.5873 12.0273 17.1338L15.5713 13L22 17Z",fill:"url(#paint3_radial_103584_148497)"}),c.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint4_linear_103584_148497)"}),c.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint5_radial_103584_148497)",fillOpacity:.6}),c.createElement("path",{d:"M22 17.0312C21.9998 17.8423 21.3423 18.4998 20.5312 18.5H14.1211C13.388 17.586 12.2628 17 11 17H10V14.6992C10 13.6604 10.8391 12.8158 11.8779 12.8096L20.7334 12.7568L22 12V17.0312Z",fill:"url(#paint6_radial_103584_148497)",fillOpacity:.1}),c.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint7_linear_103584_148497)"}),c.createElement("path",{d:"M20.5312 8C21.3423 8.00021 21.9998 8.65767 22 9.46875V12.0312C21.9998 12.8423 21.3423 13.4998 20.5312 13.5H12.4551C11.0993 13.5 10 14.5993 10 15.9551V10.5186C10 9.12762 11.1276 8 12.5186 8H20.5312Z",fill:"url(#paint8_radial_103584_148497)",fillOpacity:.8}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint9_radial_103584_148497)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint10_radial_103584_148497)",fillOpacity:.65}),c.createElement("path",{d:"M11.6998 21L10.1921 27.9992L8.38988 28L7.4998 23.8L6.56805 28H4.74863L3.2998 21.0008H4.78584L5.6798 25.62L6.56805 21.0008H8.38988L9.3198 25.62L10.1921 21.0008L11.6998 21Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_148497",x1:12.1042,y1:2,x2:16.851,y2:29.9723,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_148497",x1:11.5556,y1:3,x2:15.7862,y2:29.0347,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_148497",cx:0,cy:0,r:1,gradientTransform:"matrix(10.5556 20.5833 -15.8333 7.71875 12.3889 9.77083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("radialGradient",{id:"paint3_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(21.4159 23.9997) scale(27.5042 8.52474)"},c.createElement("stop",{offset:.180414,stopColor:"#1657F4"}),c.createElement("stop",{offset:.574542,stopColor:"#0036C4"})),c.createElement("linearGradient",{id:"paint4_linear_103584_148497",x1:10.1071,y1:21.0936,x2:19.1739,y2:21.0936,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#66C0FF"}),c.createElement("stop",{offset:.25606,stopColor:"#0094F0"})),c.createElement("radialGradient",{id:"paint5_radial_103584_148497",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.98381 15.2097 -17.5489 -41.5814 21.9464 13.7445)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.140259,stopColor:"#D471FF"}),c.createElement("stop",{offset:.830508,stopColor:"#509DF5",stopOpacity:0})),c.createElement("radialGradient",{id:"paint6_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.2144 24.1169) rotate(90) scale(13.3025 40.1142)"},c.createElement("stop",{offset:.283333,stopColor:"#4F006F",stopOpacity:0}),c.createElement("stop",{offset:1,stopColor:"#4F006F"})),c.createElement("linearGradient",{id:"paint7_linear_103584_148497",x1:10.1071,y1:12.852,x2:21.9438,y2:13.0288,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#9DEAFF"}),c.createElement("stop",{offset:.201276,stopColor:"#3BD5FF"})),c.createElement("radialGradient",{id:"paint8_radial_103584_148497",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.335 2.92732 -7.10275 -29.8256 21.9464 9.17977)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0606583,stopColor:"#E4A7FE"}),c.createElement("stop",{offset:.538869,stopColor:"#E4A7FE",stopOpacity:0})),c.createElement("radialGradient",{id:"paint9_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848)"},c.createElement("stop",{offset:.0811439,stopColor:"#367AF2"}),c.createElement("stop",{offset:.871875,stopColor:"#001A8F"})),c.createElement("radialGradient",{id:"paint10_radial_103584_148497",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.3715)"},c.createElement("stop",{offset:.586954,stopColor:"#2763E5",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#58AAFE"})))),Lpe=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_148835)"}),c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint1_radial_103584_148835)"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6C3.89543 6 3 6.89543 3 8V9.85714C3 10.1333 2.77614 10.3571 2.5 10.3571C2.22386 10.3571 2 10.1333 2 9.85714V8C2 6.34315 3.34315 5 5 5H6.80952C7.08567 5 7.30952 5.22386 7.30952 5.5C7.30952 5.77614 7.08567 6 6.80952 6H5ZM9.02381 5.5C9.02381 5.22386 9.24767 5 9.52381 5H13.1429C13.419 5 13.6429 5.22386 13.6429 5.5C13.6429 5.77614 13.419 6 13.1429 6H9.52381C9.24767 6 9.02381 5.77614 9.02381 5.5ZM15.3571 5.5C15.3571 5.22386 15.581 5 15.8571 5H19.4762C19.7523 5 19.9762 5.22386 19.9762 5.5C19.9762 5.77614 19.7523 6 19.4762 6H15.8571C15.581 6 15.3571 5.77614 15.3571 5.5ZM21.6905 5.5C21.6905 5.22386 21.9143 5 22.1905 5H24C24.9321 5 25.8159 5.21289 26.6041 5.59317C26.8528 5.71316 26.9572 6.01205 26.8372 6.26076C26.7172 6.50947 26.4183 6.61382 26.1696 6.49383C25.5139 6.17753 24.7784 6 24 6H22.1905C21.9143 6 21.6905 5.77614 21.6905 5.5ZM28.7392 8.16283C28.988 8.04284 29.2868 8.14719 29.4068 8.3959C29.7871 9.18414 30 10.0679 30 11V12.8571C30 13.1333 29.7761 13.3571 29.5 13.3571C29.2239 13.3571 29 13.1333 29 12.8571V11C29 10.2216 28.8225 9.48606 28.5062 8.83042C28.3862 8.58171 28.4905 8.28282 28.7392 8.16283ZM2.5 12.1429C2.77614 12.1429 3 12.3667 3 12.6429V16.3571C3 16.6333 2.77614 16.8571 2.5 16.8571C2.22386 16.8571 2 16.6333 2 16.3571V12.6429C2 12.3667 2.22386 12.1429 2.5 12.1429ZM29.5 15.1429C29.7761 15.1429 30 15.3667 30 15.6429V19.3571C30 19.6333 29.7761 19.8571 29.5 19.8571C29.2239 19.8571 29 19.6333 29 19.3571V15.6429C29 15.3667 29.2239 15.1429 29.5 15.1429ZM2.5 18.6429C2.77614 18.6429 3 18.8667 3 19.1429V21C3 21.7784 3.17753 22.5139 3.49383 23.1696C3.61382 23.4183 3.50947 23.7172 3.26076 23.8372C3.01205 23.9572 2.71316 23.8528 2.59317 23.6041C2.21289 22.8159 2 21.9321 2 21V19.1429C2 18.8667 2.22386 18.6429 2.5 18.6429ZM29.5 21.6429C29.7761 21.6429 30 21.8667 30 22.1429V24C30 25.6569 28.6569 27 27 27H25.1905C24.9143 27 24.6905 26.7761 24.6905 26.5C24.6905 26.2239 24.9143 26 25.1905 26H27C28.1046 26 29 25.1046 29 24V22.1429C29 21.8667 29.2239 21.6429 29.5 21.6429ZM5.16283 25.7392C5.28282 25.4905 5.58171 25.3862 5.83042 25.5062C6.48606 25.8225 7.22159 26 8 26H9.80952C10.0857 26 10.3095 26.2239 10.3095 26.5C10.3095 26.7761 10.0857 27 9.80952 27H8C7.06791 27 6.18414 26.7871 5.3959 26.4068C5.14719 26.2868 5.04284 25.988 5.16283 25.7392ZM12.0238 26.5C12.0238 26.2239 12.2477 26 12.5238 26H16.1429C16.419 26 16.6429 26.2239 16.6429 26.5C16.6429 26.7761 16.419 27 16.1429 27H12.5238C12.2477 27 12.0238 26.7761 12.0238 26.5ZM18.3571 26.5C18.3571 26.2239 18.581 26 18.8571 26H22.4762C22.7523 26 22.9762 26.2239 22.9762 26.5C22.9762 26.7761 22.7523 27 22.4762 27H18.8571C18.581 27 18.3571 26.7761 18.3571 26.5Z",fill:"url(#paint2_linear_103584_148835)"}),c.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint3_radial_103584_148835)"}),c.createElement("path",{d:"M22 22.75C22 23.4404 21.4404 24 20.75 24H15V21C15 18.7909 13.2091 17 11 17H10V13.875C10 12.8395 10.8395 12 11.875 12H22V22.75Z",fill:"url(#paint4_radial_103584_148835)",fillOpacity:.7}),c.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint5_linear_103584_148835)"}),c.createElement("path",{d:"M17.248 14C16.5589 14 16 14.5589 16 15.248V17.2471C16 17.9385 15.4385 18.4986 14.7471 18.4971L14.1172 18.4951C13.384 17.5839 12.2606 17 11 17H10V15.875C10 14.8395 10.8395 14 11.875 14H17.248Z",fill:"url(#paint6_linear_103584_148835)",fillOpacity:.3}),c.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint7_linear_103584_148835)"}),c.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint8_radial_103584_148835)"}),c.createElement("path",{d:"M17.5 14H12.3438C11.0493 14 10 15.0493 10 16.3438V11.5C10 10.1193 11.1193 9 12.5 9H17.5V14Z",fill:"url(#paint9_linear_103584_148835)"}),c.createElement("path",{d:"M22 10.25C22 9.55964 21.4404 9 20.75 9H17.25C16.5596 9 16 9.55964 16 10.25V12.75C16 13.4404 16.5596 14 17.25 14H20.75C21.4404 14 22 13.4404 22 12.75V10.25Z",fill:"url(#paint10_radial_103584_148835)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint11_radial_103584_148835)"}),c.createElement("rect",{x:1,y:18,width:13,height:13,rx:3,fill:"url(#paint12_radial_103584_148835)",fillOpacity:.3}),c.createElement("path",{d:"M10.7227 28H8.83301L7.64648 25.7692C7.60417 25.6911 7.57161 25.6292 7.54883 25.5837C7.5293 25.5349 7.50814 25.4795 7.48535 25.4177H7.46582C7.43652 25.4958 7.40885 25.5593 7.38281 25.6081C7.35677 25.6569 7.32585 25.7171 7.29004 25.7887L6.05957 28H4.27734L6.41602 24.4951L4.42383 21H6.28906L7.34375 22.9916C7.38607 23.073 7.42188 23.1446 7.45117 23.2064C7.48372 23.265 7.51628 23.335 7.54883 23.4163H7.56836C7.61393 23.3219 7.64974 23.2471 7.67578 23.1918C7.70508 23.1364 7.74414 23.0632 7.79297 22.9721L8.88672 21H10.6641L8.64258 24.4414L10.7227 28Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_148835",x1:9.77778,y1:5,x2:11.9773,y2:27.3951,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint1_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(14.7778 17.4167 -22.1667 6.53125 10.9444 10.7292)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint2_linear_103584_148835",x1:11.2188,y1:5.5,x2:13.4332,y2:26.8537,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("radialGradient",{id:"paint3_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(-11.3333 -12.3333 9.54948 -8.77158 22 25)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.0647233,stopColor:"#379539"}),c.createElement("stop",{offset:.422149,stopColor:"#297C2D"}),c.createElement("stop",{offset:.703448,stopColor:"#15561C"})),c.createElement("radialGradient",{id:"paint4_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(-4.79167 -4.79167 3.71016 -3.70864 13.6667 16.3333)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#073B10"}),c.createElement("stop",{offset:.992234,stopColor:"#084A13",stopOpacity:0})),c.createElement("linearGradient",{id:"paint5_linear_103584_148835",x1:8.0774,y1:19.6792,x2:15.7988,y2:19.6792,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#52D17C"}),c.createElement("stop",{offset:.328512,stopColor:"#4AA647"})),c.createElement("linearGradient",{id:"paint6_linear_103584_148835",x1:15.6393,y1:14,x2:15.6393,y2:21.8896,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#29852F"}),c.createElement("stop",{offset:.499968,stopColor:"#4AA647",stopOpacity:0})),c.createElement("linearGradient",{id:"paint7_linear_103584_148835",x1:10.2763,y1:17.7979,x2:19.2103,y2:12.4439,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#66D052"}),c.createElement("stop",{offset:1,stopColor:"#85E972"})),c.createElement("radialGradient",{id:"paint8_radial_103584_148835",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.23 13.6212) rotate(-180) scale(3.75784 11.5142)"},c.createElement("stop",{offset:.292495,stopColor:"#4EB43B"}),c.createElement("stop",{offset:1,stopColor:"#72CC61",stopOpacity:0})),c.createElement("linearGradient",{id:"paint9_linear_103584_148835",x1:13.3811,y1:14.0608,x2:10,y2:14.0608,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.183694,stopColor:"#C0E075",stopOpacity:0}),c.createElement("stop",{offset:1,stopColor:"#D1EB95"})),c.createElement("radialGradient",{id:"paint10_radial_103584_148835",cx:0,cy:0,r:1,gradientTransform:"matrix(-5.96857 -5.69975 4.89508 -6.9497 21.9686 14.6997)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.439983,stopColor:"#79E96D"}),c.createElement("stop",{offset:1,stopColor:"#D0EB76"})),c.createElement("radialGradient",{id:"paint11_radial_103584_148835",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1 18) rotate(45) scale(18.3848 52.3364)"},c.createElement("stop",{stopColor:"#20A85E"}),c.createElement("stop",{offset:.94375,stopColor:"#09442A"})),c.createElement("radialGradient",{id:"paint12_radial_103584_148835",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.5 25.8) rotate(90) scale(9.1 10.4813)"},c.createElement("stop",{offset:.580357,stopColor:"#33A662",stopOpacity:0}),c.createElement("stop",{offset:.973806,stopColor:"#98F0B0"})))),Ope=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 8C2 6.34315 3.34315 5 5 5H24C27.3137 5 30 7.68629 30 11V24C30 25.6569 28.6569 27 27 27H8C4.68629 27 2 24.3137 2 21V8Z",fill:"url(#paint0_linear_103584_157556)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint1_linear_103584_157556)"}),c.createElement("path",{d:"M3 8C3 6.89543 3.89543 6 5 6H24C26.7614 6 29 8.23858 29 11V24C29 25.1046 28.1046 26 27 26H8C5.23858 26 3 23.7614 3 21V8Z",fill:"url(#paint2_radial_103584_157556)"}),c.createElement("path",{d:"M14.9 10.2C14.7709 10.0279 14.5461 9.95763 14.3419 10.0257C14.1377 10.0937 14 10.2848 14 10.5V14.5C14 14.7762 14.2239 15 14.5 15C14.7761 15 15 14.7762 15 14.5V12L15.6 12.8C15.6944 12.9259 15.8426 13 16 13C16.1574 13 16.3056 12.9259 16.4 12.8L17 12V14.5C17 14.7762 17.2239 15 17.5 15C17.7761 15 18 14.7762 18 14.5V10.5C18 10.2848 17.8623 10.0937 17.6581 10.0257C17.4539 9.95763 17.2291 10.0279 17.1 10.2L16 11.6667L14.9 10.2Z",fill:"url(#paint3_linear_103584_157556)"}),c.createElement("path",{d:"M8.5 18.0001C8.22386 18.0001 8 18.2239 8 18.5001C8 18.7762 8.22386 19.0001 8.5 19.0001H23.5C23.7761 19.0001 24 18.7762 24 18.5001C24 18.2239 23.7761 18.0001 23.5 18.0001H8.5Z",fill:"url(#paint4_linear_103584_157556)"}),c.createElement("path",{d:"M8.5 21.0001C8.22386 21.0001 8 21.2239 8 21.5001C8 21.7762 8.22386 22.0001 8.5 22.0001H23.5C23.7761 22.0001 24 21.7762 24 21.5001C24 21.2239 23.7761 21.0001 23.5 21.0001H8.5Z",fill:"url(#paint5_linear_103584_157556)"}),c.createElement("path",{d:"M19.5 10C19.7761 10 20 10.2239 20 10.5V14H21.5C21.7761 14 22 14.2239 22 14.5C22 14.7762 21.7761 15 21.5 15H19.5C19.2239 15 19 14.7762 19 14.5V10.5C19 10.2239 19.2239 10 19.5 10Z",fill:"url(#paint6_linear_103584_157556)"}),c.createElement("path",{d:"M10.9472 10.2765C10.8237 10.0296 10.5234 9.92945 10.2764 10.0529C10.0294 10.1764 9.92929 10.4768 10.0528 10.7238L10.941 12.5002L10.0528 14.2765C9.92929 14.5235 10.0294 14.8239 10.2764 14.9474C10.5234 15.0709 10.8237 14.9708 10.9472 14.7238L11.5 13.6182L12.0528 14.7238C12.1763 14.9708 12.4766 15.0709 12.7236 14.9474C12.9706 14.8239 13.0707 14.5235 12.9472 14.2765L12.059 12.5002L12.9472 10.7238C13.0707 10.4768 12.9706 10.1764 12.7236 10.0529C12.4766 9.92945 12.1763 10.0296 12.0528 10.2765L11.5 11.3821L10.9472 10.2765Z",fill:"url(#paint7_linear_103584_157556)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_103584_157556",x1:11.0417,y1:5,x2:13.3847,y2:27.3656,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_103584_157556",x1:10.2222,y1:6,x2:12.1806,y2:26.3672,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_103584_157556",cx:0,cy:0,r:1,gradientTransform:"matrix(13.7222 15.8333 -20.5833 5.9375 11.3056 11.2083)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint4_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint5_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint6_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint7_linear_103584_157556",x1:9.5,y1:5.00003,x2:16.9411,y2:22.0001,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"}))));function S3(e){const{fileType:t,className:n}=e;switch(t){case"application/pdf":return i.jsx(wpe,{className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":case"application/vnd.ms-word.document.macroEnabled.12":return i.jsx(Ppe,{className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":case"application/vnd.ms-word.template.macroEnabled.12":return i.jsx(ype,{className:n});case"text/plain":return i.jsx(Rpe,{className:n});case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":case"application/vnd.ms-excel.sheet.macroEnabled.12":return i.jsx(bpe,{className:n});case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":case"application/vnd.ms-excel.template.macroEnabled.12":return i.jsx(Lpe,{className:n});case"text/csv":return i.jsx(Cpe,{className:n});case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":return i.jsx(Ape,{className:n});case"application/vnd.openxmlformats-officedocument.presentationml.template":case"application/vnd.ms-powerpoint.template.macroEnabled.12":return i.jsx(_pe,{className:n});case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":return i.jsx(Tpe,{className:n});case"application/json":case"text/markdown":case"image/svg+xml":case"application/xml":case"application/x-sql":case"text/javascript":case"text/css":return i.jsx(vpe,{className:n});case"application/onenote":return i.jsx(Epe,{className:n});case"application/rtf":return i.jsx(Mpe,{className:n});case"application/msonenote":return i.jsx(Npe,{className:n});case"text/html":return i.jsx(Spe,{className:n});case"text/xml":return i.jsx(Ope,{className:n});case"application/vnd.ms-project":return i.jsx(kpe,{className:n});case"image/png":case"image/jpeg":return i.jsx(Ipe,{className:n});default:return i.jsx(xpe,{className:n})}}function Dpe(e){const{portalContainerRef:t,selector:n,children:s}=e,o=c.useRef(null),[r,a]=c.useState(!1);c.useEffect(()=>{n&&(o.current=document.querySelector(n)??document.body),a(!0)},[n]);const l=(t==null?void 0:t.current)??o.current;return r&&l?Sd.createPortal(s,l):null}function hs(e){c.useEffect(()=>(window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}),[e])}function jpe(e){const{renderTrigger:t,renderSurface:n,containerClassNames:s,color:o="default",onOutsideEvent:r,placement:a="bottom",floatingOffset:l=10,portalContainerRef:u,role:d="dialog"}=e,m=rre(),[f,h]=c.useState(!1),g=c.useRef(null),C=c.useRef(null),v=c.useCallback(I=>{I.stopPropagation(),I.preventDefault(),h(_=>!_)},[]),y=c.useCallback(()=>{h(!1),r==null||r()},[r]),{refs:b,floatingStyles:E,context:S}=Ml({nodeId:m,placement:a,strategy:"fixed",middleware:[fa(l),Tl(),pa()],whileElementsMounted:Ta,open:f,onOpenChange:(I,_,T)=>{I?h(!0):T!=="ancestor-scroll"&&y()}});return lm(S,{outsidePressEvent:"pointerdown",ancestorScroll:!0,outsidePress:I=>{if(I.target instanceof Element){const _=I.target;if(_ instanceof Element&&_.closest("[data-outside-events-ignore]")!==null)return!1}return!0}}),hs(I=>{I.key==="Escape"&&f&&y()}),i.jsxs("div",{ref:b.setReference,className:F("relative",s==null?void 0:s.trigger),children:[t({openPopover:v,isOpen:f,ref:g}),i.jsx(are,{id:m,children:i.jsx(Dpe,{...u?{portalContainerRef:u}:{selector:"#popoverPortal"},children:i.jsx(pt,{children:f&&i.jsx($1,{context:S,modal:d==="dialog",returnFocus:!0,initialFocus:C,children:i.jsx(ge.div,{ref:b.setFloating,className:F("rounded-2xl p-3 shadow-lg",o==="thin"?Zr:Qs,s==null?void 0:s.surface,ct.modal),style:{...E,...ev},role:d,tabIndex:-1,initial:"initial",animate:"animate",exit:"exit",variants:{initial:Fe,animate:nt,exit:{...Fe,transition:{duration:ts.default}}},transition:{duration:ts.default,ease:"easeInOut"},children:i.jsx("div",{className:F("pointer-events-auto relative max-h-expanded-section overflow-visible",ct.modal),children:n({closePopover:y,isOpen:f,focusRef:C})})})})})})})]})}function wm(e){const{renderTrigger:t,renderSurface:n,containerClassNames:s,color:o,onOutsideEvent:r,placement:a,floatingOffset:l,portalContainerRef:u,role:d}=e,m=Zi(),f=i.jsx(jpe,{renderTrigger:t,renderSurface:n,containerClassNames:s,color:o,onOutsideEvent:r,placement:a,floatingOffset:l,portalContainerRef:u,role:d});return m===null?i.jsx(ire,{children:f}):f}const Upe="PPTX";function Fpe(e){const{filename:t,downloadHandler:n,copyHandler:s}=e,[o,r]=c.useState(!1),{t:a}=q(),l=c.useMemo(()=>[{icon:i.jsx(gpe,{className:"size-5"}),title:a("powerPointFilePreview.downloadTitle"),onClick:n},{icon:i.jsx(dh,{className:"size-5"}),title:a("powerPointFilePreview.copyLinkLabel"),onClick:s}],[a,n,s]),u=d=>{(d.key==="Enter"||d.key===" ")&&d.stopPropagation()};return i.jsx(ge.div,{className:"flex max-w-full items-center gap-4 sm:gap-5",layout:"position",initial:Fe,animate:nt,exit:Fe,children:i.jsx("div",{className:"flex max-w-full gap-3 py-2",children:i.jsxs(ne,{title:a("powerPointFilePreview.downloadTitle"),color:"default",className:"max-w-full justify-start",onClick:()=>{o||n()},"aria-label":a("powerPointFilePreview.downloadTitle"),children:[i.jsx("div",{className:"grid aspect-square size-9 place-items-center self-start rounded-lg text-accent-600",children:i.jsx(S3,{fileType:"application/vnd.openxmlformats-officedocument.presentationml.presentation",className:"size-8"})}),i.jsx("div",{className:"w-4/5 max-w-[400px] text-start",children:i.jsxs("div",{children:[i.jsx("p",{className:"font-ligatures-none truncate text-foreground-900 text-sm",children:t}),i.jsx("p",{className:"font-ligatures-none truncate text-foreground-600 text-sm",children:Upe})]})}),i.jsx(wm,{containerClassNames:{surface:"p-1.5 z-10"},onOutsideEvent:()=>{r(!1)},renderTrigger:({openPopover:d,isOpen:m})=>{const f=a("discover.cardActions.seeMoreDropdownState",{state:a(m?"actions.screenReaderFriendlyStatus.expanded":"actions.screenReaderFriendlyStatus.collapsed")});return i.jsx(ne,{title:f,variant:"square",size:"36-sm",color:"subtle-dimmed-inverted",onClick:h=>{d(h),r(!0)},onKeyDown:u,role:"menu","aria-label":f,children:i.jsx(Em,{width:20,height:20,className:"rotate-90"})})},renderSurface:({closePopover:d})=>i.jsx("div",{className:"flex flex-col border-none",children:l.map((m,f)=>i.jsx(ne,{title:m.title,variant:"rect",color:"subtle-dimmed-inverted",onClick:h=>{d(h),r(!1),m.onClick()},onKeyDown:u,size:"36-sm",alignment:"start",className:"gap-1 px-2 py-0",role:"menuitem","aria-label":m.title,children:i.jsxs("div",{className:"flex min-w-[100px] place-items-center gap-2 p-1",children:[m.icon,m.title]})},f))}),placement:"bottom-start",role:"menu"})]})})})}const Bpe=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 8V2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V10H14C12.8954 10 12 9.10457 12 8ZM8.25 11.5H15.75C16.1642 11.5 16.5 11.8358 16.5 12.25C16.5 12.6642 16.1642 13 15.75 13H8.25C7.83579 13 7.5 12.6642 7.5 12.25C7.5 11.8358 7.83579 11.5 8.25 11.5ZM8.25 14.25H15.75C16.1642 14.25 16.5 14.5858 16.5 15C16.5 15.4142 16.1642 15.75 15.75 15.75H8.25C7.83579 15.75 7.5 15.4142 7.5 15C7.5 14.5858 7.83579 14.25 8.25 14.25ZM8.25 17H15.75C16.1642 17 16.5 17.3358 16.5 17.75C16.5 18.1642 16.1642 18.5 15.75 18.5H8.25C7.83579 18.5 7.5 18.1642 7.5 17.75C7.5 17.3358 7.83579 17 8.25 17ZM13.5 8V2.5L19.5 8.5H14C13.7239 8.5 13.5 8.27614 13.5 8Z"})),Vpe=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 2V8C12 9.10457 12.8954 10 14 10H20V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4C4 2.89543 4.89543 2 6 2H12ZM13.5 2.5V8C13.5 8.27614 13.7239 8.5 14 8.5H19.5L13.5 2.5Z"})),Hpe="/static/cmc/assets/pdf-CBlMXyWV.svg",zpe=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",...e},c.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H11.5C11.7761 2 12 2.22386 12 2.5V4.5C12 4.77614 11.7761 5 11.5 5C11.2238 5 11 4.77614 11 4.5V3H7.99997L7.99998 13H9C9.27614 13 9.5 13.2239 9.5 13.5C9.5 13.7761 9.27614 14 9 14H6C5.72386 14 5.5 13.7761 5.5 13.5C5.5 13.2239 5.72386 13 6 13H6.99998L6.99997 3H4V4.5C4 4.77614 3.77614 5 3.5 5C3.22386 5 3 4.77614 3 4.5V2.5Z",fill:"currentColor"}));function Gpe(e){const{fileType:t,className:n}=e;switch(t){case"application/pdf":return i.jsx(St,{url:Hpe,className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return i.jsx(Bpe,{className:n});case"text/plain":return i.jsx(zpe,{className:n});case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return i.jsx(Vpe,{className:n})}}function Wpe(e){switch(e){case"application/pdf":return"bg-system-red-350";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return"bg-midnight-300";case"text/plain":return"bg-spot-blue-300";case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return"bg-neutral-300"}}function $pe(e){const{t}=q();switch(e){case"application/pdf":return t("fileUpload.fileTypeDisplayPdf");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return t("fileUpload.fileTypeDisplayDoc");case"text/plain":return t("fileUpload.fileTypeDisplayTxt");case"application/json":return t("fileUpload.fileTypeDisplayJson");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return t("fileUpload.fileTypeDisplayXlsx");case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":return t("fileUpload.fileTypeDisplayPptx");case"text/csv":return t("fileUpload.fileTypeDisplayCsv");case"text/markdown":return t("fileUpload.fileTypeDisplayMarkdown");default:return t("fileUpload.fileTypeDisplayDefault")}}const qpe=c.lazy(()=>B(()=>Promise.resolve().then(()=>p3),void 0));function E3(e){var y;const{onRemove:t,fileName:n,fileType:s,isUploading:o,role:r,ariaLabel:a,layout:l="grid"}=e,{t:u}=q(),d=Wpe(s),m=$pe(s),f=l==="list",h=c.useCallback(()=>{t==null||t(),ho({msg:u("fileUpload.fileRemoved")})},[t,u]),g=W("file-upload-card-v2"),C=!!((y=re.instance().config().composer)!=null&&y.smallAttachmentCard)||g,v=i.jsx(ln,{className:F("absolute inset-0 grid place-items-center ",{"bg-white/80 dark:bg-white/45":!f,"bg-transparent":f}),children:o?i.jsxs(i.Fragment,{children:[i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(qpe,{type:"spinnerThemed",className:f?"size-8":"size-11"})}),i.jsx(Ti,{msg:u("fileUpload.uploadingFile"),type:"polite"})]}):null});return i.jsxs(ge.div,{className:ue("relative flex justify-center gap-2 overflow-hidden rounded-xl",{"mt-1 h-small-attachment w-auto flex-row items-center pe-8":C,"h-32 w-44 flex-col":!C,"w-full bg-transparent !pe-0":f,"border border-black/8 bg-acrylic-thin-fallback-light/60 p-3 dark:border-white/8 dark:bg-midnight-800/80 sm:w-56":!f}),layout:"position",initial:Fe,animate:nt,exit:Fe,role:r,"aria-label":a,children:[g?i.jsx("div",{className:F("relative",{"h-8 w-8":C&&f}),children:f&&o?v:i.jsx(S3,{fileType:s,className:"size-8"})}):i.jsx("div",{className:ue("grid aspect-square size-8 place-items-center self-start rounded-full text-black",d),children:i.jsx(Gpe,{fileType:s,className:"size-5"})}),i.jsxs("div",{className:ue({"min-w-0 flex-1":C}),children:[i.jsx("p",{className:ue("font-ligatures-none truncate text-sm",{"overflow-hidden whitespace-nowrap":C}),children:n}),i.jsx("p",{className:"line-clamp-1 text-foreground-600 text-xs",children:m})]}),t&&!o&&i.jsx("button",{type:"button",title:u("fileUpload.removeFileWithName",{name:n}),"aria-label":u("fileUpload.removeFileWithName",{name:n}),onClick:h,className:F("rounded-full  p-1 ",{"border border-black/20 text-foreground-850 dark:border-white/20":!g,"bg-transparent":g,"absolute end-0.5 top-0.5 m-1":!f}),children:i.jsx(an,{className:"size-3"})}),f?null:v]})}function Kpe(e){const{contentType:t,name:n,url:s}=e,{t:o}=q(),r=se(Sn),a=M(je),l=c.useRef(!1);c.useEffect(()=>{if(l.current)return;l.current=!0;const f=t.startsWith("image/")?"image":"file";D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:f,eventInfo_conversationId:a,eventInfo_impressionScenario:"renderArtifact",eventInfo_customData:JSON.stringify({url:s}),eventInfo_fileType:t}})},[s,n,a,t]);const u=c.useCallback(()=>{const f={url:s,fileName:n};D.trackEvent({name:"system",data:{eventName:"copilotClick",eventInfo_clickScenario:"downloadArtifact",eventInfo_clickSource:"fileDownloadButton",eventInfo_conversationId:a,eventInfo_customData:JSON.stringify({url:s}),eventInfo_fileType:t}}),mk(f).catch(h=>{const g=h instanceof Error?h.message:"unknown file card error";X2(g),g.includes("status: 404")?r({title:o("common.fileUnavailable"),subtitle:o("common.fileUnavailableDetails"),dismissAfter:3e3}):r({title:o("common.downloadFailed"),subtitle:o("common.downloadFailedDetails",{fileName:n}),dismissAfter:3e3})})},[s,n,o,r,a,t]),d=c.useCallback(async()=>{const f=rm(s)?s:new URL(Xv()+s,window.location.origin).href;await navigator.clipboard.writeText(f),ho({msg:o("chat.copied"),type:"polite"})},[o,s]);return s?(()=>{switch(t){case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return i.jsx("div",{className:"flex w-fit max-w-full items-center gap-4 md:max-w-96",children:i.jsx(Fpe,{filename:n,downloadHandler:u,copyHandler:d})});case"application/pdf":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"text/plain":case"text/csv":case"application/json":case"application/xml":case"text/html":case"text/css":case"text/javascript":case"application/javascript":case"image/jpeg":case"image/png":case"image/gif":case"image/svg+xml":case"image/webp":case"audio/mpeg":case"audio/wav":case"audio/ogg":case"video/mp4":case"video/webm":case"video/ogg":case"application/zip":case"application/x-rar-compressed":case"application/x-7z-compressed":default:return i.jsxs("div",{className:"flex w-fit max-w-full items-center gap-4 md:max-w-96",children:[i.jsx(E3,{fileName:n,fileType:t}),i.jsx(ne,{title:o("common.download"),size:"36-sm",variant:"circle",color:"subtle-dimmed-inverted",onClick:u,"aria-label":o("common.download"),className:"shrink-0 border border-stroke-350",children:i.jsx(pd,{className:"size-5"})})]})}})():(X2("No URL provided"),null)}const pk=.6,Zpe=new Set(["html"]);function _r(e={},t={}){return{start:{...e,opacity:0},end:n=>({...t,opacity:1,transition:{delay:n,ease:"easeInOut",duration:pk}})}}function $Te(e,t){if(!Zpe.has(e))return!1;const n=t.trim();return!!(e==="html"&&/(<\/html>)(\n?```)?$/.test(n)&&n.match(/^(<!DOCTYPE html>|<html>|<!doctype html>)/))}const Ype=_r();function Qpe(e){const{items:t,shouldAnimate:n,BlockRenderer:s,delay:o}=e;return i.jsx(ge.blockquote,{className:"flex flex-col gap-3 border-s-2 border-foreground-300 ps-3",variants:Ype,initial:n?"start":"end",animate:"end",custom:o,children:i.jsx(s,{blocks:t,shouldAnimate:n})})}const Im=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12.0001 1.99805C17.5238 1.99805 22.0016 6.47589 22.0016 11.9996C22.0016 17.5233 17.5238 22.0011 12.0001 22.0011C6.47638 22.0011 1.99854 17.5233 1.99854 11.9996C1.99854 6.47589 6.47638 1.99805 12.0001 1.99805ZM14.939 16.4993H9.06118C9.71322 18.9135 10.8466 20.5011 12.0001 20.5011C13.1536 20.5011 14.2869 18.9135 14.939 16.4993ZM7.5084 16.4999L4.78591 16.4998C5.74425 18.0328 7.1777 19.2384 8.88008 19.9104C8.3578 19.0906 7.92681 18.0643 7.60981 16.8949L7.5084 16.4999ZM19.2143 16.4998L16.4918 16.4999C16.168 17.8337 15.7004 18.9995 15.119 19.9104C16.716 19.2804 18.0757 18.1814 19.0291 16.7833L19.2143 16.4998ZM7.09351 9.99895H3.7359L3.73115 10.0162C3.57906 10.6525 3.49854 11.3166 3.49854 11.9996C3.49854 13.0558 3.69112 14.0669 4.0431 14.9999L7.21626 14.9995C7.07396 14.0504 6.99854 13.0422 6.99854 11.9996C6.99854 11.3156 7.031 10.6464 7.09351 9.99895ZM15.397 9.99901H8.60316C8.53514 10.6393 8.49853 11.309 8.49853 11.9996C8.49853 13.0591 8.58468 14.0694 8.73827 14.9997H15.2619C15.4155 14.0694 15.5016 13.0591 15.5016 11.9996C15.5016 11.309 15.465 10.6393 15.397 9.99901ZM20.2647 9.99811L16.9067 9.99897C16.9692 10.6464 17.0016 11.3156 17.0016 11.9996C17.0016 13.0422 16.9262 14.0504 16.7839 14.9995L19.9571 14.9999C20.309 14.0669 20.5016 13.0558 20.5016 11.9996C20.5016 11.3102 20.4196 10.64 20.2647 9.99811ZM8.88114 4.08875L8.85823 4.09747C6.81092 4.91218 5.1549 6.49949 4.25023 8.49935L7.29835 8.49972C7.61171 6.74693 8.15855 5.221 8.88114 4.08875ZM12.0001 3.49805L11.8844 3.50335C10.619 3.6191 9.39651 5.62107 8.8288 8.4993H15.1714C14.6052 5.62914 13.388 3.63033 12.1264 3.50436L12.0001 3.49805ZM15.1201 4.08881L15.2269 4.2629C15.8961 5.37537 16.4043 6.83525 16.7018 8.49972L19.7499 8.49935C18.8853 6.58795 17.3343 5.05341 15.4113 4.21008L15.1201 4.08881Z"})),qTe=Object.freeze(Object.defineProperty({__proto__:null,default:Im},Symbol.toStringTag,{value:"Module"})),hk=c.createContext(null);function Jpe(e){const{children:t,enabled:n}=e;return i.jsx(hk.Provider,{value:n,children:t})}function Xpe(){return c.useContext(hk)===!0}function e1e(){const e=Gt("kill-rich-citations"),t=Xpe();return!!(!e&&t)}const _m=c.createContext(void 0);function gk(e,t,n){Gw({source:e==="row"?"citationCardRowButton":"citationReferencePanelCard",scenario:"openLink",conversationId:t,destination:n})}function KTe(e){ye({source:"citationCardShowAllButton",scenario:"openPanel",conversationId:e})}function Nx(e,t,n){Gw({source:e==="inline"?"inlineCitationLink":"hoverCitationLink",scenario:"openLink",conversationId:t,destination:n})}function t1e(e,t){let n;e==="card"?n="citationCardRowButton":e==="inline"?n="inlineCitationButton":n="citations",un({page:"chat",element:n,scenario:"shown",customData:t})}const n1e=_r(),s1e=150;function o1e(e){const{url:t,title:n,index:s,shouldAnimate:o,delay:r,onCitationClick:a,onCitationHover:l,onCitationHoverEnd:u,subCitations:d}=e,m=c.useContext(_m),f=c.useId(),h=c.useId(),g=EC(),C=M(je),v=e1e(),y=G_(),b=W("passage-highlight")&&v,[E,S]=c.useState(!1),[I,_]=c.useState(!1),[T,A]=c.useState(!1),[k,N]=c.useState(0),P=c.useRef(null),V=c.useRef(null),U=c.useRef(null),K=c.useRef(null),Q=c.useRef(null),Z=c.useRef(null),Y=E||I||T,X=c.useRef(!1),$=Be=>{U.current&&(clearTimeout(U.current),U.current=null),Be?_(!0):U.current=setTimeout(()=>{_(!1)},150)},{refs:ee,floatingStyles:te}=MC({placement:"bottom",elements:{reference:P.current},middleware:v?[fa(6),pa()]:[fa(6),Tl(),pa()],strategy:v?"fixed":"absolute",whileElementsMounted:v?Ta:void 0});go({onOutsideEvent:()=>S(!1),elements:[ee.floating,P],includeScroll:!1,invokeOnce:!0}),hs(Be=>{(Be.key==="Escape"||Be.key==="Control")&&S(ve=>(ve&&P.current&&P.current.focus(),!1))}),c.useEffect(()=>{v&&t1e("inline")},[v]),c.useEffect(()=>()=>{U.current&&clearTimeout(U.current),Z.current&&clearTimeout(Z.current)},[]);const G=()=>{if(v){if(d&&d.length>0){if(!d[0])return;if(y||d.length===1){const Be=lo(t);Nx("inline",C,Be),Eo(d[0].url),X.current=!0,A(!1),_(!1)}if(!y){if(!m||!C)return;const Be=d.map(ve=>ve.url);if(Be.length<=1)return;El({type:"citations",data:{conversationId:C,messageId:m,targetCitationIds:Be}})}}}else S(!0)},ie=()=>{qt({source:"citationLink",conversationId:C,messageId:m,destination:lo(t)}),S(!1),a&&a()},xe=()=>{const Be=lo(t);Nx("hover",C,Be),a&&a()},ce=c.useCallback(()=>{v&&y&&(_(!0),b&&(l==null||l()))},[_,v,y,b,l]),ae=c.useCallback(()=>{v&&y&&(_(!1),b&&(u==null||u()))},[_,v,y,b,u]),Se=()=>{if(v){ae();return}$(!1)},Me=()=>{if(v){ce();return}$(!0)},Oe=()=>{v&&y&&(X.current?X.current=!1:(A(!0),setTimeout(()=>{V.current&&P.current&&r1e(V.current,P.current,ct.composer)},s1e),b&&(l==null||l())))},oe=Be=>{if(v){const ve=Be.relatedTarget,ze=V.current;ze!=null&&ze.contains(ve)||(A(!1),b&&(u==null||u()))}},le=Be=>{if(v&&Y&&Be.key==="Tab"&&!Be.shiftKey){const ve=V.current;if(ve){const ze=Rx(ve);ze[0]&&(Be.preventDefault(),ze[0].focus())}}},J=Be=>{var ve,ze,yt,Ne;if(Be.key==="Escape")T&&(A(!1),X.current=!0,(ve=P.current)==null||ve.focus(),Be.preventDefault());else if(Be.key==="Tab"){const Ie=V.current;if(Ie){const Ze=Array.from(Rx(Ie)).filter(Te=>!Te.hasAttribute("data-tabster-dummy")&&!Te.hasAttribute("disabled")),at=Array.from(Ze).indexOf(Be.target);at===-1||Be.shiftKey&&at===0||!Be.shiftKey&&at===Ze.length-1?(A(!1),X.current=!0,(ze=P.current)==null||ze.focus(),Be.preventDefault()):Be.shiftKey?((yt=Ze[at-1])==null||yt.focus(),Be.preventDefault()):((Ne=Ze[at+1])==null||Ne.focus(),Be.preventDefault())}}},Ce=Be=>ve=>{if(ve.preventDefault(),!(d!=null&&d.length))return;const ze=Be==="previous",yt=ze?K:Q,Ne=ze?Q:K,Ie=document.activeElement===yt.current,Ze=ze?k===1:k===d.length-2;N(at=>{let Te;return ze?at>0?Te=at-1:Te=d.length-1:at<d.length-1?Te=at+1:Te=0,Ie&&Ze&&Ne.current&&(Z.current&&clearTimeout(Z.current),Z.current=setTimeout(()=>{var dt;(dt=Ne.current)==null||dt.focus(),Z.current=null},0)),Te})},Pe=Ce("previous"),qe=Ce("next"),Xe=es(t),et=d&&d[0],fe=c.useMemo(()=>(et==null?void 0:et.publisher)??R2(t),[et==null?void 0:et.publisher,t]),Ee=d&&d[k],Ae=c.useMemo(()=>(Ee==null?void 0:Ee.publisher)??R2((Ee==null?void 0:Ee.url)??t),[Ee==null?void 0:Ee.publisher,Ee==null?void 0:Ee.url,t]),Ye=d&&d.length>=2,De=v?`${fe} ${Ye?z("chat.groupedCitationButtonLabel",{subCitationCount:d.length-1}):""}`:s,Ke=z("chat.citationPopoverButtonLabel",{citationNumber:De});return i.jsxs(ge.span,{initial:o?"start":"end",animate:"end",variants:n1e,custom:r,className:F("group relative inline-block pb-1 align-middle",v?"mx-1 h-6":"mx-0.5 h-5 w-4"),"data-copy":"false","data-tabster":'{"uncontrolled": {}}',children:[i.jsx("button",{id:h,"aria-expanded":E||I||T,"aria-controls":f,"aria-label":Ke,ref:P,type:"button",className:F("flex size-full items-center justify-center rounded-md pt-px text-2xs [font-variation-settings:'opsz'_40,_'wght'_450] hover:bg-accent-250 focus:bg-accent-250 contrast-more:border",E&&"pointer-events-none",v?"px-1":"mx-px",v?"bg-black/5 text-foreground-750 dark:bg-white/5 hover:dark:bg-accent-250 focus:dark:bg-accent-250":"bg-accent-200 text-foreground-800 dark:bg-muted-300 hover:dark:bg-background-400 focus:dark:bg-background-400"),onClick:G,onPointerEnter:Me,onPointerLeave:Se,onFocus:Oe,onBlur:oe,onKeyDownCapture:le,children:v?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:F(Ye&&"me-1","max-w-24 truncate"),children:fe}),Ye&&i.jsxs("span",{children:["+",d.length-1]})]}):s}),!v&&Y&&i.jsx("span",{id:f,role:"dialog","aria-labelledby":h,className:F("absolute w-screen px-4 max-sm:mb-2 sm:w-[350px] sm:px-0",ct.citations),style:te,ref:ee.setFloating,onPointerEnter:()=>$(!0),onPointerLeave:()=>$(!1),children:i.jsx(ge.span,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{scale:{duration:.2},opacity:{duration:.15}},className:"origin-top-left",style:ev,children:i.jsx("a",{tabIndex:0,onClick:ie,className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",href:lo(t),target:"_blank",rel:g,children:i.jsxs("span",{className:"w-full flex-1 space-y-0.5",children:[i.jsx("span",{className:"line-clamp-1 text-sm-strong",children:n}),i.jsx("span",{className:"line-clamp-1 flex items-center gap-1.5 text-foreground-600 text-xs",children:Xe})]})})})}),v&&i.jsx(pt,{children:Y&&i.jsx(kl,{children:i.jsx("span",{id:f,role:"dialog","aria-labelledby":h,className:F("absolute w-screen max-w-[350px] px-4 max-sm:mb-2 sm:px-0",ct.citationHoverCard),style:te,ref:Be=>{ee.setFloating(Be),V.current=Be},"data-tabster":'{"uncontrolled": {}}',onPointerEnter:()=>_(!0),onPointerLeave:()=>_(!1),onKeyDownCapture:J,children:i.jsx(ge.span,{className:"block origin-top",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15,delay:.15},children:i.jsx("span",{className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",children:i.jsxs("span",{className:"w-full flex-1 flex-col",children:[i.jsxs("a",{href:lo((Ee==null?void 0:Ee.url)??t),target:"_blank",rel:g,onClick:xe,className:"block",children:[i.jsxs("h2",{className:"flex w-full items-center gap-1.5",children:[i.jsx("span",{className:"inline-block size-3.5 rounded",children:Ee!=null&&Ee.iconUrl?i.jsx("img",{src:Ee.iconUrl,alt:z("citationCards.citationIcon"),className:"size-full rounded bg-white object-cover"}):i.jsx(Im,{className:"size-3.5 text-foreground-700 dark:text-foreground-800"})}),i.jsx("span",{className:"line-clamp-1 text-sm",children:Ae})]}),i.jsx("span",{className:"mt-1 line-clamp-1 text-sm-medium",children:Ee==null?void 0:Ee.title}),i.jsx("span",{className:"mt-1 line-clamp-2 text-foreground-700 text-sm",children:Ee==null?void 0:Ee.snippet}),i.jsx("span",{className:"mt-1 line-clamp-1 truncate text-foreground-600 text-xs",children:Ee==null?void 0:Ee.url})]}),d&&d.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"my-2 h-px bg-stroke-700/12"}),i.jsxs("span",{className:"mt-2 flex justify-between",children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx(e5,{ref:K,onClick:Pe,disabled:k===0,title:z("citationCards.previousCitation"),children:i.jsx(ds,{className:"size-4 text-foreground-800 ltr:rotate-180"})}),i.jsx(e5,{ref:Q,onClick:qe,disabled:k===d.length-1,title:z("citationCards.nextCitation"),children:i.jsx(ds,{className:"size-4 text-foreground-800 rtl:rotate-180"})})]}),i.jsxs("span",{className:"text-foreground-600 text-sm",children:[k+1," / ",d.length]})]})]})]})})})})})})]},"citation")}const r1e=(e,t,n)=>{const s=e.getBoundingClientRect(),o=2,r=e.style,a=r.pointerEvents;r.pointerEvents="none";try{const l=[[s.left+o,s.top+o],[s.right-o,s.top+o],[s.left+o,s.bottom-o],[s.right-o,s.bottom-o],[s.left+s.width/2,s.top+s.height/2]],u=new Set;for(const[d,m]of l){const f=document.elementFromPoint(d,m);!f||f===e||e.contains(f)||f.contains(e)||u.add(f)}for(const d of u)if(a1e(d,n)){t.scrollIntoView({behavior:"smooth",block:"center"});return}}finally{r.pointerEvents=a}};function a1e(e,t){const n=/^z-\[?(\d+)\]?$/.exec(t);if(!(n!=null&&n[1]))throw new Error(`Invalid z-index class: "${t}". Expected format: "z-{number}" or "z-[{number}]"`);const s=parseInt(n[1],10);let o=e;for(;o&&o!==document.body;){const r=Number(window.getComputedStyle(o).zIndex);if(!Number.isNaN(r)&&r===s)return!0;o=o.parentElement}return!1}function Rx(e,t={}){const{includeDisabled:n}=t,s=n?'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])':'button:not([disabled]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';return e.querySelectorAll(s)}const e5=c.forwardRef((e,t)=>{const{title:n,onClick:s,disabled:o,children:r}=e;return i.jsx("button",{ref:t,type:"button",title:n,disabled:o,onClick:s,"aria-label":n,className:F("relative flex",o&&"opacity-20",!o&&"hover:opacity-90",um),children:r})});e5.displayName="NavigationButton";const i1e=o1e,c1e=100,l1e=70,u1e=4,Ai=$e(),t5=R(null),vk=R("");let s0=null;function d1e(e){Ai.set(vk,e)}function Px(){return Ai.get(vk)}function Rc(e){Ai.set(pC,e)}function Ck(){const e=Ai.get(t5);e&&(e.abort(),Ai.set(t5,null))}function m1e(){Ck();const e=new AbortController;return Ai.set(t5,e),e}function f1e(e,t){const n=new URL("https://www.bing.com/AS/Suggestions/V2?pt=page.chat"),s=Rt.resolvedLanguage,o=pe(Mn);return n.searchParams.set("setlang",(s==null?void 0:s.toLowerCase())??"en"),n.searchParams.set("cc",(o==null?void 0:o.toLowerCase())??"us"),n.searchParams.set("qry",e.toLowerCase()),n.searchParams.set("cvid",t),be("encacsc")&&n.searchParams.set("ascopilot1","1"),be("enblsuggrndmzn")&&n.searchParams.set("ascopilot2","1"),be("encpsrchdata")&&n.searchParams.set("ascopilot3","1"),be("zi-autosuggest")&&n.searchParams.set("ascopilot4","1"),n.toString()}async function p1e(e){const{query:t,conversationId:n,abortController:s}=e,o={query:t.toLowerCase()};return(await Ct(`/conversations/${n}/autosuggest`,fK,{query:o,options:{method:"GET",signal:s.signal}})).data}async function h1e(e){const{query:t,conversationId:n,abortController:s}=e,o=f1e(t,n);return fetch(o,{signal:s.signal}).then(r=>r.json())}async function g1e(e){return be("autosuggest-picasso")?p1e(e):h1e(e)}function v1e(e,t){const n=t.text??t.st??"",s=e.toLowerCase().split(/\s+/),o=n.toLowerCase().split(/\s+/);let r=0;for(let d=0;d<Math.min(s.length,o.length)&&s[d]===o[d];d+=1)r+=1;const a=n.split(/\s+/),l=a.slice(0,r).join(" "),u=a.slice(r).join(" ");return{original:n,sliced:u,prefill:l+(l?" ":"")}}async function C1e(e){var n;const t=pe(je);if(t)try{const s=m1e(),o=performance.now(),r=await g1e({query:e,conversationId:t,abortController:s});if(e===Px()){const a="suggestions"in r?r.suggestions:r.s;let l=e;if("qc"in r&&typeof r.qc.q=="string"&&(l=r.qc.q),!a.length){Rc(null),Kt({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:t})});return}const u=a.filter(d=>"text"in d&&"source"in d?typeof d.text=="string"&&typeof d.source=="string":"st"in d&&"t"in d?typeof d.st=="string"&&typeof d.t=="string":!1).map(d=>v1e(l,d));if(!u.length){Rc(null),Kt({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:t})});return}Rc({prefill:((n=u[0])==null?void 0:n.prefill)??e,conversationId:t,type:"BCT",suggestions:u.slice(0,u1e)}),po({feature:"fetchChatAutoComplete",duration:performance.now()-o})}}catch(s){s instanceof DOMException&&s.name==="AbortError"||D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"autosuggest",eventInfo_errorMessage:`${s}`,eventInfo_details:"Autosuggest API error"}}),e===Px()&&Rc(null)}}function y1e(e){s0&&clearTimeout(s0),s0=setTimeout(()=>{C1e(e)},c1e)}function yk(e){var r;let t=(r=re.instance().config().landingPage)==null?void 0:r.regexForAutoSuggest;be("zi-autosuggest")&&(t=/\S*/);const n=be("autosuggest")||be("edge-autosuggest"),s=pe(je);if(!n||!t||!t.test(e)||e.length>=l1e){Rc(null);return}d1e(e);const o=be("zi-autosuggest");!s||e===""&&!o?Rc(null):y1e(e)}function Df(){Ck(),Ai.set(pC,null)}function b1e(){const e=pe(Ea),t=pe(hn);return e.length===0&&!!(t!=null&&t.isNew)}function mh(){return!pe(zv)}function x1e(){var l;const e=ut(),t=e==="/"?"center":"bottom",n=mh(),{showShoppingCardInNewChat:s}=Ji(),o=!gt({breakpoint:"sm"}),r=e==="/",a=!!((l=re.instance().config().landingPage)!=null&&l.enableCentralComposer);return n&&!(s&&o)&&t==="center"&&r&&a}function S1e(){var s;const e=mh(),t=Sr(),n=!!((s=re.instance().config().landingPage)!=null&&s.enableStarterPrompts);return e&&t&&n}function bk(){var o;const e=mh(),t=Sr(),n=pe(ice),s=!!((o=re.instance().config().landingPage)!=null&&o.enableWidgets);return e&&n&&t&&s}function E1e(){const e=mh(),t=Sr(),n=bk(),s=be("appr-home");return e&&t&&s&&!n}function xk(){var r;const e=be("autosuggest"),t=be("edge-autosuggest"),n=Sr(),s=e||t,o=!!((r=re.instance().config().landingPage)!=null&&r.enableAutoSuggest);return s&&o&&n}function w1e(){const{launchGreetingShown:e}=VT(),{hasInsightsSummary:t}=Ji(),n=M(Yce),s=kT(),o=b1e()||s==="/",r=tk();return!t&&!n&&!e&&o&&!r}function Tm(){const e=E1e(),t=x1e(),n=w1e(),s=YC();return{isAutoSuggestEnabled:xk(),isCentralComposerEnabled:t,isStarterPromptsEnabled:S1e(),isWidgetSectionEnabled:bk(),isAppearanceOnHomeEnabled:e,isGreetingCentered:e||!s&&be("categorized-conversation-starter-widget"),showLaunchGreeting:n}}const Sk=$e(),w3=R(null),I3=R(null);function Ek(e){Sk.set(w3,e)}function wk(e){Sk.set(I3,e)}function I1e(e,t){var a;const n={eventInfo_inputLength:e.length};let s=n;const o=pe(w3);if(o){const{source:l,type:u,prompt:d}=o;l==="widgets"?s={...n,widget:u,widgetPromptLength:d.length}:l==="guideLink"?s={...n,guideLinkLength:d.length,guideLinkText:d}:s={...n,pill:u,pillPromptLength:d.length}}const r=pe(I3);return r&&(s={...s,autoCompleteLength:r.prompt.length}),(t==null?void 0:t.length)!==0&&((a=t==null?void 0:t[0])!=null&&a.scenario)&&(s={...s,uploadFileScenario:t[0].scenario}),JSON.stringify(s)}function _1e(e){const t=pe(w3),n=pe(I3),s=t==null?void 0:t.prompt.trim(),o=e.trim(),r=n==null?void 0:n.prompt.trim(),a=n==null?void 0:n.prefix.trim(),l=o.toLowerCase()===(r==null?void 0:r.toLowerCase());return!l&&!t?null:l?!s||!o.toLowerCase().includes(s.toLowerCase())?"autoComplete":a&&a.length>s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithTextAndAutoComplete":"pillWithTextAndAutoComplete":(a==null?void 0:a.length)===s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithAutoComplete":"pillWithAutoComplete":"autoComplete":!s||!o.toLowerCase().includes(s.toLowerCase())?null:o.length>s.length?(t==null?void 0:t.source)==="widgets"?"widgetWithText":(t==null?void 0:t.source)==="guideLink"?"guideLinkWithText":"pillWithText":(t==null?void 0:t.source)==="widgets"?"widget":(t==null?void 0:t.source)==="guideLink"?"guideLink":"pill"}function T1e(){Ek(null),wk(null)}const A1e=$e();function Ik(e){const{text:t,attachments:n,inputMethod:s}=e,o=cX(),r=k2(),a=e1({breakpoint:"sm"}),l=yo(),u=pe(bo),d=!_t("kill-chat-message-preview"),m=l==="computerUse",f=be("long-term-memory"),h=be("conversation-drift-detection"),g=d&&(xie()&&l==="smart"||f||h)&&oS(),v=xk()&&!u&&!m;if(t||Su("starter-prompts"),Ka(o.length<=0||t.length===0),RI(!1),A1e.set(R1,void 0),pX(s??"user"),r&&gA("typing"),a&&tle(),v&&yk(t),g)try{jn.sendMessagePreview({text:t,inputMethod:"text",filesWithAttachment:n??[]})}catch{}}function hd(e){const{prompt:t,prefillSource:n}=e;document.querySelector(`#${Pd}`)&&(Df(),E2(t),Ik({text:t,inputMethod:n}),n5("end"))}function n5(e=null){const t=document.querySelector(`#${Pd}`);if(!t)return;requestAnimationFrame(()=>{if(t.focus(),e===null)return;const s=t.value.length;if(e==="selectAll"){t.setSelectionRange(0,s);return}let o;e==="start"?o=0:o=s,t.setSelectionRange(o,o)})}async function _3(e){const{actionType:t,id:n,prompt:s,source:o}=e;switch(t){case"prefillComposer":{if(s){n&&Ek({prompt:s,type:n,source:o});let r="starterPill";o==="widgets"?r="widget":o==="guideLink"&&(r="guideLink"),hd({prompt:s,prefillSource:r})}break}case"sendMessage":{if(s)try{pp(!0),await Js(),await jn.submitMessage({text:s,inputMethod:"text"})}finally{pp(!1)}break}}}const k1e=_r(),M1e="text-start text-base-medium underline-offset-4 underline decoration-dotted hover:decoration-solid hover:cursor-pointer";function N1e(e){const{url:t,text:n,shouldAnimate:s,delay:o}=e,{t:r}=q(),a=W("guided-conversations-cocoa"),l=W("guided-conversations-caramel"),u=async()=>{const f=pae(t)??r("guidedConversation.prefix",{topic:n});ye({source:"guidedConversationLink",scenario:"prefill",destination:"composer"}),await _3({actionType:"prefillComposer",source:"guideLink",prompt:f,id:`guide-${n.toLowerCase().replace(/\s+/g,"-")}`})},d=()=>F(M1e,{"decoration-cocoa-350":a,"decoration-caramel-350":l});return s?i.jsx(ge.button,{className:d(),onClick:u,"data-url":t,initial:"start",animate:"end",variants:k1e,custom:o,children:n}):i.jsx("button",{type:"button",className:d(),onClick:u,"data-url":t,children:n})}const R1e="https://#timestamp-",P1e="https://#settings:privacy";function _k(e){return e?e.startsWith(R1e)?"VideoCitation":e.startsWith(P1e)?"PrivacySettings":"Unknown":"Unknown"}function L1e(e){return _k(e)!=="Unknown"}function O1e(e){if(!/^\d{2}:\d{2}:\d{2}$/.test(e))return e;const[n,s,o]=e.split(":");return n==="00"?(s==null?void 0:s.charAt(0))==="0"?`${s.substring(1)}:${o}`:`${s}:${o}`:(n==null?void 0:n.charAt(0))==="0"?`${n.substring(1)}:${s}:${o}`:e}const D1e=_r(),Lx="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function j1e(e){const{url:t,text:n,shouldAnimate:s,shouldHighlight:o,delay:r}=e,a=c.useContext(_m),l=M(je),u=_k(t),d=async()=>{switch(u){case"VideoCitation":await cJ.run({url:t});break;case"PrivacySettings":await pJ.run({url:t});break}D.trackEvent({name:"interaction",data:{eventName:"localCitationClick",eventInfo_messageId:a??"",eventInfo_conversationId:l??"",eventInfo_citationType:u}})};c.useEffect(()=>{D.trackEvent({name:"interaction",data:{eventName:"localCitationImpression",eventInfo_messageId:a??"",eventInfo_conversationId:l??"",eventInfo_citationType:u}})},[a,l,u]);const m=O1e(n);return s?i.jsx(ge.button,{className:F(Lx,o&&z2),onClick:d,"data-url":t,initial:"start",animate:"end",variants:D1e,custom:r,children:m}):i.jsx("button",{type:"button",className:F(Lx,o&&z2),onClick:d,"data-url":t,children:m})}function U1e(e){const[t,n]=c.useState(null),[s,o]=c.useState(null),r=(d,m)=>{if(!m)return;const f=d===t,h=s!==null&&d===s-1;return F(z2,f&&"rounded-s-md ps-0.5 -ms-0.5",h&&"rounded-e-md pe-0.5 -me-0.5")},a=c.useCallback(d=>{const m=Eae(e,d);o(d),n(m)},[e]),l=c.useCallback(()=>{n(null),o(null)},[]),u=c.useCallback(d=>wae(d,t,s),[t,s]);return{handleCitationHover:a,handleCitationHoverEnd:l,isItemHighlighted:u,getHighlightClass:r}}const Ox=_r(),Dx="font-bold text-accent-550 dark:text-accent-600 underline text-start cursor-pointer";function $o(e){const{items:t,shouldAnimate:n,shouldHighlight:s,dangerouslyUseHtml:o,shouldTestForUrl:r=!0}=e,{t:a}=q(),l=c.useContext(_m),u=pe(je),d=se(LI),m=se(bo),f=W("suppress-inline-link-nav-dialog")||(re.instance().config().suppressInlineLinkNavConfirmationPopups??!1),{handleCitationHover:h,handleCitationHoverEnd:g,isItemHighlighted:C,getHighlightClass:v}=U1e(t);return i.jsx(i.Fragment,{children:t.map((y,b)=>{var V;const E=!!s||C(b),S=v(b,E);if(y.type==="citation"){const{title:U,url:K,index:Q,delay:Z,subCitations:Y}=y;return i.jsx(i1e,{title:U,url:K,index:Q,shouldAnimate:n,delay:Z,subCitations:Y,onCitationHover:()=>h(b),onCitationHoverEnd:g},b)}if(y.type==="italic"||y.type==="bold"||y.type==="strikethrough"||y.type==="sup"||y.type==="sub"||y.type==="code"){const U=i.jsx($o,{items:y.items,shouldAnimate:n,dangerouslyUseHtml:o});return y.type==="italic"?i.jsx("em",{className:S,children:U},b):y.type==="bold"?i.jsx("strong",{className:S,children:U},b):y.type==="strikethrough"?i.jsx("del",{className:S,children:U},b):y.type==="sup"?i.jsx("sup",{className:S,children:U},b):y.type==="sub"?i.jsx("sub",{className:S,children:U},b):i.jsx(ge.code,{className:"font-ligatures-none mx-0.5 rounded-[4px] border border-stroke-300 bg-accent-200/60 px-1 py-px font-mono text-foreground-800 text-sm dark:bg-accent-200",initial:n?"start":"end",animate:"end",variants:Ox,custom:y.delay,children:U},b)}if(y.type!=="word")return null;const{word:I,url:_,delay:T,format:A}=y,N=F1e({word:I,url:_,testForUrl:!A&&r}),P={initial:"start",animate:"end",variants:Ox,custom:T,...o===!0||A==="latexAsHtml"?{dangerouslySetInnerHTML:{__html:((V=window.copilotTrustedTypesPolicy)==null?void 0:V.createHTML(I))??""}}:{children:I}};if(N.url){if(fae(N.url))return i.jsx(N1e,{url:N.url,text:N.word,shouldAnimate:n,delay:T},b);if(L1e(N.url))return i.jsx(j1e,{url:N.url,text:N.word,shouldAnimate:n,shouldHighlight:E,delay:T},b);const U=()=>{if(f&&N.url){Eo(N.url);return}d({url:N.url,messageId:l,conversationId:u}),m("confirm-link-navigation")};return i.jsxs(c.Fragment,{children:[n?i.jsx(ge.span,{className:F(Dx,S),onClick:U,onKeyDown:K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),U())},role:"button",tabIndex:0,"data-url":N.url,"aria-label":a("composer.linkConfirmation.inlineItemText",{text:N.word,domain:es(N.url)}),...P}):i.jsx("span",{className:F(Dx,S),onClick:U,onKeyDown:K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),U())},role:"button",tabIndex:0,"data-url":N.url,"aria-label":a("composer.linkConfirmation.inlineItemText",{text:N.word,domain:es(N.url)}),...P}),N.suffix&&N.suffix]},b)}return n?i.jsx(ge.span,{className:S,...P},b):o===!0||A==="latexAsHtml"?i.jsx("span",{className:S,...P},b):E?i.jsx("span",{className:S,children:I},b):i.jsx(c.Fragment,{children:I},b)})})}function F1e({word:e,url:t,testForUrl:n}){return t?{url:t,word:e}:n?bse(e):{word:e}}function Ho(e){var t,n;return(n=(t=re.instance().config().styleOverrides)==null?void 0:t.typography)==null?void 0:n[e]}function gd(e){var t,n;return(n=(t=re.instance().config().styleOverrides)==null?void 0:t.padding)==null?void 0:n[e]}function B1e(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h1",{className:F(s??Ho("h1")??"text-2xl-medium","[&:not(:first-child)]:pt-6"),children:i.jsx($o,{shouldAnimate:t,items:n})})}function V1e(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h2",{className:F(s??Ho("h2")??"text-xl-medium","[&:not(:first-child)]:pt-3.5","pb-1"),children:i.jsx($o,{shouldAnimate:t,items:n})})}function H1e(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h3",{className:F(s??Ho("h3")??"text-lg-strong","pb-1","[&:not(:first-child)]:pt-3.5"),children:i.jsx($o,{shouldAnimate:t,items:n})})}function z1e(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h4",{className:F(s??Ho("h4")??"text-md-strong"),children:i.jsx($o,{shouldAnimate:t,items:n})})}function G1e(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h5",{className:F(s??Ho("h5")??"text-base-strong"),children:i.jsx($o,{shouldAnimate:t,items:n})})}function W1e(e){const{shouldAnimate:t,items:n,textSize:s}=e;return i.jsx("h6",{className:F(s??Ho("h6")??"text-base-medium"),children:i.jsx($o,{shouldAnimate:t,items:n})})}const $1e=[B1e,V1e,H1e,z1e,G1e,W1e];function q1e(e){const{shouldAnimate:t,items:n,level:s,textSize:o}=e,r=$1e[s-1];return r?i.jsx(r,{shouldAnimate:t,items:n,textSize:o}):null}const K1e=_r(),jx="relative pb-6 w-full after:border-b after:border-stroke-300 after:w-full after:absolute after:mt-3";function Z1e(e){const{delay:t,shouldAnimate:n}=e;return n?i.jsx(ge.div,{className:jx,initial:"start",animate:"end",variants:K1e,custom:t}):i.jsx("div",{className:jx})}const Y1e=_r();function Q1e(e){const{content:t,shouldAnimate:n,delay:s,dangerouslyUseHtml:o}=e;return i.jsx(ge.div,{initial:n?"start":"end",animate:"end",custom:s,variants:Y1e,children:i.jsx("div",{className:"horizontal-scrollbar overflow-x-auto whitespace-pre pb-3 pt-4 text-center",children:i.jsx($o,{items:t,shouldAnimate:n,dangerouslyUseHtml:o})})})}const Ux="relative list-outside marker:text-foreground-750 dark:marker:text-foreground-600 flex flex-col",J1e=_r();function X1e(e){const{items:t,ordered:n,start:s,shouldAnimate:o,BlockRenderer:r}=e,a=t.map(({items:l,delay:u},d)=>i.jsx(ge.li,{initial:o?"start":"end",animate:"end",variants:J1e,custom:u,className:"ps-2",children:i.jsx(r,{blocks:l,shouldAnimate:o})},d));return n?i.jsx("ol",{start:s,className:ue(Ux,"ms-5 marker:normal-nums marker:text-sm-strong"),children:a}):i.jsx("ul",{className:ue(Ux,"ms-4 px-1"),children:a})}const Tk={shouldCollapseCode:!1},Ak=c.createContext(Tk);function ehe(e){const{children:t,config:n={}}=e,s=c.useMemo(()=>({...Tk,...n}),[n]);return i.jsx(Ak.Provider,{value:s,children:t})}function the(){return c.useContext(Ak)}function nhe(e){const{items:t,shouldAnimate:n}=e;return i.jsx("p",{children:i.jsx("span",{className:ue("font-ligatures-none","whitespace-pre-wrap",Ho("aiMessageDefault")),children:i.jsx($o,{items:t,shouldAnimate:n})})})}const she=_r();function ohe(e){const{columns:t,data:n,shouldAnimate:s}=e;return i.jsxs("div",{className:"relative max-w-full",children:[i.jsx("div",{className:"my-6 max-w-full overflow-x-auto rounded-lg bg-white/25 dark:bg-black/25",children:i.jsxs("table",{className:"t-table",style:{borderSpacing:0},children:[i.jsx("thead",{children:i.jsx("tr",{children:t.map((o,r)=>i.jsx(Fx,{type:"head",items:o,shouldAnimate:s},r))})}),i.jsx("tbody",{children:n.map((o,r)=>i.jsx("tr",{children:o.map((a,l)=>i.jsx(Fx,{type:"data",items:a,shouldAnimate:s},l))},r))})]})}),i.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-lg border border-stroke-300 dark:border-stroke-450"})]})}function Fx(e){var r;const{type:t,items:n,shouldAnimate:s}=e,o=t==="head"?ge.th:ge.td;return i.jsx(o,{variants:she,initial:s?"start":"end",animate:"end",custom:((r=n[0])==null?void 0:r.delay)??0,children:i.jsx($o,{shouldAnimate:s,items:n})})}const rhe=c.lazy(()=>B(()=>import("./code-Dl-L0mr-.js"),__vite__mapDeps([355,1,356,357])));function vd(e){const{blocks:t,shouldAnimate:n,codeAnalytics:s,headingTextSize:o}=e,{shouldCollapseCode:r}=the();return i.jsx(i.Fragment,{children:t.map((a,l)=>{const u=`${a.type}-${l}`;switch(a.type){case"paragraph":return i.jsx(nhe,{items:a.items,shouldAnimate:n},u);case"list":return i.jsx(X1e,{ordered:a.ordered,start:a.start,items:a.items,BlockRenderer:vd,shouldAnimate:n},u);case"heading":return i.jsx(q1e,{items:a.items,level:a.level,shouldAnimate:n,textSize:o},u);case"code":return i.jsx(rhe,{content:a.content,original:a.original,delay:a.delay,shouldAnimate:n,language:a.language,dangerouslyUseHtml:a.dangerouslyUseHtml,shouldCollapse:r,analytics:s},u);case"latex":return i.jsx(Q1e,{content:a.content,delay:a.delay,shouldAnimate:n,dangerouslyUseHtml:a.dangerouslyUseHtml},u);case"table":return i.jsx(ohe,{columns:a.columns,data:a.data,shouldAnimate:n},u);case"blockquote":return i.jsx(Qpe,{items:a.items,delay:a.delay,shouldAnimate:n,BlockRenderer:vd},u);case"hr":return i.jsx(Z1e,{delay:a.delay,shouldAnimate:n},u);default:return null}})})}let Lp=null,lf=null;async function ahe(e){Lp||(lf||(lf=B(()=>import("./katex-CfZphoad.js"),[]).then(t=>{Lp=t.default,lf=null})),await lf,e==null||e())}function kk(e,t,n){return Lp?Lp.renderToString(e,{output:"mathml",displayMode:t,throwOnError:!1}):(ahe(n),e)}var Ha={},uu={},za={},Bx;function Mk(){if(Bx)return za;Bx=1,Object.defineProperty(za,"__esModule",{value:!0}),za.Node=za.NodeType=void 0;var e;(function(r){r[r.element=1]="element",r[r.text=3]="text"})(e||(za.NodeType=e={}));class t{constructor({nodeType:a,namespace:l,selfCloseTag:u,text:d,nodeName:m,childNodes:f,parentNode:h,attributes:g}){this.namespace=l||null,this.nodeType=a,this.isSelfCloseTag=!!u,this.text=d||null,this.nodeName=a===e.element?m:"#text",this.childNodes=f||[],this.parentNode=h,this.attributes=g||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce((a,l)=>a+(l.nodeType===e.text?l.text:l.outerHTML),"")}get outerHTML(){if(this.nodeType===e.text)return this.textContent;const a=o(this.attributes),l=`<${this.nodeName}${a.length?" ":""}${a}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return l;const u=this.childNodes.map(m=>m.outerHTML).join(""),d=`</${this.nodeName}>`;return[l,u,d].join("")}get textContent(){return this.nodeType===e.text?this.text:this.childNodes.map(a=>a.textContent).join("").replace(/\x20+/g," ")}getAttribute(a){const l=this.attributes.find(u=>u.name===a);return l?l.value:null}getElementsByTagName(a){return n(this,l=>l.nodeName.toUpperCase()===a.toUpperCase())}getElementsByClassName(a){const l=new RegExp(`^(.*?\\s)?${a}(\\s.*?)?$`);return n(this,u=>!!(u.attributes.length&&l.test(u.getAttribute("class")||"")))}getElementsByName(a){return n(this,l=>!!(l.attributes.length&&l.getAttribute("name")===a))}getElementById(a){return s(this,l=>!!(l.attributes.length&&l.getAttribute("id")===a))}}za.Node=t,t.ELEMENT_NODE=e.element,t.TEXT_NODE=e.text;function n(r,a){return r.nodeType===e.text?[]:r.childNodes.reduce((l,u)=>u.nodeType!==e.text&&a(u)?[...l,u,...n(u,a)]:[...l,...n(u,a)],[])}function s(r,a){for(let l=0,u=r.childNodes.length;l<u;l++){const d=r.childNodes[l];if(a(d))return d;const m=s(d,a);if(m)return m}return null}function o(r){return r.map(a=>a.name+(a.value?`="${a.value}"`:"")).join(" ")}return za}var du={},Vx;function ihe(){if(Vx)return du;Vx=1,Object.defineProperty(du,"__esModule",{value:!0}),du.NodeAttribute=void 0;let e=class{constructor({name:n,value:s}){this.name=n,this.value=s}};return du.NodeAttribute=e,du}var Hx;function zx(){if(Hx)return uu;Hx=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.Dom=void 0;const e=Mk(),t=ihe(),n=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,s=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,o=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,r=/^<[a-z]/,a=/\/>$/,l=/^<\//,u=/^[^<]/,d=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,m=/^('|")|('|")$/g,f=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;let h=class{constructor(T){this.rawHTML=T}find(T,A){const k=g(this.rawHTML,T,A);return A?k[0]||null:k}getElementsByClassName(T){const A=new RegExp(`^(.*?\\s)?${T}(\\s.*?)?$`);return this.find(k=>!!(k.attributes.length&&A.test(k.getAttribute("class")||"")))}getElementsByTagName(T){return this.find(A=>A.nodeName.toUpperCase()===T.toUpperCase())}getElementById(T){return this.find(A=>A.getAttribute("id")===T,!0)}getElementsByName(T){return this.find(A=>A.getAttribute("name")===T)}getElementsByAttribute(T,A){return this.find(k=>k.getAttribute(T)===A)}};uu.Dom=h;function g(_,T,A=!1){const k=C(_),N=[];for(const P of k)if(P&&T(P)&&(N.push(P),A))return N;return N}function*C(_){const T=y(_);let A=null;for(let k=0,N=T.length;k<N;k++){const P=T[k];A=b(P,A)||A,v(A,P)&&(yield A,A=A.parentNode)}for(;A;)yield A,A=A.parentNode}function v(_,T){if(!T)return!1;const A=l.test(T),[,k]=T.match(d)||[];return A&&_.nodeName===k||_.isSelfCloseTag||_.nodeType===e.NodeType.text}function y(_){return _.match(n)||[]}function b(_,T){const A=u.test(_),k=r.test(_);return A?I(_,T):k?E(_,T):null}function E(_,T){var A;const[,k,N]=_.match(d)||[],P=a.test(_)||f.test(k),V=S(_),U=new e.Node({nodeType:e.NodeType.element,nodeName:k,namespace:N,attributes:V,childNodes:[],parentNode:T,selfCloseTag:P});return(A=T==null?void 0:T.childNodes)===null||A===void 0||A.push(U),U}function S(_){return(_.match(s)||[]).map(T=>{o.lastIndex=0;const A=o.exec(T)||[],[,k="",N=""]=A;return new t.NodeAttribute({name:k.trim(),value:N.trim().replace(m,"")})})}function I(_,T){var A;const k=new e.Node({nodeType:e.NodeType.text,nodeName:"#text",text:_,parentNode:T});return(A=T==null?void 0:T.childNodes)===null||A===void 0||A.push(k),k}return uu}var Gx;function che(){return Gx||(Gx=1,function(e){var t=Ha&&Ha.__createBinding||(Object.create?function(r,a,l,u){u===void 0&&(u=l);var d=Object.getOwnPropertyDescriptor(a,l);(!d||("get"in d?!a.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return a[l]}}),Object.defineProperty(r,u,d)}:function(r,a,l,u){u===void 0&&(u=l),r[u]=a[l]}),n=Ha&&Ha.__exportStar||function(r,a){for(var l in r)l!=="default"&&!Object.prototype.hasOwnProperty.call(a,l)&&t(a,r,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseFromString=void 0;const s=zx();function o(r){return new s.Dom(r)}e.parseFromString=o,n(zx(),e),n(Mk(),e)}(Ha)),Ha}var Wx=che();function T3(e){const t=[];let n="",s=!1;for(const o of e)o===" "||o===`
`?s=!0:s&&(t.push(n),n="",s=!1),n+=o;return n.length>0&&t.push(n),t}function lhe(e){const n=Wx.parseFromString(`<html>${e}</html>`).getElementsByTagName("html")[0];let s=[];for(const o of n.childNodes)o.nodeType===Wx.NodeType.text?o.textContent&&(s=s.concat(T3(o.textContent))):s.push(o.outerHTML);return s}function uhe(e){return e===" "||e===`
`||e==="	"}function Nk(e,t,n={}){if(e.length<=t)return e;function s(l){const u=l.trim();return n.ellipsis?`${u}...`:u}const o=e.indexOf(`
`,0);if(o>=0&&o<t){const l=e.slice(0,o);return s(l)}let r=t;for(;r>0;){const l=e[r];if(l&&!uhe(l))r-=1;else break}let a=e.slice(0,t);return r>0&&(a=e.slice(0,r)),s(a)}function dhe(e){return!!(e&&e.trim().length>0)}function QTe(e){return!dhe(e)}let Do=null;function Rk(e){return Do||(B(()=>import("./core-DRXlxHeH.js"),__vite__mapDeps([358,1])).then(t=>t.default).then(t=>{Do=t,e==null||e()}),null)}async function mhe(e){const[{ALIAS_TO_SUPPORTED_LANGUAGE:t},{loadLanguageModule:n}]=await Promise.all([B(()=>import("./language-constants-b8iPQnVN.js"),[]),B(()=>import("./language-loader-BbqugLqr.js"),__vite__mapDeps([359,1]))]),s=t.get(e);if(!s)return!1;const o=await n(s);return o?Do?(Do.registerLanguage(e,o),!0):(Rk(()=>{Do==null||Do.registerLanguage(e,o)}),!1):!1}const fhe={jsx:["xml"],tsx:["xml"]};async function phe(e){const t=e.map(async s=>Do?Do.getLanguage(s)?!1:mhe(s):!1);return(await Promise.allSettled(t)).some(s=>s.status==="fulfilled"&&s.value)}async function hhe(e){const t=fhe[e]??[];return phe([...t,e])}const wc=.006;function $x(e){return{title:e.props.title,index:e.props.index,url:e.props.url,publisher:e.props.publisher,snippet:e.props.snippet,iconUrl:e.props.iconUrl}}function vc({items:e,delay:t,isHtml:n,forceRender:s,richCitationsEnabled:o}){var a,l,u;const r=[];for(const d of e){if(d.type==="citation"){if(o&&r.length>0&&((a=r[r.length-1])==null?void 0:a.type)==="citation"){(l=r[r.length-1].subCitations)==null||l.push($x(d));continue}const v=t.getValue();t.queueUpdate(wc),r.push({type:"citation",delay:v,...d.props,subCitations:o?[$x(d)]:[]});continue}if(d.type==="latex"){const v=kk(d.props.content,!1,s),y=t.getValue();t.queueUpdate(wc),r.push({type:"word",word:v,delay:y,format:"latexAsHtml"});continue}if(d.props.link){const v=d.props.text,{url:y}=d.props.link,b=t.getValue();t.queueUpdate(wc),r.push({type:"word",word:v,delay:b,url:y});continue}let m=null,f=null;if(d.props.annotations){for(const v of["italic","bold","strikethrough","code","sub","sup"])if(d.props.annotations[v]){const b={type:v,items:[]};(v==="code"||v==="sup"||v==="sub")&&(b.delay=t.getValue(),t.queueUpdate(wc)),f?(f.items.push(b),f=b):(m=b,f=b)}}const h=[],g=(u=d.props.annotations)==null?void 0:u.code;let C;n?C=lhe(d.props.text):C=T3(d.props.text);for(let v=0;v<C.length;v+=1)h.push({type:"word",word:C[v],delay:t.getValue(),format:g?"code":void 0}),t.queueUpdate(wc);f&&m?(f.items.push(...h),r.push(m)):r.push(...h)}return r}function Cd({contentBlocks:e,delay:t,forceRender:n,richCitationsEnabled:s}){const o=[];for(const r of e)switch(r.type){case"paragraph":{o.push({type:"paragraph",items:vc({items:r.props.items,delay:t,forceRender:n,richCitationsEnabled:s})});continue}case"list":{o.push({type:"list",ordered:r.props.ordered,start:r.props.start,items:r.props.items.map(a=>({delay:t.getValue(),items:Cd({contentBlocks:a,delay:t,forceRender:n,richCitationsEnabled:s})}))});continue}case"heading":{o.push({type:"heading",level:r.props.level,items:vc({items:r.props.items,delay:t,richCitationsEnabled:s})});continue}case"hr":{o.push({type:"hr",delay:t.getValue()}),t.queueUpdate(wc);continue}case"code":{const{language:a,content:l}=r.props;if(l.type!=="text")continue;let u=l.props.text,d=!1;if(a){const f=Rk(n);if(hhe(a).then(h=>{h&&n()}),f!=null&&f.getLanguage(a)){const{value:h}=f.highlight(l.props.text,{language:a});h&&(u=h,d=!0)}}const m={...l,props:{...l.props,text:u}};o.push({type:"code",content:vc({items:[m],delay:t,isHtml:d,richCitationsEnabled:s}),original:l.props.text,language:a,delay:t.getValue(),dangerouslyUseHtml:d});continue}case"latex":{const{content:a}=r.props;if(a.type!=="text")continue;a.props.text=kk(a.props.text,!0,n),o.push({type:"latex",content:vc({items:[a],isHtml:!0,delay:t,richCitationsEnabled:s}),delay:t.getValue(),dangerouslyUseHtml:!0});continue}case"table":{o.push({type:"table",columns:r.props.columns.map(a=>vc({items:a,delay:t,richCitationsEnabled:s})),data:r.props.data.map(a=>a.map(l=>vc({items:l,delay:t,richCitationsEnabled:s})))});continue}case"blockquote":{o.push({type:"blockquote",delay:t.getValue(),items:Cd({contentBlocks:r.props.items,delay:t,forceRender:n,richCitationsEnabled:s})});continue}default:{console.log(`Unhandled block type: ${r.type}`);continue}}return o}const Rn={SingleDollar:"SingleDollar",DoubleDollar:"DoubleDollar",Bracket:"Bracket",Inline:"Inline"},js={[Rn.SingleDollar]:{start:"$",end:"$"},[Rn.DoubleDollar]:{start:"$$",end:"$$"},[Rn.Bracket]:{start:"\\[",end:"\\]"},[Rn.Inline]:{start:"\\(",end:"\\)"}};function ghe(e){function t(s,o){const r=s.pos,a=s.posMax;let l=r,u=null;if(s.src.charAt(l)===js[Rn.SingleDollar].start&&!/[0-9a-zA-Z\\]/.test(s.src.charAt(l-1))&&!/[ \n$]/.test(s.src.charAt(l+1)))u=Rn.SingleDollar;else if(s.src.charAt(l)===js[Rn.Inline].start[0]&&s.src.charAt(l+1)===js[Rn.Inline].start[1])u=Rn.Inline;else return!1;l+=js[u].start.length;const d=s.src.slice(r,l);if(d.length>2)return!1;const m=l;let f=0;for(;l<a;){const h=s.src.charAt(l);let g=!1;if(u===Rn.SingleDollar?g=h===js[Rn.SingleDollar].end&&s.src.charAt(l-1)!==" "&&s.src.charAt(l-1)!=="\\"&&!/[0-9a-zA-Z]/.test(s.src.charAt(l+1)):g=h===js[Rn.Inline].end[0]&&s.src.charAt(l+1)===js[Rn.Inline].end[1],h==="{"&&(l===0||s.src.charAt(l-1)!=="\\"))f+=1;else if(h==="}"&&(l===0||s.src.charAt(l-1)!=="\\")){if(f-=1,f<0)return!1}else if(g&&f===0){const C=l,v=l+js[u].end.length;if(v-C===d.length){if(!o){const y=s.src.slice(m,C).replace(/[ \n]+/g," ").trim();s.push({type:"latex",content:y,block:!1,level:s.level})}return s.pos=v,!0}}l+=1}return o||(s.pending+=d),s.pos+=d.length,!0}function n(s,o,r,a){const l=s.tShift[o],u=s.bMarks[o]+l;let d=s.src.slice(u,s.eMarks[o]),m=null;if(d.startsWith(js[Rn.DoubleDollar].start)?m=js[Rn.DoubleDollar]:d.startsWith(js[Rn.Bracket].start)&&(m=js[Rn.Bracket]),!m)return!1;let f=o,h=!1;for(;f<=r;){const C=s.tShift[f],v=s.bMarks[f]+C;if(d=s.src.slice(v,s.eMarks[f]),d.endsWith(m.end)&&(f>o||d!==m.end)){h=!0;break}f+=1}if(!h)return!1;if(a)return!0;const g=s.src.slice(u+m.start.length,s.eMarks[f]-m.end.length);return s.tokens.push({type:"latex_block",content:g.trim(),lines:[o,f],level:s.level}),s.line=f+1,!0}e.inline.ruler.push("latex",t,{}),e.block.ruler.after("fences","latex_block",n,{})}function vhe(e){return e.replaceAll(/(\n\n\$\$.*?\$\$) *(\n\n)/g,"$1$2")}function Che(e){return[yhe,_t("kill-post-process-latex-double-dollar")?null:vhe].filter(n=>n!==null).reduce((n,s)=>s(n),e)}const o0="\\[",qx="\\]";function yhe(e){return e.includes(o0)?e.replaceAll(o0,`

${o0}`).replaceAll(qx,`${qx}

`):e}const Am=new WL({breaks:!0});Am.use(ghe);Am.inline.ruler.enable(["text","newline","emphasis","links","backticks","sup","sub","latex","del"],!0);Am.block.ruler.enable(["list","paragraph","heading","hr","fences","table","blockquote","latex_block"],!0);Am.core.ruler.enable(["block","inline","references"],!0);function bhe(e){const[t="",...n]=e.replace(dm,"").split(dd);return{index:t,title:n.join(dd)}}function Pk(e,t={}){const n=[];let s=null,o=!1,r=!1,a=!1;for(const l of e)switch(l.type){case"text":case"sup":case"sub":if("content"in l&&l.content){const u={},d=l.content.startsWith(dm)?{type:"citation",props:{index:"",title:"",url:"",iconUrl:null,publisher:null,snippet:null}}:{type:"text",props:{text:l.content}};if(d.type==="text"&&(s&&(d.props.link=s),o&&(u.bold=!0),r&&(u.italic=!0),a&&(u.strikethrough=!0),l.type==="text"&&(d.props.text=d.props.text.replaceAll("\\$","$")),l.type==="sup"&&(u.sup=!0),l.type==="sub"&&(u.sub=!0),Object.keys(u).length>0&&(d.props.annotations=u)),d.type==="citation"&&s){const{citations:m}=t,{index:f,title:h}=bhe(l.content),g=m==null?void 0:m.find(C=>C.index===f);d.props={index:f,title:(g==null?void 0:g.title)??h,url:s.url,iconUrl:(g==null?void 0:g.iconUrl)??null,publisher:(g==null?void 0:g.publisher)??null,snippet:(g==null?void 0:g.snippet)??null}}n.push(d)}break;case"softbreak":case"hardbreak":n.push({type:"text",props:{text:`
`}});break;case"code":"content"in l&&n.push({type:"text",props:{text:l.content,annotations:{code:!0}}});break;case"latex":"content"in l&&n.push({type:"latex",props:{content:l.content}});break;case"strong_open":o=!0;break;case"strong_close":o=!1;break;case"em_open":r=!0;break;case"em_close":r=!1;break;case"del_open":a=!0;break;case"del_close":a=!1;break;case"link_open":s="href"in l?{url:Qr(l.href)}:null;break;case"link_close":s=null;break}return n}function uf(e,t){return e!==void 0&&e.type==="inline"&&"children"in e?Pk(Array.isArray(e.children)?e.children:[],t):null}function xhe(e,t){let n=0;function s(){var a;let r=e[n];if(!r)return null;if(r.type==="hr")return n+=1,r=e[n],{type:"hr"};if(r.type==="latex_block")return n+=1,"content"in r?{type:"latex",props:{content:{type:"text",props:{text:r.content}}}}:null;if(r.type==="paragraph_open"){n+=1,r=e[n],n+=1;const l=uf(r,t);return l?{type:"paragraph",props:{items:l}}:null}if(r.type==="blockquote_open"){const l={type:"blockquote",props:{items:[]}};for(n+=1,r=e[n];(r==null?void 0:r.type)!=="blockquote_close";){const u=s();u&&"type"in u&&l.props.items.push(u),r=e[n]}return n+=1,l}if(r.type==="ordered_list_open"||r.type==="bullet_list_open"){const l={type:"list",props:{items:[],ordered:r.type==="ordered_list_open"}};"order"in r&&(l.props.start=r.order);const u=r.type==="ordered_list_open"?"ordered_list_close":"bullet_list_close";for(n+=1,r=e[n];(r==null?void 0:r.type)!==u;){const d=s(),m=[];if(d&&Array.isArray(d)){for(const f of d)(f.type==="paragraph"||f.type==="list"||f.type==="code"||f.type==="heading"||f.type==="blockquote")&&m.push(f);l.props.items.push(m)}r=e[n]}return n+=1,l}if(r.type==="list_item_open"){const l=[];for(n+=1,r=e[n];(r==null?void 0:r.type)!=="list_item_close";){const u=s();if(u)for(const d of[u].flat())(d.type==="paragraph"||d.type==="list"||d.type==="code"||d.type==="heading"||d.type==="blockquote")&&l.push(d);r=e[n]}return n+=1,l}if(r.type==="heading_open"){const l="hLevel"in r?r.hLevel:1;n+=1,r=e[n],n+=1;const u=uf(r,t);return u?{type:"heading",props:{level:l,items:u}}:null}if(r.type==="fence"&&"content"in r){const l={type:"code",props:{content:{type:"text",props:{text:yae(r.content)}},language:"params"in r?r.params:void 0}};return n+=1,l}if(r.type==="table_open"){const l=[],u=[];for(;(r==null?void 0:r.type)!=="table_close";){if((r==null?void 0:r.type)==="th_open"){n+=1,r=e[n];const d=uf(r,t);d&&l.push(d)}if((r==null?void 0:r.type)==="tr_open"&&!r.lines&&u.push([]),(r==null?void 0:r.type)==="td_open"){n+=1,r=e[n];const d=uf(r,t);d&&((a=u[u.length-1])==null||a.push(d))}n+=1,r=e[n]}return{type:"table",props:{columns:l,data:u}}}return r.type==="inline"&&"children"in r?(n+=1,Pk(r.children??[])):(n+=1,null)}const o=[];for(;n<e.length;){const r=s();r&&!Array.isArray(r)&&o.push(r)}return o}function A3(e,t={}){const n=Am.parse(Che(e),{});return xhe(n,t)}const She={getValue:()=>0,queueUpdate:()=>{}};function Ehe(){}function whe(e){const{text:t,codeAnalytics:n,excludeBlockTypes:s,headingTextSize:o}=e,r=A3(t).filter(l=>!(s!=null&&s.includes(l.type))),a=Cd({contentBlocks:r,delay:She,forceRender:Ehe});return i.jsx(vd,{blocks:a,shouldAnimate:!1,codeAnalytics:n,headingTextSize:o})}function Lk(e){const{artifact:t}=e;switch(t.type){case"code":{const{language:n,content:s}=t,o=`\`\`\`${n}
${s}
\`\`\``,r={click:{source:"copyCodeButton",scenario:"copyCode"},impression:{element:"code",scenario:"renderArtifact"}};return i.jsx(whe,{text:o,codeAnalytics:r})}case"file":{const{contentType:n,name:s,url:o}=t;return i.jsx(Kpe,{name:s,contentType:n,url:o})}default:return null}}function Ihe(e){const{activities:t}=e;return i.jsx("div",{className:"t-custom-scrollbar flex flex-col gap-4 overflow-y-auto",children:t.map((n,s)=>i.jsxs("div",{className:"flex flex-col gap-4 pt-3",children:[i.jsx("h3",{children:n.title}),n.artifacts.map((o,r)=>i.jsx(Lk,{artifact:o},r))]},s))})}const _he=R(void 0);function The(){const[e,t]=Ue(_he),n=!!e,s=()=>{t(void 0)};return!e||e.length===0?null:i.jsx(Bo,{className:"w-full max-w-[606px] p-4 pb-6",headerText:z("research.stepsDrawer.title"),isOpen:n,variant:"drawer",trapFocus:!0,onClose:s,children:i.jsx(Ihe,{activities:e})})}function Ok(e){const{onClose:t,children:n,className:s}=e,{t:o}=q(),r=c.useRef(null);return go({onOutsideEvent:()=>{t(r)},elements:[r],invokeOnce:!1,includeScroll:!1,includeFocus:!1}),Sd.createPortal(i.jsx(ln,{mode:"sync",className:F("relative",ct.modal),children:i.jsx("div",{className:"fixed inset-0 flex items-end justify-center bg-black/20",children:i.jsxs("div",{className:"flex max-h-[90%] w-full shrink-0 flex-col rounded-t-4xl border border-white/100 bg-stone-150 backdrop-blur-xl dark:border-white/5 dark:bg-midnight-800","aria-label":o("common.bottomSheetDialog"),children:[i.jsx("div",{className:"relative flex w-full items-center justify-center py-3",children:i.jsx("div",{className:"h-[6px] w-12 rounded-full bg-black/25 dark:bg-white/25"})}),i.jsx("div",{className:F("no-scrollbar w-full overflow-y-auto px-4 pb-4",s),ref:r,children:n})]})})}),document.body)}function dn(e){const t=c.useRef(null),{isOpen:n,dialogName:s,headerText:o,headerIcon:r,headerTextClassName:a,fullBleed:l,children:u,onClose:d,className:m,bottomSheetClassName:f,closeButtonTestId:h,backdropOpacity:g="default",fadeInDuration:C=ts.default,bottomSheetOnSmall:v,customScrollBar:y,"aria-labeledby":b,hideDismissButton:E=!1}=e,S=c.useRef(null),{t:I}=q(),_=gt({breakpoint:"sm"}),T=c.useId(),A=v&&_,k=g==="none"?"backdrop:bg-transparent":"backdrop:bg-background-850/30 dark:backdrop:bg-background-150/70",N=n&&!A&&d!==void 0;go({onOutsideEvent:N?d:()=>{},elements:N?[S]:[],includeScroll:!1,includeFocus:!1});const{modalAttributes:P}=j1({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});if(c.useEffect(()=>{var V,U;n?(V=t.current)==null||V.showModal():(U=t.current)==null||U.close()},[n]),c.useEffect(()=>{const V=t.current;if(!V)return()=>{};const U=()=>{d==null||d()};return V.addEventListener("cancel",U),()=>{V.removeEventListener("cancel",U)}},[d]),A&&n){const V=!l&&o;return i.jsxs(Ok,{onClose:d,className:f,children:[V&&i.jsx("h2",{id:T,className:"py-6 text-center text-foreground-850 text-2xl",children:o}),u]})}return i.jsx(ge.dialog,{className:F("fixed inset-0 m-auto rounded-4xl border border-white/10 bg-background-150 text-foreground-800 shadow-xl dark:bg-background-250",k,y&&"t-custom-scrollbar"),animate:n?"animate":"initial",initial:"initial",exit:"exit",variants:{initial:Fe,animate:nt},transition:{duration:C,ease:"easeInOut"},ref:t,role:"dialog","aria-modal":"true","aria-labelledby":o?T:b,"aria-label":o?void 0:s,...n?P:{},children:n&&i.jsxs("div",{"data-modal-overlay":"true",className:F("flex min-h-[150px] flex-col gap-3",!l&&"p-6",m),ref:S,children:[i.jsx(pA,{}),!l&&i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o&&i.jsxs("div",{children:[r,i.jsx("h2",{id:T,className:F("text-foreground-800 text-lg-strong",a),children:o})]}),d&&!E&&i.jsx(ne,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:I("common.closeText"),"aria-label":I("common.closeText"),onClick:d,testId:h,children:i.jsx(an,{className:"size-5"})})]}),u]})})}const Ahe="XF86Back",khe=461,Mhe=8;function k3(e){return e.key===Ahe||e.keyCode===khe||e.keyCode===Mhe}function Nhe(e){const{className:t,children:n}=e;return i.jsx("span",{className:ue("inline-block h-4 min-w-4 rounded-md bg-accent-200 px-1 pt-px text-center leading-4 text-foreground-800 text-2xs dark:bg-accent-200",t),children:n})}const Rhe={default:"border-black/10 dark:border-white/10",weak:"border-black/5 dark:border-white/5",accent:"border-stroke-300"};function ms(e){const{horizontalMargin:t=!0,verticalMargin:n=!0,color:s="default",className:o}=e;return i.jsx("div",{className:F("border-t-[1px]",t&&"mx-2",n&&"my-2",Rhe[s],o)})}const Phe=c.lazy(()=>B(()=>import("./index-M_tPUWUO.js").then(e=>e.i),__vite__mapDeps([360,1,319]))),Lhe="focus-within:bg-neutral-50/5 before:pointer-events-none before:absolute before:inset-0 before:rounded-3xl before:border before:border-transparent focus-within:before:border-[1px] focus-within:before:border-[rgba(255,255,255,0.1)]";function Ohe(){var f,h;const e=M(LZ),[t,n]=Ue(rw),s=c.useContext(_m),o=M(je),r=EC(),a=((f=re.instance().config().composer)==null?void 0:f.largeScreen)===!0&&((h=re.instance().config().composer)==null?void 0:h.voiceOnly)===!0,l=re.instance().config().canHandleBackButtonEvents===!0,u=()=>{n(null),ye({source:"citationOverflowModal",scenario:"close"})},{focusable:d}=Aa({isFocusBoundary:!0});hs(g=>{k3(g)&&(g.stopPropagation(),u())});const m=c.useMemo(()=>new Map((t??[]).map((g,C)=>[C,c.createRef()])),[t]);return i.jsx(dn,{isOpen:e,onClose:l?void 0:u,headerText:`${t==null?void 0:t.length} ${z("chat.references")}`,className:ue(a?"max-h-[40vh]":"max-h-[80vh]",a?"w-[480px]":"w-[440px] max-w-[80vw]","mx-4 px-2"),children:i.jsx(Y1.Provider,{value:d.focusKey??"",children:i.jsx("div",{className:ue("flex flex-col gap-2 overflow-y-auto overflow-x-hidden pe-1.5",a?"no-scrollbar":"t-custom-scrollbar"),children:t==null?void 0:t.map((g,C)=>i.jsx(Dk,{ref:m.get(C),index:C,citation:g,currentConversationId:o,messageId:s,isLargeScreenVoiceComposer:a,citationsModalData:t,rel:r,onClick:g.onClick},C))})})})}const Dk=c.forwardRef(({index:e,citation:t,currentConversationId:n,messageId:s,citationsModalData:o,isLargeScreenVoiceComposer:r=!1,rel:a,onClick:l},u)=>{const{title:d,url:m,publisher:f,shouldTruncate:h}=t,{refCallback:g,focusable:C}=Aa({autoRestoreFocus:!0,forceFocus:!0,scrollIntoViewOnFocus:!0},u);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:ue(r&&Lhe,"group relative flex flex-row items-center gap-2 rounded-3xl p-2"),children:[i.jsxs("a",{rel:a,ref:g,className:ue("flex flex-1 flex-col items-start gap-2 py-1",h&&"max-w-full"),"data-spatial-navigation-autofocus":!0,href:m,"data-spatial-focus-key":C.focusKey,target:"_blank",onClick:v=>{if(l){v.preventDefault(),l();return}if(r){v.preventDefault();return}ye({source:"citationModalLink",customData:JSON.stringify({destination:lo(m),conversationId:n,messageId:s})})},children:[i.jsxs("div",{className:ue("flex items-center gap-1",h&&"max-w-full"),children:[i.jsx(Nhe,{children:t.index}),i.jsx("div",{className:ue("text-foreground-550 text-sm",h&&"max-w-full truncate"),title:f??es(m),children:f??es(m)})]}),i.jsx("div",{className:ue(h&&"max-w-full truncate"),title:d,children:d}),i.jsx("div",{className:ue("text-foreground-550 text-sm",h&&"max-w-full truncate"),title:es(m),children:es(m)})]}),r&&i.jsx(c.Suspense,{fallback:i.jsx("span",{}),children:i.jsx("div",{className:"flex size-28 items-center justify-center rounded-2xl bg-white opacity-0 group-focus-within:opacity-100",children:i.jsx(Phe,{value:m,size:86})})})]}),e<o.length-1&&i.jsx(ms,{horizontalMargin:!1,verticalMargin:!1,className:"my-4"})]})});Dk.displayName="CitationItem";const Dhe=c.lazy(()=>B(()=>Promise.resolve().then(()=>p3),void 0));async function jhe(){if(!(await zn("/conversations/history",{options:{method:"DELETE"}})).ok)throw new Error("Failed to delete conversation history")}function Uhe(){const{t:e}=q(),t=se(aw),n=hl(vt),s=wr(),o=se(Sn),a=ut().startsWith("/chats"),l=Sr(),{mutate:u,isPending:d}=Mi({mutationFn:jhe,onSuccess:async()=>{t(null),n(h=>{h.clear()}),(a||l)&&await s()},onError:()=>{o({title:e("common.somethingWrong"),dismissable:!1,dismissAfter:2e3})}}),m=()=>{u()},f=()=>{t(null)};return i.jsxs(dn,{isOpen:!0,onClose:f,headerText:e("settings.clearHistory.header"),className:"min-h-[328px] w-full max-w-[400px]",children:[i.jsx("p",{className:"text-start",children:e("settings.clearHistory.description")}),i.jsx(ne,{title:e("settings.clearHistory.confirm"),color:"default",size:"56-xl",variant:"rect",className:"mt-3 w-full text-system-red-550 dark:text-system-red-350",onClick:m,disabled:d,children:d?i.jsx(Dhe,{type:"spinnerThemed",className:"size-6"}):e("settings.clearHistory.confirm")}),i.jsx(ne,{title:e("common.cancel"),color:"strong",size:"56-xl",variant:"rect",className:"mt-3 w-full",onClick:f,children:e("common.cancel")})]})}function r0({Icon:e,title:t,description:n}){return i.jsxs("div",{className:"flex items-start gap-3 rounded-lg px-4 py-2",children:[i.jsx("div",{className:"shrink-0",children:i.jsx(e,{className:"size-5"})}),i.jsxs("div",{className:"flex flex-col ps-1",children:[i.jsx("h3",{className:"text-foreground-800 text-sm-strong",children:t}),i.jsx("p",{className:"pt-1 text-foreground-600 text-sm",children:n})]})]})}const jk=(e,t,n)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionManagementImpression",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionStatus:t,eventInfo_connectorPlatformConnectionStartSource:n}})},ju=(e,t,n,s)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionManagementAction",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionStatus:t,eventInfo_connectorPlatformConnectionStartSource:n,eventInfo_connectorPlatformConnectionActionType:s}})},Fhe=(e,t)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionStartPageImpression",eventInfo_connectorPlatformConnectionStartSource:t,eventInfo_connectorPlatformConnectorType:e}})},Op=(e,t,n)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionStartPageAction",eventInfo_connectorPlatformConnectionStartSource:t,eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectionActionType:n}})},Bhe=(e,t)=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionSetupFailureEvent",eventInfo_connectorPlatformConnectorType:e,eventInfo_connectorPlatformConnectorErrorType:t??"",eventInfo_source:"Component"}})},Vhe=e=>{D.trackEvent({name:"interaction",data:{eventName:"connectorPlatformConnectionSetupSuccessEvent",eventInfo_connectorPlatformConnectorType:e,eventInfo_source:"Component"}})},M3=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M23.3686 8.63379H8.63184V23.3704H23.3686V8.63379Z",fill:"white"}),c.createElement("path",{d:"M23.3688 30.0008L30.0004 23.3695L26.6846 22.8037L23.3688 23.3695L22.7637 26.4023L23.3688 30.0008Z",fill:"#EA4335"}),c.createElement("path",{d:"M2 23.3695V27.7904C2 29.0117 2.9892 30.0008 4.2105 30.0008H8.63152L9.31239 26.6851L8.63152 23.3695L5.01863 22.8037L2 23.3695Z",fill:"#188038"}),c.createElement("path",{d:"M30.0004 8.63147V4.21049C30.0004 2.98919 29.0112 2 27.7898 2H23.3688C22.9653 3.64452 22.7637 4.85476 22.7637 5.63073C22.7637 6.40668 22.9653 7.40691 23.3688 8.63147C24.8355 9.05145 25.9407 9.26145 26.6846 9.26145C27.4284 9.26145 28.5336 9.05145 30.0004 8.63147Z",fill:"#1967D2"}),c.createElement("path",{d:"M30.0007 8.63379H23.3691V23.3704H30.0007V8.63379Z",fill:"#FBBC04"}),c.createElement("path",{d:"M23.3686 23.3662H8.63184V29.9977H23.3686V23.3662Z",fill:"#34A853"}),c.createElement("path",{d:"M23.3681 2H4.2105C2.9892 2 2 2.98919 2 4.21049V23.3681H8.63152V8.63147H23.3681V2Z",fill:"#4285F4"}),c.createElement("path",{d:"M11.6544 20.0633C11.1036 19.6912 10.7223 19.1478 10.5142 18.4293L11.7926 17.9025C11.9086 18.3446 12.1112 18.6872 12.4005 18.9304C12.6878 19.1735 13.0378 19.2933 13.4468 19.2933C13.8649 19.2933 14.2241 19.1662 14.5244 18.912C14.8247 18.6578 14.9757 18.3335 14.9757 17.9412C14.9757 17.5396 14.8173 17.2117 14.5005 16.9575C14.1836 16.7033 13.7857 16.5762 13.3105 16.5762H12.5718V15.3107H13.2349C13.6438 15.3107 13.9884 15.2002 14.2684 14.9792C14.5484 14.7581 14.6884 14.456 14.6884 14.0711C14.6884 13.7284 14.563 13.4557 14.3126 13.2513C14.062 13.0467 13.7451 12.9436 13.3601 12.9436C12.9845 12.9436 12.686 13.0432 12.4649 13.244C12.244 13.4453 12.0779 13.6994 11.9823 13.9825L10.7168 13.4557C10.8844 12.9805 11.1921 12.5605 11.6434 12.1976C12.0947 11.8347 12.6712 11.6523 13.3713 11.6523C13.8888 11.6523 14.3549 11.7518 14.7676 11.9526C15.1801 12.1534 15.5044 12.4315 15.7384 12.7852C15.9723 13.1407 16.0884 13.5386 16.0884 13.9807C16.0884 14.4321 15.9796 14.8134 15.7623 15.1265C15.5449 15.4396 15.2778 15.6792 14.9609 15.8467V15.9223C15.37 16.0909 15.7255 16.3679 15.9888 16.7235C16.2559 17.0829 16.3905 17.512 16.3905 18.0131C16.3905 18.5141 16.2634 18.9616 16.009 19.3541C15.7549 19.7464 15.403 20.056 14.9573 20.2806C14.5097 20.5053 14.0068 20.6195 13.4486 20.6195C12.802 20.6214 12.2052 20.4353 11.6544 20.0633ZM19.5073 13.7192L18.1036 14.7342L17.4017 13.6694L19.9198 11.8531H20.885V20.4206H19.5073V13.7192Z",fill:"#4285F4"})),N3=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M16.0038 11.0319L11.0706 2.48113C11.2344 2.31734 11.4229 2.20991 11.6113 2.1377C10.1566 2.60794 9.48907 4.21242 9.48907 4.21242L0.476883 19.8292C0.350075 20.3188 0.314848 20.7609 0.330699 21.1501H10.1671L16.0038 11.0319Z",fill:"#34A853"}),c.createElement("path",{d:"M16.0034 11.0319L21.8401 21.1501H31.6766C31.6924 20.7609 31.6572 20.3188 31.5304 19.8292L22.5182 4.21242C22.5182 4.21242 21.8489 2.60794 20.3959 2.1377C20.5826 2.20991 20.7728 2.31734 20.9366 2.48113L16.0034 11.0319Z",fill:"#FBBC05"}),c.createElement("path",{d:"M16.0035 11.0308L20.9367 2.48001C20.7729 2.31622 20.5827 2.20878 20.396 2.13657C20.1811 2.06789 19.9504 2.02209 19.7003 2.00977H19.4396H12.5674H12.3067C12.0584 2.02033 11.8259 2.06612 11.611 2.13657C11.4243 2.20878 11.2341 2.31622 11.0703 2.48001L16.0035 11.0308Z",fill:"#188038"}),c.createElement("path",{d:"M10.1687 21.1494L5.29186 29.6033C5.29186 29.6033 5.12982 29.5258 4.90967 29.3655C5.60183 29.8886 6.27462 29.9996 6.27462 29.9996H25.4279C26.4847 29.9996 26.7048 29.6033 26.7048 29.6033C26.7083 29.6015 26.7101 29.5998 26.7136 29.598L21.8403 21.1494H10.1687Z",fill:"#4285F4"}),c.createElement("path",{d:"M10.169 21.1494H0.33252C0.381834 22.2977 0.889067 22.9688 0.889067 22.9688L1.25893 23.5993C1.28534 23.6363 1.30119 23.6574 1.30119 23.6574L2.10607 25.0452L3.91309 28.1344C3.96592 28.2595 4.02757 28.374 4.09273 28.4832C4.11739 28.5201 4.14028 28.5606 4.1667 28.5959C4.17375 28.6064 4.18079 28.617 4.18784 28.6276C4.41151 28.9375 4.66161 29.1771 4.9117 29.3655C5.13186 29.5276 5.29389 29.6033 5.29389 29.6033L10.169 21.1494Z",fill:"#1967D2"}),c.createElement("path",{d:"M21.8403 21.1494H31.6768C31.6275 22.2977 31.1202 22.9688 31.1202 22.9688L30.7504 23.5993C30.7239 23.6363 30.7081 23.6574 30.7081 23.6574L29.9032 25.0452L28.0962 28.1344C28.0434 28.2595 27.9817 28.374 27.9166 28.4832C27.8919 28.5201 27.869 28.5606 27.8426 28.5959C27.8355 28.6064 27.8285 28.617 27.8214 28.6276C27.5978 28.9375 27.3477 29.1771 27.0976 29.3655C26.8774 29.5276 26.7154 29.6033 26.7154 29.6033L21.8403 21.1494Z",fill:"#EA4335"})),R3=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M24.251 6.70996L16.087 12.9318L7.73633 6.70996V6.71164L7.74642 6.72005V15.4322L15.9928 21.7886L24.251 15.6778V6.70996Z",fill:"#EA4335"}),c.createElement("path",{d:"M26.3955 5.19615L24.2515 6.70956V15.6774L30.9979 10.6192V7.5722C30.9979 7.5722 30.179 3.22031 26.3955 5.19615Z",fill:"#FBBC05"}),c.createElement("path",{d:"M24.2515 15.6783V27.3097H29.4223C29.4223 27.3097 30.8936 27.1617 30.9996 25.5238V10.6201L24.2515 15.6783Z",fill:"#34A853"}),c.createElement("path",{d:"M7.74642 27.3192V15.4322L7.73633 15.4238L7.74642 27.3192Z",fill:"#C5221F"}),c.createElement("path",{d:"M7.73635 6.71107L5.60413 5.20607C1.8206 3.23023 1 7.58044 1 7.58044V10.6274L7.73635 15.4233V6.71107Z",fill:"#C5221F"}),c.createElement("path",{d:"M7.73633 6.71191V15.4241L7.74642 15.4325V6.72032L7.73633 6.71191Z",fill:"#C5221F"}),c.createElement("path",{d:"M1 10.6289V25.5326C1.10426 27.1721 2.57731 27.3184 2.57731 27.3184H7.74812L7.73635 15.423L1 10.6289Z",fill:"#4285F4"})),P3=R(null);function JTe(e){return Z7.includes(e)}const Hhe=e=>{switch(e){case"google-drive":return{title:z("connector.googleDrive.title"),icon:N3};case"google-calendar":return{title:z("connector.googleCalendar.title"),icon:M3};case"gmail":return{title:z("connector.googleMail.title"),icon:R3};case"google-contacts":return{title:z("connector.googleContacts.title"),icon:gm};default:return{title:"",icon:null}}},XTe=async({connectorType:e,error:t})=>{const n=$e(),s=!t;if(s?Vhe(e??"unknown"):Bhe(e??"unknown",t),t==="insufficient_scopes"&&e){n.set(P3,{type:e});return}const o=Dn("connectorConsentFlowStartUrl"),{title:r,icon:a}=Hhe(e);if(!a||!r){await qs({to:"/",from:window.location.href});return}n.set(Sn,{Icon:a,iconClassName:"size-10 shrink-0",intent:s?"info":"error",title:s?z("connector.connectSuccessTitle"):z("connector.connectUnsuccessfulTitle"),subtitle:s?z("connector.connectSuccessSubtitle",{title:r}):z("connector.connectUnsuccessfulSubtitle",{title:r}),dismissAfter:3e3}),window.setTimeout(async()=>qs({to:o??"/",from:window.location.href}),0)},Uk=async e=>(await Ct("/connections",EK,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({redirectUrl:`${window.location.origin}/connector/callback?connectorType=${e}`,type:e})}})).data.loginUrl,L3=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M6.24992 4.5C5.28344 4.5 4.49996 5.2835 4.49996 6.25V17.75C4.49996 18.7165 5.28344 19.5 6.24992 19.5H17.7496C18.7161 19.5 19.4996 18.7165 19.4996 17.75V13.75C19.4996 13.3358 19.8354 13 20.2496 13C20.6638 13 20.9995 13.3358 20.9995 13.75V17.75C20.9995 19.5449 19.5445 21 17.7496 21H6.24992C4.45504 21 3 19.5449 3 17.75V6.25C3 4.45507 4.45504 3 6.24992 3H10.2498C10.664 3 10.9998 3.33579 10.9998 3.75C10.9998 4.16421 10.664 4.5 10.2498 4.5H6.24992ZM12.9997 3.75C12.9997 3.33579 13.3355 3 13.7497 3H20.25C20.6642 3 21 3.33579 21 3.75V10.25C21 10.6642 20.6642 11 20.25 11C19.8358 11 19.5 10.6642 19.5 10.25V5.56074L14.28 10.7804C13.9871 11.0732 13.5123 11.0732 13.2194 10.7803C12.9265 10.4874 12.9265 10.0125 13.2194 9.71964L18.4395 4.5H13.7497C13.3355 4.5 12.9997 4.16421 12.9997 3.75Z"})),eAe=Object.freeze(Object.defineProperty({__proto__:null,default:L3},Symbol.toStringTag,{value:"Module"})),Fk=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M9 7C9.55228 7 10 7.44772 10 8C10 8.51284 9.61396 8.93551 9.11662 8.99327L9 9H7C5.34315 9 4 10.3431 4 12C4 13.5977 5.24892 14.9037 6.82373 14.9949L7 15H9C9.55228 15 10 15.4477 10 16C10 16.5128 9.61396 16.9355 9.11662 16.9933L9 17H7C4.23858 17 2 14.7614 2 12C2 9.31125 4.12231 7.11818 6.78311 7.00462L7 7H9ZM17 7C19.7614 7 22 9.23858 22 12C22 14.6888 19.8777 16.8818 17.2169 16.9954L17 17H15C14.4477 17 14 16.5523 14 16C14 15.4872 14.386 15.0645 14.8834 15.0067L15 15H17C18.6569 15 20 13.6569 20 12C20 10.4023 18.7511 9.09634 17.1763 9.00509L17 9H15C14.4477 9 14 8.55228 14 8C14 7.48716 14.386 7.06449 14.8834 7.00673L15 7H17ZM7 11H17C17.5523 11 18 11.4477 18 12C18 12.5128 17.614 12.9355 17.1166 12.9933L17 13H7C6.44772 13 6 12.5523 6 12C6 11.4872 6.38604 11.0645 6.88338 11.0067L7 11H17H7Z"})),tAe=Object.freeze(Object.defineProperty({__proto__:null,default:Fk},Symbol.toStringTag,{value:"Module"})),O3=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 15.5C12.8284 15.5 13.5 14.8284 13.5 14C13.5 13.1716 12.8284 12.5 12 12.5C11.1716 12.5 10.5 13.1716 10.5 14C10.5 14.8284 11.1716 15.5 12 15.5ZM8 6C8 3.79086 9.79086 2 12 2C14.2091 2 16 3.79086 16 6V7H16.75C18.5449 7 20 8.45507 20 10.25V17.75C20 19.5449 18.5449 21 16.75 21H7.25C5.45507 21 4 19.5449 4 17.75V10.25C4 8.45507 5.45507 7 7.25 7H8V6ZM12 3.5C10.6193 3.5 9.5 4.61929 9.5 6V7H14.5V6C14.5 4.61929 13.3807 3.5 12 3.5ZM7.25 8.5C6.2835 8.5 5.5 9.2835 5.5 10.25V17.75C5.5 18.7165 6.2835 19.5 7.25 19.5H16.75C17.7165 19.5 18.5 18.7165 18.5 17.75V10.25C18.5 9.2835 17.7165 8.5 16.75 8.5H7.25Z"})),nAe=Object.freeze(Object.defineProperty({__proto__:null,default:O3},Symbol.toStringTag,{value:"Module"})),fh=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M17.7545 14.0002C18.9966 14.0002 20.0034 15.007 20.0034 16.2491V16.8245C20.0034 17.7188 19.6838 18.5836 19.1023 19.263C17.5329 21.0965 15.1457 22.0013 12.0004 22.0013C8.8545 22.0013 6.46849 21.0962 4.90219 19.2619C4.32242 18.583 4.00391 17.7195 4.00391 16.8267V16.2491C4.00391 15.007 5.01076 14.0002 6.25278 14.0002H17.7545ZM17.7545 15.5002H6.25278C5.83919 15.5002 5.50391 15.8355 5.50391 16.2491V16.8267C5.50391 17.3624 5.69502 17.8805 6.04287 18.2878C7.29618 19.7555 9.26206 20.5013 12.0004 20.5013C14.7387 20.5013 16.7063 19.7555 17.9627 18.2876C18.3117 17.8799 18.5034 17.361 18.5034 16.8245V16.2491C18.5034 15.8355 18.1681 15.5002 17.7545 15.5002ZM12.0004 2.00488C14.7618 2.00488 17.0004 4.24346 17.0004 7.00488C17.0004 9.76631 14.7618 12.0049 12.0004 12.0049C9.23894 12.0049 7.00036 9.76631 7.00036 7.00488C7.00036 4.24346 9.23894 2.00488 12.0004 2.00488ZM12.0004 3.50488C10.0674 3.50488 8.50036 5.07189 8.50036 7.00488C8.50036 8.93788 10.0674 10.5049 12.0004 10.5049C13.9334 10.5049 15.5004 8.93788 15.5004 7.00488C15.5004 5.07189 13.9334 3.50488 12.0004 3.50488Z"})),sAe=Object.freeze(Object.defineProperty({__proto__:null,default:fh},Symbol.toStringTag,{value:"Module"})),D3=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M16.7568 9.30287C17.0621 9.02298 17.0828 8.54855 16.8029 8.24321C16.523 7.93787 16.0485 7.91725 15.7432 8.19714L10.2726 13.2119L8.28033 11.2197C7.98744 10.9268 7.51256 10.9268 7.21967 11.2197C6.92678 11.5126 6.92678 11.9874 7.21967 12.2803L9.71967 14.7803C10.0036 15.0643 10.4608 15.0742 10.7568 14.8029L16.7568 9.30287ZM20.25 5C17.5866 5 14.992 4.05652 12.45 2.15C12.1833 1.95 11.8167 1.95 11.55 2.15C9.00797 4.05652 6.41341 5 3.75 5C3.33579 5 3 5.33579 3 5.75V11C3 16.0012 5.95756 19.6757 11.7251 21.9478C11.9018 22.0174 12.0982 22.0174 12.2749 21.9478C18.0424 19.6757 21 16.0012 21 11V5.75C21 5.33579 20.6642 5 20.25 5ZM4.5 6.47793C7.07735 6.32585 9.58084 5.38829 12 3.67782C14.4192 5.38829 16.9227 6.32585 19.5 6.47793V11C19.5 15.2556 17.0466 18.3789 12 20.4419C6.95337 18.3789 4.5 15.2556 4.5 11V6.47793Z"})),oAe=Object.freeze(Object.defineProperty({__proto__:null,default:D3},Symbol.toStringTag,{value:"Module"})),zhe="https://policies.google.com/privacy";function Ghe(){const{t:e}=q(),[t,n]=Ue(Qv),[s,o]=c.useState(null),r=ut(),{type:a,title:l,IconComponent:u,visible:d,startSource:m}=t??{},f=()=>{n({visible:!1})};return c.useEffect(()=>(t!=null&&t.visible&&a&&m&&(Fhe(a,m),Uk(a).then(h=>o(h))),()=>{o(null)}),[t==null?void 0:t.visible,a,m,r]),!a||!l||!u||!d||!m?null:i.jsx(dn,{isOpen:d,className:"w-full max-w-[448px]",onClose:f,customScrollBar:!0,hideDismissButton:!0,children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"flex flex-col items-center justify-center gap-2.5 rounded-2xl border border-black/12 p-1 dark:border-white/12",children:i.jsx(u,{className:"size-12 p-1"})}),i.jsx("div",{className:"absolute -end-2 -top-1.5 flex size-5 items-center justify-center rounded-full bg-neutral-900 contrast-more:bg-neutral-100 contrast-more:outline",children:i.jsx(Fk,{className:"size-4 text-foreground-100 contrast-more:text-foreground-600 dark:text-foreground-900"})})]}),i.jsx("h3",{className:"pt-4 text-center text-foreground-800 text-lg sm:text-2xl",children:e("connector.confirmModal.title",{title:l})}),i.jsxs("div",{className:"mt-6 flex flex-col rounded-3xl bg-black/5 py-3 dark:bg-black/20",children:[i.jsx(r0,{Icon:fh,title:e("connector.confirmModal.personalizedTitle"),description:e("connector.confirmModal.personalizedDescription",{title:l})}),i.jsx(ms,{color:"accent",horizontalMargin:!1}),i.jsx(r0,{Icon:O3,title:e("connector.confirmModal.anyAccountTitle"),description:e("connector.confirmModal.anyAccountDescription")}),i.jsx(ms,{color:"accent",horizontalMargin:!1}),i.jsx(r0,{Icon:D3,title:e("connector.confirmModal.control"),description:e("connector.confirmModal.controlDescription",{title:l})})]}),i.jsxs("div",{className:"mt-6 flex flex-col gap-2",children:[i.jsx(ne,{className:"h-14 w-full sm:w-96",color:"strong",size:"56-xl",title:e("connector.confirmModal.continue",{title:l}),disabled:!s,onClick:()=>{Op(a,m,"continue"),s&&(Ws("connectorConsentFlowStartUrl",r),Nl(s))},children:s?i.jsxs("div",{className:"flex items-center gap-2",children:[e("connector.confirmModal.continue",{title:l}),i.jsx(L3,{className:"size-5"})]}):i.jsx(it,{className:"size-7"})}),i.jsx(ne,{className:"w-full sm:w-96",color:"subtle-dimmed-inverted",size:"56-xl",title:e("common.cancel"),onClick:()=>{f(),Op(a,m,"cancel")},children:e("common.cancel")}),i.jsxs("div",{className:"my-3 flex flex-col items-center gap-3 text-center sm:w-96",children:[i.jsx("p",{className:"px-3 text-foreground-600 text-xs",children:i.jsx(mn,{i18nKey:"connector.confirmModal.disclaimer",components:{Terms:i.jsx(ls,{href:ul,title:e("connector.confirmModal.terms"),className:"underline text-xs",children:e("connector.confirmModal.terms")})},values:{title:l}})}),i.jsx("p",{className:"text-foreground-600 text-xs",children:i.jsx(mn,{i18nKey:"connector.confirmModal.policyLinks",components:{MicrosoftPrivacyStatement:i.jsx(ls,{href:Jn,title:e("connector.confirmModal.privacyStatement",{title:e("connector.developerMicrosoft")}),className:"underline",children:e("connector.confirmModal.privacyStatement",{title:e("connector.developerMicrosoft")})}),ConnectorPrivacyStatement:i.jsx(ls,{href:zhe,title:e("connector.confirmModal.privacyStatement",{title:l}),className:"underline",children:e("connector.confirmModal.privacyStatement",{title:l})})}})})]})]})]})})}const Bk=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M20.051 16.8869C19.7881 17.0247 19.5135 17.148 19.2281 17.2552C18.3702 17.5775 17.4227 17.7602 16.4233 17.7602C12.7264 17.7602 9.50588 15.2171 9.50588 11.9537C9.50588 11.0361 10.0368 10.2407 10.7892 9.82178C7.44572 9.96193 6.58623 13.4468 6.58623 15.4882C6.58623 21.2596 11.9057 21.8453 13.052 21.8453C13.6696 21.8453 14.602 21.6654 15.1637 21.4892C15.198 21.4778 15.2321 21.4663 15.2661 21.4545C17.4348 20.7066 19.2653 19.2352 20.4685 17.328C20.641 17.0544 20.3375 16.7367 20.051 16.8869Z",fill:"url(#paint0_linear_11766_2366)"}),c.createElement("path",{d:"M10.2588 20.8619C9.56389 20.4312 8.96067 19.8633 8.48255 19.192C7.7427 18.1532 7.30039 16.8755 7.30039 15.4882C7.30039 13.4468 8.25099 11.6386 9.71629 10.4929C10.0491 10.2328 10.4752 9.97036 10.7892 9.82176C11.0329 9.70633 11.4499 9.49851 12.0036 9.50636C12.9218 9.51937 13.6154 9.98746 14.0103 10.519C14.3137 10.9275 14.5008 11.4307 14.507 11.9769C14.5072 11.9605 16.4183 5.75781 8.25313 5.75781C4.82396 5.75781 2 9.01327 2 11.8684C2 13.6795 2.42026 15.1255 2.94646 16.246C4.1184 18.7422 6.29164 20.6741 8.95009 21.5252C9.91281 21.8335 10.9384 22.0015 12.0036 22.0015C13.1084 22.0015 14.1701 21.8198 15.1637 21.4892C14.602 21.6654 14.0064 21.7619 13.3888 21.7619C12.2426 21.7619 11.1742 21.4295 10.2588 20.8619Z",fill:"url(#paint1_linear_11766_2366)"}),c.createElement("path",{d:"M13.9001 13.6309C13.8369 13.7129 13.6421 13.8261 13.6421 14.0734C13.6421 14.2769 13.7749 14.4732 14.0109 14.638C15.1345 15.422 17.2521 15.3164 17.2578 15.3164C18.132 15.3134 18.9184 15.073 19.6229 14.6611C19.9433 14.4737 20.24 14.2512 20.5074 13.997C21.4251 13.1249 21.9847 11.8959 22.0002 10.5303C22.0201 8.77913 21.3783 7.61489 21.1145 7.09937C19.4589 3.86354 15.8849 2.00134 11.9989 2.00134C6.52112 2.00134 2.07446 6.40343 2.00096 11.8608C2.03809 9.0059 4.87549 6.7005 8.24835 6.7005C8.52183 6.7005 10.0814 6.72717 11.53 7.4875C12.8061 8.15725 13.4752 8.96655 13.9402 9.76937C14.4231 10.603 14.509 11.6558 14.509 12.0756C14.509 12.4954 14.2973 13.1168 13.9001 13.6309Z",fill:"url(#paint2_linear_11766_2366)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_11766_2366",x1:6.58623,y1:15.8336,x2:20.5188,y2:15.8336,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#094987"}),c.createElement("stop",{offset:.245021,stopColor:"#0C59A4"}),c.createElement("stop",{offset:1,stopColor:"#114A8B"})),c.createElement("linearGradient",{id:"paint1_linear_11766_2366",x1:8,y1:5.99998,x2:5.22878,y2:19.2687,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#117FBA"}),c.createElement("stop",{offset:.223416,stopColor:"#1797E0"}),c.createElement("stop",{offset:.947917,stopColor:"#0078D4"})),c.createElement("linearGradient",{id:"paint2_linear_11766_2366",x1:22,y1:10,x2:8,y2:5.50003,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#48D566"}),c.createElement("stop",{offset:1,stopColor:"#35C1F1"})))),ph=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M9.29079 9.1001C4.70421 9.1002 1.2758 12.8547 1.0177 17.0373C1.17748 17.9385 1.70262 19.7181 2.52502 19.6268C3.553 19.5125 6.14201 19.6268 8.35029 15.6289C9.96344 12.7085 13.2818 9.10001 9.29079 9.1001Z",fill:"url(#paint0_radial_105551_302)"}),c.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint1_radial_105551_302)"}),c.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint2_radial_105551_302)",fillOpacity:.4}),c.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint3_radial_105551_302)"}),c.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint4_radial_105551_302)",fillOpacity:.6}),c.createElement("path",{d:"M8.23018 10.6611C6.68846 13.1022 4.61317 16.5999 3.91275 17.7006C3.08017 19.0089 0.875229 18.4531 1.05789 16.5777C1.03989 16.73 1.02606 16.8835 1.01652 17.038C0.714885 21.9171 4.58327 25.9691 9.39699 25.9691C14.7024 25.9691 27.3553 19.3586 26.0748 12.7352C24.7252 8.84183 20.9318 6.04932 16.6328 6.04932C12.3338 6.04932 9.57858 8.52613 8.23018 10.6611Z",fill:"url(#paint5_radial_105551_302)",fillOpacity:.9}),c.createElement("path",{d:"M9.31824 25.9703C9.31824 25.9703 21.986 25.9952 24.1347 25.9952C28.0342 25.9952 30.999 22.8115 30.9991 19.0966C30.9991 15.3817 27.9747 12.2173 24.1348 12.2173C20.2949 12.2173 18.0836 15.0901 16.4227 18.2259C14.4764 21.9005 11.9937 25.9262 9.31824 25.9703Z",fill:"url(#paint6_linear_105551_302)"}),c.createElement("path",{d:"M9.31824 25.9703C9.31824 25.9703 21.986 25.9952 24.1347 25.9952C28.0342 25.9952 30.999 22.8115 30.9991 19.0966C30.9991 15.3817 27.9747 12.2173 24.1348 12.2173C20.2949 12.2173 18.0836 15.0901 16.4227 18.2259C14.4764 21.9005 11.9937 25.9262 9.31824 25.9703Z",fill:"url(#paint7_radial_105551_302)",fillOpacity:.4}),c.createElement("path",{d:"M9.31824 25.9703C9.31824 25.9703 21.986 25.9952 24.1347 25.9952C28.0342 25.9952 30.999 22.8115 30.9991 19.0966C30.9991 15.3817 27.9747 12.2173 24.1348 12.2173C20.2949 12.2173 18.0836 15.0901 16.4227 18.2259C14.4764 21.9005 11.9937 25.9262 9.31824 25.9703Z",fill:"url(#paint8_radial_105551_302)",fillOpacity:.9}),c.createElement("defs",null,c.createElement("radialGradient",{id:"paint0_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(6.05863 7.25975 -10.1194 12.3526 1.58653 10.1963)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#4894FE"}),c.createElement("stop",{offset:.695072,stopColor:"#0934B3"})),c.createElement("radialGradient",{id:"paint1_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-26.6342 30.7229 -23.4745 -18.9187 26.9705 -0.690804)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.165327,stopColor:"#23C0FE"}),c.createElement("stop",{offset:.534,stopColor:"#1C91FF"})),c.createElement("radialGradient",{id:"paint2_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-6.33129 -5.31528 -11.8431 14.7663 7.72211 10.7344)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:.660528,stopColor:"#ADC0FF",stopOpacity:0})),c.createElement("radialGradient",{id:"paint3_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-7.11293 -6.01877 9.14061 -10.8028 16.711 20.5051)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#033ACC"}),c.createElement("stop",{offset:1,stopColor:"#368EFF",stopOpacity:0})),c.createElement("radialGradient",{id:"paint4_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(8.12906 18.7598 -20.2526 8.77435 7.17496 5.4191)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.592618,stopColor:"#3464E3",stopOpacity:0}),c.createElement("stop",{offset:1,stopColor:"#033ACC"})),c.createElement("radialGradient",{id:"paint5_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-21.2655 21.266 33.3159 33.3166 26.6427 1.43264)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#4BFDE8"}),c.createElement("stop",{offset:.543937,stopColor:"#4BFDE8",stopOpacity:0})),c.createElement("linearGradient",{id:"paint6_linear_105551_302",x1:20.1654,y1:25.9812,x2:20.1654,y2:12.3807,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#0086FF"}),c.createElement("stop",{offset:.49,stopColor:"#00BBFF"})),c.createElement("radialGradient",{id:"paint7_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(12.6678 5.02394 -16.0514 21.3963 13.0585 13.8376)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:.785262,stopColor:"white",stopOpacity:0})),c.createElement("radialGradient",{id:"paint8_radial_105551_302",cx:0,cy:0,r:1,gradientTransform:"matrix(-14.1522 12.1976 -16.7761 -10.2898 30.5753 11.1494)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#4BFDE8"}),c.createElement("stop",{offset:.584724,stopColor:"#4BFDE8",stopOpacity:0})))),Vk=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M21.0063 5.41416L4.42759 15.9228L3.00183 13.6735V11.7353C3.00183 11.0297 3.35909 10.372 3.95105 9.98784L13.5882 3.73443C15.0565 2.78169 16.9478 2.78155 18.4162 3.73406L21.0063 5.41416Z",fill:"url(#paint0_linear_105551_397)"}),c.createElement("path",{d:"M18.2683 3.64233C18.3181 3.67198 18.3676 3.70268 18.4165 3.73444L25.9378 8.61321L7.28914 20.4339L4.42749 15.9193L18.1138 7.22729C19.4101 6.40398 19.4669 4.55187 18.2683 3.64233Z",fill:"url(#paint1_linear_105551_397)"}),c.createElement("path",{d:"M18.2683 3.64233C18.3181 3.67198 18.3676 3.70268 18.4165 3.73444L25.9378 8.61321L7.28914 20.4339L4.42749 15.9193L18.1138 7.22729C19.4101 6.40398 19.4669 4.55187 18.2683 3.64233Z",fill:"url(#paint2_linear_105551_397)",fillOpacity:.2}),c.createElement("path",{d:"M14.7293 22.6909L7.28894 20.4338L23.1079 10.4064C24.4401 9.5619 24.4367 7.61694 23.1014 6.77722L23.0302 6.73242L23.2353 6.86006L28.0498 9.98306C28.6419 10.3672 28.9993 11.0249 28.9993 11.7307V13.6066L14.7293 22.6909Z",fill:"url(#paint3_linear_105551_397)"}),c.createElement("path",{d:"M14.7293 22.6909L7.28894 20.4338L23.1079 10.4064C24.4401 9.5619 24.4367 7.61694 23.1014 6.77722L23.0302 6.73242L23.2353 6.86006L28.0498 9.98306C28.6419 10.3672 28.9993 11.0249 28.9993 11.7307V13.6066L14.7293 22.6909Z",fill:"url(#paint4_linear_105551_397)",fillOpacity:.2}),c.createElement("path",{d:"M18.4162 3.73406C16.9478 2.78155 15.0565 2.78169 13.5882 3.73443L3.95105 9.98784C3.35909 10.372 3.00183 11.0297 3.00183 11.7353V11.8301C3.02507 12.5385 3.39786 13.1914 3.99995 13.571L15.9829 21.1256L27.996 13.5825C28.6198 13.1907 28.9985 12.5058 28.9985 11.7691V13.6068L28.9988 11.7307C28.9988 11.025 28.6414 10.3672 28.0493 9.98309L18.4162 3.73406Z",fill:"url(#paint5_radial_105551_397)"}),c.createElement("path",{d:"M13.8709 29.0012H24.4983C26.9836 29.0012 28.9983 26.9865 28.9983 24.5012L28.9983 11.6782C28.9983 12.4715 28.5905 13.2092 27.9186 13.631L12.2086 23.4955C11.357 24.0302 10.8401 24.9652 10.8402 25.9707C10.8404 27.6444 12.1972 29.0012 13.8709 29.0012Z",fill:"url(#paint6_linear_105551_397)"}),c.createElement("path",{d:"M13.8709 29.0012H24.4983C26.9836 29.0012 28.9983 26.9865 28.9983 24.5012L28.9983 11.6782C28.9983 12.4715 28.5905 13.2092 27.9186 13.631L12.2086 23.4955C11.357 24.0302 10.8401 24.9652 10.8402 25.9707C10.8404 27.6444 12.1972 29.0012 13.8709 29.0012Z",fill:"url(#paint7_radial_105551_397)",fillOpacity:.4}),c.createElement("path",{d:"M13.8709 29.0012H24.4983C26.9836 29.0012 28.9983 26.9865 28.9983 24.5012L28.9983 11.6782C28.9983 12.4715 28.5905 13.2092 27.9186 13.631L12.2086 23.4955C11.357 24.0302 10.8401 24.9652 10.8402 25.9707C10.8404 27.6444 12.1972 29.0012 13.8709 29.0012Z",fill:"url(#paint8_radial_105551_397)",fillOpacity:.5}),c.createElement("path",{d:"M18.1862 29.0003H7.5004C5.01512 29.0003 3.0004 26.9856 3.0004 24.5003V11.7129C3.0004 12.4774 3.3927 13.1885 4.03946 13.5963L19.7712 23.5142C20.6346 24.0586 21.1583 25.0079 21.1582 26.0286C21.158 27.6699 19.8274 29.0003 18.1862 29.0003Z",fill:"url(#paint9_radial_105551_397)"}),c.createElement("path",{d:"M18.1862 29.0003H7.5004C5.01512 29.0003 3.0004 26.9856 3.0004 24.5003V11.7129C3.0004 12.4774 3.3927 13.1885 4.03946 13.5963L19.7712 23.5142C20.6346 24.0586 21.1583 25.0079 21.1582 26.0286C21.158 27.6699 19.8274 29.0003 18.1862 29.0003Z",fill:"url(#paint10_linear_105551_397)"}),c.createElement("rect",{x:2,y:14,width:12,height:12,rx:2.75,fill:"url(#paint11_radial_105551_397)"}),c.createElement("rect",{x:2,y:14,width:12,height:12,rx:2.75,fill:"url(#paint12_radial_105551_397)",fillOpacity:.5}),c.createElement("path",{d:"M7.96826 23.3589C7.0318 23.3589 6.263 23.0568 5.66185 22.4526C5.0607 21.8485 4.76013 21.06 4.76013 20.0873C4.76013 19.0602 5.06524 18.2295 5.67544 17.5951C6.28565 16.9607 7.08466 16.6436 8.07248 16.6436C9.00591 16.6436 9.76565 16.9471 10.3517 17.5543C10.9408 18.1615 11.2353 18.962 11.2353 19.9559C11.2353 20.9769 10.9302 21.8001 10.32 22.4254C9.71279 23.0477 8.92888 23.3589 7.96826 23.3589ZM7.99544 22.0765C8.50597 22.0765 8.9168 21.8968 9.22794 21.5373C9.53909 21.1778 9.69466 20.6779 9.69466 20.0375C9.69466 19.3699 9.54362 18.8503 9.24154 18.4787C8.93945 18.1071 8.53617 17.9214 8.03169 17.9214C7.51211 17.9214 7.09373 18.1132 6.77654 18.4968C6.45935 18.8775 6.30076 19.3819 6.30076 20.0103C6.30076 20.6477 6.45935 21.1521 6.77654 21.5237C7.09373 21.8923 7.50003 22.0765 7.99544 22.0765Z",fill:"white"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_105551_397",x1:5.88149,y1:14.8183,x2:21.0063,y2:5.43718,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#20A7FA"}),c.createElement("stop",{offset:.4,stopColor:"#3BD5FF"}),c.createElement("stop",{offset:1,stopColor:"#C4B0FF"})),c.createElement("linearGradient",{id:"paint1_linear_105551_397",x1:11.0876,y1:18.0175,x2:19.5075,y2:4.53529,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#165AD9"}),c.createElement("stop",{offset:.5008,stopColor:"#1880E5"}),c.createElement("stop",{offset:1,stopColor:"#8587FF"})),c.createElement("linearGradient",{id:"paint2_linear_105551_397",x1:17.2286,y1:18.2009,x2:7.88049,y2:10.584,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.236946,stopColor:"#448AFF",stopOpacity:0}),c.createElement("stop",{offset:.792113,stopColor:"#0032B1"})),c.createElement("linearGradient",{id:"paint3_linear_105551_397",x1:16.0387,y1:21.1339,x2:30.8121,y2:11.6789,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#1A43A6"}),c.createElement("stop",{offset:.492267,stopColor:"#2052CB"}),c.createElement("stop",{offset:1,stopColor:"#5F20CB"})),c.createElement("linearGradient",{id:"paint4_linear_105551_397",x1:20.2091,y1:20.5687,x2:11.2319,y2:12.8005,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#0045B9",stopOpacity:0}),c.createElement("stop",{offset:.669859,stopColor:"#0D1F69"})),c.createElement("radialGradient",{id:"paint5_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.0012 3.59051) rotate(-90) scale(19.5009 21.1067)"},c.createElement("stop",{offset:.568182,stopColor:"#275FF0",stopOpacity:0}),c.createElement("stop",{offset:.992424,stopColor:"#002177"})),c.createElement("linearGradient",{id:"paint6_linear_105551_397",x1:28.9983,y1:20.2914,x2:15.8933,y2:20.2914,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#4DC4FF"}),c.createElement("stop",{offset:.196145,stopColor:"#0FAFFF"})),c.createElement("radialGradient",{id:"paint7_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.9562 26.0462) rotate(-45) scale(8.35708)"},c.createElement("stop",{offset:.259477,stopColor:"#0060D1"}),c.createElement("stop",{offset:.908166,stopColor:"#0383F1",stopOpacity:0})),c.createElement("radialGradient",{id:"paint8_radial_105551_397",cx:0,cy:0,r:1,gradientTransform:"matrix(17.2076 -22.5536 15.8577 21.5059 6.34585 32.2282)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.732317,stopColor:"#F4A7F7",stopOpacity:0}),c.createElement("stop",{offset:1,stopColor:"#F4A7F7"})),c.createElement("radialGradient",{id:"paint9_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12.0794 18.5501) rotate(123.339) scale(14.9678 38.8433)"},c.createElement("stop",{stopColor:"#49DEFF"}),c.createElement("stop",{offset:.724349,stopColor:"#29C3FF"})),c.createElement("linearGradient",{id:"paint10_linear_105551_397",x1:1.16485,y1:26.0177,x2:13.7825,y2:26.0086,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.205882,stopColor:"#6CE0FF"}),c.createElement("stop",{offset:.535,stopColor:"#50D5FF",stopOpacity:0})),c.createElement("radialGradient",{id:"paint11_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(1.95718 14.4615) rotate(46.9242) scale(15.7964)"},c.createElement("stop",{offset:.038877,stopColor:"#0091FF"}),c.createElement("stop",{offset:.919119,stopColor:"#183DAD"})),c.createElement("radialGradient",{id:"paint12_radial_105551_397",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8 21.3079) rotate(90) scale(8.4 9.68913)"},c.createElement("stop",{offset:.557796,stopColor:"#0FA5F7",stopOpacity:0}),c.createElement("stop",{offset:1,stopColor:"#74C6FF"})))),Hk=()=>{const e=M(td);return Qt()&&e.length>0};function Vl(){const e=M(td),t=se(td),n=se(Qv),{t:s}=q(),o=qp(),r=Hk(),a=c.useCallback(v=>{switch(v){case"google-drive":return{type:"google-drive",title:s("connector.googleDrive.title"),description:s("connector.googleDrive.description"),details:s("connector.googleDrive.details"),websiteLink:"https://drive.google.com",privacyLink:Jn,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:N3};case"one-drive":return{type:"one-drive",title:s("connector.oneDrive.title"),description:s("connector.oneDrive.description"),details:s("connector.oneDrive.details"),websiteLink:"https://onedrive.com",privacyLink:Jn,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:ph};case"outlook":return{type:"outlook",title:s("outlook.title"),description:s("outlook.description"),details:s("connector.outlook.details"),websiteLink:"https://outlook.com",privacyLink:Jn,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:Vk};case"google-calendar":return{type:"google-calendar",title:s("connector.googleCalendar.title"),description:s("connector.googleCalendar.description"),details:s("connector.googleCalendar.details"),websiteLink:"https://calendar.google.com",privacyLink:Jn,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:M3};case"gmail":return{type:"gmail",title:s("connector.googleMail.title"),description:s("connector.googleMail.description"),details:s("connector.googleMail.details"),websiteLink:"https://mail.google.com",privacyLink:Jn,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:R3};case"google-contacts":return{type:"google-contacts",title:s("connector.googleContacts.title"),description:s("connector.googleContacts.description"),details:s("connector.googleContacts.details"),websiteLink:"https://contacts.google.com",privacyLink:Jn,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:gm};case"edge-browser":return{type:"edge-browser",title:s("connector.edgeBrowser.title"),description:s("connector.edgeBrowser.description"),details:s("connector.edgeBrowser.details"),websiteLink:"https://microsoft.com/edge",privacyLink:Jn,developer:s("connector.developerMicrosoft"),category:s("connector.productivity"),IconComponent:Bk};default:return null}},[s]),l=c.useCallback(v=>{if(!v)return null;const y=e.find(E=>E.type===v);if(!y)return null;const b=a(v);return b?{id:y.id,status:y.status,...b}:null},[e,a]),u=(v,y)=>{const b=a(v);n({type:v,title:b==null?void 0:b.title,IconComponent:b==null?void 0:b.IconComponent,visible:!0,startSource:y})},d=async v=>{if(!v)return;const y=await kn({path:`/connections/${v}`,args:{options:{method:"DELETE"},body:{}}});y.ok&&y.status===204&&(t(e.map(b=>b.id===v?{...b,status:"disconnected"}:b)),await o.invalidateQueries({queryKey:[vx]}))},m=async(v,y)=>{const b=e.find(I=>I.id===v);if(!v||!b)return;const E=I=>{t(_=>_.map(T=>T.id===v?{...T,status:I}:T))};E(y),(await kn({path:`/connections/${v}/${y==="ready"?"enable":"disable"}`,args:{options:{method:"POST"},body:{connectionStatus:y}}})).ok?await o.invalidateQueries({queryKey:[vx]}):E(b.status)},f=c.useCallback(()=>e.filter(y=>y.status==="ready").length,[e]),h=c.useCallback(v=>v==="one-drive"||v==="outlook"||v==="edge-browser",[]),g=(v,y)=>{const b=v.status==="ready"||v.status==="disabled",E=y.status==="ready"||y.status==="disabled";return b&&!E?-1:!b&&E?1:0},C=c.useCallback(()=>{const v=[],y=[];for(const S of e)h(S.type)?v.push(S):y.push(S);y.sort(g);const b=y.filter(S=>S.status==="ready"||S.status==="disabled");b.unshift(...v);const E=y.filter(S=>S.status==="disconnected"||S.status==="sign-in-required");return[b,E]},[e,h]);return{isConnectorsAvailable:r,getConnectorAppInfo:l,getSortedConnectors:C,isFirstParty:h,handleConnect:u,handleDisconnect:d,handleToggle:m,getAvailableConnectorsCount:f}}function Whe({data:e}){const{t}=q(),n=se(P3),s=ut(),{getConnectorAppInfo:o}=Vl(),{type:r}=e,{IconComponent:a}=o(r)??{},l=async()=>{Op(r,"insufficient_scope_modal","cancel"),n(null);const u=Dn("connectorConsentFlowStartUrl");await qs({to:u??"/",from:s})};return a?i.jsx(dn,{isOpen:!0,className:"w-full max-w-[448px]",onClose:l,customScrollBar:!0,hideDismissButton:!0,children:i.jsxs("div",{className:"flex w-full flex-col items-center gap-2 p-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"flex flex-col items-center justify-center gap-2.5 rounded-2xl border border-black/12 p-1 dark:border-white/12",children:i.jsx(a,{className:"size-12 p-1"})}),i.jsx("div",{className:"absolute -end-2 -top-1.5 flex size-5 items-center justify-center rounded-full bg-system-red-550 contrast-more:bg-neutral-100 contrast-more:outline",children:i.jsx(an,{className:"size-4 text-foreground-100 contrast-more:text-foreground-600 dark:text-foreground-900"})})]}),i.jsx("h3",{className:"pt-4 text-center text-foreground-800 text-lg sm:text-2xl",children:t("connector.connectUnsuccessfulTitle")}),i.jsx("p",{className:"mt-4",children:t("connector.insufficientScopeErrorDescription")}),i.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[i.jsx(ne,{className:"w-full sm:w-96",color:"strong",size:"56-xl",title:t("common.retry"),onClick:async()=>{n(null),Op(r,"insufficient_scope_modal","retry");const u=await Uk(r);u&&(Ws("connectorConsentFlowStartUrl",s),Nl(u))},children:t("common.retry")}),i.jsx(ne,{className:"w-full sm:w-96",color:"subtle-dimmed-inverted",size:"56-xl",title:t("common.cancel"),onClick:l,children:t("common.cancel")})]})]})}):null}const a0="relative size-full rounded-full aspect-square",Kx="flex items-center justify-center uppercase",i0="after:absolute after:-inset-px after:rounded-full after:border-[0.5px] after:border-black/10 dark:after:border-white/20";function j3(e){const{firstName:t,imgSrc:n,nameSizeClass:s,altText:o,style:r,showTwoCharacters:a=!1,showBorder:l=!0}=e;if(n)return i.jsx("img",{className:F("overflow-hidden object-cover",a0,l&&i0),src:n,alt:o??z("common.profileImage")});if(t){let u=t[0];if(a){const d=t.trim().split(/\s+/).filter(Boolean);d.length>=2&&(u=d.slice(0,2).map(m=>m[0]).join(""))}return i.jsx("div",{className:F(a0,Kx,l&&i0,s??"text-lg"),style:r??{},children:i.jsx("div",{children:u})})}return i.jsx("div",{className:F(a0,Kx,l&&i0),style:r??{},children:i.jsx(fh,{className:F("size-6 fill-foreground-800",Yre),"alt-text":o??z("common.profileImage")})})}const Zx=5e3;function $he(){const e=W("aad-student"),t=M(qY),{t:n}=q(),[s,o]=c.useState(!1),r=e&&t&&!s,a=M(V7),l=M(Ri),u=ut(),d=e&&t===void 0&&a&&l,m=d&&!s;c.useEffect(()=>{if(d&&!s){const I=setTimeout(()=>{o(!0),uQ(new Error(`Student status check timed out after ${Zx}ms`))},Zx);return()=>clearTimeout(I)}},[d,s]);const f=n(r?"entraRedirect.guestTitle":"entraRedirect.workTitle"),h=n(r?"entraRedirect.guestDescription":"entraRedirect.workDescription"),g=()=>n(r?"aadStudent.title":"entraRedirect.pageTitle"),C=I=>r?n("aadStudent.subtitle",{email:I}):void 0,v=I=>r?n("aadStudent.continueAsGuestButtonText"):n("entraRedirect.goToWorkButton",{redirectUrl:I}),y=r?"mb-6 sm:mb-10":"mb-8 sm:mb-14",b=r?"Student":"Enterprise",E=Rle()&&["/e/so","/e/sol"].includes(u),S=n(E?"entraRedirect.studentOffer.personalDescription":"entraRedirect.personalDescription");return{isStudentEnabled:r,isLoadingEnabled:m,isStudentOffer:E,workTitle:f,workDescription:h,titleGapClass:y,eventInfoScenario:b,personalDescription:S,getPageTitle:g,getPageSubTitle:C,getWorkButtonText:v}}function qhe(){var xe;const e=M(V7),t=M(Ri),n=M(Yt),[s,o]=c.useState(void 0),r=W("aad-login-removal"),a=Dl(),l=xo(),{isStudentEnabled:u,isLoadingEnabled:d,isStudentOffer:m,workTitle:f,workDescription:h,titleGapClass:g,eventInfoScenario:C,personalDescription:v,getPageTitle:y,getPageSubTitle:b,getWorkButtonText:E}=$he(),S=c.useId(),I=!u&&(n==null?void 0:n.email);c.useEffect(()=>{e&&An(H0,JSON.stringify(e))},[e]);let _=!1;try{_=JSON.parse(rn(H0)??"false")}catch(ce){console.error("Failed to parse authentication status:",ce),_=!1}const T=e?t:!_&&!!((xe=window.cwcRedirect)!=null&&xe.cwcRedirectUrl),[A,k]=c.useState(T),[N,P]=c.useState(),{t:V}=q(),{login:U,logout:K}=Xi();c.useEffect(()=>{async function ce(){const ae=await L4();o(ae),r&&(n!=null&&n.email)&&SJ()}ce()},[n,r]);const Q=(ce,ae,Se)=>Qr(`${ce}?fromCode=cmcv2&redirectId=${ae}${Se?`&login_hint=${Se}`:""}`),Z=async()=>{let ce=crypto.randomUUID().replace(/-/g,"").toUpperCase(),ae=rg,Se="AadUnknown";t&&s?ae=Q(rg,ce,s.username):window.cwcRedirect&&(ae=window.cwcRedirect.cwcRedirectUrl,ce=window.cwcRedirect.redirectId,Se=window.cwcRedirect.chatEligibility),re.instance().config().entraRedirectModalBehaviour==="new-tab"?Eo(Qr(ae)):Nl(Qr(ae)),D.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirect",...N,eventInfo_traceId:ce,eventInfo_redirectUrl:ae,eventInfo_chatEligibility:Se}})},Y=async()=>{D.trackEvent({name:"interaction",data:{eventName:"copilotStudentRedirectSignOut",...N}}),await K()},X=async()=>{D.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirectSwitchAccount",eventInfo_scenario:C,...N}}),k(!1),a?(await K(!1),await l({from:"/",to:m?"/e/sol":"/login"})):await U({provider:"microsoft"})},$=async()=>{D.trackEvent({name:"interaction",data:{eventName:e?"copilotEnterpriseRedirectSignOut":"copilotEnterpriseRedirectContinueSignedOut",...N}}),e?await K():k(!1)},ee=async()=>{jC("/")};if(c.useEffect(()=>{k(T),T&&(async()=>{var Se;let ae={};if(t){const Me=await L4();ae={userAadId:(Se=Me==null?void 0:Me.idTokenClaims)==null?void 0:Se.oid,userAadTenantId:Me==null?void 0:Me.tenantId}}else window.cwcRedirect&&(ae={userAadId:window.cwcRedirect.userId,userAadTenantId:window.cwcRedirect.tenantId});D.trackEvent({name:"system",data:{eventName:"copilotEnterpriseRedirectImpression",eventInfo_redirectReason:t?"AAD":"CWC",eventInfo_scenario:C,...ae}}),P(ae)})().catch(console.error)},[t,T,C]),!A)return null;const te=!_&&window.cwcRedirect?new URL(window.cwcRedirect.cwcRedirectUrl).hostname:rg,G=b(n==null?void 0:n.email),ie=()=>u?null:r?i.jsx("div",{className:"mt-8 sm:mt-12",children:i.jsx(mn,{i18nKey:"entraRedirect.playAroundFirst",components:{entraContinue:i.jsx("button",{role:"link",type:"button",className:"underline",onClick:ee,children:V("entraRedirect.playAroundFirst")})}})}):i.jsx("div",{className:"mt-8 sm:mt-12",children:i.jsx(mn,{i18nKey:e?"entraRedirect.signOut":"entraRedirect.continueSignedOut",components:{[e?"entraSignOut":"entraContinue"]:i.jsx("button",{type:"button",className:"underline",onClick:$,children:V(e?"entraRedirect.signOut":"entraRedirect.continueSignedOut")})}})});return i.jsxs(dn,{fadeInDuration:0,className:ue("fixed inset-0",ct.modal),isOpen:!0,headerText:S,children:[i.jsx(ec,{forceGradient:!0}),i.jsx("main",{className:"relative m-auto flex size-full max-w-chat flex-col items-center justify-center overflow-y-auto p-4 pb-8 pt-20 sm:py-4",children:d?i.jsx(it,{className:"size-8"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-9",children:i.jsx(Sm,{className:"size-12"})}),i.jsx("h1",{id:S,className:ue("mb-8 w-full whitespace-pre-wrap break-words px-4 text-center text-4xl sm:mb-14",g),children:y()}),u&&G&&i.jsx("p",{className:"mb-10 w-full whitespace-pre-wrap break-words px-4 text-center text-base sm:mb-16",children:G}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:gap-16",children:[i.jsx(Yx,{title:f,description:h,onClick:u?Y:Z,children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{children:E(te)}),I&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"relative size-5",children:i.jsx(j3,{firstName:n.firstName??n.givenName??void 0,imgSrc:n.imgSrc,nameSizeClass:"text-sm"})}),i.jsx("p",{className:"text-sm",children:n.email})]})]})}),i.jsx(Yx,{title:V("entraRedirect.personalTitle"),description:v,onClick:X,children:i.jsx("p",{className:"text-sm",children:V("entraRedirect.switchToPersonalButton")})})]}),ie()]})})]})}function Yx({title:e,onClick:t,description:n,children:s}){return i.jsxs("div",{className:"flex flex-col justify-between rounded-4xl bg-white/70 p-4 dark:bg-background-300/70 md:p-6 md:pb-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"mb-2.5 text-xl",children:e}),i.jsx("p",{className:"mb-6 text-sm",children:n})]}),i.jsx(ne,{color:"default",variant:"rect",title:e,onClick:t,children:s})]})}const Khe=c.lazy(()=>B(()=>import("./index-M_tPUWUO.js").then(e=>e.i),__vite__mapDeps([360,1,319])));function Zhe(e){const{onClose:t,interceptedLink:n}=e,{t:s}=q(),o=c.useRef(null);return $i(o),hs(r=>{(r.key==="Escape"||r.key==="Control")&&t()}),i.jsxs("div",{className:"flex w-[400px] max-w-[80vw] flex-col items-center p-4 text-center",children:[i.jsx("div",{className:"bg-white p-2",children:i.jsx(c.Suspense,{fallback:i.jsx("span",{}),children:i.jsx(Khe,{value:n,size:96,"aria-label":s("composer.interceptedLink.qrcode_alt_text")})})}),i.jsx("h1",{className:"py-3 text-xl",children:s("composer.interceptedLink.title")}),i.jsx("p",{className:"w-full pb-7",children:i.jsx(mn,{i18nKey:"composer.interceptedLink.description",components:{span:i.jsx("span",{className:"break-words underline"})},values:{link:n}})}),i.jsx(ne,{ref:o,onClick:t,title:"close",variant:"pill",size:"48-lg",className:"w-full",children:s("common.closeText")})]})}const zk=R(null);function Yhe(e){const{t}=q(),{options:n,onClose:s}=e,o=M(cn),r=se(b1),a=se(Yv),l=M(Hi),u=M(JY),{allowUpsell:d,payflowEntryPoint:m,upsellReason:f}=n,h=n.allowUpsell?"":n.disabledReason,g=n.dismissButton??t("common.dismiss"),{handleSubscription:C,payflowType:v}=XC({payflowEntryPoint:n.payflowEntryPoint,upsellReason:n.upsellReason,entryStyle:"Button",upsellEligibleSubscription:n.subscriptions,enableDimePreload:d}),y=(o==null?void 0:o.accountType)??"None";c.useEffect(()=>{d?yce({upsellEntryStyle:"Button",actionButton:"Upgrade",payflowEntryPoint:m,upsellReason:f,loginProvider:y,payflowType:v,curatedSubscription:u}):Cce({payflowEntryPoint:m,upsellReason:f,loginProvider:y,disabledReason:h,curatedSubscription:u})},[h,d,m,f,y,u,v,o==null?void 0:o.accountType]);const b=c.useCallback(()=>{(o==null?void 0:o.provider)==="auth0"?(s(),r({source:"Composer"})):(l==null?void 0:l.channel)==="google"||(l==null?void 0:l.channel)==="apple"?(s(),a({source:l.channel,entryStyle:"Button",upsellReason:"DailyLimit",payflowEntryPoint:n.payflowEntryPoint})):(s(),C())},[o==null?void 0:o.provider,l==null?void 0:l.channel,s,r,a,n.payflowEntryPoint,C]);return i.jsx(dn,{isOpen:!0,className:"h-auto max-w-md !gap-0 !p-0",onClose:s,fullBleed:!0,children:i.jsxs("div",{className:"flex w-full flex-col p-8",children:[i.jsx("h1",{className:"mt-4 w-full items-center text-center text-2xl",children:n.title}),i.jsx("p",{className:"mt-6 w-full",children:n.subtitle}),i.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[n.allowUpsell&&i.jsx(ne,{className:"w-full rounded-4xl",color:"strong",title:n.confirmButton,onClick:b,children:n.confirmButton}),i.jsx(ne,{className:"w-full rounded-4xl",color:n.allowUpsell?"default":"strong",title:g,onClick:s,children:g})]})]})})}function Qhe(e){const{t}=q(),{config:n,onClose:s}=e,o=M(Hi),r=M(cn),a=PT(),l=n.source==="apple"?pY:hY,u=t("subscriptionManage.redirectMobileStoreTitle",{store:l}),d=t("subscriptionManage.redirectMobileStoreContent",{store:l});return c.useEffect(()=>{D.trackEvent({name:"interaction",data:{eventName:"payflowBlockDialogShown",eventInfo_upsellEntryStyle:n.entryStyle,eventInfo_payflowEntryPoint:n.payflowEntryPoint,eventInfo_upsellReason:n.upsellReason,eventInfo_loginProvider:(r==null?void 0:r.accountType)??"None",eventInfo_payflowType:"DIME",eventInfo_curatedSubscription:(o==null?void 0:o.tier)??LT,eventInfo_disabledReason:"3pPurchase"}})},[n,o==null?void 0:o.tier,a,r==null?void 0:r.accountType]),i.jsx("div",{className:F("fixed inset-0 h-screen w-screen",ct.modal),"data-outside-events-ignore":!0,onClick:s,children:i.jsx(dn,{isOpen:!0,className:"h-auto max-w-md gap-0 p-0",children:i.jsxs("div",{className:"flex w-full flex-col p-8",children:[i.jsx("h1",{className:"mt-4 w-full items-center text-center text-2xl",children:u}),i.jsx("p",{className:"mt-6 w-full",children:d}),i.jsx(ne,{className:"mt-6 w-full rounded-4xl",color:"strong",title:t("subscriptionManage.upgradeButton"),onClick:s,children:t("subscriptionManage.redirectMobileStoreDismiss")})]})})})}function Jhe(e){const{t}=q(),{config:n,onClose:s}=e,o=M(Yt),{logout:r,login:a}=Xi(),l=c.useRef((o==null?void 0:o.email)??"");c.useEffect(()=>{(async()=>{if(o!=null&&o.email)o.email!==l.current&&(l.current=o.email);else{const h=await xI();h!=null&&h.username&&h.username!==l.current?l.current=h.username:h!=null&&h.username||ir({scenario:"missingUsernameForUserMismatched",...Gr(new Error("Missing username for user mismatched"))})}})()},[o==null?void 0:o.email]),c.useEffect(()=>{OT({correlationId:n.correlationId,payflowInstanceId:n.payflowInstanceId})},[n.correlationId,n.payflowInstanceId]);const u=c.useCallback(async()=>{await r(),Ws("shouldStartSubscription",!0),a({provider:"microsoft"})},[r,a]),{handleSubscription:d}=XC({payflowEntryPoint:n.payflowEntryPoint,upsellReason:void 0,entryStyle:"Button",enableDimePreload:!0}),m=c.useCallback(()=>{Jr("payflowAuthHint"),s(),d()},[s,d]);return i.jsx(dn,{isOpen:!0,className:"h-auto max-w-md",fullBleed:!0,onClose:s,children:i.jsxs("div",{className:"flex w-full flex-col p-8",children:[i.jsx("h1",{className:"mt-4 w-full items-center text-center text-2xl",children:t("proSubscription.modal.userMismatched.title")}),i.jsx("p",{className:"mt-6 w-full",children:t("proSubscription.modal.userMismatched.content",{userName:l.current})}),i.jsx(ne,{className:"mt-8 min-h-12 w-full rounded-4xl",color:"strong",title:t("proSubscription.modal.userMismatched.actionButtonText"),onClick:u,children:t("proSubscription.modal.userMismatched.actionButtonText")}),i.jsx(ne,{className:"mt-6 min-h-12 w-full rounded-4xl",color:"default",title:t("proSubscription.modal.userMismatched.cancelButtonText",{userName:l.current}),onClick:m,children:t("proSubscription.modal.userMismatched.cancelButtonText",{userName:l.current})})]})})}function Xhe(){const{t:e}=q(),t=M(hn),n=M(KI),s=M(Kd),[o,r]=Ue(Nee),[a,l]=c.useState(!1),u=c.useCallback(()=>{r(!1)},[r]),d=c.useCallback(async()=>{!n||!t||(l(!0),hp.includes(n.status)||(await ks()).stop({conversationId:t.id,taskId:n.id}))},[t,n]);c.useEffect(()=>{n!=null&&n.status&&hp.includes(n.status)&&(r(!1),l(!1))},[n==null?void 0:n.status,r]);const m=s!==null?e("research.cancel.limitAnnouncement",{limit:s+1}):"";return i.jsxs(Bo,{isOpen:o,headerText:e("research.cancel.title"),className:"max-w-96 gap-4",trapFocus:!0,children:[`${e("research.cancel.description")}${` ${m}`}`,i.jsx(ne,{title:e("research.cancel.cancelButton"),onClick:d,className:"mt-auto text-system-red-550 dark:text-system-red-350",color:"default",size:"56-xl",disabled:a,children:a?i.jsx(it,{className:"size-8"}):e("research.cancel.cancelButton")}),i.jsx(ne,{title:e("common.keep"),color:"strong",size:"56-xl",onClick:u,children:e("common.keep")})]})}const Gk=70;function ege(e){var t;return(t=e.contents)!=null&&t.length?e.status==="completed"?"done":e.partialOutput&&e.partialOutput.length>0?"writing":"browsing":"planning"}const U3=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M15.1017 16.1624C13.717 17.3101 11.9391 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 11.9391 17.3101 13.717 16.1624 15.1018L20.7803 19.7197C21.0732 20.0126 21.0732 20.4874 20.7803 20.7803C20.4874 21.0732 20.0125 21.0732 19.7196 20.7803L15.1017 16.1624ZM16.5 10C16.5 6.41015 13.5899 3.5 10 3.5C6.41015 3.5 3.5 6.41015 3.5 10C3.5 13.5899 6.41015 16.5 10 16.5C13.5899 16.5 16.5 13.5899 16.5 10Z"})),rAe=Object.freeze(Object.defineProperty({__proto__:null,default:U3},Symbol.toStringTag,{value:"Module"}));function tge(e){const{text:t,isInDrawer:n=!1,isPreview:s}=e,{t:o}=q(),r=s?Nk(t,Gk,{ellipsis:!0}):t;return n?i.jsxs("div",{children:[i.jsx("strong",{className:"me-2",children:o("research.searched")}),i.jsx("span",{className:"text-foreground-800",children:r})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-foreground-700",children:o("research.searched")}),i.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-black/[0.06] px-2 py-1 text-foreground-450",children:[i.jsx(U3,{className:"size-4"}),i.jsx("span",{className:"text-foreground-800 text-sm",children:t})]})]})}async function nge(e,t){(await lJ.run({url:e})).handled&&t.preventDefault()}function sge(e){let{url:t}=e;t=lo(t);const{title:n,decoration:s,source:o,iconUrl:r,mode:a,onClick:l}=e,u=c.useContext(_m),d=M(je),m=async f=>{l&&l(e),qt({source:o,conversationId:d,messageId:u,destination:t}),await nge(t,f)};return i.jsxs(ne,{onClick:m,color:"default",variant:"pill",size:"28-xxs",title:n,href:t,children:[s,r&&i.jsx("img",{src:r,alt:n,className:"size-4 rounded-md border-[0.5px] border-neutral-300 bg-white/90 dark:border-neutral-600"}),i.jsx("span",{className:"me-0.5",children:a==="research"?es(t):n})]})}function oge(e){const{url:t,isInDrawer:n=!1,isPreview:s=!1}=e,{t:o}=q();return i.jsxs("div",{className:"flex items-center gap-2",children:[n?i.jsx("strong",{children:o("research.read")}):i.jsx("span",{className:"text-foreground-700",children:o("research.read")}),s?i.jsx("span",{className:"text-foreground-800",children:es(t)}):i.jsx(sge,{title:es(t),url:t,source:"researchCitationLink"})]})}function Qx(e){let t=0;for(const n of e)t+=n;return t}function rge(e,t,n){let s=0,o=null,r=[],a=0;return{getValue:()=>{if(!n)return 0;if(!o){o=Math.floor(performance.now());const u=e[e.length-1];if(!u)a=0;else{const d=u+Qx(r)*1e3;d>o?(a=(d-o)/1e3,r=[]):(a=0,r=[])}}const l=e[s];return l?(s+=1,r=[],Math.max((l-o)/1e3,0)):(a=Number((a+Qx(r)).toFixed(3)),r=[],t(s,o,a),s+=1,a)},queueUpdate:l=>{r.push(l)}}}function Wk(e){const t=c.useRef([]);return c.useCallback(()=>rge(t.current,(n,s,o)=>{t.current[n]=s+o*1e3},e),[e])}function age(e){const{text:t,shouldAnimate:n,isPreview:s}=e,o=Wk(!1),[r,a]=c.useState(0),l=c.useMemo(()=>{const u=o(),d=s?Nk(t,Gk,{ellipsis:!0}):t,m=A3(d);return Cd({contentBlocks:m,delay:u,forceRender:()=>{a(r+1)}})},[o,r,s,t]);return i.jsx("div",{className:F("flex gap-2 text-foreground-700",s?"items-center":"flex-col items-start"),children:i.jsx(vd,{blocks:l,shouldAnimate:n})})}function ige(e){const{item:t,shouldAnimate:n=!1,isPreview:s=!1,isInDrawer:o=!1}=e;switch(t.type){case"citation":return i.jsx(oge,{url:t.url,isInDrawer:o,isPreview:s});case"chainOfThought":return i.jsx(age,{text:t.text,shouldAnimate:n,isPreview:s});case"query":return i.jsx(tge,{text:t.text,isInDrawer:o,isPreview:s});default:return null}}function cge(e){const{progress:t}=e,{t:n}=q(),s=(()=>{switch(t){case"planning":return n("research.steps.browse.future");case"writing":return n("research.steps.write.present");case"done":return n("research.stepsDrawer.reportReady");default:return""}})();return i.jsx("div",{children:i.jsx("strong",{children:s})})}function df(e){const{progress:t,contentItem:n,shouldAnimate:s,isPreview:o=!1}=e;return t!=="browsing"?i.jsx(cge,{progress:t}):n?i.jsx(ige,{item:n,shouldAnimate:s,isPreview:o,isInDrawer:!0}):null}const km=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM15.2197 8.96967L10.75 13.4393L8.78033 11.4697C8.48744 11.1768 8.01256 11.1768 7.71967 11.4697C7.42678 11.7626 7.42678 12.2374 7.71967 12.5303L10.2197 15.0303C10.5126 15.3232 10.9874 15.3232 11.2803 15.0303L16.2803 10.0303C16.5732 9.73744 16.5732 9.26256 16.2803 8.96967C15.9874 8.67678 15.5126 8.67678 15.2197 8.96967Z"})),aAe=Object.freeze(Object.defineProperty({__proto__:null,default:km},Symbol.toStringTag,{value:"Module"}));function mf(e){const{isFinal:t=!1,isLast:n=!1,shouldAnimate:s=!1,children:o}=e;let r=null;return t?r=i.jsx(km,{className:"relative bottom-1.5 size-4 text-background-900"}):n?r=i.jsx(it,{className:"relative bottom-2.5 size-6"}):r=i.jsx("div",{className:"relative bottom-0.5 size-[9px] rounded-full bg-foreground-800"}),i.jsxs(ge.div,{className:"relative grid grid-cols-[auto,1fr] items-start gap-4",initial:s?"start":"end",animate:"end",variants:{start:Fe,end:a=>({...nt,transition:{delay:a,ease:"easeInOut",duration:1.2}})},children:[i.jsxs("div",{className:"relative mt-2 flex h-full w-2 flex-col items-center",children:[r,!t&&!n&&i.jsx("div",{className:"absolute bottom-0 top-4 w-px bg-neutral-300 contrast-more:bg-foreground-900"})]}),o]})}function lge(e){var m,f;const{task:t,onGoToReport:n}=e,{t:s}=q(),o=c.useRef(null),[r,a]=c.useState(!1);YA({onScrollEnd:()=>{if(!o.current)return;const{scrollTop:h,scrollHeight:g,clientHeight:C}=o.current,v=h+C>=g-50;a(!v)},scrollRefs:[o]}),c.useEffect(()=>{o.current&&!r&&o.current.scrollTo({top:o.current.scrollHeight,behavior:"smooth"})},[t,r]);const u=ege(t),d=((m=t.contents)==null?void 0:m.length)??0;return i.jsxs("div",{className:"flex h-full flex-col overflow-y-auto",children:[i.jsxs("div",{ref:o,className:"vertical-scrollbar scroll-fade relative space-y-4 overflow-y-auto scroll-smooth px-2 pb-2 text-sm [scrollbar-gutter:stable_both-edges;]",children:[i.jsx(mf,{isLast:u==="planning",shouldAnimate:u==="planning",children:i.jsx(df,{progress:"planning"})}),(f=t.contents)==null?void 0:f.map((h,g)=>{const C=u==="browsing"&&g===d-1;return i.jsx(mf,{isLast:C,shouldAnimate:u!=="done"&&C,children:i.jsx(df,{progress:"browsing",contentItem:h})},g)}),(u==="writing"||u==="done")&&i.jsx(mf,{isLast:u==="writing",shouldAnimate:u==="writing",children:i.jsx(df,{progress:"writing"})}),u==="done"&&i.jsx(mf,{isFinal:!0,shouldAnimate:!0,children:i.jsx(df,{progress:"done"})})]}),u==="done"&&i.jsx(ne,{title:s("research.stepsDrawer.goToReport"),onClick:n,color:"strong",variant:"pill",size:"40-base",className:"mx-4 mt-8",children:s("research.stepsDrawer.goToReport")})]})}function uge(){const{t:e}=q(),t=M(KI),[n,s]=Ue(Mee),o=()=>{s(!1)},r=()=>{o()};return hs(a=>{a.key==="Escape"&&o()}),i.jsx(Bo,{isOpen:n,onClose:o,headerText:e("research.stepsDrawer.title"),className:"max-w-full p-4 sm:w-2/3 sm:min-w-96 sm:max-w-[600px]",headerClassName:"pb-12",headerTextClassName:"relative top-12 start-4",variant:"drawer",children:t&&i.jsx(lge,{task:t,onGoToReport:r})})}function dge(){const e=new Map;function t({root:n,rootMargin:s,threshold:o}){let r=e.get(n);r||(r=new Map,e.set(n,r));const a=JSON.stringify({rootMargin:s,threshold:o});let l=r.get(a);if(!l){const u=new Map;l={observer:new IntersectionObserver(m=>{m.forEach(f=>{const h=u.get(f.target);h==null||h(f)})},{root:n,rootMargin:s,threshold:o}),entryCallbacks:u},r.set(a,l)}return{observe:(u,d)=>{l.entryCallbacks.set(u,d),l.observer.observe(u)},unobserve:u=>{l.entryCallbacks.delete(u),l.observer.unobserve(u)}}}return{getObserver:t}}var mge="0px",fge=[0],pge=dge();function hge(e){const t=(e==null?void 0:e.rootMargin)??mge,n=(e==null?void 0:e.threshold)??fge,s=c.useRef(null),o=c.useRef(null),r=c.useRef(null),[a,l]=c.useState(),u=c.useCallback(()=>{function f(){const g=r.current,C=s.current;C&&(g==null||g.unobserve(C),l(void 0)),r.current=null}function h(){const g=s.current;if(!g)return;const C=pge.getObserver({root:o.current,rootMargin:t,threshold:n});C.observe(g,v=>{l(v)}),r.current=C}f(),h()},[t,n]),d=c.useCallback(f=>(s.current=f,u(),()=>{s.current=null,u()}),[u]),m=c.useCallback(f=>(o.current=f,u(),()=>{o.current=null,u()}),[u]);return[d,{entry:a,rootRef:m}]}var gge=hge;function vge(e){var u;const{once:t,...n}=e??{},[s,o]=gge(n),r=!!((u=o.entry)!=null&&u.isIntersecting),[a,l]=c.useState(r);return t&&r&&!a&&l(!0),[s,{...o,isVisible:t?a:r}]}var Cge=vge,yge=100;function bge({loading:e,hasNextPage:t,onLoadMore:n,rootMargin:s,disabled:o,delayInMs:r=yge}){const a=c.useRef(n),[l,{rootRef:u,isVisible:d}]=Cge({rootMargin:s});c.useEffect(()=>{a.current=n},[n]);const m=!o&&!e&&d&&t;return c.useEffect(()=>{if(m){const f=setTimeout(()=>{a.current()},r);return()=>{clearTimeout(f)}}},[m,r]),[l,{rootRef:u}]}var F3=bge;const B3="mt-1 rounded-2xl border border-black/5 bg-white/25 p-4 dark:border-white/5 dark:bg-black/25",$k=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M10 5H14C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5ZM8.5 5C8.5 3.067 10.067 1.5 12 1.5C13.933 1.5 15.5 3.067 15.5 5H21.25C21.6642 5 22 5.33579 22 5.75C22 6.16421 21.6642 6.5 21.25 6.5H19.9309L18.7589 18.6112C18.5729 20.5334 16.9575 22 15.0263 22H8.97369C7.04254 22 5.42715 20.5334 5.24113 18.6112L4.06908 6.5H2.75C2.33579 6.5 2 6.16421 2 5.75C2 5.33579 2.33579 5 2.75 5H8.5ZM10.5 9.75C10.5 9.33579 10.1642 9 9.75 9C9.33579 9 9 9.33579 9 9.75V17.25C9 17.6642 9.33579 18 9.75 18C10.1642 18 10.5 17.6642 10.5 17.25V9.75ZM14.25 9C14.6642 9 15 9.33579 15 9.75V17.25C15 17.6642 14.6642 18 14.25 18C13.8358 18 13.5 17.6642 13.5 17.25V9.75C13.5 9.33579 13.8358 9 14.25 9ZM6.73416 18.4667C6.84577 19.62 7.815 20.5 8.97369 20.5H15.0263C16.185 20.5 17.1542 19.62 17.2658 18.4667L18.4239 6.5H5.57608L6.73416 18.4667Z"})),iAe=Object.freeze(Object.defineProperty({__proto__:null,default:$k},Symbol.toStringTag,{value:"Module"}));function hh(e){const{source:t,pageName:n,customData:s}=e;D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:t,eventInfo_pageName:n,eventInfo_customData:s?JSON.stringify(s):void 0}})}function xge(e){const{impressionElement:t,entryPoint:n,customData:s}=e;D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:t,eventInfo_entryPoint:n,eventInfo_customData:s?JSON.stringify(s):void 0}})}function Jx(e){const{scenario:t,source:n,pageName:s,customData:o}=e;D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickScenario:t,eventInfo_clickSource:n,eventInfo_pageName:s,eventInfo_customData:o?JSON.stringify(o):void 0}})}function Xx(e){const{scenario:t,errorType:n,errorMessage:s,customData:o}=e;Kt({feature:"memory-management",errorType:n,scenario:t,errorMessage:s,customData:o?JSON.stringify(o):void 0})}function Sge(e){const{onDelete:t,isDeleting:n,ariaLabel:s,setButtonRef:o}=e,{t:r}=q(),[a,l]=c.useState(!1),u=c.useRef(null),d=Y_(u,o);go({onOutsideEvent:()=>{l(!1),Jx({scenario:"deleteSingleMemory",source:"cancel",pageName:"singleDurableFact"})},elements:[u],shouldAttachListeners:a});const m=()=>{a?(t(),l(!1),Jx({scenario:"deleteSingleMemory",source:"deleteSingleDurableFact",pageName:"singleDurableFact"})):(l(!0),hh({source:"durableFactDeleteButton",pageName:"memoryManagementPage"}))};return n?i.jsx("div",{className:"flex size-9 items-center justify-center",children:i.jsx(it,{className:"size-5"})}):i.jsx(ge.div,{layout:!0,children:i.jsxs(ne,{ref:d,variant:a?"rect":"square",size:"36-sm",color:a?"default":"subtle-dimmed-inverted",title:r(a?"settings.memory.management.confirmDelete":"settings.memory.delete"),"aria-label":s,"aria-expanded":a,onClick:m,children:[i.jsx(ge.div,{layout:"preserve-aspect",children:i.jsx($k,{className:F("size-4 fill-foreground-800",a&&"fill-system-red-550 dark:fill-system-red-350"),"aria-hidden":!0})}),a&&i.jsx(ge.span,{className:"text-system-red-550 dark:text-system-red-350","aria-hidden":!0,initial:Fe,animate:nt,children:r("common.delete")})]})})}function Ege(e){const{fact:t,isLast:n,onDelete:s,isDeleting:o,ariaLabel:r,setButtonRef:a}=e;return i.jsxs(ge.li,{className:"list-none",layout:!0,initial:nt,animate:nt,exit:Fe,transition:{duration:ts.default},children:[i.jsxs("div",{className:F("flex items-center gap-1.5 p-2 sm:gap-6",n&&"mb-2"),children:[i.jsx("p",{className:"flex-1 text-foreground-800 text-sm",children:t.text}),i.jsx(Sge,{onDelete:s,isDeleting:o,ariaLabel:r,setButtonRef:a})]}),!n&&i.jsx(ms,{})]})}function wge(e){const{durableFacts:t,hasNextPage:n,showInitialLoadingState:s,infiniteRef:o,onDeleteFact:r,isDeletingFact:a,hasError:l,setButtonRef:u}=e,{t:d}=q();return i.jsxs("div",{className:F(B3,"t-custom-scrollbar flex size-full min-h-0 flex-col gap-0 overflow-y-auto",s&&"justify-center"),children:[s&&i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(it,{className:"size-12"})}),i.jsx("ul",{className:"m-0 flex w-full flex-col gap-0",role:"list",children:i.jsx(pt,{children:t.map((m,f)=>i.jsx(Ege,{fact:m,isLast:f===t.length-1,onDelete:()=>r(m.id,f),isDeleting:a(m.id),ariaLabel:d("settings.memory.management.memoryItemLabel",{text:m.text,index:f+1,total:t.length}),setButtonRef:h=>u(f,h)},m.id))})}),n&&!s&&!l&&i.jsx("div",{className:"flex justify-center py-8",ref:o,children:i.jsx(it,{className:"size-12"})})]})}const Ige="/static/cmc/assets/durable-facts-empty-dark-DDJyBbNr.png",_ge="/static/cmc/assets/durable-facts-empty-light-XQy6HH2o.png";function qk(e){const{closeModal:t=!0}={},{t:n}=q(),s=se(Jv),o=wr();return async()=>{t&&s(!1),await o(),hd({prompt:n("settings.memory.management.rememberPrompt")})}}function Tge(e){const{buttonRef:t}=e,{t:n}=q(),s=M(zo)==="dark",o=qk(),r=()=>{o(),hh({source:"memoryManagementZeroStateButton",pageName:"memoryManagementPage"})};return i.jsx("div",{className:F(B3,"t-custom-scrollbar flex size-full flex-col items-center justify-around overflow-y-auto"),children:i.jsxs("div",{className:"flex max-w-96 flex-col items-center gap-8",children:[i.jsx("img",{src:s?Ige:_ge,alt:"","aria-hidden":"true",loading:"lazy",className:"w-full select-none"}),i.jsxs("div",{className:"flex w-full flex-col items-center gap-3",children:[i.jsx("h3",{className:"text-center text-foreground-800 text-lg",children:n("settings.memory.management.emptyMemoryStateTitle")}),i.jsx("p",{className:"text-center text-foreground-550 text-sm",children:n("settings.memory.management.emptyMemoryStateSubtitle")})]}),i.jsx(ne,{color:"strong",variant:"rect",size:"36-sm",title:n("settings.memory.createAction"),className:"w-fit",onClick:r,ref:t,children:n("settings.memory.createAction")})]})})}function Age(){const{t:e}=q();return i.jsxs("div",{className:F(B3,"flex size-full min-h-fit flex-col items-center justify-center gap-8 text-center text-foreground-800"),children:[i.jsx("h3",{className:"max-w-96 text-lg",children:e("common.somethingWrong")}),i.jsx("p",{className:"max-w-96 text-sm",children:e("common.somethingWrongDescription")})]})}const c0="/memory/durable-facts",e9=["memory","durable-facts"];function kge(e){const{onDeleteSuccess:t,onDeleteError:n}=e??{},s=qp(),[o,r]=c.useState(new Set),a=c.useCallback(async f=>{const{pageParam:h}=f,{url:g,args:C}=h;return await Ct(g,b$,{query:C}).then(y=>y.data)},[]),l=c.useCallback(f=>f.next?{url:c0,args:{cursor:f.next}}:null,[]),{mutate:u}=Mi({mutationFn:async({factId:f})=>{if(!(await zn(`${c0}/${f}`,{options:{method:"DELETE"}})).ok)throw new Error(`Failed to delete durable fact: ${f}`)},onMutate:({factId:f})=>{r(h=>new Set([...h,f]))},onSuccess:(f,{factId:h,index:g})=>{s.setQueryData(e9,C=>C&&{...C,pages:C.pages.map(v=>({...v,results:v.results.filter(y=>y.id!==h)}))}),t==null||t(g)},onError:(f,{factId:h,index:g})=>{n==null||n(f,h,g)},onSettled:(f,h,{factId:g})=>{r(C=>{const v=new Set(C);return v.delete(g),v})}}),d=c.useCallback(f=>o.has(f),[o]);return{...vm({queryKey:e9,queryFn:a,initialPageParam:{url:c0},getNextPageParam:l,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),deletion:{deleteDurableFact:u,isDeletingFact:d}}}function Mge(){var E;const{t:e}=q(),t=se(Sn),n=c.useRef(!1),{loader:s,deletion:o}=kge({onDeleteSuccess:S=>{t({title:e("settings.memory.management.deleted"),dismissable:!1,dismissAfter:3e3}),h(S<v.length-1?S:S-1)},onDeleteError:(S,I,_)=>{t({title:e("common.somethingWrong"),subtitle:e("common.somethingWrongDescription"),dismissable:!1,dismissAfter:3e3}),Xx({scenario:"deleteDurableFact",errorType:"requestFailure",errorMessage:S.message}),h(_)}}),{deleteDurableFact:r,isDeletingFact:a}=o,[l]=F3({...s,disabled:!!s.error}),u=qk(),d=c.useRef(!1),m=c.useRef(null),f=c.useRef(new Map),h=S=>{S<0?requestAnimationFrame(()=>{var I;(I=m.current)==null||I.focus()}):requestAnimationFrame(()=>{var I;(I=f.current.get(S))==null||I.focus()})},g=(S,I)=>{f.current.set(S,I)},C=()=>{u(),hh({source:"memoryManagementAddButton",pageName:"memoryManagementPage"})},v=((E=s.data)==null?void 0:E.flatMap(S=>S.results))??[],y=v.length===0&&!s.loading&&!s.error,b=s.loading&&v.length===0;return c.useEffect(()=>{!b&&!d.current&&(xge({impressionElement:"memoryManagementPage",customData:{state:y?"zeroState":"available"}}),d.current=!0)},[b,y]),c.useEffect(()=>{s.error&&!n.current&&(n.current=!0,t({title:e("common.somethingWrong"),subtitle:e("common.somethingWrongDescription"),dismissable:!1,dismissAfter:3e3}),Xx({scenario:`loadDurableFacts${s.hasNextPage?"NextPage":""}`,errorType:"requestFailure",errorMessage:s.error.message}))},[s.hasNextPage,s.error,t,e]),s.error&&!s.loading&&v.length===0?i.jsx(Age,{}):y?i.jsx(Tge,{buttonRef:m}):i.jsxs(i.Fragment,{children:[i.jsx(wge,{durableFacts:v,showInitialLoadingState:b,hasNextPage:s.hasNextPage,infiniteRef:l,onDeleteFact:(S,I)=>{r({factId:S,index:I})},isDeletingFact:a,hasError:!!s.error,setButtonRef:g}),i.jsx(ne,{variant:"rect",size:"36-sm",title:e("settings.memory.management.add"),className:"mt-3 w-fit shrink-0",onClick:C,children:e("settings.memory.management.add")})]})}function Nge(){const[e,t]=Ue(Jv),{t:n}=q(),s=()=>{t(!1),hh({source:"memoryManagementDismissButton",pageName:"memoryManagementPage"})};return i.jsx(dn,{isOpen:e,onClose:s,headerText:n("settings.memory.management.title"),className:"h-[70vh] max-h-[780px] w-[88vw] max-w-[760px] bg-background-200",children:i.jsx(Mge,{})})}const Kk=e=>c.createElement("svg",{viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2.21967 4.46967C2.51256 4.17678 2.98744 4.17678 3.28033 4.46967L6 7.18934L8.71967 4.46967C9.01256 4.17678 9.48744 4.17678 9.78033 4.46967C10.0732 4.76256 10.0732 5.23744 9.78033 5.53033L6.53033 8.78033C6.23744 9.07322 5.76256 9.07322 5.46967 8.78033L2.21967 5.53033C1.92678 5.23744 1.92678 4.76256 2.21967 4.46967Z"})),cAe=Object.freeze(Object.defineProperty({__proto__:null,default:Kk},Symbol.toStringTag,{value:"Module"})),mu={conversation:"share.shareManagement.conversation",imagePart:"share.shareManagement.imagePart",page:"share.shareManagement.page",podcast:"share.shareManagement.podcast","3dGeneration":"share.shareManagement.3dGeneration",task:"share.shareManagement.task"};function Rge(e){const{category:t,onCategoryChange:n,containerRef:s}=e,{t:o}=q(),r=W("share-image-gen");return i.jsx("div",{className:"flex min-h-14 w-full flex-row pe-3",children:i.jsx("div",{className:"flex items-center",children:i.jsx(bm,{className:"bg-acrylic-default-tint-light p-2 bg-blend-saturation shadow-md backdrop-blur-[60px] dark:bg-acrylic-default-tint-dark",options:{placement:"bottom-start",hideOnMenuClick:!0,roleType:"menu",rootRef:s,offset:{crossAxis:-8}},renderTrigger:a=>{const{onClick:l,ref:u}=a;return i.jsx(ne,{color:"subtle-dimmed-inverted",onClick:l,ref:u,title:o(mu[t]),children:i.jsxs("div",{className:"flex flex-row items-center gap-4.5",children:[i.jsx("div",{className:"truncate text-sm",children:o(mu[t])}),i.jsx(Kk,{className:"size-3"})]})})},children:i.jsx("div",{className:"flex flex-col gap-1.5",children:Object.keys(mu).map(a=>a!=="imagePart"||r?i.jsx(ne,{alignment:"start",color:"subtle-dimmed-inverted",onClick:()=>n(a),title:o(mu[a]),className:"shrink-0",children:o(mu[a])},a):null)})})})})}const Zk=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M5.5028 4.62704L5.5 6.75V17.2542C5.5 19.0491 6.95507 20.5042 8.75 20.5042L17.3663 20.5045C17.0573 21.3782 16.224 22.0042 15.2444 22.0042H8.75C6.12665 22.0042 4 19.8776 4 17.2542V6.75C4 5.76929 4.62745 4.93512 5.5028 4.62704ZM17.75 2C18.9926 2 20 3.00736 20 4.25V17.25C20 18.4926 18.9926 19.5 17.75 19.5H8.75C7.50736 19.5 6.5 18.4926 6.5 17.25V4.25C6.5 3.00736 7.50736 2 8.75 2H17.75Z"})),lAe=Object.freeze(Object.defineProperty({__proto__:null,default:Zk},Symbol.toStringTag,{value:"Module"}));function Yk(){const e=pe(Mn);return l3(Rt.resolvedLanguage,e)}function Qk(){const{i18n:e}=q(),t=M(Mn);return l3(e.resolvedLanguage,t)}const Pge={year:"numeric",month:"long",day:"numeric"};function Lge(e){const{item:t,isSmallScreen:n,onRevokeItem:s}=e,{sharedAt:o}=t,r="shareLink"in t?t.shareLink:t.url,a="title"in t&&t.title?t.title:"",l="thumbnailUrl"in t?t.thumbnailUrl:void 0,{t:u}=q(),[d,m]=c.useState(!1),f=c.useRef(null),[h,g]=c.useState(!1),C=Qk(),v=a===""?r:a,y=async()=>{try{await navigator.clipboard.writeText(r),g(!0),ho({msg:u("share.copied"),type:"polite"}),setTimeout(()=>g(!1),J7)}catch(E){Qde({details:"Error copying shared conversation url.",errorMessage:E instanceof Error?E.message:""})}};go({onOutsideEvent:()=>m(!1),elements:[f],includeScroll:!0,invokeOnce:!0});const b=async()=>{d?(Yde(t.shareId),await s(t),m(!1)):m(!0)};return i.jsxs("div",{className:"flex h-10 w-full flex-row items-center",children:[l&&i.jsx(Pu,{src:l,alt:u("share.shareManagement.thumbnailAlt"),className:"me-3 size-10 min-h-10 min-w-10 rounded-xl object-cover object-center backdrop-blur",draggable:"false",loading:"lazy"}),i.jsx("div",{className:"w-full truncate pe-6",children:i.jsx(ls,{href:r,title:v,className:"text-foreground-800 underline sm:text-foreground-900 sm:text-sm",children:v})}),!n&&i.jsx("div",{className:"shrink-0 whitespace-nowrap text-foreground-550 text-xs",children:new Date(o).toLocaleDateString(C,Pge)}),i.jsxs("div",{className:"flex min-w-[104px] shrink-0 flex-row justify-end",children:[!d&&i.jsx(ne,{size:"32-xs",color:"subtle-dimmed-inverted",onClick:y,title:u("share.copy"),children:h?i.jsx(Zk,{className:"absolute size-6 sm:size-5"}):i.jsx(dh,{className:"absolute size-6 sm:size-5"})}),i.jsx(ne,{size:"32-xs",color:d?"default":"subtle-dimmed-inverted",onClick:b,title:u(d?"share.shareManagement.confirmRevoke":"share.shareManagement.revoke"),ref:f,children:i.jsxs("div",{className:F("flex flex-row",!d&&"absolute"),children:[i.jsx(an,{className:F("size-6 sm:size-5",d&&"text-system-red-450")}),d&&i.jsx("div",{className:"px-1 text-system-red-450 sm:text-sm",children:u("share.shareManagement.revokeButton")})]})})]})]})}function Oge(e){const{items:t,onRevokeItem:n,loading:s,category:o}=e,{t:r}=q(),a=gt({breakpoint:"sm"}),l=t.length>0,u=()=>{switch(o){case"conversation":return r("share.shareManagement.conversationArtifact");case"page":return r("share.shareManagement.pageArtifact");case"podcast":return r("share.shareManagement.podcastArtifact");case"imagePart":return r("share.shareManagement.imageArtifact");case"task":return r("share.shareManagement.taskArtifact");case"3dGeneration":return r("share.shareManagement.3dGenerationArtifact");default:return r("share.shareManagement.conversationArtifact")}};return s?i.jsx("div",{className:"flex size-full items-center justify-center",children:i.jsx(it,{className:"size-10"})}):l?i.jsx("div",{className:"w-full sm:px-3 sm:pt-2",children:i.jsx(pt,{initial:!1,children:t.map(d=>i.jsx(ge.div,{animate:nt,exit:Fe,children:i.jsx(Lge,{item:d,isSmallScreen:a,onRevokeItem:n},d.shareId)},d.shareId))})}):i.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 px-2 pb-6 pt-0.5 text-center text-foreground-550 sm:px-7 sm:py-0",children:[i.jsx("h3",{className:"text-xl-medium",children:r("share.shareManagement.emptySharedLinksTitle")}),i.jsx("p",{className:"text-base",children:r("share.shareManagement.emptySharedLinksSubtitleV2",{artifact:u()})})]})}const Dge=ke(["3dGeneration","podcast","pages","task"]),uAe=x({id:p(),url:p()});x({type:Dge,id:p().min(1)});const Jk=x({shareId:p(),url:Tt(),title:p(),sharedAt:p()}),jge=x({cursor:p().optional()});x({results:L(Jk),next:p().nullable()});const Mm=ke(["page","podcast","3dGeneration","imagePart","task"]),Nm=x({shareId:p(),shareLink:Tt(),sharedAt:p()}),Uge=Nm.extend({type:w(Mm.enum.page),title:p().nullable()}),Fge=Nm.extend({type:w(Mm.enum.podcast),title:p().nullable()}),Bge=Nm.extend({type:w(Mm.enum["3dGeneration"])}),Vge=Nm.extend({type:w(Mm.enum.imagePart),thumbnailUrl:Tt(),prompt:p()}),Hge=Nm.extend({type:w(Mm.enum.task),title:p().nullable()}),zge=Re([Uge,Fge,Bge,Vge,Hge,Jk]);jge.extend({types:p().optional()});const Gge=x({results:L(zge),next:p().nullable()});x({conversationTitle:p()});const Wge="/conversations/shares",$ge="/sharing",qge="sharedLinks";function Kge({type:e}){const t=e==="conversation",n=t?Wge:$ge,s=[qge,e],o=c.useCallback(async u=>{const{pageParam:d}=u,{url:m,args:f}=d;return await Ct(m,Gge,{query:f,analytics:{anonymousPath:n},parseOptions:{safe:!0}}).then(g=>g.data)},[n]),r=c.useCallback(u=>u.next?{url:n,args:t?{cursor:u.next}:{cursor:u.next,types:e}}:null,[t,n,e]),a=vm({queryKey:s,queryFn:o,initialPageParam:{url:n,args:t?void 0:{types:e}},getNextPageParam:r,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0}),l=Zge({path:n,queryKey:s});return{...a,deleteSharedLink:l}}function Zge({path:e,queryKey:t}){const n=qp();return Mi({mutationFn:async o=>{await zn(`${e}/${o}`,{options:{method:"DELETE"},analytics:{anonymousPath:`${e}/*`}})},onMutate:async o=>{await n.cancelQueries({queryKey:t}),n.setQueryData(t,r=>r&&{...r,pages:r.pages.map(a=>({...a,results:a.results.filter(l=>l.shareId!==o)}))})}}).mutateAsync}function Yge(e){var m;const{showCategoryHeader:t,containerRef:n}=e,[s,o]=c.useState("conversation"),{loader:r,deleteSharedLink:a}=Kge({type:s}),[l]=F3({...r,disabled:!!r.error}),u=((m=r.data)==null?void 0:m.flatMap(f=>f.results))??[],d=async f=>{await a(f.shareId)};return i.jsxs("div",{className:"flex size-full flex-col overflow-y-auto sm:p-2",children:[t&&i.jsxs("div",{children:[i.jsx(Rge,{category:s,onCategoryChange:f=>{o(f)},containerRef:n}),i.jsx(ms,{color:"accent",horizontalMargin:!1,className:"mx-2"})]}),i.jsxs("div",{className:"t-custom-scrollbar flex size-full flex-col overflow-y-auto",children:[i.jsx(Oge,{items:u,onRevokeItem:d,loading:r.loading&&u.length===0,category:s}),r.hasNextPage&&i.jsx("div",{ref:l})]})]})}const Qge=R(!1);function Jge(){const{t:e}=q(),[t,n]=Ue(Qge),s=gt({breakpoint:"sm"}),o=W("artifact-sharemanagement"),r=o?"h-[584px]":"h-[512px]",a=c.useRef(null),l=()=>{n(!1)};return i.jsxs(dn,{isOpen:t,headerText:e("share.shareManagement.sharedLinksTitle"),className:F(r,"w-[640px]"),bottomSheetOnSmall:!0,bottomSheetClassName:"w-full rounded-t-4xl rounded-b-6xl",onClose:l,children:[i.jsx("div",{className:"size-full overflow-y-auto",ref:a,children:i.jsx(Yge,{showCategoryHeader:o,containerRef:a})}),!s&&i.jsx("div",{className:"mt-2 flex h-14 flex-col items-center pe-3.5 ps-3.5",children:i.jsx(ne,{color:"subtle-dimmed-inverted",title:e("common.cancel"),onClick:l,className:"size-full text-base",children:e("common.cancel")})})]})}function Xge(){const e=W("share-to-social-media-v1"),t=W("social-media-with-copy");return e||t}function dAe(){return W("social-media-with-copy")}const t9={translateY:"100%"},e0e={translateY:0};function t0e(e){const{children:t,id:n,className:s}=e,o=c.useRef(null),{modalAttributes:r}=j1({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return i.jsxs(i.Fragment,{children:[i.jsx(ge.div,{initial:Fe,animate:nt,exit:Fe,transition:N2,className:"fixed inset-0 bg-black/50",...r}),i.jsx(ge.div,{id:n,initial:t9,animate:e0e,exit:t9,transition:N2,className:ue("absolute bottom-0 max-h-expanded-section w-full overflow-y-hidden rounded-4xl",ct.modal,s),ref:o,children:i.jsx("div",{className:"flex h-full flex-col items-start gap-4 overflow-y-auto bg-background-100 p-6",children:t})})]})}function n0e(e){var l;const{children:t,id:n,className:s}=e,o=Ns(),r=(l=re.instance().config().uiOverrides)==null?void 0:l.disableConversationsModalWrapper,{modalAttributes:a}=j1({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return o||r?i.jsx("div",{className:"flex max-w-96 flex-col items-start gap-4 p-2",...a,children:t}):i.jsx(t0e,{id:n,className:s,children:t})}function s0e(){const[e,t]=c.useState(!1),n=hl(vt),s=wr(),o=c.useCallback(async r=>{if(!r)return;const a=tte(r);qt({source:"deleteConversation",conversationId:r,scenario:a?"actions":void 0}),t(!0);try{a?await zn(`/tasks/${a}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/tasks/*"}}):await zn(`/conversations/${r}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*"}}),pe(je)===r&&await s(),n(l=>{l.delete(r)})}catch(l){l instanceof Error&&Kt({feature:"deleteConversation",errorType:l.name,errorMessage:l.message,exception:l.stack})}finally{t(!1)}},[n,s]);return{loading:e,deleteConversation:o}}function o0e(e){var v;const{conversationId:t,onClose:n}=e,s=c.useId(),{t:o}=q(),[r,a]=c.useState(!1),l=c.useRef(null),{loading:u,deleteConversation:d}=s0e();c.useEffect(()=>{requestAnimationFrame(()=>{var y;(y=l.current)==null||y.focus()})},[]);const m=()=>{r&&An(pF,"true"),n()},f=async()=>{await d(t),m(),Ge.emit("composer:focus-input")},h=Ns(),C=!((v=re.instance().config().uiOverrides)==null?void 0:v.disableDeleteConfirmationCheckbox)&&!h;return hs(y=>{y.key==="Escape"&&(y.stopPropagation(),y.preventDefault(),n())}),i.jsxs(n0e,{id:s,className:"h-96",children:[i.jsx("h2",{className:"text-xl",children:o("composer.deleteConversation.header")}),i.jsx("p",{children:o("composer.deleteConversation.description")}),C&&i.jsx(u3,{disabled:u,checked:r,label:o("composer.deleteConversation.dontRemindMeCheck"),setChecked:a,className:"flex-1"}),i.jsx(ne,{ref:l,title:o("common.delete"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",disabled:u,onClick:f,children:u?i.jsx(it,{className:"size-8"}):o("common.delete")}),i.jsx(ne,{title:o("common.keep"),color:"strong",size:"56-xl",variant:"rect",className:"w-full",disabled:u,onClick:m,children:o("common.keep")})]})}const Xk=R(void 0),eM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M14.7227 16.2211C14.43 16.5142 14.4303 16.9891 14.7234 17.2818C15.0165 17.5745 15.4914 17.5742 15.7841 17.2811L20.7807 12.2776C21.0732 11.9847 21.0731 11.5101 20.7804 11.2174L15.7838 6.21972C15.4909 5.9268 15.016 5.92675 14.7231 6.21962C14.4302 6.51248 14.4301 6.98735 14.723 7.28028L18.443 11H10.6012C9.00642 11 7.79015 11.242 6.71218 11.7645L6.46576 11.89C5.35728 12.4829 4.48286 13.3573 3.89004 14.4658C3.28062 15.6053 3 16.8837 3 18.6012C3 19.0154 3.33579 19.3512 3.75 19.3512C4.16421 19.3512 4.5 19.0154 4.5 18.6012C4.5 17.1174 4.72765 16.0802 5.21276 15.1732C5.66578 14.3261 6.32609 13.6658 7.17316 13.2128C8.01046 12.765 8.95858 12.5365 10.2666 12.5041L10.6012 12.5H18.438L14.7227 16.2211Z"})),mAe=Object.freeze(Object.defineProperty({__proto__:null,default:eM},Symbol.toStringTag,{value:"Module"})),tM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12.5303 2.21967C12.2374 1.92678 11.7626 1.92678 11.4697 2.21967L6.21967 7.46967C5.92678 7.76256 5.92678 8.23744 6.21967 8.53033C6.51256 8.82322 6.98744 8.82322 7.28033 8.53033L11.25 4.56066V15.25C11.25 15.6642 11.5858 16 12 16C12.4142 16 12.75 15.6642 12.75 15.25V4.56066L16.7197 8.53033C17.0126 8.82322 17.4874 8.82322 17.7803 8.53033C18.0732 8.23744 18.0732 7.76256 17.7803 7.46967L12.5303 2.21967ZM3.75 11C4.16421 11 4.5 11.3358 4.5 11.75V17.75C4.5 18.7165 5.2835 19.5 6.25 19.5H17.75C18.7165 19.5 19.5 18.7165 19.5 17.75V11.75C19.5 11.3358 19.8358 11 20.25 11C20.6642 11 21 11.3358 21 11.75V17.75C21 19.5449 19.5449 21 17.75 21H6.25C4.45507 21 3 19.5449 3 17.75V11.75C3 11.3358 3.33579 11 3.75 11Z"})),fAe=Object.freeze(Object.defineProperty({__proto__:null,default:tM},Symbol.toStringTag,{value:"Module"}));function r0e(e){const t=M(Yt),n=M(vt),s=e?n.get(e):void 0,o=!!(s!=null&&s.group),r=c.useMemo(()=>{var f;if(!((f=s==null?void 0:s.group)!=null&&f.participants)||!t)return[];const{owner:l,participants:u}=s.group;return(l?u.filter(h=>h.userId!==l.userId):u).concat(l?[l]:[]).map(({userId:h,userDisplayName:g})=>({userId:h,userDisplayName:g??h,isYou:h===t.id,isOwner:(l==null?void 0:l.userId)===h})).sort((h,g)=>Number(g.isYou)-Number(h.isYou))},[s,t]),a=c.useMemo(()=>r.find(l=>l.isYou&&l.isOwner)!==void 0,[r]);return{members:r,isGroupOwner:a,isGroupConversation:o}}function a0e(e){const{conversationId:t,onShare:n,onInvite:s,onRemove:o,isCreating:r,inviteLink:a}=e,{t:l}=q(),{isGroupConversation:u,isGroupOwner:d}=r0e(t),m=(f,h)=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),h.stopPropagation(),f==="invite"?s():n())};return i.jsxs("div",{className:"flex flex-col justify-center gap-3",role:"region","aria-label":l("share.invite.title"),children:[i.jsxs("div",{className:"flex w-full cursor-pointer flex-row items-center justify-start gap-3 rounded-2xl bg-background-800 px-2 py-2.5 text-foreground-200 shadow-sm hover:bg-background-700 focus:bg-background-700 focus:outline-none focus:ring-2 focus:ring-foreground-600 dark:bg-background-800",role:"button",tabIndex:0,"aria-label":l("share.invite.subtitle"),"aria-expanded":"false",onClick:s,onKeyDown:f=>m("invite",f),children:[i.jsx("div",{className:"ms-3 flex size-10 items-center justify-center rounded-xl bg-foreground-100 fill-foreground-250 dark:bg-muted-550","aria-hidden":"true",tabIndex:-1,title:l("share.invite.subtitle"),children:i.jsx(tM,{className:"size-6 text-foreground-800","aria-hidden":"true"})}),i.jsx("div",{className:"m-auto ms-0 flex flex-col truncate text-start text-base",children:i.jsx("span",{className:"truncate",children:l(r?"common.loading":"share.invite.subtitle")})}),i.jsx(ds,{className:"me-2 size-5 transition-transform","aria-hidden":"true"})]}),a?i.jsxs("div",{className:"flex w-full flex-row items-center justify-center gap-1",children:[i.jsx("span",{className:"text-foreground-550 text-sm dark:text-foreground-800",children:l("share.invite.permission")}),d&&i.jsx("button",{type:"button",className:"text-foreground-550 underline text-sm hover:text-foreground-800 focus:outline-none focus:ring-2 focus:ring-foreground-600 dark:text-foreground-800 dark:hover:text-foreground-600",onClick:o,title:l("share.invite.remove"),children:l("share.invite.remove")})]}):i.jsx("div",{className:"px-3 text-center text-foreground-550 text-sm dark:text-foreground-800",children:l("share.invite.inviteLinkDescription")}),i.jsx(ms,{}),(!u||d)&&i.jsxs("div",{className:"flex w-full cursor-pointer flex-row items-center justify-start gap-3 rounded-2xl px-2 py-2.5 hover:bg-background-200 focus:bg-background-200 focus:outline-none focus:ring-2 focus:ring-foreground-600 dark:hover:bg-muted-400 dark:focus:bg-muted-400",role:"button",tabIndex:0,"aria-label":l("share.invite.subtitle"),"aria-expanded":"false",onClick:n,onKeyDown:f=>m("share",f),children:[i.jsx("div",{className:"ms-3 flex size-10 items-center justify-center rounded-xl bg-foreground-100 fill-foreground-250 shadow-sm dark:bg-muted-550","aria-hidden":"true",tabIndex:-1,title:l("share.invite.subtitle"),children:i.jsx(eM,{className:"size-6 text-foreground-800","aria-hidden":"true"})}),i.jsx("div",{className:"m-auto ms-0 flex flex-col truncate text-start text-base",children:i.jsx("span",{className:"truncate",children:l("share.invite.copy")})}),i.jsx(ds,{className:"me-2 size-5 transition-transform","aria-hidden":"true"})]}),i.jsx("p",{className:"px-3 text-foreground-550 text-xs dark:text-foreground-800",role:"note",children:l("share.invite.disclaimer")})]})}function i0e(e){const{conversationId:t,inviteLink:n,isCreating:s,onShare:o,onInvite:r,onRemove:a}=e;return i.jsx(a0e,{conversationId:t,inviteLink:n,isCreating:s,onShare:o,onInvite:r,onRemove:a})}function c0e(e){const{successMessage:t,errorMessage:n,analyticsDetails:s="Clipboard copy failed",announcePoliteness:o="polite",enableToast:r=!0,enableAnnounce:a=!0,trackError:l=!0,trackCopyClick:u}=e,d=se(Sn),[m,f]=c.useState(!1);return{copy:c.useCallback(async g=>{if(!g)return!1;f(!0);try{return u==null||u(),await navigator.clipboard.writeText(g),a&&ho({msg:t,type:o}),r&&d({title:t,dismissAfter:3e3}),!0}catch(C){return l&&D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:s,eventInfo_errorMessage:C instanceof Error?C.message:""}}),r&&d({title:n,dismissAfter:3e3,intent:"error"}),!1}finally{f(!1)}},[t,n,s,o,r,a,l,d,u]),isCopying:m}}async function l0e(e){return(await Ct(e,s$,{options:{method:"POST"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*/join-link"}})).data}function u0e(e){const t=Mi({mutationKey:["createInviteLink",e],mutationFn:async()=>{const s=`/conversations/${e}/join-link`;return l0e(s)},onSuccess:()=>{o_(e)}}),n=async()=>{try{return{success:!0,url:(await t.mutateAsync()).url}}catch{return{success:!1}}};return{isCreating:t.isPending,error:t.error,create:n}}async function d0e(e){const t=`/conversations/${e}/join-link`;try{return(await zn(t,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*/join-link"}})).ok}catch{return!1}}function m0e(e){const t=Mi({mutationKey:["deleteInviteLink",e],mutationFn:()=>d0e(e)}),n=async()=>{try{return await t.mutateAsync()}catch{return!1}};return{isDeleting:t.isPending,error:t.error,remove:n}}async function f0e(e){return(await Ct(e,o$,{options:{method:"GET"},parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/*/join-link"}})).data}function p0e({conversationId:e,enabled:t=!1}){const{data:n,error:s,refetch:o,isPending:r}=Ms({queryKey:["getInviteLink",e],queryFn:async()=>f0e(`/conversations/${e}/join-link`),enabled:t});return{isPending:r,error:s,link:(n==null?void 0:n.url)??void 0,getLink:o}}function h0e(){return W("allowanonymoususershare")}function V3({conversationId:e,messageId:t,scenario:n,trackShareClick:s=()=>{}}){const o=M(je),r=e??o,a=h0e(),l=se(Xk),u=c.useRef(null),d=c.useCallback(()=>{if(!r){qde({conversationId:"",messageId:t,errorName:"conversationNotFound",errorMessage:"Conversation ID is missing"});return}l({conversationId:r,action:"share",messageId:t,scenario:n,onClose:()=>{setTimeout(()=>{var h;(h=u.current)==null||h.focus()},0)}}),s()},[r,t,n,l,s]),m=RA({callback:d,onShowSignIn:s,signInScenario:"loggedOutSharing",signInReason:"shareMessage"});return{shareClickHandler:c.useMemo(()=>a?d:m,[a,d,m]),shareRef:u}}function g0e(e){const{conversationId:t,close:n}=e,{t:s}=q(),{isCreating:o,create:r}=u0e(t),{link:a,getLink:l}=p0e({conversationId:t,enabled:!0}),{remove:u}=m0e(t),d=se(Sn),{shareClickHandler:m}=V3({scenario:"chatPage",trackShareClick:()=>ye({scenario:"inviteModal",source:"copy"})}),{copy:f}=c0e({successMessage:s("share.copied"),errorMessage:s("share.copiedFailed"),analyticsDetails:"Error copying group chat invite link."}),h=()=>{m(),ye({scenario:"inviteModal",source:"copy"})},g=async()=>{if(ye({scenario:"inviteModal",source:"inviteByLink"}),a){f(a);return}const{success:v,url:y}=await r();v&&y?(await l(),f(y)):d({title:s("share.invite.createFail"),dismissAfter:3e3}),ye({scenario:"inviteModal",source:"create"})},C=async()=>{await u()?await l():d({title:s("share.invite.removeFail"),dismissAfter:3e3}),ye({scenario:"inviteModal",source:"remove"})};return i.jsx(dn,{isOpen:!0,onClose:n,headerText:s("share.invite.title"),headerTextClassName:"m-auto",className:"w-full max-w-[516px]",children:i.jsx(i0e,{conversationId:t,inviteLink:a,isCreating:o,onShare:h,onInvite:g,onRemove:C})})}const nM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M9.25 7C9.66421 7 10 7.33579 10 7.75C10 8.12656 9.72249 8.4383 9.36083 8.49187L9.25 8.5H7C5.067 8.5 3.5 10.067 3.5 12C3.5 13.864 4.95707 15.3876 6.79435 15.4941L7 15.5H9.25C9.66421 15.5 10 15.8358 10 16.25C10 16.6266 9.72249 16.9383 9.36083 16.9919L9.25 17H7C4.23858 17 2 14.7614 2 12C2 9.32226 4.10496 7.13615 6.75045 7.00612L7 7H9.25ZM17 7C19.7614 7 22 9.23858 22 12C22 14.6777 19.895 16.8638 17.2495 16.9939L17 17H14.75C14.3358 17 14 16.6642 14 16.25C14 15.8734 14.2775 15.5617 14.6392 15.5081L14.75 15.5H17C18.933 15.5 20.5 13.933 20.5 12C20.5 10.136 19.0429 8.6124 17.2057 8.50594L17 8.5H14.75C14.3358 8.5 14 8.16421 14 7.75C14 7.37344 14.2775 7.0617 14.6392 7.00813L14.75 7H17ZM7 11.25H17C17.4142 11.25 17.75 11.5858 17.75 12C17.75 12.3797 17.4678 12.6935 17.1018 12.7432L17 12.75H7C6.58579 12.75 6.25 12.4142 6.25 12C6.25 11.6203 6.53215 11.3065 6.89823 11.2568L7 11.25H17H7Z"})),pAe=Object.freeze(Object.defineProperty({__proto__:null,default:nM},Symbol.toStringTag,{value:"Module"}));async function Dp(e){const{url:t,scenario:n="conversation"}=e;try{return await navigator.clipboard.writeText(t),!0}catch(s){return D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:`Error copying shared ${n} url.`,eventInfo_errorMessage:s instanceof Error?s.message:""}}),!1}}function v0e({url:e,disableAutoCopy:t=!1,buttonColor:n="strong",onCopyClick:s}){const{t:o}=q(),r=o("share.copied"),a=o("share.copy"),l=o("share.copying"),[u,d]=c.useState(""),[m,f]=c.useState(!1),h=c.useRef(null),g=c.useRef(null),C=c.useCallback(()=>{h.current=window.setTimeout(()=>{d(a)},J7)},[a]),v=c.useCallback(()=>{h.current&&clearTimeout(h.current)},[]);c.useEffect(()=>t?(d(a),v):(f(!0),d(l),h.current=window.setTimeout(()=>{Dp({url:e}).then(b=>{var E;f(!1),d(b?r:a),(E=g.current)==null||E.focus(),s==null||s(),b&&C()})},oB),v),[C,v,e,r,a,l,t,s]);const y=async()=>{await Dp({url:e}),d(r),v(),C(),s==null||s()};return i.jsx(ne,{ref:g,title:u,color:n,size:"56-xl",className:"w-full",onClick:y,disabled:m,"aria-live":"polite","aria-label":u,children:m?i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(it,{type:"spinnerThemed",className:"size-6"}),u]}):u})}function hAe({url:e,urlGenerator:t,className:n,disabled:s,isLoading:o=!1,onClick:r,buttonRef:a}){const{t:l}=q(),u=se(Sn),[d,m]=c.useState(!1),f=l("chat.copy"),h=c.useCallback(async()=>{if(!e&&!t){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:"No URL or URL generator provided for copy button.",eventInfo_errorMessage:"Missing url and onGenerateShareUrl props"}});return}try{m(!0);const C=e??await t(),v=await Dp({url:C});r(C),u(v?{title:l("podcasts.shareToastMessage"),dismissable:!1,dismissAfter:6e3}:{title:l("share.unhandledErrorTitle"),dismissable:!1,dismissAfter:6e3})}catch(C){D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:"Error copying shared url from social media copy button.",eventInfo_errorMessage:C instanceof Error?C.message:""}}),u({title:l("share.unhandledErrorTitle"),dismissable:!1,dismissAfter:6e3})}finally{m(!1)}},[e,t,r,l,u]),g=i.jsx("div",{className:"size-8 p-0.5",children:o&&d?i.jsx(it,{className:"size-8"}):i.jsx(nM,{})});return i.jsxs(ne,{ref:a,size:"56-xl",color:"subtle-dimmed-inverted",title:f,className:F("flex flex-1 flex-col gap-1 py-2",n),onClick:h,"aria-label":f,disabled:s,children:[g,i.jsx("span",{className:"font-medium text-foreground-650 text-2xs",children:f})]})}function C0e(e){const{onClose:t,shareUrl:n,imagePath:s,title:o}=e,[r,a]=c.useState(!0),{t:l}=q(),u=()=>{t(!1)};return i.jsxs(dn,{isOpen:!0,onClose:u,headerText:l("podcasts.share"),className:"w-full max-w-[640px]",children:[i.jsxs("div",{className:"mt-3 flex flex-col gap-6",children:[i.jsxs("div",{className:"mx-2 flex flex-col items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(qI,{alt:"",path:s,onLoad:()=>a(!1),className:"rounded-2xl"}),i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-podcast-share-modal-light dark:bg-gradient-podcast-share-modal-dark"}),!r&&i.jsx("h1",{className:"absolute bottom-8 mx-8 inline text-foreground-800 text-2xl",role:"presentation",children:o})]}),r&&i.jsx("div",{className:"flex h-[328px] items-center justify-center",children:i.jsx(it,{type:"spinnerThemed",className:"size-6"})})]}),i.jsx("div",{className:"py-4",children:i.jsx(v0e,{url:n,disableAutoCopy:!0})})]}),i.jsx("div",{className:"m-auto mb-3 max-w-[484px] text-center text-foreground-600 text-xs",children:l("podcasts.sharePodcastsDisclaimer")})]})}const y0e=c.lazy(()=>B(()=>import("./sender-share-conversation-modal-BP6k7UAA.js"),__vite__mapDeps([361,1,336,337,362])).then(e=>({default:e.ShareConversationModal})));function b0e(){const[e,t]=Ue(Xk),{t:n}=q(),s=Xge(),o=W("share-image-continue"),r=c.useMemo(()=>e?document.activeElement:null,[e]),a=()=>{var l;r instanceof HTMLElement&&setTimeout(()=>{r.focus()},0),t(void 0),(e==null?void 0:e.action)==="share"&&((l=e.onClose)==null||l.call(e))};switch(e==null?void 0:e.action){case"delete":return i.jsx(Bo,{isOpen:!0,className:"w-3/4 max-w-fit",trapFocus:!0,disableCloseOutside:!0,children:i.jsx(o0e,{onClose:a,conversationId:e.conversationId})});case"share":{let l;return s||o?l=n("common.share"):e.messageId?l=n("share.shareModalHeaderOneTurn"):l=n("share.shareModalHeader"),i.jsx(Bo,{trapFocus:!0,isOpen:!!e.conversationId,disableCloseOutside:!0,onClose:a,headerText:l,headerTextClassName:F("text-xl",s&&"text-2xl"),className:F("relative max-h-full w-3/4 max-w-[640px] gap-3 overflow-y-auto",s&&"gap-4 p-8"),children:i.jsx(c.Suspense,{fallback:i.jsx(ne,{color:"strong",size:"56-xl",className:"w-full",title:n("common.loading"),disabled:!0,children:i.jsx(it,{className:"size-8"})}),children:i.jsx(y0e,{conversationId:e.conversationId,scenario:e.scenario,messageId:e.messageId})})})}case"share-podcast":return i.jsx(C0e,{onClose:a,shareUrl:e.shareUrl,imagePath:e.imagePath,title:e.title});case"share-invite":return i.jsx(g0e,{close:a,conversationId:e.conversationId});default:return null}}const x0e="/static/cmc/assets/turn-limit-dark-CEuF11Ih.jpg",S0e="/static/cmc/assets/turn-limit-light-BSlP2HSn.jpg";function E0e(){const[e,t]=Ue(b1),{dismiss:n,source:s,beforeContinue:o}=e,{t:r}=q(),{login:a}=Xi(),l=r("common.notNow"),u=r("signInPrompt.continueWithMicrosoft"),d=M(zo),m=ut();c.useEffect(()=>{un({page:m,scenario:`UpsellProForAuth0AccountFrom${s}`})},[m,s]);const f=()=>{ye({source:`UpsellProForAuth0AccountFrom${s}`,scenario:"ProUpsellForAuth0AccountLinkWithMSA",destination:"MicrosoftLoginPage"}),o==null||o(),sessionStorage.setItem(C2,`${new Date().getTime().toString()}-link`),a({provider:"microsoft"})},h=async()=>{ye({source:`UpsellProForAuth0AccountFrom${s}`,scenario:"dismissProUpsellForAuth0Account",destination:m}),await(n==null?void 0:n()),t(null)};return i.jsx(dn,{isOpen:!0,className:"max-w-md gap-0 py-6",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-center",children:[i.jsx("img",{src:d==="dark"?x0e:S0e,alt:r("images.birds"),className:"h-52 w-full rounded-3xl object-cover"}),i.jsx("h1",{className:"pb-5 pt-8 text-center text-2xl",children:r("logIn.m365UpsellHeader")}),i.jsx("p",{className:"max-w-[95%] break-words pb-8 text-left",children:r("logIn.m365UpsellDescription")}),i.jsxs(ne,{onClick:f,title:u,variant:"pill",size:"56-xl",className:"w-full",color:"strong",testId:"prompt-sign-in-msft-composer-action",children:[i.jsx(c3,{className:"size-6"}),u]}),i.jsx(ne,{onClick:h,title:l,variant:"pill",size:"56-xl",color:"overlay-bright",className:"mt-3 w-full",testId:"not-now-button-composer-action",children:l})]})})}function w0e(){const e=W("ceo-thinkdeeper"),t=W("ceo-smart-mode"),n=W("ceo"),s=W("webretrieval"),o=W("webcontent"),r=W("browser-actions");return e||t||n||s||o||r}function I0e(){const e=W("memory-management-v2"),t=Qt(),n=M(_1),s=M(sC);return e&&t&&!n&&!s}function _0e(){const e=W("sharemanagement"),t=Qt();return e&&t}const sM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3 5.75C3 4.23122 4.23122 3 5.75 3H15.7145C16.5764 3 17.4031 3.34241 18.0126 3.9519L20.0481 5.98744C20.6576 6.59693 21 7.42358 21 8.28553V18.25C21 19.7688 19.7688 21 18.25 21H5.75C4.23122 21 3 19.7688 3 18.25V5.75ZM5.75 4.5C5.05964 4.5 4.5 5.05964 4.5 5.75V18.25C4.5 18.9404 5.05964 19.5 5.75 19.5H6V14.25C6 13.0074 7.00736 12 8.25 12H15.75C16.9926 12 18 13.0074 18 14.25V19.5H18.25C18.9404 19.5 19.5 18.9404 19.5 18.25V8.28553C19.5 7.8214 19.3156 7.37629 18.9874 7.0481L16.9519 5.01256C16.6918 4.75246 16.3582 4.58269 16 4.52344V7.25C16 8.49264 14.9926 9.5 13.75 9.5H9.25C8.00736 9.5 7 8.49264 7 7.25V4.5H5.75ZM16.5 19.5V14.25C16.5 13.8358 16.1642 13.5 15.75 13.5H8.25C7.83579 13.5 7.5 13.8358 7.5 14.25V19.5H16.5ZM8.5 4.5V7.25C8.5 7.66421 8.83579 8 9.25 8H13.75C14.1642 8 14.5 7.66421 14.5 7.25V4.5H8.5Z"})),gAe=Object.freeze(Object.defineProperty({__proto__:null,default:sM},Symbol.toStringTag,{value:"Module"})),oM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM8 9.5C8 8.67157 8.67157 8 9.5 8H14.5C15.3284 8 16 8.67157 16 9.5V14.5C16 15.3284 15.3284 16 14.5 16H9.5C8.67157 16 8 15.3284 8 14.5V9.5Z"})),vAe=Object.freeze(Object.defineProperty({__proto__:null,default:oM},Symbol.toStringTag,{value:"Module"})),T0e=R(void 0),A0e=R(null);function k0e(){const{t:e}=q(),[t,n]=Ue(T0e),s=M(Yt),o=se(Lw),r=()=>{o(!1),n(void 0)},a=async l=>{await BC({allowBrowserActions:l}),jn.regenerateMessage({messageId:t??"",mode:"retry"}),o(l),n(void 0)};return i.jsx(dn,{isOpen:t!==void 0,headerIcon:i.jsxs("div",{className:"flex justify-center pb-7",children:[i.jsx("div",{className:"size-11 shrink-0 translate-x-1.5 rounded-full border-2 border-black/12 dark:border-white/15",children:i.jsx(j3,{imgSrc:s==null?void 0:s.imgSrc})}),i.jsx("div",{className:"flex size-11 -translate-x-1.5 items-center justify-center rounded-full border-2 border-black/12 bg-white dark:border-white/15",children:i.jsx(Sm,{className:"size-7"})})]}),headerText:e("browserActions.consent.title"),className:"w-[360px] max-w-[95vw] gap-4 p-8",headerTextClassName:"text-xl text-center",children:i.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[i.jsx("p",{className:"mt-1 text-base",children:e("browserActions.consent.description")}),i.jsx(l0,{icon:i.jsx(oM,{className:"size-6"}),title:e("browserActions.consent.inControlSectionTitle"),description:i.jsx("span",{children:i.jsx(mn,{i18nKey:"browserActions.consent.inControlSectionDescription",components:{settingsLink:i.jsx(Ol,{pages:["menu","account","privacy"],className:"text-accent-450",clickSource:"browserActionsConsentSettingsLink",onClick:r,pushPagesDelay:100})}})})}),i.jsx(l0,{icon:i.jsx(sM,{className:"size-6"}),title:e("browserActions.consent.yourPrivacySectionTitle"),description:i.jsx("span",{children:e("browserActions.consent.yourPrivacySectionDescription")})}),i.jsx(l0,{icon:i.jsx(fh,{className:"size-6"}),title:e("browserActions.consent.yourEdgeProfileSectionTitle"),description:i.jsx("span",{children:e("browserActions.consent.yourEdgeProfileSectionDescription")})}),i.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[i.jsx(ne,{title:e("browserActions.consent.confirmButton"),color:"default",size:"56-xl",variant:"rect",className:"w-full",onClick:()=>a(!0),children:e("browserActions.consent.confirmButton")}),i.jsx(ne,{title:e("browserActions.consent.cancelButton"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",onClick:()=>a(!1),children:e("browserActions.consent.cancelButton")})]})]})})}function l0(e){const{icon:t,title:n,description:s}=e;return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{children:t}),i.jsxs("div",{className:"flex flex-col text-sm",children:[i.jsx("span",{className:"text-sm-strong",children:n}),s]})]})}const rM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M18.2493 6.99982C18.2493 7.69017 17.6896 8.24982 16.9993 8.24982C16.3089 8.24982 15.7493 7.69017 15.7493 6.99982C15.7493 6.30946 16.3089 5.74982 16.9993 5.74982C17.6896 5.74982 18.2493 6.30946 18.2493 6.99982ZM15.4992 2.0498C11.885 2.0498 8.94922 4.98559 8.94922 8.5998C8.94922 8.98701 8.99939 9.36017 9.05968 9.70382C9.07749 9.80529 9.04493 9.89344 8.99046 9.94791L2.75467 16.1837C2.23895 16.6994 1.94922 17.3989 1.94922 18.1282V20.2998C1.94922 21.2663 2.73272 22.0498 3.69922 22.0498H6.19922C7.16572 22.0498 7.94922 21.2663 7.94922 20.2998V19.0498H9.69922C10.3896 19.0498 10.9492 18.4902 10.9492 17.7998V16.0498H12.6992C13.3741 16.0498 13.9241 15.515 13.9484 14.846C14.4451 14.9738 14.9689 15.0498 15.4992 15.0498C19.1134 15.0498 22.0492 12.114 22.0492 8.4998C22.0492 4.86866 19.0963 2.0498 15.4992 2.0498ZM10.4492 8.5998C10.4492 5.81402 12.7134 3.5498 15.4992 3.5498C18.3021 3.5498 20.5492 5.73095 20.5492 8.4998C20.5492 11.2856 18.285 13.5498 15.4992 13.5498C14.8199 13.5498 14.1206 13.3787 13.4947 13.1104C13.2629 13.0111 12.9968 13.0349 12.7864 13.1737C12.5759 13.3125 12.4492 13.5477 12.4492 13.7998V14.5498H10.6992C10.0089 14.5498 9.44922 15.1094 9.44922 15.7998V17.5498H7.69922C7.00886 17.5498 6.44922 18.1094 6.44922 18.7998V20.2998C6.44922 20.4379 6.33729 20.5498 6.19922 20.5498H3.69922C3.56115 20.5498 3.44922 20.4379 3.44922 20.2998V18.1282C3.44922 17.7967 3.58091 17.4788 3.81534 17.2443L10.0511 11.0086C10.4695 10.5902 10.6349 10.0018 10.5371 9.44461C10.4834 9.13865 10.4492 8.8622 10.4492 8.5998Z"})),CAe=Object.freeze(Object.defineProperty({__proto__:null,default:rM},Symbol.toStringTag,{value:"Module"})),u0="size-5";function d0(e){const{icon:t,title:n,description:s}=e;return i.jsxs("div",{className:"flex gap-4 px-4 py-3",children:[i.jsx("div",{children:t}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h3",{className:"text-sm-strong",children:n}),i.jsx("span",{className:"text-foreground-600 text-sm",children:s})]})]})}function M0e(){const{t:e}=q();return i.jsxs("div",{className:"flex flex-col gap-6",children:[i.jsx("p",{className:"mt-1 text-base",children:e("actions.consent.step1.description")}),i.jsxs("div",{className:"rounded-3xl bg-black/5 py-2",children:[i.jsx(d0,{icon:i.jsx(rM,{className:u0}),title:e("actions.consent.step1.inControlSectionTitle"),description:e("actions.consent.step1.inControlSectionDescription")}),i.jsx(ms,{color:"accent",horizontalMargin:!1,verticalMargin:!1}),i.jsx(d0,{icon:i.jsx(O3,{className:u0}),title:e("actions.consent.step1.alertsSectionTitle"),description:e("actions.consent.step1.alertsSectionDescription")}),i.jsx(ms,{color:"accent",horizontalMargin:!1,verticalMargin:!1}),i.jsx(d0,{icon:i.jsx(D3,{className:u0}),title:e("actions.consent.step1.yourPrivacySectionTitle"),description:e("actions.consent.step1.yourPrivacySectionDescription")})]})]})}function N0e(){const e=Qt(),t=M(Rw),n=M(nC),s=M(_1),o=M(Sa),r=M(ZY),a=!!M(YY),l=!!M(QY),u=!!(Rp({key:"shouldShowTextModelTrainingSettings",default:!0})&&a),d=!!(Rp({key:"shouldShowVoiceModelTrainingSettings",default:!0})&&l),m=W("view-settings-disclaimer"),f=u||d,h=!f||t&&!n,g=cT(),[C,v]=Ue(Bw),[y,b]=c.useState(!1);c.useEffect(()=>{if((f||r)&&e&&!o){if(C){b(!0),v(!1);return}if(g<a2){b(!0);return}let I;try{I=lie()}catch{I=new Date}const _=dA(I,6),T=new Date;T>_&&(b(!0),An(nl,T.toISOString()))}},[e,f,o,g,r,C,v]);const E=()=>h===void 0||s===void 0||r===void 0?null:o||!e?"chat.unauthenticatedDisclaimer":!r||!y?"chat.firstTurnDisclaimerBase":!h&&!s?m?"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":"chat.firstTurnDisclaimerPersonalizationTraining":h&&!s?m?"chat.firstTurnPersonalizationDisclaimerViewSettings":"chat.firstTurnPersonalizationDisclaimer":s&&!h?m?"chat.firstTurnTrainingDisclaimerViewSettings":"chat.firstTurnTrainingDisclaimer":"chat.firstTurnDisclaimerBase";return(()=>{var _,T,A;let I=E();return I?(_=re.instance().config().uiOverrides)!=null&&_.hideTrainingDisclaimer?"chat.firstTurnDisclaimerBase":(I=((A=(T=re.instance().config()).textOverrides)==null?void 0:A.call(T,I))??I,I):null})()}const H3="text-foreground-450 text-sm dark:text-foreground-600",R0e="underline",n9={settingsLink:i.jsx(Ol,{pages:["menu","account","privacy"],className:F(H3,R0e),clickSource:"disclaimerSettingsLink"}),learnMoreLink:i.jsx(ml,{link:kp})},ff={termsLink:i.jsx(ml,{link:ul}),privacyLink:i.jsx(ml,{link:Jn})},P0e={settingsLink:i.jsx(Ol,{pages:["menu","account","privacy"],className:H3,disableLink:!0})};function s5(e){const{forceVisible:t,disableDisclaimerSettingsLink:n,className:s,testId:o,shouldUpdateNewConversationCount:r}=e,a=N0e(),l=M(hn),u=l==null?void 0:l.id,m=((l==null?void 0:l.isNew)??t)&&a;if(c.useEffect(()=>{!r||!m||!u||mie(u)},[r,m,u]),!m)return null;const f=h=>{switch(h){case"chat.unauthenticatedDisclaimer":return i.jsxs(i.Fragment,{children:[i.jsx(mn,{i18nKey:"chat.firstTurnDisclaimerBase"})," ",i.jsx(mn,{i18nKey:h,components:{termsLink:ff.termsLink,privacyLink:ff.privacyLink}})]});case"chat.firstTurnTrainingDisclaimer":case"chat.firstTurnPersonalizationDisclaimer":case"chat.firstTurnDisclaimerPersonalizationTraining":case"chat.firstTurnTrainingDisclaimerViewSettings":case"chat.firstTurnPersonalizationDisclaimerViewSettings":case"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":return i.jsxs(i.Fragment,{children:[i.jsx(mn,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",i.jsx(mn,{i18nKey:h,components:{settingsLink:n?P0e.settingsLink:n9.settingsLink}})]});case"chat.edge.firstTurnPersonalizationDisclaimer":case"chat.edge.firstTurnPersonalizationSettingsDisclaimer":return i.jsxs(i.Fragment,{children:[i.jsx(mn,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",i.jsx(mn,{i18nKey:h,components:{learnMoreLink:n9.learnMoreLink,bold:i.jsx("strong",{})}})]});case"chat.firstTurnDisclaimerBase":case"chat.firstTurnPersonalizationDisclaimerBase":case"chat.tv.firstTurnDisclaimer":return i.jsx(mn,{i18nKey:h});case"chat.livingPortraitDisclaimer":return i.jsx(mn,{i18nKey:h,components:{termsLink:ff.termsLink,privacyLink:ff.privacyLink}});default:return null}};return i.jsx(ln,{id:a,mode:"wait",className:F("space-y-8 pb-8",H3,s),"data-testid":o,children:f(a)})}function ml(e){const{children:t,link:n,className:s}=e;return i.jsx(ls,{className:F("underline",s),href:n,title:"",children:t})}const m0="underline text-accent-450";function L0e(e){const{onDismiss:t}=e,{t:n}=q();return i.jsxs("div",{className:"flex flex-col gap-5 text-foreground-700 text-base",children:[i.jsx("p",{children:n("actions.consent.step2.description1")}),i.jsx("p",{children:n("actions.consent.step2.description2")}),i.jsx("p",{children:i.jsx(mn,{i18nKey:"actions.consent.step2.description3",components:{SettingsLink:i.jsx(Ol,{pages:["menu","account","privacy"],className:m0,clickSource:"browserActionsConsentSettingsLink",onClick:t,pushPagesDelay:100}),FAQLink:i.jsx(ml,{className:m0,link:Kee}),PrivacyLink:i.jsx(ml,{className:m0,link:Jn})}})})]})}function O0e(e){const{stepIndex:t,stepIndexText:n,stepHeaderText:s}=e;return i.jsxs("div",{className:"mb-5 flex flex-col",children:[i.jsxs("div",{className:"flex gap-1 px-4",children:[i.jsx("div",{className:"h-1 flex-1 rounded-sm bg-foreground-800"}),i.jsx("div",{className:F("h-1 flex-1 rounded-sm",t===2?"bg-foreground-800":"bg-black/15")})]}),i.jsx("div",{className:"pb-5 pt-2 text-center text-foreground-450 text-base",children:n}),i.jsx("h2",{className:"text-center text-foreground-850 text-2xl",children:s})]})}const D0e=2;function j0e(){const{t:e}=q(),[t,n]=Ue(A0e),s=se(Ow),o=M(je),[r,a]=c.useState(1),l=c.useCallback(()=>{if(t){const{messageId:h,partId:g}=t;jn.updateCardMessageCommand({messageId:h,partId:g}),o&&jee(o,h,g,C=>{C.type==="card"&&C.card.type==="consent"&&(C.card.status="rejected")})}a(1),n(null)},[t,o,n]);hs(h=>{h.key==="Escape"&&(h.stopPropagation(),l())});const u=c.useCallback(async h=>{await BC({allowComputerUseActions:h}),jn.regenerateMessage({messageId:(t==null?void 0:t.messageId)??"",mode:"retry",allowedConsents:[vs.ComputerUseActions]}),s(h),n(null)},[t==null?void 0:t.messageId,s,n]),d={1:{title:e("actions.consent.step1.title"),content:i.jsx(M0e,{}),primaryButton:{text:e("common.nextText"),color:"strong",action:()=>a(2)},secondaryButton:{text:e("common.cancel"),color:"subtle-dimmed",action:()=>u(!1)}},2:{title:e("actions.consent.step2.title"),content:i.jsx(L0e,{onDismiss:l}),primaryButton:{text:e("actions.consent.agreeButton"),color:"default",action:()=>u(!0)},secondaryButton:{text:e("actions.consent.disagreeButton"),color:"default",action:()=>u(!1)}}},m=e("actions.consent.stepIndexHeader",{index:r,total:D0e}),f=d[r];return i.jsxs(dn,{isOpen:t!==null,className:"max-h-[80vh] max-w-[448px] overflow-y-auto",dialogName:e("actions.consent.step1.title"),customScrollBar:!0,children:[i.jsx(O0e,{stepIndex:r,stepIndexText:m,stepHeaderText:f.title}),f.content,i.jsxs("div",{className:"mt-5 flex flex-col gap-2",children:[i.jsx(ne,{title:f.primaryButton.text,color:f.primaryButton.color,size:"56-xl",variant:"rect",className:"w-full",onClick:f.primaryButton.action,children:f.primaryButton.text}),i.jsx(ne,{title:f.secondaryButton.text,color:f.secondaryButton.color,size:"56-xl",variant:"rect",className:"w-full",onClick:f.secondaryButton.action,children:f.secondaryButton.text})]})]})}const gh=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M10.25 3.00011C10.6642 3.00011 10.9999 3.33596 11 3.75011C11 4.16432 10.6642 4.50011 10.25 4.50011H6.75C5.50741 4.50011 4.50008 5.50753 4.5 6.75011V17.2501L4.51172 17.4806C4.62714 18.6149 5.58517 19.5001 6.75 19.5001H17.25C18.4926 19.5001 19.5 18.4927 19.5 17.2501V15.2501C19.5001 14.836 19.8358 14.5001 20.25 14.5001C20.6642 14.5001 20.9999 14.836 21 15.2501V17.2501C21 19.3212 19.3211 21.0001 17.25 21.0001H6.75C4.74378 21.0001 3.10551 19.4247 3.00488 17.4435L3 17.2501V6.75011C3.00008 4.6791 4.67898 3.00011 6.75 3.00011H10.25ZM14.9365 2.06847C15.2026 1.94614 15.5159 1.99023 15.7383 2.18077L22.7383 8.18077C22.8986 8.31823 22.9938 8.51756 23 8.72862C23.006 8.9396 22.9224 9.14361 22.7705 9.29015L15.7705 16.0401C15.554 16.2488 15.2338 16.308 14.957 16.1905C14.6802 16.0729 14.5 15.801 14.5 15.5001V12.5245C13.4857 12.5881 12.5295 12.7973 11.5605 13.2931C10.4241 13.8745 9.21642 14.8746 7.87109 16.5958L7.59961 16.9503C7.40588 17.2083 7.06883 17.3141 6.7627 17.212C6.45646 17.1099 6.25 16.8229 6.25 16.5001C6.25002 13.6428 6.93659 10.911 8.41797 8.87218C9.7938 6.97888 11.8288 5.72554 14.5 5.52843V2.75011L14.5078 2.64171C14.5441 2.39296 14.7037 2.17553 14.9365 2.06847ZM16 6.25011C16 6.66432 15.6642 7.00011 15.25 7.00011C12.6933 7.00011 10.855 8.07008 9.63184 9.75304C8.75387 10.9612 8.17794 12.5102 7.91504 14.2462C8.91534 13.1988 9.89198 12.4611 10.877 11.9571C12.3601 11.1983 13.801 11.0001 15.25 11.0001C15.4489 11.0001 15.6396 11.0792 15.7803 11.2198C15.9209 11.3605 16 11.5512 16 11.7501V13.7345L21.1348 8.78233L16 4.37999V6.25011Z"})),yAe=Object.freeze(Object.defineProperty({__proto__:null,default:gh},Symbol.toStringTag,{value:"Module"})),z3=R(null),aM=R(e=>!!e(z3));function va(e){const t=Ft(e);return t.setHours(0,0,0,0),t}function s9(e){const t=Ft(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function zc(e,t){const n=va(e),s=va(t),o=+n-s9(n),r=+s-s9(s);return Math.round((o-r)/Hae)}function vh(e,t){const n=va(e),s=va(t);return+n==+s}function bAe(e){const t={"one-drive":[],"google-drive":[],"outlook-calendar":[],"google-calendar":[],"google-contacts":[],gmail:[],outlook:[],"edge-browser":[],windows:[]};for(const n of e)n.source==="outlook-calendar"?t.outlook.push(n):t[n.source].push(n);return Object.entries(t).filter(([,n])=>n.length>0)}function U0e(e,t){if(e.length===0)return[];const n=e.map(()=>[]);let s=0;for(;s<t;){let o=0;for(let r=0;r<e.length&&s<t;r+=1){const a=e[r],l=n[r];if(a&&l){const u=l.length;if(u<a.length){const d=a[u];d!==void 0&&(l.push(d),s+=1,o+=1)}}}if(o===0)break}return n}function xAe(e,t){if(e.length===0)return[];const n=e.map(([,o])=>o),s=U0e(n,t);return e.map(([o],r)=>[o,s[r]??[]])}function iM(e,t){const n=`/attachments/onedrive/${e}/thumbnail`;return t?`${n}?type=large`:n}function F0e(e,t){const n=Yk();if(!vh(new Date(e),new Date(t)))return`${Xn(e,"yyyy-MM-dd, h:mm aa",n)} - ${Xn(t,"yyyy-MM-dd, h:mm aa",n)}`;const o=va(new Date(e)),r=va(new Date),a=zc(o,r);let l="";a===-1?l=z("dates.yesterday"):a===0?l=z("dates.today"):a===1?l=z("dates.tomorrow"):l=Xn(o,"EEEE",n);const u=Xn(e,"h:mm a",n),d=Xn(t,"h:mm a",n);return`${l}, ${u} - ${d}`}function f0(e){const t=Yk(),n=va(new Date(e)),s=va(new Date),o=zc(n,s),r=Xn(e,"h:mm aa",t);return o===-1?`${z("dates.yesterdayInLowercase")}, ${r}`:o===0?`${z("dates.todayInLowercase")}, ${r}`:Xn(e,"yyyy-MM-dd, h:mm aa",t)}function cM(){const e=c.useId(),{t}=q(),n=se(Sn),{openMediaViewer:s}=ka(),o=M(aM),r=se(z3);return(a,l)=>{const u=a.type==="image"&&a.source==="one-drive";switch(l){case"open":return{id:`${e}-open`,type:"open",label:t("common.open"),icon:L3,deferUntilAfterClose:u,source:a.source,artifactType:a.type,hidden:(a.type==="document"||a.type==="image"||a.type==="event"||a.type==="contact"||a.type==="webPage")&&!a.url,sectionName:"body",onClick:()=>{u?(o&&r(null),s({currentMediaIndex:0,media:[{type:"image",url:iM(a.id,!0),altText:a.fileName}]})):a.url&&(a.type==="document"||a.type==="image"||a.type==="event"||a.type==="email"||a.type==="webPage")&&Eo(a.url)}};case"download":return{id:`${e}-download`,type:"download",label:t("common.download"),icon:pd,source:a.source,artifactType:a.type,sectionName:"body",onClick:()=>{}};case"share":return{id:`${e}-share`,type:"share",label:t("common.share"),icon:gh,source:a.source,artifactType:a.type,sectionName:"body",onClick:()=>{}};case"copy":return{id:`${e}-copy`,type:"copy",label:t("connector.search.copyLinkButton"),icon:dh,hidden:!a.url,source:a.source,artifactType:a.type,sectionName:"copy",onClick:async()=>{a.url&&(a.type==="image"||a.type==="document"||a.type==="event"||a.type==="email"||a.type==="webPage")&&(await Dp({url:a.url}),n({title:t("connector.search.copyFileLinkSuccessToast"),dismissAfter:3e3}))}};default:throw new Error(`Unhandled action type: ${l}`)}}}const B0e=["open","download","share","copy"];function V0e(e){const{artifact:t,enabledActions:n=B0e}=e,s=cM();return n.map(o=>s(t,o))}function G3(e){const t=pe(je);D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_cardType:e.CardType,eventInfo_sectionName:e.sectionName,eventInfo_clickSource:e.source??"",eventInfo_clickScenario:e.scenario??"",eventInfo_conversationId:t,eventInfo_customData:e.customData,eventInfo_messageId:e.messageId??""}})}function SAe(e){const t=pe(je);D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:e.page,eventInfo_impressionElement:e.element,eventInfo_impressionScenario:e.scenario??"",eventInfo_cardType:e.cardType,eventInfo_conversationId:t,eventInfo_customData:e.customData}})}function H0e(e){const{artifact:t,portalContainerRef:n,messageId:s}=e,{t:o}=q(),a=V0e({artifact:t,enabledActions:["open","copy"]}).filter(l=>!l.hidden);return a.length===0?null:i.jsx(wm,{portalContainerRef:n,renderTrigger:({openPopover:l,isOpen:u})=>{const d=o("connector.search.seeMoreDropdownState",{state:o(u?"actions.screenReaderFriendlyStatus.expanded":"actions.screenReaderFriendlyStatus.collapsed")});return i.jsx(ne,{variant:"square",color:u?"overlay-dimmed":"subtle-dimmed",size:"36-sm",title:d,onClick:l,"aria-label":d,children:i.jsx(Em,{className:"size-5"})})},renderSurface:({closePopover:l})=>i.jsx("div",{className:"flex flex-col",children:a.map(u=>i.jsxs(ne,{title:u.label,variant:"rect",color:"subtle-dimmed-inverted",onClick:d=>{l(d),G3({CardType:"personalArtifactsCard",sectionName:u.sectionName,source:u.source,scenario:u.artifactType,messageId:s}),setTimeout(()=>{u.onClick()},0)},size:"36-sm",alignment:"start",className:"min-w-36 gap-2",role:"menuitem",children:[i.jsx(u.icon,{className:"size-4"}),i.jsx("span",{className:"truncate",children:u.label})]},u.id))}),containerClassNames:{surface:"p-1.5",trigger:"py-0.5"},placement:"bottom-start",floatingOffset:{mainAxis:2}})}const lM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M17.75 3C19.5449 3 21 4.45507 21 6.25V17.75C21 19.5449 19.5449 21 17.75 21H6.25C4.45507 21 3 19.5449 3 17.75V6.25C3 4.45507 4.45507 3 6.25 3H17.75ZM19.5 8.5H4.5V17.75C4.5 18.7165 5.2835 19.5 6.25 19.5H17.75C18.7165 19.5 19.5 18.7165 19.5 17.75V8.5ZM7.75 14.5C8.44036 14.5 9 15.0596 9 15.75C9 16.4404 8.44036 17 7.75 17C7.05964 17 6.5 16.4404 6.5 15.75C6.5 15.0596 7.05964 14.5 7.75 14.5ZM12 14.5C12.6904 14.5 13.25 15.0596 13.25 15.75C13.25 16.4404 12.6904 17 12 17C11.3096 17 10.75 16.4404 10.75 15.75C10.75 15.0596 11.3096 14.5 12 14.5ZM7.75 10.5C8.44036 10.5 9 11.0596 9 11.75C9 12.4404 8.44036 13 7.75 13C7.05964 13 6.5 12.4404 6.5 11.75C6.5 11.0596 7.05964 10.5 7.75 10.5ZM12 10.5C12.6904 10.5 13.25 11.0596 13.25 11.75C13.25 12.4404 12.6904 13 12 13C11.3096 13 10.75 12.4404 10.75 11.75C10.75 11.0596 11.3096 10.5 12 10.5ZM16.25 10.5C16.9404 10.5 17.5 11.0596 17.5 11.75C17.5 12.4404 16.9404 13 16.25 13C15.5596 13 15 12.4404 15 11.75C15 11.0596 15.5596 10.5 16.25 10.5ZM17.75 4.5H6.25C5.2835 4.5 4.5 5.2835 4.5 6.25V7H19.5V6.25C19.5 5.2835 18.7165 4.5 17.75 4.5Z"})),EAe=Object.freeze(Object.defineProperty({__proto__:null,default:lM},Symbol.toStringTag,{value:"Module"})),Ch=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M17.75 3C19.5449 3 21 4.45507 21 6.25V17.75C21 19.5449 19.5449 21 17.75 21H6.25C4.45507 21 3 19.5449 3 17.75V6.25C3 4.45507 4.45507 3 6.25 3H17.75ZM18.3305 19.4014L12.5247 13.7148C12.2596 13.4553 11.8501 13.4316 11.5588 13.644L11.4752 13.7148L5.66845 19.4011C5.8504 19.4651 6.04613 19.5 6.25 19.5H17.75C17.9535 19.5 18.1489 19.4653 18.3305 19.4014L12.5247 13.7148L18.3305 19.4014ZM17.75 4.5H6.25C5.2835 4.5 4.5 5.2835 4.5 6.25V17.75C4.5 17.9584 4.53643 18.1583 4.60326 18.3437L10.4258 12.643C11.2589 11.8273 12.5675 11.7885 13.4458 12.5266L13.5742 12.6431L19.3964 18.3447C19.4634 18.159 19.5 17.9588 19.5 17.75V6.25C19.5 5.2835 18.7165 4.5 17.75 4.5ZM15.2521 6.5C16.4959 6.5 17.5042 7.50831 17.5042 8.75212C17.5042 9.99592 16.4959 11.0042 15.2521 11.0042C14.0083 11.0042 13 9.99592 13 8.75212C13 7.50831 14.0083 6.5 15.2521 6.5ZM15.2521 8C14.8367 8 14.5 8.33673 14.5 8.75212C14.5 9.1675 14.8367 9.50423 15.2521 9.50423C15.6675 9.50423 16.0042 9.1675 16.0042 8.75212C16.0042 8.33673 15.6675 8 15.2521 8Z"})),wAe=Object.freeze(Object.defineProperty({__proto__:null,default:Ch},Symbol.toStringTag,{value:"Module"}));function z0e(){return i.jsx(O1,{size:"md",className:"h-[176px] max-w-[360px]",children:i.jsx($I,{})})}function uM(e){const t=pe(je);D.trackEvent({name:"system",data:{eventName:"clientImageError",eventInfo_url:e,eventInfo_conversationId:t}})}const o5=R({}),r5=$e();async function G0e(e){const t=r5.get(o5),n=t[e];if(n)return n;try{let s;if(e.includes("?")){const[r=e,a=""]=e.split("?",2),l=new URLSearchParams(a),u={};for(const[d,m]of l.entries())u[d]=m;s=await zn(r,{query:u})}else s=await zn(e);const o=URL.createObjectURL(await s.blob());return r5.set(o5,{...t,[e]:o}),o}catch{uM(e);return}}function W0e(e){const{originalUrl:t,children:n}=e,[s,o]=c.useState(void 0),[r,a]=c.useState(void 0),[l,u]=c.useState(!1);if(c.useEffect(()=>{let C=!1;return u(!1),o(void 0),a(void 0),G0e(t).then(v=>{C||(o(v),a(t))}).catch(()=>{C||u(!0),uM(t)}),()=>{C=!0}},[t]),l)return i.jsx(z0e,{});const m=r!==t?void 0:s,f=t.startsWith("blob:"),h=f?Object.values(r5.get(o5)).includes(t):!1;return!!m&&!(f&&!h)?i.jsx(i.Fragment,{children:n(m)}):null}const pf="flex size-8 items-center justify-center rounded-lg border",hf="size-6 text-foreground-700";function $0e(e){const{artifact:t}=e,{source:n,type:s}=t;switch(s){case"contact":return i.jsx("div",{className:F("size-8 rounded-full",!t.thumbnailUrl&&"bg-caramel-250 text-stone-800"),children:i.jsx(j3,{firstName:t.displayName.trim(),imgSrc:t.thumbnailUrl??void 0,showTwoCharacters:!1})});case"email":return i.jsx("div",{className:F(pf,Ba,kc),children:i.jsx(f3,{className:hf})});case"event":return i.jsx("div",{className:F(pf,Ba,kc),children:i.jsx(lM,{className:hf})});case"document":return i.jsx(S3,{fileType:t.contentType,className:"size-8"});case"image":{const o=t.fileName,r="size-9 rounded-sm",a="size-8 rounded-lg border text-foreground-700";return t.thumbnailUrl?i.jsx(Pu,{className:r,errorClass:F(a,Ba),src:t.thumbnailUrl,alt:o,loading:"lazy"}):n==="one-drive"&&t.id?i.jsx(W0e,{originalUrl:iM(t.id),children:l=>i.jsx(Pu,{className:r,errorClass:F(a,Ba),src:l,alt:o,loading:"lazy"})}):i.jsx("div",{className:F(pf,Ba,kc),children:i.jsx(Ch,{className:hf})})}case"webPage":return t.iconUrl?i.jsx(Pu,{errorClass:F("size-8 rounded-lg border text-foreground-700",Ba),src:t.iconUrl,alt:t.title,loading:"lazy"}):i.jsx("div",{className:F(pf,Ba,kc),children:i.jsx(Im,{className:hf})});default:return null}}function q0e(e,t,n={}){const s=new Date(e);return new Intl.DateTimeFormat(t,n).format(s)}const K0e="flex h-full w-[80px] flex-col items-center justify-center rounded-[16px] bg-background-200",Z0e="font-semibold text-2xl",Y0e="text-[17px] font-medium uppercase";function Q0e(e){const{startsAt:t,containerClassName:n,dayClassName:s,monthClassName:o}=e,r=Qk(),a=q0e(t,r,{month:"short"}),l=new Date(t).getDate().toString().padStart(2,"0");return i.jsxs("div",{className:n??K0e,children:[i.jsx("span",{className:s??Z0e,children:l}),i.jsx("span",{className:o??Y0e,children:a})]})}function dM(e){const{artifact:t,showActions:n,portalContainerRef:s,className:o,messageId:r}=e,{t:a}=q(),l=cM(),{hidden:u,onClick:d,sectionName:m,source:f,artifactType:h}=l(t,"open"),g=c.useMemo(()=>{switch(t.type){case"image":case"document":return t.fileName;case"event":case"email":return t.subject??a("connector.eventWithoutSubjectTitle");case"contact":return t.displayName;case"webPage":return t.title;default:return""}},[t,a]),C=c.useMemo(()=>{var v;switch(t.type){case"image":case"document":return t.modifiedAt?a("connector.lastModifiedAt",{datetime:f0(t.modifiedAt)}):"";case"event":return F0e(t.startsAt,t.endsAt);case"email":return t.receivedAt?a("connector.receivedAt",{datetime:f0(t.receivedAt)}):"";case"contact":return((v=t.emailAddresses)==null?void 0:v.map(y=>y.trim()).filter(y=>y.length>0).join("  "))??"";case"webPage":return t.visitedAt?`${es(t.url)}  ${f0(t.visitedAt)}`:"";default:return""}},[t,a]);return i.jsxs("div",{className:F("flex gap-1 py-1.5 pe-2 ps-2.5",o),children:[i.jsxs("button",{type:"button",className:"flex min-w-0 flex-1 items-center gap-2",onClick:()=>{u||(G3({CardType:"personalArtifactsCard",sectionName:m,source:f,scenario:h,messageId:r}),d())},children:[t.type==="event"?i.jsx(Q0e,{startsAt:t.startsAt,containerClassName:"flex w-[32px] h-[38px] flex-col items-center justify-around rounded-[8px] py-[4px] bg-background-200",dayClassName:"font-medium text-[14px] leading-none",monthClassName:"text-[9px] font-[450] uppercase leading-none"}):i.jsx("div",{className:"flex size-9 items-center justify-center",children:i.jsx($0e,{artifact:t})}),i.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-0 px-0.5",children:[i.jsx("p",{className:"truncate text-start text-foreground-900 text-sm",children:g}),C&&i.jsx("p",{className:"truncate py-0.5 text-start text-foreground-600 text-xs",children:C})]})]}),t.type==="event"&&t.calendarName&&i.jsx("div",{className:"flex items-center",children:i.jsx("span",{className:"flex h-4 items-center rounded border border-stone-250 px-1 text-[10px] text-foreground-600",children:t.calendarName})}),n&&i.jsx(H0e,{artifact:t,portalContainerRef:s,messageId:r})]})}function J0e(e){const{t}=q();switch(e){case"one-drive":return{source:e,title:t("oneDrive.title"),websiteLink:"https://onedrive.com",IconComponent:ph};case"google-drive":return{source:e,title:t("connector.googleDrive.title"),websiteLink:"https://drive.google.com",IconComponent:N3};case"outlook-calendar":case"outlook":return{source:e,title:t("outlook.title"),websiteLink:"https://outlook.com",IconComponent:Vk};case"google-calendar":return{source:e,title:t("connector.googleCalendar.title"),websiteLink:"https://calendar.google.com",IconComponent:M3};case"gmail":return{source:e,title:t("connector.googleMail.title"),websiteLink:"https://mail.google.com",IconComponent:R3};case"google-contacts":return{source:e,title:t("connector.googleContacts.title"),websiteLink:"https://contacts.google.com",IconComponent:gm};case"edge-browser":return{source:e,title:t("connector.edgeBrowser.title"),websiteLink:null,IconComponent:Bk};default:return null}}const mM=e=>c.createElement("svg",{viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2.49999 1C1.67157 1 0.999995 1.67157 0.999995 2.5V9.5C0.999995 10.3284 1.67157 11 2.49999 11H9.49996C10.3284 11 10.9999 10.3284 10.9999 9.5V7.26923C10.9999 6.99309 11.2238 6.76923 11.4999 6.76923C11.7761 6.76923 11.9999 6.99309 11.9999 7.26923V9.5C11.9999 10.8807 10.8807 12 9.49996 12H2.49999C1.11928 12 0 10.8807 0 9.5V2.5C0 1.11929 1.11928 0 2.49999 0H4.73075C5.00689 0 5.23074 0.223858 5.23074 0.5C5.23074 0.776142 5.00689 1 4.73075 1H2.49999ZM6.76926 0.5C6.76926 0.223858 6.99311 0 7.26925 0H11.5C11.7761 0 12 0.223858 12 0.5V4.73077C12 5.00691 11.7761 5.23077 11.5 5.23077C11.2239 5.23077 11 5.00691 11 4.73077V1.70711L7.6228 5.08433C7.42754 5.27959 7.11096 5.27959 6.9157 5.08433C6.72044 4.88906 6.72044 4.57248 6.9157 4.37722L10.2929 1H7.26925C6.99311 1 6.76926 0.776142 6.76926 0.5Z"})),IAe=Object.freeze(Object.defineProperty({__proto__:null,default:mM},Symbol.toStringTag,{value:"Module"})),X0e="flex items-center gap-2 text-foreground-750 text-xs-medium",e2e="size-4";function fM(e){const{source:t,messageId:n,iconClass:s,sourceTitle:o,wrapperClass:r}=e,a=J0e(t);if(!a)return null;const{websiteLink:l,title:u,IconComponent:d}=a;return i.jsxs("div",{className:F(r,"flex w-full items-center justify-between"),children:[i.jsxs("div",{className:X0e,children:[i.jsx(d,{className:s??e2e}),o??u]}),l&&i.jsx(ls,{href:l,title:z("common.open"),className:"text-[12px] font-normal",onClick:()=>{G3({CardType:"personalArtifactsCard",sectionName:"header",source:t,messageId:n})},children:i.jsxs("div",{className:"flex flex-row items-center gap-1",children:[i.jsx("span",{children:z("common.open")}),i.jsx(mM,{className:"size-3"})]})})]})}function t2e({messageId:e}){var f,h;const t=M(aM),n=c.useId(),[s,o]=Ue(z3),r=c.useRef(null),{t:a}=q(),l=((f=re.instance().config().composer)==null?void 0:f.largeScreen)===!0&&((h=re.instance().config().composer)==null?void 0:h.voiceOnly)===!0,u=()=>{o(null)},{focusable:d}=Aa({isFocusBoundary:!0});if(hs(g=>{k3(g)&&(g.stopPropagation(),u())}),!s)return null;const m=s;return i.jsx(dn,{isOpen:t,onClose:l?void 0:u,headerText:a("connector.search.title",{resultsCount:m.reduce((g,[,C])=>g+C.length,0)}),headerTextClassName:"ps-4",className:F(l?"max-h-[40vh]":"max-h-[80vh]",l?"w-[480px]":"w-[440px]","mx-4 px-0"),children:i.jsx(Y1.Provider,{value:d.focusKey??"",children:i.jsx("div",{className:F("flex flex-col gap-2 overflow-y-auto px-4",l?"no-scrollbar":"t-custom-scrollbar"),ref:r,children:m.map(([g,C],v)=>{const y=`${n}-source-${v}`;return i.jsxs("section",{className:"mb-4","aria-labelledby":y,children:[i.jsx("div",{id:y,className:"mb-4 font-semibold text-foreground-600 text-sm",children:i.jsx(fM,{source:g,messageId:e})}),i.jsx("ul",{"aria-labelledby":y,role:"list",className:"m-0 flex list-none flex-col gap-3 p-0",children:C.map(b=>i.jsx("li",{children:i.jsx(dM,{artifact:b,portalContainerRef:r,showActions:!0,className:"rounded-xl border border-black/10 dark:border-white/10",messageId:e})},b.id))})]},`${g}-${v}`)})})})})}const n2e=c.lazy(()=>B(()=>import("./subscription-promo-strategy-modal-Bi0Qztbt.js"),__vite__mapDeps([363,1,364,365,366,367,368,353,317,318,319,308,369])).then(e=>({default:e.SubscriptionPromoStrategyModal})));function s2e(e){const{config:{upsellEntryStyle:t,payflowInstanceId:n,upgradeToPremium:s}}=e;return i.jsx(c.Suspense,{fallback:null,children:i.jsx(n2e,{upsellEntryStyle:t,payflowInstanceId:n,upgradeToPremium:s})})}function o2e(){const e=jT(),t=w0e(),n=M(qr),s=M(aw),[o,r]=Ue(y1),a=M(b1),l=re.instance().config().entraRedirectModalBehaviour!=="skip",u=W("ds-new-progress"),[d,m]=Ue(Yv),f=M(BZ),[h,g]=Ue(dw),[C,v]=Ue(zk),y=I0e(),b=_0e(),E=M(Qv),S=M(P3),I=W("search-personal-data");return i.jsxs(i.Fragment,{children:[n&&i.jsx(uA,{accountActionRequired:n}),e&&o&&i.jsx(Bo,{isOpen:!0,trapFocus:!0,children:i.jsx(Zhe,{interceptedLink:o,onClose:()=>{r(void 0)}})}),i.jsx(b0e,{}),s&&i.jsx(Uhe,{}),a&&i.jsx(E0e,{}),i.jsxs(A7,{children:[l&&i.jsx(qhe,{}),i.jsx(Ohe,{}),i.jsx(k0e,{})]}),i.jsx(Jre,{}),i.jsx(j0e,{}),t&&i.jsx(The,{}),u&&i.jsxs(i.Fragment,{children:[i.jsx(uge,{}),i.jsx(Xhe,{})]}),d&&i.jsx(Qhe,{config:d,onClose:()=>m(null)}),f&&i.jsx(s2e,{config:f}),h&&i.jsx(Jhe,{config:h,onClose:()=>g(null)}),C!==null&&i.jsx(Yhe,{options:C,onClose:()=>v(null)}),y&&i.jsx(Nge,{}),b&&i.jsx(Jge,{}),E&&E.visible&&i.jsx(Ghe,{}),S&&i.jsx(Whe,{data:S}),I&&i.jsx(t2e,{})]})}const r2e=e=>c.createElement("svg",{width:96,height:93,viewBox:"0 0 96 93",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("mask",{id:"mask0_140_39981",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93},c.createElement("mask",{id:"path-1-outside-1_140_39981",maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93,fill:"black"},c.createElement("rect",{fill:"white",width:96,height:93}),c.createElement("path",{d:"M4 46.5C4 23.0279 23.0279 4 46.5 4H49.5C72.9721 4 92 23.0279 92 46.5V46.5C92 69.9721 72.9721 89 49.5 89H46.5C23.0279 89 4 69.9721 4 46.5V46.5Z"})),c.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",fill:"url(#paint0_linear_140_39981)",fillOpacity:.8,mask:"url(#path-1-outside-1_140_39981)"}),c.createElement("g",{clipPath:"url(#paint1_angular_140_39981_clip_path)","data-figma-skip-parse":"true",mask:"url(#path-1-outside-1_140_39981)"},c.createElement("g",{transform:"matrix(0 -0.0425 0.0556447 0 48 46.5)"},c.createElement("foreignObject",{x:-1094.12,y:-1094.12,width:2188.24,height:2188.24},c.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(214, 147, 237, 1) 0deg,rgba(250, 176, 198, 1) 60.2401deg,rgba(244, 185, 234, 1) 85.1532deg,rgba(141, 152, 255, 1) 126.663deg,rgba(170, 110, 238, 1) 209.329deg,rgba(255, 103, 119, 1) 250.911deg,rgba(255, 186, 113, 1) 291.415deg,rgba(198, 134, 255, 1) 332.659deg,rgba(214, 147, 237, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),c.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),c.createElement("g",{mask:"url(#mask0_140_39981)"},c.createElement("g",{clipPath:"url(#paint2_angular_140_39981_clip_path)","data-figma-skip-parse":"true"},c.createElement("g",{transform:"matrix(0 -0.071 0.0897903 0 48 47.0001)"},c.createElement("foreignObject",{x:-1014.09,y:-1014.09,width:2028.17,height:2028.17},c.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(0, 0, 0, 1) 0deg,rgba(255, 255, 255, 1) 52.2deg,rgba(197, 197, 197, 1) 122.4deg,rgba(0, 0, 0, 1) 147.6deg,rgba(255, 255, 255, 1) 171deg,rgba(174, 174, 174, 1) 235.8deg,rgba(0, 0, 0, 1) 250.911deg,rgba(217, 238, 247, 1) 266.4deg,rgba(255, 255, 255, 1) 332.659deg,rgba(0, 0, 0, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),c.createElement("rect",{x:-23,y:-24,width:142,height:142})),c.createElement("defs",null,c.createElement("clipPath",{id:"paint1_angular_140_39981_clip_path"},c.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),c.createElement("clipPath",{id:"paint2_angular_140_39981_clip_path"},c.createElement("rect",{x:-23,y:-24,width:142,height:142})),c.createElement("linearGradient",{id:"paint0_linear_140_39981",x1:4,y1:89,x2:101.93,y2:75.3765,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#FFAB4E"}),c.createElement("stop",{offset:1,stopColor:"#FF7791"})))),pM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M20.2899 16.4358C20.6074 15.5282 20.78 14.5526 20.78 13.5366V9.5241C20.78 9.10859 20.4432 8.77175 20.0277 8.77175C19.6122 8.77175 19.2753 9.10859 19.2753 9.5241V13.5366C19.2753 14.1176 19.2072 14.6827 19.0785 15.2244L20.2899 16.4358Z",fill:"currentColor"}),c.createElement("path",{d:"M15.263 11.1575V6.51431C15.263 4.71377 13.8034 3.25414 12.0028 3.25414C10.7464 3.25414 9.65599 3.96485 9.11167 5.00618L8.01336 3.90787C8.86428 2.60809 10.3333 1.74944 12.0028 1.74944C14.6344 1.74944 16.7677 3.88274 16.7677 6.51431V12.6622L15.263 11.1575Z",fill:"currentColor"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0026 20.8093C7.986 20.8093 4.7299 17.5532 4.7299 13.5366L4.7299 9.5241C4.7299 9.10859 4.39306 8.77175 3.97755 8.77175C3.56204 8.77175 3.2252 9.10859 3.2252 9.5241L3.2252 13.5366C3.2252 18.3843 7.15498 22.314 12.0026 22.314C14.6664 22.314 17.053 21.1274 18.6628 19.2539L21.0006 21.5917C21.2944 21.8855 21.7707 21.8855 22.0645 21.5917C22.3584 21.2979 22.3584 20.8215 22.0645 20.5277L3.00504 1.46823C2.71123 1.17442 2.23487 1.17442 1.94106 1.46823C1.64725 1.76204 1.64725 2.2384 1.94106 2.53221L7.23793 7.82908V13.5362C7.23793 16.1678 9.37124 18.3011 12.0028 18.3011C13.5589 18.3011 14.9407 17.5552 15.8103 16.4015L17.5951 18.1862C16.261 19.7891 14.251 20.8093 12.0026 20.8093ZM8.74263 13.5362C8.74263 15.3368 10.2023 16.7964 12.0028 16.7964C13.1441 16.7964 14.1484 16.21 14.7308 15.322L8.74263 9.33378L8.74263 13.5362Z",fill:"currentColor"})),_Ae=Object.freeze(Object.defineProperty({__proto__:null,default:pM},Symbol.toStringTag,{value:"Module"})),jp=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7673 6.54284C16.7673 3.91128 14.634 1.77799 12.0024 1.77799C9.37089 1.77799 7.2376 3.91129 7.2376 6.54284L7.2376 13.5647C7.2376 16.1963 9.37089 18.3296 12.0024 18.3296C14.634 18.3296 16.7673 16.1963 16.7673 13.5647L16.7673 6.54284ZM12.0024 3.28268C13.803 3.28268 15.2626 4.7423 15.2626 6.54284L15.2626 13.5647C15.2626 15.3652 13.803 16.8249 12.0024 16.8249C10.2019 16.8249 8.74229 15.3652 8.74229 13.5647L8.74229 6.54284C8.74229 4.7423 10.2019 3.28268 12.0024 3.28268Z",fill:"currentColor"}),c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0274 8.79987C19.6119 8.79987 19.2751 9.1367 19.2751 9.55221V13.5647C19.2751 17.5813 16.019 20.8374 12.0024 20.8374C7.98587 20.8374 4.72979 17.5813 4.72979 13.5647L4.72979 9.55221C4.72979 9.1367 4.39295 8.79987 3.97744 8.79987C3.56193 8.79987 3.2251 9.1367 3.2251 9.55221L3.2251 13.5647C3.2251 18.4123 7.15485 22.3421 12.0024 22.3421C16.85 22.3421 20.7798 18.4123 20.7798 13.5647V9.55221C20.7798 9.1367 20.443 8.79987 20.0274 8.79987Z",fill:"currentColor"})),TAe=Object.freeze(Object.defineProperty({__proto__:null,default:jp},Symbol.toStringTag,{value:"Module"})),hM=e=>c.createElement("svg",{width:63,height:73,viewBox:"0 0 63 73",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("g",{filter:"url(#filter0_d_3118_29179)"},c.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",fill:"white",fillOpacity:.8,shapeRendering:"crispEdges"}),c.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",stroke:"white",strokeWidth:1.5,shapeRendering:"crispEdges"})),c.createElement("path",{d:"M43.06 50.7014C44.3479 49.7757 44.5485 48.2871 44.5004 46.9375L44.469 46.4069C44.397 45.4896 44.2259 44.4068 44.0083 43.1722L43.7279 41.6191L43.7271 41.6113L43.7263 41.6119L41.2578 28.06L40.7794 25.455C40.3207 22.9993 39.9105 20.9984 39.4527 19.5092L39.3346 19.1407C39.0928 18.4125 38.8119 17.7441 38.4599 17.1874L38.2786 16.9184C37.7807 16.2335 37.0781 15.6722 36.1346 15.5382L35.9428 15.5173C35.0273 15.4462 34.264 15.7987 33.6613 16.3187L33.4134 16.551C32.8862 17.0835 32.4355 17.7951 32.024 18.597L31.8493 18.9462C31.1633 20.3587 30.4435 22.2885 29.6039 24.6656L28.7214 27.1892L28.7014 27.2468C28.4821 27.8767 28.3253 28.323 28.1864 28.662L28.0522 28.9689C27.8919 29.3038 27.7981 29.3776 27.7565 29.4075C27.7254 29.4298 27.6614 29.4719 27.4758 29.5106L27.2465 29.5479C27.0436 29.5728 26.806 29.587 26.5081 29.5964L25.4073 29.6142L25.3455 29.6153C22.0505 29.6503 19.3668 29.6775 17.3562 29.8624L16.5355 29.9519C15.6246 30.0688 14.7765 30.2424 14.0635 30.5367L13.7674 30.6702C13.0061 31.0434 12.328 31.6403 12.0348 32.5515L11.9812 32.738C11.7577 33.624 11.971 34.4332 12.3786 35.1149L12.5645 35.3986C13.059 36.0947 13.7998 36.7301 14.6458 37.3375L15.3198 37.8019C16.9879 38.9103 19.3175 40.1961 22.1748 41.7746L34.238 48.4394L35.6206 49.2003C36.9417 49.9202 38.0776 50.5066 39.0333 50.8666L39.516 51.0344C40.6626 51.3952 41.933 51.5114 43.06 50.7014Z",stroke:"black",strokeWidth:1.5}),c.createElement("defs",null,c.createElement("filter",{id:"filter0_d_3118_29179",x:2.64307,y:6.25732,width:51.1152,height:66.3022,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},c.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),c.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),c.createElement("feMorphology",{radius:2,operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_3118_29179"}),c.createElement("feOffset",{dy:16}),c.createElement("feGaussianBlur",{stdDeviation:4}),c.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),c.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),c.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3118_29179"}),c.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3118_29179",result:"shape"})))),AAe=Object.freeze(Object.defineProperty({__proto__:null,default:hM},Symbol.toStringTag,{value:"Module"}));function a2e(e){const{renderFocusedElement:t,children:n,className:s,options:o={},isOpen:r}=e,{offset:a=1,placement:l="bottom-end",adjustArrowPosition:u=E=>E}=o,d=c.useRef(null),{state:m,setState:f}=m3({controlledValue:r,defaultValue:!1}),{y:h=0}=u({x:0,y:0})??{},{refs:g,context:C,floatingStyles:v,middlewareData:y}=Ml({open:m,placement:l,onOpenChange:f,middleware:[fa(a),pa(),P_({element:d,padding:{right:-38,bottom:h}})],whileElementsMounted:Ta}),b=u(y.arrow);return i.jsxs(i.Fragment,{children:[t==null?void 0:t({ref:g.setReference},m),m&&i.jsx(kl,{children:i.jsx($1,{context:C,modal:!1,children:i.jsxs("div",{ref:g.setFloating,style:v,className:F("flex outline-none",ct.coachmark),children:[i.jsx("div",{className:F("start-0 flex rounded-ee-md rounded-es-3xl rounded-se-3xl rounded-ss-3xl border border-background-200 border-white shadow-sm",s),children:n}),i.jsx("div",{ref:d,style:{position:"absolute",left:b==null?void 0:b.x,top:(b==null?void 0:b.y)??h},className:"pointer-events-none",children:i.jsx(hM,{className:"my-5 size-14"})})]})})})]})}const gf="absolute inset-0 rounded-full",o9="relative size-6 transition-colors",r9=2,i2e=50,c2e=20,gM=.6,l2e=3,u2e=.55,d2e=1,m2e={opacity:0,scale:gM},f2e={opacity:1,scale:1,transition:{...i_,delay:l_}};function p2e(e){const{t}=q(),{status:n,inputVolume:s,isOutputPlaying:o,enableSpinAnimation:r=!0,className:a,coachUserUnmute:l=!1,onClick:u}=e,d=n==="muted",m=n==="disabled",f=n==="active",h=!o&&f,[g,C]=c.useState(!1),v=gt({breakpoint:"sm"});c.useEffect(()=>{let _;return l&&(_=setTimeout(()=>C(!0),600)),()=>clearTimeout(_)},[l]);const y=b7(s,a_),b=el(y,[r9,i2e],[gM,l2e]),E=el(y,[r9,c2e],[u2e,d2e]),{focusable:S,refCallback:I}=Aa({autoRestoreFocus:!0,forceFocus:!0});return i.jsx(a2e,{className:"max-w-72 border-white bg-black/90 p-2 dark:bg-white",isOpen:g,options:{placement:"top-end",offset:v?{mainAxis:27,crossAxis:10}:{mainAxis:15,crossAxis:-55},adjustArrowPosition:_=>v?{x:_!=null&&_.x?_.x-20:void 0,y:12}:_},renderFocusedElement:_=>i.jsxs(i.Fragment,{children:[g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:i.jsx(ln,{duration:.6,exitDelay:4.5,exitDuration:.5,children:i.jsx(ge.div,{animate:{rotate:360},transition:{duration:2.5,repeat:1,ease:"linear"},children:i.jsx(r2e,{className:"size-20"})})})}),i.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:i.jsx(ge.div,{className:"size-[80px] rounded-full border-4 border-solid border-black/80 shadow-sm dark:border-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:4.5,ease:"linear"}})})]}):null,i.jsx(ge.button,{..._,title:t(m?"composer.microphoneDisabled":d?"composer.unmuteMicrophone":"composer.muteMicrophone"),className:ue("size-12 rounded-full",ld,um,a),layout:!l,initial:"initial",animate:"enter",variants:{initial:m2e,enter:f2e},onClick:u,ref:T=>{_.ref(T),I(T)},"data-spatial-focus-key":S.focusKey,disabled:m,children:i.jsxs(ge.span,{className:ue("flex items-center justify-center overflow-hidden border",f?"border-white bg-white/50 hover:bg-white/80 dark:border-white/12 dark:bg-black/40":"border-transparent bg-black/8 dark:bg-white/5",h&&"text-spot-blue-450 dark:text-midnight-300",gf),layout:!l,children:[i.jsx(pt,{children:h&&i.jsx(ge.div,{className:ue("flex items-center justify-center overflow-hidden rounded-full blur-[6px]",gf),layout:!0,initial:Fe,animate:nt,exit:Fe,style:{scale:b},children:i.jsx(ge.div,{className:ue(gf),layout:!0,style:{opacity:E},children:i.jsx(ge.div,{className:ue(r&&"animate-spin-slow","bg-gradient-audio-input-light dark:bg-gradient-audio-input-dark",gf)})})})}),f?i.jsx(jp,{className:o9,"aria-hidden":!0}):i.jsx(pM,{className:o9,"aria-hidden":!0})]})})]}),children:i.jsx("div",{className:"flex p-0 px-3 text-white text-sm dark:text-foreground-300",children:t("voice.v2.waitingInteractionUnmuteSubheader")})})}function h2e(e,t){const{children:n,className:s,margins:o,data:r,size:a="regular",onButtonRef:l}=e,u=r.isDisabled?"":r.title,d=a==="small";return i.jsx(ge.div,{className:F("relative shrink-0",o??"my-1",d?"h-9":"h-10",r.isVisible&&!d&&"size-10",r.isVisible&&d&&"size-9",!r.isVisible&&"overflow-hidden"),layout:!0,initial:!1,ref:t,children:i.jsx(ge.button,{type:"button",className:F("absolute flex items-center justify-center rounded-xl fill-foreground-750",d?"size-9 p-1":"size-10 p-2",_i["subtle-dimmed"],"disabled:active:bg-transparent disabled:active:bg-none",s),layout:"position",disabled:!r.isVisible||r.isDisabled,"aria-hidden":!r.isVisible,"aria-label":u,title:u,onClick:r.onClick,"data-testid":r.testId,"aria-expanded":typeof r.ariaExpanded=="boolean"?r.ariaExpanded:void 0,ref:l,children:n})})}const Hs=c.forwardRef(h2e);function jf(e){const{children:t,className:n}=e;return i.jsx(ge.div,{className:n,initial:Fe,animate:nt,exit:Fe,transition:{delay:c_},children:t})}function vM(){const e=ZC(),t=W("appearance-first-run-experience"),[n,s]=Ue(VA),[o,r]=Ue(Rme),a=e&&t&&!n;return{hasNeverSeenAppearanceFirstRunAnimation:a,setHasSeenFirstRunExperienceAnimation:s,isAppearanceFirstRunExperienceAnimationPlaying:o,setIsAppearanceFirstRunExperienceAnimationPlaying:r,isAppearanceFirstRunExperienceComplete:!a&&!o}}function g2e(e){const{isInputMuted:t}=e,{isAppearanceFirstRunExperienceAnimationPlaying:n}=vM();return n?"disabled":t?"muted":"active"}function CM(){const e=mm(),t=W("appearance-discoverability"),n=M(Co),s=M(BA);return e&&t&&!n&&s}function wu(e){const t=$e(),s={...t.get(v2),[e]:new Date().toISOString()};t.set(v2,s)}function qo(e){const n=!!M(v2)[e],s=c.useCallback(()=>{wu(e)},[e]);return{alreadyShown:n,dismissCoachmark:s}}const yM="appearanceColorShuffler",bM="appearanceSetting",v2e="appearanceVoiceCustomization",Rm="smartmode",kAe="pagesEditThisResponse",MAe="pageSourcesFirstRun",NAe="pageSourcesFirstAdd",RAe="galleryDetailPrompt",PAe="GalleryComposerFileUpload",xM="vision",LAe="audioExpressionModeSelector",C2e="studyLive",y2e="inlineBrowsingPreviousConversations",OAe="inviteTooltip";function b2e(){const e=ZC(),t=W("appearance-customization-function-call"),n=eh(),{isAppearanceFirstRunExperienceComplete:s}=vM(),o=M(Pme),{alreadyShown:r}=qo(yM),a=o||r,l=M(HA);return e&&t&&a&&s&&!l&&!n}function Pm(e){const{renderReferenceElement:t,children:n,className:s,placement:o,offset:r,isOpen:a=!0,portalId:l,withArrow:u=!1,arrowClassName:d="dark:fill-black fill-white",animation:m="none",onOutsideEvent:f,onInsideEvent:h,invokeOnce:g=!0}=e,C=c.useRef(null),{refs:v,x:y,y:b,strategy:E,context:S,placement:I}=Ml({open:a,placement:o??"right",middleware:[fa(r??1),Tl({fallbackAxisSideDirection:"end"}),pa(),P_({element:C})],whileElementsMounted:Ta});go({onOutsideEvent:()=>{f==null||f()},invokeOnce:g,elements:[v.floating]});const _=RC(S),T=lm(S),A=Z1(S),k=qi(),{getReferenceProps:N,getFloatingProps:P}=q1([_,T,A]),V=M(zo),U=x2e(m,I);return i.jsxs(i.Fragment,{children:[t==null?void 0:t({ref:v.setReference,...N()},a),a&&i.jsx(kl,{id:l,children:i.jsxs(ge.div,{ref:v.setFloating,style:{position:E,top:`${b}px`,[k?"insetInlineEnd":"insetInlineStart"]:`${y}px`,boxShadow:V==="dark"?"0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset":void 0},...U,...P({}),className:ue("flex rounded-2xl p-4 shadow-xl",ct.coachmark,pee,u&&"!overflow-visible",s),onClick:h,children:[n,u?i.jsx(ore,{ref:C,context:S,tipRadius:3,strokeWidth:2,className:d}):null]})})]})}function x2e(e,t){switch(e){case"bounce":return S2e(t);case"none":return{};default:return{}}}function S2e(e){const n=e.startsWith("top")||e.startsWith("bottom"),s=e.startsWith("top")||e.startsWith("left")?-1:1;return n?{animate:{y:`${s*10}px`,transition:o6}}:{animate:{x:`${s*10}px`,transition:o6}}}const E2e=10;function w2e(e){const{triggerComponent:t,offset:n=E2e,onInsideEvent:s}=e,{t:o}=q(),{alreadyShown:r,dismissCoachmark:a}=qo(bM);return hs(l=>{(l.key==="Escape"||l.key==="Control")&&(l.stopPropagation(),a())}),i.jsx(Pm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:!r,placement:"top",offset:n,withArrow:!0,renderReferenceElement:l=>i.jsx(ge.div,{ref:l.ref,className:"relative",children:t}),portalId:"composer-container",onInsideEvent:()=>{s==null||s(),a()},children:i.jsx("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:i.jsx("div",{className:"text-xs",children:o("settings.appearanceSettingCoachmarkText")})})})}const I2e="/static/cmc/assets/settings-cwFubbTV.svg",_2e=10;function T2e(e){const{triggerComponent:t,offset:n=_2e,onInsideEvent:s,placement:o}=e,{t:r}=q(),{alreadyShown:a,dismissCoachmark:l}=qo(v2e),u=se(Ome);return c.useEffect(()=>(u(!0),()=>{u(!1)}),[u]),hs(d=>{(d.key==="Escape"||d.key==="Control")&&(d.stopPropagation(),l())}),i.jsx(Pm,{className:"max-w-52 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:!a,placement:o,offset:n,withArrow:!0,renderReferenceElement:d=>i.jsx(ge.div,{ref:d.ref,className:"relative",children:t}),portalId:"appearance-voice-customization",onInsideEvent:()=>{s==null||s(),l()},children:i.jsxs("div",{className:"flex max-w-52 flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[i.jsx("span",{className:"text-center text-xs",children:r("settings.appearanceVoiceCustomizationCoachmarkTitle")}),i.jsx("span",{className:"text-center text-xs",children:r("settings.appearanceVoiceCustomizationCoachmarkText")})]})})}const a9=3e3,A2e=4,k2e=28;function M2e(e){const{expandedSection:t,settingsIconClassName:n,dismissCallButton:s,onAudioSettingsClick:o,DismissAudioSettings:r,audioInputProps:a}=e,{t:l}=q(),[u,d]=c.useState(!1),m=g2e({isInputMuted:a.isInputMuted}),f=CM();c.useEffect(()=>{const b=setTimeout(()=>{d(f)},a9);return()=>clearTimeout(b)},[f]);const h=b2e(),[g,C]=c.useState(!1);c.useEffect(()=>{const b=setTimeout(()=>{C(h)},a9);return()=>clearTimeout(b)},[h]);const v=i.jsx(Hs,{className:"start-0",data:{title:l("composer.voiceSettings"),isVisible:!0,onClick:o},children:i.jsx(St,{url:I2e,className:n,"aria-hidden":!0})}),y=i.jsx(p2e,{className:a.className,inputVolume:a.inputVolume,status:m,isOutputPlaying:a.isOutputPlaying,coachUserUnmute:a.coachUserUnmute,onClick:a.onInputClick});return i.jsx(ge.div,{className:F(t!=="audioSettings"&&"flex"),children:t==="audioSettings"?i.jsx(Hs,{className:"end-0",data:r,children:r.icon}):i.jsxs(i.Fragment,{children:[s,g?i.jsx(T2e,{triggerComponent:y,offset:k2e,placement:"top"}):y,i.jsx(jf,{children:u?i.jsx(w2e,{"aria-label":l("settings.appearanceSettingCoachmarkText"),triggerComponent:v,offset:A2e}):v})]})})}class SM{constructor(){O(this,"audioContext");O(this,"audioAnalyser")}get isInitialized(){return this.audioContext!==void 0&&this.audioContext.state!=="closed"}async initialize({sampleRate:t}){this.audioContext&&await this.cleanup();try{this.audioContext=new AudioContext({sampleRate:t}),this.audioAnalyser=this.audioContext.createAnalyser()}catch(n){const s=n instanceof Error?n.message:String(n);throw new Error(`Failed to initialize audio context: ${s}`)}}async cleanup(){if(this.audioContext&&this.audioContext.state!=="closed")try{await this.audioContext.close()}catch(t){t instanceof DOMException&&t.name==="InvalidStateError"||Kt({feature:"AudioContextManager",scenario:"cleanup",errorType:"AudioContextCloseError",errorMessage:t instanceof Error?t.message:String(t)})}this.audioContext=void 0,this.audioAnalyser=void 0}}function DAe(e){}class N2e{constructor(){O(this,"ENERGY_THRESHOLD_MULTIPLIER",3);O(this,"SILENCE_DURATION",500);O(this,"MIN_SPEECH_DURATION",300);O(this,"ZERO_CROSSING_MIN",.01);O(this,"ZERO_CROSSING_MAX",.5);O(this,"MAX_VALID_LATENCY_MS",2e3);O(this,"AUDIO_SAMPLE_OFFSET",128);O(this,"audioAnalyser");O(this,"voiceDetectionRaf",-1);O(this,"voiceDetectionActive",!1);O(this,"energyHistory",[]);O(this,"noiseFloor",.01);O(this,"isSpeaking",!1);O(this,"silenceStartTime",0);O(this,"lastVoiceDetectionTime",0);O(this,"lastClientSideVoiceEndTime",null);O(this,"serverVADLatencyMeasurements",[]);O(this,"onClientSideVoiceStartDetected");O(this,"onClientSideVoiceEndDetected")}startVoiceDetection(t){this.voiceDetectionActive&&this.stopVoiceDetection(),!(typeof window>"u")&&(this.audioAnalyser=t,this.voiceDetectionActive=!0,this.energyHistory=[],this.noiseFloor=.01,this.isSpeaking=!1,this.silenceStartTime=0,this.lastVoiceDetectionTime=Date.now(),this.lastClientSideVoiceEndTime=null,this.serverVADLatencyMeasurements=[],this.performVoiceDetection())}stopVoiceDetection(){this.voiceDetectionRaf!==-1&&(cancelAnimationFrame(this.voiceDetectionRaf),this.voiceDetectionRaf=-1),this.voiceDetectionActive=!1,this.audioAnalyser=void 0,this.displayServerVADLatencyStatistics()}setOnClientSideVoiceStartDetected(t){this.onClientSideVoiceStartDetected=t}setOnClientSideVoiceEndDetected(t){this.onClientSideVoiceEndDetected=t}getLastClientVoiceEndTime(){return this.lastClientSideVoiceEndTime?this.lastClientSideVoiceEndTime-this.SILENCE_DURATION:null}onServerSpeechEndDetected(){if(`${this.lastClientSideVoiceEndTime}`,`${this.voiceDetectionActive}${this.isSpeaking}`,!this.lastClientSideVoiceEndTime)return null;const t=Date.now(),n=this.lastClientSideVoiceEndTime-this.SILENCE_DURATION,s=t-n;return`${t}${this.lastClientSideVoiceEndTime}${n}${s}`,s>=0&&s<=this.MAX_VALID_LATENCY_MS?(this.serverVADLatencyMeasurements.push(s),s):null}getLastServerVADLatency(){return this.serverVADLatencyMeasurements[this.serverVADLatencyMeasurements.length-1]??null}performVoiceDetection(){var t,n;if(!this.voiceDetectionActive||!this.audioAnalyser){`${this.voiceDetectionActive}`,this.audioAnalyser;return}try{const s=this.audioAnalyser.frequencyBinCount,o=new Uint8Array(s);this.audioAnalyser.getByteTimeDomainData(o);const r=new Float32Array(s);for(let u=0;u<s;u+=1){const d=o[u];d!==void 0&&(r[u]=(d-this.AUDIO_SAMPLE_OFFSET)/this.AUDIO_SAMPLE_OFFSET)}const a=this.advancedVoiceDetection(r),l=Date.now();a?(this.isSpeaking||l-this.lastVoiceDetectionTime>this.MIN_SPEECH_DURATION&&(this.isSpeaking=!0,(t=this.onClientSideVoiceStartDetected)==null||t.call(this)),this.silenceStartTime=0,this.lastVoiceDetectionTime=l):this.isSpeaking&&(this.silenceStartTime===0?this.silenceStartTime=l:l-this.silenceStartTime>this.SILENCE_DURATION&&(this.isSpeaking=!1,this.lastClientSideVoiceEndTime=l,(n=this.onClientSideVoiceEndDetected)==null||n.call(this)))}catch{}this.voiceDetectionRaf=requestAnimationFrame(()=>{this.performVoiceDetection()})}advancedVoiceDetection(t){let n=0,s=0;for(let m=0;m<t.length;m+=1){const f=t[m];if(f!==void 0&&(n+=f*f,m>0)){const h=t[m-1];h!==void 0&&h>=0!=f>=0&&(s+=1)}}n=Math.sqrt(n/t.length);const o=s/t.length;if(this.energyHistory.push(n),this.energyHistory.length>100){this.energyHistory.shift();const m=[...this.energyHistory].sort((h,g)=>h-g),f=m[Math.floor(m.length*.1)];f!==void 0&&(this.noiseFloor=f)}const r=this.noiseFloor*this.ENERGY_THRESHOLD_MULTIPLIER,l=n-this.noiseFloor>r,u=o>this.ZERO_CROSSING_MIN&&o<this.ZERO_CROSSING_MAX;return l&&u}displayServerVADLatencyStatistics(){if(this.serverVADLatencyMeasurements.length===0)return;const t=this.serverVADLatencyMeasurements,n=t.length,s=t.reduce((o,r)=>o+r,0)/n;[...t].sort((o,r)=>o-r),Math.min(...t),Math.max(...t),`${s.toFixed(1)}`,`${t.join(", ")}`}}const a5=24e3,EM=24e3,R2e=1;function P2e(e){const t=atob(e),n=t.length,s=new Uint8Array(n);for(let o=0;o<n;o+=1)s[o]=t.charCodeAt(o);return s.buffer}function L2e(e){let t="";const n=new Uint8Array(e),s=n.byteLength;for(let o=0;o<s;o+=1){const r=n[o];typeof r=="number"&&(t+=String.fromCharCode(r))}return btoa(t)}function O2e(e){const t=P2e(e),n=new Int16Array(t),s=new Float32Array(n.length);for(let o=0;o<n.length;o+=1)s[o]=n[o]/32768;return s}function D2e(e){const t=e<0?e*32768:e*32767;return Math.max(-32768,Math.min(32767,t))}function j2e(e){let t=0;for(const n of e){const s=n-128;t+=s*s}return Math.sqrt(t/e.length)}function wM(e){return e/Rd}function jAe(e){return`${wM(e)}x`}function UAe(e,t){const n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function FAe(e){const t=Math.floor(e/60),n=e%60;return`${t}:${n.toString().padStart(2,"0")}`}function i9(e,t){Ge.emit(`voice:audio-${t}-volume-changed`,e)}function U2e(e,t,n){if(t===n)return e;const s=e.length,o=t/n,r=Math.ceil(s/o),a=new Float32Array(r);for(let l=0;l<r;l+=1){const u=l*o,d=Math.floor(u),m=d+1,f=e[d]??0,h=e[m]??0,g=u-d;a[l]=f*(1-g)+h*g}return a}class IM{constructor(t){O(this,"mode");O(this,"volumeUpdateRaf",-1);O(this,"audioAnalyser");O(this,"volume",_c(0));this.mode=t}startTracking(t){this.audioAnalyser&&this.stopTracking(),this.audioAnalyser=t,this.trackVolume()}trackVolume(){if(!this.audioAnalyser){this.stopTracking();return}const t=new Uint8Array(this.audioAnalyser.frequencyBinCount);this.audioAnalyser.getByteTimeDomainData(t);const n=j2e(t);Math.abs(n-this.volume.get())>R2e&&(this.volume.set(n),i9(n,this.mode)),this.volumeUpdateRaf=requestAnimationFrame(()=>{this.trackVolume()})}stopTracking(){this.volumeUpdateRaf!==-1&&(cancelAnimationFrame(this.volumeUpdateRaf),this.volumeUpdateRaf=-1),this.audioAnalyser=void 0,this.volume.set(0),i9(0,this.mode)}}const F2e="/static/cmc/assets/call_ending-BxIIadI4.mp3",B2e="/static/cmc/assets/call_opening-CKuCznU5.mp3";function V2e(){const e=Ys(),t=W("use-appearance-component-package"),n=DC(["study-mode-lumi","study-mode-summary"],"any"),s=W("tv-new-lumi");return t||e==="study"&&n||s}function H2e(){return ud(["use-appearance-component-package","tv-new-lumi"],"any")||yo()==="study"&&ud(["study-mode-lumi","study-mode-summary"],"any")}function i5(){return/firefox/i.test(navigator.userAgent)}function z2e(e,t){const n=typeof e=="string"?O2e(e):e,s=t.createBuffer(1,n.length,EM);s.getChannelData(0).set(n);const o=t.createBufferSource();return o.buffer=s,o}async function G2e(e,t,n,s,o){const r=s&&await s();let a=8192;be("audio-buffer-size-4096")?a=4096:be("audio-buffer-size-2048")&&(a=2048);const l=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0,autoGainControl:!0,sampleRate:i5()?void 0:a5,...r}}),u=l.getAudioTracks()[0];u&&(u.onended=f=>{o==null||o(f)});const d=t.createMediaStreamSource(l),m=t.createScriptProcessor(a,1,1);return d.connect(n),n.connect(m),m.connect(t.destination),m.onaudioprocess=f=>{let h=f.inputBuffer.getChannelData(0);i5()&&(h=U2e(h,t.sampleRate,a5));const g=new Int16Array(h.length);for(let v=0;v<h.length;v+=1){const y=h[v];typeof y=="number"&&(g[v]=D2e(y))}const C=L2e(g.buffer);e(C)},l}async function c9(e,t){const n=await Promise.race([Qd(t),new Promise(s=>{try{const o=new Audio(e);o.addEventListener("ended",()=>s(o),{once:!0}),o.play()}catch{}})]);n==null||n.remove()}function W2e(e,t){switch(t){case"time-expired":return{title:e("voice.v2.timeExpiredProHeading"),subtitle:e("voice.v2.timeExpiredProSubheading")};case"throttled":return{title:e("voice.v2.throttledHeadingV2"),subtitle:e("voice.v2.throttledSubheadingV2")};case"error":default:return{title:e("voice.v2.errorHeading"),subtitle:e("voice.v2.errorSubheading")}}}function $2e(e){if(!e)return!0;switch(e.type){case"server-terminated":return!["time-expired","throttled","inactivity"].includes(e.reason);default:return!0}}const BAe={lmks_rest:"lmksRest",frames:"frames",expr:"expr",neck_pose:"neckPose",jaw_pose:"jawPose",eyes_pose:"eyesPose",eyes_open_ratio:"eyesOpenRatio",rotation:"rotation",translation:"translation",lmks:"lmks"};class q2e{constructor(t,n){O(this,"lmksRest");O(this,"frames");this.lmksRest=t,this.frames=n}}class K2e{constructor(t,n){O(this,"exp");O(this,"pose");this.exp=t,this.pose=n}isValid(){return this.exp.dtype!==""&&this.exp.data.length>0||this.pose.dtype!==""&&this.pose.data.length>0}}const{EPSILON:c5}=Number,Z2e=["Viseme_Neutral","Viseme_AI","Viseme_E","Viseme_U","Viseme_CDG","Viseme_WQ","Viseme_O","Viseme_L","Viseme_ShCh","Viseme_FV","Viseme_MBP"],Y2e=[0,1,1,6,2,3,4,5,6,1,6,1,2,5,7,4,8,7,9,4,4,10],Yr={enablePose:!1,enableNeck:!1,enableEye:!1,enableEyebrow:!1};function VAe(e){Yr.enablePose=e,Yr.enableNeck=e,Yr.enableEye=e,Yr.enableEyebrow=e}function Q2e(e,t=null){const{Quaternion:n,Vector3:s}=Ks.getCore(),o=.3,r=.5,a=30/360*Math.PI,l=1,u=.01,d=["eye_BlinkUp","eye_Squint","eye_RSquare"],m=[.5,.2,.2],f=.5,h=.3,g=n.RotationAxis(s.Right(),Math.PI/4),C=g.conjugate(),v=new s(l,l,l),y=new s(-1,-1,-1),b={pose:{translation:new s(0,0,0),rotation:n.Identity()},expression:{eyes_open_ratio:0,eye_BlinkUp:0,eye_Squint:0,eye_RSquare:0,eyebrow_value:0,eyebrow_height:0,eyebrow_bend:0,viseme:new Array(11).fill(0),viseme22_idx:0,viseme11_idx:0},offset:e.offset??null};if(Yr.enablePose){let S=l9(e.rotation);if(Yr.enableNeck){const A=l9(e.neckPose);S.multiplyInPlace(A)}S=g.multiplyToRef(S,S).multiplyToRef(C,S);let[I,_]=X2e(S);_>a&&(_=a),b.pose.rotation=n.RotationAxis(I,_);const T=s.FromArray(e.translation);s.ClampToRef(T,y,v,T),b.pose.translation=T}const E=e.eyesOpenRatio[0]??0;if(b.expression.eyes_open_ratio=E,Yr.enableEye&&t!==null){let S=0,I=0,_=0;if(t.expression.eye_BlinkUp>0)E<.9&&(S=1,I=0,_=0);else if(t.expression.eye_Squint>0)E<.9&&(S=0,I=f,_=0);else if(t.expression.eye_RSquare>0)E>1.1&&(S=0,I=0,_=h);else{const T=t.expression.eyes_open_ratio;E<.75&&T<.8?(S=1,I=0,_=0):E<.8&&T<.85?(S=0,I=f,_=0):E>1.1&&(S=0,I=0,_=h)}b.expression.eye_BlinkUp=S,b.expression.eye_Squint=I,b.expression.eye_RSquare=_}if(Yr.enableEyebrow){const S=e.viseme.slice(1,4);b.expression.eyebrow_value=e.viseme[2]??0,b.expression.eyebrow_height=Sx(((S[1]??0)-0)*2)*u,b.expression.eyebrow_bend=Sx((0-(S[1]??0))*3)}{const S=Math.round(e.viseme[0]??0),I=Y2e[S]??0;b.expression.viseme[I]=1,t!==null&&t.expression.viseme22_idx!==S&&(b.expression.viseme[I]=.9),b.expression.viseme22_idx=S,b.expression.viseme11_idx=I}if(t!==null){for(const[k,N]of d.entries()){const P=m[k]??0;b.expression[N]=u9(t.expression[N],b.expression[N],0,P)}const S=b.expression.viseme,I=t.expression.viseme;if((S[10]??0)<1e-6)for(let k=0;k<Z2e.length;k+=1)S[k]=u9(I[k]??0,S[k]??0,0,o);const T=b.pose.translation,A=t.pose.translation;b.pose.translation=new s(T.x*r+A.x*(1-r),T.y*r+A.y*(1-r),T.z*r+A.z*(1-r))}return b}function J2e(e){const{TmpVectors:t,Vector3:n}=Ks.getCore(),s=t.Vector3[0];s.fromArray(e);const o=s.length();return o<c5?[n.Up(),0]:[s.scale(1/o),o]}function l9(e){const{Quaternion:t}=Ks.getCore(),[n,s]=J2e(e);return t.RotationAxis(n,s)}function X2e(e){const{Vector3:t}=Ks.getCore(),n=e.lengthSquared();Math.abs(n-1)>c5&&e.normalize();const s=Math.acos(e.w),o=s*2,r=Math.sin(s),a=Math.abs(r)<5e-4?1:r,l=new t(e.x/a,e.y/a,e.z/a);return l.lengthSquared()<c5&&(l.y=1),[l,o]}function u9(e,t,n,s){return Math.abs(t-e)<n?e:e<t?Math.min(e+s,t):Math.max(e-s,t)}function e5e(e,t,n){const{Vector3:s,Quaternion:o}=Ks.getCore(),{Lerp:r}=Ks.getMath();return{pose:{translation:s.Lerp(e.pose.translation,t.pose.translation,n),rotation:o.Slerp(e.pose.rotation,t.pose.rotation,n)},expression:{eyes_open_ratio:0,eye_BlinkUp:r(e.expression.eye_BlinkUp,t.expression.eye_BlinkUp,n),eye_Squint:r(e.expression.eye_Squint,t.expression.eye_Squint,n),eye_RSquare:r(e.expression.eye_RSquare,t.expression.eye_RSquare,n),eyebrow_value:0,eyebrow_height:r(e.expression.eyebrow_height,t.expression.eyebrow_height,n),eyebrow_bend:r(e.expression.eyebrow_bend,t.expression.eyebrow_bend,n),viseme:new Array(11).fill(0).map((l,u)=>r(e.expression.viseme[u]??0,t.expression.viseme[u]??0,n)),viseme22_idx:0,viseme11_idx:0}}}const t5e=3.141592653589793,d9="System.Single, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";function n5e(e){const t=[],n=[],s=(l,u)=>{if(u>=l.length)throw new Error("index out of range");return l[u]===void 0?0:l[u]};for(const{frame:l,offset:u}of e){if(l.length<97)return console.log("Invalid frame length"),null;const d=new Array(28).fill(0);d[12]=s(l,78),d[16]=s(l,43),d[17]=s(l,43),d[21]=s(l,72),d[23]=.5*s(l,52)+.5*s(l,53),d[24]=.75*s(l,76),d[26]=.75*s(l,76),t.push({exp:d,offset:u});const m=[[-1*s(l,88)+t5e,-1*s(l,89),s(l,90)],[0,s(l,92),-1*s(l,91)],[0,s(l,95),-1*s(l,94)]];n.push(m)}const o={dtype:d9,shape:[t.length,16],data:t,isColumnMajor:!1},r={dtype:d9,shape:[n.length,3,3],data:n,isColumnMajor:!1};return new K2e(o,r)}class s5e{constructor(t){O(this,"activeModel",null);O(this,"a2eAnimationData",null);O(this,"vasaAnimationData",null);O(this,"vasaExpFrames",[]);O(this,"frameOffsetTimeAvailable",!1);O(this,"currentFrameIndex",0);this.getPlayTime=t}get fps(){return this.activeModel==="spda2e"?mZ:this.activeModel==="vasa"?fZ:25}get frameCount(){return this.activeModel==="spda2e"&&this.a2eAnimationData?this.a2eAnimationData.exp.data.length:this.activeModel==="vasa"&&this.vasaAnimationData?this.vasaAnimationData.frames.length:0}get playbackTime(){return this.getPlayTime()}reset(){this.activeModel=null,this.a2eAnimationData=null,this.vasaAnimationData=null,this.vasaExpFrames=[],this.frameOffsetTimeAvailable=!1,this.currentFrameIndex=0}setFrameData({frame:t,offsetInMilliseconds:n}){t&&(this.activeModel=t.model,t.model==="spda2e"&&this.setA2EFrame(t.poseDiffusion,n),t.model==="vasa"&&this.setVasaFrameData(t,n))}setA2EFrame(t,n){if(!(t!=null&&t.length))return;const s=n5e([{frame:t,offset:n}]);if(s){if(!this.a2eAnimationData){this.a2eAnimationData=s;return}this.a2eAnimationData.exp.data.push(...s.exp.data),this.a2eAnimationData.pose.data.push(...s.pose.data),this.frameOffsetTimeAvailable=this.a2eAnimationData.exp.data.every(({offset:o})=>!Number.isNaN(o))}}setVasaFrameData(t,n){if(!t)return;const s={...t,offset:n};if(!this.vasaAnimationData){this.vasaAnimationData=new q2e([],[s]);return}this.vasaExpFrames.push(Q2e(s,this.vasaExpFrames.at(-1))),this.vasaAnimationData.frames.push(s),this.frameOffsetTimeAvailable=this.vasaAnimationData.frames.every(({offset:o})=>!Number.isNaN(o))}getCurrentFrameIndex(t){if(this.frameOffsetTimeAvailable){let n=this.currentFrameIndex;for(;n<t.length;n+=1){this.currentFrameIndex=n;const s=t[n];if((s==null?void 0:s.offset)!==void 0&&s.offset!==null&&s.offset/1e3>=this.playbackTime)break}return n}return Math.round(this.playbackTime/(1/this.fps))}getCurrentA2EFrame(){if(!this.a2eAnimationData)return null;const t=this.a2eAnimationData.exp.data;return this.currentFrameIndex=this.getCurrentFrameIndex(t),t[this.currentFrameIndex]??null}getCurrentVasaFrame(){if(!this.vasaAnimationData)return null;const{frames:t,lmksRest:n}=this.vasaAnimationData;this.currentFrameIndex=this.getCurrentFrameIndex(t);const s=t[this.currentFrameIndex];return s?{frame:s,lmksRest:n}:null}getCurrentVasaExpFrame(){if(!this.vasaAnimationData)return null;this.currentFrameIndex=this.getCurrentFrameIndex(this.vasaExpFrames);const t=this.vasaExpFrames[this.currentFrameIndex-1],n=this.vasaExpFrames[this.currentFrameIndex];if(t&&n&&this.playbackTime<(n.offset??1/0)/1e3){const s=this.playbackTime-(t.offset??0)/1e3;return e5e(t,n,s)}return n??null}}const m9={SUMMARY:"summary",ADAPTIVE_UI:"adaptiveUI"};var ui;let _M=(ui=class{constructor(){O(this,"readyTime",0);O(this,"startCallTime",0);O(this,"startMessageTime",0);O(this,"firstTokenTime",0);O(this,"mostRecentTokenTime",0);O(this,"interruptAudioTime",0);O(this,"speechEndTime",0);O(this,"audioStutterTime",0);O(this,"audioStutterDurations",[]);O(this,"audioChunkStamps",[]);O(this,"animationStutterTime",0);O(this,"animationStutterDurations",[]);O(this,"animationChunkStamps",[]);O(this,"currentConversationId","");O(this,"currentCallId","");O(this,"currentMessageId","");O(this,"serverTurnCounter",1);O(this,"latestTurnDetails",null);O(this,"messagesTurnDetails",{});O(this,"introComplete",!1);O(this,"isTurnRunning",!1);O(this,"receivedTranscript",!1);O(this,"receivedText",!1);O(this,"receivedAudio",!1);O(this,"receivedFirstToken",!1);O(this,"receivedLastToken",!1);O(this,"receivedFirstAnimation",!1);O(this,"hasAnimationTimeout",!1);O(this,"hasAudioStarted",!1);O(this,"hasAudioPlaybackError",!1);O(this,"scenario");O(this,"messageStatus","idle");O(this,"audioTranscriptLength",0);O(this,"isFirstStartVoiceCallLogged",!1)}static getInstance(){return this.instance||(this.instance=new ui),this.instance}onBeforeStartCall(t,n){this.readyTime=performance.now(),n?this.scenario="portrait":t?this.scenario="appearance":this.scenario=void 0}onStartCall(t,n){this.interruptAudioTime=0,this.speechEndTime=0,this.introComplete=!1,this.serverTurnCounter=1,this.startCallTime=performance.now(),this.currentConversationId=t,this.currentCallId=crypto.randomUUID(),this.messageStatus="idle",this.latestTurnDetails=null,this.messagesTurnDetails={},this.audioTranscriptLength=0,D.trackEvent({name:"interaction",data:{eventName:"copilotCompose",eventInfo_conversationId:this.currentConversationId,eventInfo_inputMethod:"voice",eventInfo_landingPage:D.getLandingPage(),eventInfo_scenario:this.scenario,eventInfo_mode:n}}),D.trackEvent({name:"interaction",data:{eventName:"audioStartSent",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:this.startCallTime-this.readyTime,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onStartMessage(t){var n,s;this.receivedTranscript=!1,this.receivedText=!1,this.receivedAudio=!1,this.receivedFirstToken=!1,this.receivedLastToken=!1,this.receivedFirstAnimation=!1,this.hasAnimationTimeout=!1,this.isTurnRunning=!0,this.hasAudioStarted=!1,this.hasAudioPlaybackError=!1,this.currentMessageId=t,this.messagesTurnDetails[t]=this.latestTurnDetails,this.latestTurnDetails=null,this.startMessageTime=performance.now(),this.audioStutterTime=0,this.audioStutterDurations=[],this.audioChunkStamps=[],this.animationStutterTime=0,this.animationStutterDurations=[],this.animationChunkStamps=[],this.messageStatus="streaming",dl.onStartMessage(t,this.startMessageTime,this.serverTurnCounter),this.speechEndTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioReqtoResp",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.startMessageTime-this.speechEndTime,eventInfo_scenario:this.scenario,eventInfo_customData:JSON.stringify({turnId:(n=this.messagesTurnDetails[t])==null?void 0:n.turnId})}}),D.trackEvent({name:"system",data:{eventName:"copilotAudioStartMessage",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_scenario:this.scenario,eventInfo_firstTurn:!this.introComplete,eventInfo_customData:JSON.stringify({turnId:(s=this.messagesTurnDetails[t])==null?void 0:s.turnId})}})}onTranscriptReceived(t){this.receivedTranscript=!0,this.audioTranscriptLength=t}onTextReceived(t){t===this.currentMessageId&&(this.receivedText=!0)}onAudioInterrupt(t){this.interruptAudioTime=performance.now(),this.messageStatus==="streaming"&&(this.messageStatus="interrupted"),this.mostRecentTokenTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioInterrupt",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.interruptAudioTime-this.mostRecentTokenTime,eventInfo_scenario:this.scenario,eventInfo_mode:t}}),this.latestTurnDetails||(this.latestTurnDetails={turnId:crypto.randomUUID(),detectedBy:"server"}),this.latestTurnDetails.speechStartTime=this.interruptAudioTime,this.onTurnEnd()}onAudioReceived(t){if(this.receivedAudio=!0,this.audioChunkStamps.push(Math.round(performance.now()-this.startMessageTime)),!this.introComplete||!this.currentMessageId)return;this.mostRecentTokenTime=performance.now();const n=this.messagesTurnDetails[this.currentMessageId];this.receivedFirstToken||(this.receivedFirstToken=!0,this.firstTokenTime=this.mostRecentTokenTime,this.startMessageTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioResptoReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.mostRecentTokenTime-this.startMessageTime,eventInfo_scenario:this.scenario,eventInfo_mode:t,eventInfo_customData:JSON.stringify({turnId:n==null?void 0:n.turnId})}}),this.speechEndTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioFirstTokenReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:this.mostRecentTokenTime-this.speechEndTime,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter,eventInfo_mode:t,eventInfo_customData:JSON.stringify({turnId:n==null?void 0:n.turnId})}}))}onClientSpeechStartDetected(){this.latestTurnDetails||(this.latestTurnDetails={turnId:crypto.randomUUID(),detectedBy:"client"});const{clientSpeechStartTime:t,clientTurnCounter:n,speechStartTime:s}=this.latestTurnDetails;this.latestTurnDetails.clientTurnCounter=t&&!s&&n?n+1:1,this.latestTurnDetails.clientSpeechStartTime=performance.now()}onClientSpeechEndDetected(t){if(this.latestTurnDetails&&this.latestTurnDetails.clientSpeechStartTime){const n=t-performance.timeOrigin;this.latestTurnDetails.clientSpeechEndTime=n,D.trackEvent({name:"system",data:{eventName:"copilotAudioClientInput",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:n-this.latestTurnDetails.clientSpeechStartTime,eventInfo_scenario:this.scenario,eventInfo_customData:JSON.stringify({turnId:this.latestTurnDetails.turnId,isServerVADStarted:!!this.latestTurnDetails.speechStartTime,clientTurnCounter:this.latestTurnDetails.clientTurnCounter})}})}}onSpeechEndDetected(t){var n;this.speechEndTime=performance.now(),this.serverTurnCounter+=1,this.latestTurnDetails&&(this.latestTurnDetails.speechEndTime=this.speechEndTime),dl.onSpeechEndDetected(this.speechEndTime),this.interruptAudioTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioInput",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:this.speechEndTime-this.interruptAudioTime,eventInfo_scenario:this.scenario,eventInfo_mode:t,eventInfo_customData:JSON.stringify({turnId:(n=this.latestTurnDetails)==null?void 0:n.turnId})}})}onServerVADLatencyMeasured(t){var n;D.trackEvent({name:"system",data:{eventName:"copilotAudioSpeechEndDetected",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:t,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter,eventInfo_customData:JSON.stringify({turnId:(n=this.latestTurnDetails)==null?void 0:n.turnId})}})}onCallUIEventReceived(t){const n=performance.now(),s=this.speechEndTime?n-this.speechEndTime:void 0,o=t==="study"?m9.SUMMARY:m9.ADAPTIVE_UI;D.trackEvent({name:"system",data:{eventName:"callUIEventReceived",eventInfo_scenario:o,eventInfo_conversationId:this.currentConversationId,eventInfo_duration:s,eventInfo_mode:t}})}onCharacterAnimationReceived(){this.animationChunkStamps.push(Math.round(performance.now()-this.startMessageTime)),this.receivedFirstAnimation||(this.receivedFirstAnimation=!0,D.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_messageId:this.currentMessageId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter}}))}onCharacterAnimationEnd(){D.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationEnd",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_messageId:this.currentMessageId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario}})}onCharacterAnimationTimeout(){this.hasAnimationTimeout=!0}onCharacterAnimationMissedInCache(){this.animationStutterTime||(this.animationStutterTime=performance.now())}onCharacterAnimationResume(){this.stampAnimationStutterDuration()}stampAnimationStutterDuration(){if(this.animationStutterTime){const t=performance.now()-this.animationStutterTime;this.animationStutterDurations.push(Math.round(t)),this.animationStutterTime=0}}onCharacterEmotionReceived(t,n){D.trackEvent({name:"system",data:{eventName:"copilotCharacterEmotionReaction",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_emotion:t,eventInfo_bodyReaction:n}})}onCharacterAppearanceReceived(t){D.trackEvent({name:"system",data:{eventName:"copilotCharacterAppearanceEvent",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:performance.now()-this.speechEndTime,eventInfo_customData:JSON.stringify(t)}})}onMessageDone(t){const{messageId:n,voiceType:s,audioChatMode:o}=t;let r={transcriptLength:this.audioTranscriptLength};this.messageStatus==="interrupted"&&(r.interruptedAtMs=this.interruptAudioTime-this.startMessageTime);const a=this.messagesTurnDetails[n];if(a){const{turnId:l,detectedBy:u,clientSpeechStartTime:d=0,clientSpeechEndTime:m=0,speechStartTime:f=0,speechEndTime:h=0}=a;r={...r,turnId:l,turnDetectedBy:u,clientSpeechDuration:m-d,clientSpeechStartAt:d-f,clientSpeechEndAt:m-f,timeToSpeechEnd:h-f,timeToStartMessage:this.startMessageTime-f,timeToFirstAudio:this.firstTokenTime-f,timeToLastAudio:this.mostRecentTokenTime-f,timeToDone:performance.now()-f}}if(D.trackEvent({name:"system",data:{eventName:"copilotAudioMessageDone",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:n,eventInfo_scenario:this.scenario,eventInfo_firstTurn:!this.introComplete,eventInfo_transcriptReceived:this.receivedTranscript,eventInfo_textReceived:this.receivedText,eventInfo_audioReceived:this.receivedAudio,eventInfo_customData:JSON.stringify(r)}}),this.messageStatus="idle",delete this.messagesTurnDetails[n],!this.introComplete){this.introComplete=!0,D.trackEvent({name:"system",data:{eventName:"copilotAudioCallSetUp",eventInfo_duration:performance.now()-this.readyTime,eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_responseVoiceType:s,eventInfo_scenario:this.scenario,eventInfo_mode:o}});return}!this.receivedLastToken&&n===this.currentMessageId&&(this.receivedLastToken=!0,this.speechEndTime&&D.trackEvent({name:"system",data:{eventName:"copilotAudioLastTokenReceived",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:n,eventInfo_callId:this.currentCallId,eventInfo_duration:this.mostRecentTokenTime-this.speechEndTime,eventInfo_scenario:this.scenario,eventInfo_mode:o}}),D.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_inputMethod:"voice",eventInfo_responseMethod:"voice",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_responseVoiceType:s,eventInfo_landingPage:D.getLandingPage(),eventInfo_scenario:this.scenario,eventInfo_mode:o}}))}onEndCall(t,n){const s=performance.now()-this.startCallTime;this.onTurnEnd(),D.trackEvent({name:"system",data:{eventName:"copilotAudioCallEnd",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:s,eventInfo_numMessages:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}}),this.currentCallId=""}onAudioStartFailed(t,n){D.trackEvent({name:"system",data:{eventName:"copilotAudioStartFailed",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_reason:t,reason:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onAudioStartTimeout(t){D.trackEvent({name:"system",data:{eventName:"copilotAudioStartTimeout",eventInfo_conversationId:this.currentConversationId,eventInfo_duration:t,eventInfo_scenario:this.scenario}})}onTerminated(t,n){D.trackEvent({name:"system",data:{eventName:"copilotAudioTerminated",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_reason:t,reason:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onError(t,n){D.trackEvent({name:"system",data:{eventName:"copilotAudioError",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_duration:performance.now()-this.startCallTime,eventInfo_errorCode:t,eventInfo_scenario:this.scenario,eventInfo_mode:n}})}onAudioStart(){if(!this.hasAudioStarted){this.hasAudioStarted=!0;const t=Math.round(performance.now()-(this.speechEndTime||this.startMessageTime));D.trackEvent({name:"system",data:{eventName:"copilotAudioStart",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:t,eventInfo_scenario:this.scenario,eventInfo_serverTurnCounter:this.serverTurnCounter}})}}onAudioEnd(){this.onTurnEnd()}onAudioSuspend(){this.audioStutterTime||(this.audioStutterTime=performance.now())}onAudioResume(){this.stampAudioStutterDuration()}stampAudioStutterDuration(){if(this.audioStutterTime){const t=performance.now()-this.audioStutterTime;this.audioStutterDurations.push(Math.round(t)),this.audioStutterTime=0}}onAudioError(){this.hasAudioPlaybackError=!0}onTurnEnd(){if(this.isTurnRunning){this.isTurnRunning=!1,this.stampAudioStutterDuration(),this.stampAnimationStutterDuration();const t=this.audioStutterDurations.length,n=this.animationStutterDurations.length;if(D.trackEvent({name:"system",data:{eventName:"copilotAnimationSummary",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_scenario:this.scenario,eventInfo_audioReceived:this.receivedAudio,eventInfo_animationReceived:this.receivedFirstAnimation,eventInfo_timeout:this.hasAnimationTimeout,eventInfo_audioPlayed:this.hasAudioStarted,eventInfo_audioPlayError:this.hasAudioPlaybackError,eventInfo_animationMissedInCache:n>0,eventInfo_audioMissedInCache:t>0}}),t>0||n>0){const s=Math.max(...this.audioStutterDurations,0),o=this.audioStutterDurations.reduce((l,u)=>l+u,0),r=Math.max(...this.animationStutterDurations,0),a=this.animationStutterDurations.reduce((l,u)=>l+u,0);D.trackEvent({name:"system",data:{eventName:"copilotAudioStutter",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_messageId:this.currentMessageId,eventInfo_scenario:this.scenario,eventInfo_audioStutterCount:t,eventInfo_audioStutterDurationMax:s,eventInfo_audioStutterDurationTotal:o,eventInfo_audioChunkStamps:this.audioChunkStamps,eventInfo_animationStutterCount:n,eventInfo_animationStutterDurationMax:r,eventInfo_animationStutterDurationTotal:a,eventInfo_animationChunkStamps:this.animationChunkStamps}})}}}trackAudioPermission(t,n,s){this.trackStartVoiceCallEvent(t,n,s)}trackStartVoiceCall(t,n,s){switch(t){case"start":this.isFirstStartVoiceCallLogged=!0,this.trackStartVoiceCallEvent(t);break;case"success":case"fail":this.isFirstStartVoiceCallLogged&&(this.trackStartVoiceCallEvent(t,n,s),this.isFirstStartVoiceCallLogged=!1);break;case"end":this.isFirstStartVoiceCallLogged=!1;break}}trackStartVoiceCallEvent(t,n,s){D.trackEvent({name:"system",data:{eventName:"copilotStartVoiceCall",eventInfo_conversationId:this.currentConversationId,eventInfo_callId:this.currentCallId,eventInfo_scenario:this.scenario,eventInfo_errorCode:n,eventInfo_errorDescription:s,eventInfo_customData:JSON.stringify({isFirst:!0,isConnected:navigator.onLine,node:t})}})}},O(ui,"instance"),ui);const ci=_M.getInstance();class o5e extends EventTarget{constructor(){super(...arguments);O(this,"audioContextManager",new SM);O(this,"volumeTracker",new IM("input"));O(this,"clientVADTracker",new N2e);O(this,"audioStream",null);O(this,"isMuted",!1)}get volume(){return this.volumeTracker.volume}get audioContext(){return this.audioContextManager.audioContext}startVoiceDetection(){if(!be("enable-vad-latency-measure"))return;const n=this.audioContextManager.audioAnalyser;n&&this.clientVADTracker.startVoiceDetection(n)}stopVoiceDetection(){be("enable-vad-latency-measure")&&this.clientVADTracker.stopVoiceDetection()}setOnClientSideVoiceStartDetected(n){be("enable-vad-latency-measure")&&this.clientVADTracker.setOnClientSideVoiceStartDetected(n)}setOnClientSideVoiceEndDetected(n){be("enable-vad-latency-measure")&&this.clientVADTracker.setOnClientSideVoiceEndDetected(n)}onServerSpeechEndDetected(){return be("enable-vad-latency-measure")?this.clientVADTracker.onServerSpeechEndDetected():null}getLastClientVoiceEndTime(){return be("enable-vad-latency-measure")?this.clientVADTracker.getLastClientVoiceEndTime():null}getLastServerVADLatency(){return be("enable-vad-latency-measure")?this.clientVADTracker.getLastServerVADLatency():null}get isInputMuted(){return this.isMuted}set isInputMuted(n){this.toggleMute(n)}async startAudioCapture(n){this.audioContextManager.isInitialized&&this.stopAudioCapture();try{await this.audioContextManager.initialize({sampleRate:i5()?void 0:a5})}catch(l){throw this.dispatchEvent(new CustomEvent("error",{detail:l})),l}const s=()=>{this.stopAudioCapture(),this.dispatchEvent(new CustomEvent("audioTrackEnded"))},o=l=>{this.dispatchEvent(new CustomEvent("audioData",{detail:l}))},{audioContext:r,audioAnalyser:a}=this.audioContextManager;r&&a&&(this.audioStream=await G2e(o,r,a,n,s),this.isInputMuted&&this.toggleMute(!0),this.volumeTracker.startTracking(a),this.startVoiceDetection())}stopAudioCapture(){if(this.audioStream){for(const n of this.audioStream.getTracks())n.stop();this.audioStream=null}this.volumeTracker.stopTracking(),this.stopVoiceDetection(),this.audioContextManager.cleanup()}toggleMute(n=!this.isMuted){if(this.audioStream)for(const s of this.audioStream.getTracks())s.enabled=!n;this.isMuted!==n&&(this.isMuted=n,this.dispatchEvent(new CustomEvent("muteStateChanged",{detail:n})))}}class r5e extends EventTarget{constructor(){super(...arguments);O(this,"audioContextManager",new SM);O(this,"volumeTracker",new IM("output"));O(this,"outputGainNode",null);O(this,"outputSourceNodes",new Set);O(this,"audioDuration",0);O(this,"nextBufferTime",0);O(this,"audioOffset",0);O(this,"currentPlaybackRate",1);O(this,"startJinglePromise");O(this,"animationSyncPromise");O(this,"audioDelayPromise");O(this,"audioStarted",!1);O(this,"audioChunksLoadDone",!1)}get audioContext(){return this.audioContextManager.audioContext}get audioPlaying(){var n;return((n=this.audioContext)==null?void 0:n.state)==="running"}get audioEnded(){return this.audioChunksLoadDone&&this.outputSourceNodes.size===0}get playbackTime(){if(!this.audioContext||this.audioContext.state==="closed")return 1/0;const{currentTime:n,outputLatency:s}=this.audioContext;return(n-(s||0)-this.audioOffset)*this.currentPlaybackRate}get volume(){return this.volumeTracker.volume}async initialize(n=Rd){var s;this.audioContextManager.isInitialized&&this.stopAudioPlayback(),this.currentPlaybackRate=wM(n);try{await this.audioContextManager.initialize({sampleRate:EM}),(s=this.audioContext)==null||s.suspend()}catch(o){throw this.dispatchEvent(new CustomEvent("error",{detail:o})),ci.onAudioError(),o}this.audioDuration=0,this.nextBufferTime=0,this.audioOffset=0,this.audioStarted=!1,this.audioChunksLoadDone=!1,this.animationSyncPromise=void 0,this.setUpOutputVolumeTracking()}setUpOutputVolumeTracking(){const{audioContext:n,audioAnalyser:s}=this.audioContextManager;!n||!s||(this.outputGainNode=n.createGain(),this.outputGainNode.connect(s),s.connect(n.destination),this.volumeTracker.startTracking(s))}appendAudioData(n){if(!this.audioContext||!this.outputGainNode)return;const s=z2e(n,this.audioContext);this.appendAudioSource(s)}appendAudioSource(n){var r;if(!this.audioContext||!this.outputGainNode||!n.buffer)return;this.outputSourceNodes.add(n),n.connect(this.outputGainNode),n.addEventListener("ended",()=>{var a;this.outputSourceNodes.delete(n),this.outputSourceNodes.size===0&&(this.audioChunksLoadDone?this.stopAudioPlayback():((a=this.audioContext)==null||a.suspend(),ci.onAudioSuspend()))}),this.nextBufferTime<this.audioContext.currentTime&&(this.audioOffset+=this.audioContext.currentTime-this.nextBufferTime,this.nextBufferTime=this.audioContext.currentTime),n.start(this.nextBufferTime);const s=n.buffer.length/n.buffer.sampleRate;this.nextBufferTime+=s,this.audioDuration+=s;const{Animation:o}=ht;!this.audioStarted&&!this.animationSyncPromise&&(this.animationSyncPromise=(r=o.getAnimationSyncPromise())==null?void 0:r.finally(()=>{this.animationSyncPromise=void 0})),this.startPlayback()}async startPlayback(){if(this.startJinglePromise??this.animationSyncPromise??this.audioDelayPromise){const n=ht.currentTurnIndex,s=Promise.all([this.startJinglePromise,this.animationSyncPromise,this.audioDelayPromise]);try{await s}catch(o){o instanceof Error&&(`${o.message}`,void 0)}if(n!==ht.currentTurnIndex)return}if(this.audioContext&&this.audioContext.state!=="closed")try{await this.audioContext.resume(),this.audioStarted||(this.audioStarted=!0,this.dispatchEvent(new CustomEvent("audioStart")),void 0),ci.onAudioResume()}catch(n){this.dispatchEvent(new CustomEvent("error",{detail:n})),ci.onAudioError()}}setAudioDone(){this.audioChunksLoadDone=!0}stopAudioPlayback(){for(const n of this.outputSourceNodes)n.stop();this.outputSourceNodes.clear(),this.setAudioDone(),this.volumeTracker.stopTracking(),this.audioContextManager.cleanup(),this.audioStarted&&(this.audioStarted=!1,this.dispatchEvent(new CustomEvent("audioEnd")))}async playCallStartJingle(){this.startJinglePromise||(this.startJinglePromise=c9(B2e,3e3).finally(()=>{this.startJinglePromise=void 0})),await this.startJinglePromise}async playCallEndJingle(){await c9(F2e,3e3)}setAudioDelayPromise(n){this.audioDelayPromise=Qd(n).finally(()=>{this.audioDelayPromise=void 0})}}class a5e extends EventTarget{constructor(){super(...arguments);O(this,"isAnimationEnabled",!1);O(this,"frameManager",new s5e(()=>ht.AudioOut.playbackTime));O(this,"syncHandler");O(this,"isUseAppearanceComponent",!1);O(this,"animationSyncDeferred");O(this,"appearanceReady",!1);O(this,"emotionData",null);O(this,"characterAppearance",null)}get currentA2EFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentA2EFrame():null}get currentVasaFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentVasaFrame():null}get currentVasaExpFrame(){return this.shouldAnimationPlay?this.frameManager.getCurrentVasaExpFrame():null}get animationEnded(){return ht.AudioOut.audioEnded}get shouldAnimationPlay(){return this.isAnimationEnabled&&!this.animationEnded&&ht.AudioOut.audioStarted}async initSyncHandler(){if(this.isUseAppearanceComponent=H2e(),!!this.isUseAppearanceComponent&&!this.syncHandler){const{AudioAnimationSyncHandler:n}=await B(async()=>{const{AudioAnimationSyncHandler:s}=await import("./dist-esm-index-CknMQCd8.js");return{AudioAnimationSyncHandler:s}},__vite__mapDeps([370,371,1,8,9,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,19,13,30,20,49,17,18,21,22,23,24,10,11,12,25,26,27,28,29,31,16,47,48,187,208,65,66,152,151,178,186,140,137,138,146,144,159,161,164,166,195,68,183,259,253,254,255,124,280]));this.syncHandler=new n("spda2e","volume-based"),this.syncHandler.setAudioInfoProvider({getCurrentTime:()=>ht.AudioOut.playbackTime,getOutputVolume:()=>ht.AudioOut.volume.get()}),this.syncHandler.onFrameMissedInCache(()=>{ci.onCharacterAnimationMissedInCache()}),this.syncHandler.onResume(()=>{ci.onCharacterAnimationResume()})}}async initialize(n=!1){var s;this.stopAnimation(),this.isAnimationEnabled=n,this.isUseAppearanceComponent&&((s=this.syncHandler)==null||s.startTurn())}stopAnimation(){var n;if(this.isUseAppearanceComponent){(n=this.syncHandler)==null||n.interruptTurn();return}this.frameManager.reset(),this.emotionData=null,this.isAnimationEnabled=!1,this.animationSyncDeferred&&this.animationSyncDeferred.reject()}getAnimationSyncPromise(){var n,s;if(this.isAnimationEnabled)return this.isUseAppearanceComponent?(n=this.syncHandler)==null?void 0:n.getAnimationPreparedPromise().then(o=>{o==="timeout"&&ci.onCharacterAnimationTimeout()}):(this.animationSyncDeferred||(this.initializeAnimationSync(),this.checkAnimationSyncPromise()),(s=this.animationSyncDeferred)==null?void 0:s.promise)}initializeAnimationSync(){let n,s;const o=new Promise((l,u)=>{n=l,s=u}),r=Qd(pZ),a=Promise.race([o,r]).finally(()=>{this.animationSyncDeferred=void 0});this.animationSyncDeferred={promise:a,resolve:n,reject:s}}checkAnimationSyncPromise(){var n;this.appearanceReady&&this.frameManager.frameCount>hZ&&((n=this.animationSyncDeferred)==null||n.resolve())}setAnimationDone(){var n,s;this.isUseAppearanceComponent?(n=this.syncHandler)==null||n.finishTurn():this.appearanceReady&&((s=this.animationSyncDeferred)==null||s.resolve())}setAppearanceReady(){this.appearanceReady=!0,this.checkAnimationSyncPromise()}setFrameData(n){var s;!this.isAnimationEnabled||!n.frame||(this.isUseAppearanceComponent?(s=this.syncHandler)==null||s.addFrame(n):(this.frameManager.setFrameData(n),this.checkAnimationSyncPromise()))}setEmotionData(n){this.isUseAppearanceComponent?this.dispatchEvent(new CustomEvent("set-emotion",{detail:n})):this.emotionData=n}setCharacterAppearance(n){this.characterAppearance=n,this.dispatchEvent(new CustomEvent("set-character-appearance"))}}const ai=class ai{constructor(){O(this,"AudioIn",new o5e);O(this,"AudioOut",new r5e);O(this,"Animation",new a5e);O(this,"currentTurnIndex",0)}static getInstance(){return ai.instance||(ai.instance=new ai),ai.instance}};O(ai,"instance",null);let l5=ai;const ht=l5.getInstance(),f9=48,p9=50;function h9(e){const{isNested:t}=e,[n,s]=c.useState(1),[o,r]=c.useState(1),a=c.useRef(void 0),l=c.useRef(void 0),u=Ir(g=>{a.current=g.width,l.current=g.height,s((a.current+f9)/a.current),r((l.current+f9)/l.current)},{initialize:!0}),{volume:d}=ht.AudioOut,m=b7(d,a_),f=el(m,[0,p9],[1,n]),h=el(m,[0,p9],[1,o]);return i.jsx(ge.div,{className:"absolute inset-0",ref:u,initial:Fe,animate:{...nt,transition:{delay:l_}},exit:Fe,children:i.jsx(ge.div,{className:ue("absolute inset-0 flex items-center justify-center overflow-hidden rounded-6xl",t?"-scale-x-100 rounded-5xl blur-lg":"bg-background-100/30 bg-blend-luminosity backdrop-blur-xl after:absolute after:inset-px after:rounded-6xl after:border after:border-transparent dark:bg-background-200/30"),layout:!0,style:{scaleX:f,scaleY:h},children:i.jsx(ge.div,{className:ue("absolute -inset-16 aspect-square bg-gradient-audio-output-light bg-blend-saturation saturate-150 dark:bg-gradient-audio-output-dark dark:saturate-100",t?"animate-spin-slower opacity-20 dark:opacity-30":"animate-spin-slow opacity-40 dark:opacity-50")})})})}function i5e(e){const{dynamicHeight:t}=e;return i.jsx(ge.div,{className:ue("t-bottom-fade absolute bottom-0 mx-4 box-content w-bottom-fade rounded-lg pt-bottom-fade",t?"h-bottom-fade":"h-composer"),initial:Fe,animate:nt,exit:Fe,transition:SC,children:i.jsx(ec,{isBottomFade:!0})})}function c5e(){return M(Wv).map(t=>t.id)}const l5e=c.lazy(()=>B(()=>import("./character-CWoKvrCn.js"),__vite__mapDeps([372,1,373])).then(e=>({default:e.Character})));function u5e(){const[e,t]=Ue(qd),{createConversation:n}=fm(),[s,o]=c.useState(!1),r=se(ew),a=se(hi),l=c5e(),u=c.useRef(null),d=M(Ea);c.useEffect(()=>{if(u.current===null){const v=zue(l);v&&(u.current=v)}},[l]);const{t:m}=q();c.useEffect(()=>{s&&u.current&&D.trackEvent({name:"system",data:{eventName:"characterPromotionShown",eventInfo_characterId:u.current}})},[s]),c.useEffect(()=>{const v=localStorage.getItem(gF);o(!v&&d.length>=10&&d.length<14)},[e,d.length]);function f(v){switch(v){case"mica":return"mica-head";case"aqua":return"aqua-head";case"erin":return"erin-head";default:return"mica-head"}}async function h(){u.current&&(a("clicking"),D.trackEvent({name:"interaction",data:{eventName:"characterPromotionClicked",eventInfo_characterId:u.current}}),r(!0),aQ({settingName:"characterId",oldValue:"",newValue:u.current}),D.setSettings({userSettingCharacterId:u.current}),await Promise.all([kn({path:"/user/settings",args:{options:{method:"PATCH"},body:{preferredCharacter:u.current}}})]))}const g=c.useCallback(async()=>{o(!1)},[]),C=c.useCallback(async()=>{u.current&&(o(!1),r(!0),t(u.current),await n())},[r,t,n]);return s?i.jsx("div",{className:"pointer-events-auto absolute -top-40 end-4 size-56 pb-2",onClick:h,onKeyDown:async v=>{v.key==="Enter"&&await h()},role:"button",tabIndex:0,"aria-label":m("characterAnimation.characterOptInAriaLabelText"),children:i.jsx(l5e,{className:"outline-none",characterId:f(u.current),onCharacterDismissed:g,onCharacterClicked:C})}):null}const TM="0px 0px 0px 1px rgb(255, 255, 255) inset",AM="0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset",d5e="0px 10px 24px 0px rgba(0, 0, 0, 0.18)",m5e="0px 42px 30px 0px rgba(0, 0, 0, 0.06)",f5e="0px 16px 48px 0 rgba(248, 188, 140, 0.18)",p5e="0px 16px 48px 0 rgba(0, 0, 0, 0.12)",h5e="0px 16px 24px 0 rgba(0, 0, 0, 0.08)",g5e="0px 16px 24px 0 rgba(0, 0, 0, 0.16)",v5e=28,C5e=32,y5e=24,b5e=26,x5e="relative flex grow flex-col overflow-hidden before:absolute before:inset-0 before:rounded-3xl before:border-2 before:border-stroke-350",HAe="bg-white/90 dark:bg-background-100/80",S5e="w-auto rounded-3xl contrast-more:border-2",E5e="bg-gradient-to-b from-white/90 to-white/0 dark:from-black/30 dark:to-background-200/10",w5e="bg-white/90 dark:bg-background-100/45";function kM(e){const{title:t,onClick:n,appearDelay:s=rB,appearDuration:o=ts.audio.unavailable,className:r}=e;return i.jsx(ge.div,{layout:"position",initial:"initial",animate:"animate",className:"relative flex h-12 shrink-0 items-center",variants:{initial:{...Fe,scale:.9},animate:{...nt,scale:1,transition:{...i_,delay:s,duration:o}}},children:i.jsx("button",{type:"button",onClick:n,title:t,className:ue("min-w-44",ld,_i.strong,PC["40-base"],LC["40-base"],um,"rounded-2xl before:rounded-2xl",r),children:t})})}const I5e={initial:Fe,animate:nt};function _5e(e){const{titleKey:t,textKey:n,buttonTextKey:s,button:o,cancelButton:r,onClick:a,closeDialogCallback:l}=e,{t:u}=q(),d=u(t),m=u(o.textKey),f=c.useRef(null);return $i(f),i.jsxs(i.Fragment,{children:[i.jsx(ge.div,{ref:f,layout:!0,variants:I5e,initial:"initial",animate:"animate",role:"dialog","aria-label":d,tabIndex:-1,children:i.jsxs("div",{className:"m-3 text-center text-foreground-800",children:[i.jsx("h2",{className:"py-3",children:d}),i.jsx("p",{className:"text-sm",children:u(n)}),s&&i.jsx("div",{className:"mx-auto flex w-full max-w-xs justify-around px-5 py-3 text-accent-600",children:i.jsx("button",{onClick:a,type:"button",className:"text-sm",children:u(s)})})]})}),i.jsxs(ge.div,{className:"relative mx-0.5 my-1 flex w-full items-center justify-center gap-2 px-2 align-middle",children:[r&&i.jsx(ne,{variant:"rect",title:u(r.textKey),className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:()=>{l(),r.onClick()},children:u(r.textKey)}),i.jsx(ne,{variant:"rect",title:m,className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:()=>{l(),o.onClick()},children:m})]})]})}const T5e=1e3,g9=2;function A5e(){const e=eh(),{alreadyShown:t,dismissCoachmark:n}=qo(C2e),[s,o]=Ue(ume),[r,a]=c.useState(!1),l=c.useRef(null),u=e&&!t&&s<g9,d=c.useCallback(()=>{s>=g9&&n(),l.current=setTimeout(()=>{a(!1),l.current=null},T5e)},[n,s]);return c.useEffect(()=>()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),c.useEffect(()=>{u&&(o(m=>m+1),setTimeout(()=>{a(!0)},1e3))},[u,o]),{showStudyLiveCoachmark:r,dismissStudyLiveCoachmark:d}}function k5e(){const e=Pl(),{alreadyShown:t}=qo(Rm),n=W("smart-mode-default"),s=W("smart-mode-coachmark");return{isSmartModeCoachmarkVisible:e&&s&&!t&&!n}}function M5e(){const e=W("vision-coachmark"),{alreadyShown:t,dismissCoachmark:n}=qo(xM),{isSmartModeCoachmarkVisible:s}=k5e();if(!e)return{shouldShowVisionCoachmark:!1,dismissVisionCoachmark:()=>{}};const o=wt(_F,j()),r=24*60*60*1e3*60,a=!o||Date.now()-o>r;return{shouldShowVisionCoachmark:!t&&a&&!s,dismissVisionCoachmark:n}}function N5e({triggerComponent:e}){const{t}=q(),{isOpen:n,title:s,description:o,dismiss:r}=R5e(),a=l=>{l.stopPropagation(),r()};return i.jsx(Pm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:n,placement:"top-end",withArrow:!0,renderReferenceElement:l=>i.jsx("div",{ref:l.ref,className:"relative",children:e}),portalId:"composer-container",onInsideEvent:()=>{r()},onOutsideEvent:r,children:i.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-xs-strong",children:s}),i.jsx("button",{onClick:a,type:"button","aria-label":t("common.dismiss"),children:i.jsx(an,{className:"size-4"})})]}),i.jsx("div",{className:"text-xs",children:o})]})})}function R5e(){const{t:e}=q(),{shouldShowVisionCoachmark:t,dismissVisionCoachmark:n}=M5e(),{showStudyLiveCoachmark:s,dismissStudyLiveCoachmark:o}=A5e();return t?{isOpen:!0,title:e("composer.chatModes.vision.coachmarkTitle"),description:e("composer.chatModes.vision.description"),dismiss:n}:s?{isOpen:!0,title:e("composer.chatModes.study.live.coachmarkTitle"),description:e("composer.chatModes.study.live.coachmarkDescription"),dismiss:o}:{isOpen:!1,title:"",description:"",dismiss:()=>{}}}function yh(){const e=W("composer-v4");return!Gt("kill-composer-v4")&&e}function P5e(e){const{onClick:t}=e;if(!wl())return i.jsx(N5e,{triggerComponent:i.jsx(L5e,{onClick:t})})}function L5e(e){const{onClick:t}=e,{t:n}=q();return yh()?i.jsx(ne,{title:n("composer.startAudioCall"),"aria-label":n("composer.startAudioCall"),variant:"rect",size:"36-sm",color:"subtle-dimmed",className:F("h-9 select-none gap-1 rounded-2xl p-0"),onClick:t,testId:"audio-call-button",children:i.jsx(jp,{className:"size-6","aria-hidden":!0})}):i.jsx(Hs,{data:{title:n("composer.startAudioCall"),testId:"audio-call-button",onClick:t,isVisible:!0},className:_i["subtle-dimmed-inverted"],size:"regular",margins:"my-1",children:i.jsx(jp,{className:"size-6","aria-hidden":!0})})}function v9({config:e}){const{t}=q(),n=yh();if(e)switch(e.mode){case"stop":return i.jsx(ne,{testId:"stop-button",color:"accent",variant:"circle",size:n?"36-sm":"40-base",className:n?"":"my-1","aria-label":t("composer.stopButton"),title:t("composer.stopButton"),onClick:e.onClick,children:i.jsx("div",{className:"size-3.5 rounded bg-accent-550 contrast-more:border-2 dark:bg-accent-150"})});case"submit":return i.jsx(ne,{testId:"submit-button",color:"strong",variant:"square",size:n?"36-sm":"40-base",className:F(n?"rounded-2xl":"my-1 rounded-submitButton"),"aria-label":t("userInput.submitButtonText"),title:t("userInput.submitButtonText"),onClick:e.onClick,disabled:e.disabled,children:i.jsx(Il,{className:"size-6"})});case"microphone":return i.jsx(P5e,{onClick:e.onClick});default:return}}const MM="/static/cmc/assets/checklist-CMKFk-Bk.svg",NM="/static/cmc/assets/coco-BiXU4q_c.svg",RM="/static/cmc/assets/quick-DbAdyS8q.svg",PM="/static/cmc/assets/research-DLTQx7hg.svg",LM="/static/cmc/assets/smart-nS7kuhS0.svg",OM="/static/cmc/assets/study-BpnC_q84.svg",DM="/static/cmc/assets/think-wWCa40yF.svg",jM="/static/cmc/assets/search-BjOz_Dmt.svg",O5e=["chat","reasoning","research"],zAe=["copy","regenerate"];function UM(){const e=W("deep-research"),t=W("deep-research-nano"),n=Qt(),s=M(k1);return e&&(s||!1||!s&&n&&t)&&!re.instance().config().disableDeepResearch}function FM(){const e=M(k1),t=be("kill-composer-reasoning-button");return!e&&t}function D5e({containerRef:e,items:t,itemRefs:n,initialFocusedId:s,onEscape:o,onEnter:r}){const[a,l]=c.useState(s);return hs(u=>{var h,g;const{current:d}=e;if(!d||!d.contains(document.activeElement))return;const m=t.findIndex(({id:C})=>C===a);let f=m;switch(u.key){case"Escape":o==null||o(),u.preventDefault();break;case"ArrowDown":f=Math.min(m+1,t.length-1),u.preventDefault();break;case"ArrowUp":f=Math.max(m-1,0),u.preventDefault();break;case"Enter":a&&(r==null||r(a));break}if(f!==m){const C=(h=t[f])==null?void 0:h.id;C&&(l(C),(g=n.current[C])==null||g.focus())}}),{focusedItemId:a,setFocusedItemId:l}}const j5e=[];function U5e(){const e=Ys(),t=zC(),{t:n}=q(),{dismissCoachmark:s}=qo(Rm),o=W("smart-mode-default"),r=S=>{ye({source:"composerChatModeMenu",customData:JSON.stringify({currentMode:e,newMode:S})}),Zt(S),ho({msg:n("actions.screenReaderSwitchPrefix",{chatMode:md(S)})}),S==="smart"&&s()},a=UM(),l=Pl(),u=W("study-mode"),d=GC(),m=wl(),f=FM(),h=WC();let g=j5e.concat(l&&o?["smart"]:[],["chat"],d?["coco"]:[],f?[]:["reasoning"],l&&!o?["smart"]:[],u?["study"]:[],a?["research"]:[],t?["computerUse"]:[],h?["search"]:[]);m&&(g=g.filter(S=>O5e.includes(S)));const C=c.useRef(null),v=c.useRef({}),y=g.map(S=>({id:S})),{focusedItemId:b,setFocusedItemId:E}=D5e({containerRef:C,items:y,itemRefs:v,initialFocusedId:e,onEnter:S=>r(S)});return i.jsx("div",{className:"pointer-events-auto relative flex flex-col gap-1 rounded-2xl text-sm contrast-more:border-2","data-testid":"composer-mode-menu",role:"radiogroup",ref:C,tabIndex:-1,children:g.map(S=>i.jsx(H5e,{chatMode:S,isSelected:e===S,onSelect:r,focusedItemId:b,setFocusedItemId:E,itemRefs:v},S))})}const F5e={chat:i.jsx(St,{url:RM,className:"size-5"}),reasoning:i.jsx(St,{url:DM,className:"size-5"}),research:i.jsx(St,{url:PM,className:"size-5"}),computerUse:i.jsx(St,{url:MM,className:"size-5"}),smart:i.jsx(St,{url:LM,className:"size-5"}),study:i.jsx(St,{url:OM,className:"size-5"}),search:i.jsx(St,{url:jM,className:"size-5"}),coco:i.jsx(St,{url:NM,className:"size-5"})},B5e=["coco"],V5e=["chat","reasoning","research","computerUse"];function H5e(e){const{chatMode:t,isSelected:n,onSelect:s,focusedItemId:o,setFocusedItemId:r,itemRefs:a}=e,{t:l}=q(),u=c.useRef(null);c.useEffect(()=>{a.current[t]=u.current},[t,a]);const d=B5e.includes(t),m=V5e.includes(t);return i.jsxs("button",{type:"button",ref:u,title:md(t),onClick:()=>s(t),className:ue("flex items-center justify-between gap-4 rounded-xl py-2 pe-4 ps-3.5",_i["subtle-dimmed"]),"data-testid":`${t}-mode-option`,role:"radio","aria-checked":n,tabIndex:t===o?0:-1,onFocus:()=>r(t),children:[i.jsxs("div",{className:"flex items-center gap-3.5",children:[i.jsx("div",{className:"flex size-6 items-center justify-around",children:F5e[t]}),i.jsxs("div",{className:"pe-4 text-left",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsxs("div",{children:[" ",md(t)," "]}),d&&i.jsx(Du,{color:"accent",children:i.jsx("span",{children:l("common.new")})}),t==="computerUse"&&i.jsx(Du,{color:"accent",children:i.jsx("span",{children:l("settings.labs.title")})}),m&&i.jsx(Du,{children:i.jsx("span",{children:l(`composer.chatModes.${t}.latency`)})})]}),i.jsx("div",{className:"text-foreground-600 text-xs dark:text-foreground-700",children:Uie(t)})]})]}),i.jsx(z5e,{isSelected:n})]})}function z5e(e){const{isSelected:t}=e;return i.jsx("div",{className:ue("flex size-5 items-center justify-center rounded-full border-2",t?"border-foreground-800":"border-foreground-450"),children:t&&i.jsx("div",{className:"size-2.5 rounded-full bg-foreground-800 contrast-more:border-2"})})}function G5e(e){const{isChatModeMenuOpen:t,onRef:n,onClick:s,disableChatModeSwitcher:o}=e,{t:r}=q(),a=Ys(),l=u=>{ye({source:"composerChatModeSwitcher",customData:JSON.stringify({currentMode:a,isOpen:t})}),s(u)};return i.jsx(ge.div,{layout:"position",initial:!1,children:i.jsxs(ne,{testId:"chat-mode-switcher",title:r(t?"composer.chatModes.closeModeMenu":"composer.chatModes.openModeMenu"),onClick:l,color:"subtle-dimmed",ref:n,className:"my-1 border border-black/8",disabled:!o,"aria-haspopup":"menu","aria-expanded":t,children:[i.jsx("span",{className:"text-sm",children:md(a)}),i.jsx(ds,{className:ue("size-4",t?"-rotate-90":"rotate-90")})]})})}function BM({triggerComponent:e,offset:t=10,onInsideEvent:n}){const{t:s}=q(),o=qi(),{alreadyShown:r,dismissCoachmark:a}=qo(Rm),l=vT(),u=d=>{d.stopPropagation(),a()};return i.jsx(Pm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:!r,placement:o?"left":"right",offset:t,withArrow:!0,renderReferenceElement:d=>i.jsx(ge.div,{ref:d.ref,className:"relative",children:e}),portalId:"composer-container",onInsideEvent:()=>{n==null||n(),a()},children:i.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-xs-strong",children:s("composer.chatModes.smart.coachmarkTitle")}),i.jsx("button",{onClick:u,type:"button",children:i.jsx(an,{className:"size-4"})})]}),i.jsx("div",{className:"text-xs",children:l.coachmarkDescription})]})})}function W5e({disableChatModeSwitcher:e}){const[t,n]=Ue(L1),s=Pl(),o=W("smart-mode-default"),r=W("smart-mode-coachmark"),{captureFocus:a,restoreFocus:l}=u_(),u=c.useCallback(d=>{n(m=>d?(a(),"chatMode"):m==="chatMode"?(setTimeout(()=>{l()},0),null):m)},[n,a,l]);return i.jsx(bm,{isOpen:t==="chatMode",onIsOpenChange:u,renderTrigger:(d,m)=>{const f=i.jsx(G5e,{isChatModeMenuOpen:m,onRef:d.ref,onClick:d.onClick,disableChatModeSwitcher:e});return s&&r&&!o?i.jsx(BM,{triggerComponent:f,offset:10,onInsideEvent:()=>{u(!0)}}):f},options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0,roleType:"menu"},className:F(Qs,"p-2"),children:i.jsx(U5e,{})})}function $5e({state:e}){const{t}=q(),n=ut(),s=xo(),o=se(bo),r=se(bl),a=se(R1),l=se(KA),u=yh();return i.jsx(Hs,{data:{title:t("composer.goToHome"),testId:"home-button",onClick:async()=>{o(null),r(!1),a(void 0),l(g3.COMPOSER),qt({source:"homeButton"}),await s({to:"/discover",from:n})},isVisible:e!=="hidden",isDisabled:e==="disabled"},size:u?"small":"regular",children:i.jsx(Sm,{className:"size-6","aria-hidden":!0})})}const VM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM12 7C12.4142 7 12.75 7.33579 12.75 7.75V11.25H16.25C16.6642 11.25 17 11.5858 17 12C17 12.4142 16.6642 12.75 16.25 12.75H12.75V16.25C12.75 16.6642 12.4142 17 12 17C11.5858 17 11.25 16.6642 11.25 16.25V12.75H7.75C7.33579 12.75 7 12.4142 7 12C7 11.5858 7.33579 11.25 7.75 11.25H11.25V7.75C11.25 7.33579 11.5858 7 12 7Z"})),GAe=Object.freeze(Object.defineProperty({__proto__:null,default:VM},Symbol.toStringTag,{value:"Module"}));function HM(e){return c.useCallback(t=>{if(t.key==="Enter"&&!t.shiftKey||t.key===" "){t.preventDefault();try{const n=e(t);n instanceof Promise&&n.catch(console.error)}catch(n){console.error("Error in useEnterOrSpaceKeyDown:",n)}}},[e])}const zM=(e={})=>{const{circular:t,axis:n,memorizeCurrent:s=!0,tabbable:o,ignoreDefaultKeydown:r,unstable_hasDefault:a}=e;return D1($L),gp({mover:{cyclic:!!t,direction:q5e(n??"vertical"),memorizeCurrent:s,tabbable:o,hasDefault:a},...r&&{focusable:{ignoreKeydown:r}}})};function q5e(e){switch(e){case"horizontal":return nu.Horizontal;case"grid":return nu.Grid;case"grid-linear":return nu.GridLinear;case"both":return nu.Both;case"vertical":default:return nu.Vertical}}function K5e(e){const t=e.children[0];return t instanceof HTMLElement?t:null}function Z5e(e,t=!0){c.useEffect(()=>{if(t&&e.current){const n=K5e(e.current);n&&n.focus()}},[e,t])}const Tr=e=>i.jsx(Q5e,{...e});Tr.Motion=c.forwardRef(Y5e);function Y5e(e,t){const{children:n,axis:s="vertical",circular:o=!0,tabbable:r,autoFocus:a=!1,...l}=e,u=zM({axis:s,circular:o,tabbable:r}),d=c.useRef(null);return c.useImperativeHandle(t,()=>d.current,[]),$i(d,a),W("a11y-keyboard-navigation")?i.jsx(ge.div,{ref:d,...u,...l,children:n}):i.jsx(ge.div,{ref:d,...l,children:n})}function Q5e(e){const{children:t,axis:n="vertical",circular:s,tabbable:o,autoFocus:r=!1,...a}=e,l=zM({axis:n,circular:s,tabbable:o}),u=c.useRef(null);return Z5e(u,r),W("a11y-keyboard-navigation")?i.jsx("div",{ref:u,...l,...a,children:t}):i.jsx("div",{ref:u,...a,children:t})}const C9="ms-auto me-[2px] size-6 flex-none";function J5e(e,t){const{tab:n,onClick:s,showHighlight:o,showActionIcon:r=!0,onFocus:a,className:l,fallbackIcon:u,titleExtra:d,testId:m}=e,[f,h]=c.useState(!1),{t:g}=q(),C=c.useCallback(()=>{s==null||s({...n,addedToTabSelection:!n.addedToTabSelection})},[s,n]),v=HM(C),y=f||!n.favIconUrl,b=u??Ch;return i.jsxs(Tr.Motion,{className:F(" box-border flex w-full cursor-pointer flex-row items-center rounded-lg p-1.5 active:bg-black/3 safe-hover:bg-black/5 dark:active:bg-white/5 dark:safe-hover:bg-black/30",o&&"bg-black/5 dark:bg-white/8","forced-colors:focus:outline forced-colors:focus:outline-2 forced-colors:focus:outline-black dark:forced-colors:focus:outline-white","contrast-more:focus:outline contrast-more:focus:outline-2 contrast-more:focus:outline-black dark:contrast-more:focus:outline-white",l),onClick:C,tabIndex:0,onKeyDown:v,ref:t,onFocus:a,role:"checkbox","aria-checked":n.addedToTabSelection?"true":"false",tabbable:!0,"aria-label":n.title,"data-testid":m,children:[i.jsx("div",{className:"relative flex size-4 flex-none flex-row items-center rounded-lg bg-black/5",children:y?i.jsx(b,{className:"size-full"}):i.jsx("img",{src:n.favIconUrl,alt:g("composer.multiTabs.tabFavIconAltText"),className:"size-full rounded-[1px] object-cover",onError:()=>{h(!0)}})}),i.jsxs("span",{className:"font-ligatures-none me-7 ms-2 max-h-full truncate text-foreground-850 text-sm",children:[d??n.title,i.jsx("span",{})]}),r&&(n.addedToTabSelection?i.jsx(km,{className:C9}):i.jsx(VM,{className:C9}))]})}const X5e=c.forwardRef(J5e);function eve(e,t){const{groupTitle:n,tab:s,onClick:o,showHighlight:r,showActionIcon:a,onFocus:l,className:u,fallbackIcon:d,titleExtra:m,testId:f}=e;return i.jsxs(i.Fragment,{children:[n?i.jsx("span",{className:"font-semibold text-foreground-850 text-sm",children:n}):null,i.jsx(X5e,{ref:t,tab:s,onClick:o,showHighlight:r,showActionIcon:a,onFocus:l,className:u,fallbackIcon:d,titleExtra:m,testId:f})]})}const tve=c.forwardRef(eve),GM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 9.25C2 5.24594 5.24594 2 9.25 2H12.75C14.102 2 15.2611 2.82552 15.7509 4L13.9747 4C13.6591 3.6907 13.2268 3.5 12.75 3.5H9.25C6.07436 3.5 3.5 6.07436 3.5 9.25V12.75C3.5 13.2268 3.6907 13.6591 4 13.9747V15.75C2.82552 15.2602 2 14.102 2 12.75V9.25ZM5 10.25C5 7.35051 7.35051 5 10.25 5H15.75C17.102 5 18.2611 5.82552 18.7509 7L16.9747 7C16.6591 6.6907 16.2268 6.5 15.75 6.5H10.25C8.17893 6.5 6.5 8.17893 6.5 10.25V15.75C6.5 16.2268 6.6907 16.6591 7 16.9747V18.75C5.82552 18.2602 5 17.102 5 15.75V10.25ZM11.25 8C9.45507 8 8 9.45507 8 11.25V18.75C8 20.5449 9.45507 22 11.25 22H18.75C20.5449 22 22 20.5449 22 18.75V11.25C22 9.45507 20.5449 8 18.75 8H11.25ZM9.5 11.25C9.5 10.2835 10.2835 9.5 11.25 9.5H18.75C19.7165 9.5 20.5 10.2835 20.5 11.25V18.75C20.5 19.7165 19.7165 20.5 18.75 20.5H11.25C10.2835 20.5 9.5 19.7165 9.5 18.75V11.25Z"})),WAe=Object.freeze(Object.defineProperty({__proto__:null,default:GM},Symbol.toStringTag,{value:"Module"})),WM=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 4.5C16.1421 4.5 19.5 7.85786 19.5 12C19.5 16.1421 16.1421 19.5 12 19.5C7.85786 19.5 4.5 16.1421 4.5 12C4.5 11.6236 4.52772 11.2538 4.58123 10.8923C4.64845 10.4382 4.31609 10 3.85708 10C3.48623 10 3.161 10.2562 3.10471 10.6228C3.03576 11.0718 3 11.5317 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C9.69494 3 7.59227 3.86656 6 5.29168V4.25C6 3.83579 5.66421 3.5 5.25 3.5C4.83579 3.5 4.5 3.83579 4.5 4.25V7.25C4.5 7.66421 4.83579 8 5.25 8H8.25C8.66421 8 9 7.66421 9 7.25C9 6.83579 8.66421 6.5 8.25 6.5H6.90093C8.23907 5.25883 10.0309 4.5 12 4.5ZM12.5 7.75C12.5 7.33579 12.1642 7 11.75 7C11.3358 7 11 7.33579 11 7.75V12.25C11 12.6642 11.3358 13 11.75 13H14.75C15.1642 13 15.5 12.6642 15.5 12.25C15.5 11.8358 15.1642 11.5 14.75 11.5H12.5V7.75Z"})),$Ae=Object.freeze(Object.defineProperty({__proto__:null,default:WM},Symbol.toStringTag,{value:"Module"}));function Lm(){const e=M(NX),t=W("edge-multi-tabs-history");return e&&t}const nve=4,sve=10,ove=20,yd={ADD:"add"};function W3(e){return e.sourceType==="history"}function $3(e){return e.sourceType==="opened"}function vo(e){return $3(e)?(e.id??0).toString():e.url??""}function q3(e){return e.sourceType===void 0||e.sourceType===null}function $M(e,t){const n=new Set(e.map(o=>o.id)),s=new Set(t.map(o=>o.id));if(n.size!==s.size)return!0;for(const o of n)if(!s.has(o))return!0;return!1}function qM(e,t=""){const n=t.trim().toLocaleLowerCase();return n===""||!e.title||e.title.toLocaleLowerCase().includes(n)}function KM(e,t=new Map){return t.has(vo(e))}function ZM(e,t){const{selectedTabsSnapshot:n,keyword:s=""}=t??{};return{...e,isInSearchResult:qM(e,s),addedToTabSelection:KM(e,n)}}async function YM(e){const{tabs:t}=await CJ.run(e);return(t==null?void 0:t.map(n=>({...n,sourceType:"history",isInSearchResult:!0})))??[]}async function QM(){const e={maxResults:sve,states:[Kr.RECENT],queries:[]};return(await YM(e)).slice(0,nve)}async function rve(){const{tabs:e}=await hI.run({});return(e==null?void 0:e.map(t=>({...t,sourceType:"opened",isInSearchResult:!0})))??[]}async function ave({isEdgeHistoryEnabled:e=!1,triggeredByMention:t=!1,setUserOpenedTabs:n,setUserHistoryTabs:s,initialSelectedTabsSnapshot:o=new Map}){const[r,a]=await Promise.all([rve(),e?QM():Promise.resolve([])]);n==null||n(r.map(d=>ZM(d,{selectedTabsSnapshot:o})));const l=r.length===0,u=l?a:[];return s==null||s(u),t&&l}function ive(e){return new Map(e.map(n=>[vo(n),{...n,addedToTabSelection:!0}]))}function JM(e,t){const n=ive(e);return Array.from(t.values()).reduce((s,o)=>{const r=vo(o);return s.set(r,{...s.get(r),...o}),s},new Map(n))}async function cve(e,t){let n=[];return e===""?n=t?await QM():[]:n=await YM({queries:[e],states:[Kr.RECENT,Kr.HISTORY],maxResults:ove}),n}async function lve(e,t){let n=[];const s=e.trim(),o=s==="";t.historyTabs&&t.historyTabs.length>0&&(n=t.historyTabs.map(l=>({...l,isInSearchResult:!0,addedToTabSelection:KM(l,t.userAddedTabs)})));const r=new Map([...t.userAddedTabs.values()].map(l=>[vo(l),{...l,isInSearchResult:qM(l,s)}])),a=t.userOpenedTabs.map(l=>ZM(l,{selectedTabsSnapshot:t.userAddedTabs,keyword:s}));return{userAddedTabsFiltered:r,userOpenedTabsFiltered:a,historyTabsFiltered:n,isEmptyKeyword:o}}function uve(e,t){switch(t.type){case"SET_DRAFT_SELECTED_TABS":return{...e,userDraftSelectedTabs:t.payload};case"SET_TABS_INITIALIZED":return{...e,isTabsInitialized:t.payload};case"SET_USE_RECENT_HISTORY":return{...e,isUseRecentHistoryEnabled:t.payload};case"MERGE_DRAFT_SELECTION":return{...e,userDraftSelectedTabs:JM(t.payload,e.userDraftSelectedTabs)};default:return e}}function dve(e){const{text:t}=e;return t?i.jsx("span",{className:"-ms-0.5 h-8 leading-8 text-foreground-850 text-sm",role:"status",children:t}):null}function mve(e){if(q3(e))return GM;if(W3(e))return WM}function y9(e,t=!1){const n=z("composer.multiTabs.openTabs");if(W3(e)){const s=z("composer.multiTabs.recentlyClosedTabs"),o=z("composer.multiTabs.historyTabs");return t?s:o}return $3(e)?n:""}function fve(e,t){let n=!1,s=!1;return o=>{if(e){if(W3(o)&&!n)return n=!0,y9(o,t);if($3(o)&&!s)return s=!0,y9(o,t)}}}function pve(e){const{tabs:t,onItemClick:n,highlightedIndex:s,activeMenuItemRef:o,onItemFocus:r,emptyStateText:a,isUseRecentHistoryEnabled:l=!1}=e,u=Lm(),d=M(Gi);if(t.length===0)return i.jsx(dve,{text:a});const m=fve(u,l);return i.jsx(i.Fragment,{children:t.map((f,h)=>i.jsx(tve,{tab:f,onClick:n,showHighlight:s===h,onFocus:()=>r==null?void 0:r(h),showActionIcon:!d,className:F(!d&&"py-2"),ref:h===s?o:null,groupTitle:m(f),fallbackIcon:mve(f),testId:`multi-tabs-menu-item-${h}`},vo(f)))})}function XM(e){const{highlightedIndex:t,activeMenuItemRef:n,onMenuItemClick:s,onFocus:o,tabs:r,emptyStateText:a,isUseRecentHistoryEnabled:l=!1}=e,u=M(Gi);return i.jsxs("div",{className:F("relative flex w-full overflow-hidden",u?"mb-0 mt-3":"my-3"),children:[i.jsx("div",{className:F("t-custom-scrollbar flex w-full flex-col gap-y-1 overflow-y-auto overflow-x-hidden p-1"),"data-testid":"multi-tabs-menu-items-container",children:i.jsx(pve,{tabs:r,onItemClick:s,highlightedIndex:t,activeMenuItemRef:n,onItemFocus:o,emptyStateText:a,isUseRecentHistoryEnabled:l})}),r.length>=4&&u&&i.jsx("div",{className:F("pointer-events-none absolute inset-x-0 bottom-0 h-8 rounded-b-lg px-4","bg-gradient-composer-tabs-menu-mask-light dark:bg-gradient-composer-tabs-menu-mask-dark")})]})}function eN(e){const{mode:t,disabled:n,onClick:s}=e,{t:o}=q(),r=o("composer.multiTabs.browserTabMenuShareButton"),a=o("composer.multiTabs.browserTabMenuShareButtonForUpdate"),l=t===yd.ADD?r:a;return i.jsx(ne,{title:l,className:"mx-auto mt-auto w-full flex-none",disabled:n,testId:"multi-tabs-share-button",onClick:s,color:"strong",size:"48-lg","aria-label":l,children:l})}function tN(e){const{mode:t,onClose:n}=e,s=M(Gi),{t:o}=q(),r=Lm(),a=o("common.closeText"),l=c.useMemo(()=>r?t===yd.ADD?o("composer.multiTabs.browserTabMenuTitleWithHistory"):o("composer.multiTabs.browserTabMenuTitleForUpdateWithHistory"):t===yd.ADD?o("composer.multiTabs.browserTabMenuTitle"):o("composer.multiTabs.browserTabMenuTitleForUpdate"),[r,t,o]);return i.jsxs("div",{className:"flex w-full items-center justify-between pt-2",children:[i.jsx("span",{className:"text-foreground-900 text-sm",children:l}),!s&&i.jsx(ne,{color:"subtle-dimmed",title:a,size:"32-xs",onClick:n,"aria-label":a,children:i.jsx(an,{className:"size-5 cursor-pointer"})})]})}const b9="";function nN(e){const{onChange:t,defaultValue:n}=e,{t:s}=q(),[o,r]=c.useState(n??b9),a=c.useRef(null),l=Lm(),u=()=>{var g;(g=a.current)==null||g.focus(),r(b9)},d=HM(u),m=c.useCallback(g=>{r(g.target.value)},[]);c.useEffect(()=>{t==null||t(o)},[t,o]),c.useEffect(()=>{a.current&&requestAnimationFrame(()=>{var g;(g=a.current)==null||g.focus()})},[a]);const f=s(l?"composer.multiTabs.browserTabMenuSearchPlaceholderWithHistory":"composer.multiTabs.browserTabMenuSearchPlaceholder"),h=s("composer.multiTabs.browserTabMenuSearchClear");return i.jsxs("div",{className:"mt-3 flex h-8 w-full flex-row items-center rounded-3xl bg-white/60 dark:bg-black/60",children:[i.jsx(U3,{className:"mx-2 size-4"}),i.jsx("input",{type:"text",id:"browser-tab-search",autoComplete:"off",spellCheck:!1,autoCorrect:"off",className:"w-full flex-1 rounded-lg bg-transparent py-2 text-sm focus:outline-none",placeholder:f,"aria-label":f,onChange:m,value:o,maxLength:100,ref:a}),o&&i.jsx("div",{role:"button",tabIndex:0,className:"me-1 ms-auto h-6 cursor-pointer rounded-xl border border-midnight-250 bg-midnight-200 px-3 py-1 text-foreground-800 text-xs dark:border-white/50 dark:bg-white/5",onKeyDown:d,onClick:u,"aria-label":h,children:h})]})}function sN(e,t=1e3){const n=c.useRef(null);return n.current=e,c.useMemo(()=>uC((...r)=>{var a;(a=n.current)==null||a.call(n,...r)},t),[t])}const hve={id:-1,title:"",addedToTabSelection:!1,isInSearchResult:!0,sourceType:null,active:!1,highlighted:!1,pinned:!1,selected:!1,incognito:!1,autoDiscardable:!0,discarded:!1,index:-1,windowId:-1,groupId:-1};function oN(e={}){return{...hve,...e}}const Uf=20,gve=oN({sourceType:null});function vve(e,t){const{t:n}=q(),s=c.useMemo(()=>e.filter(u=>u.isInSearchResult),[e]),o=c.useMemo(()=>{const l=Math.min(s.length,Uf);return t&&l>1&&l<Uf?{...gve,title:n("composer.multiTabs.allTabs",{count:l}),isInSearchResult:!0}:null},[s.length,n,t]),r=c.useCallback(()=>e.map(l=>({...l,addedToTabSelection:s.slice(0,Uf).some(u=>u.id===l.id)})),[s,e]),a=c.useMemo(()=>o?[o,...s]:s,[s,o]);return{appearedTabs:s,getUpdatedTabsBySpecialTab:r,specialTab:o,appearedTabsWithSpecialTab:a}}function rN(e){const t=c.useRef(0),n=c.useCallback(async()=>{const s=window.innerHeight;s!==t.current&&(t.current=s,await e(s))},[e]);Ir(n,{initialize:!0},document.documentElement)}const Cve=.2,yve=.2,bve=50,xve=594,Sve=46,Eve=360,wve=240;function Ive(){Ge.emit("edge:try-grow-content-height",xve)}function _ve(e){const t=new Map;for(const n of e)n.id&&n.addedToTabSelection&&t.set(n.id.toString(),n);return t}function Tve(e){const{styles:t,onRef:n,onSave:s,onClose:o=()=>{},outsideClickElements:r=[],originElement:a,mode:l=yd.ADD}=e,[u,d]=Ue(Vo),m=c.useRef(new Map(u)),f=c.useRef(null),[h,g]=c.useState([]),[C,v]=c.useState(0),y=c.useRef(null),{t:b}=q(),E=c.useDeferredValue([...h]),S=M(Gi),{appearedTabsWithSpecialTab:I,getUpdatedTabsBySpecialTab:_}=vve(E,S),T=m.current,[A,k]=c.useState(0),[N,P]=c.useState(!1),V=c.useCallback(()=>{if(f.current&&a&&a.current){const ae=a.current.getBoundingClientRect();k(ae.top-Sve)}},[k,a]);rN(()=>{Ive(),V()}),c.useEffect(()=>{P(!1);async function ae(){const{tabs:Se}=await hI.run({});if(Se&&Se.length>0){const Me=[];for(const Oe of Se)Oe.id&&Me.push({...Oe,addedToTabSelection:T.has(Oe.id.toString()),isInSearchResult:!0,sourceType:"opened"});g(Me)}}ae().catch(console.error).finally(()=>{P(!0)})},[T]),c.useLayoutEffect(()=>{f.current&&N&&V()},[V,N]);const U=c.useMemo(()=>h.filter(ae=>ae.addedToTabSelection),[h]),K=c.useMemo(()=>U.length>Uf,[U]),Q=c.useCallback(ae=>{n==null||n(ae),f.current=ae},[n]),Z=c.useCallback(ae=>{const Se=_ve(ae);d(Se);const Me=Array.from(Se.values()),Oe=$M(Me,[...T.values()]);s==null||s(Me,Oe)},[T,s,d]),Y=c.useCallback(()=>{K||Z(h)},[K,Z,h]),X=c.useCallback(ae=>{g(Se=>Se.map(Oe=>Oe.id===ae.id?ae:Oe))},[]),$=sN(c.useCallback(ae=>{g(Se=>Se.map(Me=>({...Me,isInSearchResult:Me.title?Me.title.toLowerCase().includes(ae.toLowerCase().trim()):!0})))},[]),TI),ee=c.useCallback(ae=>{v(Se=>ae==="up"?Se>0?Se-1:I.length-1:Se<I.length-1?Se+1:0)},[v,I]);c.useEffect(()=>{y.current&&C>=0&&(y.current.scrollIntoView({block:"nearest"}),S||y.current.focus())},[C,y,S]);const te=c.useCallback(ae=>{let Se=[];q3(ae)?Se=_():Se=h.map(Me=>Me.id===ae.id?{...ae,addedToTabSelection:!0}:Me),g(Se),Z(Se)},[_,Z,h]),G=c.useCallback(ae=>{var Se;if(["ArrowUp","ArrowDown"].includes(ae.code))ae.preventDefault(),ee(ae.code==="ArrowUp"?"up":"down");else if(ae.code==="Enter"){ae.preventDefault();const Me=I[C];Me&&te({...Me,addedToTabSelection:!0})}else ae.code==="Tab"&&((Se=f.current)==null||Se.focus())},[ee,C,I,te]),ie=c.useMemo(()=>uC(G,bve),[G]);c.useEffect(()=>(Ge.on("multi-tabs:search",$),Ge.on("multi-tabs:key-down",ie),()=>{Ge.off("multi-tabs:search",$),Ge.off("multi-tabs:key-down",ie)}),[ie,$]),go({onOutsideEvent:o,elements:[f,...r],invokeOnce:!1,shouldAttachListeners:!0,includeFocus:S});const xe=c.useMemo(()=>S?wve:Eve,[S]),ce=c.useMemo(()=>({maxHeight:`${A>xe?xe:A}px`,...t}),[A,xe,t]);return hs(ae=>{ae.key==="Escape"&&(ae.stopPropagation(),ae.preventDefault(),o())}),i.jsxs(Tr.Motion,{className:F(ct.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white p-4 shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 dark:border-white/10","bg-gradient-composer-tabs-menu-light dark:bg-gradient-composer-tabs-menu-dark","bg-blend-normal","forced-colors:bg-stroke-150 dark:forced-colors:bg-background-150","contrast-more:bg-stroke-150 dark:contrast-more:bg-background-150",S?"px-4 pb-1.5 pt-4":"p-4"),style:ce,tabbable:!0,tabIndex:0,ref:Q,"data-testid":"composer-multi-tabs-menu",initial:"start",animate:"end",variants:{start:Fe,end:{...nt,transition:{duration:Cve,delay:yve}}},onKeyDown:S?void 0:G,"data-outside-events-ignore":S?"":void 0,children:[i.jsx(tN,{mode:l,onClose:o}),!S&&i.jsx(nN,{onChange:$}),i.jsx(XM,{highlightedIndex:C,onFocus:v,activeMenuItemRef:y,onMenuItemClick:S?te:X,tabs:I,emptyStateText:h.length===0?b("composer.multiTabs.noTabsOpen"):b("composer.multiTabs.noTabsFound")}),!S&&i.jsx(eN,{mode:l,disabled:K,onClick:Y})]})}const aN=R([]),iN=R([]),Ave=R(e=>{const t=e(aN),n=e(iN),s=new Map;for(const o of t)o.id&&s.set(vo(o),o);for(const o of n)o.url&&!t.some(r=>r.url===o.url)&&s.set(vo(o),o);return[...s.values()]}),kve=R(e=>{const t=e(Ave),n=e(Vo),s=e(Gi),o=new Map;for(const r of t)r.isInSearchResult&&o.set(vo(r),r);if(!s)for(const[r,a]of n)a.isInSearchResult&&o.set(r,a);return[...o.values()]}),u5=20,x9={opened:0,history:1},Mve=oN({sourceType:null});function Nve(){const{t:e}=q(),t=M(Gi),n=Lm(),[s,o]=Ue(aN),r=se(iN),[a,l]=Ue(Vo),u=c.useRef(new Map(a)),d=M(kve),[m,f]=c.useReducer(uve,{isTabsInitialized:!1,isUseRecentHistoryEnabled:!1,userDraftSelectedTabs:u.current}),h=e("composer.multiTabs.noTabsOpen"),g=e("composer.multiTabs.noTabsFound"),C=c.useMemo(()=>d.map(_=>({..._,addedToTabSelection:m.userDraftSelectedTabs.has(vo(_))})),[d,m.userDraftSelectedTabs]),v=c.useMemo(()=>{const I=Math.min(C.length,u5);return t&&I>1&&I<u5?{...Mve,title:e("composer.multiTabs.allTabs",{count:I}),isInSearchResult:!0}:null},[C.length,e,t]),y=c.useMemo(()=>{const I=[...C].sort((_,T)=>(_.lastAccessed??0)-(T.lastAccessed??0)).sort((_,T)=>(x9[_.sourceType]??0)-(x9[T.sourceType]??0));return!v||n?I:[v,...I]},[C,v,n]),b=c.useMemo(()=>n?g:d.length===0?h:g,[n,g,h,d.length]),E=c.useCallback(I=>$M(I,[...u.current.values()]),[]),S=c.useCallback(async I=>{const _=n?await cve(I.trim(),s.length===0):[],{userAddedTabsFiltered:T,userOpenedTabsFiltered:A,historyTabsFiltered:k,isEmptyKeyword:N}=await lve(I,{userAddedTabs:a,userOpenedTabs:s,historyTabs:_});n&&(f({type:"SET_USE_RECENT_HISTORY",payload:N&&t}),r(k)),l(T),o(A)},[n,l,r,o,t,a,s]);return c.useEffect(()=>{f({type:"SET_USE_RECENT_HISTORY",payload:!1}),ave({isEdgeHistoryEnabled:n,triggeredByMention:t,setUserOpenedTabs:o,setUserHistoryTabs:r,initialSelectedTabsSnapshot:u.current}).then(I=>{f({type:"SET_USE_RECENT_HISTORY",payload:I})}).catch(I=>{}).finally(()=>{f({type:"SET_TABS_INITIALIZED",payload:!0})})},[n,r,o,t]),c.useEffect(()=>()=>{r([]),o([])},[r,o]),{triggeredByMention:t,isEdgeHistoryEnabled:n,checkSelectedTabsHaveChanged:E,appearedTabsWithSpecialTab:y,userOpenedTabs:s,menuContentEmptyStateText:b,setUserAddedTabs:l,searchTabs:S,appearedTabs:C,specialTab:v,isUseRecentHistoryEnabled:m.isUseRecentHistoryEnabled,isTabsInitialized:m.isTabsInitialized,userDraftSelectedTabs:m.userDraftSelectedTabs,setUserDraftSelectedTabs:I=>{f({type:"SET_DRAFT_SELECTED_TABS",payload:I})}}}const Rve=.2,Pve=.2;function Lve(e){return Array.from(e.values()).map(t=>({...t,addedToTabSelection:!0,isInSearchResult:!0}))}const Ove=594,Dve=46,jve=360,Uve=240;function Fve(){Ge.emit("edge:try-grow-content-height",Ove)}function Bve(e){const{styles:t,onRef:n,onSave:s,onClose:o=()=>{},originElement:r,mode:a=yd.ADD,outsideClickElements:l=[]}=e,u=c.useRef(null),[d,m]=c.useState(0),f=c.useRef(null),[h,g]=c.useState(0),{appearedTabsWithSpecialTab:C,isUseRecentHistoryEnabled:v,triggeredByMention:y,menuContentEmptyStateText:b,searchTabs:E,setUserAddedTabs:S,checkSelectedTabsHaveChanged:I,userDraftSelectedTabs:_,isTabsInitialized:T,setUserDraftSelectedTabs:A,appearedTabs:k}=Nve(),N=_.size>u5,P=c.useCallback(G=>{n==null||n(G),u.current=G},[n]),V=c.useCallback(G=>{const ie=Lve(G);S(new Map(ie.map(ce=>[vo(ce),ce])));const xe=I(ie);s==null||s(ie,xe)},[I,s,S]),U=c.useCallback(()=>{N||V(_)},[N,V,_]),K=sN(E,TI),Q=c.useCallback(()=>{if(u.current&&r&&r.current){const G=r.current.getBoundingClientRect();g(G.top-Dve)}},[g,r]);rN(()=>{Fve(),Q()}),c.useLayoutEffect(()=>{u.current&&T&&Q()},[Q,T]),c.useEffect(()=>{f.current&&d>=0&&f.current.scrollIntoView({block:"nearest"})},[d,f]);const Z=c.useCallback(G=>{m(ie=>G==="up"?ie>0?ie-1:C.length-1:ie<C.length-1?ie+1:0)},[m,C]),Y=c.useCallback(G=>{const ie=vo(G),xe=_.has(ie),ce=G.addedToTabSelection;if(xe!==ce){const ae=new Map(_);ce?ae.set(ie,G):ae.delete(ie),A(ae)}},[A,_]),X=c.useCallback(G=>{const ie=q3(G)?k:[G],xe=JM(ie,_);A(xe),V(xe)},[k,A,V,_]),$=c.useCallback(G=>{var ie;if(["ArrowUp","ArrowDown"].includes(G.code))G.preventDefault(),Z(G.code==="ArrowUp"?"up":"down");else if(G.code==="Enter"){G.preventDefault();const xe=C[d];xe&&X({...xe,addedToTabSelection:!0})}else G.code==="Tab"&&((ie=u.current)==null||ie.focus())},[Z,d,C,X]);c.useEffect(()=>(Ge.on("multi-tabs:search",K),Ge.on("multi-tabs:key-down",$),()=>{Ge.off("multi-tabs:search",K),Ge.off("multi-tabs:key-down",$)}),[$,K]);const ee=c.useMemo(()=>y?Uve:jve,[y]),te=c.useMemo(()=>({maxHeight:`${h>ee?ee:h}px`,...t}),[h,ee,t]);return go({onOutsideEvent:o,elements:[u,...l],invokeOnce:!1,shouldAttachListeners:!0,includeFocus:y}),i.jsxs(Tr.Motion,{className:F(ct.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white bg-gradient-composer-tabs-menu-light p-4 bg-blend-normal shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 contrast-more:bg-stroke-150 dark:border-white/10 dark:bg-gradient-composer-tabs-menu-dark dark:contrast-more:bg-background-150 forced-colors:bg-stroke-150 dark:forced-colors:bg-background-150",y?"px-4 pb-1.5 pt-4":"p-4"),style:te,tabbable:!0,tabIndex:0,"data-testid":"composer-multi-tabs-menu",initial:"start",animate:"end",ref:P,variants:{start:Fe,end:{...nt,transition:{duration:Rve,delay:Pve}}},onKeyDown:y?void 0:$,children:[i.jsx(tN,{mode:a,onClose:o}),!y&&i.jsx(nN,{onChange:K}),i.jsx(XM,{highlightedIndex:d,onFocus:m,activeMenuItemRef:f,onMenuItemClick:y?X:Y,tabs:C,emptyStateText:b,isUseRecentHistoryEnabled:v}),!y&&i.jsx(eN,{mode:a,disabled:N,onClick:U})]})}function Vve(e){return Lm()?i.jsx(Bve,{...e}):i.jsx(Tve,{...e})}const cN=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M2 6.25C2 4.45507 3.45507 3 5.25 3H18.75C20.5449 3 22 4.45507 22 6.25V12H20.5V6.25C20.5 5.2835 19.7165 4.5 18.75 4.5H5.25C4.2835 4.5 3.5 5.2835 3.5 6.25V15.75C3.5 16.7165 4.2835 17.5 5.25 17.5H11V19H5.25C3.45507 19 2 17.5449 2 15.75V6.25ZM14 13C12.8954 13 12 13.8954 12 15V20C12 21.1046 12.8954 22 14 22H21C22.1046 22 23 21.1046 23 20V15C23 13.8954 22.1046 13 21 13H14Z"})),qAe=Object.freeze(Object.defineProperty({__proto__:null,default:cN},Symbol.toStringTag,{value:"Module"}));function Hve(e){const{onClick:t}=e,{t:n}=q();return i.jsx(Hs,{data:{title:n("videoCard.pictureInPicture.miniPlayer"),testId:"trigger-picture-in-picture",isVisible:!0,onClick:t},children:i.jsx(cN,{className:"size-6","aria-hidden":!0})})}function lN(e){const{provider:t="microsoft",scenario:n,from:s}=e,o=Dl(),r=xo(),{login:a}=Xi();return c.useCallback(async()=>{if(n&&qt({source:"signin",scenario:n}),o){await r({from:s,to:"/login"});return}await a({provider:t})},[s,r,o,a,t,n])}function zve(){const{t:e}=q(),t=Qt(),n=lN({scenario:"voice",from:"/"});if(!t)return i.jsx(kM,{className:"mx-2",title:e("voice.signUpOrLogin"),onClick:n})}function K3(){const e=M(MX),t=W("edge-multi-tabs-reverse");return e&&!t}const Gve=$e();function Wve(){const e=K3(),[t,n]=c.useState("add"),[s,o]=c.useState(!1),[r,a]=Ue(RX),[l,u]=c.useState(!1),[d,m]=Ue(Gi),f=se(Vo),{refs:h,floatingStyles:g}=MC({placement:"top-start",strategy:"absolute",whileElementsMounted:Ta,middleware:[fa(()=>({mainAxis:6,crossAxis:0})),pa({padding:12}),R_({apply({rects:S,elements:I}){Object.assign(I.floating.style,{width:`${S.reference.width}px`})}})]}),C=c.useCallback(async S=>{const{isTrigger:I,keyword:_}=S;m(I),I&&(Ge.emit("multi-tabs:search",_),n("add")),a(I)},[m,a]),v=c.useCallback(()=>{d&&(m(!1),Ge.emit("mention:cancel","ignore")),a(!1)},[d,m,a]),y=c.useCallback(()=>{d&&(Ge.emit("mention:cancel","remove"),m(!1)),a(!1),u(!0),o(!0),Ge.emit("edge:maybe-fetch-page-context","onSaveMultiTabs")},[d,m,a]),b=c.useCallback(S=>e&&r&&d?(Ge.emit("multi-tabs:key-down",S),!0):!1,[d,e,r]),E=()=>d&&r&&e;return c.useEffect(()=>{const S=Gve.sub(je,()=>{a(!1),u(!1),m(!1),f(new Map)});return()=>{S()}},[f,m,a]),c.useEffect(()=>{const S=()=>{o(!1)};return Ge.on("edge:multi-tabs-context-fetched-complete",S),()=>{Ge.off("edge:multi-tabs-context-fetched-complete",S)}},[]),{isMultiTabsMenuExpanded:r,floatingStyles:g,edgeTabMenuRefs:h,setIsMultiTabsMenuExpanded:a,isShowMultiTabsPreviewCard:l,setIsShowMultiTabsPreviewCard:u,handleMentionEvent:C,isMentionTriggered:d,handleMultiTabsMenuSaveBtnEvent:y,handleMultiTabsMenuCloseBtnEvent:v,handleUserInputEnterEvent:E,handleUserInputKeydownEvent:b,multiTabsMenuMode:t,setMultiTabsMenuMode:n,isFetchingTabsPageContext:s}}function $ve(){const e=W("pay-shopify-checkout"),t=W("pay-native-checkout"),n=W("pay-webview-checkout"),s=W("pay-marketplace"),o=W("pay-buy-for-me"),r=W("pay-paypal-integration");return e||t||n||s||o||r}const qve=(e,t=0)=>{const n=se(IX);return Ir(o=>{const r=e==="app"?document.getElementById("app"):e.current;r&&(n(o.height),r.style.setProperty("--composer-container-height",`${o.height+t}px`))})};function Kve(){const{contentPageType:e}=ka(),t=M(Md),n=c.useCallback(()=>{ye({pageName:e,source:"streamlinedComposer",scenario:"clickComposer",customData:JSON.stringify({isChatSidePaneOpened:t})})},[e,t]),s=c.useCallback(()=>{ye({pageName:e,source:"newsComposerInput",scenario:"newsClickNavigateToChat",customData:JSON.stringify({isChatSidePaneOpened:t})})},[e,t]);return{trackConsumptionPageComposerClick:n,trackConsumptionPageComposerSubmit:s}}const uN=R(0),dN=R(),mN=R(),KAe=R({}),ZAe=R({lastPosition:0,wasPlaying:!1}),Hl="daily";function YAe(){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"personalizeButton",eventInfo_clickScenario:"",eventInfo_pageName:Hl}})}function QAe(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Select",eventInfo_clickScenario:e,eventInfo_pageName:Hl}})}function JAe(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_UnSelect",eventInfo_clickScenario:e,eventInfo_pageName:Hl}})}function XAe(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Save",eventInfo_clickScenario:e.join(","),eventInfo_pageName:Hl}})}function eke(){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Later",eventInfo_clickScenario:"",eventInfo_pageName:Hl}})}const d5={Podcast:"podcastPlayer",DailyBriefing:"dailyBriefingPlayer"},Uu={Daily:Hl,Podcast:"podcast"},jr={Skip:"skip",Rewind:"rewind",Play:"play",Pause:"pause",Next:"next",Previous:"previous",Playback:"playback",Mute:"mute",Unmute:"unmute",Expand:"expand",Collapse:"collapse"};function Ga(e,t,n){ye({source:e,pageName:e===d5.Podcast?Uu.Podcast:Uu.Daily,scenario:t,customData:n})}function fN(e){const{url:t,podcastId:n,schema:s,includeTranscripts:o=!1}=e,r={...n&&{podcastId:n},includeTranscripts:String(!!o)};return Ct(t,s,{query:r}).then(a=>a.data)}function Zve(e,t,n,s,o){return s&&n?{url:`/sharing/podcasts/${n}`,schema:lp}:!e&&!o?null:t?{url:`/podcasts/${t}/${e}`,schema:lp}:{url:"/daily-briefing",podcastId:e,includeTranscripts:!s,schema:wE}}function Yve(){const{podcastId:e,podcastType:t,shareId:n}=$p({strict:!1}),s=M(dN),o=e??s,r=lh(),a=!!e||r,l=W("1s-dbrief-fetchall"),u=se(mN),d=Zve(o,t,n,a,l),m=c.useCallback(()=>{if(!d)throw new Error("Media key is not defined");return fN(d)},[d]),{data:f,isLoading:h,error:g}=Ms({queryKey:["dailyBriefingMedia",o,a,n,t,l],enabled:!!d,queryFn:m,staleTime:4e3});c.useEffect(()=>{if(f&&a){const y=lp.parse(f);u(y.podcastId)}},[f,a,u]);const C=()=>a?t?`${Uu.Podcast}.${t}`:Uu.Podcast:Uu.Daily;if(f&&a){const y=lp.parse(f),{isAvailable:b,podcastId:E,chapters:S,playback:{positionInSeconds:I,chapterId:_}}=y,T=n?`/sharing/podcasts/${n}/Files`:`/podcasts/${t}/${E}/Files`,A=S.map(({id:P,title:V,image:U,audio:K})=>({id:P,title:V,image:{landscape:{...U.landscape,url:`${T}/${U.landscape.name}`},portrait:{...U.portrait,url:`${T}/${U.portrait.name}`}},audio:K})),k={isAvailable:b,podcastId:E,chapters:A.map(P=>({...P,audio:{default:{url:`${T}/${P.audio.name}`,duration:P.audio.duration,transcript:null}},transitionMusic:null,sources:[]})),playback:{position:I,chapterId:_}},N={...y,chapters:A};return{data:k,podcastData:N,isPodcast:a,isLoading:h,error:g,pageImpressionKey:C()}}return{data:!a&&f?wE.parse(f):void 0,isPodcast:a,isLoading:h,error:g,pageImpressionKey:C()}}function tke(){const{data:e}=Ms({queryKey:["dailyBriefingTopics"],queryFn:()=>fN({url:"/daily-briefing/topics",schema:EE})});return{data:e}}async function nke(e,t){await kn({path:"/daily-briefing/topics/unfollow",args:{body:{ids:t}}}),await kn({path:"/daily-briefing/topics/follow",args:{body:{ids:e}}})}const Qve=1;function Jve(){const e=xo(),t=se(bo),n=se(dN),[s,o]=Ue(uN),r=W("1s-dbrief-fetchall"),{firstStoryId:a,formCode:l}=qL({strict:!1}),u=c.useCallback(async()=>{await e({from:"/daily",to:"/discover"}),n(void 0),t(null)},[n,t,e]),d=c.useCallback(async h=>{if(l&&D.setFormCode(l),a){const g=h.split(",");if(g.length>=2){g[Qve]=a;const C=g.join(",");n(C)}else n(h)}else n(h);o(0),t("daily-briefing-player"),await e({from:"/",to:"/daily",search:{firstStoryId:a,...r&&h&&{chapterIds:h}}})},[l,a,o,t,e,r,n]),m=c.useCallback(async()=>{o(s),await e({from:"/daily",to:"/topic-selection"}),t(null)},[t,o,s,e]),f=c.useCallback(async()=>{o(s),t("daily-briefing-player"),await e({from:"/topic-selection",to:"/daily"})},[s,o,t,e]);return{navigateToDailyBriefing:d,navigateToTopicSelection:m,exitDailyBriefing:u,returnToDailyBriefing:f,currentChapterIndex:s}}function Xve({media:e,thresholds:t,key:n}){const s=c.useRef(0),o=c.useRef([]),r=c.useRef(new Set);return c.useEffect(()=>{o.current=(t==null?void 0:t.sort((a,l)=>a.seconds-l.seconds))??[]},[t]),c.useEffect(()=>{s.current=0,r.current=new Set;let a=null;if(!e)return()=>{};function l(){a=performance.now()}function u(h){if(a!==null){const g=(performance.now()-a)/1e3;s.current+=g,a=h?performance.now():null,f()}}function d(){u(!1)}function m(){u(!0)}const f=()=>{for(let h=0;h<o.current.length;h+=1){const g=o.current[h];g&&s.current>=g.seconds&&!r.current.has(h)&&(r.current.add(h),g.callback())}};return e.addEventListener("playing",l),e.addEventListener("pause",d),e.addEventListener("ended",d),e.addEventListener("timeupdate",m),()=>{e.removeEventListener("playing",l),e.removeEventListener("pause",d),e.removeEventListener("ended",d),e.removeEventListener("timeupdate",m)}},[e,n]),{totalTimePlayedRef:s}}function Fu(e){if(!e)return NaN;const t=e.split(":");if(t.length!==2)return NaN;const[n,s]=t,o=Number(n),r=Number(s);return o<0||r<0||r>=60?NaN:o*60+r}function eCe(e,t,n,s){var o,r;return e===n.length-1&&t===s.length-1?1/0:t===s.length-1?Fu((o=n[e+1])==null?void 0:o.startTime):Fu((r=s[t+1])==null?void 0:r.startTime)}function tCe(e){let t=-1;return e.map((s,o,r)=>{var a;return{...s,startTime:Fu(s.startTime),endTime:o<r.length-1?Fu((a=r[o+1])==null?void 0:a.startTime):1/0,words:s.words.map((l,u,d)=>(t+=1,{...l,startTime:Fu(l.startTime),endTime:eCe(o,u,r,d),index:t}))}})}function pN(e,t,n){return{DailyBriefing:`${t}|${n}`,Podcast:t}[e]}function S9(e,t,n){const s=pN(e,t,n);s&&kn({path:`/media/${e}/${s}/playback/completed`,args:{}}).catch(o=>{KE(o)})}function nCe(e,t,n,s){const o=pN(e,n,s);o&&kn({path:`/media/${e}/${o}/playback`,args:{options:{method:"PATCH"},body:{positionInSeconds:t}}}).catch(r=>{KE(r)})}function p0(e,t){const n=Object.keys(t);if(n.length!==0)return typeof e<"u"&&n.includes(e)?t[e]:Object.values(t)[0]}const sCe=5,oCe=5e3;function hN(){var Xe,et;const{exitDailyBriefing:e}=Jve(),{data:t,isPodcast:n,pageImpressionKey:s}=Yve(),o=n?d5.Podcast:d5.DailyBriefing,r=M(mN),a=M($d),l=c.useMemo(()=>t?n?t.chapters.map(fe=>{var Ae;return[((Ae=fe.audio.default)==null?void 0:Ae.duration)??0]}):t.chapters.map(fe=>{var Ae;const Ee=[((Ae=p0(a,fe.audio))==null?void 0:Ae.duration)??0];return fe.transitionMusic&&Ee.push(fe.transitionMusic.duration),Ee}):[],[t,n,a]),[u,d]=Ue(uN),m=c.useRef(null),[f,h]=c.useState(!1),g=u<l.length-1,C=u>0,v=c.useRef(performance.now()),y=c.useRef(performance.now()),b=c.useMemo(()=>{var fe;return(fe=t==null?void 0:t.chapters[u])!=null&&fe.id?t.chapters[u].id:r&&r.split(",")[u]},[t==null?void 0:t.chapters,u,r]),E=c.useMemo(()=>t?n?t.chapters.map(fe=>{var Ee;return[((Ee=fe.audio.default)==null?void 0:Ee.url)??""]}):t.chapters.map(fe=>{var Ae;const Ee=[((Ae=p0(a,fe.audio))==null?void 0:Ae.url)??""];return fe.transitionMusic&&Ee.push(fe.transitionMusic.url),Ee}):[],[t,a,n]),[S,I]=c.useState(0),[_,T]=c.useState([]),[A,k]=c.useState(null),N=JSON.stringify({podcastId:r,eventInfo_chapterId:(Xe=t==null?void 0:t.chapters[u])==null?void 0:Xe.id,eventInfo_chapterPlayDuration:performance.now()-v.current}),[P,V]=Ue(cme),U=c.useCallback(()=>{V(fe=>{const Ee=!fe,Ae=Ee?jr.Mute:jr.Unmute;return Ga(o,Ae,N),Ee})},[N,o,V]);Xve({media:A,key:b,thresholds:[{seconds:sCe,callback:()=>{if(b&&!_.includes(b)){try{kn({path:`/daily-briefing/${b}/viewed`,args:{analytics:{anonymousPath:"/daily-briefing/*/viewed"}}})}catch{}T([..._,b])}}}]}),c.useEffect(()=>{if(!A||!f)return;const fe=setInterval(()=>{const Ee=A.currentTime;nCe("DailyBriefing",Ee,r,b)},oCe);return()=>{clearInterval(fe)}},[A,f,b,r]);function K(){var fe;h(!0),(fe=m.current)==null||fe.playAnimation(),A==null||A.play(),Ga(o,jr.Play,N)}function Q(){var fe;h(!1),(fe=m.current)==null||fe.pauseAnimation(),A==null||A.pause(),Ga(o,jr.Pause,N)}function Z(fe){if(A){const Ee=Math.min(A.currentTime+fe,A.duration);A.currentTime=Ee,Ga(o,jr.Skip,JSON.stringify({seconds:fe}))}}function Y(fe){if(A){const Ee=Math.max(A.currentTime-fe,0);A.currentTime=Ee,Ga(o,jr.Rewind,JSON.stringify({seconds:fe}))}}function X(){var fe,Ee,Ae;S9("DailyBriefing",r,b),t!=null&&t.chapters&&D.trackEvent({name:"system",data:{eventName:"chapterPlayDuration",eventInfo_podcastId:r,eventInfo_chapterIndex:u,eventInfo_isCompleted:u===t.chapters.length-1,eventInfo_publisherName:(Ee=(fe=t.chapters[u])==null?void 0:fe.sources)==null?void 0:Ee.map(Ye=>Ye.publisherName).join(","),eventInfo_impressionElement:s,eventInfo_customData:JSON.stringify({eventInfo_chapterId:(Ae=t.chapters[u])==null?void 0:Ae.id,eventInfo_chapterPlayDuration:performance.now()-v.current})}})}function $(){S9("Podcast",r),D.trackEvent({name:"system",data:{eventName:"podcastPlayDuration",eventInfo_isCompleted:!0,eventInfo_podcastId:r,eventInfo_podcastPlayDuration:performance.now()-y.current,eventInfo_impressionElement:s}})}function ee(){A&&(A.currentTime=0)}function te(fe){X(),v.current=performance.now(),ee(),Ce(-1),I(0),d(fe)}function G(){g&&(te(u+1),Ga(o,jr.Next,N))}function ie(){C&&(te(u-1),Ga(o,jr.Previous,N))}function xe(fe){A&&(A.playbackRate=fe/100)}function ce(fe){const Ae=(ag.indexOf(fe)+1)%ag.length;return ag[Ae]??Rd}function ae(){h(!0);const fe=E[u]??[];S<fe.length-1?I(Ee=>Ee+1):fe.length-1===S&&g?G():(Me(),e())}function Se(){v.current=performance.now(),y.current=performance.now()}function Me(){n?$():X()}const Oe=!n,oe=c.useMemo(()=>{if(!Oe)return[];const fe=t==null?void 0:t.chapters[u];if(!fe)return[];const Ee=p0(a,fe.audio);return tCe((Ee==null?void 0:Ee.transcript)??[])},[Oe,a,t==null?void 0:t.chapters,u]),le=c.useMemo(()=>oe.flatMap(fe=>fe.words),[oe]),J=c.useMemo(()=>l[u]??[],[l,u]),Ce=se(lme),Pe=c.useCallback(fe=>{const Ee=le.find(Ae=>fe>=Ae.startTime&&fe<Ae.endTime);return(Ee==null?void 0:Ee.index)??-1},[le]),qe=c.useCallback(fe=>{const Ee=fe.currentTarget;let{currentTime:Ae}=Ee;for(let De=0;De<S;De+=1){const Ke=J[De];Ke&&(Ae+=Ke)}if(Ae===0)return;const Ye=Pe(Ae);Ce(Ye)},[J,S,Pe,Ce]);return c.useEffect(()=>{if(!(!Oe||!A))return A.addEventListener("timeupdate",qe),()=>{A.removeEventListener("timeupdate",qe)}},[A,qe,Oe]),{isPlaying:f,currentChapterId:b,currentChapterIndex:u,chapterDurations:l,currentChapterPartIndex:S,audioElement:A,setAudioElement:k,audioChaptersProgressBarRef:m,currentChapterAudioSrc:((et=E[u])==null?void 0:et[S])??"",isPlayerMuted:P,currentChapterTranscript:oe,play:t?K:void 0,pause:t?Q:void 0,skipForward:t?fe=>Z(fe):()=>{},skipBack:t?fe=>Y(fe):()=>{},goToNextChapter:g?G:void 0,goToPreviousChapter:C?ie:void 0,getNextPlaybackSpeed:t?fe=>ce(fe):void 0,applyPlaybackRate:t?fe=>xe(fe):()=>{},onChapterEnded:ae,resetAllTimers:Se,trackPlayerEndEvents:Me,togglePlayerMuted:U}}function rCe(){const{currentChapterId:e}=hN();return c.useMemo(()=>{if(e)return{type:"dailyBriefing",chapterId:e}},[e])}function aCe(e,t){const[n,s]=c.useState(0);return c.useEffect(()=>{if(!e)return()=>{};const o=d=>{d.preventDefault(),s(m=>m+1)},r=d=>{d.preventDefault(),s(m=>Math.max(0,m-1))},a=d=>{d.preventDefault(),s(0),t==null||t(d)},l=()=>{document.hidden&&s(0)},u=d=>{d.preventDefault()};return window.addEventListener("dragenter",o,!0),window.addEventListener("dragleave",r,!0),window.addEventListener("drop",a,!0),document.addEventListener("visibilitychange",l),t&&window.addEventListener("dragover",u),()=>{window.removeEventListener("dragenter",o,!0),window.removeEventListener("dragleave",r,!0),window.removeEventListener("drop",a,!0),document.removeEventListener("visibilitychange",l),t&&window.removeEventListener("dragover",u)}},[e,t]),n>0}async function iCe(e,t){try{const n=await e.arrayBuffer(),s=new Uint8Array(n),o=await Ct("/attachments",iq,{options:{method:"POST",headers:{"Content-Type":gr(e)},body:new Blob([s]),signal:t}}).then(r=>r.data);if("errorCode"in o)throw new Error(o.errorCode);return o.url}catch(n){throw console.error("Error uploading image",n),n}}async function cCe(e,t){try{const n=new FormData;e.type!==""?n.append("file",e):n.append("file",new File([e],e.name,{type:gr(e)}),e.name);const s=await Ct("/attachments",AE,{options:{method:"POST",body:n,signal:t}}).then(o=>o.data);if("errorCode"in s)throw new Error(s.errorCode);return s.id}catch(n){throw console.error("Error uploading document",n),n}}async function gN(e,t){try{const n=await Ct("/attachments/onedrive",AE,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e}),signal:t}}).then(s=>s.data);if("errorCode"in n)throw new Error(n.errorCode);return n.id}catch(n){throw console.error("Error uploading OneDrive file",n),n}}async function lCe(e,t){switch(e.kind){case"local-file":return cCe(e.file,t);case"onedrive":return gN(e.item.id,t);default:{const n=e;throw new Error(`Unhandled upload kind: ${n}`)}}}async function uCe(e,t){switch(e.kind){case"local-file":return iCe(e.file,t);case"onedrive":return gN(e.item.id,t);default:{const n=e;throw new Error(`Unhandled upload kind: ${n}`)}}}async function vN(e){const{uploadTasks:t,signal:n,onSuccess:s,onError:o,onFinish:r}=e,a=t.map(async l=>{const u=l.upload;try{if(l.type==="document"){const m={content:{type:"document",attachmentId:await lCe(l.upload,n)},item:{type:"document",partId:l.partId,fileName:l.metadata.name,contentType:l.metadata.contentType},size:l.metadata.size,type:l.metadata.contentType},f={id:l.id,file:l.upload.file,scenario:l.scenario,processing:!1,attachment:m,type:"file"};s(f)}else{const d=await uCe(l.upload,n),m={content:{type:"image",url:d},item:{type:"image",url:d},size:l.metadata.size,type:l.metadata.contentType},f={id:l.id,file:u.file,scenario:l.scenario,processing:!1,attachment:m,type:"image"};s(f)}}catch(d){o&&o(d,l)}finally{r()}return null});return Promise.all(a)}function ske(e,t){const n=t.split(".").pop()??"";return`/attachments/${e}.${n}`}async function oke(e){const{file:t,type:n}=await Bfe(e,jfe(e));return{id:`file-${Date.now()}-${crypto.randomUUID()}`,file:t,processing:!1,attachment:{content:{type:t0,url:e},item:{type:t0,url:e},size:t.size,type:n},type:t0}}function Ff(e){switch(e.kind){case"local-file":{const{file:t}=e;return{name:t.name,contentType:gr(t),size:t.size}}case"onedrive":{const{item:t}=e;return{name:t.name,contentType:x3(t.name),size:t.size}}default:{const t=e;throw new Error(`Unhandled upload kind: ${t}`)}}}const CN=$e();let m5=0;const Up=new Set;function Bu(e){CN.set($C,e)}function dCe(){CN.set(Ia,{isOpen:!0,scenario:null,reason:"fileUpload"})}async function mCe(e){const{uploads:t,scenario:n,onError:s,onSuccess:o,replaceExisting:r=!1,shouldUploadImageAsDocument:a}=e;r&&f5();const l=[],u=[];for(const m of t){const f=Ff(m),h=Bl(f.contentType),g=fk();if(h||a){const C=String(m5);m5+=1,l.push({id:g,upload:m,partId:C,metadata:f,type:"document"}),u.push({id:g,file:m.file,scenario:n,processing:!0,type:"file"})}else l.push({id:g,upload:m,metadata:f,type:"image"}),u.push({id:g,file:m.file,scenario:n,processing:!0,type:"image"})}Bu(m=>[...m,...u]);const d=new AbortController;Up.add(d),await vN({signal:d.signal,uploadTasks:l,onSuccess:m=>{Bu(f=>f.map(h=>h.id===m.id?m:h)),o==null||o(m)},onError:(m,f)=>{if(m instanceof Error&&m.message==="not-signed-in")throw f5(),dCe(),m;const h={id:f.id,file:f.upload.file,scenario:n,processing:!1,error:m};Bu(g=>g.map(C=>C.id===f.id?h:C)),s&&s(m,f.upload)},onFinish:()=>{Up.delete(d)}}),un({scenario:n??"fileUpload",page:"uploadAttachmentVanilla"})}function f5(){Bu([]),yN(),m5=0}function fCe(e){Bu(t=>{const n=[...t];return n.splice(e,1),n})}function yN(){for(const e of Up)e.abort();Up.clear()}function pCe(){const e=be("use-new-attachment"),[t,n]=Ue($C),{t:s}=q(),o=c.useRef(new Set),r=c.useRef(0),a=se(Ia),l=c.useCallback(()=>{for(const g of o.current)g.abort();o.current.clear()},[]),u=c.useCallback((g,C)=>{a({isOpen:!0,scenario:C??null,reason:g})},[a]),d=c.useCallback(()=>{u("fileUpload")},[u]),m=c.useCallback(()=>{n([]),r.current=0,l()},[l,n]),f=c.useCallback(async g=>{const{uploads:C,scenario:v,onError:y,replaceExisting:b=!1,shouldUploadImageAsDocument:E}=g;b&&m();const S=[],I=[];for(const T of C){const A=Ff(T),k=Bl(A.contentType),N=fk();if(k||E){const P=String(r.current);r.current+=1,S.push({id:N,upload:T,partId:P,metadata:A,type:"document",scenario:v}),I.push({id:N,file:T.file,scenario:v,processing:!0,type:"file"})}else S.push({id:N,upload:T,metadata:A,type:"image",scenario:v}),I.push({id:N,file:T.file,scenario:v,processing:!0,type:"image"})}n(T=>[...T,...I]);const _=new AbortController;o.current.add(_),await vN({signal:_.signal,uploadTasks:S,onSuccess:T=>{var A;if(n(k=>k.map(N=>N.id===T.id?T:N)),(A=T.attachment)!=null&&A.item){const{type:k}=T.attachment.item;ho({msg:s(k==="image"?"fileUpload.uploadedImage":"fileUpload.uploadedFile")})}},onError:(T,A)=>{if(T instanceof Error&&T.message==="not-signed-in")throw m(),d(),T;const k={id:A.id,file:A.upload.file,scenario:v,processing:!1,error:T};n(N=>N.map(P=>P.id===A.id?k:P)),y&&y(T,A.upload)},onFinish:()=>{o.current.delete(_)}}),un({scenario:v??"fileUpload",page:"uploadAttachmentReact"})},[m,d,n,s]),h=c.useCallback(g=>{n(C=>{const v=[...C];return v.splice(g,1),v})},[n]);return c.useEffect(()=>()=>{e?yN():l()},[e,l]),e?{uploadedAttachments:t,isUploadingAttachments:t.some(g=>g.processing===!0),getUploadMetadata:Ff,setUploadedAttachments:n,removeAttachmentByIndex:fCe,clearAttachments:f5,uploadAttachments:async({uploads:g,scenario:C,onError:v,replaceExisting:y,shouldUploadImageAsDocument:b})=>mCe({uploads:g,scenario:C,onError:v,replaceExisting:y,shouldUploadImageAsDocument:b,onSuccess:E=>{var S;if((S=E.attachment)!=null&&S.item){const{type:I}=E.attachment.item;ho({msg:s(I==="image"?"fileUpload.uploadedImage":"fileUpload.uploadedFile")})}}})}:{uploadedAttachments:t,isUploadingAttachments:t.some(g=>g.processing===!0),clearAttachments:m,uploadAttachments:f,getUploadMetadata:Ff,removeAttachmentByIndex:h,setUploadedAttachments:n}}function hCe(e,t,n,s){const{t:o}=q(),{clearAttachments:r,uploadAttachments:a,getUploadMetadata:l,isUploadingAttachments:u,uploadedAttachments:d,removeAttachmentByIndex:m}=pCe(),f=M(Wo),{maxFilesPerMessage:h}=f,g=M(jl),C=c.useMemo(()=>d.filter(({error:_})=>!_),[d]),v=C.length,y=c.useMemo(()=>new Set(C.filter(({file:_})=>!!_).map(({file:_})=>`${_==null?void 0:_.name}-${_==null?void 0:_.size}-${_==null?void 0:_.type}-${_==null?void 0:_.lastModified}`)),[C]),b=c.useCallback(async _=>{const{uploads:T,scenario:A,replaceExisting:k=!0,supportedMimeTypes:N=g}=_,P=T.filter(({file:V})=>!y.has(`${V.name}-${V.size}-${V.type}-${V.lastModified}`));if(P.length===0){n();return}if(!k&&v+P.length>h){t({title:o("composer.errors.multi.tooManyFiles.title",{maxFiles:h}),message:o("composer.errors.multi.tooManyFiles.message")});return}for(const V of P){const U=ck(V.file,{supportedMimeTypes:N,scenario:A});if(U){t(U),n();return}}e();try{await a({uploads:P,scenario:A,replaceExisting:k,onError:(V,U)=>{if(V instanceof Error){t(uk(V.message));const{name:K,size:Q}=l(U);rpe({name:K,size:Q,message:V.message,kind:U.kind})}else t({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}})}catch(V){V instanceof Error&&V.message==="not-signed-in"?s():t({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}},[g,e,y,n,v,h,t,o,a,l,s]),E=c.useCallback(async _=>{const{rawFiles:T,scenario:A,replaceExisting:k=!0,supportedMimeTypes:N=g}=_;if(T.length===0)return;const P=[];for(const V of T)P.push({file:npe(V),kind:"local-file"});await b({uploads:P,scenario:A,replaceExisting:k,supportedMimeTypes:N})},[b,g]),S=c.useCallback(()=>{r(),n()},[r,n]),I=c.useCallback(_=>{d.length===1?S():m(_)},[m,d,S]);return{processUploadedFiles:b,processUploadedLocalFiles:E,isUploadingAttachments:u,uploadedAttachments:d,resetFileUpload:S,removeAttachment:I}}function bh(){var s;const e=M(Hn)==="side-by-side",t=gt({breakpoint:"sm"}),n=!!((s=re.instance().config().actions)!=null&&s.alwaysLayoutChatDetailsOverChat);return e&&(t||n)}function bN(e){function t(n,s){return!n||s.length===0?null:gCe(n.text,s.sort((o,r)=>o.position-r.position))}return e.map(n=>{if(n.author!=="ai"||!n.content.find(l=>l.type==="citation"))return n;let o=null,r=[];for(const l of n.content)if(l.type==="text"){const u=t(o,r);u&&o&&(o.text=u.text,o.citations=u.citationMetadata),r=[],o=l}else l.type==="citation"&&r.push(l);const a=t(o,r);return a&&o&&(o.text=a.text,o.citations=a.citationMetadata),n})}function gCe(e,t){if(!t)return{text:e,citationMetadata:[]};let n=e;const s=[];let o=0;const r=new Map;for(const l of t){const u=l.url;if(!r.has(u)){o+=1;const d=`${o}`;r.set(u,d),s.push({index:d,title:l.title,url:l.url,iconUrl:l.iconUrl??null,publisher:l.publisher??null,snippet:l.snippet??null})}}const a=t.map((l,u)=>({citation:l,originalIndex:u})).sort((l,u)=>{const d=u.citation.position-l.citation.position;return d!==0?d:u.originalIndex-l.originalIndex}).map(l=>l.citation);for(const l of a){const u=l.url,d=r.get(u);d!==void 0&&(n=gse(n,sT(d,l.url),l.position))}return{text:n,citationMetadata:s}}function vCe(){const e=XT(),{conversationId:t}=$p({strict:!1}),{data:n,error:s,isLoading:o}=Ms({queryKey:["sharePage",t],queryFn:()=>CCe(`/conversations/shares/${t}`),staleTime:1/0,enabled:e&&!!t});return{data:n,error:s,isLoading:o}}async function CCe(e){const{data:t,response:n}=await Ct(e,AK,{parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/shares/*"}});if(n.status>=400&&n.status<500)throw new yCe(n.status.toString());return{...t,messages:bN(t.messages.reverse())}}class yCe extends Error{}function bCe(){const e=XT(),{isMediaViewerOpen:t}=ka(),n=M(bo),s=W("share-continue-v2"),{error:o}=vCe();return e?o?!1:s||t||!!n:!0}function Z3(){return W5("(hover: hover) and (pointer: fine)")}function Y3(){const e=M(hn);return!!(e!=null&&e.group)}function ei(e){const t=Y3(),n=zC(),s=W("podcast-in-create-drawer"),o=UM(),r=W("quiz-in-create-drawer");if(!t)switch(e){case"podcast":return s;case"researchReport":return o;case"quiz":return r;case"actions":return n;case"image":case"voice":case"uploadFile":default:return!0}switch(e){case"image":return!0;case"podcast":case"researchReport":case"quiz":case"actions":case"voice":case"uploadFile":default:return!1}}const xCe={h550:"550",h600:"600",h700:"700",h760:"760",h840:"840"};function Fp(e){const{breakpoint:t}=e,n=xCe[t];return!W5(`(min-height: ${n}px)`)}const xN=R(),rke=R(!1),ake=R(!1),SCe=/\/(?:.*\/)?(ar|vi|gm)-([a-zA-Z0-9]{6,10})/,ECe="gemSnapshotKey";function wCe(){const e=M(xN),{contentPageType:t}=ka();return c.useMemo(()=>{if(!(!e||!t))try{const n=e.pathname.match(SCe),s=(n==null?void 0:n[2])??null;if(!s)return;switch(t){case"newsGem":{const o=e.searchParams.get(ECe);return o?{type:"newsGem",gemId:s,snapshotKey:o}:void 0}case"newsArticle":return{type:"news",articleId:s};default:return}}catch{return}},[e,t])}function ICe(){const e=xo(),t=fl();return c.useCallback(async()=>{await e({to:"/agents",params:{},from:t.state.location.pathname})},[e,t.state.location.pathname])}function _Ce(){const e=Gt("kill-domain-referrer");return c.useCallback(t=>Eo(t,{preventReferrer:e}),[e])}function TCe(){var m,f,h;const e=W("cross-promo-popup"),t=(h=(f=(m=re.instance().config().crossPromotion)==null?void 0:m.aggressive)==null?void 0:f.popup)==null?void 0:h.secondDay,n=rn(W0),s=!Ip(n,rp),o=rn(K5),r=!Ip(o,2*rp),a=rn(Xf),l=OC(a,2),u=M(Kv);return c.useMemo(()=>!!(s&&e&&r&&l&&t&&(u===!0?!1:u!==void 0)),[t,e,r,l,s,u])}function ACe(e){const{status:t,eventName:n,source:s,isMobile:o}=e;switch(n){case"crossPromotionStripCard":return{eventName:n,eventInfo_source:s,eventInfo_status:t};case"crossPromotionTopBanner":return{eventName:n,eventInfo_isMobilePlatform:o,eventInfo_status:t};case"copilotMobileCrossSelling":case"crossPromotionProfileBanner":case"crossPromotionProfileMenuItem":return{eventName:n,eventInfo_status:t};default:return{eventName:n,eventInfo_status:t}}}function Pc(e){const{name:t}=e;D.trackEvent({name:t,data:ACe(e)})}function SN(){const[e,t]=Ue(rr),n=W("cross-promo-popup"),s=W("top-banner-cross-promo-desktop");let o="setting";(n||(e==null?void 0:e.type)==="popup")&&(o="popup"),s&&(o="topBanner"),(e==null?void 0:e.type)==="card"&&(o="bottomRightCard");const r=se(bo);return c.useCallback(()=>{const a=Date.now().toString();An(K5,a);const l=rn(Xf);An(Xf,(parseInt(l??"0",10)+1).toString()),Pc({name:"interaction",status:"Dismissed",eventName:"crossPromotionStripCard",source:o}),r(null),t(null)},[o,r,t])}const E9=new Map;function kCe(){const{createConversation:e}=fm(),t=M(g1),[n,s]=Ue(je),o=M(xN);return{switchMsnConversation:c.useCallback(async()=>{if(!o||!n)return;const a=o.toString();let l=E9.get(a);if(!l){l=t,n!==t&&(l=await e({shouldNavigateToChat:!1})),l&&(s(l),E9.set(a,l));return}l!==n&&sm({id:l,shouldNavigateToChat:!1})},[o,n,t,e,s])}}const MCe=(e,t)=>{var n,s,o,r;if(e==="light"){const a=(s=(n=re.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:s.outerLargeBoxShadowLight;if(a)return a;if(t)return f5e}else if(e==="dark"){const a=(r=(o=re.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:r.outerLargeBoxShadowDark;if(a)return a;if(t)return p5e}return d5e},NCe=(e,t)=>{var n,s,o,r;if(e==="light"){const a=(s=(n=re.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:s.outerSmallBoxShadowLight;if(a)return a;if(t)return h5e}else if(e==="dark"){const a=(r=(o=re.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:r.outerSmallBoxShadowDark;if(a)return a;if(t)return g5e}return m5e},RCe=e=>e==="dark"?AM:TM;function vf(e){return e?C5e:v5e}function PCe(e){return e?b5e:y5e}function EN(e,t,n){const s=$e();return new Promise((o,r)=>{let a=null;t(s.get(e))&&o(s.get(e));const l=s.sub(e,()=>{const d=s.get(e);t(d)&&(l(),o(d))}),u=()=>{l(),a&&clearTimeout(a)};n&&(a=setTimeout(()=>{u(),r(new Error("Timeout waiting for atom to be ready"))},n))})}function LCe(e){return e.some(t=>t.author==="human"&&t.content.some(n=>n.type==="image"||n.type==="document"))}function ike(e){var n,s;const t=e.filter(o=>o.author==="human");if(t.length===1){const o=(s=(n=t[0])==null?void 0:n.content.find(r=>r.type==="image"||r.type==="document"))==null?void 0:s.type;return o==="image"?"image":o==="document"?"file":void 0}return LCe(e)?"image|file":void 0}function OCe(e){const n=new URL(e).pathname.split("/").filter(Boolean);return n[n.length-1]??null}async function w9(){Kde();const e=$e(),t=OCe(window.location.href);let n;e.set(I2,!0);try{const s=await DCe(`/conversations/shares/${t}/continue`),{id:o,title:r}=s.conversation;n=o;const a=new Date().toISOString(),l={id:o,updatedAt:a,isNew:!1,title:r,history:[],continuedAt:a,group:null};e.set(vt,u=>{const d=new Map(u);return d.set(o,l),d}),e.set(je,o),await UCe(o)}catch(s){throw Hr({title:Rt.t("composer.errors.continue.title"),message:Rt.t("composer.errors.continue.message")}),Zde({shareId:t??"",conversationId:n,error:s instanceof Error?s:new Error(String(s))}),s}finally{e.set(I2,!1)}}async function DCe(e){return(await Ct(e,mK,{options:{method:"POST"}})).data}const jCe=1e4;async function UCe(e){await EN(vt,t=>{const n=t.get(e);return((n==null?void 0:n.history)??[]).length>0},jCe)}function FCe(e,t,n){if(!e||!t)return!1;const s=e.getTime(),o=t.getTime(),r=n?n.getTime():null;return o<=s||r===null?!1:r<=s}function p5(e,t){const n=Ft(e),s=Ft(t);return n.getTime()>s.getTime()}function Bp(e,t){return $5(e,-t)}const BCe=11,VCe=7,HCe=2,zCe=10,GCe=21,WCe=21,$Ce=10,I9=x({daysActive:L(Wp())}),h5=x({result:ke(["dismissed","positive","negative"]),date:Wp(),dismissCounter:j()});function qCe(e){const t=new Date;let n=e;return e.some(s=>vh(s,t))||(n=[...e,t]),n.length>$Ce?n.slice(-10):n}function KCe(){const e=wt(Yb,I9),t=(e==null?void 0:e.daysActive)??[],n=qCe(t),s=Bp(new Date,VCe),o=n.filter(r=>p5(r,s)||vh(r,s)).length;return n!==t&&Vn(Yb,I9,{daysActive:n}),o}function ZCe(){const e=wt($0,h5);if(!e)return!1;const t=e.result==="positive",n=e.result==="negative"&&p5(e.date,Bp(new Date,WCe)),s=e.result==="dismissed"&&p5(e.date,Bp(new Date,e.dismissCounter>5?GCe:zCe));return t||n||s}function YCe(e,t){let n="popUpDismiss";t==="negative"?n="appThumbDown":t==="positive"&&(n="appThumbUp"),qt({source:n,conversationId:e});const s=wt($0,h5),o=(s==null?void 0:s.result)==="dismissed"?s.dismissCounter:0,r={result:t,date:new Date,dismissCounter:t==="dismissed"?o+1:0};Vn($0,h5,r)}function Vp({className:e,style:t}){return i.jsx("div",{className:ue("animate-[shimmer_2s_infinite] bg-black/5 bg-gradient-to-r dark:bg-white/5","from-transparent via-background-150 to-transparent","bg-[length:50%_100%] bg-no-repeat",e),style:t})}function QCe(e){const{isImageOrVideo:t,isInlineImageOrVideo:n}=e;let s="h-[300px]";return n?s="h-[150px]":t&&(s="h-[144px] sm:h-[176px]"),i.jsx("div",{className:"flex flex-col gap-3 px-4",children:i.jsx(Vp,{className:ue("w-full",s),style:{clipPath:"var(--clip-path-squircle-36)"}})})}function _9(e){const{type:t,length:n}=e;if(t==="ads")return i.jsx("div",{});const s=t==="image"||t==="video",o=t==="inlineImage"||t==="inlineVideo",r=s&&n===1;return i.jsx(O1,{size:"md",stroke:!0,className:ue("relative flex",r?"w-[300px]":"w-full","flex-col py-3 transition-opacity duration-300 ease-in-out"),children:i.jsx(QCe,{isImageOrVideo:s,isInlineImageOrVideo:o})})}function cke(e){if(e.type==="image")return e.images.length;if(e.type==="video")return e.videos.length}function g5(){return g5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},g5.apply(null,arguments)}function JCe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var XCe=c.useLayoutEffect,e3e=function(t){var n=zu.useRef(t);return XCe(function(){n.current=t}),n},T9=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},t3e=function(t,n){var s=zu.useRef();return zu.useCallback(function(o){t.current=o,s.current&&T9(s.current,null),s.current=n,n&&T9(n,o)},[n])},A9={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},n3e=function(t){Object.keys(A9).forEach(function(n){t.style.setProperty(n,A9[n],"important")})},k9=n3e,Zn=null,M9=function(t,n){var s=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?s+n.borderSize:s-n.paddingSize};function s3e(e,t,n,s){n===void 0&&(n=1),s===void 0&&(s=1/0),Zn||(Zn=document.createElement("textarea"),Zn.setAttribute("tabindex","-1"),Zn.setAttribute("aria-hidden","true"),k9(Zn)),Zn.parentNode===null&&document.body.appendChild(Zn);var o=e.paddingSize,r=e.borderSize,a=e.sizingStyle,l=a.boxSizing;Object.keys(a).forEach(function(h){var g=h;Zn.style[g]=a[g]}),k9(Zn),Zn.value=t;var u=M9(Zn,e);Zn.value=t,u=M9(Zn,e),Zn.value="x";var d=Zn.scrollHeight-o,m=d*n;l==="border-box"&&(m=m+o+r),u=Math.max(m,u);var f=d*s;return l==="border-box"&&(f=f+o+r),u=Math.min(f,u),[u,d]}var N9=function(){},o3e=function(t,n){return t.reduce(function(s,o){return s[o]=n[o],s},{})},r3e=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],a3e=!!document.documentElement.currentStyle,i3e=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var s=o3e(r3e,n),o=s.boxSizing;if(o==="")return null;a3e&&o==="border-box"&&(s.width=parseFloat(s.width)+parseFloat(s.borderRightWidth)+parseFloat(s.borderLeftWidth)+parseFloat(s.paddingRight)+parseFloat(s.paddingLeft)+"px");var r=parseFloat(s.paddingBottom)+parseFloat(s.paddingTop),a=parseFloat(s.borderBottomWidth)+parseFloat(s.borderTopWidth);return{sizingStyle:s,paddingSize:r,borderSize:a}},c3e=i3e;function Q3(e,t,n){var s=e3e(n);c.useLayoutEffect(function(){var o=function(a){return s.current(a)};if(e)return e.addEventListener(t,o),function(){return e.removeEventListener(t,o)}},[])}var l3e=function(t,n){Q3(document.body,"reset",function(s){t.current.form===s.target&&n(s)})},u3e=function(t){Q3(window,"resize",t)},d3e=function(t){Q3(document.fonts,"loadingdone",t)},m3e=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],f3e=function(t,n){var s=t.cacheMeasurements,o=t.maxRows,r=t.minRows,a=t.onChange,l=a===void 0?N9:a,u=t.onHeightChange,d=u===void 0?N9:u,m=JCe(t,m3e),f=m.value!==void 0,h=c.useRef(null),g=t3e(h,n),C=c.useRef(0),v=c.useRef(),y=function(){var S=h.current,I=s&&v.current?v.current:c3e(S);if(I){v.current=I;var _=s3e(I,S.value||S.placeholder||"x",r,o),T=_[0],A=_[1];C.current!==T&&(C.current=T,S.style.setProperty("height",T+"px","important"),d(T,{rowHeight:A}))}},b=function(S){f||y(),l(S)};return c.useLayoutEffect(y),l3e(h,function(){if(!f){var E=h.current.value;requestAnimationFrame(function(){var S=h.current;S&&E!==S.value&&y()})}}),u3e(y),d3e(y),c.createElement("textarea",g5({},m,{onChange:b,ref:g}))},wN=c.forwardRef(f3e);function p3e(e,t){const n=c.useRef(null);c.useEffect(()=>{const s=e==null?void 0:e.current;if(!s)return;const o=a=>{const l=s.selectionStart,u=s.selectionEnd;if(l!==u&&a.key!=="Backspace"&&a.key!=="Delete")n.current={type:"replace",char:a.key,index:l};else if(a.key==="Backspace"&&l>0){const m=s.value[l-1];m!==void 0&&(n.current={char:m,index:l-1,type:"delete"})}else if(a.key==="Delete"&&l<s.value.length){const m=s.value[l];m!==void 0&&(n.current={char:m,index:l,type:"delete"})}else n.current=null},r=()=>{t&&t(n.current),n.current=null};return s.addEventListener("keydown",o),s.addEventListener("input",r),()=>{s.removeEventListener("keydown",o),s.removeEventListener("input",r)}},[e,t])}const v5="@",h3e=new RegExp(`${v5}([^${v5}]*)`,"g");function g3e(e,t){return[...e.slice(0,t).matchAll(h3e)].map(s=>({keyword:s[1],start:s.index,end:s.index+s[0].length}))}function v3e(e,t){const n=g3e(e,t);if(n.length===0)return;const s=n[n.length-1];return(s==null?void 0:s.end)===t?s:void 0}function C3e(e){const{className:t,textAreaRef:n,onMentionChange:s,textAreaValue:o,onCancelMention:r}=e,[a,l]=c.useState(void 0),{t:u}=q(),d=c.useRef(!1),m=c.useRef(s),f=c.useRef(null),h=c.useRef(new Set),g=c.useCallback(E=>{E&&E.char===v5&&E.type!=="insert"&&h.current.delete(E.index)},[]),C=c.useCallback(()=>{l(void 0),f.current=null},[l]);p3e(n,g),c.useEffect(()=>{m.current=s},[s]);const v=c.useCallback(()=>{const E=n==null?void 0:n.current;if(!E)return;const S=E.selectionStart,I=E.selectionEnd;if(S===I){const _=v3e(o,S);_?h.current.has(_.start)?C():(f.current=_,l(T=>T!==_.keyword?_.keyword:T)):C()}},[C,n,o]),y=c.useCallback((E="remove")=>{var A,k;const S=f.current;if(!S)return;if(E==="ignore"){h.current.add(S.start),(A=m.current)==null||A.call(m,{isTrigger:!1}),l(void 0);return}const I=o.slice(0,S.start),_=o.slice(S.end),T=I+_;f.current=null,(k=m.current)==null||k.call(m,{isTrigger:!1}),r==null||r(T)},[r,o]);c.useEffect(()=>{o===""?(C(),h.current.clear()):v()},[v,o,l,C]),c.useEffect(()=>{var E,S;if(!d.current){d.current=!0;return}a!==void 0?(E=m.current)==null||E.call(m,{isTrigger:!0,keyword:a}):(S=m.current)==null||S.call(m,{isTrigger:!1})},[a,m]),c.useEffect(()=>(Ge.on("mention:cancel",y),()=>{Ge.off("mention:cancel",y)}),[y]);const b=a==="";return i.jsxs("div",{className:ue("pointer-events-none absolute z-0 overflow-auto contrast-more:-z-10 contrast-less:-z-10 forced-colors:-z-10",t),"aria-hidden":"true",children:[i.jsx("span",{className:"invisible select-none whitespace-pre-wrap break-words",children:o}),b&&i.jsx("span",{className:"text-foreground-550 dark:text-foreground-600",children:u("userInput.mentionPlaceholderText")})]})}function y3e(e,t){const n=c.useCallback(async s=>{s.key==="Enter"&&!s.shiftKey&&!t&&await e(s)},[e,t]);hs(n)}function b3e(e,t,n){const s=c.useRef(!1),o=c.useCallback(()=>{s.current=!0},[]),r=c.useCallback(()=>{setTimeout(()=>{s.current=!1},100)},[]);return y3e(async a=>{var l;(l=e.current)!=null&&l.contains(document.activeElement)&&!s.current&&(a.preventDefault(),await t())},n),{handleCompositionStart:o,handleCompositionEnd:r}}const x3e="pointer-events-none cursor-not-allowed select-none shadow-none",S3e="opacity-40",E3e=.25,J3=c.forwardRef((e,t)=>{const{t:n}=q(),{inputValue:s,errorMessage:o,className:r,characterLimit:a,characterLimitErrorMessage:l,disabled:u,placeholder:d=n("userInput.placeholderText"),autoFocus:m=!0,testId:f,setInput:h,setError:g,onBlur:C,onChange:v,onFocus:y,onClick:b,onEnter:E,onKeyDown:S,onPaste:I,onMentionIfEnabled:_,rightButtons:T,isMultiLines:A,"aria-autocomplete":k,"aria-controls":N,disabledClassName:P,inputContainerClassName:V}=e,U=ut(),K=c.useRef(null),Q=c.useRef(null),Z=Z3()||re.instance().config().enterKeyButtonEnabled,Y=n("userInput.characterLimitText",{maxCharacters:a.toString()});c.useEffect(()=>{var G;Z&&((G=Q.current)==null||G.focus())},[U,Z]);const X=c.useCallback(G=>{const{value:ie}=G.target;h(ie),v&&v(ie),ie.length>a?g(l??Y):g(null)},[h,v,a,g,l,Y]);c.useImperativeHandle(t,()=>({updateInputValue:G=>{const ie=G(s);h(ie)},focus:()=>{var G;(G=Q.current)==null||G.focus()},blur:()=>{var G;(G=Q.current)==null||G.blur()},contains:G=>{var ie;return((ie=Q.current)==null?void 0:ie.contains(G))??!1},updateSelectionRange:(G,ie)=>{var xe;(xe=Q.current)==null||xe.setSelectionRange(G,ie)},getTextAreaRef(){return Q}}),[s,h]),hs(G=>{var ie,xe;G.key==="Escape"&&((ie=K.current)!=null&&ie.contains(document.activeElement))&&((xe=Q.current)==null||xe.blur()),S==null||S(G)});const{handleCompositionStart:$,handleCompositionEnd:ee}=b3e(K,E,!Z),te=u?P??S3e:"";return i.jsxs(ge.div,{className:F("flex grow items-end",u&&x3e,te,r),onClick:()=>{var G;b==null||b(),(G=Q.current)==null||G.focus()},ref:K,onBlur:G=>C==null?void 0:C(G),layout:"preserve-aspect",children:[i.jsx(ge.div,{className:"relative grow overflow-hidden",layout:!0,children:i.jsx(ge.div,{className:"relative flex size-full cursor-text overflow-hidden text-black dark:text-white",layout:!0,children:i.jsxs(ge.div,{className:"flex grow flex-col gap-4 py-user-input",layout:!0,transition:{duration:0},children:[i.jsx("div",{className:F("t-custom-scrollbar scrollbar-stable overflow-y-auto px-4",re.instance().config().showScrollbarOnHover?"scrollbar-container":"",V),children:i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:F(["invisible block h-0 w-0 overflow-hidden",{"whitespace-nowrap":!A}]),htmlFor:"userInput",children:d}),i.jsx(wN,{className:F("font-ligatures-none inline-block h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Ho("composer")??"text-base-dense",gd("composerVertical")),disabled:u,placeholder:d,ref:Q,id:Pd,role:"textbox","aria-autocomplete":k,"aria-controls":N,spellCheck:!1,value:s,enterKeyHint:"enter",onChange:X,onFocus:()=>y==null?void 0:y(s),onCompositionStart:$,onCompositionEnd:ee,onPaste:I,autoFocus:m,"data-testid":f}),_&&i.jsx(C3e,{className:F("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Ho("composer")??"text-base",gd("composerVertical"),"inset-0"),textAreaRef:Q,textAreaValue:s,onMentionChange:_,onCancelMention:G=>{h(G),g(null)}})]})}),o&&i.jsx("div",{className:"flex min-h-6 select-none items-center px-4 text-foreground-600 text-sm",children:o})]})})}),i.jsx(ge.div,{className:F("relative bottom-0 my-1.5 flex h-9 items-center",T!=null&&T.length?"mx-1.5 w-auto gap-1":"w-0"),children:T==null?void 0:T.map((G,ie)=>i.jsx(pt,{children:i.jsx(ge.div,{initial:Fe,animate:{...nt,transition:{delay:E3e}},transition:{duration:ts.default},children:G})},ie))})]})});J3.displayName="UserInput";const IN=e=>c.createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3.556 6.708C3.556 4.989 4.949 3.596 6.667 3.596H22.222C25.659 3.596 28.444 6.382 28.444 9.818V25.374C28.444 27.092 27.052 28.485 25.333 28.485H9.778C6.341 28.485 3.556 25.699 3.556 22.263V6.708Z",fill:"url(#paint0_linear_393_48941)"}),c.createElement("path",{d:"M4.444 6.708C4.444 5.480 5.439 4.485 6.667 4.485H22.222C25.168 4.485 27.556 6.873 27.556 9.818V25.374C27.556 26.602 26.561 27.596 25.333 27.596H9.778C6.832 27.596 4.444 25.208 4.444 22.263V6.708Z",fill:"url(#paint1_linear_393_48941)"}),c.createElement("path",{d:"M4.444 6.708C4.444 5.480 5.439 4.485 6.667 4.485H22.222C25.168 4.485 27.556 6.873 27.556 9.818V25.374C27.556 26.602 26.561 27.596 25.333 27.596H9.778C6.832 27.596 4.444 25.208 4.444 22.263V6.708Z",fill:"url(#paint2_radial_393_48941)"}),c.createElement("path",{d:"M14.900 15.109L9.514 20.497C8.534 21.477 9.228 23.152 10.614 23.152H21.389C22.774 23.152 23.468 21.477 22.488 20.497L17.100 15.109C16.493 14.502 15.507 14.502 14.900 15.109Z",fill:"url(#paint3_linear_393_48941)"}),c.createElement("circle",{cx:20.889,cy:11.152,r:2.222,fill:"url(#paint4_linear_393_48941)"}),c.createElement("defs",null,c.createElement("linearGradient",{id:"paint0_linear_393_48941",x1:11.593,y1:3.596,x2:14.944,y2:28.729,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"#BBBBBB"}),c.createElement("stop",{offset:1,stopColor:"#888888"})),c.createElement("linearGradient",{id:"paint1_linear_393_48941",x1:10.864,y1:4.485,x2:13.787,y2:27.873,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EBEBEB"})),c.createElement("radialGradient",{id:"paint2_radial_393_48941",cx:0,cy:0,r:1,gradientTransform:"matrix(12.198 18.296 -18.296 6.861 11.827 10.504)",gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:.177083,stopColor:"white"}),c.createElement("stop",{offset:1,stopColor:"#EFEFEF"})),c.createElement("linearGradient",{id:"paint3_linear_393_48941",x1:8.935,y1:11.488,x2:15.591,y2:29.836,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"})),c.createElement("linearGradient",{id:"paint4_linear_393_48941",x1:18.667,y1:6.152,x2:23.495,y2:15.396,gradientUnits:"userSpaceOnUse"},c.createElement("stop",{offset:1e-4,stopColor:"#597493"}),c.createElement("stop",{offset:1,stopColor:"#0F2F56"}))));function w3e(e){var k;const{uploadedFile:t,onRemove:n,scenario:s,isUploading:o,role:r,ariaLabel:a,layout:l="grid"}=e,{t:u}=q(),[d,m]=c.useState(null),[f,h]=c.useState(!1),[g,C]=c.useState(!1),v=s==="screenshot"?u("composer.screenshotAdded"):void 0,y=l==="list";c.useEffect(()=>{const N=URL.createObjectURL(t);return h(!1),C(!1),m(N),()=>{URL.revokeObjectURL(N)}},[t]);const b=N=>{h(!0),C(!1),N.target instanceof HTMLImageElement&&URL.revokeObjectURL(N.target.src)},E=N=>{h(!0),C(!0),N.target instanceof HTMLImageElement&&URL.revokeObjectURL(N.target.src)},S=c.useCallback(()=>{n==null||n(),ho({msg:u("fileUpload.imageRemoved")})},[n,u]),I=W("file-upload-card-v2");if(!d)return null;const _=!!((k=re.instance().config().composer)!=null&&k.smallAttachmentCard)||I,T=o?i.jsxs(ln,{className:F("absolute inset-0 grid place-items-center ",{"bg-transparent":y,"bg-white/80 dark:bg-white/45":!y}),children:[i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(it,{type:"spinnerThemed",className:y?"size-8":"size-11"})}),i.jsx(Ti,{msg:u("fileUpload.uploadingImage"),type:"polite"})]}):null,A={"h-small-attachment w-full object-cover":_&&!y,"h-8 w-8 object-cover":_&&y,"h-32":!_};return i.jsxs(ge.div,{className:ue("relative flex max-w-fit shrink-0",{"mt-1 min-w-[58px]":_,"min-h-32":!_,"flex h-small-attachment w-full max-w-full items-center gap-2":y}),layout:"position",initial:Fe,animate:f||y?nt:Fe,exit:Fe,transition:{delay:c_},role:r,"aria-label":a,children:[i.jsxs("div",{className:F("relative",{"h-8 w-8":_&&y,"flex w-full justify-center rounded-xl border border-black/8 bg-acrylic-thin-fallback-light/60 dark:border-white/8 dark:bg-midnight-800/80":!y}),children:[y&&o&&T,(!y||!o)&&g&&i.jsx(IN,{className:ue("w-auto rounded-xl border border-black/8 object-contain shadow-inner dark:border-white/8",A),role:"presentation","aria-hidden":!0}),(!y||!o)&&!g&&i.jsx(ge.img,{className:ue("size-auto rounded-xl border-none object-contain shadow-inner",A),src:d,role:"presentation",onLoad:b,onError:E,alt:"",draggable:!1})]}),y?i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:F("font-ligatures-none overflow-hidden truncate whitespace-nowrap text-sm"),children:u("library.itemTypes.image")}),i.jsx("p",{className:"line-clamp-1 uppercase text-foreground-600 text-xs",children:t.name.split(".").pop()})]}):null,v&&i.jsx(Ti,{msg:v}),n&&!o&&i.jsx(ge.button,{type:"button",title:u("fileUpload.removeImageWithName",{name:t.name}),"aria-label":u("fileUpload.removeImageWithName",{name:t.name}),onClick:S,className:F("rounded-full p-1",{"absolute end-0.5 top-0.5 m-1  border border-black/20 bg-acrylic-thin-fallback-light/60 fill-black  text-foreground-900 dark:bg-midnight-800/80":!y}),children:i.jsx(an,{className:"size-3","aria-hidden":!0})}),y?null:T]})}const X3=c.memo(e=>{const{attachment:t,onRemove:n,role:s,ariaLabel:o,layout:r="grid"}=e,{file:a,processing:l,error:u,scenario:d}=t;if(u||!a)return null;const m=gr(a);return Bl(m)?i.jsx(E3,{onRemove:n,fileName:a.name,fileType:m,isUploading:l,role:s,ariaLabel:o,layout:r}):i.jsx(w3e,{uploadedFile:a,onRemove:n,scenario:d,isUploading:l,role:s,ariaLabel:o,layout:r})});X3.displayName="AttachmentItem";function _N(e){const t=c.useRef(null);c.useEffect(()=>{t.current=document.activeElement;const n=e==null?void 0:e.current;return()=>{n?n.focus():t.current&&t.current.focus()}},[e])}function I3e(e){const{fileName:t,fileType:n,role:s,layout:o="grid"}=e,r=n!==""?n:x3(t);return Bl(r)?i.jsx(E3,{fileName:t,fileType:r,role:s,layout:o}):null}const _3e=[{canHandle:e=>e.startsWith("https://"),getImageSrc:e=>e,shouldReleaseOnLoad:!1},{canHandle:e=>e.startsWith("/attachments")||e.startsWith("/sharing"),getImageSrc:e=>Dfe(e),shouldReleaseOnLoad:!0}];function T3e(e){return _3e.find(t=>t.canHandle(e))??null}function A3e({url:e,layout:t="grid"}){const{t:n}=q(),[s,o]=c.useState(null),[r,a]=c.useState(!1),l=t==="list";return c.useEffect(()=>{if(!e){o(null);return}const u=T3e(e);if(!u){o(null);return}(async()=>{const m=await u.getImageSrc(e);o(m),a(u.shouldReleaseOnLoad)})()},[e]),s?i.jsx("img",{className:F("block h-full overflow-hidden bg-background-static-250 object-cover object-center shadow-inner dark:bg-background-static-900",{"rounded-xl":l,"rounded-2xl":!l}),alt:n("chat.uploadedImageAltText"),src:s,onLoad:r?Lfe:void 0}):null}function k3e(){const{t:e}=q(),t=W("file-upload-card-v2");return i.jsx("div",{className:"flex w-fit justify-end",children:i.jsx("div",{className:F("flex items-center justify-center rounded-xl border ",t?"mt-1 h-small-attachment border-black/8 px-4":"h-32 w-44 border-stroke-250 bg-accent-200 px-4 py-2 dark:bg-accent-250"),children:t?i.jsx(IN,{className:"size-6"}):i.jsx("span",{className:"text-center text-foreground-450 text-sm",children:e("share.imagePlaceholder")})})})}function TN(e){var g;const{messageItem:t,isForSharing:n,imageClassName:s,role:o,layout:r="grid"}=e,{t:a}=q(),l=!Gt("kill-share-c2"),u=W("file-upload-card-v2"),d=!Gt("kill-share-conversation-with-attachments"),m=r==="list";if(t.type==="document")return i.jsx(I3e,{fileType:t.contentType,fileName:t.fileName,role:o,layout:r});const f=t.type==="image"&&t.url.startsWith("/attachments");if(l&&!d&&n&&f)return i.jsx(k3e,{});const h=!!((g=re.instance().config().composer)!=null&&g.smallAttachmentCard)||u;return t.type==="image"?i.jsxs("div",{className:F("inline-block h-full max-w-[min(80%,256px)] align-top",s,{"mt-1 h-small-attachment":h,"flex w-full max-w-full gap-2":m}),role:o,children:[i.jsx("div",{className:F("h-full w-fit min-w-0",{"h-8 w-8":m&&h}),children:i.jsx(A3e,{url:t.url,layout:r})}),m&&i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:F("font-ligatures-none overflow-hidden truncate whitespace-nowrap text-sm"),children:a("library.itemTypes.image")}),i.jsx("p",{className:"line-clamp-1 uppercase text-foreground-600 text-xs",children:(t.url||"").split(".").pop()})]})]}):null}function AN(e){const{onRemove:t,onClose:n,messages:s=[],attachments:o=[],isForSharing:r,restoreFocusRef:a}=e;_N(a);const l=W("file-upload-card-v2"),{t:u}=q();return o.length===0&&s.length===0?null:i.jsxs(dn,{isOpen:!0,fullBleed:!0,className:F("max-h-[580px] min-h-[480px] w-full justify-between p-6",{"sm:w-[640px]":!l,"sm:w-[500px]":l}),onClose:n,dialogName:u("userInput.filePreviewModalTitle"),children:[i.jsx("h1",{className:"w-full shrink-0 text-center leading-8 text-2xl",children:u("userInput.filePreviewModalTitle")}),i.jsx("div",{className:"max-h-[450px] min-h-0 flex-1 overflow-y-auto p-4",children:i.jsx("div",{role:"list",className:F("flex  gap-y-1",{"flex-wrap content-start gap-x-2":!l,"flex-col":l}),children:o.length>0?o.map((d,m)=>i.jsx(X3,{layout:l?"list":"grid",attachment:d,onRemove:()=>t==null?void 0:t(m),role:"listitem",ariaLabel:u("fileUpload.ariaLabel.listitem",{index:m+1,total:o.length})},`attachment-${m}`)):s.map((d,m)=>i.jsx(TN,{layout:l?"list":"grid",messageItem:d,imageClassName:"h-32",role:"listitem",isForSharing:r},`message-${m}`))})}),i.jsx(ne,{color:l?"subtle-dimmed-inverted":"strong",className:"w-full shrink-0",title:u("common.dismiss"),onClick:n,children:u("common.dismiss")})]})}function M3e(e){var E;const{attachments:t,onRemove:n,onVisibilityChange:s}=e,{t:o}=q(),r=c.useRef(null),a=c.useMemo(()=>t.filter(S=>!S.error),[t]),l=c.useMemo(()=>a.slice(0,ap),[a]),u=c.useMemo(()=>a.slice(ap),[a]),d=u.filter(S=>S.processing).length,[m,f]=c.useState(!1),h=c.useCallback(S=>{const I=t[S];I!=null&&I.file&&(n(S),a.length<=1&&(f(!1),s==null||s(!1)))},[t,n,a,s]),g=c.useCallback(()=>{ho({msg:o("userInput.seeAll"),type:"polite"}),f(!0),s==null||s(!0)},[f,o,s]),C=c.useCallback(()=>{f(!1),s==null||s(!1)},[f,s]),v=d>0?o("userInput.uploadingProcess",{uploadingCount:d,totalCount:u.length}):o("userInput.seeAll"),y=W("file-upload-card-v2"),b=!!((E=re.instance().config().composer)!=null&&E.smallAttachmentCard)||y;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative flex max-h-64 min-w-0 max-w-full flex-wrap gap-2 overflow-y-auto overflow-x-hidden p-1",children:[l.map((S,I)=>i.jsx(X3,{attachment:S,onRemove:()=>h(t.indexOf(S)),ariaLabel:o("fileUpload.ariaLabel.listitem",{index:I+1,total:a.length})},S.id??`file-${I}`)),u.length>0&&i.jsx(ne,{ref:r,"aria-label":v,title:v,color:"overlay-dimmed-inverted",onClick:g,className:F("flex cursor-pointer items-center justify-center rounded-xl border-none px-3.5 py-1 text-sm",{"mt-1 h-small-attachment":b,"h-32":!b}),children:d>0?i.jsxs(i.Fragment,{children:[i.jsx(it,{className:"size-6"}),o("userInput.uploadingProcess",{uploadingCount:d,totalCount:u.length})]}):i.jsx(i.Fragment,{children:o("userInput.seeAll")})})]}),m&&i.jsx(AN,{onClose:C,attachments:t,onRemove:h,restoreFocusRef:r})]})}function N3e(e){const{categories:t,onClose:n,selectedCategoryIndex:s,handleCategoryClick:o}=e,{t:r}=q(),a=c.useRef(null),l=pl(a,{amount:"all"});return c.useEffect(()=>{l&&un({page:"chatPage",element:"chatStarterPillCategory",customData:JSON.stringify({visibleItems:t.map(u=>u.id)})})},[l,t]),i.jsx(Ok,{onClose:n,className:"px-3",children:i.jsxs("div",{className:"flex w-full flex-col items-center gap-4",ref:a,children:[i.jsx("h1",{className:"mt-2 px-3 text-lg-strong",children:r("widgets.categorySelectorModalHeader")}),i.jsx("ul",{className:"flex w-full list-none flex-col items-center",role:"list",children:t.map((u,d)=>i.jsx("li",{className:"w-full",children:i.jsx(ne,{className:"w-full",variant:"rect",color:"subtle-dimmed-inverted",title:u.label,onClick:()=>o(d),children:i.jsxs("span",{className:"flex w-full items-center justify-between",children:[i.jsx("span",{className:"truncate text-start",children:u.label}),s===d&&i.jsx(ih,{className:"ms-2 size-4 shrink-0 text-foreground-600 contrast-more:text-current"})]})})},u.id))})]})})}const R3e="contrast-more:outline contrast-more:after:border-2 contrast-more:after:absolute contrast-more:after:pointer-events-none contrast-more:after:w-2/3 contrast-more:after:h-2/3",P3e="text-foreground-550 active:text-foreground-350 dark:text-foreground-600 active:dark:text-foreground-550",L3e="bg-white/30 safe-hover:bg-black/3 active:bg-black/2 dark:bg-black/3 dark:safe-hover:bg-white/5 dark:active:bg-white/3",O3e="border-[1px] border-black/8 dark:border-white/8",D3e=`${P3e} ${L3e} ${O3e}`;function kN(e){const{children:t,isSelected:n,className:s,onClick:o,disabled:r,unselectedColorClass:a,variant:l="standard",testId:u,ariaLabel:d,ariaSetSize:m,ariaPosInSet:f,dataItemId:h}=e,{focusable:g}=Aa({autoRestoreFocus:!0,forceFocus:!0});let C;return n?C=_i.strong:l==="flat"?C=D3e:C=_i[a??"overlay-dimmed-inverted"],i.jsx("button",{disabled:r,type:"button",ref:g.ref,className:F("shadow-none dark:shadow-none",ld,PC["40-base"],LC["40-base"],V2["40-base"],um,C,s,n&&R3e),onClick:o,role:m?"radio":void 0,"aria-checked":m?n:void 0,"aria-pressed":m?void 0:n||void 0,"aria-label":d,"aria-setsize":m,"aria-posinset":f,"data-spatial-focus-key":g.focusKey,"data-testid":u,"data-item-id":h,children:t})}function j3e(e){const{text:t,onClick:n,className:s,testId:o,ariaLabel:r,dataItemId:a}=e;return i.jsx(kN,{isSelected:!1,variant:"flat",className:F("min-w-fit",s),onClick:n,testId:o,ariaLabel:r,dataItemId:a,children:i.jsx("span",{className:"px-1 text-sm",children:t})})}const U3e=1e3;function ey(){var m;const e=!!((m=re.instance().config().landingPage)!=null&&m.enablePromptedGreetings),t=YC(),n=W("conversation-starter-prompted-greeting-c1"),s=W("qa-conversation-starter-prompted-greeting-c1"),o=W("qa-conversation-starter-prompted-greeting-debug"),r=W("isenvironmentalsignallmgreeting"),a=W("isprovocativesignallmgreeting"),l=W("personalizedgreetings"),u=W("generatefakelatencygreeting");return e&&(!!t||n||s||o||(r||a||u)||l)}function F3e(){const[e,t]=Ue(RT),n=ey();return c.useEffect(()=>{let s;return n?(t(!1),s=window.setTimeout(()=>{t(!0)},U3e)):t(!1),()=>{s&&clearTimeout(s)}},[t,n]),e}const B3e=300,V3e=(e,t)=>{var n;return!e||t===void 0?null:e.type==="categories"?((n=e.categories[t])==null?void 0:n.items)??[]:e.type==="text"?e.items:null};function H3e(e){const{className:t,onWidgetClick:n,pageName:s="chatPage",widgetSource:o,starterPromptsData:r,shouldStackChips:a,shouldCenterChips:l,containerId:u="",selectedCategory:d,onCategoryClick:m}=e,f=c.useRef(null),h=c.useRef(new Set),{t:g}=q(),C=pl(f,{once:!0,amount:"all"}),v=gt({breakpoint:"sm"});c.useEffect(()=>{const E=(d==null?void 0:d.id)??"default";if(C&&f.current&&!h.current.has(E)){h.current.add(E);const S=setTimeout(()=>{requestAnimationFrame(()=>{const I=y(f);un({page:s,scenario:o,element:"chatStarterPills",customData:JSON.stringify({visibleItems:I,totalItems:I.length,category:d==null?void 0:d.id})})})},B3e);return()=>clearTimeout(S)}return()=>{}},[s,C,d==null?void 0:d.id,r,o]);const y=E=>{const S=E.current;if(!S)return[];const I=S.getBoundingClientRect(),_=S.querySelectorAll("[data-item-id]"),T=[];for(const A of _){const k=A.getBoundingClientRect(),N=A.getAttribute("data-item-id"),V=Math.max(0,Math.min(k.right,I.right)-Math.max(k.left,I.left))/k.width;N&&V>=.5&&T.push(N)}return T},b=E=>{const{prompt:S,id:I,actionType:_,source:T,text:A,index:k}=E;ye({pageName:s,source:o,scenario:I,customData:JSON.stringify({prompt:S,text:A,index:k,category:d==null?void 0:d.id})}),n({actionType:_,id:I,prompt:S,source:T})};return i.jsxs(ln,{role:"list",className:F("flex w-full gap-2 px-1 py-1 sm:flex-wrap sm:py-4",a?"mb-3 flex-col items-end space-y-1 sm:flex-row":"scrollbar-container max-h-[110px] overflow-x-auto overflow-y-hidden",l?"sm:justify-center":"sm:justify-start",t),id:u,ref:f,children:[d&&v&&i.jsx(ne,{onClick:m,title:d.label,className:"min-w-fit",color:"overlay-dimmed-inverted",children:i.jsxs("span",{className:"flex items-center gap-2",children:[d.label,i.jsx(ds,{className:"size-4 -rotate-90"})]})}),r.map((E,S)=>{const{id:I,text:_}=E,{type:T}=E.action,A="prompt"in E.action?E.action.prompt:void 0,k=g("composer.starterPromptAriaLabel",{text:_,index:S+1,total:r.length});return i.jsx(j3e,{text:_,onClick:()=>b({prompt:A,id:I,actionType:T,source:"pills",text:_,index:S}),className:ue(a&&"w-auto min-w-min max-w-[80%] text-start"),testId:`starter-prompt-${I}`,ariaLabel:k,dataItemId:I},I)})]})}function z3e(e){var y;const{className:t,onWidgetClick:n,pageName:s="chatPage",selectedCategory:o,selectedCategoryIndex:r,onCategoryClick:a}=e,l=M(nh),u=ey(),d=M(RT),{isAppearanceOnHomeEnabled:m}=Tm(),f=m||(l==null?void 0:l.type)==="categories",h=M(JC),g=(y=re.instance().config().landingPage)==null?void 0:y.stackStarterChipsForSmallScreens;let C="";h?C=h:o&&(C=o.id);const v=V3e(l,r);return u&&!d||!v?null:i.jsx(H3e,{onWidgetClick:n,className:t,pageName:s,starterPromptsData:v,widgetSource:(l==null?void 0:l.source)??"chatStarterPills",shouldStackChips:g,shouldCenterChips:f,containerId:C,selectedCategory:o,onCategoryClick:a})}const G3e=c.lazy(()=>B(()=>import("./starter-prompt-category-CtjXYg9P.js"),__vite__mapDeps([374,1])));function W3e(e){const{className:t,onWidgetClick:n,pageName:s="chatPage"}=e,o=M(nh),r=gt({breakpoint:"sm"}),[a,l]=Ue(rce),[u,d]=c.useState(!1),m=C=>{var v;C!==a&&(l(C),ye({source:"chatStarterPillCategory",pageName:"chatPage",destination:f?(v=f[C])==null?void 0:v.id:void 0})),d(!1)},f=o&&o.type==="categories"?o.categories.map(C=>({id:C.id,label:C.label})):void 0,h=f&&!r,g=u&&f&&r;return!o||!["text","categories"].includes(o.type)?null:i.jsxs("div",{className:F("mx-auto flex w-full flex-col gap-3 px-2",t),children:[h&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"mt-2 h-8 w-full"}),children:i.jsx(G3e,{categories:f,handleCategoryClick:m,selectedCategoryIndex:a,className:"mt-2"})}),i.jsx(z3e,{onWidgetClick:n,pageName:s,selectedCategory:f?f[a]:void 0,selectedCategoryIndex:a,onCategoryClick:f?()=>d(!0):void 0}),g&&i.jsx(N3e,{categories:f,handleCategoryClick:m,selectedCategoryIndex:a,onClose:()=>d(!1)})]})}function $3e(e){var r;const{item:t,onClick:n}=e,s=M(je),o=c.useRef(void 0);return c.useEffect(()=>{s&&o.current!==s&&t.onImpression&&(o.current=s,t.onImpression(s))},[s,t]),i.jsxs(ne,{title:t.title,"aria-label":t.title,variant:"rect",color:"subtle-dimmed-inverted",onClick:n,size:"40-base",alignment:"start",className:"min-w-[230px] gap-3 px-3 py-2",testId:t.testId,role:"menuitem",children:[i.jsx("div",{children:t.icon}),i.jsxs("div",{className:"grow text-left",children:[i.jsxs("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:[t.title,(r=t.tags)==null?void 0:r.map(a=>i.jsx("div",{className:"flex items-center",children:i.jsx(Du,{color:a.color,children:i.jsx("span",{className:"leading-4",children:a.label})},a.label)},a.label))]}),t.description&&i.jsx("p",{className:"line-clamp-1 leading-4 text-foreground-600 text-xs dark:text-foreground-650",children:t.description})]})]},t.key)}const MN="/static/cmc/assets/dismiss-strong-C4wQ_QdN.svg";function ty(e){const{items:t,value:n,defaultValue:s,onSelect:o,onReset:r,onMenuClick:a,disabled:l,showDefaultItemInDropdown:u=!1,renderHeader:d,renderFooter:m,alwaysShowDefault:f=!1,floatingOffset:h=4}=e,g=M(je),C=c.useRef(void 0),{selectedItem:v,dropdownItems:y,selectedNonDefault:b}=c.useMemo(()=>({selectedItem:t.find(E=>E.key===(f?s:n)),dropdownItems:u?t:t.filter(E=>E.key!==s),selectedNonDefault:n!==s&&!f}),[t,n,s,u,f]);return c.useEffect(()=>{g&&C.current!==g&&v&&v.onImpression&&(C.current=g,v.onImpression(g))},[g,v]),i.jsx(wm,{color:"default",role:"menu",renderTrigger:({openPopover:E})=>v&&i.jsxs(ne,{title:v.title,"aria-label":v.title,variant:"rect",size:"36-sm",disabled:l,color:b?"composer-selected":"subtle-dimmed",className:F("h-9 select-none gap-1 rounded-2xl border border-black/8 dark:border-white/8",v.isIconEnabledInButton?"pe-3 ps-2":"pe-3.5 ps-2.5",v.isChevronEnabledInButton&&"pe-2.5",v.hideButtonTitle&&"p-0"),onClick:S=>{var I;a==null||a(),(I=v.beforeClick)==null||I.call(v,g??""),b?r():E(S)},testId:v.testId,children:[b?i.jsx(St,{url:MN,className:"size-3.5"}):v.isIconEnabledInButton&&v.icon,!v.hideButtonTitle&&i.jsx("span",{elementtiming:_A,className:"text-sm",children:v.buttonTitle??v.title}),!b&&v.isChevronEnabledInButton&&i.jsx(ds,{className:"size-4 rotate-90"})]}),renderSurface:({closePopover:E})=>i.jsxs("div",{className:"flex flex-col",children:[d&&d({closePopover:E}),y.map(S=>i.jsx($3e,{item:S,onClick:I=>{var _;(_=S.beforeSelect)==null||_.call(S,g??""),o(S.key),E(I)}},S.key)),m&&m({closePopover:E})]}),containerClassNames:{surface:"p-1.5 border-white/25 dark:border-stroke-400/25 shadow-tinted-xl"},placement:"bottom-start",floatingOffset:h})}ty.displayName="ComposerDropdownButton";const q3e=R(null);function ny(){const e=!Gt("kill-coco-isolation"),[t,n]=Ue(q3e),s=wr(),o=M(hn),r=((o==null?void 0:o.history.length)??0)>0,a=e&&r,l=t!==null,u=(f,h)=>{n({targetMode:f,onModalConfirm:h})},d=()=>{n(null)};return{isOpen:l,hasConversationHistory:r,shouldAskForConfirmation:a,onConfirm:async()=>{t&&(await s(),t.onModalConfirm(),d())},onOpen:u,onClose:d,targetMode:(t==null?void 0:t.targetMode)??null}}const K3e=[new Set(["chat","smart","study","reasoning","research","computerUse","search"]),new Set(["coco"])];function C5(e,t){let n=null;for(const s of K3e)s.has(e)&&(n=s);return n?n.has(t):!1}const Z3e=["chat","coco","smart","reasoning","study","search"];function Y3e(e){const{disabled:t=!1}=e,n=Q3e(),s=Pl(),o=W("smart-mode-default"),r=W("smart-mode-coachmark"),a=Ys(),{dismissCoachmark:l}=qo(Rm),{onOpen:u,shouldAskForConfirmation:d}=ny(),m=c.useCallback(y=>{Zt(y),y==="smart"&&l(),n5()},[l]),f=c.useCallback(y=>{if(d&&!C5(a,y)){u(y,()=>{m(y)});return}m(y)},[m,d,a,u]),h=c.useCallback(()=>{Zt(vn()),n5()},[]),g=c.useCallback(()=>{const y=vn();if(d&&!C5(a,y)){u(y,()=>{h()});return}h()},[h,d,a,u]),C=Z3e.includes(a)?a:"chat",v=i.jsx(ty,{items:n,onSelect:f,value:C,defaultValue:vn(),showDefaultItemInDropdown:!0,onReset:g,disabled:t,onMenuClick:()=>ye({source:"composerChatModeDropdownButton",pageName:"chatPage",customData:JSON.stringify({currentMode:a})})});return s&&r&&!o?i.jsx(BM,{triggerComponent:v,offset:10}):v}function Cc(e){return()=>un({element:"composerModeButton",scenario:e,page:"chatPage"})}function yc(e){return t=>ye({source:"composerModeButton",scenario:e,conversationId:t})}function bc(e){return t=>ye({source:"composerDrawerTypeSheet",scenario:e,conversationId:t})}function Q3e(){const{t:e}=q("translation"),t=Pl(),n=vT(),s=W("smart-mode-default"),o=WC(),r=W("study-mode"),a=GC(),l=[],u={key:"smart",title:n.title,icon:i.jsx(St,{url:LM,className:"size-5"}),description:n.description,testId:"composer-chat-mode-smart-button",isChevronEnabledInButton:!0,onImpression:Cc("smart"),beforeSelect:bc("smart"),beforeClick:yc("exitSmart")};t&&s&&l.push(u);const d={key:"chat",title:e("composer.chatModes.chat.title"),buttonTitle:e("composer.chatModes.chat.title"),icon:i.jsx(St,{url:RM,className:"size-5"}),description:e("composer.chatModes.chat.description"),testId:"composer-chat-mode-quick-button",onImpression:Cc("quick"),beforeSelect:bc("quickResponse"),beforeClick:yc("showDrawer"),isChevronEnabledInButton:!0,isIconEnabledInButton:!1};l.push(d);const m={key:"coco",title:e("composer.chatModes.coco.title"),icon:i.jsx(St,{url:NM,className:"size-5"}),description:e("composer.chatModes.coco.description"),testId:"composer-chat-mode-coco-button",onImpression:Cc("coco"),beforeSelect:bc("coco"),beforeClick:yc("exitCoco")};a&&l.push(m);const f={key:"reasoning",title:X7,icon:i.jsx(St,{url:DM,className:"size-5"}),description:e("composer.chatModes.reasoning.description"),testId:"composer-chat-mode-reasoning-button",onImpression:Cc("thinkDeeper"),beforeSelect:bc("thinkDeeper"),beforeClick:yc("exitThinkDeeper")};FM()||l.push(f);const h={key:"study",title:e("composer.chatModes.study.title"),icon:i.jsx(St,{url:OM,className:"size-5"}),description:e("composer.chatModes.study.description"),testId:"composer-chat-mode-study-button",onImpression:Cc("study"),beforeSelect:bc("study"),beforeClick:yc("exitStudy")};r&&l.push(h),t&&!s&&l.push(u);const g={key:"search",title:pB,icon:i.jsx(St,{url:jM,className:"size-5"}),description:e("composer.chatModes.search.description"),testId:"composer-chat-mode-search-button",onImpression:Cc("search"),beforeSelect:bc("search"),beforeClick:yc("exitSearch")};return o&&l.push(g),l}const J3e="/static/cmc/assets/tab-add-6wnFKKVV.svg";function X3e(e){const{onSelectUserOpenedTabs:t}=e,{t:n}=q();return i.jsx(ne,{title:n("composer.multiTabs.addTab"),"aria-label":n("composer.multiTabs.addTab"),variant:"rect",color:"subtle-dimmed-inverted",onClick:t,size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-tabs-button",children:i.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl px-3 py-2",children:[i.jsx(St,{url:J3e,className:"size-5"}),i.jsx("div",{className:"grow text-left",children:i.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:n("composer.multiTabs.addTab")})})]})})}const eye="/static/cmc/assets/clipboard-paste-DO-hzNqO.svg",tye="/static/cmc/assets/paperclip-CMVChwA7.svg";function h0(e){const{onClick:t,onImpression:n,uploadButtonDisabled:s,title:o,icon:r}=e,a=c.useRef(null),l=pl(a,{once:!0,amount:"all"});return c.useEffect(()=>{l&&n&&n()},[l,n]),i.jsx(ne,{ref:a,title:o,"aria-label":o,variant:"rect",color:"subtle-dimmed-inverted",onClick:t,size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-images-files",disabled:s,children:i.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl px-3 py-2",children:[r,i.jsx("div",{className:"grow text-left",children:i.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:o})})]})})}function nye(e){const{onSelectFile:t,onPasteTextClick:n,uploadButtonDisabled:s,onSelectOneDriveFile:o}=e,{t:r}=q(),a=ut();return i.jsxs("div",{className:"flex flex-col",children:[i.jsx(h0,{onClick:t,uploadButtonDisabled:s,title:r("composer.connector.addImagesFiles"),icon:i.jsx(St,{url:tye,className:"size-5"})}),n&&i.jsx(h0,{onImpression:()=>{un({page:a==="/"?"landing":"chat",element:"uploadTextModalCta"})},onClick:n,uploadButtonDisabled:s,title:r("fileUpload.pasteText"),icon:i.jsx(St,{url:eye,className:"size-5"})}),o&&i.jsx(h0,{onClick:o,uploadButtonDisabled:s,title:r("composer.addFromOneDrive"),icon:i.jsx(ph,{className:"size-5"})})]})}const NN=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M7.87869 8.5858C7.48348 8.84756 7.00954 9 6.5 9C5.11929 9 4 7.88071 4 6.5C4 5.11929 5.11929 4 6.5 4C7.88071 4 9 5.11929 9 6.5C9 7.00954 8.84756 7.48348 8.5858 7.8787L10.6213 9.9142C11.0165 9.65244 11.4905 9.5 12 9.5C12.5095 9.5 12.9835 9.65244 13.3787 9.9142L15.4142 7.87869C15.1524 7.48348 15 7.00954 15 6.5C15 5.11929 16.1193 4 17.5 4C18.8807 4 20 5.11929 20 6.5C20 7.88071 18.8807 9 17.5 9C16.9905 9 16.5165 8.84756 16.1213 8.5858L14.0858 10.6213C14.3476 11.0165 14.5 11.4905 14.5 12C14.5 12.5095 14.3476 12.9835 14.0858 13.3787L16.1213 15.4142C16.5165 15.1524 16.9905 15 17.5 15C18.8807 15 20 16.1193 20 17.5C20 18.8807 18.8807 20 17.5 20C16.1193 20 15 18.8807 15 17.5C15 16.9905 15.1524 16.5165 15.4142 16.1213L13.3787 14.0858C12.9835 14.3476 12.5095 14.5 12 14.5C11.4905 14.5 11.0165 14.3476 10.6213 14.0858L8.5858 16.1213C8.84756 16.5165 9 16.9905 9 17.5C9 18.8807 7.88071 20 6.5 20C5.11929 20 4 18.8807 4 17.5C4 16.1193 5.11929 15 6.5 15C7.00954 15 7.48348 15.1524 7.87869 15.4142L9.9142 13.3787C9.65244 12.9835 9.5 12.5095 9.5 12C9.5 11.4905 9.65244 11.0165 9.9142 10.6213L7.87869 8.5858ZM8 6.5C8 5.67157 7.32843 5 6.5 5C5.67157 5 5 5.67157 5 6.5C5 7.32843 5.67157 8 6.5 8C7.32843 8 8 7.32843 8 6.5ZM19 6.5C19 5.67157 18.3284 5 17.5 5C16.6716 5 16 5.67157 16 6.5C16 7.32843 16.6716 8 17.5 8C18.3284 8 19 7.32843 19 6.5ZM6.5 19C7.32843 19 8 18.3284 8 17.5C8 16.6716 7.32843 16 6.5 16C5.67157 16 5 16.6716 5 17.5C5 18.3284 5.67157 19 6.5 19ZM19 17.5C19 16.6716 18.3284 16 17.5 16C16.6716 16 16 16.6716 16 17.5C16 18.3284 16.6716 19 17.5 19C18.3284 19 19 18.3284 19 17.5ZM13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.2}));function RN(e){const{isChecked:t,label:n,description:s,onChange:o,accessory:r,disabled:a,testId:l,className:u,labelClassName:d,descriptionClassName:m}=e,f=c.useId(),[h,g]=c.useState(!1),C=qi(),v=S=>{S.currentTarget.matches(":focus-visible")&&g(!0)},y=()=>g(!1),{focusable:b}=Aa({autoRestoreFocus:!0,forceFocus:!0});let E=t?"bg-system-green-400":"bg-black/20 dark:bg-white/20";return a&&(E="bg-black/20 after:bg-white/40 dark:bg-white/20 dark:after:bg-black/40"),i.jsxs("label",{className:F("flex items-center justify-between gap-4",!a&&"cursor-pointer",u),htmlFor:f,ref:b.ref,"data-testid":l,children:[i.jsxs("div",{className:"flex flex-1 flex-col",children:[i.jsx("span",{className:F("text-foreground-800 text-sm",d),children:n}),s&&i.jsx("span",{className:F("font-medium text-foreground-450 text-sm",m),children:s})]}),i.jsxs("span",{className:"flex flex-row items-center gap-2",children:[r,i.jsx("input",{id:f,type:"checkbox",title:n,checked:t,onChange:S=>o(S.target.checked),onFocus:v,onBlur:y,className:"sr-only",disabled:a}),i.jsx("div",{className:F("relative h-6 w-10 rounded-full","after:absolute after:size-5 after:rounded-full after:transition-all contrast-more:forced-color-adjust-none",C?"rotate-180 after:bottom-[2px] after:end-[2px]":"after:start-[2px] after:top-[2px]",E,!a&&"after:bg-white after:shadow-switch after:hover:scale-110 after:active:w-6",t&&"after:translate-x-4",t&&!a&&"after:active:translate-x-3",h&&"outline outline-2 outline-offset-2")})]})]})}function PN(e){const{isInComposer:t=!1,IconComponent:n,title:s,isToggleOn:o,showToggle:r,showConnect:a=!1,isDisConnected:l=!1,onClickToggle:u,onClickMore:d,onClickConnect:m,description:f}=e,h=F("flex items-center ",t?"gap-3":"gap-2"),g=F("shrink-0",t?"size-4":"size-5"),C=l?z("connector.connect"):z("connector.reconnect");return i.jsxs("div",{className:F(t?"py-1.5 ps-3.5 text-sm":"flex flex-col gap-2 p-2",t&&r?"pe-2.5":"pe-1"),children:[a&&i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:h,children:[i.jsx(n,{className:g}),i.jsx("span",{className:"text-foreground-800 text-sm",children:s})]}),i.jsx(ne,{className:F("px-2 text-sm",t&&"opacity-65 focus-visible:opacity-100 safe-hover:opacity-100"),title:C,size:"28-xxs",color:t?"subtle-dimmed-inverted":"default",onClick:m,children:C})]}),r&&i.jsxs("div",{className:h,children:[i.jsx(n,{className:g}),i.jsx(RN,{className:"w-full",labelClassName:"text-sm",label:s,isChecked:o,onChange:u})]}),!t&&i.jsxs("div",{className:"text-foreground-700 text-xs",children:[i.jsx("span",{className:"me-1",children:f}),i.jsx(ne,{"aria-label":z("connector.moreDetailsAriaLabel",{description:f}),title:z("connector.moreDetails"),className:"inline-block h-auto min-h-0 whitespace-nowrap p-0 leading-none text-foreground-700 underline text-xs",onClick:d,color:"subtle-bright",children:z("connector.moreDetails")})]})]})}function sye({connectorType:e,triggerSource:t}){const{pushPage:n}=Er(),s=se(mw),{getConnectorAppInfo:o,handleToggle:r}=Vl(),{id:a,status:l,title:u,IconComponent:d,description:m}=o(e)??{},f=t==="composer";return c.useEffect(()=>{jk(e,l??"unavailable",f?"composer":"settingsConnectorList")},[e,l,f]),!l||!u||!d||!m?null:i.jsx(PN,{isInComposer:f,IconComponent:d,title:u,description:m,showToggle:l==="disconnected"||l==="ready"||l==="disabled",isToggleOn:l==="ready",showConnect:!1,isDisConnected:!1,onClickConnect:()=>{},onClickToggle:()=>{ju(e,l,f?"composer":"settingsConnectorList",l==="ready"?"toggleOff":"toggleOn"),r(a,l==="ready"?"disabled":"ready")},onClickMore:()=>{s(e),ju(e,l,"settingsConnectorList","goToDetail"),n("connector-detail")}})}function oye({connectorType:e,triggerSource:t,closePage:n}){const{pushPage:s,closeSettings:o}=Er(),r=se(mw),{getConnectorAppInfo:a,handleConnect:l,handleToggle:u}=Vl(),{id:d,status:m,title:f,IconComponent:h,description:g}=a(e)??{},C=t==="composer",v=c.useRef(null),y=pl(v,{amount:"all",once:!0});c.useEffect(()=>{y&&jk(e,m??"unavailable",C?"composer":"settingsConnectorList")},[e,m,C,y]);const b=c.useCallback(I=>{l(e,C?"composer":"settingsConnectorList"),ju(e,m,C?"composer":"settingsConnectorList","connect"),o(),n==null||n(I)},[e,m,l,o,n,C]),E=c.useCallback(()=>{ju(e,m,C?"composer":"settingsConnectorList",m==="ready"?"toggleOff":"toggleOn"),u(d,m==="ready"?"disabled":"ready")},[e,m,u,d,C]),S=c.useCallback(()=>{r(e),ju(e,m,C?"composer":"settingsConnectorList","goToDetail"),s("connector-detail")},[e,m,s,r,C]);return!m||!f||!h||!g?null:i.jsx("div",{ref:v,children:i.jsx(PN,{isInComposer:C,IconComponent:h,title:f,description:g,showToggle:m==="ready"||m==="disabled",isToggleOn:m==="ready",showConnect:m==="disconnected"||m==="sign-in-required",isDisConnected:m==="disconnected",onClickConnect:b,onClickToggle:E,onClickMore:S})})}const sy=()=>{const e=W("settings-as-modal"),t=Rp({key:"useDialogLayout",default:!1}),n=gt({breakpoint:"sm"});return e&&!n&&!t};function rye(e,t){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerCreateButton",eventInfo_impressionScenario:e??"off",eventInfo_conversationId:t}})}function LN(e){D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerScreenshotButton",eventInfo_conversationId:e}})}function aye(e,t){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerCreateButton",eventInfo_clickScenario:iye(e),eventInfo_conversationId:t}})}function iye(e){if(!e)return"showDrawer";switch(e){case"actions":return"exitActions";case"image":return"exitImage";case"podcast":return"exitPodcast";case"researchReport":return"exitResearchReport";case"quiz":return"exitQuiz";case"video":return"exitVideo";default:return"showDrawer"}}function ON(e){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerScreenshotButton",eventInfo_conversationId:e}})}function DN(e,t){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:e,eventInfo_clickScenario:t}})}function cye(e,t){const n=t==null?void 0:t.dataset.spatialFocusKey;n&&(e==null||e.setFocus(n,{}))}function lye(e){c.useEffect(()=>(window.addEventListener("keyup",e),()=>{window.removeEventListener("keyup",e)}),[e])}function uye(e){const{title:t,onClickBack:n,rightView:s,onClickClose:o}=e,r=c.useRef(null),a=Z_(),l=sy(),u=o&&!l?i.jsx(ne,{title:z("common.closeText"),variant:"circle",size:"32-xs",onClick:o,className:"col-start-3 justify-self-end",color:"subtle-bright-inverted",testId:"close-settings-button",children:i.jsx(an,{className:"size-5","aria-hidden":!0})}):null;return lye(d=>{d.key==="Enter"&&r.current&&r.current.focus(),(d.key==="Enter"||k3(d))&&cye(a,r.current)}),i.jsxs("div",{className:"flex items-center pb-4",children:[i.jsx(ne,{ref:r,variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:z("common.backText"),onClick:n,testId:"nav-header-back-button",children:i.jsx(Il,{className:"size-5 -rotate-90"})}),i.jsx("h2",{className:ue("mt-px grow text-center uppercase text-foreground-450 text-xs dark:text-foreground-600",!s&&"pe-8"),children:t}),s??u]})}function jN({triggerSource:e="settings",closePage:t}){const n=e==="composer",o=!sy()&&!n,{goBackOrClose:r}=Er(),{getSortedConnectors:a,isFirstParty:l}=Vl(),[u,d]=a(),m=gt({breakpoint:"md"}),f=h=>l(h.type)?i.jsx(sye,{connectorType:h.type,triggerSource:e},h.type):i.jsx(oye,{connectorType:h.type,triggerSource:e,closePage:t},h.type);return i.jsxs("div",{className:n?"min-w-60":"pb-3",children:[o&&i.jsx(uye,{title:z("settings.connectedAppsTitle"),onClickBack:r}),i.jsxs("div",{className:F("flex flex-col",!n&&"gap-1.5"),children:[u.map(f),u.length>0&&d.length>0&&i.jsx(ms,{className:n?"mx-2 my-1":"my-2",horizontalMargin:!1,color:"default"}),d.map(f),n&&!m&&i.jsxs(ne,{variant:"rect",title:z("connector.composer.settings"),color:"subtle-dimmed-inverted",className:"h-6 w-full justify-start gap-2.5 px-3 py-1.5 text-sm",onClick:h=>{DN("composer","connectorSettings"),t==null||t(h),setTimeout(()=>{zT("connector-list")},200)},children:[i.jsx(Em,{className:"size-5 shrink-0"}),i.jsx("div",{className:"text-foreground-800 text-sm",children:z("connector.composer.settings")})]})]})]})}function dye(e){const{t}=q(),{closeDropdown:n}=e,s=gt({breakpoint:"sm"});return i.jsx(wm,{color:"default",renderTrigger:({openPopover:o})=>i.jsx(ne,{title:t("composer.connector.useConnector"),"aria-label":t("composer.connector.useConnector"),variant:"rect",color:"subtle-dimmed-inverted",onClick:r=>{o(r),DN("composer","useConnectors")},size:"40-base",alignment:"start",className:"w-full rounded-xl p-0",testId:"add-tabs-button",children:i.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl pe-2 ps-3",children:[i.jsx(NN,{className:"size-5"}),i.jsxs("div",{className:"flex grow items-center justify-between text-left",children:[i.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:t("composer.connector.useConnector")}),i.jsx(ds,{className:"size-4"})]})]})}),renderSurface:({closePopover:o})=>i.jsx("div",{className:"flex flex-col",children:i.jsx(jN,{triggerSource:"composer",closePage:r=>{o(r),n(r)}})}),containerClassNames:{surface:`p-1.5 border-white/25 dark:border-stroke-400/25 shadow-tinted-xl ${s?"":"-ml-2.5"}`},placement:s?"top-start":"right-end"})}const mye="/static/cmc/assets/screenshot-DXZDs5NE.svg";function fye(e){const{onTakeScreenshot:t}=e,{t:n}=q(),s=M(je),o=c.useRef(void 0);return c.useEffect(()=>{o.current!==s&&LN(s)},[s]),i.jsx(ne,{title:n("composer.takeScreenshot"),"aria-label":n("composer.takeScreenshot"),variant:"rect",color:"subtle-dimmed-inverted",onClick:r=>{t(r),ON(s)},size:"40-base",alignment:"start",className:"min-w-[230px] rounded-xl p-0",testId:"add-tabs-button",children:i.jsxs("div",{className:"flex h-10 w-full items-center gap-3 rounded-xl px-3 py-2",children:[i.jsx(St,{url:mye,className:"size-5"}),i.jsx("div",{className:"grow text-left",children:i.jsx("div",{className:"line-clamp-1 inline-flex gap-1.5 text-sm",children:n("composer.takeScreenshot")})})]})})}const pye="/static/cmc/assets/add-BTcFT5ig.svg",hye="/static/cmc/assets/image-zMo0jLdY.svg",gye="/static/cmc/assets/podcast-BQmBU8ew.svg",vye="/static/cmc/assets/quiz-mPcJG41j.svg",Cye="/static/cmc/assets/video-clip-9pviB4uv.svg";function yye(e,t){switch(e){case"image":return t("composer.create.image.prompt");case"podcast":return t("composer.create.podcast.prompt");case"researchReport":return t("composer.create.researchReport.prompt");case"quiz":return t("composer.create.quiz.prompt");case"actions":return t("composer.create.actions.prompt");case"video":return t("composer.create.video.prompt");case null:default:return""}}function bye(){const{t:e}=q();return{setComposerCreateModeWithPrefill:c.useCallback(n=>{const s=yye(n,e);P1(n),s&&hd({prompt:s,prefillSource:"create"})},[e])}}function oy(){const e=se(zk),t=c.useCallback(s=>{e(s)},[e]),n=c.useCallback(s=>{e(s)},[e]);return{handleFeatureUpsell:t,handleFeatureLimitReached:n}}function xye(){const{t:e}=q(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=oy(),s=sh();return c.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({allowUpsell:!1,title:e("proSubscription.modal.featureLimitReached.deepResearch.title"),subtitle:e("proSubscription.modal.featureLimitReached.deepResearch.subtitleIneligible"),payflowEntryPoint:"DeepResearchLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit",disabledReason:s.disabledReason??""});return}const{subscriptions:o}=s;let r;o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.deepResearch.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.deepResearch.subtitleUpgradable":r="",t({allowUpsell:!0,title:e("proSubscription.modal.featureLimitReached.deepResearch.title"),subtitle:e(r),payflowEntryPoint:"DeepResearchLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}function Sye(){const{t:e}=q(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=oy(),s=sh();return c.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({allowUpsell:!1,title:e("proSubscription.modal.featureLimitReached.podcast.title"),subtitle:e("proSubscription.modal.featureLimitReached.podcast.subtitleIneligible"),payflowEntryPoint:"PodcastLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit",disabledReason:s.disabledReason??""});return}const{subscriptions:o}=s;let r;o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.podcast.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.podcast.subtitleUpgradable":r="",t({allowUpsell:!0,title:e("proSubscription.modal.featureLimitReached.podcast.title"),subtitle:e(r),payflowEntryPoint:"PodcastLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}function Eye(){const{t:e}=q(),{handleFeatureUpsell:t,handleFeatureLimitReached:n}=oy(),s=sh();return c.useCallback(()=>{if(s.disabledReason??s.subscriptions.length===0){n({allowUpsell:!1,title:e("proSubscription.modal.featureLimitReached.video.title"),subtitle:e("proSubscription.modal.featureLimitReached.video.subtitleIneligible"),payflowEntryPoint:"VideoLimit",dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit",disabledReason:s.disabledReason??""});return}const{subscriptions:o}=s;let r;o.includes("m365-personal")?r="proSubscription.modal.featureLimitReached.video.subtitleFree":o.includes("m365-premium")?r="proSubscription.modal.featureLimitReached.video.subtitleUpgradable":r="",t({allowUpsell:!0,title:e("proSubscription.modal.featureLimitReached.video.title"),subtitle:e(r),payflowEntryPoint:"VideoLimit",confirmButton:e("actions.proSubscription.subscribeToPro"),dismissButton:e("common.dismiss"),subscriptions:s.subscriptions,upsellReason:"DailyLimit"})},[s,t,e,n])}const UN=()=>{const e=Hk(),t=yA(),n=xA(),s=SA(),o=EA(),r=bA(),a=wA();return(t||n||s||o||r||a)&&e};function FN(){const{getSortedConnectors:e}=Vl(),[t]=e(),[n,s]=c.useState(!1),[o,r]=c.useState(null),a=c.useMemo(()=>{var m;return((m=t.find(f=>f.type==="one-drive"))==null?void 0:m.status)==="ready"},[t]),l=c.useCallback(()=>{a&&s(!0)},[a]),u=c.useCallback(m=>{r(m)},[r]),d=c.useCallback(()=>{s(!1)},[s]);return{isOneDriveFilePickerOpen:n,setIsOneDriveFilePickerOpen:s,pickedOneDriveItems:o,setPickedOneDriveItems:r,oneDriveConnectorReady:a,selectOneDriveFile:l,onPickCallback:u,onCloseCallback:d}}const R9="create";function wye(e){const{disabled:t=!1,onPasteTextClick:n,onSelectFile:s,onSelectUserOpenedTabs:o,onTakeScreenshot:r,onSelectOneDriveFile:a,uploadButtonDisabled:l}=e,u=M(T1),d=M(Kd),m=M(A1),f=M(td),h=M(Sa),g=Ys(),C=M(k1),v=Qt(),y=se(Ia),b=Sye(),E=xye(),S=Eye(),I=Y3(),T=UN()&&f.length>0&&!I,A=BN({remainingPodcastGeneration:u,remainingResearchReportGeneration:d,remainingVideoGeneration:m,isUpgradedUser:C}),{oneDriveConnectorReady:k}=FN(),N=mC(),{shouldAskForConfirmation:P,onOpen:V}=ny(),U=dC(),K=c.useRef(U),Q=c.useRef(!1);c.useEffect(()=>{K.current.length>0&&(Q.current=!0),K.current=U},[U]);const{setComposerCreateModeWithPrefill:Z}=bye(),Y=c.useCallback(ie=>{switch(ie){case"image":Z("image");break;case"podcast":if(u===0){v?b():y({isOpen:!0,scenario:"podcast",reason:"createPodcast"});return}Z("podcast");break;case"researchReport":if(d===0){v?E():y({isOpen:!0,scenario:"researchReport",reason:"createResearchReport"});return}Z("researchReport");break;case"quiz":Z("quiz");break;case"actions":Z("actions");break;case"video":if(m===0){S();return}Z("video");break;default:Z(null);break}},[Z,v,u,d,m,y,b,E,S]),X=c.useCallback(ie=>{if(ie==="create")return;const xe=AI(ie);if(xe&&P&&!C5(g,xe)){V(xe,()=>{Y(ie)});return}Y(ie)},[g,V,P,Y]),$=c.useCallback(()=>{P1(null),rd(),Zt(vn())},[]);c.useEffect(()=>{U.length===0&&Q.current&&N!==null&&g!=="research"&&g!=="computerUse"&&g!=="study"&&$()},[U,$,g,N]);const ee=!!r||!!o||T,te=A.length>1||ee,G=!ei("uploadFile");return i.jsx(ty,{items:A,onSelect:X,value:N??R9,defaultValue:R9,onReset:$,disabled:t,onMenuClick:()=>ye({source:"composerCreateButton",pageName:"chatPage"}),alwaysShowDefault:!0,renderHeader:({closePopover:ie})=>h||G?null:i.jsxs(i.Fragment,{children:[i.jsx(nye,{onSelectFile:xe=>{ie(xe),s()},onPasteTextClick:n?xe=>{ye({source:"uploadTextModalCta"}),n(),ie(xe)}:void 0,uploadButtonDisabled:l,onSelectOneDriveFile:a&&k?()=>{a()}:void 0}),te&&i.jsx(ms,{verticalMargin:!1,className:"my-1.5"})]}),renderFooter:({closePopover:ie})=>i.jsxs(i.Fragment,{children:[ee&&i.jsx(ms,{verticalMargin:!1,className:"my-1.5"}),r&&i.jsx(fye,{onTakeScreenshot:xe=>{ie(xe),r()}}),o&&i.jsx(X3e,{onSelectUserOpenedTabs:xe=>{ie(xe),o()}}),T&&i.jsx(dye,{closeDropdown:ie})]}),floatingOffset:{mainAxis:4,crossAxis:-10}})}function Wa(e,t){return n=>{rye(e,n),e==="podcast"&&t===0?Vg({entryPoint:"ComposerV4",featureName:"Podcast"}):e==="researchReport"&&t===0?Vg({entryPoint:"ComposerV4",featureName:"DeepResearch"}):e==="video"&&t===0&&Vg({entryPoint:"ComposerV4",featureName:"Video"})}}function $a(e,t){return n=>{aye(e,n),e==="podcast"&&t===0?Hg({entryPoint:"ComposerV4",featureName:"Podcast"}):e==="researchReport"&&t===0?Hg({entryPoint:"ComposerV4",featureName:"DeepResearch"}):e==="video"&&t===0&&Hg({entryPoint:"ComposerV4",featureName:"Video"})}}function BN({remainingPodcastGeneration:e,remainingResearchReportGeneration:t,remainingVideoGeneration:n,isUpgradedUser:s}){const o=ei("actions"),r=ei("podcast"),a=ei("researchReport"),l=ei("quiz"),u=ei("image"),d=Qt(),m=W("video-gen")&&d,{t:f}=q("translation",{keyPrefix:"composer.create"}),{t:h}=q();return c.useMemo(()=>{const C={key:"create",title:h("common.open"),icon:i.jsx(St,{url:pye,className:"size-6"}),hideButtonTitle:!0,testId:"composer-create-button",onImpression:Wa(null),beforeClick:$a(null),isIconEnabledInButton:!0},v={key:"image",title:f("image.title"),icon:i.jsx(St,{url:hye,className:"size-5"}),testId:"composer-create-image-button",onImpression:Wa("image"),beforeClick:$a("image")};function y(){return{key:"podcast",title:f("podcast.title"),icon:i.jsx(St,{url:gye,className:"size-5"}),testId:"composer-create-podcast-button",onImpression:Wa("podcast",e),beforeClick:$a("podcast",e),tags:e!==null&&!s?[{label:f("podcast.remainingCalls",{remainingCalls:e.toString()}),color:e>0?"neutral":"accent"}]:void 0}}function b(){return{key:"researchReport",title:f("researchReport.title"),icon:i.jsx(St,{url:PM,className:"size-5"}),testId:"composer-create-research-report-button",onImpression:Wa("researchReport",t),beforeClick:$a("researchReport",t),tags:t!==null&&!s?[{label:f("researchReport.remainingCalls",{remainingCalls:t.toString()}),color:t>0?"neutral":"accent"}]:void 0}}function E(){return{key:"quiz",title:f("quiz.title"),icon:i.jsx(St,{url:vye,className:"size-5"}),testId:"composer-create-quiz-button",onImpression:Wa("quiz"),beforeClick:$a("quiz")}}function S(){return{key:"actions",title:f("actions.title"),icon:i.jsx(St,{url:MM,className:"size-5"}),testId:"composer-create-actions-button",onImpression:Wa("actions"),beforeClick:$a("actions"),tags:s?void 0:[{label:f("actions.labsTag"),color:"accent"}]}}function I(){return{key:"video",title:f("video.title"),icon:i.jsx(St,{url:Cye,className:"size-5"}),testId:"composer-create-video-button",onImpression:Wa("video",n),beforeClick:$a("video",n),tags:n!==null&&!s?[{label:f("video.remainingCalls",{remainingCalls:n.toString()}),color:n>0?"neutral":"accent"}]:void 0}}return[C,u?v:void 0,m?I():void 0,a?b():void 0,r?y():void 0,l?E():void 0,o?S():void 0].filter(_=>_!==void 0)},[h,f,u,a,r,l,o,m,e,s,t,n])}function Iye(e){const{t}=q(),{createMode:n,onReset:s}=e,o=t(`composer.create.${n}.selectedText`);return i.jsxs(ne,{title:o,"aria-label":o,variant:"rect",size:"36-sm",color:"composer-selected",className:F("h-9 select-none gap-1 rounded-2xl border border-black/8 pe-3.5 ps-2.5 dark:border-white/8"),onClick:s,testId:`composer-${n}-mode-selected`,children:[i.jsx(St,{url:MN,className:"size-3.5"}),i.jsx("span",{className:"text-sm",children:o})]})}function VN(){const[e,t]=c.useState(!1);return c.useEffect(()=>{async function n(){const{uiOverrides:{showScreenshotButton:s=()=>Promise.resolve(!1)}={}}=re.instance().config(),o=await s();t(o)}n().catch(()=>{})},[]),e}function _ye(){const{t:e}=q(),{getAvailableConnectorsCount:t}=Vl(),n=t();return i.jsx(pt,{children:n!==0&&i.jsx(ge.div,{initial:{...Fe},animate:{...nt},exit:{...Fe},transition:{duration:.1,ease:"easeInOut"},children:i.jsx(wm,{color:"default",renderTrigger:({openPopover:s})=>i.jsx(ne,{title:e("connector.composer.buttonTitle"),"aria-label":e("connector.composer.buttonTitle"),variant:"rect",size:"36-sm",color:"subtle-dimmed",className:"h-9 select-none gap-1 rounded-2xl border border-black/8 dark:border-white/8",onClick:s,children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(NN,{className:"size-6"}),i.jsx(pt,{mode:"popLayout",initial:!1,children:n>1&&i.jsx(ge.span,{className:"min-w-4 rounded-full bg-background-700 px-1 text-foreground-100 text-xs-medium",initial:{...Fe,scale:.5},animate:{...nt,scale:1},exit:{...Fe,scale:.5},transition:lse,children:n})}),i.jsx(ds,{className:"size-4 rotate-90"})]})}),renderSurface:({closePopover:s})=>i.jsx("div",{className:"flex flex-col",children:i.jsx(jN,{triggerSource:"composer",closePage:s})}),containerClassNames:{surface:"p-1.5 border-white/25 dark:border-stroke-400/25 shadow-tinted-xl"},placement:"bottom-start",floatingOffset:{mainAxis:4,crossAxis:-4}})})})}function Tye(e){const{onClose:t,onSubmit:n}=e,{t:s}=q(),[o,r]=c.useState(""),a=ut(),l=c.useRef(null),u=pl(l,{once:!0}),d=o.trim(),m=d.length>0,f=d.length===0;c.useEffect(()=>{u&&un({page:a==="/"?"landing":"chat",element:"uploadTextModal"})},[u,a]);const h=()=>{ye({source:"uploadTextModal",scenario:"close"}),t()},g=()=>{m&&(ye({source:"uploadTextModalCta",scenario:"submit"}),n==null||n(o),t())};return i.jsx(dn,{isOpen:!0,headerText:s("fileUpload.pasteText"),onClose:h,className:"h-[60vh] max-h-128 w-[80vw] max-w-2xl",bottomSheetOnSmall:!0,children:i.jsxs("div",{className:"mt-3 flex size-full flex-col justify-center gap-6",children:[i.jsx(wN,{className:"flex-1 resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",placeholder:s("fileUpload.addTextContentModalPlaceholder"),value:o,autoFocus:!0,ref:l,onChange:C=>r(C.target.value)}),i.jsx(ne,{title:s("common.submitText"),size:"56-xl",color:"strong",disabled:f,onClick:g,children:s("common.submitText")})]})})}const Aye=e=>e==="coco"?{headerI18nKey:"composer.chatModes.coco.newChatConfirmationModal.switchToCocoHeader",descriptionI18nKey:"composer.chatModes.coco.newChatConfirmationModal.switchToCocoDescription"}:{headerI18nKey:"composer.chatModes.coco.newChatConfirmationModal.switchFromCocoHeader",descriptionI18nKey:"composer.chatModes.coco.newChatConfirmationModal.switchFromCocoDescription"};function kye(){const{t:e}=q(),{onClose:t,onConfirm:n,isOpen:s,targetMode:o}=ny(),{headerI18nKey:r,descriptionI18nKey:a}=Aye(o),l=e(r),u=e("composer.chatModes.coco.newChatConfirmationModal.continueButtonText"),d=e("composer.chatModes.coco.newChatConfirmationModal.stayHereButtonText");return i.jsxs(dn,{isOpen:s,headerText:l,className:"w-full max-w-[448px]",children:[i.jsx("p",{children:i.jsx(mn,{i18nKey:a,components:{bold:i.jsx("strong",{}),br:i.jsx("br",{})}})}),i.jsxs("div",{className:"mt-5 flex flex-col gap-2",children:[i.jsx(ne,{title:u,color:"strong",size:"56-xl",variant:"rect",className:"w-full",onClick:n,children:u}),i.jsx(ne,{title:d,color:"subtle-dimmed",size:"56-xl",variant:"rect",className:"w-full",onClick:t,children:d})]})]})}const Mye=["chat","smart"];function Nye(e){const{onPasteText:t,onSelectFile:n,onSelectUserOpenedTabs:s,onTakeScreenshot:o,onSelectOneDriveFile:r,uploadButtonDisabled:a,disabled:l=!1}=e,[u,d]=c.useState(!1),m=mC(),f=UN(),h=M(T1),g=M(Kd),C=M(A1),v=M(k1),b=BN({remainingPodcastGeneration:h,remainingResearchReportGeneration:g,remainingVideoGeneration:C,isUpgradedUser:v}).find(k=>k.key===m),E=c.useCallback(()=>{P1(null),rd(),Zt(vn())},[]),S=VN(),I=Y3(),_=Ys(),T=m!==null&&b?i.jsx(Iye,{createMode:m,onReset:E}):!I&&i.jsx(Y3e,{disabled:l}),A=f&&!I&&Mye.includes(_);return i.jsxs(i.Fragment,{children:[i.jsx(wye,{disabled:l,onPasteTextClick:t?()=>d(!0):void 0,onSelectFile:n,onSelectOneDriveFile:r,onSelectUserOpenedTabs:s,onTakeScreenshot:S?o:void 0,uploadButtonDisabled:a}),T,A&&i.jsx(_ye,{}),u&&i.jsx(Tye,{onClose:()=>d(!1),onSubmit:t}),i.jsx(KL,{children:i.jsx(kye,{})})]})}function Rye(e){const[t,n]=c.useState(!1),{tab:s,className:o=""}=e,{t:r}=q();return t||!s.favIconUrl?i.jsx(Ch,{className:ue("size-5",o)}):i.jsx("img",{src:s.favIconUrl,alt:r("composer.multiTabs.tabFavIconAltText"),className:ue("size-4 rounded bg-white",o),onError:()=>{n(!0)}})}function Pye(e){try{return new URL(e).hostname.replace(/^www\./,"")}catch{return null}}function Lye(e,t=5){const n=new Set;for(const s of e){if(n.size>=t)break;if(s.url){const o=Pye(s.url);o&&n.add(o)}}return Array.from(n).join(", ")}function Oye(e,t=5){const n=new Set;for(const s of e){if(n.size>=t)break;s.title&&n.add(s.title)}return Array.from(n).join(", ")}function Dye(e){const{tabs:t}=e,n=c.useMemo(()=>Oye(t,5),[t]),s=t.length-1;return i.jsxs("div",{className:"flex",children:[i.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground-750 text-sm",children:n}),s>0&&i.jsxs("span",{className:"ms-1 font-semibold text-foreground-750 text-sm",children:["+",s]})]})}function jye(e){const{tabs:t}=e,n=c.useMemo(()=>Lye(t,5),[t]);return i.jsx("span",{className:"truncate text-foreground-750 opacity-60 text-xs",children:n})}function Uye(e,t){return`${e.id}-${e.url??""}-${t}`}function HN(e){const{tabs:t,onRemove:n,showRemoveIcon:s,onClick:o,isLoading:r=!1}=e,{t:a}=q(),l=c.useMemo(()=>t.slice(0,3),[t]),u=m=>{m.stopPropagation(),n==null||n()},d=m=>{m.stopPropagation(),o==null||o()};return i.jsxs(ge.div,{className:"relative flex h-[58px] w-full flex-row items-center justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-background-200/80",layout:"position",initial:Fe,animate:nt,exit:Fe,onClick:d,children:[i.jsx("div",{className:ue("flex h-5 min-w-5 flex-none items-center justify-center rounded bg-white/90 dark:bg-background-200/80"),children:l.map((m,f)=>i.jsx(Rye,{tab:m,className:ue(f>0&&"-ms-[6px]")},Uye(m,f)))}),i.jsxs("div",{className:"me-7 flex min-w-0 flex-1 flex-col",children:[i.jsx(Dye,{tabs:t}),i.jsx(jye,{tabs:t})]}),r&&i.jsx(ln,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45","data-testid":"multi-tabs-loading",children:i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(it,{type:"spinnerThemed",className:"size-11"})})}),s&&i.jsx("button",{type:"button",title:a("composer.removeImage"),"aria-label":a("composer.removeImage"),onClick:u,tabIndex:0,className:"absolute end-0.5 top-0.5 m-1 rounded-full p-1 text-foreground-850 safe-hover:bg-black/5 dark:safe-hover:bg-black/30",children:i.jsx(an,{className:"size-3"})})]})}function Fye({onClick:e,showRemoveIcon:t=!0,isLoading:n=!1}){const[s,o]=Ue(Vo),r=c.useMemo(()=>Array.from(s.values()),[s]);return s.size===0?null:i.jsx("div",{className:"flex min-h-[60px] cursor-pointer flex-col gap-2","data-testid":"manual-multi-tabs-preview-card",children:i.jsx(HN,{showRemoveIcon:t,tabs:r,onRemove:()=>{o(new Map)},onClick:e,isLoading:n})})}const zN=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M11.7498 3C12.1295 3 12.4434 3.28201 12.4931 3.64808L12.5 3.74985L12.5012 11H19.7543C20.1685 11 20.5043 11.3358 20.5043 11.75C20.5043 12.1297 20.2221 12.4435 19.8561 12.4932L19.7543 12.5H12.5012L12.5032 19.7491C12.5033 20.1633 12.1676 20.4993 11.7534 20.4993C11.3737 20.4993 11.0598 20.2173 11.0101 19.8512L11.0032 19.7494L11.0012 12.5H3.7522C3.33798 12.5 3.0022 12.1642 3.0022 11.75C3.0022 11.3703 3.28435 11.0565 3.65043 11.0068L3.7522 11H11.0012L11 3.75015C10.9999 3.33594 11.3356 3 11.7498 3Z"})),lke=Object.freeze(Object.defineProperty({__proto__:null,default:zN},Symbol.toStringTag,{value:"Module"}));function Bye({onRef:e,onClick:t,onButtonRef:n}){const{t:s}=q(),o=M(L1);return i.jsx(Hs,{data:{title:s("common.open"),testId:"plus-button",isVisible:!0,ariaExpanded:o==="plus",onClick:t},ref:e,onButtonRef:n,children:i.jsx(zN,{className:"size-6","aria-hidden":!0})})}const GN=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M11.7722 3.74407C14.1136 1.40049 17.9126 1.40049 20.2558 3.74363C22.5388 6.0267 22.5974 9.69191 20.4314 12.0458L20.2432 12.2432L11.4432 21.0414L11.4066 21.0717C9.94541 22.3884 7.69141 22.3437 6.28404 20.9363C4.96502 19.6173 4.8429 17.5546 5.91769 16.0979C5.94103 16.0525 5.96928 16.0088 6.00249 15.9677L6.05605 15.908L6.14295 15.8203L6.28404 15.6724L6.28695 15.6753L13.7227 8.22096C13.9886 7.95434 14.4052 7.92958 14.6991 8.14704L14.7834 8.21955C15.05 8.48546 15.0747 8.90209 14.8573 9.19599L14.7848 9.28021L7.19015 16.8933C6.47251 17.7689 6.52239 19.0632 7.33979 19.8806C8.16885 20.7096 9.4885 20.7491 10.3643 19.999L19.197 11.1685C20.9525 9.41089 20.9525 6.56165 19.1951 4.80429C17.4927 3.10185 14.7655 3.04865 12.999 4.64469L12.8312 4.80429L12.8186 4.8186L3.28228 14.3549C2.98939 14.6478 2.51452 14.6478 2.22162 14.3549C1.95536 14.0887 1.93115 13.672 2.149 13.3784L2.22162 13.2943L11.7705 3.74363L11.7722 3.74407Z"})),uke=Object.freeze(Object.defineProperty({__proto__:null,default:GN},Symbol.toStringTag,{value:"Module"})),WN=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M6.25 3C4.45507 3 3 4.45507 3 6.25V17.75C3 19.5449 4.45507 21 6.25 21H17.75C19.5449 21 21 19.5449 21 17.75V6.25C21 4.45507 19.5449 3 17.75 3H6.25ZM4.5 6.25C4.5 5.2835 5.2835 4.5 6.25 4.5H17.75C18.7165 4.5 19.5 5.2835 19.5 6.25V17.75C19.5 18.7165 18.7165 19.5 17.75 19.5H6.25C5.2835 19.5 4.5 18.7165 4.5 17.75V6.25ZM8 7.5C7.72386 7.5 7.5 7.72386 7.5 8V10.25C7.5 10.6642 7.16421 11 6.75 11C6.33579 11 6 10.6642 6 10.25V8C6 6.89543 6.89543 6 8 6H10.25C10.6642 6 11 6.33579 11 6.75C11 7.16421 10.6642 7.5 10.25 7.5H8ZM8 16.5C7.72386 16.5 7.5 16.2761 7.5 16V13.75C7.5 13.3358 7.16421 13 6.75 13C6.33579 13 6 13.3358 6 13.75V16C6 17.1046 6.89543 18 8 18H10.25C10.6642 18 11 17.6642 11 17.25C11 16.8358 10.6642 16.5 10.25 16.5H8ZM16.5 8C16.5 7.72386 16.2761 7.5 16 7.5H13.75C13.3358 7.5 13 7.16421 13 6.75C13 6.33579 13.3358 6 13.75 6H16C17.1046 6 18 6.89543 18 8V10.25C18 10.6642 17.6642 11 17.25 11C16.8358 11 16.5 10.6642 16.5 10.25V8ZM16 16.5C16.2761 16.5 16.5 16.2761 16.5 16V13.75C16.5 13.3358 16.8358 13 17.25 13C17.6642 13 18 13.3358 18 13.75V16C18 17.1046 17.1046 18 16 18H13.75C13.3358 18 13 17.6642 13 17.25C13 16.8358 13.3358 16.5 13.75 16.5H16Z"})),dke=Object.freeze(Object.defineProperty({__proto__:null,default:WN},Symbol.toStringTag,{value:"Module"})),$N=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3 5.75C3 4.23122 4.23122 3 5.75 3H18.25C19.7688 3 21 4.23122 21 5.75V12.0218C20.5368 11.7253 20.0335 11.4858 19.5 11.3135V5.75C19.5 5.05964 18.9404 4.5 18.25 4.5H5.75C5.05964 4.5 4.5 5.05964 4.5 5.75V18.25C4.5 18.9404 5.05964 19.5 5.75 19.5H11.3135C11.4858 20.0335 11.7253 20.5368 12.0218 21H5.75C4.23122 21 3 19.7688 3 18.25V5.75ZM23 17.5C23 14.4624 20.5376 12 17.5 12C14.4624 12 12 14.4624 12 17.5C12 20.5376 14.4624 23 17.5 23C20.5376 23 23 20.5376 23 17.5ZM18.0006 18L18.0011 20.5035C18.0011 20.7797 17.7773 21.0035 17.5011 21.0035C17.225 21.0035 17.0011 20.7797 17.0011 20.5035L17.0006 18H14.4956C14.2197 18 13.9961 17.7762 13.9961 17.5C13.9961 17.2239 14.2197 17 14.4956 17H17.0005L17 14.4993C17 14.2231 17.2239 13.9993 17.5 13.9993C17.7761 13.9993 18 14.2231 18 14.4993L18.0005 17H20.4966C20.7725 17 20.9961 17.2239 20.9961 17.5C20.9961 17.7762 20.7725 18 20.4966 18H18.0006Z"})),mke=Object.freeze(Object.defineProperty({__proto__:null,default:$N},Symbol.toStringTag,{value:"Module"})),fu=ue("flex w-full flex-row items-center gap-2");function Vye(e){const{startNewChatDisabled:t,startNewConversation:n,selectFile:s,selectOneDriveFile:o,takeScreenshot:r,selectUserOpenedTabs:a,uploadButtonDisabled:l=!1}=e,u=c.useRef(null),{t:d}=q(),m=M(Sa),f=M(je),h=c.useRef(void 0);return $i(u),c.useEffect(()=>{r&&h.current!==f&&LN(f)},[f,r]),i.jsxs(Tr,{className:"pointer-events-auto relative flex flex-col rounded-2xl contrast-more:border-2","data-testid":"composer-plus-menu",role:"menu",circular:!0,children:[i.jsx(ne,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.startNewChat"),onClick:n,testId:"new-chat-button",ref:u,disabled:t,children:i.jsxs("div",{className:fu,children:[i.jsx(xm,{className:"size-6"}),d("composer.startNewChatShort")]})}),s&&!m&&i.jsx(ne,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.upload"),disabled:l,testId:"file-upload-button",onClick:g=>{g.preventDefault(),s()},children:i.jsxs("div",{className:fu,children:[i.jsx(GN,{className:"size-6"})," ",d("composer.upload")]})}),r&&i.jsx(ne,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.takeScreenshot"),onClick:g=>{g.preventDefault(),g.stopPropagation(),r(),ON(f)},children:i.jsxs("div",{className:fu,children:[i.jsx(WN,{className:"size-6"}),d("composer.takeScreenshotShort")]})}),o&&i.jsx(ne,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:d("composer.addFromOneDrive"),onClick:g=>{g.preventDefault(),g.stopPropagation(),o()},children:i.jsxs("div",{className:fu,children:[i.jsx(ph,{className:"size-6"}),d("composer.addFromOneDrive")]})}),a&&i.jsx(ne,{role:"menuitem",variant:"rect",testId:"add-tabs-button",color:"subtle-dimmed-inverted",title:d("composer.multiTabs.addTab"),onClick:g=>{g.preventDefault(),g.stopPropagation(),a()},children:i.jsxs("div",{className:fu,children:[i.jsx($N,{className:"size-6"}),d("composer.multiTabs.addTab")]})})]})}function Hye({startNewChatDisabled:e,uploadButtonDisabled:t=!1,onStartNewConversation:n,onSelectFileIfEnabled:s,onSelectOneDriveFileIfEnabled:o,onTakeScreenshot:r,onSelectUserOpenedTabsIfEnabled:a,onRef:l}){const[u,d]=Ue(L1),m=VN(),h=`plus-menu-${Qi()}`,g=u==="plus";return i.jsx(bm,{isOpen:g,onIsOpenChange:C=>d(v=>C?"plus":v==="plus"?null:v),renderTrigger:C=>i.jsx(Bye,{onRef:C.ref,onButtonRef:l,onClick:v=>{C.onClick(v),ye({source:"composerPlusButton",pageName:"chatPage",customData:JSON.stringify({isOpen:g})})}}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:F(Qs,"p-2"),children:i.jsx(Vye,{startNewChatDisabled:e,uploadButtonDisabled:t,startNewConversation:n,selectFile:s,selectOneDriveFile:o,takeScreenshot:m?r:void 0,selectUserOpenedTabs:a})},h)}const qN=async(e,t)=>{pe(gi)&&(e==null||e());try{await EN(gi,n=>!n)}catch{}t==null||t()},fke=({onTurnstileDisplaying:e,onTurnstileClosed:t})=>c.useCallback(async()=>{await qN(e,t)},[e,t]);function KN(){const e=gT(),t=M(je),n=M($v),s=M(hn);return vm({queryKey:["history",t],queryFn:async r=>{const{pageParam:a}=r,{url:l,args:u,conversationId:d}=a,m=await Ct(l,FE,{query:{...u,"api-version":"2"},analytics:{anonymousPath:"/conversations/*/history"},parseOptions:{safe:!0}}).then(f=>f.data);if(m.results.length>0){const f=m.results,h=Iae(f),g=bN(h);e(d,C=>{var v;C.length===0&&yZ(s,(v=g.at(0))==null?void 0:v.createdAt),g.reverse(),C.unshift(...g)})}return m},initialPageParam:{url:t?`/conversations/${t}/history`:"",conversationId:t??""},getNextPageParam:r=>r.next&&t?{url:`/conversations/${t}/history`,args:{cursor:r.next},conversationId:t}:null,enabled:!!t&&!(n!=null&&n.prompt)})}function zye(){const e=!Gt("kill-cf-turnstile");return W("cf-turnstile-voice")&&e}const Gye=null,Wye=1500;function $ye(e){return e instanceof Error&&(e.name==="NotFoundError"||e.name==="OverconstrainedError")}function Cf(){if(yo()==="study"&&be("study-mode-voice"))return"study"}function qye({initAudio:e,getAudioConstraints:t,onCallTerminated:n,onSpeechEndDetected:s,shouldRefetchHistory:o=!0,eventListeners:r=[]}){const a=se(hi),l=se(VZ),u=se(Co),d=W("voice-disable-greeting-for-reconnected"),m=eh(),f=se(b4),h=M(je),g=M(C1),C=M($d),[v,y]=Ue(Ja),b=se(AZ),E=se(bi),S=se(bl),I=W("voice-speed"),_=M(BY),T=gT(),{refetch:A}=KN(),{showBoundary:k}=B7(),{isPortraitEnabled:N,isPortraitV2Enabled:P,portraitId:V,portraitVoiceId:U,portraitScenario:K}=KC(),Q=se(ece),Z=se(PA),Y=se(HA),X=c.useRef("inactive"),$=c.useRef(null),ee=c.useRef(void 0),te=V2e(),G=c.useRef(0),[ie,xe]=Ue(Yg),ce=_M.getInstance(),ae=zye();c.useEffect(()=>{e||(xe(!0),y("waiting-for-user-interaction"))},[e,xe,y]),c.useEffect(()=>{ht.AudioIn.toggleMute(ie)},[ie]);const Se=()=>{$.current&&clearTimeout($.current)};c.useEffect(()=>(v!=="checking-availability"&&Se(),Se),[v]);const Me=c.useCallback(async()=>{h&&(T(h,Ne=>Ne.splice(0)),await A())},[A,h,T]),Oe=c.useCallback(()=>{ht.AudioOut.stopAudioPlayback(),Bs()&&ht.Animation.stopAnimation()},[]),oe=c.useCallback(async(Ne,Ie)=>{if(X.current="ending",ht.AudioIn.stopAudioCapture(),Oe(),xe(!1),Se(),Ne.sendAudioEnd(),f("idle"),pe(Ja)==="available"){ht.AudioOut.playCallEndJingle(),o&&await Me();const Ze=Cf();ce.onEndCall(G.current,Ze),ce.trackStartVoiceCall("end"),G.current=0,S($2e(Ie)),N&&Q(!0)}},[Oe,xe,f,o,ce,S,N,Me,Q]),le=c.useCallback(async Ne=>{const{AudioIn:Ie}=ht,Ze=Te=>{Te instanceof CustomEvent&&typeof Te.detail=="string"&&Ne.sendAudio(Te.detail)},at=async()=>{X.current==="active"&&le(Ne),Ie.removeEventListener("audioData",Ze),Ie.removeEventListener("audioTrackEnded",at)};try{Ie.setOnClientSideVoiceStartDetected(()=>ce.onClientSpeechStartDetected()),Ie.setOnClientSideVoiceEndDetected(()=>{const Te=Ie.getLastClientVoiceEndTime();Te!==null&&ce.onClientSpeechEndDetected(Te)}),ce.trackAudioPermission("mic-request"),await Ie.startAudioCapture(t),Ie.addEventListener("audioData",Ze),Ie.addEventListener("audioTrackEnded",at),ce.trackAudioPermission("mic-granted")}catch(Te){Te instanceof Error&&(Te.name==="NotAllowedError"||Te.name==="NotSupportedError")?(y("microphone-denied"),await oe(Ne),D.trackEvent({name:"system",data:{eventName:"copilotNoMicrophoneAccess"}}),ce.trackAudioPermission("mic-denied","no_permission",Te.message)):$ye(Te)?(y("microphone-not-found"),await oe(Ne),D.trackEvent({name:"system",data:{eventName:"copilotMicrophoneNotFound"}}),ce.trackAudioPermission("mic-denied","no_microphone_found",Te instanceof Error?Te.message:String(Te))):(k(new Error(`Error starting audio capture: ${Te}`)),ce.trackAudioPermission("mic-denied","other_start_fail",Te instanceof Error?Te.message:String(Te)))}},[t,y,oe,k,ce]),J=c.useCallback(Ne=>{xe(Ne==="mute")},[xe]);c.useEffect(()=>(Ge.on("voice:toggle-mute",J),()=>{Ge.off("voice:toggle-mute",J)}),[J]);const Ce=c.useCallback(async Ne=>{ht.currentTurnIndex+=1,ht.AudioIn.audioContext||(!_t("kill-voice-capture-delay")?setTimeout(()=>{X.current==="active"&&le(Ne)},Wye):le(Ne));const Ie=I?_:Rd;await ht.AudioOut.initialize(Ie),await ht.Animation.initialize(Bs())},[_,I,le]),Pe=c.useCallback(()=>{if(N)return"portrait";const Ne=re.instance().config().audioConfigClientType;if(Ne)return Ne;if(Bs())return"character"},[N]),qe=c.useCallback(()=>{var Ne;return U??C??((Ne=g[0])==null?void 0:Ne.id)},[U,C,g]),Xe=c.useCallback(()=>V?[{type:"portrait",portraitId:V,scenario:P?K:void 0}]:void 0,[P,V,K]),et=c.useCallback((Ne,Ie,Ze)=>{if(X.current!=="active")return;const at=Pe(),Te=qe(),dt=Cf(),At=Xe();ee.current=at,Ne.sendAudioStart({conversationId:Ie,options:{voice:Te,initiator:Ze},clientType:at,mode:dt,context:At});const Bt=1e4;Se(),$.current=setTimeout(()=>{pe(Ja)==="checking-availability"&&X.current==="active"&&(y("start-timeout"),ce.onAudioStartTimeout(Bt),ce.trackStartVoiceCall("fail","start_timeout"))},Bt)},[Pe,qe,Xe,y,ce]),fe=c.useCallback(async(Ne,Ie)=>{if(!Ie||!e||X.current==="ending")return;y("checking-availability"),b(null),Tfe()&&await qN(),et(Ne,Ie),ht.currentTurnIndex=0;const Ze=Cf();ce.onStartCall(Ie,Ze),ce.trackStartVoiceCall("start"),await ht.AudioOut.playCallStartJingle(),Ac("onStartVoiceChat")},[e,y,ce,b,et]),Ee=c.useCallback(async(Ne,Ie)=>{await oe(Ne,{type:"server-terminated",reason:Ie}),n(Ie)},[oe,n]),Ae=c.useRef(null),Ye=c.useCallback(async Ne=>{try{if(!Ne.length)return;let Ie;const Ze=[];for(const At of Ne){if(At.op==="replace"&&At.path==="/selectedComponentPath"&&At.value!==null){Ie=At.value;continue}Ze.push(At)}if(Ie!==void 0&&mt(ime,Ie),!Ae.current){const{applyPatch:At}=await B(async()=>{const{applyPatch:Bt}=await import("./fast-json-patch-index-DS1hydBz.js");return{applyPatch:Bt}},[]);Ae.current={applyPatch:At}}const at=pe(xx)??[],{applyPatch:Te}=Ae.current,{newDocument:dt}=Te(at,Ze);mt(xx,dt)}catch{}},[]),De=(Ne,Ie)=>{if(!Ne)return null;switch(Ne.type){case"topicList":return Array.isArray(Ne.topics)?{...Ne,selectedIndex:Ne.selectedIndex??-1}:{...Ne,topics:(Ie==null?void 0:Ie.type)==="topicList"?Ie.topics:null};case"summary":return Ne;default:return null}},Ke=c.useCallback((Ne,Ie)=>{const Ze=De(Ne,Ie);mt(Q2,Ze),m&&l(null)},[m,l]),Be=c.useRef(r);Be.current=r;const ve=c.useCallback(Ne=>Ie=>{var at;const Ze=Cf();switch(Ie.event){case"startMessage":{const{messageId:Te}=Ie;if(ce.onStartMessage(Te),ce.trackStartVoiceCall("success"),Oe(),X.current==="inactive")break;Ce(Ne),y("available"),f("listening");break}case"transcriptEvent":{const{text:Te}=Ie;ce.onTranscriptReceived(Te.length);break}case"appendText":{const{messageId:Te}=Ie;ce.onTextReceived(Te),m&&l("responding");break}case"audioStartFailed":{const{reason:Te}=Ie,{success:dt}=_w.safeParse(Te);y(dt?Te:"error"),ce.onAudioStartFailed(Te,Ze),ce.trackStartVoiceCall("fail","start_fail",Te);break}case"audioTimeRemaining":{const{seconds:Te}=Ie;b(Te);break}case"audio":{if(X.current==="inactive")break;ce.onAudioReceived(Ze),ht.AudioOut.appendAudioData(Ie.audio);break}case"characterAnimation":{ce.onCharacterAnimationReceived(),Bs()&&ht.Animation.setFrameData(Ie);break}case"characterAnimationEnd":{ce.onCharacterAnimationEnd(),Bs()&&ht.Animation.setAnimationDone();break}case"callUI":{const{callUI:Te}=Ie,dt=pe(Q2);Ke(Te,dt),ce.onCallUIEventReceived(Ze);break}case"callUIUpdate":{const{update:Te}=Ie;Ye(Te);break}case"characterAppearance":{Bs()&&te&&(ce.onCharacterAppearanceReceived({body:Ie.body,props:Ie.props}),ht.Animation.setCharacterAppearance({body:Ie.body,props:Ie.props}),Y(!0));break}case"characterEmotion":{Bs()&&(ce.onCharacterEmotionReceived(Ie.emotion,Ie.bodyReaction),ht.Animation.setEmotionData({emotion:Ie.emotion,bodyReaction:Ie.bodyReaction}));break}case"interruptAudio":{f("listening"),a("listening"),m&&l("listening"),ce.onAudioInterrupt(Ze),Oe(),Ge.emit("portrait:interrupt-audio");break}case"speechEndDetected":{ce.onSpeechEndDetected(Ze),Ge.emit("portrait:end-speech"),a("thinking"),m&&l("thinking");const Te=ht.AudioIn.onServerSpeechEndDetected();Te!==null&&ce.onServerVADLatencyMeasured(Te),s==null||s();break}case"callTerminated":{Ee(Ne,Ie.reason),ce.onTerminated(Ie.reason,Ze);break}case"error":{const{errorCode:Te}=Ie;switch(Te){case"over-turn-limit":{E(0);break}case"character-out-of-capacity":{Ne.setCallType("standard");break}}ce.onError(Te,Ze);break}case"done":{const{messageId:Te}=Ie;G.current+=1,ht.AudioOut.setAudioDone(),ce.onMessageDone({messageId:Te,voiceType:C??((at=g[0])==null?void 0:at.id),audioChatMode:Ze});break}case"banned":{const{expiresAt:Te}=Ie,dt=UC(Te);dt&&(FC(dt,"voice",Te),Oe(),oe(Ne));break}case"callTypeChanged":{const{callType:Te}=Ie;ee.current=Te,u(Te==="character"?wa:void 0);break}case"challenge":{ae&&(X.current="inactive",y("waiting-for-user-interaction"),f("waiting-for-user-interaction"),mt(Yg,!0),Oe());break}}for(const Te of Be.current)try{Te(Ie,ee.current)}catch{}},[ce,Oe,Ce,y,f,m,l,b,Ke,Ye,te,Y,a,s,Ee,E,C,g,oe,u,ae]),ze=c.useCallback(()=>Ne=>{switch(Ne.event){case"callEnded":{X.current="inactive";break}}},[]),yt=c.useCallback(async(Ne,Ie)=>{const{force:Ze=!1}=Ie??{},at=pe(je);if(dl.onVoiceChatToggled(Ne,at),Se(),Ne==="start"&&X.current!=="inactive"&&!Ze||(Ne==="start"&&ce.onBeforeStartCall(Bs(),N),Ne==="end"&&(X.current==="inactive"||X.current==="ending")&&!Ze))return;X.current=Ne==="start"&&e?"active":"inactive";const Te=await ks({useMockConnection:!!Gye});if(Ne==="start"){const dt=ve(Te);Te.setOnEvent(dt),Te.setOnOpen(()=>{X.current==="active"&&at&&pe(Ja)==="available"?(Te.setOnEvent(dt),et(Te,at,d?"human":void 0)):(X.current="inactive",pe(Ja)==="available"&&y("checking-availability"))}),Bs()&&te&&await ht.Animation.initSyncHandler(),await fe(Te,at)}else Te.setOnEvent(ze()),await oe(Te),Ge.emit("voice:call-ended")},[e,ce,ve,te,fe,et,y,ze,oe,d,N]);return c.useEffect(()=>{async function Ne(){if(!ae||!e)return;pe(Yg)&&J("unmute"),pe(b4)==="waiting-for-user-interaction"&&((await ks()).sendAudioEnd(),await yt("start",{force:!0}))}return Ge.on("challenge:success",Ne),()=>{Ge.off("challenge:success",Ne)}},[e,J,yt,ae]),c.useEffect(()=>{const{AudioOut:Ne}=ht,Ie=()=>{Z(!0),f("responding"),a("responding"),ce.onAudioStart()},Ze=()=>{Z(!1),f("listening"),a("listening"),ce.onAudioEnd()};return Ne.addEventListener("audioStart",Ie),Ne.addEventListener("audioEnd",Ze),()=>{Ne.removeEventListener("audioStart",Ie),Ne.removeEventListener("audioEnd",Ze)}},[a,Z,f,ce]),{toggleVoiceChat:yt,toggleMute:J,isInputMuted:ie,inputVolume:ht.AudioIn.volume}}const Kye=3,Zye=10,Yye=3,P9={SUCCESS:"success",FAILED:"failed"};function Qye({toggleVoiceChat:e,enabled:t=!1,enabledForCallTypes:n}){const s=c.useRef(e);s.current=e;const o=c.useRef({hasAudio:!0,hasText:!0,retryCount:0,consecutiveErrors:0,isFirstTurn:!0}),[r,a]=c.useState(!1),l=M(je),u=c.useCallback(C=>{const v=o.current;let y="initialAutoRetry";r?y="userManualRetry":v.isFirstTurn?y="initialAutoRetry":v.consecutiveErrors>0&&(y="backendAutoRecover");const b=JSON.stringify({retryCount:v.retryCount,consecutiveErrors:v.consecutiveErrors});D.trackEvent({name:"system",data:{eventName:"voiceRecoveryEventData",eventInfo_result:C,eventInfo_scenario:y,eventInfo_customData:b,eventInfo_conversationId:l??""}})},[r,l]),d=c.useCallback(async()=>{s.current("end",{force:!0}),await VC(),s.current("start",{force:!0}),o.current.isFirstTurn=!0,o.current.retryCount+=1},[]),m=c.useCallback(()=>{u(P9.FAILED),s.current("end",{force:!0}),o.current.retryCount=0,o.current.consecutiveErrors=0,a(!0)},[u,a]),f=c.useCallback(()=>{(o.current.retryCount>0||o.current.consecutiveErrors>0||r)&&u(P9.SUCCESS),o.current.retryCount=0,o.current.consecutiveErrors=0,a(!1)},[a,u,r]),h=c.useCallback(()=>{const C=o.current;if(!r&&C.isFirstTurn&&C.retryCount<Zye){d();return}if(!(!C.isFirstTurn&&!r&&(C.consecutiveErrors+=1,C.consecutiveErrors<Yye))){if(r&&C.retryCount<Kye){d();return}m()}},[r,d,m]);return{voiceRecoveryHandler:c.useCallback((C,v="standard")=>{if(t&&!(n&&!n.includes(v)))switch(C.event){case"startMessage":o.current.hasAudio=!1,o.current.hasText=!1;break;case"appendText":o.current.hasText=!0;break;case"audio":o.current.hasAudio=!0,f();break;case"done":o.current.hasText&&!o.current.hasAudio&&h(),o.current.isFirstTurn=!1;break}},[f,h,t,n]),isNoAudioErrorVisible:t?r:!1}}function Jye({isAudioCall:e,onCallTerminated:t,onMute:n,onUnmute:s}){const o=ut(),r=t_(),[a,l]=J1(),u=a==="audioCall",[d,m]=c.useState(!1),{noModalToShow:f,shouldShowTryNowModal:h,shouldShowEducationModal:g}=ek(),{state:C,setState:v}=m3({defaultValue:!u}),y=W("voice-no-audio-recovery"),b=se(Ja),E=c.useRef(async()=>{}),{voiceRecoveryHandler:S,isNoAudioErrorVisible:I}=Qye({toggleVoiceChat:E.current,enabled:y,enabledForCallTypes:["standard"]}),_=c.useMemo(()=>[S],[S]),{toggleVoiceChat:T,toggleMute:A,inputVolume:k,isInputMuted:N}=qye({initAudio:C,onCallTerminated:t,eventListeners:_});E.current=T,c.useEffect(()=>{e?!u&&f&&E.current("start"):E.current("end")},[o,e,u,f]);const P=c.useCallback(Y=>{T("start",{force:Y}),C&&!d&&(m(!0),A("unmute"))},[T,C,d,A]),V=c.useCallback(Y=>{l(),v(!0),T("end",{force:Y})},[l,v,T]),U=c.useCallback(()=>{v(!0),A(N?"unmute":"mute"),N?s==null||s():n==null||n()},[v,A,N,n,s]);c.useEffect(()=>{e&&u&&C&&P()},[C,e,u,P]),c.useEffect(()=>{I&&b("error")},[I,b]);const K=c.useCallback(async(Y=!1)=>{(!e||Y)&&await Q()!=="NotSupported"||(await r({talk:!0}),!h&&!g&&P())},[e,r,g,h,P]);c.useEffect(()=>{u&&K(!0)},[u,K]);async function Q(){return(await aJ.run({onAudioCall:async()=>"NotSupported"})).onAudioCall()}const Z=c.useCallback(Y=>{const{toLocation:X}=Y,$=X.pathname;e&&!$.endsWith("/talk")&&E.current("end")},[e]);return s3(Z),c.useEffect(()=>{const Y=()=>{P(!0),Ge.off("voice:call-ended",Y)},X=$=>{switch($){case"start":P();break;case"end":V();break;case"restart":{Ge.on("voice:call-ended",Y),V(!0);break}}};return Ge.on("composer:request-voice",X),()=>{Ge.off("composer:request-voice",X),Ge.off("voice:call-ended",Y)}},[V,P]),{launchAudioCall:K,startAudioCallIfNotStartedAlready:P,endAudioCall:V,toggleAudioInput:U,inputVolume:k,isInputMuted:N,isAudioDeepLink:u,canInitAudio:C}}const ZN=crypto.randomUUID();function Xye(e){return e?{"zh-Hans":"zh-CN","zh-Hant":"zh-TW"}[e]??e:"en-US"}function ebe(){return{sdk:"8.0",messaging:{origin:window.location.origin,channelId:ZN},selection:{mode:"multiple"},accessibility:{showFocusOnLoad:!1,enableFocusTrap:!0},authentication:{},entry:{oneDrive:{recent:{}}},typesAndSources:{mode:"files",filters:[...epe(),...tpe()],pivots:{oneDrive:!0,recent:!0,photos:!1}},commands:{upload:{enabled:!1},createFolder:{enabled:!1}}}}function tbe(){const e=new URLSearchParams({app:"CMC",scenario:"AnalyzeDoc",filePicker:JSON.stringify(ebe()),locale:Xye(Rt.resolvedLanguage)});return`${YN}/picker?${e.toString()}`}const YN="https://onedrive.live.com";async function QN(){const e=await xJ();return(e==null?void 0:e.accessToken)??""}function nbe(e){return e!==null&&typeof e=="object"&&"type"in e&&e.type==="initialize"&&"channelId"in e&&typeof e.channelId=="string"}function sbe({port:e,onClose:t,onPick:n,setIsLoading:s,onError:o}){return async r=>{let a;switch(r.data.type){case"notification":r.data.data.notification==="page-loaded"&&s(!1);break;case"command":switch(e.postMessage({type:"acknowledge",id:r.data.id}),r.data.data.command){case"authenticate":a=await QN(),typeof a<"u"?e.postMessage({type:"result",id:r.data.id,data:{result:"token",token:a}}):(e.postMessage({type:"result",id:r.data.id,data:{result:"error",error:{code:"authTokenError",message:"Could not get OneDrive authentication token."}}}),s(!1),o(),t());break;case"close":t();break;case"pick":r.data.data.items!==void 0&&r.data.data.items.length>0&&r.data.data.items[0]!==void 0&&(n(r.data.data.items),e.postMessage({type:"result",id:r.data.id,data:{result:"success"}}),t());break;default:s(!1),e.postMessage({result:"error",error:{code:"unsupportedCommand",message:r.data.data.command},isExpected:!0}),o(),t();break}break}}}function obe({onClose:e,onPick:t,onError:n}){const s=c.useRef(null),{t:o}=q(),[r,a]=c.useState(!0);return c.useEffect(()=>{var f;const l=()=>{const h={title:o("composer.errors.attachmentOneDrive.title"),message:o("composer.errors.attachmentOneDrive.message")};n(h),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:h.message,eventInfo_details:"Error submitting message"}})},u=(f=s.current)==null?void 0:f.contentWindow;let d,m;return u&&(async()=>{const g=u.document.createElement("form");g.method="POST",g.action=tbe(),u.document.body.appendChild(g);const C=u.document.createElement("input");C.type="hidden",C.name="access_token",C.value=await QN(),g.appendChild(C),window.addEventListener("message",v=>{if(v.origin&&v.origin===YN){const y=v.data;if(nbe(y)&&y.channelId===ZN){if([m]=v.ports,!m){a(!1),l(),e();return}d=sbe({port:m,onClose:e,onPick:t,onError:l,setIsLoading:a}),m.addEventListener("message",d),m.start(),m.postMessage({type:"activate"})}}}),g.submit()})(),()=>{d&&window.removeEventListener("message",d),m&&m.close()}},[e,t,n,o]),i.jsxs(dn,{isOpen:!0,onClose:e,className:"flex h-[90vh] max-h-[680px] w-[90vw] max-w-[1080px]",fullBleed:!0,children:[r&&i.jsxs("div",{className:"flex size-full items-center justify-center","aria-live":"polite",role:"status","aria-label":o("oneDrive.pickerLoading"),children:[i.jsx("span",{className:"sr-only",children:o("oneDrive.pickerLoading")}),i.jsx(it,{className:"size-20"})]}),i.jsx("iframe",{title:o("onedrive.filePicker"),ref:s,hidden:r,width:"100%",height:"100%"})]})}const rbe=c.lazy(()=>B(()=>import("./wallet-section-DliBqp7J.js"),__vite__mapDeps([375,1,315,316,317,318,319,376,325,309,310,343,308])).then(e=>({default:e.WalletSection}))),JN=64,abe=8,pke={opacity:0,translateY:JN},ibe={opacity:1,scale:1,translateY:0};function cbe(){return uh()?{opacity:1,scale:1,translateY:0}:{opacity:0,translateY:JN}}const qa="size-6",lbe=c.lazy(()=>B(()=>import("./upsell-block-CSJlJKmJ.js"),__vite__mapDeps([377,1,378]))),ube=c.lazy(()=>B(()=>import("./price-tracking-block-92CHGJL7.js").then(e=>e.p),__vite__mapDeps([379,1,326,323,380,329,328])).then(e=>({default:e.PriceTrackingBlock}))),dbe=c.lazy(()=>B(()=>import("./composer-auto-complete-ClCLPIoG.js"),__vite__mapDeps([381,1]))),mbe=c.lazy(()=>B(()=>import("./composer-actions-prompt-suggestions-CJyLcWxA.js"),__vite__mapDeps([382,1,383])).then(e=>({default:e.ComposerActionsPromptSuggestions}))),fbe=c.lazy(()=>B(()=>import("./composer-file-upload-prompt-suggestions-BAVhRzgI.js"),__vite__mapDeps([384,1,383])).then(e=>({default:e.ComposerFileUploadPromptSuggestions}))),pbe=c.lazy(()=>B(()=>import("./voice-options-BGgDqsey.js").then(e=>e.v),__vite__mapDeps([306,1,307]))),hbe=c.lazy(()=>B(()=>import("./over-task-quota-C1j1z4BC.js"),__vite__mapDeps([385,1,386])).then(e=>({default:e.OverTaskQuota}))),gbe=c.lazy(()=>B(()=>import("./computer-use-task-closed-DlL20dIf.js"),__vite__mapDeps([387,1,388,389,390,391,392,393,394,395,396,397,386])).then(e=>({default:e.ComputerUseTaskClosed}))),vbe=c.lazy(()=>B(()=>import("./safety-risk-card-D7STei8e.js"),__vite__mapDeps([398,1,399,386])).then(e=>({default:e.SafetyRiskCard}))),Cbe=c.lazy(()=>B(()=>import("./add-to-page-CmMIJrGs.js"),__vite__mapDeps([400,1])).then(e=>({default:e.AddToPage}))),ybe=c.lazy(()=>B(()=>import("./cross-selling-strip-consumer-DMQJYrnH.js"),__vite__mapDeps([401,1,378]))),bbe=c.lazy(()=>B(()=>import("./composer-prompt-review-DZpznBh8.js"),__vite__mapDeps([402,1,333]))),g0=c.lazy(()=>B(()=>import("./composer-action-frojTvDf.js"),__vite__mapDeps([386,1]))),xbe=c.lazy(()=>B(()=>import("./biometric-consent-BVuDHn-G.js"),__vite__mapDeps([403,1])).then(e=>({default:e.BiometricConsent}))),Sbe=c.lazy(()=>B(()=>import("./daily-briefing-chat-lNc-wUMj.js"),__vite__mapDeps([404,1,405,406,407])).then(e=>({default:e.DailyBriefingChat}))),Ebe=c.lazy(()=>B(()=>import("./composer-sign-in-DQOJCYiZ.js"),__vite__mapDeps([408,1,409]))),wbe=c.lazy(()=>B(()=>import("./daily-briefing-composer-player-BzdSpmCT.js"),__vite__mapDeps([410,1,396,392,393,394,405])));function Ibe(e){var tb,nb,sb;const{suppressBottomSection:t,onInputKeydown:n}=e,{t:s}=q();iX();const{isPortraitEnabled:o}=KC(),r=se(IT),a=se(_T),l=W("image-copy-paste"),u=W("text-paste-modal-file-upload"),d=W("text-paste-file-upload"),m=M(Sa),f=$ve(),h=W("shopping-card"),g=om(),C=W("anonymousattachmentupload"),v=W("onedrive-file-upload"),y=W("ds-editprompt"),b=W("ds-new-progress"),E=!pm(),S=M(Nw),I=W("multi-file-upload"),_=W("dr-nano-single-file-upload"),T=W("attachment-suggestions"),A=wl(),k=xo(),N=t_(),P=ICe(),V=ut(),U=M(cn),K=Ns(),Q=M(Fo),Z=se(Md),Y=gt({breakpoint:"sm"}),X=Fp({breakpoint:"h760"}),$=Fp({breakpoint:"h600"}),ee=uX(),te=dC(),G=lX(),[ie,xe]=c.useState(null),[ce,ae]=Ue(Ia),Se=M(PX),Me=M(LX),Oe=M(MZ),oe=M(ow),le=M(Hv),J=M(I2),Ce=dX(),Pe=CM(),qe=M(hn),Xe=!!(qe!=null&&qe.group),et=M(Lme),fe=W("file-upload-card-v2"),Ee=Ld(),Ae=!Xe&&le||Ce,{startConversationDisabled:Ye}=fm(),De=M(zo),[Ke,Be]=c.useState(!1),[ve,ze]=Ue(bo),[yt,Ne]=Ue(Dce),[Ie,Ze]=Ue(tm),at=se(qv),Te=M(rr),dt=(Te==null?void 0:Te.type)==="popup",At=TCe(),Bt=dt||At,Rs=SN(),Xs=M(Iie),Ps=(tb=re.instance().config().composer)==null?void 0:tb.enableAppShadow,Om=(nb=re.instance().config().uiOverrides)==null?void 0:nb.hideImageDownloadButton,{isPlaying:Ko,pause:rs,resetAllTimers:zl}=hN(),Io=rCe(),nc=mce(),sc=wCe(),Jt=Qt(),Ls=c.useRef(null),Nn=c.useRef(null),Zo=c.useRef(null),Na=c.useRef(null),{isOneDriveFilePickerOpen:gs,setIsOneDriveFilePickerOpen:oc,pickedOneDriveItems:_o,setPickedOneDriveItems:Gn,selectOneDriveFile:Os,onPickCallback:Ra,onCloseCallback:Pt}=FN(),Yo=W("imagegenv3"),Pa=W("logged-out-sharing"),Ar=!Gt("kill-composer-layout-animations"),{isMediaViewerOpen:Wn,closeMediaViewer:Dm,isPictureInPictureSupported:jm,triggerPictureInPicture:Sh,showOneLineComposerWhenMediaViewerOpen:He,contentComposerType:H,contentPageType:_e,triggerVideoDownload:Ve}=ka(),{trackConsumptionPageComposerClick:Lt,trackConsumptionPageComposerSubmit:En}=Kve(),{switchMsnConversation:nn}=kCe(),kt=Mfe(),eo=H===Pp.IMAGE_VIEWER,kr=H===Pp.CLOSE_BUTTON,$n=V.endsWith("/talk"),ft=V.endsWith("/daily"),rc=W("1s-dbchat"),Um=W("discover-composer-off"),Qo=lh(),uy=ft||Qo,dy=Sr(),Gl=ZA(),La=V.startsWith("/chats")&&!$n,Wl=V.startsWith("/shares"),oP=_e==="weather",my=M(Ja),{login:rP}=Xi(),ac=ve==="dialog",$l=f&&ve==="checkout",aP=bCe(),To=Ys(),[iP,cP]=c.useState(!1),to=K3(),{isCentralComposerEnabled:Eh,isAutoSuggestEnabled:lP,isStarterPromptsEnabled:uP,isWidgetSectionEnabled:dP,isAppearanceOnHomeEnabled:mP}=Tm(),{floatingStyles:fP,edgeTabMenuRefs:wh,isMultiTabsMenuExpanded:pP,setIsMultiTabsMenuExpanded:fy,multiTabsMenuMode:hP,setMultiTabsMenuMode:py,handleMentionEvent:gP,handleMultiTabsMenuSaveBtnEvent:hy,handleMultiTabsMenuCloseBtnEvent:gy,handleUserInputEnterEvent:vP,handleUserInputKeydownEvent:vy,isMentionTriggered:Cy,isFetchingTabsPageContext:yy}=Wve(),by=M(Tie),CP=To==="coco",ql=To==="computerUse",Kl=Eh&&(!ve||ve==="biometric-consent"),xy=lP&&!ve&&!ql,Sy=G==="autosuggest"&&xy,Ey=c.useId(),yP=M(UT),bP=uP&&(!ve||ve==="biometric-consent")&&!ql&&!yP&&(!$||Y),xP=Kl&&dP&&!ql&&(!X||Y),Fm=c.useRef(null),SP=_Ce(),EP=!$n&&!ft&&!Qo&&!Kl&&!$l&&!oP,wy=(Gl||La||dy||Wl)&&(!ve||ve==="biometric-consent")&&!(Wn&&!He),Ih=$l,_h=M(pC),Iy=M(PZ),[Th,_y]=Ue(AX),Ty=M(kX);W("multiple-research-tasks-in-conversation");const ic=zee(),Zl=M(Hn),Oa=Zl==="side-by-side"&&(ic==null?void 0:ic.type)==="computerUse"&&La,Ay=bh(),Bm=Oa&&!n_(ic.status),Yl=Oa&&Qee(ic),wP=Oa&&Jee(ic),IP=ei("voice"),_P=!V.endsWith("/agents")&&!ft&&!dy&&!Wl&&!mP&&!Wn&&!A,Vm=Ty&&!0&&!b,ky=Yl||Oa||ft||Vm||Wn||!IP||!Ee,TP=c.useCallback(()=>{const de=[];if(Nn.current){const We=Nn.current.getTextAreaRef();We.current&&de.push(We)}return de},[Nn]),My=!(Wn&&!He)&&!$n&&(!ve||ve==="daily-briefing-chat"),Hm=Oe||!My||Bm||Yl||wP||Vm,[AP,kP]=c.useState(!1),Ql=M(TX),Mr=M(_X),[Ao,Ny]=Ue(LI),Ah=Dl(),Ry=()=>{wu(Rm)},Py=()=>{wu(xM)},Ly=()=>{wu(bM)},kh=se(Sn),Jl=ve==="prompt-sign-in"||ve==="prompt-3p-sign-in"||ve==="prompt-location"||ve==="prompt-review"||ve==="confirm-link-navigation"||ve==="cross-promo-card"||ve==="shopping-upsell-card"||ve==="shopping-price-tracking"||ve==="add-to-page"||ve==="safety-risk-card"||ve==="computer-use-task-closed"||ve==="over-task-quota"||ve==="daily-briefing-chat"||ve==="biometric-consent",Oy=!$n&&ve!=="daily-briefing-player"&&ve!=="audioSettings"&&ve!=="checkout"&&!Jl&&!(Wn&&!He),MP=cbe(),NP=c.useCallback(de=>{Hr(de)},[]),RP=()=>{var We;const de=((We=re.instance().config().composer)==null?void 0:We.homeButtonState)??"enabled";return de!=="enabled"?de:Gl?"disabled":"enabled"},PP=c.useCallback(()=>{var de;(de=Nn.current)==null||de.focus(),Ka(!0)},[]),LP=c.useCallback(()=>{Zo.current&&(Zo.current.value="")},[]),cc=c.useCallback((de,We)=>{ae({isOpen:!0,scenario:We??null,reason:de})},[ae]),OP=c.useCallback(()=>{cc("fileUpload")},[cc]),{processUploadedFiles:Dy,processUploadedLocalFiles:no,isUploadingAttachments:DP,uploadedAttachments:ko,resetFileUpload:jP,removeAttachment:Mh}=hCe(PP,Hr,LP,OP),UP=M(_ie),so=ko.filter(({error:de})=>!de),jy=so.length>0||by,FP=DP||to&&yy,Da=Xp(),Uy=!!(te.trim().length>0||jy)&&!Hm,Fy=!!((ie&&ie.length>0)===!0||FP||Ae||J||te.trim().length===0&&To==="computerUse")||!Ee,BP=W("file-upload-config"),lc=M(Wo),By=I&&so.length>=lc.maxFilesPerMessage||!Ee,[VP,HP]=c.useMemo(()=>{const{reason:de}=ce;return de?[s(`signInPrompt.${de}Header`,s("signInPrompt.header")),s(`signInPrompt.${de}Text`,s("signInPrompt.text"))]:[s("signInPrompt.header"),s(Pa?"signInPrompt.textV2":"signInPrompt.textV3")]},[Pa,ce,s]),[Vy,zP]=c.useState({onSubmitCallback:null,onCancelCallback:null}),GP=c.useCallback(()=>{var de;hy(),(de=Nn.current)==null||de.focus()},[hy]),WP=c.useCallback(()=>{var de;Cy||(de=Ls.current)==null||de.focus(),gy()},[gy,Cy]),$P=c.useCallback(async()=>new Promise(de=>{if(pe(Pw)||so.length===0){de(!0);return}ze("biometric-consent"),zP({onSubmitCallback:()=>{ze(null),de(!0)},onCancelCallback:()=>{ze(null),de(!1)}})}),[so,ze]),qP=c.useCallback(de=>{var Mt,Wt;if(!(n&&((Mt=Nn.current)!=null&&Mt.contains(document.activeElement))&&(n(de),de.defaultPrevented)||vy(de))&&de.key==="ArrowDown"&&(Wt=Nn.current)!=null&&Wt.contains(document.activeElement)&&Fm.current){de.preventDefault();const Nr=Fm.current.querySelector("button");Nr&&Nr.focus()}},[vy,n]),KP=async()=>{var de;await jn.stopMessage(),(de=Nn.current)==null||de.focus()},zm=async de=>{var We,Mt;if(Wl&&await w9(),!Uy||!te&&!jy||Fy){await jn.onSubmitMessageBlocked();return}if(!(Yo&&!await $P())){if(b&&To==="research"&&Ty){const Wt=pe(je);if(Wt){kf(s("error.researchTaskNotAllowedWhileRunningAnother"),Wt),Zt(vn());return}}Ry(),Py(),rd(),cL?(Mt=Nn.current)==null||Mt.focus():(We=Nn.current)==null||We.blur(),await gL(de??te)}},ZP=c.useCallback(async de=>{await N();const{title:We,subtitle:Mt}=W2e(s,de);kh({title:We,subtitle:Mt,dismissAfter:3e3})},[N,kh,s]),Nh=M(PA),{launchAudioCall:YP,startAudioCallIfNotStartedAlready:QP,endAudioCall:Rh,toggleAudioInput:JP,inputVolume:XP,isInputMuted:eL,isAudioDeepLink:tL,canInitAudio:nL}=Jye({isAudioCall:$n,onCallTerminated:ZP,onMute:()=>qt({source:"audioCall",scenario:"mute"})});c.useEffect(()=>{Se&&(ze(Ah?"prompt-3p-sign-in":"prompt-sign-in"),ce.isOpen&&ae({...ce,isOpen:!1,reason:ce.reason??(Oe?"overTurnLimit":null)}),Ka(!0))},[ze,ae,Se,ce,Ah,Oe]),c.useEffect(()=>{Me&&("geolocation"in navigator?setTimeout(()=>{ze("prompt-location"),Ka(!0),An("hasBeenPromptedForLocation","true"),D.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"seen"}})},sB):D.trackEvent({name:"system",data:{eventName:"geolocationUnavailable"}}))},[ze,Me]),c.useEffect(()=>{uy?ze("daily-briefing-player"):Bt?(Ka(!0),ze("cross-promo-card")):ze(Yl?"safety-risk-card":Bm?"computer-use-task-closed":Xs?"dialog":null)},[ze,Bt,Bm,Yl,uy,Xs]);const Hy=W("sticky-conversation-mode"),zy=W("persist-conversation-mode");c.useEffect(()=>{Hy&&Zt(zy?wt(kd,ba)??vn():Dn("sticky-conversation-mode")??vn())},[Hy,zy]);const Ph=c.useRef(null),Gm=qve("app"),sL=Ir(de=>{Gm.current&&(de.height===0?Gm.current.style.removeProperty("--composer-attachments-height"):Gm.current.style.setProperty("--composer-attachments-height",`${de.height+abe}px`))}),oL=()=>{as(),Ne(void 0)},Gy=()=>{Ke&&(QP(),Be(!1))},as=()=>{if(ft&&ve==="daily-briefing-chat"&&(ze("daily-briefing-player"),rd()),ve==="prompt-3p-sign-in"&&(Qo||ft)&&ze("daily-briefing-player"),!(Oe||ft||Qo||Yl)){if(Bm){ze("computer-use-task-closed");return}if(ac&&(Mr!=null&&Mr.closeDialogCallback)){Mr.closeDialogCallback();return}ve==="prompt-review"&&YCe(pe(je),"dismissed"),ve==="cross-promo-card"&&Rs(),ve==="audioSettings"&&Gy(),ze(null),ve==="prompt-sign-in"&&ce.scenario&&ae({isOpen:!1,scenario:null})}},Lh=c.useCallback(async()=>{Pe&&Ly(),et&&wu(yM),Rh(),o?(a(!1),r(null),await k({to:"/labs/portrait",from:V})):await N()},[o,r,a,Pe,et,Rh,k,V,N]);c.useEffect(()=>{re.instance().config().endAudioOnVisibilityHidden&&!Iy&&(Ko?rs==null||rs():$n&&Lh())},[Lh,$n,Ko,rs,Iy]);const Wy={title:s("composer.endAudioCall"),icon:i.jsx(an,{className:qa,"aria-hidden":!0}),isVisible:!0,onClick:Lh},rL=zve(),$y=de=>{o&&(Ge.emit("portrait:change-voice",de),a(!0)),ft||Qo?rs==null||rs():$n&&Rh(),Be(!0)},Wm=se(L1),$m=(["chat","reasoning","smart","study"].includes(To)||To==="research"&&_)&&!Oa&&!AP,aL=mC();let wn=M(jl);To==="research"?wn=lc.document.mimeTypes:aL==="video"&&(wn=lc.image.mimeTypes);const iL=b3(wn);c.useEffect(()=>{for(const[de,We]of ko.entries())y3(We.file,{supportedMimeTypes:wn})||Mh(de)},[wn,ko,Mh]);const cL=Z3(),Fn=yh(),Xl=Fn&&!$n&&!Wn,uc=c.useCallback(()=>{Wm(null)},[Wm]);c.useEffect(()=>{uc()},[Oy,uc]),c.useEffect(()=>{te&&_h?Su("autosuggest"):ql&&(!te||Fn)?Su("actions-autosuggest"):T&&!te&&ko.length>0?Su("file-upload-autosuggest"):Su("starter-prompts")},[_h,te,Fn,ql,T,ko]),go({onOutsideEvent:()=>{as()},elements:[Ph],includeScroll:!1,invokeOnce:!1,shouldAttachListeners:!$l}),go({onOutsideEvent:Df,elements:[Ph,Fm],includeScroll:!1,invokeOnce:!1});const Oh=()=>{cP(!0),ze(de=>de==="audioSettings"?(Gy(),null):(Pe&&Ly(),"audioSettings"))},lL={title:s("composer.closeVoiceSettings"),icon:i.jsx(an,{className:qa,"aria-hidden":!0}),isVisible:!0,onClick:Oh},qm={title:s("imageCard.composer.closeImageViewer"),icon:i.jsx(an,{className:qa,"aria-hidden":!0}),isVisible:!0,onClick:Dm},Dh=M(Fl),{shareClickHandler:uL}=V3({messageId:Dh==null?void 0:Dh.messageId,scenario:"shareAsLinkSingleImage",trackShareClick:()=>MA({scenario:"shareAsLinkSingleImage",pageName:"imageDetailPage"})}),qy={title:s("common.share"),icon:i.jsx(gh,{className:qa,"aria-hidden":!0}),isVisible:!0,onClick:uL},Ky={title:s("imageCard.composer.downloadImage"),icon:i.jsx(pd,{className:qa,"aria-hidden":!0}),isVisible:!0,onClick:async()=>{if((kt==null?void 0:kt.type)==="image")try{await mk({url:kt.url,fileName:nk()})}catch(de){const We=de instanceof Error?de.message:"unknown error on downloading image";X2(We)}}},Zy={title:s("video.downloadVideoViewer"),icon:i.jsx(pd,{className:qa,"aria-hidden":!0}),isVisible:!0,onClick:Ve},dL=()=>{Ka(!0),g&&gA("idle")},mL=de=>{xy&&de!==void 0&&yk(de)},fL=async()=>{_P&&(Gl&&ye({source:"composerInput",scenario:"clickNavigateToChat",pageName:"discover"}),La||await Jy()),Wn&&He&&Lt()},pL=(de,We)=>{wk({prompt:de,prefix:We}),zm(de)},Yy=c.useCallback(de=>{hd({prompt:de,prefillSource:"promptPassThrough"}),Ze(null),at(null)},[Ze,at]);c.useEffect(()=>{((Ie==null?void 0:Ie.source)==="promptInUrl"||(Ie==null?void 0:Ie.source)==="edgeOnAskCopilot")&&Yy(Ie.prompt)},[Ie,Yy]);const jh=c.useCallback((de,We)=>{const{scenario:Mt,reasonIfSignInError:Wt}=We;de.message==="not-signed-in"?cc(Wt,Mt):Hr(uk(de.message))},[cc]),hL=W("local-agents"),gL=async de=>{var Rr,eu,tu,Km;const We=_1e(de),Mt=I1e(de,ko),Wt=de.trim(),Nr=To==="research"&&y?{research:{awaitUserConfirmation:!0}}:void 0;if(ve!=="daily-briefing-chat"&&(jP(),Ka(!0),RI(!1),ze(null)),Df(),hL){if(Wt.startsWith("/agent")){await P();return}if(V.endsWith("/agents"))return}Wn&&He?(await nn(),Z(!0),En()):ve!=="daily-briefing-chat"&&!A&&await N();try{pp(!0);let Pr;Io&&(Pr=Io),nc&&(Pr=nc),sc&&(Pr=sc),await jn.submitMessage({text:Wt,filesWithAttachment:ko,inputMethod:"text",scenario:We??void 0,customData:Mt??void 0,reference:Pr,context:Nr})}catch(Pr){if(Pr instanceof Error){let ob={};so.length>0&&(ob={eventInfo_uploadFileSize:((eu=(Rr=so[0])==null?void 0:Rr.file)==null?void 0:eu.size)??0,eventInfo_uploadFileType:((Km=(tu=so[0])==null?void 0:tu.file)==null?void 0:Km.type)??"",eventInfo_numDocumentsUploaded:so.length}),D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:Pr.message,eventInfo_details:"Error submitting message",...ob}}),jh(Pr,{reasonIfSignInError:"fileUpload"})}else D.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:"Unknown error",eventInfo_details:"Error submitting message"}}),Hr({title:s("composer.errors.default.title"),message:s("composer.errors.default.message")})}finally{pp(!1),T1e()}},dc=c.useCallback(de=>{const We=!Jt&&!C;return We&&cc("fileUpload",de),We},[Jt,C,cc]),Qy=c.useCallback(()=>{var de;dc()||(de=Zo.current)==null||de.click()},[dc]),Uh=c.useCallback(de=>{const We=ape(de);no({rawFiles:[We],scenario:"pasteUploadText",replaceExisting:!I,supportedMimeTypes:wn})},[no,I,wn]),vL=c.useCallback(de=>{const We=de.clipboardData.getData("text/plain")||"";We.length>0&&d&&We.length>Y7&&(de.preventDefault(),de.stopPropagation(),Uh(We))},[d,Uh]);c.useEffect(()=>{if(Hm||!l)return()=>{};const de=async We=>{const{file:Mt,error:Wt}=spe(We);(Mt??Wt)&&(We.preventDefault(),Wt?jh(Wt,{reasonIfSignInError:"fileUpload"}):Mt&&no({rawFiles:[Mt],scenario:"pasteUpload",replaceExisting:!I,supportedMimeTypes:wn}))};return document.addEventListener("paste",de),()=>document.removeEventListener("paste",de)},[no,Hm,l,jh,I,wn]),c.useEffect(()=>{Th!==null&&(no({rawFiles:[Th],scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn}),_y(null))},[Th,no,_y,I,wn]),c.useEffect(()=>{_o&&!gs&&(Dy({uploads:_o.map(de=>({kind:"onedrive",item:de,file:new File([],de.name)})),scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn}),Gn(null))},[_o,Gn,gs,Dy,I,wn]),c.useEffect(()=>{ft&&zl()},[ft]);function CL(de){const We=Array.from(de.target.files??[]),Mt=We[0];if(We.length===0||!Mt)return;no({rawFiles:I?We:[Mt],scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn})}const yL=c.useCallback(de=>{if(!$m||!de.dataTransfer||(de.preventDefault(),dc()))return;uc();const We=de.dataTransfer.files[0],Mt=Array.from(de.dataTransfer.files);We&&no({rawFiles:I?Mt:[We],scenario:"fileUpload",replaceExisting:!I,supportedMimeTypes:wn})},[$m,dc,uc,no,I,wn]),Fh=aCe(My,yL),Bh=(so.length>0||Fh)&&!$n;async function bL(){Wl&&await w9(),qt({source:"audioCallButton",chatMode:To}),dl.onUserInteract("audioCallButton"),await YP()}c.useEffect(()=>{const de=()=>{var We;(We=Nn.current)==null||We.focus()};return Ge.on("composer:focus-input",de),()=>{Ge.off("composer:focus-input",de)}},[]);const Jy=wr(),Xy=c.useCallback(async()=>{if(dc())return;uc();const{file:de,error:We}=await oJ.run({});de?no({rawFiles:[de],scenario:"screenshot",replaceExisting:!I,supportedMimeTypes:wn}):We&&Hr(We)},[uc,dc,no,I,wn]),xL=async()=>{as(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async de=>{const{latitude:We,longitude:Mt,accuracy:Wt}=de.coords;D.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"shared",eventInfo_locationAccuracy:Wt}}),await kn({path:"/user/location",args:{body:{latitude:We,longitude:Mt,accuracyInMeters:Wt,provider:Wt<100?"gps":"wifi"}}})},de=>{D.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"denied",eventInfo_error:{code:de.code,message:de.message}}}),Hr({title:s("composer.errors.location.title"),message:s("composer.errors.location.message")})},{enableHighAccuracy:!0})},SL=lN({from:"/",scenario:"voice"}),EL=()=>{const de=i.jsx(Hs,{className:"end-0",data:Wy,children:Wy.icon});if(ve==="dismiss-audio-call-only")return de;switch(my){case"requires-account":case"signed-out":return i.jsxs(i.Fragment,{children:[de,i.jsx(kM,{className:"mx-2",title:s("voice.signUpOrLogin"),onClick:SL})]});case"time-expired-non-pro":case"time-expired-month-non-pro":return i.jsxs(i.Fragment,{children:[de,rL]});case"time-expired":case"checking-availability":case"start-timeout":case"error":case"not-in-flight":case"throttled":case"throttled-non-pro":case"region-not-available":case"time-expired-month":case"microphone-denied":case"microphone-not-found":return de;case"waiting-for-user-interaction":case"available":return i.jsx(M2e,{expandedSection:ve,settingsIconClassName:qa,dismissCallButton:de,onAudioSettingsClick:Oh,DismissAudioSettings:lL,audioInputProps:{className:"mx-2",inputVolume:XP,isInputMuted:eL,isOutputPlaying:Nh,coachUserUnmute:tL&&!nL&&!iP,onInputClick:JP}});default:return my}},wL=()=>so.length>0?s("userInput.messageRequiredPlaceholderText"):Fh?$m?BP?s("userInput.fileUploadLimit",{imageSizeLimit:lc.image.maxBytes/(1024*1024),documentSizeLimit:lc.document.maxBytes/(1024*1024),maxCount:lc.maxFilesPerMessage}):s("userInput.imageDropPreviewPlaceHolderText"):s("userInput.fileDropNotSupportedPlaceHolderText",{chatMode:md(To)}):Wl?s("userInput.continueConversationInputPlaceholderText"):S!=null&&S.name&&g?s("userInput.characterPlaceholderText",{character:S.name}):s(Vm?"research.placeholder":rc&&ft?ve==="daily-briefing-chat"?"userInput.dailyChatInputPlaceholderText":"userInput.dailyComposerInputPlaceholderText":to?"userInput.placeholderTextWithMention":CP?"userInput.cocoPlaceholderText":"userInput.placeholderText"),Vh=({enableActionButtons:de,hasReducedUserInputMaxHeight:We})=>{var eu,tu;const Mt=!!((eu=re.instance().config().composer)!=null&&eu.smallAttachmentCard)||fe,Nr=ve==="daily-briefing-player"&&rc&&ft?"":void 0,Rr=We??((tu=re.instance().config().composer)==null?void 0:tu.reducedUserInputHeight);return i.jsxs(i.Fragment,{children:[i.jsxs(ge.div,{className:ue("w-full",{"mt-2 h-auto min-h-32 px-2":Bh&&!to&&!Mt,"mt-2 h-auto min-h-[58px] px-2":Bh&&!to&&Mt,"h-auto":to,"h-0":!Bh&&!to}),ref:sL,layout:!0,children:[UP&&i.jsx(M3e,{onRemove:Mh,attachments:ko,onVisibilityChange:kP}),to&&by&&i.jsx(ge.div,{className:"z-10 mt-2 w-full px-2","data-testid":"browser-tabs-preview",children:i.jsx(Fye,{onClick:()=>{py("update"),fy(!0)},isLoading:yy})})]}),i.jsx(J3,{ref:Nn,className:ue("min-h-0 w-auto grow",Fn&&!ft&&"mt-1"),inputContainerClassName:F({"max-h-[15dvh]":Rr,"max-h-user-input-shallow":Eh&&!Rr,"max-h-user-input":!Eh&&!Rr}),disabled:Hm,disabledClassName:Nr,inputValue:te,errorMessage:ie,onClick:fL,onBlur:dL,onChange:Km=>{Ik({text:Km,attachments:so}),Ry(),Py()},onFocus:mL,onPaste:vL,onEnter:async()=>{vP()||await zm()},onKeyDown:qP,onMentionIfEnabled:to?gP:void 0,setInput:E2,setError:xe,placeholder:wL(),characterLimit:oe,rightButtons:de?[i.jsx(v9,{config:eb()},"composer-action-button")]:void 0,testId:"composer-input","aria-autocomplete":"both","aria-controls":Sy?Ey:void 0})]})},eb=()=>{if(Da){if(Ae||Vm)return{mode:"stop",onClick:KP};if(Uy)return{mode:"submit",disabled:Fy,onClick:()=>zm()};if(!m&&!ky)return{mode:"microphone",onClick:bL}}},IL=({homeButtonState:de,enableInputActionButtons:We})=>{const Mt=Fn?"to-background-400/8 from-background-400/5 dark:from-background-200/65 dark:to-background-200/65":"from-background-400/10 to-white/35 dark:from-background-300/35 dark:to-background-200/65",Wt=to?()=>{Wm(null),py("add"),fy(!0)}:void 0,Nr=De==="dark"?AM:TM;return i.jsx(ge.div,{className:ue("relative max-h-full w-expanded-composer max-w-chat bg-gradient-to-b p-1.5",!Da&&"before:pointer-events-none before:absolute before:inset-0 before:rounded-[inherit] before:border before:border-white/100 dark:before:border-white/12",Mt),layout:!0,style:{borderRadius:vf(Xl),boxShadow:Da?Nr:void 0},ref:wh.setReference,children:i.jsxs(ge.div,{className:ue(Fn?w5e:E5e),layout:!0,style:{borderRadius:PCe(Xl)},children:[i.jsx(ge.div,{className:ue(x5e,S5e,Fh?"before:opacity-100 before:delay-100 before:duration-200":"before:opacity-0"),layout:!0,children:Vh({enableActionButtons:We})}),!We&&i.jsxs(ge.div,{className:ue("relative bottom-0 flex justify-between pb-0.5",Fn?"pe-2.5 ps-1.5":"px-2"),layout:!0,children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx($5e,{state:de}),i.jsxs("div",{className:F("flex gap-2",Fn&&"items-center"),children:[!Fn&&i.jsx(W5e,{disableChatModeSwitcher:!ky}),Fn&&i.jsx(Nye,{onSelectFile:Qy,onPasteText:u?Uh:void 0,onSelectOneDriveFile:(U==null?void 0:U.provider)==="microsoft"&&v?Os:void 0,uploadButtonDisabled:By,onSelectUserOpenedTabs:Wt,onTakeScreenshot:Xy,disabled:!Ee})]})]}),i.jsxs("div",{className:F("flex gap-2",Fn&&"items-center"),children:[!Fn&&i.jsx(Hye,{startNewChatDisabled:Ye,onStartNewConversation:()=>Jy(),onSelectFileIfEnabled:$m?Qy:void 0,uploadButtonDisabled:By,onSelectOneDriveFileIfEnabled:(U==null?void 0:U.provider)==="microsoft"&&v?()=>{oc(!0),Wm(null)}:void 0,onTakeScreenshot:Xy,onSelectUserOpenedTabsIfEnabled:Wt,onRef:Rr=>{Ls.current=Rr}}),i.jsx(v9,{config:eb()})]})]})]})})},_L=async()=>{ce.scenario&&(qt({source:"signin",scenario:ce.scenario}),ae({isOpen:!1,scenario:null})),Ah?await k({from:"/conversations",to:"/login"}):await rP({provider:"microsoft"})};return!aP||Gl&&Um&&!Wn?null:i.jsxs(i.Fragment,{children:[Ih&&i.jsx("div",{className:ue("fixed inset-0 size-full bg-background-850/30 backdrop-blur-[10px] dark:bg-background-150/70",ct.composerDimmedBackground)}),i.jsxs("div",{"data-testid":"composer",ref:Gm,className:ue("pointer-events-none absolute bottom-0 flex",Kl&&"sm:bottom-1/2 sm:translate-y-1/2 sm:pt-36",xP&&"sm:pt-80",ct.composer,Zl==="side-by-side"&&La&&K&&!Ay&&"mb-2",Zl==="side-by-side"&&La&&!Ay&&"w-1/4 min-w-secondary-panel",Zl==="side-by-side"&&La&&"end-0 pe-1",(Zl==="chat-only"||!La)&&"w-full","max-sm:w-full",Ih&&ct.composerModalOnDimmedBackground),children:[i.jsx("input",{type:"file",accept:iL.join(","),className:"hidden",ref:Zo,onChange:CL,"aria-hidden":"true",multiple:I}),i.jsx(pt,{children:EP&&i.jsx(i5e,{dynamicHeight:ve===null&&!Gl})}),i.jsx(ge.div,{className:ue("relative flex w-full flex-col-reverse items-center px-3 sm:flex-col",Kl?"sm:mb-0":"sm:mb-8",Ps?"mb-3":"mb-4",(ft||Qo)&&"min-w-72"),initial:E?"enter":!1,animate:"animate",variants:{enter:MP,animate:ibe},transition:SC,style:ev,children:i.jsxs(A8,{transition:ee?cse:{duration:0},children:[i.jsxs(ge.div,{layoutId:Ar?"composer-inner":void 0,className:ue("relative max-h-full min-h-composer min-w-16 max-w-chat rounded-5xl",to&&"z-40"),children:[g&&Oy&&i.jsx(u5e,{}),i.jsx(ge.div,{layoutId:Ar?"composer-container":void 0,className:F("absolute inset-0",!Da&&"hidden"),layout:!0,style:{borderRadius:vf(Xl),boxShadow:Da?MCe(De,Fn):void 0}}),i.jsx(pt,{children:Nh&&i.jsx(h9,{})}),i.jsx(ge.div,{layoutId:Ar?"composer-background":void 0,className:ue("relative shadow-tinted-xl",yee),layout:!0,style:{borderRadius:vf(Xl),boxShadow:Da?NCe(De,Fn):void 0},children:i.jsxs(ge.div,{layoutId:Ar?"composer-content":void 0,className:ue("pointer-events-auto relative flex flex-col overflow-hidden contrast-more:border-2",ac&&"max-w-72",Ih&&Zr),"data-testid":"composer-content",ref:Ph,layout:!0,style:{borderRadius:vf(Xl),boxShadow:Da?RCe(De):void 0},children:[i.jsx(pt,{children:Nh&&i.jsx(h9,{isNested:!0})}),i.jsxs(pt,{children:[ve&&ve!=="daily-briefing-player"&&ve!=="dismiss-audio-call-only"&&i.jsxs(ge.div,{layoutId:Ar?"composer-expanded-section-container":void 0,className:ue(!ac&&!Jl&&"border-b border-black/10 dark:border-white/10",ve==="audioSettings"&&"w-settings",Jl&&ve!=="daily-briefing-chat"&&"w-prompt-sign-in",Jl&&(ve==="computer-use-task-closed"||ve==="safety-risk-card")&&"max-w-single-image",ve==="daily-briefing-chat"&&(Q?"min-w-secondary-panel bp-960:max-w-full lg:w-expanded-composer":"w-expanded-composer")),layout:!0,children:[ve!=="dialog"&&i.jsxs(ge.div,{"data-testid":"audio-settings-dialog",className:ue("t-custom-scrollbar max-h-expanded-section overflow-auto",ve==="audioSettings"&&"px-2 py-4"),layout:!0,initial:Fe,animate:{...nt,transition:{delay:ts.default}},ref:Na,children:[i.jsx(pt,{children:Jl&&i.jsxs(jf,{children:[ve==="biometric-consent"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(xbe,{onSubmit:Vy.onSubmitCallback,onCancel:Vy.onCancelCallback})}),ve==="prompt-sign-in"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(g0,{header:VP,text:HP,primaryAction:{title:s("common.loginText"),onClick:_L},testid:"prompt-sign-in-composer-action",secondaryAction:Oe?void 0:{onClick:as,title:s("common.maybeLater"),testid:"maybe-later-button"},onClose:as})}),ve==="prompt-3p-sign-in"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(Ebe,{dismiss:as})}),ve==="daily-briefing-chat"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(Sbe,{dismiss:as,inputUI:Vh({enableActionButtons:!0,hasReducedUserInputMaxHeight:!0})})}),ve==="prompt-location"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(g0,{header:s("locationPermission.header"),text:s("locationPermission.text"),primaryAction:{title:s("locationPermission.share"),onClick:xL},secondaryAction:{onClick:as,title:s("common.maybeLater")},onClose:as})}),ve==="confirm-link-navigation"&&(Ao==null?void 0:Ao.url)&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(g0,{showImage:!1,header:s("composer.linkConfirmation.header"),text:s("composer.linkConfirmation.text",{url:Ao.url}),primaryAction:{title:s("common.continue"),onClick:()=>{if(Ao.url){qt({source:"linkNavigationConfirmButton",conversationId:Ao.conversationId,messageId:Ao.messageId,destination:lo(Ao.url)});try{SP(Qr(lo(Ao.url)))}catch{kh({intent:"error",title:s("composer.link.openFailed.title"),subtitle:s("composer.link.openFailed.message",{link:Ao.url}),dismissAfter:3e3})}as(),Ny(void 0)}}},secondaryAction:{onClick:()=>{as(),Ny(void 0)},title:s("common.cancel")},onClose:as,restoreFocusOnUnmount:!0})}),ve==="prompt-review"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(bbe,{})}),ve==="cross-promo-card"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(ybe,{variant:"aggressive"})}),h&&ve==="shopping-upsell-card"&&i.jsx(c.Suspense,{fallback:i.jsx(_9,{}),children:i.jsx(lbe,{onDismiss:()=>ze(null)})}),ve==="shopping-price-tracking"&&yt&&i.jsx(c.Suspense,{fallback:i.jsx(_9,{}),children:i.jsx(ube,{content:yt.data,messageId:yt.messageId,cardType:yt.cardType,onConfirm:()=>ze("shopping-upsell-card"),onCancel:oL})}),ve==="add-to-page"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(Cbe,{onClose:as})}),ve==="safety-risk-card"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(vbe,{})}),ve==="computer-use-task-closed"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(gbe,{})}),ve==="over-task-quota"&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(hbe,{})})]})}),ve==="audioSettings"&&i.jsx(jf,{children:i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})}),children:i.jsx(pbe,{onVoiceSelected:$y,onVoiceSpeedChange:()=>$y(),onAppearanceEnabled:Oh})})}),$l&&i.jsx(jf,{children:i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex max-h-expanded-section w-prompt-sign-in flex-col overflow-auto rounded-t-5xl p-5 sm:w-checkout-composer",children:i.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:i.jsx(it,{className:"size-12"})})}),children:i.jsx(rbe,{onDismiss:as})})})]}),ac&&Ql&&Mr&&i.jsx(_5e,{titleKey:Ql.titleKey,textKey:Ql.textKey,buttonTextKey:Ql.buttonTextKey,onClick:Ql.onClick,button:Mr.button,cancelButton:Mr.cancelButton,closeDialogCallback:Mr.closeDialogCallback})]}),(ft&&ve!=="daily-briefing-chat"||Qo)&&i.jsx(c.Suspense,{fallback:i.jsx("div",{className:F("flex h-composer items-center justify-center",ft?"w-daily-briefing-lg":"w-daily-briefing"),children:i.jsx(it,{className:"size-12"})}),children:i.jsx(wbe,{isPodcast:Qo,inputUI:rc&&!Qo?Vh({enableActionButtons:!1}):void 0})}),$n&&(!ve||ve==="audioSettings"||ve==="dismiss-audio-call-only")&&i.jsx("div",{className:"flex justify-center p-2",children:EL()}),wy&&IL({homeButtonState:Oa||Fn?"hidden":RP(),enableInputActionButtons:Wn&&He||Fn&&Oa}),Wn&&kr&&!$l&&i.jsxs(ge.div,{className:ue("relative flex max-h-full max-w-chat justify-center",!ve&&"p-2",!ac&&"h-composer"),layout:!0,children:[i.jsx(Hs,{data:qm,children:qm.icon}),jm&&i.jsx(Hve,{onClick:Sh}),Ve&&i.jsx(Hs,{data:Zy,children:Zy.icon})]}),Wn&&eo&&i.jsxs(ge.div,{className:ue("relative flex max-h-full max-w-chat justify-center",!ve&&"p-2",!ac&&"h-composer"),layout:!0,children:[i.jsx(Hs,{data:qm,children:qm.icon}),(kt==null?void 0:kt.type)==="image"&&kt.shareable&&i.jsx(Hs,{data:qy,children:qy.icon}),(kt==null?void 0:kt.type)==="image"&&kt.downloadable&&!Om&&i.jsx(Hs,{data:Ky,children:Ky.icon})]}),gs&&i.jsx(obe,{onPick:Ra,onClose:Pt,onError:NP})]})]})})]}),Kl&&!t&&i.jsxs(ln,{id:G,className:ue("flex h-[150px] w-full max-w-chat flex-none items-end px-2 sm:flex-initial sm:items-start",ct.composerBottomSlot),delay:.2,initial:E?"initial":!1,children:[Sy&&i.jsx(c.Suspense,{fallback:null,children:i.jsx(dbe,{id:Ey,dataResponse:_h,onClick:(de,We)=>pL(de,We),onHighlight:de=>E2(de),onDismiss:Df,className:"pointer-events-auto mb-3 sm:mb-0 sm:mt-3",ref:Fm,query:te})}),G==="actions-autosuggest"&&i.jsx(c.Suspense,{fallback:null,children:i.jsx(mbe,{className:"pointer-events-auto mb-3 sm:mb-0 sm:mt-3",onClick:de=>hd({prompt:de,prefillSource:"action"})})}),G==="file-upload-autosuggest"&&i.jsx(c.Suspense,{fallback:null,children:i.jsx(fbe,{className:"pointer-events-auto mb-3 sm:mb-0 sm:mt-3",isMultiple:ko.length>1,variant:((sb=ko[0])==null?void 0:sb.type)??"file",onClick:de=>{zm(de)}})}),G==="starter-prompts"&&bP&&i.jsx(W3e,{className:"pointer-events-auto sm:mt-8",onWidgetClick:_3})]}),to&&pP&&wy&&i.jsx(Vve,{onSave:GP,styles:fP,onRef:wh.setFloating,onClose:WP,outsideClickElements:TP(),mode:hP,originElement:wh.reference})]})})]})]})}function _be(){const e=Gt("kill-cookie-banner"),t=M(Mn),[n,s]=Ue(Zv),[o,r]=c.useState("main"),a=Ni(),[l,u]=c.useState(()=>a.analytics),[d,m]=c.useState(a.advertising),[f,h]=c.useState(a.socialMedia),g=X1(t),C=!!q5(),[v,y]=Ue(mA),b=!e&&(!!v||g&&!C&&!n);if(c.useEffect(()=>{b&&D.trackEvent({name:"system",data:{eventName:"cookieBannerShown",eventInfo_region:t}})},[t,b]),!b)return null;const E=I=>{D.trackEvent({name:"interaction",data:{eventName:"cookieBannerChoice",eventInfo_analytics:I.analytics,eventInfo_advertising:I.advertising,eventInfo_socialMedia:I.socialMedia}}),fF(I),r("main"),y(void 0),s(!0)},S=v==="more-options";return i.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[i.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-background-150 opacity-90 dark:bg-background-150"}),i.jsx("div",{className:ue("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Qs,ct.modal),children:i.jsxs("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:[v!=="more-options"&&o==="main"&&i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-lg",children:z("cookies.heading")}),i.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-xs sm:flex-row",children:[i.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-xs sm:flex-row",children:[i.jsx("p",{children:z("cookies.bannerIntro")}),i.jsxs("p",{children:[z("cookies.bannerExplanation"),i.jsx(ls,{href:Jn,title:z("cookies.privacyLink"),className:"ps-1 underline",children:z("cookies.privacyLink")})]})]}),i.jsxs("div",{className:"flex min-w-44 shrink-0 grow flex-col gap-2",children:[i.jsx(ne,{variant:"rect",size:"32-xs",onClick:()=>E({analytics:!0,advertising:!0,socialMedia:!0}),title:z("cookies.accept"),testId:"cookie-banner-accept-button",children:z("cookies.accept")}),i.jsx(ne,{variant:"rect",size:"32-xs",onClick:()=>E({analytics:!1,advertising:!1,socialMedia:!1}),title:z("cookies.reject"),testId:"cookie-banner-reject-button",children:z("cookies.reject")}),i.jsx(ne,{variant:"rect",color:"subtle-dimmed",size:"32-xs",onClick:()=>{r("more-options")},title:z("cookies.moreOptions"),testId:"cookie-banner-options-button",children:z("cookies.moreOptions")})]})]})]}),(v==="more-options"||o==="more-options")&&i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center",children:[!S&&i.jsx(ne,{title:z("common.backText"),variant:"circle",color:"subtle-dimmed",size:"32-xs",onClick:()=>r("main"),children:i.jsx(ds,{className:"rotate-180"})}),i.jsx("h3",{className:ue({"ps-3":!S},"text-lg"),children:z("cookies.moreOptionsHeading")})]}),i.jsx("p",{className:"py-3 text-xs",children:z("cookies.essentialCookiesExplanation")}),i.jsx(v0,{label:z("cookies.advertisingLabel"),explanation:z("cookies.advertisingDescription"),isChecked:d,onChange:()=>m(I=>!I),testId:"cookie-banner-advertising-option"}),i.jsx(v0,{label:z("cookies.analyticsLabel"),explanation:z("cookies.analyticsDescription"),isChecked:l,onChange:()=>u(I=>!I),testId:"cookie-banner-analytics-option"}),i.jsx(v0,{label:z("cookies.socialMediaLabel"),explanation:z("cookies.socialMediaDescription"),isChecked:f,onChange:()=>h(I=>!I),testId:"cookie-banner-social-option"}),i.jsx("div",{className:"flex justify-end",children:i.jsx(ne,{variant:"rect",size:"36-sm",className:"w-fit px-7",onClick:()=>{E({analytics:l,advertising:d,socialMedia:f})},title:z("cookies.savePreferences"),testId:"cookie-banner-save",children:z("cookies.savePreferences")})})]})]})})]})}function v0(e){const{label:t,explanation:n,isChecked:s,onChange:o,testId:r}=e;return i.jsxs(i.Fragment,{children:[i.jsx(ms,{horizontalMargin:!1}),i.jsx(RN,{label:t,className:"w-full py-2 pe-1",isChecked:s,onChange:o,testId:r}),i.jsx("p",{className:"pb-4 pt-1 text-xs",children:n})]})}function Tbe(){const[e,t]=c.useState(!0),n=M(rr),s=SN(),o=c.useMemo(()=>n==null?void 0:n.images,[n]),r=c.useMemo(()=>({title:n==null?void 0:n.title,subTitle:n==null?void 0:n.subTitle}),[n]),l=M(zo)==="dark"?o==null?void 0:o.dark:o==null?void 0:o.light,u=r;c.useEffect(()=>{Pc({name:"interaction",status:"Shown",eventName:"crossPromotionStripCard",source:"bottomRightCard"})},[]);const d=()=>{t(!1),s()};return n===null||!e?null:i.jsx(ln,{mode:"sync",className:"fixed bottom-5 end-5 z-[1000]",children:i.jsxs("div",{className:ue("flex h-32 w-96 flex-col justify-center rounded-5xl border border-white bg-background-100 p-3 dark:border-white/5 dark:bg-background-250"),children:[i.jsxs("div",{className:"flex items-center",children:[l&&i.jsx("img",{src:l,alt:z("crossSelling.imageAlt"),className:"size-24 rounded-lg object-cover"}),i.jsxs("div",{className:"me-6 ms-3",children:[i.jsx("div",{className:"mb-1 text-sm",children:i.jsx("strong",{children:u.title})}),i.jsx("div",{className:"text-sm",children:u.subTitle})]})]}),i.jsx("div",{className:"absolute end-1.5 top-1.5 flex self-start",children:i.jsx(ne,{title:z("common.closeText"),variant:"square",color:"subtle-dimmed","aria-label":z("common.closeText"),onClick:d,className:"flex size-8 items-center justify-center p-1.5",children:i.jsx(an,{className:"m-0 size-5 self-center p-0"})})})]})})}function L9({icon:e,text:t,buttonText:n,buttonColor:s,buttonOnClick:o,className:r=""}){return i.jsxs("div",{className:ue("flex items-center justify-between",r),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex size-10 items-center justify-center rounded-[8.5px] border border-black/10 bg-background-200 dark:border-white/10",children:i.jsx("div",{className:"m-1 size-6",children:e})}),i.jsx("p",{className:"text-base",children:t})]}),i.jsx(ne,{className:"h-10 w-24",color:s,title:n,"aria-label":n,variant:"rect",onClick:o,children:n})]})}const Abe="https://ercz.adj.st/home?network=1g17o7tz&campaign=1gl0zo0u&adj_t=1gl0zo0u&adj_deep_link=sapphirecopilot%3A%2F%2Fhome%3Fnetwork%3D1g17o7tz%26campaign%3D1gl0zo0u&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.microsoft.copilot&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fmicrosoft-copilot%2Fid6472538445%3Fct%3DCMC_Copilot_ContinueChatting%26pt%3D80423";function kbe(){const e=Z3(),t=Hd(),n=KK(),s=ZK(),o=c.useRef(null),[r,a]=c.useState(!1),l=M(Wd),u=M(Ri),d=M(sw),m=W("cross-selling-title-dn"),f=W("cross-selling-title-tn"),h=W("cross-selling-description-f-dc"),g=W("cross-selling-description-s-w"),C=W("cross-selling-triggerlogic-delay"),v=W("cross-selling-no-browser"),y=()=>m?z("crossSelling.headerDownloadNow"):f?z("crossSelling.headerTryNow"):z("crossSelling.header"),b=()=>h?z("crossSelling.buttonDownloadCopilot"):z("common.open"),E=()=>g?z("crossSelling.browserWeb"):z("crossSelling.browser"),S=()=>{a(!0),Pc({name:"system",status:"Shown",eventName:"copilotMobileCrossSelling"})};c.useEffect(()=>{if(!l||u||e||n||s||!t){a(!1);return}if(!d){a(!1);return}const T=rn($b),A=rn(tg),k=!Ip(T,3*rp),N=OC(A,3);k||N?C?setTimeout(()=>{S()},5e3):S():Pc({name:"system",status:"TriggeredButSnoozed",eventName:"copilotMobileCrossSelling"})},[u,e,n,s,l,d,t,C,v]);const I=()=>{An($b,Date.now().toString());const T=rn(tg);An(tg,`${parseInt(T??"0",10)+1}`),a(!1),Pc({name:"interaction",status:"Dismissed",eventName:"copilotMobileCrossSelling"})},_=()=>{Eo(Abe),a(!1),Pc({name:"interaction",status:"Clicked",eventName:"copilotMobileCrossSelling"})};return r?i.jsx(ln,{mode:"sync",className:ue("relative",ct.modal),children:i.jsx("div",{className:"fixed inset-0 grid bg-background-850/30 dark:bg-background-150/70",onClick:v?I:void 0,role:v?"button":void 0,"aria-label":v?z("common.close"):void 0,children:i.jsx("div",{ref:o,className:"mb-0 h-fit w-full self-end justify-self-center rounded-t-3xl border border-white/10 bg-background-200 p-2 contrast-more:border-2 md:mb-5 md:w-fit md:rounded-3xl",onClick:v?T=>T.stopPropagation():void 0,role:"dialog",children:i.jsxs("div",{className:"mx-3 mb-6 mt-3 flex flex-col gap-4",children:[i.jsx("div",{className:"text-lg md:text-center",children:y()}),i.jsx(L9,{icon:i.jsx(Sm,{}),text:z("crossSelling.copilotApp"),buttonText:b(),buttonColor:"strong",buttonOnClick:_,className:"gap-14"}),!v&&i.jsx(L9,{icon:i.jsx(Im,{}),text:E(),buttonText:z("common.continue"),buttonColor:"subtle-bright",buttonOnClick:I,className:"gap-14"})]})})})}):null}function Mbe(){const{alreadyShown:e,dismissCoachmark:t}=qo(y2e),[n,s]=c.useState(!1),o=c.useCallback(()=>{s(!1),t()},[t]);return c.useEffect(()=>{if(!e){const r=()=>{s(!0)};return Ge.on("edge:inline-browsing-replace-visible-conversation",r),()=>{Ge.off("edge:inline-browsing-replace-visible-conversation",r)}}},[e]),{showInlineBrowsingPreviousConversationsCoachmark:n,dismissInlineBrowsingPreviousConversationsCoachmark:o}}function Nbe(e){const{renderTrigger:t}=e,{t:n}=q(),{isOpen:s,title:o,description:r,dismiss:a}=Rbe(),l=u=>{u.stopPropagation(),a()};return i.jsx(Pm,{className:"max-w-48 cursor-pointer bg-black dark:bg-background-850",arrowClassName:"dark:fill-background-850 fill-black",isOpen:s,placement:"bottom",withArrow:!0,offset:8,renderReferenceElement:u=>i.jsx("div",{ref:u.ref,className:"relative",children:t({onClick:()=>{a()}})}),portalId:"composer-container",onInsideEvent:()=>{a()},children:i.jsxs("div",{className:"flex max-w-[160px] flex-col gap-0.5 bg-black text-white dark:bg-background-850 dark:text-black",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-2xs-strong",children:o}),i.jsx("button",{onClick:l,type:"button","aria-label":n("common.dismiss"),children:i.jsx(an,{className:"size-4"})})]}),i.jsx("div",{className:"text-2xs",children:r})]})})}function Rbe(){const{t:e}=q(),{showInlineBrowsingPreviousConversationsCoachmark:t,dismissInlineBrowsingPreviousConversationsCoachmark:n}=Mbe();return t?{isOpen:!0,title:e("composer.chatModes.inline.myConversations.coachmarkTitle"),description:e("composer.chatModes.inline.myConversations.description"),dismiss:n}:{isOpen:!1,title:"",description:"",dismiss:()=>{}}}function Pbe(e){const{className:t}=e,{t:n}=q(),[s,o]=c.useState(!1),r=M(jA),a=se(Fo),l=c.useRef(null),u=c.useCallback(m=>{l.current=m},[]),d=c.useCallback(m=>{m.key==="Escape"&&(m.preventDefault(),m.stopPropagation(),o(!1))},[]);return i.jsx(bm,{isOpen:s,onIsOpenChange:o,renderTrigger:m=>i.jsx(Nbe,{renderTrigger:f=>i.jsx(ne,{ref:h=>{m.ref(h),u(h)},onClick:h=>{m.onClick(h),f.onClick(h)},color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",title:n("edgeHeader.dropdownMenuButtonTitle"),className:"ms-auto",testId:"header-dropdown","aria-haspopup":"menu","aria-expanded":s,children:i.jsx(Em,{className:"size-5"})})}),options:{overrideZIndex:ct.header,placement:"bottom-end",offset:{mainAxis:4,crossAxis:0},hideOnMenuClick:!0,returnFocus:!1},className:F(Qs,"flex p-1",t),children:i.jsxs(Tr,{axis:"vertical",className:"flex flex-col items-start gap-1",role:"menu",circular:!0,onKeyDown:d,children:[!r&&i.jsx(ne,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:()=>{a(!0),ye({source:"sidebarHeader"})},title:n("edgeHeader.conversationHistory"),testId:"header-conversation-history-button",role:"menuitem",children:n("edgeHeader.conversationHistory")}),i.jsx(ne,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:m=>{m.stopPropagation(),a(!1),zT("menu",{onPopPageCallback:()=>{var f;(f=l.current)==null||f.focus()}}),o(!1)},title:n("settings.settings"),testId:"header-settings-button",role:"menuitem",children:n("settings.settings")}),i.jsx(ne,{variant:"rect",color:"subtle-dimmed-inverted",className:"w-full justify-start text-sm",onClick:()=>{Ge.emit("edge:header-command","sendFeedback")},title:n("settings.feedbackButton"),testId:"header-feedback-button",role:"menuitem",children:n("settings.feedbackButton")})]})})}const XN=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M3.28035 2.21967C2.98746 1.92678 2.51258 1.92677 2.21968 2.21966C1.92678 2.51255 1.92677 2.98742 2.21967 3.28032L8.12461 9.18526L4.81064 10.3301C3.93794 10.6315 3.68202 11.7426 4.3349 12.3954L7.43942 15.4999L3.00009 19.9392L3.00001 20.9999H4.06077L8.50009 16.5605L11.6046 19.665C12.2575 20.3179 13.3686 20.062 13.67 19.1893L14.8148 15.8755L20.7196 21.7803C21.0125 22.0732 21.4874 22.0732 21.7803 21.7803C22.0732 21.4874 22.0732 21.0126 21.7803 20.7197L3.28035 2.21967ZM13.6353 14.696L12.3827 18.3218L5.67816 11.6174L9.30412 10.3648L13.6353 14.696ZM19.6829 10.8201L15.8957 12.7137L17.0137 13.8317L20.3537 12.1617C22.0326 11.3223 22.3957 9.08476 21.0684 7.75751L16.2426 2.93179C14.9153 1.60453 12.6778 1.96763 11.8383 3.6465L10.1684 6.98637L11.2864 8.10441L13.18 4.31731C13.5616 3.55419 14.5786 3.38914 15.1819 3.99244L20.0078 8.81817C20.6111 9.42146 20.446 10.4385 19.6829 10.8201Z"})),hke=Object.freeze(Object.defineProperty({__proto__:null,default:XN},Symbol.toStringTag,{value:"Module"})),eR=e=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M16.2425 2.93189L21.0682 7.75765C22.3955 9.08491 22.0324 11.3224 20.3535 12.1619L15.4826 14.5973C15.3073 14.685 15.1732 14.8379 15.1092 15.0232L13.6699 19.1895C13.3684 20.0622 12.2574 20.3181 11.6045 19.6653L8.50002 16.5607L4.06074 21.0001H3L3.00008 19.9394L7.43936 15.5001L4.33487 12.3956C3.682 11.7427 3.93791 10.6317 4.81061 10.3302L8.97688 8.89096C9.16223 8.82694 9.31512 8.69287 9.40281 8.51748L11.8382 3.6466C12.6777 1.96772 14.9152 1.60462 16.2425 2.93189ZM20.0076 8.81831L15.1818 3.99255C14.5785 3.38924 13.5614 3.55429 13.1799 4.31742L10.7445 9.18829C10.4814 9.71446 10.0227 10.1167 9.46666 10.3087L5.67812 11.6175L12.3826 18.322L13.6914 14.5335C13.8835 13.9774 14.2857 13.5188 14.8118 13.2557L19.6827 10.8202C20.4458 10.4387 20.6109 9.42161 20.0076 8.81831Z"})),gke=Object.freeze(Object.defineProperty({__proto__:null,default:eR},Symbol.toStringTag,{value:"Module"}));function Lbe(e){const{isPinned:t,showCloseButton:n,showPinButton:s,className:o}=e,{t:r}=q(),a=Ir(()=>{const l=document.getElementById("app");if(l&&a.current){const u=a.current.clientWidth;l.style.setProperty("--header-controls-inline-end-width",`${u}px`)}});return i.jsxs("div",{className:F("flex items-center",o),"data-testid":"header-controls",ref:a,children:[i.jsx(Pbe,{}),s&&i.jsx(ne,{variant:"square",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:()=>{Ge.emit("edge:header-command","togglePinState")},title:r(t?"edgeHeader.unpinButtonTitle":"edgeHeader.pinButtonTitle"),testId:"header-pin-button",children:t?i.jsx(XN,{className:"size-5"}):i.jsx(eR,{className:"size-5"})}),n&&i.jsx(ne,{variant:"square",color:"subtle-dimmed-inverted",size:"28-xxs",onClick:()=>{Ge.emit("edge:header-command","closePane")},title:r(t?"edgeHeader.closeButtonAsPinnedTitle":"edgeHeader.closeButtonAsUnpinnedTitle"),testId:"header-close-button",children:i.jsx(an,{className:"size-5"})})]})}function Obe({pixelUrl:e,onComplete:t}){return c.useEffect(()=>{const n=setTimeout(()=>{t()},3e3);return()=>{clearTimeout(n)}},[e,t]),i.jsx("img",{className:"hidden",src:e,width:"1",height:"1",alt:"",referrerPolicy:"no-referrer-when-downgrade",onLoad:t,onError:t})}function Dbe(){const e=W("ads-pixels"),[t,n]=Ue(iw),s=M(Zv),o=M(Mn),r=(o&&c1.includes(o))===!0,a=c.useMemo(()=>Ni(),[s]),l=!r||a.advertising;if(!e||!l)return null;const u=Object.values(t).filter(d=>d.isMounted).map(d=>d.url);return i.jsx("div",{className:"absolute start-[-9999px] top-[-9999px] size-px overflow-hidden",children:u.map(d=>i.jsx(Obe,{pixelUrl:d,onComplete:()=>n(m=>m[d]?{...m,[d]:{...m[d],isMounted:!1}}:m)},d))})}function jbe(e){const{label:t,selected:n,onClick:s}=e;return i.jsx(ne,{className:F("flex w-48 justify-start",{"bg-black/5 dark:dark:bg-background-150":n}),title:t,color:"subtle-dimmed",size:"36-sm",onClick:s,children:i.jsx("span",{className:"w-full truncate text-start",children:t})})}function tR(){const e=W("copilot-beta"),t=M(h1),n=h3(),{t:s}=q(),o=Qt(),r=M(Dw);return[{label:s("settings.preferences.title"),page:"preferences"},{label:s("settings.accountTitle"),page:"account"},{label:s("settings.connectedAppsTitle"),page:"connector-list",needSignIn:!0},{label:s("settings.shoppingTitle"),page:"shopping",needSignIn:!0},{label:s("subscriptionManage.title"),page:"manage-subscription",needSignIn:!0},{label:s("settings.privacyLink"),page:"privacy",needSignIn:!0},{label:s("settings.titleAbout"),page:"about"},{label:s("settings.copilotBeta.title"),page:"copilot-beta"}].filter(l=>{switch(l.page){case"copilot-beta":return e&&t&&n;case"manage-subscription":return r;default:return!l.needSignIn||o}})}function Ube(){const{currentPage:e,pushPage:t,parentPageOf:n}=Er(),s=tR();return i.jsx("div",{className:"flex flex-col gap-0.5",children:s.map(o=>i.jsx(jbe,{label:o.label,selected:e===o.page||e!==void 0&&n[e]===o.page,onClick:()=>{t(o.page)}},o.label))})}function Fbe(){var o;const{currentPage:e}=Er(),s=(((o=tR().find(r=>r.page===e))==null?void 0:o.label)??"").trim();return s?i.jsxs("div",{className:"sticky top-0 z-10 bg-white py-3 dark:bg-background-150",children:[i.jsx("h3",{className:"flex w-full items-center justify-start p-2 pb-4 text-base-medium",children:s}),i.jsx(ms,{verticalMargin:!1})]}):null}const nR=c.createContext(null);function Bbe(e){const{value:t,children:n}=e;return i.jsx(nR.Provider,{value:t,children:n})}function vke(){const e=c.useContext(nR);return e||null}const Vbe=c.lazy(()=>B(()=>import("./actions-chat-detail-BCA2xT0N.js"),__vite__mapDeps([411,1,412,413,414,356,399])).then(e=>({default:e.ActionsChatDetail}))),Hbe=c.lazy(()=>B(()=>import("./showroom-chat-detail-hPdY-bJk.js"),__vite__mapDeps([415,1])).then(e=>({default:e.ShowroomChatDetail})));function zbe(){const e=M(_s);return i.jsx("div",{className:"flex size-full items-center justify-center",children:e?i.jsx(c.Suspense,{fallback:i.jsx(y5,{}),children:i.jsx(Hbe,{})}):i.jsx(c.Suspense,{fallback:i.jsx(y5,{}),children:i.jsx(Vbe,{})})})}function y5(){return i.jsx("div",{className:"flex size-full items-center justify-center",children:i.jsx(it,{className:"size-12"})})}const Gbe=c.lazy(()=>B(()=>import("./settings-pQDCi4Vh.js").then(e=>e.s),__vite__mapDeps([305,1,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344])));function Wbe(){const e=c.useRef(null);return i.jsx(Bbe,{value:e,children:i.jsx("div",{className:"flex h-full min-h-0",ref:e,children:i.jsxs("div",{className:"flex w-full flex-1 gap-3",children:[i.jsx(Ube,{}),i.jsx("div",{className:F("relative flex min-h-0 min-w-0 flex-1 rounded-3xl bg-white will-change-auto dark:bg-background-150","after:pointer-events-none after:absolute after:inset-0 after:z-10 after:rounded-3xl after:border after:border-black/10 dark:border-transparent"),children:i.jsxs("div",{className:"t-custom-scrollbar flex flex-1 flex-col overflow-y-auto rounded-3xl px-3 pb-3",children:[i.jsx(Fbe,{}),i.jsx(c.Suspense,{fallback:i.jsx(y5,{}),children:i.jsx(Gbe,{shouldShowHeaderOverride:!1,isNarrowScreen:!1})})]})})]})})})}function $be(){const e=sy(),{currentPage:t,closeSettings:n}=Er(),{t:s}=q();return e?i.jsx(dn,{isOpen:!!t&&t!=="menu",className:"size-full h-conversation-modal p-3 dark:bg-background-150/50 md:w-[728px]",headerTextClassName:"ps-2.5 py-2",headerText:s("settings.settings"),onClose:n,bottomSheetOnSmall:!1,children:i.jsx(Wbe,{})}):null}const pu=typeof HTMLElement<"u"&&"showPopover"in HTMLElement.prototype&&typeof HTMLElement.prototype.showPopover=="function";function qbe(){const e=c.useRef(null),t=c.useCallback(()=>{const o=e.current;if(o&&pu)try{o.showPopover()}catch(r){Kt({feature:"toast",scenario:"showPopoverToast",errorMessage:r instanceof Error?r.message:void 0})}},[]),n=c.useCallback(()=>{const o=e.current;if(o&&pu)try{o.hidePopover()}catch(r){Kt({feature:"toast",scenario:"hidePopoverToast",errorMessage:r instanceof Error?r.message:void 0})}},[]),s=J2(()=>{n(),t()},50);return c.useEffect(()=>{if(t(),pu){const o=requestAnimationFrame(()=>{s()});return()=>cancelAnimationFrame(o)}return()=>{}},[t,s]),c.useEffect(()=>{if(!pu)return()=>{};const o=new MutationObserver(()=>{document.querySelectorAll("dialog[open]").length>0&&requestAnimationFrame(s)});return o.observe(document.documentElement,{childList:!0,subtree:!0,attributeFilter:["open"]}),()=>o.disconnect()},[s]),{toastRef:e,supportsPopover:pu}}function Kbe({onClick:e}){return i.jsx("div",{className:"absolute end-0 top-0 z-10 cursor-pointer p-1 rtl:right-auto",children:i.jsx(ne,{title:z("product.dismiss"),"aria-label":z("product.dismiss"),variant:"rect",color:"subtle-bright-inverted",size:"32-xs",onClick:e,children:i.jsx(an,{className:"size-4"})})})}const Zbe=["overflow-hidden","rounded-3xl","border","border-solid","border-white/20","shadow-lg","backdrop-blur-[30px]","bg-acrylic-default-tint-light/95","dark:bg-acrylic-default-tint-dark/95"];function Ybe(e){const{title:t,subtitle:n,dismiss:s,link:o,ctaLabel:r,dismissable:a=!0,className:l,Icon:u,iconClassName:d,isRTL:m,onClick:f,onActiveChange:h,customColorTheme:g,intent:C="info",removeIconBorder:v}=e,y=M(zo),b=g??y,[E,S]=c.useState(!1),[I,_]=c.useState(!1),T=E||I,{toastRef:A,supportsPopover:k}=qbe();c.useEffect(()=>{h==null||h(T)},[T,h]);const N=Z=>{(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),f==null||f())},P=n??o?i.jsxs(i.Fragment,{children:[typeof n=="string"?`${n} `:n,o&&i.jsx("span",{className:"text-accent-450 underline text-sm dark:text-accent-600",role:"button",tabIndex:0,"aria-label":o,onKeyDown:N,children:o})]}):null,V="top-5 start-1/2 -translate-x-1/2",U=re.instance().config(),K=(k?U.toastPopoverNotificationPositioning:U.toastNotificationPositioning)??V,Q=k?{popover:"manual"}:{};return i.jsx("div",{"data-theme":b,className:F("pointer-events-none",k?"fixed m-0 overflow-visible bg-transparent":"absolute",ct.toastNotification,K,l),onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),onFocus:()=>_(!0),onBlur:()=>_(!1),ref:A,...Q,children:i.jsx(pt,{children:i.jsxs(ge.div,{className:ue("pointer-events-auto","relative",Zbe,f&&"cursor-pointer"),initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:400,damping:30},onClick:f,children:[a&&i.jsx(Kbe,{onClick:s}),i.jsx("div",{className:ue("flex","flex-col","items-center","justify-center","py-2","ps-2","pe-1.5",{"w-[min(381px,100vw)]":!!P}),children:i.jsxs("div",{className:ue("relative flex w-full items-center p-0",{"gap-x-3":u,"flex-row-reverse":u&&m}),children:[u&&i.jsx("div",{"aria-hidden":"true",className:F("flex size-16 shrink-0 items-center justify-center rounded-xl",!v&&"border border-black/10 dark:border-white/10"),children:i.jsx(u,{className:d})}),i.jsxs("div",{className:F("flex flex-1 flex-col justify-center py-1",{"ps-4":!u&&P,"pe-10":a&&(P??t)&&!r,"pe-4":r,"px-4":!P}),children:[i.jsx("header",{className:ue("flex w-full overflow-hidden",{"items-center":!!P,"items-center justify-center":!P}),children:i.jsx("h2",{className:ue("text-foreground-750 text-sm-strong",{"text-base-strong":!!P,"text-sm":!P},C==="error"&&"text-system-red-550"),children:t})}),P&&i.jsx("p",{className:"w-full text-foreground-700 text-sm",children:P}),i.jsx(Ti,{msg:`${t??""} ${typeof n=="string"?n:""}`,type:"assertive"})]}),r&&i.jsx("div",{className:F("flex shrink-0 items-center","me-4",a&&"me-10"),children:i.jsx(ne,{variant:"rect",size:"40-base",className:"border border-black/8",title:r,onClick:Z=>{Z.stopPropagation(),f==null||f()},children:r})})]})})]})},t)})}function Qbe(){const[e,t]=Ue(Sn),n=qi(),[s,o]=c.useState(!1),[r,a]=c.useState(!1),l=c.useCallback(()=>{e!=null&&e.trackingArgs&&ye({source:"toastNotification",scenario:e.trackingArgs.scenario,customData:e.trackingArgs.customData})},[e]),u=c.useCallback(()=>{t(null)},[t]),d=c.useCallback(()=>{var f;if(!(e!=null&&e.action))return;l();const{action:m}=e;m(),u(),(f=e.onClick)==null||f.call(e)},[e,l,u]);return c.useEffect(()=>{let m;return a(!1),o(!1),e!=null&&e.dismissAfter&&(m=window.setTimeout(()=>a(!0),e.dismissAfter)),()=>clearTimeout(m)},[e]),c.useEffect(()=>{r&&!s&&u()},[r,s,u]),e?i.jsx(Ybe,{title:e.title,subtitle:e.subtitle,link:e.link,ctaLabel:e.ctaLabel,dismissable:e.dismissable,className:e.className,Icon:e.iconProvider??e.Icon,iconClassName:e.iconClassName,intent:e.intent,dismiss:m=>{var f;m==null||m.stopPropagation(),(f=e.onDismiss)==null||f.call(e),u()},isRTL:n,onClick:e.action?d:void 0,onActiveChange:o,customColorTheme:e.customColorTheme,removeIconBorder:e.removeIconBorder}):null}function Jbe(){var o;const e=W("top-banner-upgrade-surface-app"),t=(o=re.instance().config().uiOverrides)==null?void 0:o.showUpgradeAppTopBanner,n=e&&t;c.useEffect(()=>{n&&D.trackEvent({name:"system",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Shown"}})},[n]);const s=()=>{D.trackEvent({name:"interaction",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Clicked"}}),Eo("macappstore://apps.apple.com/app/id6738511300")};return n?i.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[i.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-background-150 opacity-90 dark:bg-background-150"}),i.jsx("div",{className:ue("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Qs,ct.modal),children:i.jsx("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-lg",children:z("upgradeSurface.heading")}),i.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-xs sm:flex-row",children:[i.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-xs sm:flex-row",children:[i.jsx("p",{children:z("upgradeSurface.primaryDescription")}),i.jsx("p",{children:z("upgradeSurface.secondaryDescription")})]}),i.jsx("div",{className:"flex min-w-44 shrink-0 grow flex-col justify-center gap-2",children:i.jsx(ne,{variant:"rect",size:"32-xs",onClick:s,title:z("upgradeSurface.buttonText"),children:z("upgradeSurface.buttonText")})})]})]})})})]}):null}const Xbe=c.lazy(()=>B(()=>Promise.resolve().then(()=>p3),void 0)),e4e=QA(()=>B(()=>import("./settings-wrapper-DuCL0PKQ.js"),__vite__mapDeps([416,1,345,349,417,418,352])),"settings-wrapper"),t4e=c.lazy(()=>B(()=>import("./media-viewer-WdNOXMZf.js").then(e=>e.m),__vite__mapDeps([419,1])).then(e=>({default:e.MediaViewer}))),n4e=c.lazy(()=>B(()=>import("./picture-in-picture-Dhau2pbO.js"),__vite__mapDeps([420,1,393,394,421,422])).then(e=>({default:e.PictureInPicture}))),s4e=c.lazy(()=>B(()=>import("./composer-large-screen-CIe9rrd3.js"),__vite__mapDeps([423,1,424,425,426,427,428,429,430,431,432,433,434,435])));function o4e(e){const{children:t,customLayout:n}=e,s=uh(),o=ut(),{isPictureInPictureOpen:r}=ok(),a=re.instance().config().appLayout,l=M(rr),u=(l==null?void 0:l.type)==="card",d=M(mme),m=M(fme),f=M(pme),h=qfe();return i.jsxs(i.Fragment,{children:[h&&i.jsx("div",{className:F("pointer-events-none sticky top-0 w-full",ct.header),children:i.jsx("div",{className:"pointer-events-auto absolute end-2 top-2",children:i.jsx(Lbe,{isPinned:f,showCloseButton:d,showPinButton:m})})}),i.jsxs(Ife,{children:[s||n?t:i.jsxs(fd,{className:"flex-1",children:[t,i.jsx(b5,{}),i.jsx(Hp,{}),i.jsx(zp,{})]}),i.jsx(Qbe,{}),r&&i.jsx(c.Suspense,{fallback:i.jsx(Xfe,{}),children:i.jsx(n4e,{})})]}),a.showMobileCrossSelling&&o.startsWith("/chats")&&!o.endsWith("/talk")&&i.jsx(kbe,{}),u&&i.jsx(Tbe,{}),a.showCookieBanner&&i.jsx(_be,{}),i.jsx(Jbe,{}),i.jsx(o2e,{}),i.jsx($be,{}),i.jsx("div",{id:"inAppFeedbackOcv"}),i.jsx("div",{id:"popoverPortal"}),i.jsx(Dbe,{})]})}function b5(){const{isMediaViewerOpen:e}=ka();return e?i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"pointer-events-auto absolute inset-0 flex items-center justify-center",children:i.jsx(Xbe,{type:"spinnerThemed",className:"size-12"})}),children:i.jsx(t4e,{})}):null}function Hp(){const e=Gfe(),t=Wfe();return i.jsxs(i.Fragment,{children:[e&&i.jsx(Ibe,{}),t&&i.jsx(c.Suspense,{fallback:null,children:i.jsx(s4e,{})})]})}function zp(){const e=re.instance().config().appLayout,t=$fe({showSettings:e.showSettings,showSettingsRelyOnChatDetailLayout:e.showSettingsRelyOnChatDetailLayout}),n=Ns(),s=W("sidebar-settings");return t?i.jsx(c.Suspense,{fallback:null,children:i.jsx(e4e,{className:F("top-6",n&&"-me-1 -mt-3",s&&"-me-[14px] -mt-[14px]")})}):null}function r4e(){typeof window<"u"&&(Object.defineProperty(window,"APP_VERSION",{value:rv()}),Object.defineProperty(window,"APP_SURFACE",{value:"cmc"}))}function a4e(){const e=i.jsxs(i.Fragment,{children:[i.jsx(sS,{children:i.jsx(Tde,{})}),i.jsx(o4e,{children:i.jsx(x8,{})})]});return i.jsx(Pue,{children:e})}function i4e(e){const{onError:t=qE}=e,n=Kfe();return i.jsxs(F7,{fallback:i.jsx(d3,{}),onError:t,children:[i.jsx(pA,{}),n?i.jsx(x8,{}):i.jsx(a4e,{})]})}r4e();Pde();function c4e(){return({search:e,next:t})=>t(e)}QT();const l4e=x({"prompt-branch":p().optional(),"use-sxs":Re([he(),p()]).transform(e=>typeof e=="string"?e==="true":e).optional(),branch:p().optional(),"sxs-feature":p().optional(),renderingType:ke(["ssr","csr"]).optional()}),Je=ZL()({component:i4e,validateSearch:e=>l4e.parse(e),search:{middlewares:[c4e(),YL(["prompt-branch","use-sxs","branch","sxs-feature","renderingType"])]}});function u4e(){const{createConversation:e}=fm(),t=Qi(),n=ut(),s=c.useRef(null);c.useEffect(()=>{const o=s.current;s.current=n,n==="/"&&o!=="/"&&(t||(LA(),e({shouldNavigateToChat:!1})))},[t,n,e])}const O9=he();function d4e(){const[e,t]=Ue(Sn),{t:n}=q(),s=C3(),o=ut(),r=xo(),a=o==="/fallrelease",l=o==="/login",u=o.includes("/chats"),d=(e==null?void 0:e.title)===n("octoberMoment.awarenessCard.cardHeader");c.useEffect(()=>{const m=JA(),f=wt(Xb,O9),h=()=>{cfe(),Vn(Xb,O9,!0)},g=()=>i.jsx(XA,{isNotification:!0}),C=async()=>{ife(),await r({to:"/fallrelease",from:o})};a||l||u?t(null):m&&!e&&!f&&!s&&t({iconProvider:g,title:n("octoberMoment.awarenessCard.cardHeader"),subtitle:n("octoberMoment.awarenessCard.cardDescription"),action:C,onDismiss:h})},[o,e,s,n,r,t,a,l,u]),c.useEffect(()=>{s&&d&&t(null)},[s,t,d])}function ry(){return ue(gd("pageContainer")??"px-6","mx-auto w-full max-w-chat")}async function x5(e,t,n){try{await kn({path:`/conversations/${e}/react`,args:{body:{[n]:t},analytics:{anonymousPath:"/conversations/*/react"}}})}catch{}}async function sR(e,t,n){try{await kn({path:`/conversations/${e}/feedback`,args:{body:{types:Array.from(t),text:n},analytics:{anonymousPath:"/conversations/*/feedback"}}})}catch{}}const oR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7939 22.5C13.4857 22.4999 14.1313 22.154 14.5151 21.5786L14.54 21.5405C15.3284 20.3578 15.7499 18.9687 15.75 17.5474C15.75 16.8701 15.6551 16.196 15.4673 15.5464L15.3809 15.2695L15.2915 15H19.0781C20.9676 15 22.5 13.4676 22.5 11.5781C22.5 11.3687 22.4811 11.1597 22.4429 10.9541L22.3975 10.749L20.6543 3.77197C20.3204 2.43673 19.12 1.50018 17.7437 1.5H10.6772C9.60719 1.5 8.55025 1.71953 7.57031 2.1416C7.16475 1.74558 6.61162 1.5 6 1.5H3.75C2.50736 1.5 1.5 2.50736 1.5 3.75V11.25C1.5 12.4926 2.50736 13.5 3.75 13.5H6C6.51972 13.5 6.9975 13.3228 7.37842 13.0269L8.92383 14.8799L9.10986 15.1128C10.0102 16.2948 10.5 17.7421 10.5 19.2334V20.2837C10.5 21.5073 11.4927 22.5 12.7163 22.5H12.7939ZM3.75 12C3.33579 12 3 11.6642 3 11.25V3.75C3 3.33579 3.33579 3 3.75 3H6C6.41421 3 6.75 3.33579 6.75 3.75V11.25C6.75 11.6642 6.41421 12 6 12H3.75ZM12.7163 21C12.3211 21 12 20.6789 12 20.2837V19.2334C12 17.4131 11.4012 15.6473 10.3022 14.2046L10.0767 13.9204L8.20752 11.6792C8.23439 11.5402 8.25 11.3969 8.25 11.25V3.75C8.25 3.6622 8.24221 3.5759 8.23242 3.49072C9.00588 3.16824 9.83642 3 10.6772 3H17.7437C18.4318 3.00018 19.0313 3.4691 19.1982 4.13672L20.9429 11.1123L20.9854 11.3438C20.9949 11.4214 21 11.4997 21 11.5781C21 12.6392 20.1392 13.5 19.0781 13.5H14.25C14.2397 13.5 14.2295 13.5025 14.2192 13.5029C14.1856 13.5043 14.152 13.5071 14.1182 13.5132C14.0986 13.5167 14.08 13.5229 14.061 13.5278C14.0452 13.532 14.0284 13.5328 14.0127 13.5381C14.0021 13.5416 13.9923 13.5473 13.9819 13.5513C13.9639 13.5582 13.9466 13.5664 13.9292 13.5747C13.9038 13.5868 13.8794 13.5997 13.856 13.6143C13.8409 13.6236 13.8263 13.6332 13.812 13.6436C13.7873 13.6614 13.7638 13.6802 13.7417 13.7007C13.73 13.7115 13.719 13.7228 13.708 13.7344C13.6878 13.7557 13.6698 13.7784 13.6523 13.8018C13.6421 13.8154 13.6309 13.8284 13.6216 13.8428C13.6055 13.8677 13.5921 13.8938 13.5791 13.9204C13.5434 13.993 13.5194 14.0713 13.5088 14.1548C13.5056 14.1796 13.5021 14.2043 13.5015 14.2295C13.5013 14.2363 13.5 14.2431 13.5 14.25C13.5 14.2653 13.502 14.2804 13.5029 14.2954C13.5038 14.31 13.5041 14.3247 13.5059 14.3394L13.5103 14.3628C13.5148 14.3928 13.5213 14.4219 13.5293 14.4507L13.5381 14.4873L13.957 15.7441L14.0845 16.1851C14.194 16.6302 14.25 17.0879 14.25 17.5474C14.2499 18.6726 13.9161 19.7722 13.292 20.7085L13.2671 20.7466C13.1614 20.9047 12.9841 20.9999 12.7939 21H12.7163Z"})),Cke=Object.freeze(Object.defineProperty({__proto__:null,default:oR},Symbol.toStringTag,{value:"Module"})),rR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7939 1.5C13.4857 1.50008 14.1313 1.84595 14.5151 2.42139L14.54 2.45947L14.8184 2.91211C15.4271 3.98985 15.7499 5.20889 15.75 6.45264C15.75 7.2266 15.6256 7.99622 15.3809 8.73047L15.2915 9H19.0781C20.9676 9 22.5 10.5324 22.5 12.4219C22.5 12.6313 22.4811 12.8403 22.4429 13.0459L22.3975 13.251L20.6543 20.228C20.3204 21.5633 19.12 22.4998 17.7437 22.5H10.6772C9.61047 22.5 8.55647 22.2823 7.5791 21.8628L7.57031 21.8584C7.16475 22.2544 6.61162 22.5 6 22.5H3.75C2.50736 22.5 1.5 21.4926 1.5 20.25V12.75C1.5 11.5074 2.50736 10.5 3.75 10.5H6C6.51972 10.5 6.9975 10.6772 7.37842 10.9731L8.92383 9.12012L9.10986 8.88721C10.0102 7.70524 10.5 6.2579 10.5 4.7666V3.71631C10.5 2.49265 11.4927 1.5 12.7163 1.5H12.7939ZM3.75 12C3.33579 12 3 12.3358 3 12.75V20.25C3 20.6642 3.33579 21 3.75 21H6C6.41421 21 6.75 20.6642 6.75 20.25V12.75C6.75 12.3358 6.41421 12 6 12H3.75ZM12.7163 3C12.3211 3 12 3.32108 12 3.71631V4.7666C12 6.58686 11.4012 8.35271 10.3022 9.79541L10.0767 10.0796L8.20752 12.3208C8.23439 12.4598 8.25 12.6031 8.25 12.75V20.25C8.25 20.3378 8.24221 20.4241 8.23242 20.5093C9.00584 20.8318 9.83643 21 10.6772 21H17.7437C18.4318 20.9998 19.0313 20.5309 19.1982 19.8633L20.9429 12.8877L20.9854 12.6562C20.9949 12.5786 21 12.5003 21 12.4219C21 11.3608 20.1392 10.5 19.0781 10.5H14.25C14.2382 10.5 14.2266 10.4961 14.2148 10.4956C14.1855 10.4942 14.1564 10.4918 14.127 10.4868C14.102 10.4827 14.0778 10.4772 14.0537 10.4707C14.0403 10.467 14.026 10.4664 14.0127 10.4619C14.0035 10.4589 13.9953 10.4536 13.9863 10.4502C13.9606 10.4405 13.936 10.4289 13.9116 10.4165C13.8915 10.4063 13.8719 10.3961 13.853 10.3843C13.8325 10.3714 13.8136 10.3566 13.7944 10.3418C13.7742 10.3262 13.7542 10.3109 13.7358 10.2935C13.719 10.2775 13.7043 10.2597 13.689 10.2422C13.6733 10.2243 13.6574 10.2072 13.6436 10.188C13.6284 10.167 13.6155 10.1446 13.6025 10.1221C13.5914 10.1027 13.5797 10.0838 13.5703 10.0635C13.5589 10.0388 13.5497 10.0133 13.541 9.9873C13.5337 9.96547 13.5258 9.94388 13.5205 9.92139C13.5159 9.90169 13.5133 9.88159 13.5103 9.86133C13.5058 9.83177 13.5024 9.80214 13.5015 9.77197C13.5013 9.76466 13.5 9.75736 13.5 9.75C13.5 9.73818 13.5024 9.72653 13.5029 9.71484C13.5043 9.68556 13.5068 9.65636 13.5117 9.62695C13.5158 9.60203 13.5213 9.57774 13.5278 9.55371C13.5315 9.54019 13.5336 9.52615 13.5381 9.5127L13.957 8.25586C14.1508 7.67456 14.25 7.06538 14.25 6.45264C14.2499 5.46789 13.9952 4.5022 13.5132 3.64893L13.292 3.2915L13.2671 3.25342C13.1614 3.09528 12.9841 3.00008 12.7939 3H12.7163Z"})),yke=Object.freeze(Object.defineProperty({__proto__:null,default:rR},Symbol.toStringTag,{value:"Module"}));function aR(e){const{titleText:t,subtitleText:n,positiveButtonText:s,negativeButtonText:o,positiveButtonTitle:r,negativeButtonTitle:a,modalHeaderText:l,onPositiveClick:u,onNegativeClick:d,isModalOpen:m,onModalClose:f,modalContent:h,className:g="",isDebugAudioRecorderEnabled:C=!1}=e;return i.jsxs("div",{className:g,children:[i.jsx("div",{className:"relative w-full pb-6 after:absolute after:mt-3 after:w-full after:border-b after:border-stroke-300"}),i.jsx("h2",{className:"mt-5 text-foreground-600 text-sm",children:i.jsx("strong",{children:t})}),i.jsx("p",{className:"mt-1 text-foreground-600 text-sm",children:n}),i.jsxs("div",{className:ue("mt-3.5 grid w-fit min-w-72 grid-rows-1 gap-2",C?"grid-cols-3":"grid-cols-2"),children:[i.jsxs(ne,{onClick:u,title:r,variant:"rect",size:"36-sm",children:[i.jsx(rR,{className:"size-5"})," ",s]}),i.jsxs(ne,{onClick:d,title:a,variant:"rect",size:"36-sm",children:[i.jsx(oR,{className:"size-5"})," ",o]}),C&&i.jsx(ne,{onClick:async()=>{const{AUDIO_RECORDER:v}=await B(async()=>{const{AUDIO_RECORDER:y}=await import("./audio-recorder-W1iRWyWW.js");return{AUDIO_RECORDER:y}},__vite__mapDeps([436,1]));await v.download()},title:"Download audio debug",variant:"rect",size:"36-sm",children:"Download audio debug"})]}),m&&i.jsx(dn,{isOpen:!0,onClose:f,headerText:l,className:"w-full max-w-[400px]",children:h})]})}function m4e(){}function f4e({inputValue:e,handleChange:t,className:n=""}){const[s,o]=c.useState(""),{t:r}=q();return Gt("kill-free-form-text")?null:i.jsx(J3,{disabled:!1,className:F(n,"max-h-[8rem] grow-0 basis-[8rem] !items-start overflow-auto rounded-xl border-2 border-foreground-700 bg-black/5 px-0.5"),inputValue:e,characterLimit:gB,autoFocus:!1,setInput:l=>{t(l)},placeholder:r("chat.feedback.placeholder"),errorMessage:s,setError:o,onEnter:m4e,isMultiLines:!0})}function iR(e){const{feedbackOptions:t,onSubmit:n,shouldHideTextbox:s=!1}=e,{t:o}=q(),[r,a]=c.useState(new Set),[l,u]=c.useState(""),d=r.size===0,m=h=>{a(g=>{const C=new Set(g);return r.has(h)?C.delete(h):C.add(h),C})},f=async()=>{n(r,l),a(new Set)};return t?i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("ul",{role:"list",className:"mt-0 flex list-none flex-col gap-4",children:t.map((h,g)=>i.jsx("li",{children:i.jsx(u3,{label:h.label,setChecked:()=>m(h.type),checked:r.has(h.type),spatialNavigationAutofocus:g===0})},h.type))}),d||s?null:i.jsx(f4e,{inputValue:l,handleChange:u}),i.jsx(ne,{title:o("chat.feedback.submitFeedbackButton"),size:"48-lg",color:"strong",className:"mt-4 max-h-12",disabled:d,onClick:f,children:o("chat.feedback.submitFeedbackButton")})]}):null}function p4e(e){var b,E;const{className:t}=e,n=M(Gv),[s,o]=Ue(R1),[r,a]=c.useState(!1),[l,u]=c.useState(),d=W("ads-showroom-picasso-feedback"),{t:m}=q(),f=S=>{qt({source:"feedback",scenario:nZ[S],conversationId:s==null?void 0:s.conversationId,additionalData:{brandId:s==null?void 0:s.brandId,brandName:(s==null?void 0:s.brandName)??""}})},h=()=>{a(!1),o(void 0)},g=async S=>{s!=null&&s.conversationId&&d&&await x5(s.conversationId,S,"showroomReaction")},C=()=>{var S;f("thumbs-up"),u("thumbs-up"),(S=n==null?void 0:n.showroom)!=null&&S.positive?a(!0):h(),g("thumbs-up")},v=()=>{var S;f("thumbs-down"),u("thumbs-down"),(S=n==null?void 0:n.showroom)!=null&&S.negative?a(!0):h(),g("thumbs-down")},y=async(S,I)=>{h(),s&&D.trackEvent({name:"interaction",data:{eventName:"copilotSubmitFineConversationFeedback",eventInfo_fineFeedbackTypes:Array.from(S).join(","),eventInfo_conversationId:s.conversationId,eventInfo_additionalData:JSON.stringify({brandId:s.brandId,brandName:s.brandName,reactionType:l,showroomMessageId:s.messageId})}}),s!=null&&s.conversationId&&S.size>0&&sR(s.conversationId,S,I)};return i.jsx(aR,{titleText:m("ads.showroomFeedbackTitle",{brand:s==null?void 0:s.brandName}),subtitleText:m("ads.showroomFeedbackDescription"),positiveButtonText:m("ads.showroomFeedbackPositive"),negativeButtonText:m("ads.showroomFeedbackNegative"),positiveButtonTitle:m("reviewPrompt.positive"),negativeButtonTitle:m("reviewPrompt.negative"),modalHeaderText:m("ads.showroomFeedbackModalTitle"),onPositiveClick:C,onNegativeClick:v,isModalOpen:r,onModalClose:h,modalContent:i.jsx(iR,{onSubmit:y,feedbackOptions:l==="thumbs-up"?((b=n==null?void 0:n.showroom)==null?void 0:b.positive)??void 0:(E=n==null?void 0:n.showroom)==null?void 0:E.negative}),className:t,isDebugAudioRecorderEnabled:!1})}function h4e(e){const{onSubmit:t}=e,{t:n}=q(),[s,o]=c.useState(!1),r=async a=>{o(!0),await t(a),o(!1)};return i.jsxs("div",{children:[i.jsx("p",{children:n("voice.feedback.reviewReasonV2")}),i.jsx(ne,{title:n("voice.feedback.okay"),size:"48-lg",color:"strong",className:"mt-4 max-h-12 w-full",disabled:s,onClick:()=>r(!0),children:n("voice.feedback.okay")}),i.jsx(ne,{title:n("voice.feedback.noThanks"),size:"48-lg",color:"default",className:"mt-3 w-full",onClick:()=>r(!1),children:n("voice.feedback.noThanks")})]})}const g4e="voice",v4e="appearance";function C4e({className:e}){const t=M(je),n=M(Gv),s=se(bl),[o,r]=Ue(nC),[a,l]=c.useState(),u=W("debug-audio-recorder")&&!1,d=ZC(),m=d?v4e:g4e,{t:f}=q(),h=()=>{qt({source:"voiceFeedback",scenario:"thumbsUp",conversationId:t,destination:m}),t&&x5(t,"thumbs-up","audioReaction"),s(!1),Ge.emit("feedback:ai-message-reaction","positive")},g=()=>{qt({source:"voiceFeedback",scenario:"thumbsDown",conversationId:t,destination:m}),t&&x5(t,"thumbs-down","audioReaction"),l("feedback-options")},C=()=>{l(null),s(!1)},v=async(E,S)=>{ye({source:"voiceFeedback",scenario:"feedbackSubmit",conversationId:t,destination:m,customData:JSON.stringify({selectedOptionsCount:E.size,feedbackTypes:[...E].join(",")})}),t&&E.size>0&&sR(t,E,S),o?C():l("review-request")},y=async E=>{E&&(r(!0),await BC({optInToVoiceTraining:!0})),C()},b=()=>a==="feedback-options"?i.jsx(iR,{onSubmit:v,feedbackOptions:d?n==null?void 0:n.appearance:n==null?void 0:n.call}):a==="review-request"?i.jsx(h4e,{onSubmit:y}):null;return i.jsx(aR,{titleText:f(d?"voice.feedback.howWasAppearanceChat":"voice.feedback.howWasVoiceChat"),subtitleText:f("voice.feedback.giveFeedback"),positiveButtonText:f("voice.feedback.good"),negativeButtonText:f("voice.feedback.bad"),positiveButtonTitle:f("reviewPrompt.positive"),negativeButtonTitle:f("reviewPrompt.negative"),modalHeaderText:f(a==="feedback-options"?"voice.feedback.chooseWhatHappened":"voice.feedback.canMicrosoftReview"),onPositiveClick:h,onNegativeClick:g,isModalOpen:!!a,onModalClose:C,modalContent:b(),className:e,isDebugAudioRecorderEnabled:u})}const y4e=c.lazy(()=>B(()=>import("./index.es-_XtXTdEl.js"),__vite__mapDeps([5,1]))),b4e=AA();function x4e({onAnimationClicked:e}){const t=c.useRef(null),{t:n}=q(),[s,o]=c.useState(null);c.useEffect(()=>{b4e.load("../../assets/lottie/character-thinking-cloud-animation.json").then(o).catch(()=>o(null))},[]),c.useEffect(()=>{const l=t.current;return l&&s&&l.playSegments([0,67],!0),()=>{l&&s&&l.playSegments([350,370],!0)}},[s]);const r=()=>{var u,d;(u=t.current)==null||u.playSegments([320,345],!0),(d=t.current)==null||d.pause(),e();const l=document.getElementById(Pd);l==null||l.focus()},a=l=>{l.key==="Enter"&&r()};return i.jsx("div",{children:i.jsx(c.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(y4e,{lottieRef:t,role:"button",tabIndex:0,"aria-label":n("characterAnimation.characterThinkingCloudAriaLabelText"),title:n("characterAnimation.characterThinkingCloudAriaLabelText"),animationData:s,loop:!1,onMouseDown:r,onMouseEnter:()=>{var l;return(l=t.current)==null?void 0:l.playSegments([275,295],!0)},onMouseLeave:()=>{var l;return(l=t.current)==null?void 0:l.playSegments([296,315],!0)},onKeyDown:a,onComplete:()=>{var l;return(l=t.current)==null?void 0:l.playSegments([68,274],!0)}})})})}const D9=1,S4e=c.lazy(()=>B(()=>import("./character-CWoKvrCn.js"),__vite__mapDeps([372,1,373])).then(e=>({default:e.Character})));function E4e({animatingMessageId:e,isStreamingMessage:t,displayedCharacterId:n,setCharacterComponentHeight:s}){const o=W("characterspeech"),[r,a]=c.useState(0),[l,u]=c.useState(!1),[d,m]=Ue(hi),f=M(Ea),h=()=>{a(0),u(!1)};c.useEffect(()=>{let v;return o&&d==="idle"&&(v=setInterval(()=>{a(y=>y<D9?y+1:y),f.length>0&&r===D9&&!t&&(u(!0),D.trackEvent({name:"system",data:{eventName:"characterTalkToMeDisplayed",eventInfo_conversationId:pe(je),eventInfo_characterId:n}}))},1e3)),()=>clearInterval(v)},[d,n,f.length,o,r,t]),c.useEffect(()=>{o&&d!=="idle"&&d!=="hovering"&&h()},[d,o]);const g=async()=>{h(),m("responding"),await jn.submitMessage({command:{type:"promptCharacterSpeech"},inputMethod:"promptCharacterSpeech"}),D.trackEvent({name:"interaction",data:{eventName:"characterTalkToMeClicked",eventInfo_conversationId:pe(je),eventInfo_characterId:n}})};function C(){switch(n){case"aqua":return"translate-x-9";case"mica":return"translate-x-14";case"erin":return"translate-x-16";default:throw new Error("Invalid characterId provided to getTranslateXClass")}}return i.jsx(F7,{fallback:i.jsx(d3,{}),onError:CZ(e,n),children:i.jsxs("div",{"data-testid":"character-div",className:F("sticky top-0 h-2/5 min-h-[40vh] w-full bg-gradient-chat-light-character dark:bg-background-150 dark:bg-none",ct.babylonCharacter),style:{maskImage:"linear-gradient(to bottom, #000 95%, transparent 100%)"},children:[i.jsx(pt,{children:l&&i.jsx(ge.div,{className:F("absolute start-1/2 top-12 size-36",C()),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:i.jsx(x4e,{onAnimationClicked:g})})}),i.jsx(c.Suspense,{fallback:i.jsx("div",{className:"flex h-full items-center justify-center",children:i.jsx(it,{type:"spinnerThemed",className:"size-12"})}),children:i.jsx(S4e,{characterId:n,setCharacterComponentHeight:s})})]})})}function w4e({className:e}){const{t}=q();return i.jsxs("div",{className:F("flex items-center gap-2",e),children:[i.jsx(it,{type:"reasoning",className:"size-11"}),i.jsxs("div",{className:"flex flex-col text-sm",children:[i.jsx("span",{children:t("chat.reasoningLoading.title")}),i.jsx("span",{className:"text-foreground-450 dark:text-foreground-600",children:t("chat.reasoningLoading.description")})]})]})}function I4e(){return i.jsx("div",{className:"animate-thinking-polygon h-12 w-[max(7rem,50%)] bg-accent-350 blur-md dark:bg-accent-550"})}function _4e(e){const{isActive:t,animationDuration:n,children:s,className:o,...r}=e;return i.jsx("div",{className:F(t&&"animate-shimmer-text bg-gradient-to-r from-foreground-800 from-[calc(50%-64px)] via-foreground-250 via-50% to-foreground-800 to-[calc(50%+64px)] bg-[size:400%_100%] bg-clip-text text-transparent rtl:animate-shimmer-text-reverse",o),style:{...t&&n&&{animationDuration:n}},...r,children:s})}function T4e(e){const{title:t,className:n,isActive:s=!0}=e,{t:o}=q(),r=o("chat.reasoningLoading.title"),a=t&&t.trim()!==""?t:r;return i.jsx("div",{className:F("my-0.5 w-max text-base-dense",n),children:i.jsx(_4e,{isActive:s,children:a})})}const bke="rounded-2xl px-4 py-3 text-foreground-600 -outline-offset-2 squircle-16 focus-visible:text-foreground-800 safe-hover:text-foreground-800 dark:text-foreground-700 dark:focus-visible:text-foreground-800 dark:safe-hover:text-foreground-800";function A4e(e){const{className:t,children:n,isActive:s=!0,title:o}=e;return i.jsx(O1,{className:F("mb-6 w-max max-w-[80%] px-4 py-2.5",t),background:"transparent",size:"xs",stroke:!0,initial:Fe,animate:nt,strokeChildren:s?i.jsx("div",{className:"absolute inset-0 rtl:-scale-x-100",children:i.jsx(I4e,{})}):void 0,children:n??i.jsx(T4e,{title:o,isActive:s})})}function cR(e){const{loadingType:t}=e;switch(t){case"spinner":return i.jsx(it,{type:"spinnerThemed",className:"absolute -ms-2.5 -mt-2 size-11"});case"thinking-card":return i.jsx(A4e,{});case"reasoning-chat":return i.jsx(w4e,{className:"absolute -ms-2.5 -mt-2 w-max"});default:return null}}function lR(){const e=Ys(),t=M(SX),n=W("think-deeper-cot");switch(e){case"chat":case"computerUse":case"study":case"research":case"search":return t?null:"spinner";case"reasoning":return n?"thinking-card":"reasoning-chat";case"smart":return null;case"coco":return"thinking-card";default:return null}}function uR(e){const{delay:t,className:n}=e,{t:s}=q(),o=c.useId(),r=Ys(),a=lR();return a?i.jsxs(ge.div,{"aria-hidden":!0,className:F("relative",n),initial:"start",animate:"end",variants:{start:{...Fe},end:{...nt,transition:{delay:t}}},children:[i.jsx(Ti,{id:o,timeout:3e3,msg:s(r==="reasoning"?"chat.reasoning":"chat.loading"),type:"polite"}),i.jsx(cR,{loadingType:a})]}):null}const dR={"56-default":"h-14","64-legacy":"h-16"},k4e={100:"bg-background-100/95 dark:bg-background-100/90",150:"bg-background-150/95 dark:bg-background-150/90",200:"bg-background-200/95 dark:bg-background-200/90"},M4e={100:"dark:bg-background-100/90",150:"dark:bg-background-150/90",200:"dark:bg-background-200/90"};function xh(e){const{middle:t,start:n,end:s,className:o,sectionHeight:r="56-default",backgroundColor:a="150",backgroundDarkColor:l,hideBackground:u,showBottomBorder:d,disableFadeInOut:m,sectionClassName:f,startClassName:h,middleClassName:g,endClassName:C,secondaryStart:v,secondaryMiddle:y,secondaryEnd:b,secondarySectionClassName:E}=e,I=!gt({breakpoint:"md"}),_=!!n||!!t||!!s,T=!!v||!!y||!!b,A=_||T;return i.jsx(ln,{className:F("pointer-events-none sticky top-0 w-full",ct.stickyHeader),duration:m?0:ts.default,children:i.jsxs("div",{className:F("absolute flex w-full flex-col",d&&"border-b border-foreground-250/80 dark:border-foreground-250",o),"data-testid":"sticky-header",children:[i.jsx(ln,{duration:I?0:ts.default,children:!u&&i.jsx("div",{className:F("pointer-events-auto absolute inset-0",!A&&dR[r],Qs,k4e[a],l&&M4e[l])})}),_&&i.jsx(j9,{start:n,middle:t,end:s,height:r,sectionClassName:f,startClassName:h,middleClassName:g,endClassName:C}),T&&i.jsx(j9,{start:v,middle:y,end:b,height:r,sectionClassName:E,isSubtitleSection:!0})]})})}function j9(e){const{start:t,middle:n,end:s,height:o="64-legacy",isSubtitleSection:r,sectionClassName:a,startClassName:l,middleClassName:u,endClassName:d}=e;return i.jsxs("section",{className:F("relative flex w-full gap-2 px-2.5",r?"pb-2.5":"py-2.5",dR[o],a),children:[i.jsx("div",{className:F("flex flex-1 items-center justify-start sm:gap-2",l),children:i.jsx("div",{className:"pointer-events-auto contents",children:t})}),n&&i.jsx("div",{className:F("flex items-center overflow-hidden sm:gap-2",u),children:i.jsx("div",{className:"pointer-events-auto contents",children:n})}),i.jsx("div",{className:F("flex flex-1 items-center justify-end sm:gap-2",d),children:i.jsx("div",{className:"pointer-events-auto contents",children:s})})]})}const ay=e=>c.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M15.75 3.75V20.25M22.25 6.25C22.25 5.58696 21.98 4.94884 21.4995 4.48C21.0189 4.01116 20.3671 3.75 19.6875 3.75H4.3125C3.63288 3.75 2.9811 4.01116 2.50054 4.48C2.01998 4.94884 1.75 5.58696 1.75 6.25V18C1.75 18.663 2.01998 19.3012 2.50054 19.77C2.9811 20.2388 3.63288 20.25 4.3125 20.25H19.6875C20.3671 20.25 21.0189 20.2388 21.4995 19.77C21.98 19.3012 22.25 18.663 22.25 18V6.25Z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M7.5 14.5L10 12L7.5 9.5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),xke=Object.freeze(Object.defineProperty({__proto__:null,default:ay},Symbol.toStringTag,{value:"Module"}));function N4e(){const e=!Gt("kill-share-c2"),t=ut(),n=M(hn),s=M(Sa),o=wl(),r=M(XE)==="coco";return!!(!s&&e&&t.startsWith("/chats")&&!t.endsWith("/talk")&&(n!=null&&n.history.length)&&!o&&!r)}const mR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M20.9519 3.0481C19.5543 1.65058 17.2885 1.65064 15.8911 3.04825L3.94103 14.9997C3.5347 15.4061 3.2491 15.9172 3.116 16.4762L2.02041 21.0777C1.96009 21.3311 2.03552 21.5976 2.21968 21.7817C2.40385 21.9659 2.67037 22.0413 2.92373 21.981L7.52498 20.8855C8.08418 20.7523 8.59546 20.4666 9.00191 20.0601L20.952 8.10861C22.3493 6.71112 22.3493 4.4455 20.9519 3.0481ZM16.9518 4.10884C17.7634 3.29709 19.0795 3.29705 19.8912 4.10876C20.7028 4.9204 20.7029 6.23632 19.8913 7.04801L19 7.93946L16.0606 5.00012L16.9518 4.10884ZM15 6.06084L17.9394 9.00018L7.94119 18.9995C7.73104 19.2097 7.46668 19.3574 7.17755 19.4263L3.76191 20.2395L4.57521 16.8237C4.64402 16.5346 4.79168 16.2704 5.00175 16.0603L15 6.06084Z"})),Ske=Object.freeze(Object.defineProperty({__proto__:null,default:mR},Symbol.toStringTag,{value:"Module"}));function R4e(e){const{title:t,onSave:n=()=>{},as:s="h2",inputClassName:o="",displayClassName:r="","aria-label":a,placeholder:l,maxLength:u,leftSlot:d,editable:m=!0,alignment:f="center",isEditIconVisibleOnHover:h}=e,{t:g}=q(),[C,v]=c.useState(!1),[y,b]=c.useState(!1),[E,S]=c.useState(t),I=s,_=()=>{m&&(C||b(!0))},T=P=>{u!==void 0&&P.target.value.length>u||S(P.target.value)},A=()=>{N()},k=P=>{P.key==="Enter"||P.key==="Return"?N():P.key==="Escape"&&(S(t),b(!1))},N=async()=>{if(b(!1),E!==t){v(!0);try{await n(E)}catch{S(t)}finally{v(!1)}}};return y&&m?i.jsx(P4e,{disabled:C,type:"text",value:E,onChange:T,onBlur:A,onKeyDown:k,"aria-label":a,className:F("relative rounded-xl border border-transparent bg-background-200/75 px-[11px] py-1 outline-0 text-base-medium dark:bg-black","focus-visible:border-foreground-350 focus-visible:dark:border-foreground-400",f==="start"?"text-start":"text-center",o),maxLength:u}):i.jsxs(i.Fragment,{children:[d,i.jsxs(I,{className:F("relative w-max cursor-default items-center gap-2.5 truncate rounded-xl px-3 py-[5px] text-base-medium",r,h&&"hover:pe-9",m&&"group cursor-pointer hover:bg-black/5 active:bg-black/3 dark:hover:bg-black/30 dark:active:bg-black/20"),tabIndex:0,role:"button","aria-label":g("editableTitle.titleLabel",{title:t}),onClick:_,disabled:C||!m,onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&_()},children:[E!==""?E:l,h&&i.jsx(mR,{className:"absolute end-2.5 top-2.5 hidden size-4 opacity-60 group-hover:block group-focus-visible:block","aria-hidden":!0})]})]})}function P4e(e){const{autoFocus:t,...n}=e,s=c.useRef(null);return $i(s),i.jsx("input",{ref:s,...n})}function L4e(){const{t:e}=q(),{hideConversationTitle:t,hideConversationActions:n}=re.instance().config().uiOverrides??{},s=M(hn),o=Qi(),r="chatPage",{shareClickHandler:a}=V3({scenario:r,trackShareClick:()=>MA({scenario:r,sectionName:"topRight"})}),l=M(Hn)==="side-by-side",u=se(Hn),d=c.useCallback(()=>{u("detail-only")},[u]),m=s==null?void 0:s.title,f=m===""?e("conversations.newConversationTitle"):m,h=!t&&!o&&!l&&f?i.jsx(pt,{children:i.jsx(ge.div,{initial:Fe,animate:nt,exit:{transition:{duration:0},...Fe},transition:pn,className:"flex w-full items-center justify-center",children:i.jsx(R4e,{title:f,editable:!1,displayClassName:"w-max max-w-full",inputClassName:"w-full"},f)})}):void 0,g=gt({breakpoint:"sm"}),C=l&&!g,v=C&&i.jsx(pt,{children:i.jsx(ge.div,{initial:Fe,animate:nt,exit:{transition:{duration:0},...Fe},transition:pn,children:i.jsx(ne,{title:e("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",onClick:d,children:i.jsx(ay,{className:"size-5"})})})}),y=N4e(),b=!n&&y&&!l&&i.jsx(pt,{children:i.jsx(ge.div,{initial:Fe,animate:nt,exit:{transition:{duration:0},...Fe},transition:pn,children:i.jsx(ne,{variant:"square",color:"subtle-dimmed-inverted",size:"36-sm",title:e("chat.actions.share"),onClick:a,children:i.jsx(gh,{className:"size-5"})})})}),E=M(Md);return!bh()&&!E&&i.jsx(xh,{start:v,middle:h,end:b,sectionClassName:C?void 0:"ps-[calc(var(--sidebar-header-secondary-buttons-collapsed-width)+10px)]",showBottomBorder:!0,startClassName:"flex-none md:flex-1",middleClassName:"grow min-w-0",endClassName:"flex-none md:flex-1"})}function fR(){const e=W("sidebar-narrow"),t=gt({breakpoint:"lg"});return e&&t?nB:tB}const C0="0.5rem";function O4e(e){const{children:t}=e,n=M(Hn),s=Ns(),o=n==="side-by-side",r=bh(),a=fR(),l=n==="side-by-side"&&!r,u=s?"bg-background-150":"bg-gradient-chat-light",d=Ir(f=>{const h=document.getElementById("app");h&&h.style.setProperty("--chat-details-container-height",r?`${f.height}px`:null)}),m=()=>n==="detail-only"?"0px":l?`max(${a}px, 25%)`:"100%";return i.jsxs("div",{className:ue("flex size-full max-h-[100vh] min-h-0",r&&"flex-col",o&&"bg-sidebar-light dark:bg-sidebar-dark",s&&o&&"pb-2"),style:l?{gap:C0}:void 0,children:[n!=="chat-only"&&i.jsx(ge.div,{ref:d,className:ue("rounded-lg",r&&"h-fit",o&&"shadow-lg","dark:bg-background-150 dark:bg-none",u),initial:{width:l?`calc(100% - ${C0} - max(${a}px, 25%))`:"100%"},animate:{width:l?`calc(100% - ${C0} - max(${a}px, 25%))`:"100%"},transition:pn,children:i.jsx(zbe,{})}),i.jsx(ge.div,{className:ue(n==="detail-only"&&"hidden",o&&u,r?"h-[calc(100vh-var(--chat-details-container-height))]":"h-full",o&&"rounded-lg pb-px shadow-lg dark:bg-background-150 dark:bg-none"),initial:{width:m()},animate:{width:m()},layout:"position",transition:pn,children:t})]})}function Vu(e,t){const n=Ft(e),s=Ft(t),o=n.getTime()-s.getTime();return o<0?-1:o>0?1:o}function D4e(e,t){const n=Ft(e),s=Ft(t),o=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return o*12+r}function j4e(e){const t=Ft(e);return t.setHours(23,59,59,999),t}function U4e(e){const t=Ft(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function F4e(e){const t=Ft(e);return+j4e(t)==+U4e(t)}function B4e(e,t){const n=Ft(e),s=Ft(t),o=Vu(n,s),r=Math.abs(D4e(n,s));let a;if(r<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-o*r);let l=Vu(n,s)===-o;F4e(Ft(e))&&r===1&&Vu(e,s)===1&&(l=!1),a=o*(r-Number(l))}return a===0?0:a}function V4e(e,t){const n=Ft(e),s=Ft(t);return n.getFullYear()-s.getFullYear()}function H4e(e,t){const n=Ft(e),s=Ft(t),o=Vu(n,s),r=Math.abs(V4e(n,s));n.setFullYear(1584),s.setFullYear(1584);const a=Vu(n,s)===-o,l=o*(r-+a);return l===0?0:l}function z4e(e,t){const n=Ft(e),s=Ft(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}let G4e={};function W4e(){return G4e}function $4e(e,t){var l,u,d,m;const n=W4e(),s=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((m=(d=n.locale)==null?void 0:d.options)==null?void 0:m.weekStartsOn)??0,o=Ft(e),r=o.getDay(),a=(r<s?7:0)+r-s;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function q4e(e,t,n){const s=zc(e,t),o=$4e(t,{weekStartsOn:1}),r=zc(o,t),a=zc(Bp(o,7),t),l=Xn(e,"EEEE"),u=n(`dates.weekdays.${l.toLowerCase()}`),d=n(`dates.months.${Xn(e,"MMMM").toLowerCase()}Abbr`),m=Xn(e,"d"),f=n("dates.dayMonthDate",{day:u,month:d,date:m});return s>=1?f:s>=0?`${n("dates.today")}`:s>=-1?`${n("dates.yesterday")}`:s>=r?u:s>=a?n("dates.previousDay",{day:u}):f}function K4e(e,t,n){const s=zc(t,e);if(s===0)return n("dates.today");if(s<=1)return n("dates.yesterday");if(s<7)return n("dates.weekThis");if(z4e(e,t))return n("dates.monthThis");if(B4e(t,e)<12){const a=Xn(e,"MMMM").toLowerCase();return n(`dates.months.${a}`)}const r=H4e(t,e);return r===1?n("dates.yearAgo"):n("dates.yearsAgoPlural",{count:r})}function Z4e(e,t){return q4e(e,new Date,t)}function Eke(e,t){return K4e(e,new Date,t)}function wke(e){const t=Math.max(0,e),n=Math.floor(t/60),s=t%60;return`${n}:${s<10?"0":""}${s}`}function Y4e(e){const{date:t,className:n}=e,{t:s}=q();return i.jsxs("div",{className:ue("flex items-center",n),children:[i.jsx("span",{className:"opacity-70 text-sm-strong","data-testid":"date-divider",children:Z4e(t,s)}),i.jsx(ms,{verticalMargin:!1,color:"accent",className:"mt-px grow"})]})}function Q4e(e){const{content:t}=e;return i.jsx("div",{className:"text-center text-foreground-450 text-sm dark:text-foreground-600",children:t})}const pR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M17.5004 12.0003C20.5379 12.0003 23.0004 14.4627 23.0004 17.5003C23.0004 20.5378 20.5379 23.0003 17.5004 23.0003C14.4628 23.0003 12.0004 20.5378 12.0004 17.5003C12.0004 14.4627 14.4628 12.0003 17.5004 12.0003ZM12.0226 13.9996C11.7259 14.4629 11.4864 14.9663 11.314 15.4999L4.25278 15.5002C3.83919 15.5002 3.50391 15.8355 3.50391 16.2491V16.8267C3.50391 17.3624 3.69502 17.8805 4.04287 18.2878C5.29618 19.7555 7.26206 20.5013 10.0004 20.5013C10.5968 20.5013 11.1567 20.4659 11.6806 20.3954C11.9258 20.8903 12.2333 21.3489 12.5921 21.7618C11.7966 21.922 10.9317 22.0013 10.0004 22.0013C6.8545 22.0013 4.46849 21.0962 2.90219 19.2619C2.32242 18.583 2.00391 17.7195 2.00391 16.8267V16.2491C2.00391 15.007 3.01076 14.0002 4.25278 14.0002L12.0226 13.9996ZM17.5004 14.0002L17.4105 14.0083C17.2064 14.0453 17.0455 14.2063 17.0084 14.4104L17.0004 14.5002L16.9994 17.0003H14.5043L14.4144 17.0083C14.2103 17.0454 14.0494 17.2063 14.0123 17.4104L14.0043 17.5003L14.0123 17.5901C14.0494 17.7942 14.2103 17.9552 14.4144 17.9922L14.5043 18.0003H16.9994L17.0004 20.5002L17.0084 20.5901C17.0455 20.7942 17.2064 20.9551 17.4105 20.9922L17.5004 21.0002L17.5902 20.9922C17.7943 20.9551 17.9553 20.7942 17.9923 20.5901L18.0004 20.5002L17.9994 18.0003H20.5043L20.5941 17.9922C20.7982 17.9552 20.9592 17.7942 20.9962 17.5901L21.0043 17.5003L20.9962 17.4104C20.9592 17.2063 20.7982 17.0454 20.5941 17.0083L20.5043 17.0003H17.9994L18.0004 14.5002L17.9923 14.4104C17.9553 14.2063 17.7943 14.0453 17.5902 14.0083L17.5004 14.0002ZM10.0004 2.00488C12.7618 2.00488 15.0004 4.24346 15.0004 7.00488C15.0004 9.76631 12.7618 12.0049 10.0004 12.0049C7.23894 12.0049 5.00036 9.76631 5.00036 7.00488C5.00036 4.24346 7.23894 2.00488 10.0004 2.00488ZM10.0004 3.50488C8.06737 3.50488 6.50036 5.07189 6.50036 7.00488C6.50036 8.93788 8.06737 10.5049 10.0004 10.5049C11.9334 10.5049 13.5004 8.93788 13.5004 7.00488C13.5004 5.07189 11.9334 3.50488 10.0004 3.50488Z",fill:"currentColor"})),Ike=Object.freeze(Object.defineProperty({__proto__:null,default:pR},Symbol.toStringTag,{value:"Module"})),hR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M17.5004 12.0003C20.5379 12.0003 23.0004 14.4627 23.0004 17.5003C23.0004 20.5378 20.5379 23.0003 17.5004 23.0003C14.4628 23.0003 12.0004 20.5378 12.0004 17.5003C12.0004 14.4627 14.4628 12.0003 17.5004 12.0003ZM12.0226 13.9996C11.7259 14.4629 11.4864 14.9663 11.314 15.4999L4.25391 15.5002C3.83969 15.5002 3.50391 15.836 3.50391 16.2502V17.1575C3.50391 17.8132 3.7899 18.4362 4.28707 18.8636C5.54516 19.9453 7.44117 20.5013 10.0004 20.5013C10.5992 20.5013 11.1618 20.4709 11.6885 20.4104C11.9374 20.9105 12.2512 21.3743 12.6175 21.7908C11.8153 21.9315 10.9423 22.0013 10.0004 22.0013C7.11087 22.0013 4.87205 21.3447 3.30918 20.001C2.48056 19.2887 2.00391 18.2503 2.00391 17.1575V16.2502C2.00391 15.0075 3.01127 14.0002 4.25391 14.0002L12.0226 13.9996ZM16.7196 14.5889L16.6503 14.6467L14.1347 17.163L14.0941 17.2137L14.0594 17.2711L14.0272 17.3491L14.0156 17.3923L14.0044 17.4787L14.0082 17.5661L14.0271 17.6513L14.0591 17.729L14.0837 17.7714L14.1346 17.8374L16.6503 20.3538C16.8456 20.5491 17.1622 20.5491 17.3574 20.3538C17.531 20.1802 17.5503 19.9108 17.4153 19.716L17.3574 19.6467L15.7114 18.0003H20.5004C20.7458 18.0003 20.95 17.8234 20.9923 17.5901L21.0004 17.5003C21.0004 17.2548 20.8235 17.0507 20.5902 17.0083L20.5004 17.0003H15.7114L17.3574 15.3538C17.531 15.1802 17.5503 14.9108 17.4153 14.716L17.3574 14.6467C17.1839 14.4731 16.9145 14.4539 16.7196 14.5889ZM10.0004 2.00488C12.7618 2.00488 15.0004 4.24346 15.0004 7.00488C15.0004 9.76631 12.7618 12.0049 10.0004 12.0049C7.23894 12.0049 5.00036 9.76631 5.00036 7.00488C5.00036 4.24346 7.23894 2.00488 10.0004 2.00488ZM10.0004 3.50488C8.06737 3.50488 6.50036 5.07189 6.50036 7.00488C6.50036 8.93788 8.06737 10.5049 10.0004 10.5049C11.9334 10.5049 13.5004 8.93788 13.5004 7.00488C13.5004 5.07189 11.9334 3.50488 10.0004 3.50488Z"})),_ke=Object.freeze(Object.defineProperty({__proto__:null,default:hR},Symbol.toStringTag,{value:"Module"})),gR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M17.5004 12.0003C20.5379 12.0003 23.0004 14.4627 23.0004 17.5003C23.0004 20.5378 20.5379 23.0003 17.5004 23.0003C14.4628 23.0003 12.0004 20.5378 12.0004 17.5003C12.0004 14.4627 14.4628 12.0003 17.5004 12.0003ZM12.0226 13.9996C11.7259 14.4629 11.4864 14.9663 11.314 15.4999L4.25391 15.5002C3.83969 15.5002 3.50391 15.836 3.50391 16.2502V17.1575C3.50391 17.8132 3.7899 18.4362 4.28707 18.8636C5.54516 19.9453 7.44117 20.5013 10.0004 20.5013C10.5992 20.5013 11.1618 20.4709 11.6885 20.4104C11.9374 20.9105 12.2512 21.3743 12.6175 21.7908C11.8153 21.9315 10.9423 22.0013 10.0004 22.0013C7.11087 22.0013 4.87205 21.3447 3.30918 20.001C2.48056 19.2887 2.00391 18.2503 2.00391 17.1575V16.2502C2.00391 15.0075 3.01127 14.0002 4.25391 14.0002L12.0226 13.9996ZM15.0934 14.9665L15.0242 15.0244L14.9663 15.0936C14.8482 15.2642 14.8482 15.4917 14.9663 15.6623L15.0242 15.7315L16.7937 17.5009L15.0268 19.2677L14.9689 19.337C14.8508 19.5075 14.8508 19.7351 14.9689 19.9056L15.0268 19.9749L15.096 20.0327C15.2665 20.1508 15.4941 20.1508 15.6646 20.0327L15.7339 19.9749L17.5007 18.2079L19.2698 19.9771L19.339 20.035C19.5095 20.1531 19.7371 20.1531 19.9076 20.035L19.9769 19.9771L20.0347 19.9079C20.1528 19.7373 20.1528 19.5097 20.0347 19.3392L19.9769 19.27L18.2077 17.5009L19.9796 15.7316L20.0375 15.6623C20.1556 15.4918 20.1556 15.2642 20.0375 15.0937L19.9796 15.0244L19.9104 14.9666C19.7399 14.8485 19.5123 14.8485 19.3418 14.9666L19.2725 15.0244L17.5007 16.794L15.7313 15.0244L15.662 14.9665C15.5159 14.8653 15.3278 14.8508 15.1696 14.9231L15.0934 14.9665ZM10.0004 2.00488C12.7618 2.00488 15.0004 4.24346 15.0004 7.00488C15.0004 9.76631 12.7618 12.0049 10.0004 12.0049C7.23894 12.0049 5.00036 9.76631 5.00036 7.00488C5.00036 4.24346 7.23894 2.00488 10.0004 2.00488ZM10.0004 3.50488C8.06737 3.50488 6.50036 5.07189 6.50036 7.00488C6.50036 8.93788 8.06737 10.5049 10.0004 10.5049C11.9334 10.5049 13.5004 8.93788 13.5004 7.00488C13.5004 5.07189 11.9334 3.50488 10.0004 3.50488Z",fill:"currentColor"})),Tke=Object.freeze(Object.defineProperty({__proto__:null,default:gR},Symbol.toStringTag,{value:"Module"}));function J4e(e){switch(e){case"joined":return pR;case"left":return hR;case"kicked":return gR;default:return null}}function X4e({message:e}){const{participant:t,updateType:n}=e,s=ry(),o=J4e(n),{t:r}=q(),a=c.useMemo(()=>{switch(n){case"joined":return r("share.invite.participantJoined",{name:t.userDisplayName});case"left":return r("share.invite.participantLeft",{name:t.userDisplayName});case"kicked":return r("share.invite.participantKicked",{name:t.userDisplayName});default:return null}},[n,t.userDisplayName,r]);return i.jsx("div",{className:F(nT,s),children:i.jsxs("div",{className:"flex gap-2 text-foreground-550 text-sm",children:[o&&i.jsx(o,{className:"size-4 shrink-0"}),a]})})}const e6e=["thumbsup","thumbsdown","report","share","copy","add-to-pages","regenerate","research-export"],t6e=[...e6e],n6e=[],U9=c.lazy(()=>B(()=>import("./ai-message-CQb3lkIT.js").then(e=>e.a),__vite__mapDeps([437,1,414,438,439,440,435,441,407,366,442,443,444,445,396,446,394])));function s6e(e){const{message:t,animatingMessageIds:n,conversationId:s,sideBySideComparisonId:o,isStreamingComplete:r,shouldAnimate:a,reactionsToAllow:l,isLastMessage:u}=e,{t:d}=q(),m=se(Sn),f=lR();if(!s)return null;if(!ZI(t))return i.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.25},children:i.jsx(c.Suspense,{fallback:f&&i.jsx(cR,{loadingType:f}),children:i.jsx(U9,{message:t,isStreamingComplete:r,shouldAnimate:!1,reactionsToAllow:l,isLastMessage:u})})});if(!o)return null;const{left:h,right:g}=t,C=b=>!(n!=null&&n.has(b.id))&&!b.sideBySideConfig.isStreamingComplete,v=(b,E)=>{jae({sideBySideComparisonId:o,sideBySideConfig:E}),jn.selectSideBySideMessage({selectedMessageId:b,sideBySideComparisonId:o}),Bee(s,b),m({title:d("chat.sideBySide.selectedResponseToastTitle"),subtitle:d("chat.sideBySide.selectedResponseToastSubtitle"),dismissAfter:2e3})},y=i.jsx(uR,{delay:.5,className:"mt-2"});return i.jsxs("div",{className:"flex w-full flex-col items-center gap-6 pb-4",children:[i.jsx("p",{children:d("chat.sideBySide.preambleMessage")}),i.jsx("div",{className:"flex flex-col justify-center gap-6 @5xl/chat:w-[100cqw] @5xl/chat:flex-row @5xl/chat:items-stretch @5xl/chat:px-6",children:[h,g].map(b=>i.jsxs("div",{className:"flex min-h-24 flex-col rounded-2xl border-[0.5px] border-black/12 bg-white/45 p-6 @5xl/chat:min-w-[480px] @5xl/chat:max-w-[600px] @5xl/chat:flex-[1_1_600px] dark:bg-background-650/10",children:[i.jsx("div",{className:"flex-1",children:C(b)?y:i.jsx(c.Suspense,{fallback:y,children:i.jsx(U9,{message:b,isStreamingComplete:r,shouldAnimate:a,reactionsToAllow:n6e,isLastMessage:!0,groupHasTopMargin:!1,isInSideBySide:!0})})}),r&&i.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},children:i.jsx(ne,{size:"36-sm",className:"mx-auto mt-6",title:d("chat.actions.selectResponse"),color:"strong",onClick:()=>v(b.id,b.sideBySideConfig),children:d("chat.actions.selectResponse")})})]},b.id))})]})}const vR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M19.5 5.5H4.5C3.94772 5.5 3.5 5.94772 3.5 6.5V15.5C3.5 16.0523 3.94772 16.5 4.5 16.5H9V18H4.5C3.11929 18 2 16.8807 2 15.5V6.5C2 5.11929 3.11929 4 4.5 4H19.5C20.8807 4 22 5.11929 22 6.5V15.5C22 16.7183 21.1285 17.7331 19.975 17.9549C19.9 17.5176 19.6598 17.1137 19.2849 16.8388L18.9461 16.5H19.5C20.0523 16.5 20.5 16.0523 20.5 15.5V6.5C20.5 5.94772 20.0523 5.5 19.5 5.5ZM11.2803 10.2197C11.0658 10.0052 10.7432 9.94103 10.463 10.0571C10.1827 10.1732 10 10.4467 10 10.75V21.25C10 21.5785 10.2138 21.8688 10.5275 21.9663C10.8413 22.0637 11.1819 21.9456 11.368 21.6749L13.8348 18.0869L18.0955 18.9839C18.4203 19.0523 18.7514 18.8991 18.9095 18.6073C19.0675 18.3154 19.015 17.9544 18.7803 17.7197L11.2803 10.2197ZM11.5 18.8353V12.5607L15.9357 16.9964L13.6545 16.5161C13.3582 16.4537 13.0535 16.5756 12.882 16.8251L11.5 18.8353Z"})),Ake=Object.freeze(Object.defineProperty({__proto__:null,default:vR},Symbol.toStringTag,{value:"Module"})),CR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM15.4462 8.39705L15.5303 8.46967C15.7966 8.73594 15.8208 9.1526 15.6029 9.44621L15.5303 9.53033L13.061 12L15.5303 14.4697C15.7966 14.7359 15.8208 15.1526 15.6029 15.4462L15.5303 15.5303C15.2641 15.7966 14.8474 15.8208 14.5538 15.6029L14.4697 15.5303L12 13.061L9.53033 15.5303C9.26406 15.7966 8.8474 15.8208 8.55379 15.6029L8.46967 15.5303C8.2034 15.2641 8.1792 14.8474 8.39705 14.5538L8.46967 14.4697L10.939 12L8.46967 9.53033C8.2034 9.26406 8.1792 8.8474 8.39705 8.55379L8.46967 8.46967C8.73594 8.2034 9.1526 8.1792 9.44621 8.39705L9.53033 8.46967L12 10.939L14.4697 8.46967C14.7359 8.2034 15.1526 8.1792 15.4462 8.39705Z"})),kke=Object.freeze(Object.defineProperty({__proto__:null,default:CR},Symbol.toStringTag,{value:"Module"})),F9="size-5",B9="flex w-full items-center justify-end gap-1.5 text-foreground-450 dark:text-foreground-600";function o6e({type:e}){const{t}=q();switch(e){case"takeTaskControl":return i.jsxs("div",{className:B9,children:[i.jsx(vR,{className:F9}),t("actions.tookControl")]});case"cancelTask":return i.jsxs("div",{className:B9,children:[i.jsx(CR,{className:F9}),t("actions.cancelledTask")]});case"createPage":case"appendToPage":case"promptCharacterSpeech":default:return null}}function r6e(e){const{text:t,author:n}=e,s=M(I1),o=(n==null?void 0:n.type)==="groupParticipant"&&n.id!==s;return i.jsx("div",{className:F("flex w-full flex-col",{"items-start":o,"items-end":!o}),"data-content":"user-message",children:i.jsxs("div",{className:F("font-ligatures-none relative h-fit max-w-user-text-message whitespace-pre-wrap break-words bg-accent-250/60 px-4 py-2.5 squircle-16 dark:bg-accent-200",Ho("userMessage")??"text-base",{"bg-white dark:bg-accent-100":o}),children:[o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 border-squircle-card border-accent-200 squircle-stroke-16 dark:border-accent-300","aria-hidden":"true"}),t]})})}const yR=e=>(D1(QL),gp({groupper:{tabbability:a6e(e==null?void 0:e.tabBehavior)},focusable:{ignoreKeydown:e==null?void 0:e.ignoreDefaultKeydown}})),a6e=e=>{switch(e){case"unlimited":return zh.Unlimited;case"limited":return zh.Limited;case"limited-trap-focus":return zh.LimitedTrapFocus;default:return}},bR=c.forwardRef((e,t)=>{const{children:n,tabBehavior:s="limited-trap-focus",ignoreDefaultKeydown:o,...r}=e,a=yR({tabBehavior:s,ignoreDefaultKeydown:o});return W("a11y-keyboard-navigation")?i.jsx(ge.div,{ref:t,...a,...r,tabIndex:0,children:n}):i.jsx(ge.div,{...r,ref:t,children:n})});bR.displayName="FocusableGroupMotion";function i6e(e){const{children:t,tabBehavior:n="limited-trap-focus",ignoreDefaultKeydown:s,...o}=e,r=yR({tabBehavior:n,ignoreDefaultKeydown:s});return W("a11y-keyboard-navigation")?i.jsx("div",{...r,...o,tabIndex:0,role:"article",children:t}):i.jsx("div",{...o,children:t})}const xR=e=>i.jsx(i6e,{...e});xR.Motion=bR;function c6e({tabs:e=[]}){return e.length===0?null:i.jsx(Tr,{className:"flex min-h-[60px] flex-col gap-2",tabbable:!0,tabIndex:0,children:i.jsx(HN,{showRemoveIcon:!1,tabs:e})})}function l6e(e){var T,A,k,N;const{message:t,className:n,isForSharing:s}=e,{t:o}=q(),a=!!M(_s),l=M(I1),u=K3(),d=W("a11y-keyboard-navigation"),m=t.content.filter(P=>P.type==="document"||P.type==="image"),[f,h]=c.useState(!1),g=W("file-upload-card-v2"),C=!!((T=re.instance().config().composer)!=null&&T.smallAttachmentCard)||g,v=m.slice(0,ap),y=c.useCallback(()=>{ho({msg:o("userInput.seeAll"),type:"polite"}),h(!0)},[o,h]),b=m.length>ap,E=t.author==="groupParticipant"&&((A=t.authorMetadata)==null?void 0:A.id)!==l,S=E?((k=t.authorMetadata)==null?void 0:k.displayName)??o("share.invite.formerMemberTitle"):"";function I(){return E?o("chat.participantSaid",{name:S}):o(d?"chat.userSaid":"chat.user")}const _=I();return i.jsxs(xR,{className:ue("space-y-1",n),id:`${t.id}-user-message`,"aria-labelledby":`${t.id}-user-message`,children:[i.jsxs("div",{className:"relative space-y-3",children:[i.jsx("h2",{className:"sr-only","aria-label":_,"data-copy":"false",children:_}),m.length>0&&i.jsxs("div",{className:F("flex w-full flex-row gap-2 overflow-hidden",{"justify-end":!E,"h-32":!g&&!C,"h-small-attachment":!g&&C,"h-auto":g}),children:[v.map((P,V)=>i.jsx(TN,{messageItem:P,isForSharing:s},`file-${V}`)),b&&i.jsx(ne,{"aria-label":o("userInput.seeAll"),title:o("userInput.seeAll"),color:"overlay-dimmed-inverted",onClick:y,className:C?"mt-1 h-small-attachment":"",children:o("userInput.seeAll")}),f&&i.jsx(AN,{onClose:()=>h(!1),messages:m,isForSharing:s})]}),t.content.map((P,V)=>P.type==="browserTabs"?u&&Zne(P.tabs)?i.jsx(c6e,{tabs:P.tabs},V):null:P.type==="text"?i.jsxs("div",{className:"flex flex-col gap-1",children:[E&&i.jsx("div",{className:"text-foreground-600 text-xs","aria-hidden":"true",children:S}),i.jsx(r6e,{author:t.authorMetadata,text:P.text})]},V):P.type==="command"?i.jsx(o6e,{type:P.command.type},V):(P.type==="document",null)),t.emojiReaction&&i.jsx("div",{className:"absolute -bottom-3 end-3",children:t.emojiReaction})]}),!a&&((N=t.brand)==null?void 0:N.brandLogo)&&i.jsx("div",{className:"w-full px-3 text-right text-foreground-600 text-sm",children:o("ads.aboutBrand",{brand:t.brand.brandLogo.businessName})})]},t.id)}const V9=c.lazy(()=>B(()=>import("./ai-message-CQb3lkIT.js").then(e=>e.a),__vite__mapDeps([437,1,414,438,439,440,435,441,407,366,442,443,444,445,396,446,394])));function H9(e){const{chatItemClasses:t,currentConversation:n,enableLastMessageCheck:s=!1,hasNextPage:o=!1,isStreamingComplete:r,messages:a,previousMessageInit:l,reactionsToAllow:u,shouldAnimate:d=!1}=e,f=M(v1).get((n==null?void 0:n.id)??""),h=W("share-continue-v2"),{disableMultiturn:g}=re.instance().config();return a.map((v,y)=>{const b=new Date(v.createdAt),E=y>0?a[y-1]:l,S=E&&new Date(E.createdAt),I=!S||!vh(b,S),_=h&&FCe(n!=null&&n.continuedAt?new Date(n.continuedAt):null,b,S),T=s&&y===a.length-1;let A;Lee(v)?A=i.jsx(s6e,{message:v,conversationId:n==null?void 0:n.id,animatingMessageIds:f,sideBySideComparisonId:n==null?void 0:n.sideBySideComparisonId,isStreamingComplete:r,shouldAnimate:d,reactionsToAllow:u,isLastMessage:T}):v.author==="ai"?A=e.isNewChat?i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(V9,{message:v,isStreamingComplete:r,shouldAnimate:d,reactionsToAllow:u,isLastMessage:T})}):i.jsx(V9,{message:v,isStreamingComplete:r,shouldAnimate:d,reactionsToAllow:u,isLastMessage:T}):v.author==="system"?A=i.jsx(X4e,{message:v}):A=i.jsx(l6e,{message:v,className:t});const k=y===0&&o&&!E;return i.jsxs(c.Fragment,{children:[_&&i.jsx(Q4e,{content:z("chat.continuedConversationDisclaimer")}),!k&&I&&!g&&i.jsx(Y4e,{date:b,className:t}),A]},v.id)})}function SR(e){const{className:t}=e,n=M(Sa),s="top-disclaimer";return n?i.jsx(s5,{forceVisible:!0,className:t,testId:s,shouldUpdateNewConversationCount:!0}):i.jsx(s5,{className:t,testId:s,shouldUpdateNewConversationCount:!0})}const z9=10,u6e=0,d6e=.2;function m6e({onClick:e,shouldShowScrollToBottomButton:t,bottomButtonClass:n=""}){const{t:s}=q(),o=M(Hn),r=bh(),a=o==="side-by-side"&&!r;return i.jsx(pt,{children:t&&i.jsx(ge.div,{className:F("pointer-events-none absolute flex justify-center",ct.chatScrollToBottomButton,a?"end-0 w-1/4 min-w-secondary-panel-slim":"inset-x-0",n),initial:{...Fe,y:z9},animate:{...nt,y:u6e},exit:{...Fe,y:z9},transition:{duration:d6e},children:i.jsx(ne,{color:"acrylic",variant:"circle",size:"36-sm",title:s("chat.scrollToBottom"),onClick:e,className:"pointer-events-auto border-none shadow-xl",testId:"scroll-to-bottom-button",children:i.jsx("span",{className:F("relative rounded-full bg-white/40 p-2 hover:bg-white hover:p-[9px] dark:bg-background-350/60","after:absolute after:inset-0 after:rounded-full after:opacity-50 after:shadow-xl","before:absolute before:-inset-px before:rounded-full before:border before:border-black/8"),children:i.jsx(Il,{className:"size-5 rotate-180 fill-foreground-900 dark:fill-white"})})})})})}function f6e(e){const{query:t,messageId:n,index:s,onClick:o}=e,r=M(je),a=()=>{qt({source:"suggestionChip",conversationId:r,messageId:n}),D.trackEvent({name:"interaction",data:{eventName:"copilotSuggestionFollowupSelection",eventInfo_messageId:n,eventInfo_conversationId:r??"",eventInfo_suggestionIndex:s}}),o()};return i.jsx(kN,{isSelected:!1,variant:"flat",className:"max-w-[80%] text-start sm:max-w-fit",onClick:a,children:i.jsx("span",{className:"p-1",children:t})})}function p6e(e){const{mostRecentMessageId:t,className:n}=e,s=M(je),o=M(DZ),r=o&&t===o.messageId;return c.useEffect(()=>{r&&D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_messageId:t,eventInfo_impressionScenario:"suggestionReceived",eventInfo_conversationId:s??""}})},[r,t,s]),i.jsx("div",{className:ue("mt-auto",n),children:r&&i.jsx(g6e,{suggestions:o.suggestions,messageId:o.messageId,conversationId:s??""})})}async function h6e(e){await jn.submitMessage({text:e,inputMethod:"suggestion"}),Ge.emit("composer:focus-input")}function g6e({suggestions:e,messageId:t,conversationId:n}){const s=c.useRef(null),o=pl(s,{amount:"all",once:!0});return c.useEffect(()=>{o&&D.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_messageId:t,eventInfo_impressionScenario:"suggestionRender",eventInfo_conversationId:n}})},[o,t,n]),i.jsx(ln,{ref:s,duration:ts.suggestions,className:"flex flex-col items-end gap-3 pb-8",children:e.map((r,a)=>i.jsx(f6e,{index:a,messageId:t,onClick:()=>h6e(r),query:r},r))})}const v6e="answerCards.ariaLabel.numberOfLocalResultsSingle",C6e="answerCards.ariaLabel.numberOfLocalResultsPlural";function y6e(e){let t="";for(const s of e.entities){if(t+=s.name,s.category&&(t+=`, ${s.category}`),s.price&&(t+=`, ${b6e(s.price)}`),s.reviews[0]){const o=s.reviews[0];t+=", ",t+=z("answerCards.ariaLabel.ratedByReviewer",{rating:o.rating,reviewCount:o.count,reviewProvider:o.providerName})}s.phoneNumber&&(t+=", ",t+=z("answerCards.ariaLabel.phoneNumber",{phoneNumber:s.phoneNumber})),s.location.address&&(t+=", ",t+=z("answerCards.ariaLabel.address",{address:s.location.address})),s.openState&&(t+=", ",t+=z("answerCards.ariaLabel.openState",{openState:s.openState})),t+=". "}const n=e.entities.length===1?v6e:C6e;return z(n,{count:e.entities.length,resultSummary:t})}function b6e(e){switch(e.length){case 1:return z("answerCards.ariaLabel.inexpensivePrices");case 2:return z("answerCards.ariaLabel.averagePrices");default:return z("answerCards.ariaLabel.expensivePrices")}}function x6e(e){const{content:t,announce:n}=e;let s;for(const o of t){switch(o.type){case"text":s=o.text;break;case"image":o.url?s=z("chat.imageGenerated",{prompt:o.prompt??""}):s=z("chat.imageGenerating");break;case"page":break;case"citation":break;case"card":s=S6e(o.card);break;case"error":s=o.text;break;case"task":break;case"deleted":break;case"chainOfThought":break;case"chainOfThoughtGroup":break;case"document":break;case"activity":break;case"memorySignal":s=o.text;break;case"indicator-ai-response":s=o.text;break}s&&n({msg:s})}}function S6e(e){switch(e.type){case"localEntity":return y6e(e);case"healthcareEntity":return"";case"healthcareInfo":return"";case"shoppingProducts":return z("shopping.ariaLabel.carouselCards");case"ads":case"artifact":case"weather":case"weatherTemperatureHourly":case"weatherTemperatureDaily":case"weatherPrecipitationHourly":case"weatherPrecipitationDaily":case"image":case"person":case"phoneImages":case"phoneLinking":case"phoneAlarm":case"phoneTimer":case"phoneSendMessage":case"video":case"sportsSchedule":case"sportsGame":case"safetyHelpline":case"shopping":case"shoppingCurated":case"suggestVision":case"job":case"inlineVideo":case"quiz":case"financeChart":case"financeComparisonChart":case"generativeUI":case"recipe":case"mediaSpotlight":case"inlineImage":case"m365":case"file":case"computerUseFeedback":case"document":case"personalArtifacts":case"flashcard":case"consent":case"consentV2":case"newsCarousel":case"navigation":case"mediaCarousel":case"edge-passwords":case"powerPointCreator":case"federatedLogin":case"form-fill":return"";default:return""}}function E6e(e,t){const n=c.useRef(void 0);c.useEffect(()=>{var o;if(t)return;const s=e.at(-1);s&&s.author==="ai"&&s.id!==((o=n.current)==null?void 0:o.id)&&(x6e({content:s.content,announce:ho}),n.current=s)},[e,t])}function w6e(e){c.useEffect(()=>{if(e.current){const t=s=>{var r,a,l,u,d;if(s.target&&s.target instanceof Element&&s.target.closest('[data-formatless-copy="false"]'))return;const o=window.getSelection();if(o!=null&&o.rangeCount){let m=document.createElement("div");const f=o.getRangeAt(0),{startContainer:h,endContainer:g}=f;m.appendChild(f.cloneContents());const C=(r=h.parentElement)==null?void 0:r.closest("pre"),v=(a=g.parentElement)==null?void 0:a.closest("pre"),y=!!C&&!!v&&C===v,b=!!((l=h.parentElement)!=null&&l.closest("table"))&&!I6e(f),E=m.getElementsByTagName("*");for(const T of E)T.getAttribute("data-copy")==="false"?T.remove():(T.removeAttribute("style"),T.removeAttribute("class"),T.removeAttribute("initial"),T.removeAttribute("animate"),T.removeAttribute("variants"),T.removeAttribute("custom"));if(y){const T=document.createElement("pre");T.appendChild(m),m=T}if(b){const T=document.createElement("table"),A=Array.from(m.children);for(const k of A)T.appendChild(k);m=T}m.style.position="absolute",m.style.left="-9999px",document.body.appendChild(m);const S=window.getSelection(),I=document.createRange();I.selectNodeContents(m),S==null||S.removeAllRanges(),S==null||S.addRange(I);const _=(S==null?void 0:S.toString())??"";S==null||S.removeAllRanges(),S==null||S.addRange(f),document.body.removeChild(m),m.removeAttribute("style"),(u=s.clipboardData)==null||u.setData("text/plain",_),(d=s.clipboardData)==null||d.setData("text/html",y||b?m.outerHTML:m.innerHTML)}s.preventDefault()},n=e.current;return n.addEventListener("copy",t),()=>{n.removeEventListener("copy",t)}}return()=>{}},[e])}function I6e(e){var r,a,l,u;const{startContainer:t,endContainer:n}=e,s=((r=t.parentElement)==null?void 0:r.closest("td"))??((a=t.parentElement)==null?void 0:a.closest("th")),o=((l=n.parentElement)==null?void 0:l.closest("td"))??((u=n.parentElement)==null?void 0:u.closest("th"));return!!(s&&o&&s===o)}function _6e(){const e=gt({breakpoint:"lg"}),t=gt({breakpoint:"xl"}),n=gt({breakpoint:"2xl"}),s=C3(),r=!!yC();return e||s&&t||r&&n}const T6e=100,G9=.3,A6e=2*Q7,k6e="bottom-[60px] sm:bottom-[120px] h-[50px]",M6e="min-h-[60px] sm:min-h-[120px]",N6e="min-h-[calc(100dvh-60px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-120px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",R6e="min-h-[calc(100dvh-48px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-48px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",P6e="min-h-[calc(100dvh-80px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-80px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",L6e="bottom-[var(--character-component-height)] h-[50px]",O6e="min-h-[calc(100dvh-var(--character-component-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))]";function D6e(e,t,n,s,o){const r=Ns(),a=c.useMemo(()=>({initial:{opacity:0,y:T6e},animate:{opacity:1,y:0,transition:{duration:.4,y:{duration:G9}}},exit:{opacity:0,y:-100,transition:{duration:.2,y:{duration:G9}}},onAnimationStart:S=>{typeof S=="object"&&!Array.isArray(S)&&S.opacity===1&&e()}}),[e]),l=n?L6e:k6e,u=n?`min-h-[${s}px]`:M6e,{highlighted:d,backstage:m}=U6e(o),f=F6e(n,m,d),[h,g]=c.useState(!1),C=c.useRef(null),v=c.useCallback(S=>{C.current=S,S&&g(!0)},[]),{scrollYProgress:y}=Xj({target:h?C:void 0,container:t,offset:["end start","start start"]});Ir(()=>{requestAnimationFrame(()=>{var S;(S=t.current)==null||S.dispatchEvent(new Event("scroll"))})},{},t.current);const b=el(y,[A6e/100,1],[0,1]);return{highlightedMessagesProps:a,opacity:r?b:y,sentinelRef:v,sentinelClasses:l,backstageClasses:u,highlightedClasses:f,highlighted:d,backstage:m}}function j6e(e){const t=ER(e);if(!t)return[];const n=e.at(-2),s=[];Ei(n)&&s.push(n),Ei(t)&&s.push(t);const o=e.at(-3);if((o==null?void 0:o.author)==="human"&&s.length===2)return[o,...s];const r=t.author==="human",a=!r&&(n==null?void 0:n.author)==="ai";return r||a?[t]:e.slice(-2)}function ER(e){return e.at(-1)}function U6e(e){const t=j6e(e),n=e.slice(0,-t.length);return{highlighted:t,backstage:n}}function F6e(e,t,n){return e?O6e:re.instance().config().smallAnochorTopWithoutHeader&&n.length>0?t.length===0?P6e:R6e:N6e}const B6e=typeof document<"u"?c.useLayoutEffect:c.useEffect;function V6e(e,t){const n=c.useRef(0),s=c.useRef(0);B6e(()=>{const o=t.current;if(!o)return;const r=o.scrollHeight-n.current,a=o.scrollTop===0;r>0&&a?o.scrollTop=r:o.scrollTop=s.current,n.current=o.scrollHeight,s.current=o.scrollTop},[e]),c.useEffect(()=>{const{current:o}=t,r=()=>{o&&(s.current=o.scrollTop)};return o==null||o.addEventListener("scroll",r),()=>o==null?void 0:o.removeEventListener("scroll",r)},[t])}function H6e(e,t){const n=Gt("kill-review-prompt"),o=!!re.instance().config().promptForReviews&&!n,r=se(bo),a=c.useCallback(async u=>{if(!o)return;const{shown:d}=await rJ.run({});if(d)return;const f=KCe()>=HCe,h=u>BCe;(f||h)&&!ZCe()&&(r("prompt-review"),D.trackEvent({name:"system",data:{eventName:"inAppSurveyPopUp",eventInfo_triggerType:h?"longChat":"activeDays"}}))},[o,r]),l=c.useRef(!1);c.useEffect(()=>{t&&(l.current=!0)},[t]),c.useEffect(()=>{t||!l.current||a(e)},[e,t,a])}function z6e(e){return c.useCallback(({behavior:n="smooth",delay:s=0})=>{const o=()=>{e.current&&e.current.scrollTo({top:e.current.scrollHeight,behavior:n})};s===0?o():setTimeout(o,s)},[e])}const G6e=.1;function W6e(e){const{chatRef:t,hasMessages:n=!0}=e,s=c.useRef(null),[o,r]=c.useState(!1),a=c.useRef(n);a.current=n;const l=c.useCallback(u=>{const d=u[0];d&&d.boundingClientRect.width!==0&&r(!d.isIntersecting&&a.current)},[]);return c.useEffect(()=>{if(!t.current||!s.current)return()=>{};const u=new IntersectionObserver(l,{root:t.current,threshold:G6e});return u.observe(s.current),()=>{u.disconnect()}},[t,l]),c.useEffect(()=>{n||r(!1)},[n]),{bottomRef:s,shouldShowScrollToBottomButton:o}}function $6e(){const e=M(qd),t=hl(vt),n=M(g1);c.useEffect(()=>{t(s=>{if(n){const o=s.get(n);o&&(o.characterId=e)}})},[n,e,t])}async function q6e(e,t){const n=fC(t);if(n){const{message:s,part:o}=n;if(!o.task)return;const r=await ks();r.setConversationIdByMessageId({messageId:s.id,conversationId:e}),r.setMessageIdByTaskId({taskId:o.task.id,messageId:s.id})}}const K6e=window.requestIdleCallback?window.requestIdleCallback:function(t){const n=Date.now();return setTimeout(()=>{t({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-n))}})},1)},Z6e=1.5,W9="inline-block w-full space-y-8",iy="max-w-chat w-full";function Y6e({children:e,chatRef:t,historyLength:n}){return V6e(n,t),e}function Bf(e){var Os,Ra;const{className:t,conversationContainerClassName:n="mb-[var(--composer-container-height)]",bottomButtonClassName:s="bottom-[calc(var(--composer-container-height)+1rem)]",customLaunchGreeting:o,customBottomDisclaimer:r,enableHighlightedClasses:a=!0,enableBackstageClasses:l=!0,disableStickyHeader:u=!1,disableSuggestions:d=!1,disableScrollToBottomButton:m=!1,reactionsToAllow:f,CustomBottomContent:h}=e,{loader:g}=KN(),C=M(Ea),v=M(hn),y=M(zv),b=M(XE),E=M(R1),S=gt({breakpoint:"sm"}),I=W("sticky-conversation-mode"),_=W("persist-conversation-mode"),T=M(Hv),k=om()&&y!==null,N=!pm(),P=!Gt("kill-coco-isolation");c.useEffect(()=>{if(I){let Pt=vn();if(_?Pt=wt(kd,ba)??Pt:Pt=Dn("sticky-conversation-mode")??Pt,P){const Yo=Pt;Pt=EZ(Pt,b);const Pa=Yo!==Pt&&Pt==="coco",Ds=mX();Pa&&Ds&&(P1(null),rd())}Zt(Pt)}},[I,_,b,P]);const V=v==null?void 0:v.sideBySideComparisonId,U=!!V,[K,Q]=c.useState(0);$6e();const Z=c.useRef(null),Y=z6e(Z);w6e(Z);const{isContextualShoppingCardExpanded:X,showShoppingCardInNewChat:$}=Ji();v3({scrollableRef:Z,source:"chat",customData:{conversationId:v==null?void 0:v.id,...X&&{isContextualShoppingCardExpanded:X}}});const[ee]=F3({...g,disabled:!!g.error}),{highlightedMessagesProps:te,sentinelRef:G,sentinelClasses:ie,backstageClasses:xe,highlightedClasses:ce,opacity:ae,highlighted:Se,backstage:Me}=D6e(()=>Y({behavior:"instant",delay:re.instance().config().scrollToBottomDelay}),Z,k,K,C),Oe=el(ae,Pt=>Pt<.5?"none":"auto"),oe=()=>Y({behavior:"smooth"}),{bottomRef:le,shouldShowScrollToBottomButton:J}=W6e({chatRef:Z,hasMessages:C.length>0&&!m}),Pe=M(v1).get((v==null?void 0:v.id)??""),qe=!!(Pe!=null&&Pe.size),Xe=Pe==null?void 0:Pe.values().next().value,et=M(bl);c.useEffect(()=>{v!=null&&v.id&&(q6e(v.id,C),K6e(()=>{B(()=>import("./ai-message-CQb3lkIT.js").then(Pt=>Pt.a),__vite__mapDeps([437,1,414,438,439,440,435,441,407,366,442,443,444,445,396,446,394]))}))},[v==null?void 0:v.id,C]),E6e(C,T);const fe=ER(Se),Ee=(fe==null?void 0:fe.author)==="human"||T,Ae=!!M(xu),Ye=M(jc),De=c.useMemo(()=>{if((fe==null?void 0:fe.author)!=="ai")return!1;const Pt=fe.content.at(-1);return(Pt==null?void 0:Pt.type)==="image"&&Pt.status==="generating"},[fe]),Ke=Ee&&!qe||Ae||Ye,{disableMultiturn:Be}=re.instance().config(),ve=(Ra=(Os=re.instance().config().styleOverrides)==null?void 0:Os.width)==null?void 0:Ra.chat;H6e(C.length,Ee);const ze=Ns(),yt=Qi(),Ne=!k&&!S&&yt,Ie=M(Md),Ze=l&&!($&&!S)&&!Ie,{isMediaViewerOpen:at}=ka(),Te=W("chat-refactor-max-width"),dt=Te?ry():void 0,At=Te?"w-full":iy,Bt=!T,Rs=!d&&!U,{showLaunchGreeting:Xs}=Tm(),Ps=Xs&&!k,Ko=!!re.instance().config().smallScreenShowTopDisclaimerAfterSendingMessage?!yt:!Ps,rs=k||S&&Ko,zl=Ke&&!U&&!De,Io=W("chat-header-title"),nc=_6e(),sc=M(Hn)==="side-by-side",Jt=ut(),Ls=se(Hn),Nn=sc&&!S&&Jt.startsWith("/chats"),Zo=c.useCallback(()=>{Ls("detail-only")},[Ls]),Na=i.jsx(ge.div,{initial:Fe,animate:nt,exit:{transition:{duration:0},...Fe},transition:pn,children:i.jsx(ne,{title:z("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",onClick:Zo,testId:"collapse-chat-button",children:i.jsx(ay,{className:"size-5"})})}),gs=Se[0],oc=gs==null?void 0:gs.createdAt,_o=Me,Gn=U?Pee(Se,V):Se;return i.jsx(O4e,{children:i.jsxs("div",{className:F("@container/chat","scrollbar-stable t-custom-scrollbar flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-secondary-panel-slim lg:min-w-secondary-panel",re.instance().config().showScrollbarOnHover&&"scrollbar-container",at&&!Ie&&"invisible",t),ref:Z,"data-testid":"chat-page",children:[!u&&(Io?i.jsx(L4e,{}):i.jsx(xh,{hideBackground:!nc&&!Nn,start:Nn&&Na})),k&&i.jsx(E4e,{animatingMessageId:Xe,isStreamingMessage:Ee,displayedCharacterId:y,setCharacterComponentHeight:Q}),i.jsx(Tr.Motion,{circular:!1,tabbable:!0,initial:N?"start":!1,animate:"end",variants:{start:Fe,end:{...nt,transition:{duration:.2,delay:.2}}},className:F(n,"grow",!Te&&(gd("pageContainer")??"px-6"),At,ve),transition:pn,"data-content":"conversation","data-copy":"false",children:i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:i.jsxs(Y6e,{chatRef:Z,historyLength:C.length,children:[g.hasNextPage&&i.jsx("div",{ref:ee}),i.jsxs(ge.div,{className:F("relative",ze||!u?"pt-10":"pt-6",_o.length>0&&W9,Ze&&xe),style:{opacity:C.length>0?ae:0,pointerEvents:Oe},children:[i.jsx("div",{className:F("absolute -z-10 w-full",ie),ref:G}),i.jsx(H9,{chatItemClasses:dt,currentConversation:v,isStreamingComplete:Bt,messages:_o,hasNextPage:g.hasNextPage,reactionsToAllow:f,isNewChat:!1})]}),i.jsxs("div",{className:F(a&&ce,"flex flex-col"),"data-testid":"highlighted-chats",children:[i.jsx(pt,{mode:"wait",initial:!0,children:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:dt,children:i.jsxs("div",{className:F("flex w-full flex-col gap-2",Ps&&"pb-2"),children:[Ps&&o,rs&&i.jsx(SR,{})]})}),Se.length>0&&i.jsxs(ge.div,{className:F(Be?"pb-24":"pb-6",W9),initial:te.initial,animate:te.animate,exit:te.exit,onAnimationStart:Pt=>{const Yo=ae.get()<1;((gs==null?void 0:gs.author)==="human"||Yo)&&te.onAnimationStart(Pt)},children:[i.jsx(H9,{chatItemClasses:dt,currentConversation:v,enableLastMessageCheck:!0,isStreamingComplete:Bt,messages:Gn,previousMessageInit:_o[_o.length-1]??void 0,reactionsToAllow:f,shouldAnimate:qe,isNewChat:!0}),i.jsx(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:zl&&i.jsx(uR,{delay:Z6e,className:dt})}),i.jsx(ln,{children:et&&i.jsx(C4e,{className:dt})}),i.jsx(ln,{children:E&&E.visible&&i.jsx(p4e,{className:dt})})]},oc)]})}),Rs&&i.jsx(p6e,{mostRecentMessageId:fe==null?void 0:fe.id,className:dt}),i.jsx("div",{ref:le,style:{height:0,overflow:"hidden"}}),i.jsx(m6e,{shouldShowScrollToBottomButton:J,onClick:oe,bottomButtonClass:s}),h&&i.jsx(h,{isVisible:!J&&!Ke})]})]})})})}),Ne&&r]})})}const Mke=Object.freeze(Object.defineProperty({__proto__:null,CHAT_WIDTH_CLASSES:iy,default:Bf},Symbol.toStringTag,{value:"Module"}));function Q6e(e){const{customBottomDisclaimer:t}=e,n=W("async-disclaimer-text"),s=dC(),[o,r]=c.useState(!n);return c.useEffect(()=>{s&&s.length>0&&r(!0)},[s]),t||(o?i.jsx(ln,{className:"absolute bottom-0 flex max-w-chat justify-center px-6 text-center","data-testid":"bottom-disclaimer",children:i.jsx(s5,{shouldUpdateNewConversationCount:!0})}):null)}function J6e(){return i.jsx("div",{"aria-hidden":!0,className:"flex size-full flex-col items-center justify-center"})}const xc="absolute animate-dot-ellipsis size-2 rounded-full bg-background-450";function X6e(e){const{className:t}=e;return i.jsxs("div",{className:F("flex items-center justify-center gap-3",t),children:[i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:xc,style:{animationDelay:"0ms"}}),i.jsx("div",{className:xc,style:{animationDelay:"30ms"}})]}),i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:xc,style:{animationDelay:"100ms"}}),i.jsx("div",{className:xc,style:{animationDelay:"130ms"}})]}),i.jsxs("div",{className:"relative flex items-center justify-center",children:[i.jsx("div",{className:xc,style:{animationDelay:"200ms"}}),i.jsx("div",{className:xc,style:{animationDelay:"230ms"}})]})]})}function exe(e){const{text:t,staggerChildren:n=.018,delayChildren:s=0,initialOpacity:o=0,className:r}=e;return i.jsx(ge.div,{variants:{show:{transition:{staggerChildren:n,delayChildren:s}}},initial:"hidden",animate:"show",className:r,children:T3(t).map((a,l)=>i.jsx(ge.span,{variants:{hidden:{opacity:o},show:{opacity:1,transition:{duration:pk}}},children:a},l))})}const txe={sm:"text-lg",md:"text-2xl",lg:"text-4xl"},$9=25;function nxe(e){const{subheading:t}=e;return i.jsx("h2",{className:"mt-4 text-foreground-800 text-base",children:t})}function sxe(e){const{className:t,fontSize:n="lg"}=e,s=M(th),o=M(kw),{t:r}=q(),{greetingKey:a,widgetGreeting:l,widgetSubheading:u}=VT(),{isCentralComposerEnabled:d,isGreetingCentered:m}=Tm(),f=ey(),h=F3e(),{showShoppingCardInNewChat:g}=Ji(),C=o&&o.length>$9?`${o.slice(0,$9)}`:o,v=a?r(a,{name:C}):"";return f?i.jsx("div",{className:F(t,"flex w-full flex-col items-start justify-start gap-2 sm:mb-6 sm:h-[100px] sm:justify-end"),children:i.jsx("div",{className:"flex justify-start sm:min-h-8",children:!h||s?i.jsx("div",{className:"ms-2 mt-6 flex size-full sm:mt-0",children:i.jsx(X6e,{className:"flex-1"})}):i.jsxs("div",{className:"flex flex-col items-start gap-2",children:[i.jsxs(ln,{className:"flex items-center gap-2 text-foreground-550 dark:text-foreground-750",id:l??v,children:[i.jsx("p",{className:"text-sm-strong",children:r("common.copilotText")}),i.jsx("p",{className:"text-sm",children:Xn(new Date,"h:mm aa")})]}),i.jsx("h1",{className:"text-xl",children:i.jsx(wR,{text:l??v},l)})]})})}):i.jsxs("div",{className:F("flex w-full flex-col items-start justify-start sm:justify-end",!g&&"sm:mb-8 sm:h-[100px]",m&&"sm:items-center",!d&&"sm:justify-start",txe[n],u&&"sm:mb-4",t),"data-testid":"launch-greeting",children:[i.jsx("h1",{children:v}),u&&i.jsx(nxe,{subheading:u})]})}const wR=c.memo(e=>{const{text:t}=e;return i.jsx(exe,{text:t,staggerChildren:.02,delayChildren:.1},t)});wR.displayName="AnimatedTextMemo";function oxe(e){const{customLaunchGreeting:t,className:n}=e;return t||i.jsx(sxe,{className:n,fontSize:"md"})}function rxe({characterId:e,className:t}){const n=M(hn),[s,o]=Ue(ew),{t:r}=q();return c.useEffect(()=>{(n==null?void 0:n.isNew)===!1&&o(!1)},[o,n==null?void 0:n.isNew]),n!=null&&n.isNew?i.jsxs(ln,{id:"character-disclaimer",mode:"wait",className:ue("pb-2 text-foreground-550/90 text-sm dark:text-foreground-750/60",t),children:[r("characterAnimation.characterDisclaimerTextV2",{characterName:vZ(e,r)})," ",s&&i.jsx(mn,{i18nKey:"characterAnimation.characterSettingDisclaimerText",components:{settingsLink:i.jsx(Ol,{pages:["menu","character-options"],className:"text-foreground-550/90 underline text-sm dark:text-foreground-750/60"})}})]}):null}function axe(){return i.jsx(O1,{size:"sm",stroke:!0,className:"flex h-[172px] w-[324px] cursor-pointer flex-col p-4",children:i.jsx("div",{className:"flex flex-1",children:i.jsx(Vp,{className:"size-full",style:{clipPath:"var(--clip-path-squircle-36)"}})})})}const ixe=c.lazy(()=>B(()=>import("./widget-section-IpSkEp8R.js"),__vite__mapDeps([447,1])).then(e=>({default:e.default}))),cxe=c.lazy(()=>B(()=>import("./shopping-starter-card-DfhHz2oX.js"),__vite__mapDeps([448,1,449,328,324,325,309,310,450,326,380,451,452,453,327,454,323,455,330,439,456,457,458,459,460,461,462,463,342,464])).then(e=>({default:e.ShoppingStarterCard})));function lxe(e){const{customLaunchGreeting:t,chatItemClasses:n,postContent:s}=e,{isCentralComposerEnabled:o,isWidgetSectionEnabled:r,isAppearanceOnHomeEnabled:a,isGreetingCentered:l,showLaunchGreeting:u}=Tm(),d=gt({breakpoint:"sm"}),m=Fp({breakpoint:"h760"}),f=Fp({breakpoint:"h600"}),h=W("appr-home-toggle"),g=M(VY),C=a&&(!h||!g)&&!f,v=om(),y=Qi(),b=M(zv),E=!pm(),S=v&&b!==null,I=M(lw),{showShoppingCardInNewChat:_}=Ji(),T=u&&!S,k=!!re.instance().config().smallScreenShowTopDisclaimerAfterSendingMessage?!y:!T,N=S||d&&k,V=Ys()==="computerUse",U=r&&!V&&(!m||d),K=T&&"pb-2",Q=c.useMemo(()=>c.lazy(()=>a?B(()=>import("./appearance-chat-BpKzOyDL.js"),__vite__mapDeps([465,1,466])).then(Y=>({default:Y.AppearanceChat})):Promise.resolve({default:()=>null})),[a]),Z=i.jsxs(ln,{delay:.2,initial:E?"initial":!1,className:F(o?"mt-2 flex flex-col items-start text-pretty pe-0 sm:absolute sm:inset-x-0 sm:inset-y-0 sm:mx-auto sm:mt-0 sm:max-w-chat sm:px-4 sm:pb-[calc(var(--composer-container-height))]":K,_&&"mx-auto mt-2 max-w-sm sm:relative sm:max-w-md sm:px-4",C&&d&&"grow",U&&"sm:pb-[calc(var(--composer-container-height)+42px)]"),children:[C&&o&&i.jsx("div",{className:F("order-2 flex w-full flex-col items-center justify-center sm:absolute sm:h-[calc(50%-60px-var(--composer-container-height)/2)]",d&&"grow"),children:i.jsx(c.Suspense,{fallback:i.jsx(J6e,{}),children:i.jsx(Q,{voiceAppearanceId:wa},"appearance-chat-home")})}),i.jsxs("div",{className:"order-1 flex w-full flex-col gap-2 sm:top-0 sm:h-full sm:justify-center",children:[T&&i.jsx(oxe,{customLaunchGreeting:t,className:F(l?"sm:text-center":"sm:ps-2")}),S&&i.jsx(rxe,{characterId:b}),_&&!I&&i.jsx(c.Suspense,{fallback:i.jsx(axe,{}),children:i.jsx(cxe,{})}),N&&i.jsx(SR,{}),U&&i.jsx(ixe,{onWidgetClick:_3,className:"mx-auto mt-4 max-w-sm px-2 pb-8 sm:mx-0 sm:mt-0 sm:h-[220px] sm:w-full sm:max-w-none sm:px-4 sm:pb-0"}),s]})]},"chat-welcome");return n?i.jsx("div",{className:n,children:Z}):Z}function uxe(e){var y,b;const{className:t,conversationContainerClassName:n,customLaunchGreeting:s,customBottomDisclaimer:o,disableStickyHeader:r=!1,postWelcomeContent:a}=e;u4e(),d4e();const l=W("chat-refactor-max-width"),u=gt({breakpoint:"sm"}),d=Ns(),m=!pm(),{showShoppingCardInNewChat:f}=Ji(),h=!u,g=(b=(y=re.instance().config().styleOverrides)==null?void 0:y.width)==null?void 0:b.chat,C=l?ry():void 0,v=l?"w-full":iy;return i.jsxs("div",{className:F("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-secondary-panel-slim lg:min-w-secondary-panel",re.instance().config().showScrollbarOnHover&&"scrollbar-container",t),"data-testid":"landing-page",children:[!r&&i.jsx(xh,{sectionHeight:"64-legacy"}),i.jsx(Tr.Motion,{circular:!1,tabbable:!0,initial:m?"start":!1,animate:"end",variants:{start:Fe,end:{...nt,transition:{duration:.2,delay:.2}}},className:F(n,"grow",!l&&(gd("pageContainer")??"px-6"),v,g),layout:"position",transition:pn,children:i.jsxs(c.Suspense,{fallback:i.jsx("div",{"aria-hidden":!0}),children:[i.jsx("div",{className:F("relative",d||!r?"pt-10":"pt-6","min-h-[60px]",!f&&"sm:min-h-[120px]")}),i.jsx(pt,{mode:"wait",initial:!1,children:i.jsx(lxe,{customLaunchGreeting:s,chatItemClasses:C,postContent:a})})]})}),h&&i.jsx(Q6e,{customBottomDisclaimer:o})]})}function dxe(e){const{className:t,conversationContainerClassName:n="mb-[var(--composer-container-height)]",customLaunchGreeting:s,customBottomDisclaimer:o,disableStickyHeader:r=!1,postWelcomeContent:a}=e;return i.jsxs(fd,{className:"size-full overflow-hidden",children:[i.jsxs(sS,{children:[i.jsx(uxe,{className:t,conversationContainerClassName:n,customLaunchGreeting:s,customBottomDisclaimer:o,disableStickyHeader:r,postWelcomeContent:a}),i.jsx(zp,{})]}),i.jsx(Hp,{})]})}const mxe=Qe("/")({component:dxe,beforeLoad:()=>({customLayout:!0})}),fxe=Qe("/projects/$projectId")({beforeLoad:()=>({customLayout:!0})}),pxe=Qe("/partners/feedback")({beforeLoad:()=>({standalonePage:!0})}),hxe=Qe("/pages/$pageId")({beforeLoad:()=>({customLayout:!0})});function gxe(e){const{text:t,shouldAnimate:n,title:s}=e,o=Wk(!1),[r,a]=c.useState(0),l=c.useMemo(()=>{const u=o(),d=A3(t);return Cd({contentBlocks:d,delay:u,forceRender:()=>{a(r+1)}})},[o,r,t]);return i.jsxs(i.Fragment,{children:[s&&i.jsx("div",{className:"mb-1 text-foreground-800 text-sm-strong",children:s}),i.jsx("div",{className:"flex flex-col gap-3 text-foreground-700 text-sm",children:i.jsx(vd,{blocks:l,shouldAnimate:n})})]})}const IR=e=>c.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M12.0016 1.99902C17.5253 1.99902 22.0031 6.47687 22.0031 12.0006C22.0031 17.5243 17.5253 22.0021 12.0016 22.0021C6.47785 22.0021 2 17.5243 2 12.0006C2 6.47687 6.47785 1.99902 12.0016 1.99902ZM12.0016 3.49902C7.30627 3.49902 3.5 7.3053 3.5 12.0006C3.5 16.6959 7.30627 20.5021 12.0016 20.5021C16.6968 20.5021 20.5031 16.6959 20.5031 12.0006C20.5031 7.3053 16.6968 3.49902 12.0016 3.49902ZM12 10.5C12.4142 10.5 12.75 10.8358 12.75 11.25V16.25C12.75 16.6642 12.4142 17 12 17C11.5858 17 11.25 16.6642 11.25 16.25V11.25C11.25 10.8358 11.5858 10.5 12 10.5ZM12 9C12.5523 9 13 8.55229 13 8C13 7.44772 12.5523 7 12 7C11.4477 7 11 7.44772 11 8C11 8.55229 11.4477 9 12 9Z"})),Nke=Object.freeze(Object.defineProperty({__proto__:null,default:IR},Symbol.toStringTag,{value:"Module"}));function vxe(e){const{status:t}=e;let n=i.jsx("div",{className:"size-5 pe-1","aria-hidden":"true"});switch(t){case"running":n=i.jsx(it,{className:"size-5"});break;case"failed":n=i.jsx(IR,{className:"size-5"});break;case"completed":n=i.jsx(ih,{className:"size-5"});break}return i.jsx("div",{className:"ps-0.5",children:n})}function Cxe(e){const{items:t,shouldAnimate:n,isComplete:s}=e,{t:o}=q();return i.jsxs("div",{className:"flex flex-col gap-5 ps-2",children:[t==null?void 0:t.map((r,a)=>i.jsx("div",{className:"flex flex-col",children:i.jsxs(q9,{isLastStep:!1,shouldAnimate:n,stepType:r.type,stepStatus:r.type==="activity"?r.activity.status:void 0,children:[r.type==="chainOfThought"&&i.jsx(gxe,{title:r.title,text:r.text,shouldAnimate:n}),r.type==="activity"&&i.jsx(yxe,{activity:r.activity})]})},a)),s&&i.jsx(q9,{isLastStep:!0,shouldAnimate:n,children:i.jsx("div",{className:"text-foreground-700 text-sm",children:i.jsx("strong",{children:o("chat.chainOfThought.done")})})})]})}function yxe(e){const{activity:t}=e,n=W("ppt-generation");return i.jsx("div",{className:"flex flex-col gap-4 overflow-y-auto",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx("h3",{className:"text-sm",children:t.title}),n&&t.steps.length>0&&i.jsx("div",{className:"flex flex-col gap-2",children:t.steps.map((s,o)=>i.jsx("div",{className:"flex items-center gap-2 text-sm",children:i.jsx("span",{className:"text-foreground-700",children:s.title})},o))}),t.artifacts.map((s,o)=>i.jsx(Lk,{artifact:s},o))]})})}function bxe(e){return e?i.jsx(km,{className:"relative bottom-0.5 size-4 text-foreground-900"}):i.jsx("div",{className:"size-[9px] rounded-full border-[4.5px] border-foreground-800 bg-foreground-800"})}function q9(e){const{isLastStep:t,shouldAnimate:n,children:s,stepType:o="chainOfThought",stepStatus:r}=e,a=o==="activity"&&r&&r!=="completed";return i.jsxs(ge.div,{className:"relative grid grid-cols-[auto,1fr] items-start gap-4",initial:n?"start":"end",animate:"end",variants:{start:Fe,end:l=>({...nt,transition:{delay:l,ease:"easeInOut",duration:1.2}})},children:[i.jsxs("div",{className:F("relative flex h-full w-2 flex-col items-center",t?"mt-1":"mt-1.5"),children:[a?i.jsx(vxe,{status:r}):bxe(t),!t&&i.jsx("div",{className:F("absolute bottom-0 border-e-[1px] border-foreground-800/40",a?"top-6 ":"top-4")})]}),i.jsx("div",{className:"min-w-0 flex-1",children:s})]})}function xxe(e){const{chainOfThoughtItems:t,isComplete:n}=e;return i.jsx("div",{className:"flex flex-col p-4",children:i.jsx(ehe,{config:{shouldCollapseCode:!0},children:i.jsx(Cxe,{items:t,shouldAnimate:!1,isComplete:n})})})}const Sxe=F("relative rounded-3xl p-4 contrast-more:border-2","shadow-xs transition-shadow safe-hover:shadow-sm focus-visible:shadow-sm","bg-background-100 dark:bg-background-200","safe-hover:before:absolute safe-hover:before:inset-0 safe-hover:before:rounded-3xl safe-hover:before:bg-white/50 dark:safe-hover:before:bg-white/2","focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-stroke-900");function _R(e){const{title:t,name:n,iconUrl:s,url:o,mode:r,onClick:a,className:l,variant:u,snippet:d}=e,m=lo(o),f=u==="panel"||u==="modal";return i.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",onClick:a,className:F("flex w-full min-w-0 cursor-pointer items-start",u==="modal"?"group/modal-variant":Sxe,l),children:i.jsxs("div",{className:"relative flex min-w-0 grow flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex shrink-0 items-center justify-center rounded",children:s?i.jsx("div",{className:"size-4 rounded bg-white bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url('${s}')`}}):i.jsx(Im,{className:"size-4 text-foreground-650"})}),i.jsx("div",{className:"min-w-0 flex-1 overflow-hidden",children:i.jsx("p",{className:"truncate text-foreground-650 text-sm md:mt-0.5 md:text-xs",children:r==="research"?es(m):n})})]}),i.jsx("div",{className:"overflow-hidden text-foreground-900 text-sm-medium group-hover/modal-variant:underline group-focus-visible/modal-variant:underline",children:i.jsx("p",{className:F(u==="row"?"line-clamp-1":"line-clamp-2"),children:t})}),f&&d&&i.jsx("div",{className:"overflow-hidden text-foreground-800 text-sm md:text-xs",children:i.jsx("p",{className:"line-clamp-3",children:d})}),f&&i.jsx("div",{className:"overflow-hidden text-foreground-650 text-sm md:text-xs",children:i.jsx("p",{className:"truncate",children:o})})]})})}function TR(){un({page:"chat",element:"relatedResultsReferencePanelCard",scenario:"shown"})}function AR(e,t){ye({source:"relatedResultsReferencePanelCard",scenario:"openLink",destination:t,conversationId:e})}function Exe(e){ye({source:e,scenario:"switchTab"})}function wxe(e,t,n){D.trackEvent({name:"apiresponse",data:{eventName:"relatedResultsApiFailure",eventInfo_messageId:e,eventInfo_errorMessage:t,...n&&{eventInfo_errorCode:n}}})}function Ixe(e){D.trackEvent({name:"apiresponse",data:{eventName:"relatedResultsZeroResults",eventInfo_messageId:e}})}function _xe(e){const{section:t,label:n,selectedSection:s,onSectionChange:o}=e,r=()=>{Exe(t==="citations"?"citationsPanelTab":"relatedResultsReferencePanelTab"),o(t)};return i.jsx(ne,{title:n,color:s===t?"overlay-dimmed-inverted":"subtle-dimmed-inverted",outline:s===t?"none":"weak",size:"40-base",variant:"rect",onClick:r,children:n})}function Txe(e){const{sections:t,selectedSection:n,onSectionChange:s}=e,{t:o}=q(),r=a=>o(a==="citations"?"citationCards.references":"citationCards.relatedResults");return t.length>1&&n&&s?i.jsx("div",{className:"sticky top-0 z-10 flex items-center justify-start gap-2 bg-background-150 pb-3 dark:bg-background-250",children:t.map(a=>i.jsx(_xe,{section:a,label:r(a),selectedSection:n,onSectionChange:s},a))}):null}function Axe(e){const{citations:t,relatedResults:n,className:s,conversationId:o}=e,r=t.length>0,a=n.length>0,[l,u]=c.useState(r?"citations":"related");if(c.useEffect(()=>{a&&TR()},[a]),!r&&!a)return null;const d=[r?"citations":null,a?"related":null].filter(Boolean),m=l==="citations"?t:n;return i.jsxs("div",{className:F("flex flex-col px-2 pb-4",s),children:[i.jsx(Txe,{sections:d,selectedSection:l,onSectionChange:u}),i.jsx("div",{className:"flex flex-col gap-5 divide-y divide-foreground-250 dark:divide-foreground-350",children:m.map(({title:f,publisher:h,url:g,iconUrl:C,snippet:v})=>i.jsx("div",{className:"pt-5",children:i.jsx(_R,{title:f,name:h??es(g),url:g,iconUrl:C??void 0,className:"w-full",variant:"modal",snippet:v,onClick:l==="related"?()=>{AR(o,g)}:()=>{gk("panel",o,g)}})},`${l}-${g}`))})]})}function kxe(e){const{citations:t,relatedResults:n,className:s,conversationId:o}=e,{t:r}=q();if(c.useEffect(()=>{n.length>0&&TR()},[n.length]),t.length===0&&n.length===0)return null;const a=(u,d="citation")=>i.jsx("ul",{className:"flex list-none flex-col gap-4",role:"list",children:u.map(({title:m,publisher:f,url:h,iconUrl:g,snippet:C,index:v})=>i.jsx("li",{children:i.jsx(_R,{title:m,name:f??es(h),url:h,iconUrl:g??void 0,className:"w-full",variant:"panel",snippet:C,onClick:()=>{d==="relatedResult"?AR(o,h):gk("panel",o,h)}})},`${d}-${h}-${v}`))}),l=()=>i.jsx("div",{className:"pointer-events-none sticky top-0 z-20 mb-2 flex h-14 w-full justify-center px-10",children:i.jsx("div",{className:"flex size-full items-center justify-center bg-background-150 p-2",children:i.jsx("h3",{className:"truncate text-center text-foreground-800 text-sm",children:r("citationCards.relatedResults")})})});return i.jsxs("div",{className:F("flex flex-col gap-4 px-4 pb-4",s),children:[t.length>0&&i.jsx("div",{children:a(t,"citation")}),n.length>0&&i.jsxs("div",{children:[l(),a(n,"relatedResult")]})]})}async function Mxe(e,t){const n=`/messages/${e}/related-results`;return Ct(n,OH,{analytics:{anonymousPath:"/messages/{id}/related-results"},parseOptions:{safe:t==null?void 0:t.safe},onFailedRequest:s=>{wxe(e,s.statusText||"API request failed",s.status.toString())}}).then(s=>{const o=s.data;return o&&o.relatedResults.length===0&&Ixe(e),o})}function Nxe(e,t,n){return Ms({queryKey:["relatedResults",e,t],queryFn:async()=>{const s=await Mxe(e);return s==null?void 0:s.relatedResults},enabled:(n==null?void 0:n.enabled)??!!e,staleTime:5*60*1e3})}function Rxe(e){const{data:t,className:n,variant:s}=e,{conversationId:o,messageId:r,targetCitationIds:a}=t,l=M(vt),u=W("see-more-results"),d=l.get(o),m=c.useMemo(()=>d==null?void 0:d.history.find(v=>v.id===r&&v.author==="ai"),[d==null?void 0:d.history,r]),f=c.useMemo(()=>{const v=(m==null?void 0:m.content.filter(y=>y.type==="text").flatMap(y=>y.citations??[]))??[];return a&&a.length>0?v.filter(y=>a.includes(y.url)):v},[m,a]),h=Vv(d),{data:g=[]}=Nxe(r,o,{enabled:!!r&&(u||(m==null?void 0:m.mode)==="search")&&!h}),C=c.useMemo(()=>g.map((v,y)=>({index:(y+1).toString(),title:v.title,url:v.url,iconUrl:v.iconUrl??null,publisher:v.publisher??null,snippet:v.snippet??null})),[g]);return s==="modal"?i.jsx(Axe,{citations:f,relatedResults:C,className:n,conversationId:o}):i.jsx(kxe,{citations:f,relatedResults:C,className:n,conversationId:o})}const Pxe=Re([w(!0),w(!1)]);x({enabled:Pxe.optional()});async function Lxe(e,t){return(await Ct(`/healthcare/navigation/provider/${e}`,mH,{query:t,options:{method:"GET",headers:{"Content-Type":"application/json"}}})).data}function Oxe(e,t){const{data:n,isLoading:s,error:o,refetch:r}=Ms({queryKey:["healthcareProvider",e,JSON.stringify(t)],queryFn:()=>Lxe(e,t),enabled:!!e,retry:1});return{data:n,isLoading:s,error:o,refetch:r}}function Gp(e){const{title:t,subtitle:n,children:s}=e;return i.jsxs("section",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("h3",{className:"font-medium text-foreground-700 text-sm-strong",children:t}),n&&i.jsx("p",{className:"text-foreground-600 text-sm",children:n})]}),s]})}function Dxe(e){const{education:t}=e,{type:n,name:s,year:o}=t;if(!n&&!o)return i.jsx("span",{children:s});let r,a;return n&&o?(r="answerCards.educationLabelFull",a={type:n,name:s,year:o}):n?(r="answerCards.educationLabelNameAndType",a={type:n,name:s}):(r="answerCards.educationLabelNameAndYear",a={name:s,year:o}),i.jsx(mn,{i18nKey:r,values:a,components:{bold:i.jsx("strong",{})}})}function jxe(e){const{educations:t}=e,{t:n}=q();return!t||t.length===0?null:i.jsx(Gp,{title:n("answerCards.education"),children:i.jsx("div",{className:"rounded-2xl border-neutral-200 bg-background-300/20 p-4 dark:bg-background-650/5",children:i.jsx("ul",{className:"mt-0 space-y-2",children:t.map((s,o)=>i.jsx("li",{className:"list-none text-foreground-600 text-sm",children:i.jsx(Dxe,{education:s})},o))})})})}const Uxe=c.lazy(()=>B(()=>import("./typeahead-DLSbAaTY.js"),__vite__mapDeps([467,1])).then(e=>({default:e.Typeahead})));function Fxe(){return i.jsx("div",{className:"w-full rounded-2xl bg-black/5 p-4 text-sm dark:bg-background-450/25",children:i.jsx("div",{className:"h-5 w-48 animate-pulse rounded bg-foreground-550/20"})})}const y0=4;function Bxe(e){const{insurances:t}=e,{t:n}=q(),[s,o]=c.useState(null),[r,a]=c.useState(y0),l=c.useMemo(()=>{const S=new Set((t??[]).map(I=>I.carrierName).filter(Boolean));return Array.from(S).map(I=>({id:I,name:I})).sort((I,_)=>I.name.localeCompare(_.name))},[t]),u=c.useMemo(()=>({groups:[{items:l.map(S=>({id:S.id,displayString:S.name}))}]}),[l]),d=c.useMemo(()=>{const S=new Map;for(const I of l)S.set(I.id,I);return S},[l]),m=c.useCallback(S=>{o(S)},[]),f=c.useCallback(()=>{ye({source:"insuranceSearch",scenario:"sidePanel",destination:"focus",customData:JSON.stringify({cardType:"healthcare"})})},[]),h=c.useCallback(S=>{const I=d.get(S);I&&(ye({source:"insuranceSearch",scenario:"sidePanel",destination:"selection",customData:JSON.stringify({cardType:"healthcare",insurerName:I.name})}),m(I))},[d,m]),g=c.useCallback(S=>{const I=(s==null?void 0:s.id)===S.id;return i.jsxs("div",{className:"flex w-full items-center gap-1.5",children:[i.jsx("span",{children:S.displayString}),I&&i.jsx(km,{className:"size-5"})]})},[s==null?void 0:s.id]);if(!t)return null;if(l.length===0)return i.jsx(Gp,{title:n("answerCards.insuranceTitle"),subtitle:n("answerCards.insuranceSubtitle"),children:i.jsxs("div",{className:"flex flex-row items-center gap-1",children:[i.jsx(an,{className:"size-6 text-system-red-550"}),i.jsx("span",{children:n("answerCards.insuranceDoesNotAccept")})]})});const C=l.slice(0,r),v=l.length>r,y=r>y0,b=()=>{a(l.length)},E=()=>{a(y0)};return i.jsx(Gp,{title:n("answerCards.insuranceTitle"),subtitle:n("answerCards.insuranceSubtitle"),children:i.jsxs("div",{className:"mb-2 flex flex-col gap-4",children:[i.jsx(c.Suspense,{fallback:i.jsx(Fxe,{}),children:i.jsx(Uxe,{data:u,renderItem:g,onSelect:h,onFocus:f,placeholder:n("answerCards.insuranceSearchPlaceholder"),className:"w-full"})}),i.jsx(pt,{mode:"wait",children:s&&i.jsxs(ge.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.2,ease:"easeOut"},children:[i.jsx("div",{className:"font-medium text-foreground-700",children:n("answerCards.insuranceSelectionConfirmation",{insurerName:s.name})}),i.jsx("button",{type:"button",onClick:()=>o(null),className:"mt-2 text-foreground-450 underline transition-colors duration-200 text-sm hover:text-foreground-600",children:n("answerCards.insuranceClearSelection")})]},s.id)}),!s&&i.jsxs(i.Fragment,{children:[i.jsx("ul",{className:"ms-2 mt-0 space-y-2 ps-4",children:C.map(S=>i.jsx("li",{className:"list-disc text-foreground-600 text-sm",children:S.name},S.id))}),v&&i.jsx(ne,{size:"36-sm",color:"default",title:n("answerCards.insuranceViewAll",{count:l.length}),onClick:b,className:"font-ligatures-none w-full",children:n("answerCards.insuranceViewAll",{count:l.length})}),y&&i.jsx("button",{type:"button",onClick:E,className:"mb-1 text-center text-foreground-450 underline text-sm hover:text-foreground-600 focus:text-foreground-600 focus:outline-none",children:n("answerCards.showLess")})]})]})})}function K9(e){const t=e.trim();if(!t)return t;const n=t.match(/^(?:\+?1)?(\d{3})(\d{3})(\d{4})$/);return n?`(${n[1]}) ${n[2]}-${n[3]}`:t}function Rke(e,t,n){D.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:e,eventInfo_clickScenario:"healthcareInfoCard",eventInfo_conversationId:pe(je),eventInfo_messageId:t,eventInfo_customData:n}})}function Pke(e,t){return Ww(()=>{D.trackEvent({name:"system",data:{eventName:"healthcareInfoCardHover",eventInfo_customData:t,eventInfo_messageId:e,eventInfo_conversationId:pe(je)??""}})})}function Lke(e,t){return Ww(()=>{D.trackEvent({name:"system",data:{eventName:"healthcareEntityCardHover",eventInfo_messageId:e,eventInfo_conversationId:pe(je)??"",eventInfo_customData:t}})})}function cy(e){const{source:t,providerId:n,destination:s,scenario:o}=e,r=pe(je);ye({source:t,scenario:o,destination:s,conversationId:r??void 0,customData:JSON.stringify({cardType:"healthcare",...n&&{providerId:n}})})}function Oke(e){cy({source:"viewDetailsButton",providerId:e})}function Dke(e,t,n){const s=pe(je);D.trackEvent({name:"interaction",data:{eventName:"healthcareEntityCardScrolled",eventInfo_scrollDepth:e,eventInfo_scrollDepthMax:t,eventInfo_conversationId:s,eventInfo_messageId:n}})}function Vxe(e){const{location:t,providerId:n}=e,{address:s,phoneNumber:o}=t,{t:r}=q(),a=c.useCallback(()=>{o&&(cy({source:"phoneButton",providerId:n,scenario:"sidePanel"}),Eo(`tel:${o}`))},[n,o]);return i.jsxs("div",{className:"flex flex-col gap-1.5",children:[o&&i.jsx("p",{className:"text-foreground-600 text-sm",children:K9(o)}),s&&i.jsx("p",{className:"text-foreground-600 text-sm",children:s}),o&&i.jsx(ne,{size:"36-sm",color:"default",title:`${r("answerCards.call")} ${K9(o)}`,onClick:a,className:"mt-1.5 w-full",children:r("answerCards.call")})]})}function Hxe(e){const{url:t,providerName:n,providerId:s}=e,{t:o}=q(),r=c.useCallback(()=>{cy({source:"websiteButton",providerId:s,destination:t,scenario:"sidePanel"})},[s,t]);return i.jsx(ls,{href:t,title:o("answerCards.visitProviderWebsite"),className:"block truncate text-foreground-700 underline text-sm hover:no-underline","aria-label":o("answerCards.ariaLabel.websiteTo",{place:n}),onClick:r,children:o("answerCards.onlineProfile")})}function zxe(e){const{providerName:t,url:n,location:s,providerId:o,primarySpecialtyTitle:r}=e;return i.jsxs("header",{className:"flex flex-col gap-1.5",children:[i.jsx("h2",{className:"text-foreground-750 text-lg-strong",children:t}),r&&i.jsx("p",{className:"text-foreground-600 text-sm-strong",children:r}),n?i.jsx(Hxe,{providerName:t,url:n,providerId:o}):null,s?i.jsx(Vxe,{location:s,providerId:o}):null]})}const Gxe=4,Wxe=10;function $xe(e){const{items:t,initialCount:n=Gxe,showMoreInterval:s=Wxe,listLabel:o,viewMoreButtonLabel:r}=e,[a,l]=c.useState(n),{t:u}=q(),d=u("answerCards.viewMore"),m=u("answerCards.showLess"),f=Math.min(a,t.length),h=t.slice(0,f),g=t.length>f,C=f>n,v=c.useCallback(()=>{l(b=>b+s)},[s]),y=c.useCallback(()=>{l(n)},[n]);return t.length===0?null:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("ul",{className:"mt-0 space-y-1 ps-4",role:"list","aria-label":o,children:h.map(b=>i.jsx("li",{className:"list-disc text-foreground-600 text-sm",children:b},b))}),g&&i.jsx(ne,{size:"36-sm",color:"default",title:r,"aria-label":r,onClick:v,className:"w-full",children:d}),C&&i.jsx("button",{type:"button",onClick:y,className:"w-full text-center text-foreground-450 underline text-sm hover:text-foreground-600 focus:text-foreground-600 focus:outline-none",children:m})]})}function qxe(e){const{languages:t}=e,{t:n}=q();return!t||t.length===0?null:i.jsx(Gp,{title:n("answerCards.languages"),children:i.jsx($xe,{items:t,showMoreInterval:20,listLabel:n("answerCards.languages"),viewMoreButtonLabel:n("answerCards.viewMoreLanguages")})})}function Kxe(e){const{data:t}=e,{location:n,name:s,npi:o,professionalCredentials:r,primarySpecialtyTitle:a,url:l}=t,{uuid:u}=n,{t:d}=q(),{data:m,isLoading:f,error:h}=Oxe(o,{locationUuid:u}),{educations:g,insurances:C,languages:v,dataSourceUrl:y}=m??{},b=[s,...r??[]].filter(Boolean).join(", ");return i.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[i.jsx(zxe,{providerName:b,url:l,location:n,primarySpecialtyTitle:a}),h&&i.jsx("p",{className:"text-foreground-800 text-sm",children:i.jsx("span",{children:d("answerCards.errorLoadingProviderInfo")})}),f&&i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsx(Vp,{className:"h-5 w-full rounded-lg"}),i.jsx(Vp,{className:"h-20 w-full rounded-lg"})]}),!f&&!h&&i.jsxs(i.Fragment,{children:[i.jsx(jxe,{educations:g}),i.jsx(Bxe,{insurances:C}),i.jsx(qxe,{languages:v}),y&&i.jsx("div",{className:"border-t border-background-900/8 py-7 text-foreground-600 text-sm",children:i.jsx(mn,{i18nKey:"answerCards.healthcareInfoProviderLink",components:{faqLink:i.jsx(ml,{link:y})}})})]})]})}function Zxe(e){const{data:t,variant:n,className:s,messageId:o}=e,r=c.useId(),a=c.useRef(null);return i.jsx("div",{className:F("flex flex-col gap-3",n==="panel"&&"px-1",s),ref:a,children:t.map(([l,u],d)=>{const m=`${r}-source-${d}`;return i.jsxs("section",{className:"mb-4","aria-labelledby":m,children:[i.jsx("div",{id:m,className:F("px-4 pb-4 text-foreground-600 text-sm-medium",n==="modal"&&"mt-3"),children:i.jsx(fM,{source:l,messageId:o})}),i.jsx("ul",{"aria-labelledby":m,role:"list",className:"m-0 flex list-none flex-col gap-1 p-0",children:u.map(f=>i.jsx("li",{children:i.jsx(dM,{artifact:f,portalContainerRef:a,showActions:!0,messageId:o})},f.id))})]},`${l}-${d}`)})})}const Yxe=c.lazy(()=>B(()=>import("./product-details-modal-D3CCB-kI.js"),__vite__mapDeps([468,1,324,325,309,310,450,326,380,327,328,451,452,453,454,449,323,455,330,439,469,315,316,317,318,319,470,379,329,471,377,378,376,343,434,425])));function Qxe(e){const{data:{cardData:t,messageId:n}}=e;return i.jsx(c.Suspense,{fallback:null,children:i.jsx(Yxe,{cardData:t,messageId:n,onClose:()=>El(null),viewMode:"side-pane"})})}function Z9(e){var u,d;const{variant:t}=e,n=yC(),{t:s}=q(),o=gt({breakpoint:"lg"}),r=W("sidebar-narrow"),a=c.useRef(null);if(_N(),$i(a),v3({scrollableRef:a,source:(u=n==null?void 0:n.trackingOptions)==null?void 0:u.scrollSource,customData:(d=n==null?void 0:n.trackingOptions)==null?void 0:d.customData}),!n)return null;const l=()=>{var m;qt({source:"closeConversationPanelButton",messageId:(m=n.trackingOptions)==null?void 0:m.messageId}),El(null)};return t==="modal"?i.jsxs(Bo,{isOpen:!!n,onClose:l,className:"relative mx-6 h-conversation-modal w-conversation-modal max-w-conversation-modal p-4",trapFocus:!0,children:[i.jsx("div",{className:"pointer-events-none absolute start-0 w-full pb-1.5 pe-16 ps-6 pt-0.5",children:i.jsx(Y9,{panelData:n,variant:"modal"})}),i.jsx("div",{className:"t-custom-scrollbar h-full overflow-auto",children:i.jsx(Q9,{panelData:n,variant:"modal"})})]}):i.jsx(fd,{className:F("shrink-0",r&&o?"w-secondary-panel-slim":"w-secondary-panel"),children:i.jsxs("div",{ref:a,className:"t-custom-scrollbar size-full space-y-[60px] overflow-auto",tabIndex:-1,children:[i.jsx(xh,{start:i.jsx(ne,{title:s("common.closeSidePaneTitle"),color:"subtle-dimmed-inverted",size:"36-sm",variant:"square",onClick:l,tooltip:!0,children:i.jsx(an,{className:"size-5"})}),middle:i.jsx(Y9,{panelData:n,variant:"panel"})}),i.jsx(Q9,{panelData:n,variant:"panel"})]})})}function Y9(e){const{panelData:t,variant:n}=e,s=Jxe({panelData:t,variant:n});return i.jsx("h2",{className:"pointer-events-none block min-w-0 flex-1 truncate text-base-medium md:text-sm",children:s})}function Jxe(e){const{panelData:t,variant:n}=e,{t:s}=q();switch(t.type){case"devModeMessageInfo":return"Inspect message";case"chainOfThought":return s("chat.chainOfThought.title");case"citations":return n==="modal"?s("citationCards.allLinks","All links"):s("citationCards.references");case"shoppingProductDetails":return s("product.productDetailsPage.productDetails","Product details");case"healthcareEntity":return null;case"personalData":{const{data:o}=t;return s("connector.search.title",{resultsCount:o.reduce((a,[,l])=>a+l.length,0)})}case"__TODO___REPLACE_ME__":throw new Error("ConversationPanelTitle: Unimplemented type")}return null}function Q9(e){var s;const{panelData:t,variant:n}=e;switch(t.type){case"devModeMessageInfo":return CB;case"chainOfThought":return i.jsx(xxe,{chainOfThoughtItems:t.data.chainOfThoughtItems,isComplete:t.data.isComplete});case"citations":return i.jsx(Rxe,{data:t.data,variant:n});case"shoppingProductDetails":return i.jsx(Qxe,{data:t.data},t.data.cardData.offerId);case"healthcareEntity":return i.jsx(Kxe,{data:t.data.cardData},t.data.cardData.npi);case"personalData":return i.jsx(Zxe,{data:t.data,variant:n,messageId:(s=t.trackingOptions)==null?void 0:s.messageId});case"__TODO___REPLACE_ME__":throw new Error("ConversationPanelContent: Unimplemented type")}return null}const yf=8;function Xxe(e){const{children:t,isOpen:n,panelWidth:s}=e,o=qi(),r=c.useRef(!0),a=gt({breakpoint:"lg"}),l=W("sidebar-narrow");c.useEffect(()=>{r.current=!1},[]);const u=!r.current||!n;return i.jsx(ge.div,{className:"relative h-full overflow-hidden will-change-auto",initial:{width:n?s:0,marginLeft:n&&!o?yf:0,marginRight:n&&o?yf:0},animate:{width:n?s:0,marginLeft:n&&!o?yf:0,marginRight:n&&o?yf:0},transition:u?pn:{duration:0},children:n&&i.jsx(ge.div,{className:F("absolute end-0 size-full",l&&a?"sm:w-secondary-panel-slim":"sm:w-secondary-panel"),initial:u?"initial":"animate",animate:"animate",exit:"exit",variants:{initial:Fe,animate:nt,exit:Fe},transition:u?pn:{duration:0},children:t})})}function e9e(){const e=uh(),t=re.instance().config().supportsChatDetails;return e&&!!t}function t9e(){var n;const e=gt({breakpoint:"md"}),t=!!((n=re.instance().config().uiOverrides)!=null&&n.alwaysShowConversationPanelAsModal);return e||t}const n9e=JL("/chats/$conversationId");function s9e(e){const{disableStickyHeader:t,reactionsToAllow:n=t6e,CustomBottomContent:s}=e,{conversationId:o}=n9e.useParams(),r=e9e(),a=yC(),l=t9e(),u=se(je),d=M(hn),m=W("conversation-id-sync"),f=uh(),h=fR();if(c.useEffect(()=>{m&&u(o)},[o,u,m]),c.useEffect(()=>{d!=null&&d.group&&jn.connect()},[d==null?void 0:d.group]),c.useEffect(()=>()=>{El(null)},[]),r){const g=!!a,C=l?g&&i.jsx(Z9,{variant:"modal"}):i.jsx(Xxe,{isOpen:g,panelWidth:h,children:i.jsx(Z9,{variant:"panel"})});return i.jsxs(Jpe,{enabled:!0,children:[i.jsxs(fd,{className:"relative h-full flex-1 overflow-hidden will-change-auto",children:[i.jsx(Bf,{disableStickyHeader:t,reactionsToAllow:n,CustomBottomContent:s}),i.jsx(b5,{}),i.jsx(Hp,{}),i.jsx(zp,{})]}),C]})}return f?i.jsxs(fd,{className:"relative h-full flex-1 overflow-hidden will-change-auto",children:[i.jsx(Bf,{disableStickyHeader:t,reactionsToAllow:n,CustomBottomContent:s}),i.jsx(b5,{}),i.jsx(Hp,{}),i.jsx(zp,{})]}):i.jsx(Bf,{disableStickyHeader:t,reactionsToAllow:n})}const o9e=Qe("/chats/$conversationId")({component:s9e,beforeLoad:()=>({customLayout:!_t("kill-chat-layout-v2")})}),r9e=Qe("/shares/pages/$shareId")({beforeLoad:()=>({customLayout:!0})}),a9e=Qe("/chats_/$conversationId/talk")({beforeLoad:()=>({customLayout:!_t("kill-chat-layout-v2")})}),i9e=Qe("/projects_/$projectId/chats/$conversationId")({beforeLoad:()=>({customLayout:!0})}),c9e=Qe("/topic-selection")(),l9e=Qe("/shopping")(),u9e=Qe("/login")(),d9e=Qe("/library")(),m9e=Qe("/imagine")(),f9e=Qe("/gaming")(),p9e=Qe("/gallery")(),h9e=Qe("/daily")(),g9e=Qe("/agents")(),v9e=Qe("/referrals/")(),C9e=Qe("/labs_/")(),y9e=Qe("/fallrelease/")(),b9e=Qe("/subscription/start")(),x9e=Qe("/subscription/manage")(),S9e=Qe("/shares/$conversationId")(),E9e=Qe("/research/$researchId")(),w9e=Qe("/referrals/rules")(),I9e=Qe("/pro/subscribe")(),_9e=Qe("/memory/narrative")(),T9e=Qe("/imagine/$galleryItemId")(),A9e=Qe("/gallery/$galleryItemId")(),k9e=Qe("/e/sol")(),M9e=Qe("/e/so")(),N9e=Qe("/connector/callback")(),R9e=Qe("/chats/private")(),P9e=Qe("/campaigns/$campaignId")(),L9e=Qe("/labs_/portrait/")(),O9e=Qe("/labs_/career-coach/")(),D9e=Qe("/labs_/audio-expression/")(),j9e=Qe("/shares/tasks/$shareId")(),U9e=Qe("/shares/podcasts/$shareId")(),F9e=Qe("/shares/3d-generations/$shareId")(),B9e=Qe("/pro/redeem/$redeemCode")(),V9e=Qe("/pro/ewallet/return")(),H9e=Qe("/podcasts/$podcastType/$podcastId")(),z9e=Qe("/labs_/portrait/talk")(),G9e=Qe("/labs_/portrait/gallery")(),W9e=Qe("/labs_/experiments/$experimentAlias")(),$9e=Qe("/labs_/career-coach/report")(),q9e=Qe("/labs_/career-coach/mock-interview")(),K9e=Qe("/discover/{-$modalType}/{-$modalId}")(),Z9e=Qe("/conversations/join/$token")(),Y9e=Qe("/labs_/portrait/future-self/")(),Q9e=Qe("/labs_/experiments/3d-generations/")(),J9e=Qe("/labs_/portrait/future-self/create")(),X9e=Qe("/labs_/experiments/3d-generations/my-creations")(),e8e=c9e.update({id:"/topic-selection",path:"/topic-selection",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./topic-selection.lazy-B-N8_vNj.js"),__vite__mapDeps([472,1])).then(e=>e.Route)),t8e=l9e.update({id:"/shopping",path:"/shopping",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./shopping.lazy-DZgEZ51A.js"),__vite__mapDeps([473,1,455,380,326,434,425,450,474,324,325,309,310,327,328,322,323,471,379,329,377,378])).then(e=>e.Route)),n8e=u9e.update({id:"/login",path:"/login",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./login.lazy-DeEmtbSK.js"),__vite__mapDeps([475,1,409])).then(e=>e.Route)),s8e=d9e.update({id:"/library",path:"/library",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./library.lazy-B8Uv2_ik.js"),__vite__mapDeps([476,1,477,478,479,480,481,482,443,444,445,368,446,483,484,485,362])).then(e=>e.Route)),kR=m9e.update({id:"/imagine",path:"/imagine",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./imagine._galleryItemId.lazy-CSpFSUVe.js").then(e=>e.i),__vite__mapDeps([486,1,487,488,489,490,491,492,493,485,362,419,422])).then(e=>e.Route)),o8e=f9e.update({id:"/gaming",path:"/gaming",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./gaming.lazy-lkcxGI6J.js"),__vite__mapDeps([494,1,495,336,337])).then(e=>e.Route)),MR=p9e.update({id:"/gallery",path:"/gallery",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./gallery._galleryItemId.lazy-yQrckMbv.js").then(e=>e.g),__vite__mapDeps([496,1,487,488,489,490,491,492,493,485,362,419,422])).then(e=>e.Route)),r8e=h9e.update({id:"/daily",path:"/daily",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./daily.lazy-CfK1OS9z.js"),__vite__mapDeps([497,1,498,499,500,501,502,503,504,505,506,507,396,444,508,445])).then(e=>e.Route)),a8e=g9e.update({id:"/agents",path:"/agents",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./agents.lazy-DCJBJo_u.js"),__vite__mapDeps([509,1])).then(e=>e.Route)),i8e=mxe.update({id:"/",path:"/",getParentRoute:()=>Je}),c8e=v9e.update({id:"/referrals/",path:"/referrals/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./index.lazy-CsT6E86p.js"),__vite__mapDeps([510,1,332,316,331,334,511,512,513,514])).then(e=>e.Route)),l8e=C9e.update({id:"/labs_/",path:"/labs/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./index.lazy-foX9uDdJ.js"),__vite__mapDeps([515,1,495,516])).then(e=>e.Route)),u8e=y9e.update({id:"/fallrelease/",path:"/fallrelease/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./index.lazy-1dcHesOt.js"),__vite__mapDeps([517,1])).then(e=>e.Route)),d8e=b9e.update({id:"/subscription/start",path:"/subscription/start",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./subscription.start.lazy-D0lxh9aX.js"),__vite__mapDeps([518,1])).then(e=>e.Route)),m8e=x9e.update({id:"/subscription/manage",path:"/subscription/manage",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./subscription.manage.lazy-Dsy7ioBi.js"),__vite__mapDeps([519,1,364,304])).then(e=>e.Route)),f8e=S9e.update({id:"/shares/$conversationId",path:"/shares/$conversationId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./shares._conversationId.lazy-VhW8CPki.js"),__vite__mapDeps([520,1])).then(e=>e.Route)),p8e=E9e.update({id:"/research/$researchId",path:"/research/$researchId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./research._researchId.lazy-WKUqZ7wB.js"),__vite__mapDeps([521,1,440,438,439,435,441,407,446,522,483,484,485,362])).then(e=>e.Route)),h8e=w9e.update({id:"/referrals/rules",path:"/referrals/rules",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./rules.lazy-BgDqIwTo.js"),__vite__mapDeps([523,1,316,334,335,524,514])).then(e=>e.Route)),g8e=I9e.update({id:"/pro/subscribe",path:"/pro/subscribe",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./pro.subscribe.lazy-BbBLMGz1.js"),__vite__mapDeps([525,1,317,318,319,526,369,527,528,529,530,313,310,315,316,531,532,533,469,470,534,535,536,537,538,539,540,541,542,336,337,543,395,544])).then(e=>e.Route)),v8e=_9e.update({id:"/memory/narrative",path:"/memory/narrative",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./memory.narrative.lazy-B8U0VEr_.js"),__vite__mapDeps([545,1,338])).then(e=>e.Route)),C8e=T9e.update({id:"/$galleryItemId",path:"/$galleryItemId",getParentRoute:()=>kR}).lazy(()=>B(()=>import("./imagine._galleryItemId.lazy-CSpFSUVe.js").then(e=>e.a),__vite__mapDeps([486,1,487,488,489,490,491,492,493,485,362,419,422])).then(e=>e.Route)),y8e=A9e.update({id:"/$galleryItemId",path:"/$galleryItemId",getParentRoute:()=>MR}).lazy(()=>B(()=>import("./gallery._galleryItemId.lazy-yQrckMbv.js").then(e=>e.a),__vite__mapDeps([496,1,487,488,489,490,491,492,493,485,362,419,422])).then(e=>e.Route)),b8e=k9e.update({id:"/e/sol",path:"/e/sol",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./e.sol.lazy-DkBUHdRk.js"),__vite__mapDeps([546,1])).then(e=>e.Route)),x8e=M9e.update({id:"/e/so",path:"/e/so",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./e.so.lazy-FZrEvf5Q.js"),__vite__mapDeps([547,1])).then(e=>e.Route)),S8e=N9e.update({id:"/connector/callback",path:"/connector/callback",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./connector.callback.lazy-BbqAckt_.js"),__vite__mapDeps([548,1])).then(e=>e.Route)),E8e=R9e.update({id:"/chats/private",path:"/chats/private",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./chats.private.lazy-BYImFqmZ.js"),__vite__mapDeps([549,1])).then(e=>e.Route)),w8e=P9e.update({id:"/campaigns/$campaignId",path:"/campaigns/$campaignId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./campaigns._campaignId.lazy-Cqxcs8xP.js"),__vite__mapDeps([550,1])).then(e=>e.Route)),I8e=fxe.update({id:"/projects/$projectId",path:"/projects/$projectId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./projects._projectId.lazy-Dn-yp60M.js"),__vite__mapDeps([551,1,552])).then(e=>e.Route)),_8e=pxe.update({id:"/partners/feedback",path:"/partners/feedback",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./partners.feedback.lazy-C5Wik-He.js"),__vite__mapDeps([553,1,554])).then(e=>e.Route)),T8e=hxe.update({id:"/pages/$pageId",path:"/pages/$pageId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./pages._pageId.lazy-BFq5Qdga.js"),__vite__mapDeps([555,1,556,478,479,353,366,557,558,559,560,561,562,407,563,413,564,442,565,566,567,503,568,569,480,570])).then(e=>e.Route)),A8e=o9e.update({id:"/chats/$conversationId",path:"/chats/$conversationId",getParentRoute:()=>Je}),k8e=L9e.update({id:"/labs_/portrait/",path:"/labs/portrait/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./index.lazy-Dygz9iR4.js"),__vite__mapDeps([571,1,572,573,574,575,576])).then(e=>e.Route)),M8e=O9e.update({id:"/labs_/career-coach/",path:"/labs/career-coach/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./mock-interview.lazy-DmjkijqD.js").then(e=>e.i),__vite__mapDeps([577,1,459,460])).then(e=>e.Route)),N8e=D9e.update({id:"/labs_/audio-expression/",path:"/labs/audio-expression/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./index.lazy-CC95wamP.js"),__vite__mapDeps([578,1,336,337,579,393,394,392,396])).then(e=>e.Route)),R8e=j9e.update({id:"/shares/tasks/$shareId",path:"/shares/tasks/$shareId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./shares.tasks._shareId.lazy-B1R_3GDx.js"),__vite__mapDeps([580,1,568,354,484,438,439,522])).then(e=>e.Route)),P8e=U9e.update({id:"/shares/podcasts/$shareId",path:"/shares/podcasts/$shareId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./shares.podcasts._shareId.lazy-EKEM_r2H.js"),__vite__mapDeps([581,1,444,445,506,507])).then(e=>e.Route)),L8e=F9e.update({id:"/shares/3d-generations/$shareId",path:"/shares/3d-generations/$shareId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./shares.3d-generations._shareId.lazy-D0MnGRs4.js"),__vite__mapDeps([582,1,583,584,493,585,495,491,492,586])).then(e=>e.Route)),O8e=B9e.update({id:"/pro/redeem/$redeemCode",path:"/pro/redeem/$redeemCode",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./pro.redeem._redeemCode.lazy-DGTRmxx6.js"),__vite__mapDeps([587,1])).then(e=>e.Route)),D8e=V9e.update({id:"/pro/ewallet/return",path:"/pro/ewallet/return",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./pro.ewallet.return.lazy-DL7kp3HU.js"),__vite__mapDeps([588,1,543,395,369])).then(e=>e.Route)),j8e=H9e.update({id:"/podcasts/$podcastType/$podcastId",path:"/podcasts/$podcastType/$podcastId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./podcasts._podcastType._podcastId.lazy-CCPHhdFL.js"),__vite__mapDeps([589,1,498,499,500,501,502,503,504,505,506,507,396,444,508,445])).then(e=>e.Route)),U8e=z9e.update({id:"/labs_/portrait/talk",path:"/labs/portrait/talk",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./talk.lazy-BoSWYUXF.js"),__vite__mapDeps([590,1,591,336,337,592,584,466,574,593])).then(e=>e.Route)),F8e=G9e.update({id:"/labs_/portrait/gallery",path:"/labs/portrait/gallery",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./gallery.lazy-Dkxk1eGp.js"),__vite__mapDeps([594,1,572,573,574,575,576])).then(e=>e.Route)),B8e=W9e.update({id:"/labs_/experiments/$experimentAlias",path:"/labs/experiments/$experimentAlias",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./experiments._experimentAlias.lazy-iRN_5ll2.js").then(e=>e.e),__vite__mapDeps([595,1,393,394,495,516])).then(e=>e.Route)),V8e=$9e.update({id:"/labs_/career-coach/report",path:"/labs/career-coach/report",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./mock-interview.lazy-DmjkijqD.js").then(e=>e.r),__vite__mapDeps([577,1,459,460])).then(e=>e.Route)),H8e=q9e.update({id:"/labs_/career-coach/mock-interview",path:"/labs/career-coach/mock-interview",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./mock-interview.lazy-DmjkijqD.js").then(e=>e.m),__vite__mapDeps([577,1,459,460])).then(e=>e.Route)),z8e=K9e.update({id:"/discover/{-$modalType}/{-$modalId}",path:"/discover/{-$modalType}/{-$modalId}",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./discover._-_modalType_._-_modalId_.lazy-MGN50V1o.js"),__vite__mapDeps([596,1])).then(e=>e.Route)),G8e=Z9e.update({id:"/conversations/join/$token",path:"/conversations/join/$token",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./conversations.join._token.lazy-B19Ls-qV.js"),__vite__mapDeps([597,1,418,339])).then(e=>e.Route)),W8e=r9e.update({id:"/shares/pages/$shareId",path:"/shares/pages/$shareId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./shares.pages._shareId.lazy-CgaT0sTc.js"),__vite__mapDeps([598,1,570,556,478,479,353,366,557,558,559,560,561,562,407,563,413,564,442,565,566,567,503,568,569,481,599])).then(e=>e.Route)),$8e=a9e.update({id:"/chats_/$conversationId/talk",path:"/chats/$conversationId/talk",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./chats_._conversationId.talk.lazy-89BAMvcl.js"),__vite__mapDeps([600,1,591,336,337,592,584,466,574,593])).then(e=>e.Route)),q8e=Y9e.update({id:"/labs_/portrait/future-self/",path:"/labs/portrait/future-self/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./index.lazy-BxMeg4V4.js"),__vite__mapDeps([601,1,573,602,576,574])).then(e=>e.Route)),K8e=Q9e.update({id:"/labs_/experiments/3d-generations/",path:"/labs/experiments/3d-generations/",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./my-creations.lazy-ct1cZvCe.js").then(e=>e.i),__vite__mapDeps([603,1,583,584,493,585,495,507,564,403,604,605,579,485,362,586,337,499,500,501,502,606])).then(e=>e.Route)),Z8e=J9e.update({id:"/labs_/portrait/future-self/create",path:"/labs/portrait/future-self/create",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./create.lazy-CRB2n-Qn.js"),__vite__mapDeps([607,1,576,307,602,403,574])).then(e=>e.Route)),Y8e=X9e.update({id:"/labs_/experiments/3d-generations/my-creations",path:"/labs/experiments/3d-generations/my-creations",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./my-creations.lazy-ct1cZvCe.js").then(e=>e.m),__vite__mapDeps([603,1,583,584,493,585,495,507,564,403,604,605,579,485,362,586,337,499,500,501,502,606])).then(e=>e.Route)),Q8e=i9e.update({id:"/projects_/$projectId/chats/$conversationId",path:"/projects/$projectId/chats/$conversationId",getParentRoute:()=>Je}).lazy(()=>B(()=>import("./projects_._projectId.chats._conversationId.lazy-BKTieYSx.js"),__vite__mapDeps([608,1])).then(e=>e.Route)),J8e={GalleryGalleryItemIdLazyRoute:y8e},X8e=MR._addFileChildren(J8e),e7e={ImagineGalleryItemIdLazyRoute:C8e},t7e=kR._addFileChildren(e7e),n7e={IndexRoute:i8e,AgentsLazyRoute:a8e,DailyLazyRoute:r8e,GalleryLazyRoute:X8e,GamingLazyRoute:o8e,ImagineLazyRoute:t7e,LibraryLazyRoute:s8e,LoginLazyRoute:n8e,ShoppingLazyRoute:t8e,TopicSelectionLazyRoute:e8e,ChatsConversationIdRoute:A8e,PagesPageIdRoute:T8e,PartnersFeedbackRoute:_8e,ProjectsProjectIdRoute:I8e,CampaignsCampaignIdLazyRoute:w8e,ChatsPrivateLazyRoute:E8e,ConnectorCallbackLazyRoute:S8e,ESoLazyRoute:x8e,ESolLazyRoute:b8e,MemoryNarrativeLazyRoute:v8e,ProSubscribeLazyRoute:g8e,ReferralsRulesLazyRoute:h8e,ResearchResearchIdLazyRoute:p8e,SharesConversationIdLazyRoute:f8e,SubscriptionManageLazyRoute:m8e,SubscriptionStartLazyRoute:d8e,FallreleaseIndexLazyRoute:u8e,LabsIndexLazyRoute:l8e,ReferralsIndexLazyRoute:c8e,ChatsConversationIdTalkRoute:$8e,SharesPagesShareIdRoute:W8e,ConversationsJoinTokenLazyRoute:G8e,DiscoverModalTypeModalIdLazyRoute:z8e,LabsCareerCoachMockInterviewLazyRoute:H8e,LabsCareerCoachReportLazyRoute:V8e,LabsExperimentsExperimentAliasLazyRoute:B8e,LabsPortraitGalleryLazyRoute:F8e,LabsPortraitTalkLazyRoute:U8e,PodcastsPodcastTypePodcastIdLazyRoute:j8e,ProEwalletReturnLazyRoute:D8e,ProRedeemRedeemCodeLazyRoute:O8e,Shares3dGenerationsShareIdLazyRoute:L8e,SharesPodcastsShareIdLazyRoute:P8e,SharesTasksShareIdLazyRoute:R8e,LabsAudioExpressionIndexLazyRoute:N8e,LabsCareerCoachIndexLazyRoute:M8e,LabsPortraitIndexLazyRoute:k8e,ProjectsProjectIdChatsConversationIdRoute:Q8e,LabsExperiments3dGenerationsMyCreationsLazyRoute:Y8e,LabsPortraitFutureSelfCreateLazyRoute:Z8e,LabsExperiments3dGenerationsIndexLazyRoute:K8e,LabsPortraitFutureSelfIndexLazyRoute:q8e},s7e=Je._addFileChildren(n7e)._addFileTypes();let b0=null;function o7e({isEntryServerOrIsGetRouter:e}){return XL({routeTree:s7e})}function Ma(){return b0||(b0=o7e({isEntryServerOrIsGetRouter:!0})),b0}const NR=new eO({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}}),S5=Ma();S5.update({context:{...S5.options.context,fetchAndParseAPI:Ct,queryClient:NR,userAgent:navigator.userAgent}});function r7e(){return i.jsx(lU,{queryClient:NR,children:i.jsx(tO,{router:S5})})}(function(){const e="onabort onactivate onactivateinvisible onafterprint onafterupdate onanimationcancel onanimationend onanimationiteration onanimationstart onariarequest onauxclick onbeforeactivate onbeforecopy onbeforecut onbeforedeactivate onbeforeeditfocus onbeforepaste onbeforeprint onbeforeunload onbegin onblur onbounce oncancel oncanplay oncanplaythrough oncellchange onchange onclick onclose oncommand oncontextmenu oncontrolselect oncopy oncuechange oncut ondataavailable ondatasetchanged ondatasetcomplete ondblclick ondeactivate ondrag ondragdrop ondragend ondragenter ondragexit ondragleave ondragover ondragstart ondrop ondurationchange onemptied onend onended onerror onerrorupdate onexit onfilterchange onfinish onfocus onfocusin onfocusout onformdata onfullscreenchange onfullscreenerror ongotpointercapture onhelp oninput oninvalid onkeydown onkeypress onkeyup onlayoutcomplete onload onloadeddata onloadedmetadata onloadend onloadstart onlosecapture onlostpointercapture onmediacomplete onmediaerror onmessage onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onmove onmoveend onmovestart onmozfullscreenchange onmozfullscreenerror onmscontentzoom onmsgesturechange onmsgesturedoubletap onmsgestureend onmsgesturehold onmsgesturestart onmsgesturetap onmsgotpointercapture onmsinertiastart onmslostpointercapture onmsmanipulationstatechanged onmspointercancel onmspointerdown onmspointerenter onmspointerleave onmspointermove onmspointerout onmspointerover onmspointerup onoffline ononline onoutofsync onoverscroll onpaste onpause onplay onplaying onpointercancel onpointerdown onpointerenter onpointerleave onpointermove onpointerout onpointerover onpointerrawupdate onpointerup onprogress onpropertychange onratechange onreadystatechange onrepeat onreset onresize onresizeend onresizestart onresume onreverse onrowdelete onrowenter onrowexit onrowinserted onscroll onscrollend onsearch onseek onseeked onseeking onselect onselectionchange onselectstart onshow onstalled onstart onstop onstorage onsubmit onsuspend onsynchrestored ontimeerror ontimeupdate ontoggle ontrackchange ontransitioncancel ontransitionend ontransitionrun ontransitionstart onunload onurlflip onvolumechange onwaiting onwebkitanimationend onwebkitanimationiteration onwebkitanimationstart onwebkitfullscreenchange onwebkitfullscreenerror onwebkittransitionend onwheel".split(" ");function t(){if(typeof window<"u"){const f=[];for(const h in HTMLElement.prototype)h.slice(0,2)==="on"&&f.push(h);return f}return e}const n=typeof window<"u",s=()=>{throw new TypeError("undefined conversion")},o=()=>null,{toLowerCase:r,toUpperCase:a}=String.prototype;function l(){throw new TypeError("Illegal constructor")}function u(){throw new TypeError("Illegal constructor")}const{l:d}=function(){function f(oe){let le=K.get(oe);return le===void 0&&(le=S(null),K.set(oe,le)),le}function h(oe){const le=A(oe);if(le==null||A(le)!==k)throw Error();for(const J of T(le))I(oe,J,{value:oe[J]});return oe}function g(oe,le){_(oe.prototype),delete oe.name,I(oe,"name",{value:le})}function C(oe){return le=>le instanceof oe&&K.has(le)}function v(oe,le){function J(Pe,qe){const Xe=le[qe]||(oe=="default"?o:s),et=_(new Pe(U,oe));return _({[qe](fe,...Ee){if(fe=Xe(""+fe,...Ee),fe==null){if(oe=="default")return fe;fe=""}return fe=""+fe,Ee=_(S(et)),f(Ee).v=fe,Ee}}[qe])}const Ce=S(l.prototype);for(const Pe of T(Me))Ce[Pe]=J(Me[Pe],Pe);return I(Ce,"name",{value:oe,writable:!1,configurable:!1,enumerable:!0}),_(Ce)}function y(oe,le,J,Ce="",Pe=""){if(oe=a.apply(String(oe)),(Ce=Pe||Ce)||(Ce="http://www.w3.org/1999/xhtml"),Ce=N.apply(ae,[Ce])?ae[Ce]:null){if(N.apply(Ce,[oe])&&Ce[oe]&&N.apply(Ce[oe][le],[J])&&Ce[oe][le][J])return Ce[oe][le][J];if(N.apply(Ce,["*"])&&N.apply(Ce["*"][le],[J])&&Ce["*"][le][J])return Ce["*"][le][J]}}function b(){return X}const{assign:E,create:S,defineProperty:I,freeze:_,getOwnPropertyNames:T,getPrototypeOf:A,prototype:k}=Object,{hasOwnProperty:N}=k,{forEach:P,push:V}=Array.prototype,U=Symbol(),K=h(new WeakMap),Q=h([]),Z=h([]);let Y=!0,X=null,$=!1;class ee{constructor(le,J){if(le!==U)throw Error("cannot call the constructor");I(this,"policyName",{value:J,enumerable:!0})}toString(){return f(this).v}valueOf(){return f(this).v}}class te extends ee{}g(te,"TrustedScriptURL");class G extends ee{}g(G,"TrustedHTML");class ie extends ee{}g(ie,"TrustedScript"),g(ee,"TrustedType");const xe=_(S(new G(U,"")));f(xe).v="";const ce=_(S(new ie(U,"")));f(ce).v="";const ae={"http://www.w3.org/1999/xhtml":{EMBED:{attributes:{src:te.name}},IFRAME:{attributes:{srcdoc:G.name}},OBJECT:{attributes:{data:te.name,codebase:te.name}},SCRIPT:{attributes:{src:te.name,text:ie.name},properties:{innerText:ie.name,textContent:ie.name,text:ie.name}},"*":{attributes:{},properties:{innerHTML:G.name,outerHTML:G.name}}},"http://www.w3.org/2000/svg":{"*":{attributes:{},properties:{}}}};var Se={codebase:"codeBase",formaction:"formAction"};!n||"srcdoc"in HTMLIFrameElement.prototype||delete ae["http://www.w3.org/1999/xhtml"].IFRAME.attributes.srcdoc;for(const oe of Object.keys(ae["http://www.w3.org/1999/xhtml"])){ae["http://www.w3.org/1999/xhtml"][oe].properties||(ae["http://www.w3.org/1999/xhtml"][oe].properties={});for(const le of Object.keys(ae["http://www.w3.org/1999/xhtml"][oe].attributes))ae["http://www.w3.org/1999/xhtml"][oe].properties[Se[le]?Se[le]:le]=ae["http://www.w3.org/1999/xhtml"][oe].attributes[le]}for(const oe of t())ae["http://www.w3.org/1999/xhtml"]["*"].attributes[oe]="TrustedScript",ae["http://www.w3.org/2000/svg"]["*"].attributes[oe]="TrustedScript";const Me={createHTML:G,createScriptURL:te,createScript:ie},Oe=Me.hasOwnProperty;return Se=S(u.prototype),E(Se,{createPolicy:function(oe,le){if(!oe.match(/^[-#a-zA-Z0-9=_/@.%]+$/g))throw new TypeError("Policy "+oe+" contains invalid characters.");if($&&Z.indexOf(oe)===-1&&Z.indexOf("*")===-1)throw new TypeError("Policy "+oe+" disallowed.");if(oe==="default"&&X)throw new TypeError("Policy "+oe+" already exists.");if($&&!Y&&Q.indexOf(oe)!==-1)throw new TypeError("Policy "+oe+" exists.");Q.push(oe);const J=S(null);if(le&&typeof le=="object")for(const Ce of T(le))Oe.call(Me,Ce)&&(J[Ce]=le[Ce]);else console.warn("trustedTypes.createPolicy "+oe+" was given an empty policy");return _(J),le=v(oe,J),oe==="default"&&(X=le),le},h:C(G),j:C(te),i:C(ie),c:function(oe,le,J="",Ce=""){return le=r.apply(String(le)),y(oe,"attributes",le,J,Ce)||null},f:function(oe,le,J=""){return y(oe,"properties",String(le),J)||null},g:function(oe=""){if(!oe)try{oe=document.documentElement.namespaceURI}catch{oe="http://www.w3.org/1999/xhtml"}return(oe=ae[oe])?JSON.parse(JSON.stringify(oe)):{}},a:xe,b:ce,o:X,TrustedHTML:G,TrustedScriptURL:te,TrustedScript:ie}),I(Se,"defaultPolicy",{get:b,set:()=>{}}),{l:_(Se),w:function(oe,le){$=!0,Z.length=0,P.call(oe,J=>{V.call(Z,""+J)}),Y=le,Q.length=0},m:function(){$=!1},s:b,u:function(){X=null,Q.splice(Q.indexOf("default"),1)}}}();if(typeof window<"u"&&(window.TrustedTypes&&typeof window.trustedTypes>"u"&&(window.trustedTypes=Object.freeze(window.TrustedTypes)),typeof window.trustedTypes>"u")){var m=Object.create(u.prototype);Object.assign(m,{isHTML:d.h,isScriptURL:d.j,isScript:d.i,createPolicy:d.createPolicy,getAttributeType:d.c,getPropertyType:d.f,getTypeMapping:d.g,emptyHTML:d.a,emptyScript:d.b,_isPolyfill_:!0}),Object.defineProperty(m,"defaultPolicy",Object.getOwnPropertyDescriptor(d,"defaultPolicy")||{}),window.trustedTypes=Object.freeze(m),window.TrustedHTML=d.TrustedHTML,window.TrustedScriptURL=d.TrustedScriptURL,window.TrustedScript=d.TrustedScript,window.TrustedTypePolicy=l,window.TrustedTypePolicyFactory=u}}).call(void 0);/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:RR,setPrototypeOf:J9,isFrozen:a7e,getPrototypeOf:i7e,getOwnPropertyDescriptor:c7e}=Object;let{freeze:ns,seal:Zs,create:PR}=Object,{apply:E5,construct:w5}=typeof Reflect<"u"&&Reflect;ns||(ns=function(t){return t});Zs||(Zs=function(t){return t});E5||(E5=function(t,n){for(var s=arguments.length,o=new Array(s>2?s-2:0),r=2;r<s;r++)o[r-2]=arguments[r];return t.apply(n,o)});w5||(w5=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return new t(...s)});const bf=ss(Array.prototype.forEach),l7e=ss(Array.prototype.lastIndexOf),X9=ss(Array.prototype.pop),hu=ss(Array.prototype.push),u7e=ss(Array.prototype.splice),Vf=ss(String.prototype.toLowerCase),x0=ss(String.prototype.toString),S0=ss(String.prototype.match),gu=ss(String.prototype.replace),d7e=ss(String.prototype.indexOf),m7e=ss(String.prototype.trim),ro=ss(Object.prototype.hasOwnProperty),Yn=ss(RegExp.prototype.test),vu=f7e(TypeError);function ss(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return E5(e,t,s)}}function f7e(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return w5(e,n)}}function lt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vf;J9&&J9(e,null);let s=t.length;for(;s--;){let o=t[s];if(typeof o=="string"){const r=n(o);r!==o&&(a7e(t)||(t[s]=r),o=r)}e[o]=!0}return e}function p7e(e){for(let t=0;t<e.length;t++)ro(e,t)||(e[t]=null);return e}function tr(e){const t=PR(null);for(const[n,s]of RR(e))ro(e,n)&&(Array.isArray(s)?t[n]=p7e(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=tr(s):t[n]=s);return t}function Cu(e,t){for(;e!==null;){const s=c7e(e,t);if(s){if(s.get)return ss(s.get);if(typeof s.value=="function")return ss(s.value)}e=i7e(e)}function n(){return null}return n}const e8=ns(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),E0=ns(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),w0=ns(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),h7e=ns(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),I0=ns(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),g7e=ns(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),t8=ns(["#text"]),n8=ns(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_0=ns(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),s8=ns(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xf=ns(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),v7e=Zs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),C7e=Zs(/<%[\w\W]*|[\w\W]*%>/gm),y7e=Zs(/\$\{[\w\W]*/gm),b7e=Zs(/^data-[\-\w.\u00B7-\uFFFF]+$/),x7e=Zs(/^aria-[\-\w]+$/),LR=Zs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),S7e=Zs(/^(?:\w+script|data):/i),E7e=Zs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),OR=Zs(/^html$/i),w7e=Zs(/^[a-z][.\w]*(-[.\w]+)+$/i);var o8=Object.freeze({__proto__:null,ARIA_ATTR:x7e,ATTR_WHITESPACE:E7e,CUSTOM_ELEMENT:w7e,DATA_ATTR:b7e,DOCTYPE_NAME:OR,ERB_EXPR:C7e,IS_ALLOWED_URI:LR,IS_SCRIPT_OR_DATA:S7e,MUSTACHE_EXPR:v7e,TMPLIT_EXPR:y7e});const yu={element:1,text:3,progressingInstruction:7,comment:8,document:9},I7e=function(){return typeof window>"u"?null:window},_7e=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},r8=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function DR(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I7e();const t=He=>DR(He);if(t.version="3.2.7",t.removed=[],!e||!e.document||e.document.nodeType!==yu.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const s=n,o=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:l,Element:u,NodeFilter:d,NamedNodeMap:m=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:g}=e,C=u.prototype,v=Cu(C,"cloneNode"),y=Cu(C,"remove"),b=Cu(C,"nextSibling"),E=Cu(C,"childNodes"),S=Cu(C,"parentNode");if(typeof a=="function"){const He=n.createElement("template");He.content&&He.content.ownerDocument&&(n=He.content.ownerDocument)}let I,_="";const{implementation:T,createNodeIterator:A,createDocumentFragment:k,getElementsByTagName:N}=n,{importNode:P}=s;let V=r8();t.isSupported=typeof RR=="function"&&typeof S=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:U,ERB_EXPR:K,TMPLIT_EXPR:Q,DATA_ATTR:Z,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:ee}=o8;let{IS_ALLOWED_URI:te}=o8,G=null;const ie=lt({},[...e8,...E0,...w0,...I0,...t8]);let xe=null;const ce=lt({},[...n8,..._0,...s8,...xf]);let ae=Object.seal(PR(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Se=null,Me=null,Oe=!0,oe=!0,le=!1,J=!0,Ce=!1,Pe=!0,qe=!1,Xe=!1,et=!1,fe=!1,Ee=!1,Ae=!1,Ye=!0,De=!1;const Ke="user-content-";let Be=!0,ve=!1,ze={},yt=null;const Ne=lt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ie=null;const Ze=lt({},["audio","video","img","source","image","track"]);let at=null;const Te=lt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dt="http://www.w3.org/1998/Math/MathML",At="http://www.w3.org/2000/svg",Bt="http://www.w3.org/1999/xhtml";let Rs=Bt,Xs=!1,Ps=null;const Om=lt({},[dt,At,Bt],x0);let Ko=lt({},["mi","mo","mn","ms","mtext"]),rs=lt({},["annotation-xml"]);const zl=lt({},["title","style","font","a","script"]);let Io=null;const nc=["application/xhtml+xml","text/html"],sc="text/html";let Jt=null,Ls=null;const Nn=n.createElement("form"),Zo=function(H){return H instanceof RegExp||H instanceof Function},Na=function(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ls&&Ls===H)){if((!H||typeof H!="object")&&(H={}),H=tr(H),Io=nc.indexOf(H.PARSER_MEDIA_TYPE)===-1?sc:H.PARSER_MEDIA_TYPE,Jt=Io==="application/xhtml+xml"?x0:Vf,G=ro(H,"ALLOWED_TAGS")?lt({},H.ALLOWED_TAGS,Jt):ie,xe=ro(H,"ALLOWED_ATTR")?lt({},H.ALLOWED_ATTR,Jt):ce,Ps=ro(H,"ALLOWED_NAMESPACES")?lt({},H.ALLOWED_NAMESPACES,x0):Om,at=ro(H,"ADD_URI_SAFE_ATTR")?lt(tr(Te),H.ADD_URI_SAFE_ATTR,Jt):Te,Ie=ro(H,"ADD_DATA_URI_TAGS")?lt(tr(Ze),H.ADD_DATA_URI_TAGS,Jt):Ze,yt=ro(H,"FORBID_CONTENTS")?lt({},H.FORBID_CONTENTS,Jt):Ne,Se=ro(H,"FORBID_TAGS")?lt({},H.FORBID_TAGS,Jt):tr({}),Me=ro(H,"FORBID_ATTR")?lt({},H.FORBID_ATTR,Jt):tr({}),ze=ro(H,"USE_PROFILES")?H.USE_PROFILES:!1,Oe=H.ALLOW_ARIA_ATTR!==!1,oe=H.ALLOW_DATA_ATTR!==!1,le=H.ALLOW_UNKNOWN_PROTOCOLS||!1,J=H.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ce=H.SAFE_FOR_TEMPLATES||!1,Pe=H.SAFE_FOR_XML!==!1,qe=H.WHOLE_DOCUMENT||!1,fe=H.RETURN_DOM||!1,Ee=H.RETURN_DOM_FRAGMENT||!1,Ae=H.RETURN_TRUSTED_TYPE||!1,et=H.FORCE_BODY||!1,Ye=H.SANITIZE_DOM!==!1,De=H.SANITIZE_NAMED_PROPS||!1,Be=H.KEEP_CONTENT!==!1,ve=H.IN_PLACE||!1,te=H.ALLOWED_URI_REGEXP||LR,Rs=H.NAMESPACE||Bt,Ko=H.MATHML_TEXT_INTEGRATION_POINTS||Ko,rs=H.HTML_INTEGRATION_POINTS||rs,ae=H.CUSTOM_ELEMENT_HANDLING||{},H.CUSTOM_ELEMENT_HANDLING&&Zo(H.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=H.CUSTOM_ELEMENT_HANDLING.tagNameCheck),H.CUSTOM_ELEMENT_HANDLING&&Zo(H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),H.CUSTOM_ELEMENT_HANDLING&&typeof H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ce&&(oe=!1),Ee&&(fe=!0),ze&&(G=lt({},t8),xe=[],ze.html===!0&&(lt(G,e8),lt(xe,n8)),ze.svg===!0&&(lt(G,E0),lt(xe,_0),lt(xe,xf)),ze.svgFilters===!0&&(lt(G,w0),lt(xe,_0),lt(xe,xf)),ze.mathMl===!0&&(lt(G,I0),lt(xe,s8),lt(xe,xf))),H.ADD_TAGS&&(G===ie&&(G=tr(G)),lt(G,H.ADD_TAGS,Jt)),H.ADD_ATTR&&(xe===ce&&(xe=tr(xe)),lt(xe,H.ADD_ATTR,Jt)),H.ADD_URI_SAFE_ATTR&&lt(at,H.ADD_URI_SAFE_ATTR,Jt),H.FORBID_CONTENTS&&(yt===Ne&&(yt=tr(yt)),lt(yt,H.FORBID_CONTENTS,Jt)),Be&&(G["#text"]=!0),qe&&lt(G,["html","head","body"]),G.table&&(lt(G,["tbody"]),delete Se.tbody),H.TRUSTED_TYPES_POLICY){if(typeof H.TRUSTED_TYPES_POLICY.createHTML!="function")throw vu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof H.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=H.TRUSTED_TYPES_POLICY,_=I.createHTML("")}else I===void 0&&(I=_7e(g,o)),I!==null&&typeof _=="string"&&(_=I.createHTML(""));ns&&ns(H),Ls=H}},gs=lt({},[...E0,...w0,...h7e]),oc=lt({},[...I0,...g7e]),_o=function(H){let _e=S(H);(!_e||!_e.tagName)&&(_e={namespaceURI:Rs,tagName:"template"});const Ve=Vf(H.tagName),Lt=Vf(_e.tagName);return Ps[H.namespaceURI]?H.namespaceURI===At?_e.namespaceURI===Bt?Ve==="svg":_e.namespaceURI===dt?Ve==="svg"&&(Lt==="annotation-xml"||Ko[Lt]):!!gs[Ve]:H.namespaceURI===dt?_e.namespaceURI===Bt?Ve==="math":_e.namespaceURI===At?Ve==="math"&&rs[Lt]:!!oc[Ve]:H.namespaceURI===Bt?_e.namespaceURI===At&&!rs[Lt]||_e.namespaceURI===dt&&!Ko[Lt]?!1:!oc[Ve]&&(zl[Ve]||!gs[Ve]):!!(Io==="application/xhtml+xml"&&Ps[H.namespaceURI]):!1},Gn=function(H){hu(t.removed,{element:H});try{S(H).removeChild(H)}catch{y(H)}},Os=function(H,_e){try{hu(t.removed,{attribute:_e.getAttributeNode(H),from:_e})}catch{hu(t.removed,{attribute:null,from:_e})}if(_e.removeAttribute(H),H==="is")if(fe||Ee)try{Gn(_e)}catch{}else try{_e.setAttribute(H,"")}catch{}},Ra=function(H){let _e=null,Ve=null;if(et)H="<remove></remove>"+H;else{const nn=S0(H,/^[\r\n\t ]+/);Ve=nn&&nn[0]}Io==="application/xhtml+xml"&&Rs===Bt&&(H='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+H+"</body></html>");const Lt=I?I.createHTML(H):H;if(Rs===Bt)try{_e=new h().parseFromString(Lt,Io)}catch{}if(!_e||!_e.documentElement){_e=T.createDocument(Rs,"template",null);try{_e.documentElement.innerHTML=Xs?_:Lt}catch{}}const En=_e.body||_e.documentElement;return H&&Ve&&En.insertBefore(n.createTextNode(Ve),En.childNodes[0]||null),Rs===Bt?N.call(_e,qe?"html":"body")[0]:qe?_e.documentElement:En},Pt=function(H){return A.call(H.ownerDocument||H,H,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Yo=function(H){return H instanceof f&&(typeof H.nodeName!="string"||typeof H.textContent!="string"||typeof H.removeChild!="function"||!(H.attributes instanceof m)||typeof H.removeAttribute!="function"||typeof H.setAttribute!="function"||typeof H.namespaceURI!="string"||typeof H.insertBefore!="function"||typeof H.hasChildNodes!="function")},Pa=function(H){return typeof l=="function"&&H instanceof l};function Ds(He,H,_e){bf(He,Ve=>{Ve.call(t,H,_e,Ls)})}const Ar=function(H){let _e=null;if(Ds(V.beforeSanitizeElements,H,null),Yo(H))return Gn(H),!0;const Ve=Jt(H.nodeName);if(Ds(V.uponSanitizeElement,H,{tagName:Ve,allowedTags:G}),Pe&&H.hasChildNodes()&&!Pa(H.firstElementChild)&&Yn(/<[/\w!]/g,H.innerHTML)&&Yn(/<[/\w!]/g,H.textContent)||H.nodeType===yu.progressingInstruction||Pe&&H.nodeType===yu.comment&&Yn(/<[/\w]/g,H.data))return Gn(H),!0;if(!G[Ve]||Se[Ve]){if(!Se[Ve]&&Dm(Ve)&&(ae.tagNameCheck instanceof RegExp&&Yn(ae.tagNameCheck,Ve)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(Ve)))return!1;if(Be&&!yt[Ve]){const Lt=S(H)||H.parentNode,En=E(H)||H.childNodes;if(En&&Lt){const nn=En.length;for(let kt=nn-1;kt>=0;--kt){const eo=v(En[kt],!0);eo.__removalCount=(H.__removalCount||0)+1,Lt.insertBefore(eo,b(H))}}}return Gn(H),!0}return H instanceof u&&!_o(H)||(Ve==="noscript"||Ve==="noembed"||Ve==="noframes")&&Yn(/<\/no(script|embed|frames)/i,H.innerHTML)?(Gn(H),!0):(Ce&&H.nodeType===yu.text&&(_e=H.textContent,bf([U,K,Q],Lt=>{_e=gu(_e,Lt," ")}),H.textContent!==_e&&(hu(t.removed,{element:H.cloneNode()}),H.textContent=_e)),Ds(V.afterSanitizeElements,H,null),!1)},Wn=function(H,_e,Ve){if(Ye&&(_e==="id"||_e==="name")&&(Ve in n||Ve in Nn))return!1;if(!(oe&&!Me[_e]&&Yn(Z,_e))){if(!(Oe&&Yn(Y,_e))){if(!xe[_e]||Me[_e]){if(!(Dm(H)&&(ae.tagNameCheck instanceof RegExp&&Yn(ae.tagNameCheck,H)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(H))&&(ae.attributeNameCheck instanceof RegExp&&Yn(ae.attributeNameCheck,_e)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(_e,H))||_e==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&Yn(ae.tagNameCheck,Ve)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(Ve))))return!1}else if(!at[_e]){if(!Yn(te,gu(Ve,$,""))){if(!((_e==="src"||_e==="xlink:href"||_e==="href")&&H!=="script"&&d7e(Ve,"data:")===0&&Ie[H])){if(!(le&&!Yn(X,gu(Ve,$,"")))){if(Ve)return!1}}}}}}return!0},Dm=function(H){return H!=="annotation-xml"&&S0(H,ee)},jm=function(H){Ds(V.beforeSanitizeAttributes,H,null);const{attributes:_e}=H;if(!_e||Yo(H))return;const Ve={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:xe,forceKeepAttr:void 0};let Lt=_e.length;for(;Lt--;){const En=_e[Lt],{name:nn,namespaceURI:kt,value:eo}=En,kr=Jt(nn),$n=eo;let ft=nn==="value"?$n:m7e($n);if(Ve.attrName=kr,Ve.attrValue=ft,Ve.keepAttr=!0,Ve.forceKeepAttr=void 0,Ds(V.uponSanitizeAttribute,H,Ve),ft=Ve.attrValue,De&&(kr==="id"||kr==="name")&&(Os(nn,H),ft=Ke+ft),Pe&&Yn(/((--!?|])>)|<\/(style|title|textarea)/i,ft)){Os(nn,H);continue}if(kr==="attributename"&&S0(ft,"href")){Os(nn,H);continue}if(Ve.forceKeepAttr)continue;if(!Ve.keepAttr){Os(nn,H);continue}if(!J&&Yn(/\/>/i,ft)){Os(nn,H);continue}Ce&&bf([U,K,Q],Um=>{ft=gu(ft,Um," ")});const rc=Jt(H.nodeName);if(!Wn(rc,kr,ft)){Os(nn,H);continue}if(I&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!kt)switch(g.getAttributeType(rc,kr)){case"TrustedHTML":{ft=I.createHTML(ft);break}case"TrustedScriptURL":{ft=I.createScriptURL(ft);break}}if(ft!==$n)try{kt?H.setAttributeNS(kt,nn,ft):H.setAttribute(nn,ft),Yo(H)?Gn(H):X9(t.removed)}catch{Os(nn,H)}}Ds(V.afterSanitizeAttributes,H,null)},Sh=function He(H){let _e=null;const Ve=Pt(H);for(Ds(V.beforeSanitizeShadowDOM,H,null);_e=Ve.nextNode();)Ds(V.uponSanitizeShadowNode,_e,null),Ar(_e),jm(_e),_e.content instanceof r&&He(_e.content);Ds(V.afterSanitizeShadowDOM,H,null)};return t.sanitize=function(He){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=null,Ve=null,Lt=null,En=null;if(Xs=!He,Xs&&(He="<!-->"),typeof He!="string"&&!Pa(He))if(typeof He.toString=="function"){if(He=He.toString(),typeof He!="string")throw vu("dirty is not a string, aborting")}else throw vu("toString is not a function");if(!t.isSupported)return He;if(Xe||Na(H),t.removed=[],typeof He=="string"&&(ve=!1),ve){if(He.nodeName){const eo=Jt(He.nodeName);if(!G[eo]||Se[eo])throw vu("root node is forbidden and cannot be sanitized in-place")}}else if(He instanceof l)_e=Ra("<!---->"),Ve=_e.ownerDocument.importNode(He,!0),Ve.nodeType===yu.element&&Ve.nodeName==="BODY"||Ve.nodeName==="HTML"?_e=Ve:_e.appendChild(Ve);else{if(!fe&&!Ce&&!qe&&He.indexOf("<")===-1)return I&&Ae?I.createHTML(He):He;if(_e=Ra(He),!_e)return fe?null:Ae?_:""}_e&&et&&Gn(_e.firstChild);const nn=Pt(ve?He:_e);for(;Lt=nn.nextNode();)Ar(Lt),jm(Lt),Lt.content instanceof r&&Sh(Lt.content);if(ve)return He;if(fe){if(Ee)for(En=k.call(_e.ownerDocument);_e.firstChild;)En.appendChild(_e.firstChild);else En=_e;return(xe.shadowroot||xe.shadowrootmode)&&(En=P.call(s,En,!0)),En}let kt=qe?_e.outerHTML:_e.innerHTML;return qe&&G["!doctype"]&&_e.ownerDocument&&_e.ownerDocument.doctype&&_e.ownerDocument.doctype.name&&Yn(OR,_e.ownerDocument.doctype.name)&&(kt="<!DOCTYPE "+_e.ownerDocument.doctype.name+`>
`+kt),Ce&&bf([U,K,Q],eo=>{kt=gu(kt,eo," ")}),I&&Ae?I.createHTML(kt):kt},t.setConfig=function(){let He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Na(He),Xe=!0},t.clearConfig=function(){Ls=null,Xe=!1},t.isValidAttribute=function(He,H,_e){Ls||Na({});const Ve=Jt(He),Lt=Jt(H);return Wn(Ve,Lt,_e)},t.addHook=function(He,H){typeof H=="function"&&hu(V[He],H)},t.removeHook=function(He,H){if(H!==void 0){const _e=l7e(V[He],H);return _e===-1?void 0:u7e(V[He],_e,1)[0]}return X9(V[He])},t.removeHooks=function(He){V[He]=[]},t.removeAllHooks=function(){V=r8()},t}var a8=DR(),Hu=class{constructor(e,t,n,s,o,r){O(this,"type",3);O(this,"name","");O(this,"prefix","");O(this,"value","");O(this,"suffix","");O(this,"modifier",3);this.type=e,this.name=t,this.prefix=n,this.value=s,this.suffix=o,this.modifier=r}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},T7e=/[$_\p{ID_Start}]/u,A7e=/[$_\u200C\u200D\p{ID_Continue}]/u,I5=".*";function k7e(e,t){return/^[\x00-\x7F]*$/.test(e)}function jR(e,t=!1){let n=[],s=0;for(;s<e.length;){let o=e[s],r=function(a){if(!t)throw new TypeError(a);n.push({type:"INVALID_CHAR",index:s,value:e[s++]})};if(o==="*"){n.push({type:"ASTERISK",index:s,value:e[s++]});continue}if(o==="+"||o==="?"){n.push({type:"OTHER_MODIFIER",index:s,value:e[s++]});continue}if(o==="\\"){n.push({type:"ESCAPED_CHAR",index:s++,value:e[s++]});continue}if(o==="{"){n.push({type:"OPEN",index:s,value:e[s++]});continue}if(o==="}"){n.push({type:"CLOSE",index:s,value:e[s++]});continue}if(o===":"){let a="",l=s+1;for(;l<e.length;){let u=e.substr(l,1);if(l===s+1&&T7e.test(u)||l!==s+1&&A7e.test(u)){a+=e[l++];continue}break}if(!a){r(`Missing parameter name at ${s}`);continue}n.push({type:"NAME",index:s,value:a}),s=l;continue}if(o==="("){let a=1,l="",u=s+1,d=!1;if(e[u]==="?"){r(`Pattern cannot start with "?" at ${u}`);continue}for(;u<e.length;){if(!k7e(e[u])){r(`Invalid character '${e[u]}' at ${u}.`),d=!0;break}if(e[u]==="\\"){l+=e[u++]+e[u++];continue}if(e[u]===")"){if(a--,a===0){u++;break}}else if(e[u]==="("&&(a++,e[u+1]!=="?")){r(`Capturing groups are not allowed at ${u}`),d=!0;break}l+=e[u++]}if(d)continue;if(a){r(`Unbalanced pattern at ${s}`);continue}if(!l){r(`Missing pattern at ${s}`);continue}n.push({type:"REGEX",index:s,value:l}),s=u;continue}n.push({type:"CHAR",index:s,value:e[s++]})}return n.push({type:"END",index:s,value:""}),n}function UR(e,t={}){let n=jR(e);t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./");let s=`[^${Us(t.delimiter)}]+?`,o=[],r=0,a=0,l=new Set,u=E=>{if(a<n.length&&n[a].type===E)return n[a++].value},d=()=>u("OTHER_MODIFIER")??u("ASTERISK"),m=E=>{let S=u(E);if(S!==void 0)return S;let{type:I,index:_}=n[a];throw new TypeError(`Unexpected ${I} at ${_}, expected ${E}`)},f=()=>{let E="",S;for(;S=u("CHAR")??u("ESCAPED_CHAR");)E+=S;return E},h=E=>E,g=t.encodePart||h,C="",v=E=>{C+=E},y=()=>{C.length&&(o.push(new Hu(3,"","",g(C),"",3)),C="")},b=(E,S,I,_,T)=>{let A=3;switch(T){case"?":A=1;break;case"*":A=0;break;case"+":A=2;break}if(!S&&!I&&A===3){v(E);return}if(y(),!S&&!I){if(!E)return;o.push(new Hu(3,"","",g(E),"",A));return}let k;I?I==="*"?k=I5:k=I:k=s;let N=2;k===s?(N=1,k=""):k===I5&&(N=0,k="");let P;if(S?P=S:I&&(P=r++),l.has(P))throw new TypeError(`Duplicate name '${P}'.`);l.add(P),o.push(new Hu(N,P,g(E),k,g(_),A))};for(;a<n.length;){let E=u("CHAR"),S=u("NAME"),I=u("REGEX");if(!S&&!I&&(I=u("ASTERISK")),S||I){let T=E??"";t.prefixes.indexOf(T)===-1&&(v(T),T=""),y();let A=d();b(T,S,I,"",A);continue}let _=E??u("ESCAPED_CHAR");if(_){v(_);continue}if(u("OPEN")){let T=f(),A=u("NAME"),k=u("REGEX");!A&&!k&&(k=u("ASTERISK"));let N=f();m("CLOSE");let P=d();b(T,A,k,N,P);continue}y(),m("END")}return o}function Us(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function i8(e){return e&&e.ignoreCase?"ui":"u"}function M7e(e,t,n){return FR(UR(e,n),t,n)}function Lc(e){switch(e){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function FR(e,t,n={}){n.delimiter??(n.delimiter="/#?"),n.prefixes??(n.prefixes="./"),n.sensitive??(n.sensitive=!1),n.strict??(n.strict=!1),n.end??(n.end=!0),n.start??(n.start=!0),n.endsWith="";let s=n.start?"^":"";for(let l of e){if(l.type===3){l.modifier===3?s+=Us(l.value):s+=`(?:${Us(l.value)})${Lc(l.modifier)}`;continue}t&&t.push(l.name);let u=`[^${Us(n.delimiter)}]+?`,d=l.value;if(l.type===1?d=u:l.type===0&&(d=I5),!l.prefix.length&&!l.suffix.length){l.modifier===3||l.modifier===1?s+=`(${d})${Lc(l.modifier)}`:s+=`((?:${d})${Lc(l.modifier)})`;continue}if(l.modifier===3||l.modifier===1){s+=`(?:${Us(l.prefix)}(${d})${Us(l.suffix)})`,s+=Lc(l.modifier);continue}s+=`(?:${Us(l.prefix)}`,s+=`((?:${d})(?:`,s+=Us(l.suffix),s+=Us(l.prefix),s+=`(?:${d}))*)${Us(l.suffix)})`,l.modifier===0&&(s+="?")}let o=`[${Us(n.endsWith)}]|$`,r=`[${Us(n.delimiter)}]`;if(n.end)return n.strict||(s+=`${r}?`),n.endsWith.length?s+=`(?=${o})`:s+="$",new RegExp(s,i8(n));n.strict||(s+=`(?:${r}(?=${o}))?`);let a=!1;if(e.length){let l=e[e.length-1];l.type===3&&l.modifier===3&&(a=n.delimiter.indexOf(l)>-1)}return a||(s+=`(?=${r}|${o})`),new RegExp(s,i8(n))}var Vr={delimiter:"",prefixes:"",sensitive:!0,strict:!0},N7e={delimiter:".",prefixes:"",sensitive:!0,strict:!0},R7e={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function P7e(e,t){return e.length?e[0]==="/"?!0:!t||e.length<2?!1:(e[0]=="\\"||e[0]=="{")&&e[1]=="/":!1}function BR(e,t){return e.startsWith(t)?e.substring(t.length,e.length):e}function L7e(e,t){return e.endsWith(t)?e.substr(0,e.length-t.length):e}function VR(e){return!e||e.length<2?!1:e[0]==="["||(e[0]==="\\"||e[0]==="{")&&e[1]==="["}var HR=["ftp","file","http","https","ws","wss"];function zR(e){if(!e)return!0;for(let t of HR)if(e.test(t))return!0;return!1}function O7e(e,t){if(e=BR(e,"#"),t||e==="")return e;let n=new URL("https://example.com");return n.hash=e,n.hash?n.hash.substring(1,n.hash.length):""}function D7e(e,t){if(e=BR(e,"?"),t||e==="")return e;let n=new URL("https://example.com");return n.search=e,n.search?n.search.substring(1,n.search.length):""}function j7e(e,t){return t||e===""?e:VR(e)?$R(e):WR(e)}function U7e(e,t){if(t||e==="")return e;let n=new URL("https://example.com");return n.password=e,n.password}function F7e(e,t){if(t||e==="")return e;let n=new URL("https://example.com");return n.username=e,n.username}function B7e(e,t,n){if(n||e==="")return e;if(t&&!HR.includes(t))return new URL(`${t}:${e}`).pathname;let s=e[0]=="/";return e=new URL(s?e:"/-"+e,"https://example.com").pathname,s||(e=e.substring(2,e.length)),e}function V7e(e,t,n){return GR(t)===e&&(e=""),n||e===""?e:qR(e)}function H7e(e,t){return e=L7e(e,":"),t||e===""?e:ly(e)}function GR(e){switch(e){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function ly(e){if(e==="")return e;if(/^[-+.A-Za-z0-9]*$/.test(e))return e.toLowerCase();throw new TypeError(`Invalid protocol '${e}'.`)}function z7e(e){if(e==="")return e;let t=new URL("https://example.com");return t.username=e,t.username}function G7e(e){if(e==="")return e;let t=new URL("https://example.com");return t.password=e,t.password}function WR(e){if(e==="")return e;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(e))throw new TypeError(`Invalid hostname '${e}'`);let t=new URL("https://example.com");return t.hostname=e,t.hostname}function $R(e){if(e==="")return e;if(/[^0-9a-fA-F[\]:]/g.test(e))throw new TypeError(`Invalid IPv6 hostname '${e}'`);return e.toLowerCase()}function qR(e){if(e===""||/^[0-9]*$/.test(e)&&parseInt(e)<=65535)return e;throw new TypeError(`Invalid port '${e}'.`)}function W7e(e){if(e==="")return e;let t=new URL("https://example.com");return t.pathname=e[0]!=="/"?"/-"+e:e,e[0]!=="/"?t.pathname.substring(2,t.pathname.length):t.pathname}function $7e(e){return e===""?e:new URL(`data:${e}`).pathname}function q7e(e){if(e==="")return e;let t=new URL("https://example.com");return t.search=e,t.search.substring(1,t.search.length)}function K7e(e){if(e==="")return e;let t=new URL("https://example.com");return t.hash=e,t.hash.substring(1,t.hash.length)}var qc,Qn,In,zt,di,Kc,Cs,Zc,Yc,Qc,we,Cn,KR,_5,Iu,Hf,Fs,T5,ZR,zf,YR,QR,Gf,Ic,Qa,JR,XR,eP,tP,Mo,nP,g8,Z7e=(g8=class{constructor(e){Vt(this,we);Vt(this,qc);Vt(this,Qn,[]);Vt(this,In,{});Vt(this,zt,0);Vt(this,di,1);Vt(this,Kc,0);Vt(this,Cs,0);Vt(this,Zc,0);Vt(this,Yc,0);Vt(this,Qc,!1);bt(this,qc,e)}get result(){return me(this,In)}parse(){for(bt(this,Qn,jR(me(this,qc),!0));me(this,zt)<me(this,Qn).length;bt(this,zt,me(this,zt)+me(this,di))){if(bt(this,di,1),me(this,Qn)[me(this,zt)].type==="END"){if(me(this,Cs)===0){Le(this,we,_5).call(this),Le(this,we,Qa).call(this)?Le(this,we,Cn).call(this,9,1):Le(this,we,Ic).call(this)?Le(this,we,Cn).call(this,8,1):Le(this,we,Cn).call(this,7,0);continue}else if(me(this,Cs)===2){Le(this,we,Iu).call(this,5);continue}Le(this,we,Cn).call(this,10,0);break}if(me(this,Zc)>0)if(Le(this,we,XR).call(this))bt(this,Zc,me(this,Zc)-1);else continue;if(Le(this,we,JR).call(this)){bt(this,Zc,me(this,Zc)+1);continue}switch(me(this,Cs)){case 0:Le(this,we,T5).call(this)&&Le(this,we,Iu).call(this,1);break;case 1:if(Le(this,we,T5).call(this)){Le(this,we,nP).call(this);let e=7,t=1;Le(this,we,ZR).call(this)?(e=2,t=3):me(this,Qc)&&(e=2),Le(this,we,Cn).call(this,e,t)}break;case 2:Le(this,we,zf).call(this)?Le(this,we,Iu).call(this,3):(Le(this,we,Gf).call(this)||Le(this,we,Ic).call(this)||Le(this,we,Qa).call(this))&&Le(this,we,Iu).call(this,5);break;case 3:Le(this,we,YR).call(this)?Le(this,we,Cn).call(this,4,1):Le(this,we,zf).call(this)&&Le(this,we,Cn).call(this,5,1);break;case 4:Le(this,we,zf).call(this)&&Le(this,we,Cn).call(this,5,1);break;case 5:Le(this,we,eP).call(this)?bt(this,Yc,me(this,Yc)+1):Le(this,we,tP).call(this)&&bt(this,Yc,me(this,Yc)-1),Le(this,we,QR).call(this)&&!me(this,Yc)?Le(this,we,Cn).call(this,6,1):Le(this,we,Gf).call(this)?Le(this,we,Cn).call(this,7,0):Le(this,we,Ic).call(this)?Le(this,we,Cn).call(this,8,1):Le(this,we,Qa).call(this)&&Le(this,we,Cn).call(this,9,1);break;case 6:Le(this,we,Gf).call(this)?Le(this,we,Cn).call(this,7,0):Le(this,we,Ic).call(this)?Le(this,we,Cn).call(this,8,1):Le(this,we,Qa).call(this)&&Le(this,we,Cn).call(this,9,1);break;case 7:Le(this,we,Ic).call(this)?Le(this,we,Cn).call(this,8,1):Le(this,we,Qa).call(this)&&Le(this,we,Cn).call(this,9,1);break;case 8:Le(this,we,Qa).call(this)&&Le(this,we,Cn).call(this,9,1);break}}me(this,In).hostname!==void 0&&me(this,In).port===void 0&&(me(this,In).port="")}},qc=new WeakMap,Qn=new WeakMap,In=new WeakMap,zt=new WeakMap,di=new WeakMap,Kc=new WeakMap,Cs=new WeakMap,Zc=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,we=new WeakSet,Cn=function(e,t){var n,s,o;switch(me(this,Cs)){case 0:break;case 1:me(this,In).protocol=Le(this,we,Mo).call(this);break;case 2:break;case 3:me(this,In).username=Le(this,we,Mo).call(this);break;case 4:me(this,In).password=Le(this,we,Mo).call(this);break;case 5:me(this,In).hostname=Le(this,we,Mo).call(this);break;case 6:me(this,In).port=Le(this,we,Mo).call(this);break;case 7:me(this,In).pathname=Le(this,we,Mo).call(this);break;case 8:me(this,In).search=Le(this,we,Mo).call(this);break;case 9:me(this,In).hash=Le(this,we,Mo).call(this);break}me(this,Cs)!==0&&e!==10&&([1,2,3,4].includes(me(this,Cs))&&[6,7,8,9].includes(e)&&((n=me(this,In)).hostname??(n.hostname="")),[1,2,3,4,5,6].includes(me(this,Cs))&&[8,9].includes(e)&&((s=me(this,In)).pathname??(s.pathname=me(this,Qc)?"/":"")),[1,2,3,4,5,6,7].includes(me(this,Cs))&&e===9&&((o=me(this,In)).search??(o.search=""))),Le(this,we,KR).call(this,e,t)},KR=function(e,t){bt(this,Cs,e),bt(this,Kc,me(this,zt)+t),bt(this,zt,me(this,zt)+t),bt(this,di,0)},_5=function(){bt(this,zt,me(this,Kc)),bt(this,di,0)},Iu=function(e){Le(this,we,_5).call(this),bt(this,Cs,e)},Hf=function(e){return e<0&&(e=me(this,Qn).length-e),e<me(this,Qn).length?me(this,Qn)[e]:me(this,Qn)[me(this,Qn).length-1]},Fs=function(e,t){let n=Le(this,we,Hf).call(this,e);return n.value===t&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")},T5=function(){return Le(this,we,Fs).call(this,me(this,zt),":")},ZR=function(){return Le(this,we,Fs).call(this,me(this,zt)+1,"/")&&Le(this,we,Fs).call(this,me(this,zt)+2,"/")},zf=function(){return Le(this,we,Fs).call(this,me(this,zt),"@")},YR=function(){return Le(this,we,Fs).call(this,me(this,zt),":")},QR=function(){return Le(this,we,Fs).call(this,me(this,zt),":")},Gf=function(){return Le(this,we,Fs).call(this,me(this,zt),"/")},Ic=function(){if(Le(this,we,Fs).call(this,me(this,zt),"?"))return!0;if(me(this,Qn)[me(this,zt)].value!=="?")return!1;let e=Le(this,we,Hf).call(this,me(this,zt)-1);return e.type!=="NAME"&&e.type!=="REGEX"&&e.type!=="CLOSE"&&e.type!=="ASTERISK"},Qa=function(){return Le(this,we,Fs).call(this,me(this,zt),"#")},JR=function(){return me(this,Qn)[me(this,zt)].type=="OPEN"},XR=function(){return me(this,Qn)[me(this,zt)].type=="CLOSE"},eP=function(){return Le(this,we,Fs).call(this,me(this,zt),"[")},tP=function(){return Le(this,we,Fs).call(this,me(this,zt),"]")},Mo=function(){let e=me(this,Qn)[me(this,zt)],t=Le(this,we,Hf).call(this,me(this,Kc)).index;return me(this,qc).substring(t,e.index)},nP=function(){let e={};Object.assign(e,Vr),e.encodePart=ly;let t=M7e(Le(this,we,Mo).call(this),void 0,e);bt(this,Qc,zR(t))},g8),T0=["protocol","username","password","hostname","port","pathname","search","hash"],Ur="*";function c8(e,t){if(typeof e!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(e,t);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}function Xo(e,t){return t?_u(e):e}function bu(e,t,n){let s;if(typeof t.baseURL=="string")try{s=new URL(t.baseURL),t.protocol===void 0&&(e.protocol=Xo(s.protocol.substring(0,s.protocol.length-1),n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&(e.username=Xo(s.username,n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&t.password===void 0&&(e.password=Xo(s.password,n)),t.protocol===void 0&&t.hostname===void 0&&(e.hostname=Xo(s.hostname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&(e.port=Xo(s.port,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&(e.pathname=Xo(s.pathname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&(e.search=Xo(s.search.substring(1,s.search.length),n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&t.hash===void 0&&(e.hash=Xo(s.hash.substring(1,s.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${t.baseURL}'.`)}if(typeof t.protocol=="string"&&(e.protocol=H7e(t.protocol,n)),typeof t.username=="string"&&(e.username=F7e(t.username,n)),typeof t.password=="string"&&(e.password=U7e(t.password,n)),typeof t.hostname=="string"&&(e.hostname=j7e(t.hostname,n)),typeof t.port=="string"&&(e.port=V7e(t.port,e.protocol,n)),typeof t.pathname=="string"){if(e.pathname=t.pathname,s&&!P7e(e.pathname,n)){let o=s.pathname.lastIndexOf("/");o>=0&&(e.pathname=Xo(s.pathname.substring(0,o+1),n)+e.pathname)}e.pathname=B7e(e.pathname,e.protocol,n)}return typeof t.search=="string"&&(e.search=D7e(t.search,n)),typeof t.hash=="string"&&(e.hash=O7e(t.hash,n)),e}function _u(e){return e.replace(/([+*?:{}()\\])/g,"\\$1")}function Y7e(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function Q7e(e,t){t.delimiter??(t.delimiter="/#?"),t.prefixes??(t.prefixes="./"),t.sensitive??(t.sensitive=!1),t.strict??(t.strict=!1),t.end??(t.end=!0),t.start??(t.start=!0),t.endsWith="";let n=".*",s=`[^${Y7e(t.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,r="";for(let a=0;a<e.length;++a){let l=e[a];if(l.type===3){if(l.modifier===3){r+=_u(l.value);continue}r+=`{${_u(l.value)}}${Lc(l.modifier)}`;continue}let u=l.hasCustomName(),d=!!l.suffix.length||!!l.prefix.length&&(l.prefix.length!==1||!t.prefixes.includes(l.prefix)),m=a>0?e[a-1]:null,f=a<e.length-1?e[a+1]:null;if(!d&&u&&l.type===1&&l.modifier===3&&f&&!f.prefix.length&&!f.suffix.length)if(f.type===3){let h=f.value.length>0?f.value[0]:"";d=o.test(h)}else d=!f.hasCustomName();if(!d&&!l.prefix.length&&m&&m.type===3){let h=m.value[m.value.length-1];d=t.prefixes.includes(h)}d&&(r+="{"),r+=_u(l.prefix),u&&(r+=`:${l.name}`),l.type===2?r+=`(${l.value})`:l.type===1?u||(r+=`(${s})`):l.type===0&&(!u&&(!m||m.type===3||m.modifier!==3||d||l.prefix!=="")?r+="*":r+=`(${n})`),l.type===1&&u&&l.suffix.length&&o.test(l.suffix[0])&&(r+="\\"),r+=_u(l.suffix),d&&(r+="}"),l.modifier!==3&&(r+=Lc(l.modifier))}return r}var Po,mi,Jc,_n,ao,Xc,v8,J7e=(v8=class{constructor(e={},t,n){Vt(this,Po);Vt(this,mi,{});Vt(this,Jc,{});Vt(this,_n,{});Vt(this,ao,{});Vt(this,Xc,!1);try{let s;if(typeof t=="string"?s=t:n=t,typeof e=="string"){let l=new Z7e(e);if(l.parse(),e=l.result,s===void 0&&typeof e.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");e.baseURL=s}else{if(!e||typeof e!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(s)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let o={ignoreCase:n.ignoreCase===!0};bt(this,Po,bu({pathname:Ur,protocol:Ur,username:Ur,password:Ur,hostname:Ur,port:Ur,search:Ur,hash:Ur},e,!0)),GR(me(this,Po).protocol)===me(this,Po).port&&(me(this,Po).port="");let a;for(a of T0){if(!(a in me(this,Po)))continue;let l={},u=me(this,Po)[a];switch(me(this,Jc)[a]=[],a){case"protocol":Object.assign(l,Vr),l.encodePart=ly;break;case"username":Object.assign(l,Vr),l.encodePart=z7e;break;case"password":Object.assign(l,Vr),l.encodePart=G7e;break;case"hostname":Object.assign(l,N7e),VR(u)?l.encodePart=$R:l.encodePart=WR;break;case"port":Object.assign(l,Vr),l.encodePart=qR;break;case"pathname":zR(me(this,mi).protocol)?(Object.assign(l,R7e,o),l.encodePart=W7e):(Object.assign(l,Vr,o),l.encodePart=$7e);break;case"search":Object.assign(l,Vr,o),l.encodePart=q7e;break;case"hash":Object.assign(l,Vr,o),l.encodePart=K7e;break}try{me(this,ao)[a]=UR(u,l),me(this,mi)[a]=FR(me(this,ao)[a],me(this,Jc)[a],l),me(this,_n)[a]=Q7e(me(this,ao)[a],l),bt(this,Xc,me(this,Xc)||me(this,ao)[a].some(d=>d.type===2))}catch{throw new TypeError(`invalid ${a} pattern '${me(this,Po)[a]}'.`)}}}catch(s){throw new TypeError(`Failed to construct 'URLPattern': ${s.message}`)}}test(e={},t){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return!1;try{typeof e=="object"?n=bu(n,e,!1):n=bu(n,c8(e,t),!1)}catch{return!1}let s;for(s of T0)if(!me(this,mi)[s].exec(n[s]))return!1;return!0}exec(e={},t){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof e!="string"&&t)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof e>"u")return;try{typeof e=="object"?n=bu(n,e,!1):n=bu(n,c8(e,t),!1)}catch{return null}let s={};t?s.inputs=[e,t]:s.inputs=[e];let o;for(o of T0){let r=me(this,mi)[o].exec(n[o]);if(!r)return null;let a={};for(let[l,u]of me(this,Jc)[o].entries())if(typeof u=="string"||typeof u=="number"){let d=r[l+1];a[u]=d}s[o]={input:n[o]??"",groups:a}}return s}static compareComponent(e,t,n){let s=(l,u)=>{for(let d of["type","modifier","prefix","value","suffix"]){if(l[d]<u[d])return-1;if(l[d]!==u[d])return 1}return 0},o=new Hu(3,"","","","",3),r=new Hu(0,"","","","",3),a=(l,u)=>{let d=0;for(;d<Math.min(l.length,u.length);++d){let m=s(l[d],u[d]);if(m)return m}return l.length===u.length?0:s(l[d]??o,u[d]??o)};return!me(t,_n)[e]&&!me(n,_n)[e]?0:me(t,_n)[e]&&!me(n,_n)[e]?a(me(t,ao)[e],[r]):!me(t,_n)[e]&&me(n,_n)[e]?a([r],me(n,ao)[e]):a(me(t,ao)[e],me(n,ao)[e])}get protocol(){return me(this,_n).protocol}get username(){return me(this,_n).username}get password(){return me(this,_n).password}get hostname(){return me(this,_n).hostname}get port(){return me(this,_n).port}get pathname(){return me(this,_n).pathname}get search(){return me(this,_n).search}get hash(){return me(this,_n).hash}get hasRegExpGroups(){return me(this,Xc)}},Po=new WeakMap,mi=new WeakMap,Jc=new WeakMap,_n=new WeakMap,ao=new WeakMap,Xc=new WeakMap,v8);globalThis.URLPattern||(globalThis.URLPattern=J7e);let sP;function jke(e){sP=e}const l8=["copilot.microsoft.com","copilot.com","copilot-stg.com","studiostaticassetsprod.azureedge.net",window.location.hostname];function X7e(){var e,t;typeof window<"u"&&(window.copilotTrustedTypesPolicy=(e=window.trustedTypes)==null?void 0:e.createPolicy("copilotPolicy",{createHTML:n=>a8.sanitize(n)}),(t=window.trustedTypes)==null||t.createPolicy("default",{createScriptURL:n=>{if(!n)throw new Error(`Invalid script URL "${n}" blocked by CSP.`);const s=/^\/cl\//,o=new URLPattern({protocol:"https",hostname:"*.clarity.ms"}),r=new URLPattern({protocol:"https",hostname:"*.cloudflare.com"}),a=new URLPattern({protocol:"https",hostname:"bat.bing.com"}),l=new URLPattern({protocol:"https",hostname:"az416426.vo.msecnd.net"}),u=new URLPattern({protocol:"https",hostname:"fpt.dfp.microsoft.com"}),d=new URLPattern({protocol:"https",hostname:"assets.msn.com"}),m=new URLPattern({protocol:"https",hostname:"content.lifecycle.office.net"}),f=new URLPattern({protocol:"https",hostname:"*.paypal.com"}),h=new URLPattern({protocol:"https",hostname:"*.paypalobjects.com"}),g=new URLPattern({protocol:"https",hostname:"*.stripe.com"}),C=new URLPattern({protocol:"https",hostname:"tvmodules-vidaa.vidaahub.com"}),v=new URLPattern({protocol:window.location.protocol,hostname:window.location.hostname,port:window.location.port||void 0,pathname:"/src/workers/*.worker.ts*"}),y=l8.map(E=>new URLPattern({protocol:"https",hostname:E,pathname:"*/assets/*.worker-*.js"})),b=E=>{if(!E.startsWith("blob:"))return!1;const S=E.match(/^blob:(https?:\/\/[^/]+)/);if(!S||!S[1])return!1;const I=S[1];try{const _=new URL(I);return l8.some(T=>_.hostname===T)}catch{return!1}};if(s.test(n)||o.test(n)||r.test(n)||a.test(n)||l.test(n)||u.test(n)||d.test(n)||m.test(n)||f.test(n)||h.test(n)||g.test(n)||C.test(n)||v.test(n)||y.some(E=>E.test(n))||n===sP||b(n))return n;throw new Error(`Unsafe script URL "${n}" blocked by CSP.`)},createHTML:n=>a8.sanitize(n)}))}const eSe="6472538445",tSe="6738511300";function nSe(){const e=document.querySelector('meta[name="apple-itunes-app"]');e&&e.remove();let t=null;if(Fv()?t=eSe:YK()&&(t=tSe),t){const n=document.createElement("meta");n.name="apple-itunes-app",n.content=`app-id=${t}`,document.head.appendChild(n)}}X7e();nSe();nO.createRoot(document.getElementById("app")).render(i.jsx(zu.StrictMode,{children:i.jsx(r7e,{})}));export{oEe as $,D as A,be as B,Bf as C,dn as D,mt as E,El as F,Bce as G,Gt as H,EIe as I,wIe as J,zo as K,$i as L,ne as M,an as N,zn as O,RSe as P,jn as Q,DIe as R,GSe as S,BSe as T,u3 as U,aIe as V,bo as W,mN as X,xo as Y,ct as Z,_N as _,zAe as a,IR as a$,Ti as a0,zae as a1,nIe as a2,ln as a3,V0 as a4,ls as a5,Rl as a6,gT as a7,lIe as a8,Vp as a9,Aw as aA,un as aB,QSe as aC,a$ as aD,KC as aE,Pw as aF,ml as aG,kp as aH,BC as aI,Wme as aJ,uC as aK,C1 as aL,VEe as aM,$d as aN,BY as aO,Z_ as aP,lye as aQ,cye as aR,kN as aS,Rd as aT,aQ as aU,St as aV,I2e as aW,XT as aX,vCe as aY,Ea as aZ,wm as a_,it as aa,ds as ab,pt as ac,ts as ad,nt as ae,Fe as af,Kre as ag,_i as ah,Qt as ai,UIe as aj,wt as ak,xSe as al,Vn as am,IT as an,fm as ao,ye as ap,sse as aq,vm as ar,rEe as as,Fo as at,h3 as au,Ul as av,ek as aw,lu as ax,hl as ay,Yt as az,Ue as b,s5 as b$,mm as b0,V2e as b1,H2 as b2,F7 as b3,CZ as b4,d3 as b5,SEe as b6,es as b7,qE as b8,Eo as b9,Ge as bA,Dl as bB,Ia as bC,tme as bD,ASe as bE,Hd as bF,rr as bG,rn as bH,Xf as bI,K5 as bJ,SN as bK,Pc as bL,An as bM,vSe as bN,OC as bO,Ip as bP,rp as bQ,uN as bR,hn as bS,KAe as bT,VT as bU,Nle as bV,$ee as bW,Jpe as bX,d5 as bY,Hl as bZ,t6e as b_,gt as ba,Fp as bb,hs as bc,Qs as bd,_me as be,iwe as bf,Gue as bg,OZ as bh,sh as bi,ZEe as bj,cn as bk,JY as bl,XC as bm,yce as bn,x0e as bo,S0e as bp,zee as bq,iJ as br,G4 as bs,vC as bt,Rwe as bu,nme as bv,Ode as bw,Jwe as bx,Mae as by,y_e as bz,Dce as c,ih as c$,AM as c0,TM as c1,v5e as c2,y5e as c3,E5e as c4,S5e as c5,HAe as c6,x5e as c7,Xi as c8,c3 as c9,$Te as cA,_r as cB,dh as cC,$o as cD,ho as cE,J7 as cF,qt as cG,sN as cH,TI as cI,mle as cJ,Xn as cK,Pu as cL,ks as cM,Il as cN,Kpe as cO,pa as cP,RC as cQ,z3 as cR,bAe as cS,G3 as cT,xAe as cU,SAe as cV,fM as cW,dM as cX,_m as cY,$we as cZ,qwe as c_,cA as ca,gm as cb,pn as cc,j3 as cd,qi as ce,Ml as cf,Ta as cg,fa as ch,Tl as ci,R_ as cj,lm as ck,Z1 as cl,q1 as cm,kl as cn,$1 as co,hee as cp,Nt as cq,XEe as cr,JEe as cs,nwe as ct,cwe as cu,cf as cv,G_ as cw,rme as cx,RA as cy,_x as cz,W as d,JSe as d$,kc as d0,fh as d1,D3 as d2,Ks as d3,J_e as d4,zN as d5,Zr as d6,WY as d7,vs as d8,i4 as d9,Em as dA,fA as dB,N_e as dC,MA as dD,$de as dE,Sn as dF,Xk as dG,sEe as dH,c_e as dI,hAe as dJ,l_e as dK,u_e as dL,dAe as dM,Xge as dN,v0e as dO,fr as dP,cEe as dQ,iEe as dR,lEe as dS,CSe as dT,PSe as dU,ca as dV,BZ as dW,wc as dX,rw as dY,sge as dZ,Nhe as d_,b1 as da,gEe as db,Hi as dc,Mn as dd,Wd as de,DEe as df,pce as dg,LT as dh,Ws as di,of as dj,dIe as dk,f_e as dl,OCe as dm,tn as dn,JTe as dp,XTe as dq,fd as dr,nB as ds,tB as dt,__e as du,NSe as dv,Er as dw,j1 as dx,vke as dy,bm as dz,VSe as e,vh as e$,qs as e0,XY as e1,xI as e2,vt as e3,Ns as e4,nh as e5,RIe as e6,$ve as e7,Ji as e8,_Ie as e9,Eme as eA,ht as eB,P7 as eC,$e as eD,Vde as eE,Im as eF,Hv as eG,ms as eH,R2 as eI,Qk as eJ,Qr as eK,Jve as eL,tke as eM,e_e as eN,JAe as eO,QAe as eP,nke as eQ,XAe as eR,eke as eS,iie as eT,wr as eU,TIe as eV,Kk as eW,RN as eX,xIe as eY,SIe as eZ,gee as e_,rR as ea,oR as eb,YCe as ec,Nl as ed,I1 as ee,Dw as ef,Yd as eg,pwe as eh,Qu as ei,hi as ej,om as ek,gZ as el,gF as em,Wv as en,Ir as eo,Q_e as ep,$k as eq,lse as er,Q2 as es,Gme as et,VZ as eu,cse as ev,exe as ew,X6e as ex,Yg as ey,BA as ez,Ct as f,pCe as f$,Fl as f0,v3 as f1,Aa as f2,s3 as f3,k3 as f4,ec as f5,Y1 as f6,zwe as f7,W0e as f8,uM as f9,Gv as fA,iR as fB,Bo as fC,Sm as fD,gpe as fE,Vk as fF,ph as fG,bY as fH,pIe as fI,Yv as fJ,L3 as fK,mIe as fL,bIe as fM,bSe as fN,PEe as fO,LEe as fP,REe as fQ,Ew as fR,fIe as fS,IX as fT,hme as fU,gh as fV,W5 as fW,R as fX,Jn as fY,ul as fZ,Dp as f_,Gae as fa,Vae as fb,Vu as fc,Ft as fd,s9 as fe,W4e as ff,rIe as fg,oIe as fh,B4e as fi,KI as fj,Mee as fk,gCe as fl,kw as fm,jEe as fn,Rp as fo,Np as fp,$fe as fq,go as fr,N2 as fs,Bwe as ft,zT as fu,Rw as fv,_1 as fw,ia as fx,rS as fy,XQ as fz,pe as g,r0e as g$,Dfe as g0,Qx as g1,wke as g2,bl as g3,R1 as g4,Z3 as g5,hN as g6,ZAe as g7,jAe as g8,jf as g9,L_e as gA,E_e as gB,Dde as gC,u_ as gD,k_e as gE,M_e as gF,D_e as gG,mk as gH,eme as gI,Hr as gJ,eEe as gK,Fme as gL,nEe as gM,K7 as gN,wZ as gO,IZ as gP,Tp as gQ,qI as gR,Yve as gS,XSe as gT,P_e as gU,R_e as gV,Zd as gW,G5 as gX,hSe as gY,z5 as gZ,z0e as g_,Hs as ga,Ga as gb,jr as gc,Uu as gd,Qd as ge,Tr as gf,C3 as gg,xh as gh,gd as gi,iy as gj,n6e as gk,l6e as gl,SC as gm,ev as gn,ibe as go,pke as gp,h_e as gq,w6e as gr,bCe as gs,KN as gt,yCe as gu,Zwe as gv,ME as gw,Nae as gx,w_e as gy,O_e as gz,kn as h,Oke as h$,V3 as h0,eM as h1,Y_ as h2,Que as h3,F3 as h4,lN as h5,fo as h6,g1 as h7,KY as h8,bEe as h9,whe as hA,Pke as hB,Rke as hC,ece as hD,aR as hE,x5 as hF,sR as hG,kZ as hH,uIe as hI,$_e as hJ,Pm as hK,ok as hL,Hfe as hM,Tm as hN,O4 as hO,YSe as hP,DAe as hQ,dhe as hR,QTe as hS,cy as hT,K9 as hU,Rre as hV,q_ as hW,K_ as hX,Kxe as hY,e9e as hZ,Lke as h_,QE as ha,TA as hb,zC as hc,DI as hd,D5e as he,YI as hf,jI as hg,Eke as hh,Z4e as hi,zi as hj,jwe as hk,M1 as hl,Uwe as hm,Owe as hn,Lw as ho,Q5 as hp,See as hq,Pp as hr,AA as hs,r3 as ht,x6e as hu,_4e as hv,Vfe as hw,pd as hx,DTe as hy,xN as hz,_t as i,p_e as i$,Wee as i0,Dke as i1,Nd as i2,Sxe as i3,t1e as i4,KTe as i5,_R as i6,gk as i7,Wk as i8,e1e as i9,ff as iA,tce as iB,EC as iC,MC as iD,xse as iE,lo as iF,lme as iG,W_e as iH,YAe as iI,um as iJ,dN as iK,lh as iL,J2 as iM,Z9 as iN,NIe as iO,i1e as iP,IIe as iQ,HM as iR,T3 as iS,pk as iT,qde as iU,D1 as iV,Awe as iW,ike as iX,m_e as iY,d_e as iZ,aEe as i_,A3 as ia,Cd as ib,vd as ic,PM as id,J3 as ie,ESe as ig,wSe as ih,KSe as ii,qSe as ij,ZSe as ik,Js as il,Ch as im,NEe as io,hIe as ip,vIe as iq,gIe as ir,DA as is,xx as it,ime as iu,Cfe as iv,Fv as iw,pEe as ix,hEe as iy,QK as iz,M as j,Un as j$,FE as j0,Iae as j1,bN as j2,LCe as j3,zIe as j4,$Ie as j5,WIe as j6,FIe as j7,HIe as j8,cQ as j9,bV as jA,Nwe as jB,Ww as jC,b6e as jD,jIe as jE,jSe as jF,Ble as jG,km as jH,VM as jI,Bp as jJ,zc as jK,jee as jL,cg as jM,rwe as jN,OSe as jO,Vl as jP,mw as jQ,vx as jR,T0e as jS,Ow as jT,A0e as jU,zY as jV,GY as jW,po as jX,k1 as jY,ud as jZ,t_ as j_,qIe as ja,Efe as jb,GE as jc,xfe as jd,mv as je,Wwe as jf,j6 as jg,ewe as jh,k4 as ji,owe as jj,swe as jk,ag as jl,Co as jm,Lme as jn,zEe as jo,uye as jp,wa as jq,dl as jr,UA as js,Du as jt,wu as ju,yM as jv,uEe as jw,ot as jx,qee as jy,Gee as jz,je as k,LC as k$,Ok as k0,Sa as k1,Pwe as k2,hR as k3,qo as k4,OAe as k5,N4e as k6,ZA as k7,Sr as k8,a3 as k9,tTe as kA,Q2e as kB,q2e as kC,e5e as kD,Yr as kE,VAe as kF,BAe as kG,X_e as kH,I0e as kI,GC as kJ,vTe as kK,fTe as kL,pTe as kM,bTe as kN,dTe as kO,hTe as kP,mTe as kQ,gTe as kR,CTe as kS,yTe as kT,xTe as kU,JA as kV,ame as kW,_s as kX,KB as kY,bwe as kZ,PC as k_,Kee as ka,a8 as kb,fee as kc,DSe as kd,wN as ke,Hn as kf,g2 as kg,bh as kh,Jee as ki,Yee as kj,CR as kk,vR as kl,n_ as km,Lfe as kn,Ofe as ko,xEe as kp,iIe as kq,_Ee as kr,USe as ks,FSe as kt,zSe as ku,HSe as kv,AIe as kw,Sx as kx,nTe as ky,eTe as kz,F as l,kwe as l$,V2 as l0,ywe as l1,Cwe as l2,twe as l3,jke as l4,l3 as l5,gSe as l6,Eee as l7,kue as l8,WJ as l9,Wo as lA,UTe as lB,hCe as lC,spe as lD,uk as lE,GN as lF,ow as lG,PAe as lH,v9 as lI,MCe as lJ,M3e as lK,RAe as lL,Zk as lM,VIe as lN,$w as lO,f4e as lP,Mue as lQ,kAe as lR,C_e as lS,Y3 as lT,Ys as lU,cIe as lV,g_e as lW,CB as lX,nZ as lY,eT as lZ,sn as l_,ed as la,b7 as lb,PA as lc,gae as ld,Qye as le,qye as lf,Ja as lg,qve as lh,g2e as li,i5e as lj,A8 as lk,nM as ll,h9 as lm,Kwe as ln,gC as lo,p2e as lp,Lle as lq,Ole as lr,TF as ls,Ple as lt,GIe as lu,JT as lv,BIe as lw,AX as lx,MZ as ly,jl as lz,ue as m,P1 as m$,X7 as m0,Zt as m1,vn as m2,Ywe as m3,yae as m4,xR as m5,a_e as m6,r_e as m7,dse as m8,use as m9,Fwe as mA,Uce as mB,m5e as mC,d5e as mD,dEe as mE,LAe as mF,UAe as mG,P2e as mH,FAe as mI,yee as mJ,xwe as mK,Ewe as mL,wwe as mM,gwe as mN,hwe as mO,vwe as mP,ZJ as mQ,KJ as mR,QJ as mS,YJ as mT,LSe as mU,Xu as mV,tX as mW,nX as mX,Swe as mY,yye as mZ,hd as m_,vde as ma,t_e as mb,n_e as mc,s_e as md,Cx as me,o_e as mf,FQ as mg,cx as mh,yIe as mi,eR as mj,Y_e as mk,fwe as ml,mwe as mm,Hce as mn,Vce as mo,Wae as mp,kIe as mq,UT as mr,$ce as ms,MIe as mt,Lwe as mu,FEe as mv,bn as mw,$ne as mx,UEe as my,Tw as mz,O1 as n,eh as n$,MTe as n0,RTe as n1,PTe as n2,LTe as n3,ATe as n4,kTe as n5,nk as n6,X2 as n7,wTe as n8,TTe as n9,Ree as nA,oke as nB,mR as nC,zfe as nD,tse as nE,ry as nF,w0e as nG,Ho as nH,TS as nI,CIe as nJ,Oo as nK,Mce as nL,mEe as nM,Dn as nN,fEe as nO,ir as nP,q6 as nQ,aue as nR,$Se as nS,sTe as nT,vM as nU,fke as nV,RZ as nW,gi as nX,WSe as nY,AZ as nZ,HEe as n_,ITe as na,Qwe as nb,_Te as nc,STe as nd,NTe as ne,ETe as nf,Jv as ng,hh as nh,A4e as ni,bke as nj,ehe as nk,Cxe as nl,uae as nm,hI as nn,awe as no,vxe as np,T4e as nq,_he as nr,Mwe as ns,_9 as nt,cke as nu,ske as nv,Nee as nw,ege as nx,df as ny,ige as nz,ge as o,cie as o$,ZC as o0,CA as o1,XIe as o2,Ame as o3,kme as o4,Mme as o5,CF as o6,UZ as o7,_fe as o8,OTe as o9,AEe as oA,il as oB,qd as oC,c5e as oD,Mw as oE,vZ as oF,S7 as oG,kle as oH,IA as oI,y3e as oJ,$Y as oK,nC as oL,WEe as oM,$Ee as oN,aw as oO,Bw as oP,YY as oQ,QY as oR,ZY as oS,YEe as oT,QEe as oU,_we as oV,_0e as oW,Qge as oX,dwe as oY,uwe as oZ,VTe as o_,SF as oa,v1 as ob,Pme as oc,yo as od,nce as oe,b4 as of,uh as og,Nme as oh,TSe as oi,ISe as oj,_Se as ok,Hp as ol,sy as om,HY as on,GEe as oo,kSe as op,dde as oq,VY as or,xge as os,MSe as ot,DC as ou,EEe as ov,jZ as ow,wEe as ox,TEe as oy,kEe as oz,PIe as p,$u as p$,v_e as p0,ySe as p1,tC as p2,KEe as p3,Dwe as p4,BEe as p5,qEe as p6,Kv as p7,OEe as p8,YK as p9,U3 as pA,ld as pB,cme as pC,$4e as pD,tIe as pE,pue as pF,sIe as pG,$5 as pH,MT as pI,fR as pJ,Gfe as pK,QA as pL,wd as pM,Is as pN,S8 as pO,QO as pP,Id as pQ,mSe as pR,_c as pS,dr as pT,wO as pU,yD as pV,CD as pW,xD as pX,SD as pY,s7 as pZ,Q8 as p_,tv as pa,jk as pb,ju as pc,h1 as pd,yA as pe,tde as pf,bA as pg,xA as ph,SA as pi,EA as pj,wA as pk,QIe as pl,jN as pm,lwe as pn,Md as po,ay as pp,Ibe as pq,zme as pr,Hme as ps,lTe as pt,rke as pu,ake as pv,IEe as pw,KA as px,uTe as py,Vme as pz,re as q,iD as q$,j8 as q0,Kf as q1,LO as q2,_d as q3,tt as q4,Tu as q5,ja as q6,dSe as q7,uSe as q8,WD as q9,M8 as qA,iO as qB,_O as qC,lSe as qD,IO as qE,fD as qF,pD as qG,fi as qH,AD as qI,hD as qJ,cSe as qK,eD as qL,N0 as qM,p7 as qN,E8 as qO,k5 as qP,CO as qQ,$f as qR,rD as qS,L8 as qT,U8 as qU,W8 as qV,oD as qW,N8 as qX,aD as qY,cD as qZ,V8 as q_,pSe as qa,Zf as qb,YD as qc,kD as qd,_D as qe,TD as qf,a7 as qg,Oc as qh,P5 as qi,Ca as qj,wj as qk,$8 as ql,M5 as qm,bD as qn,A0 as qo,M0 as qp,vO as qq,k8 as qr,JO as qs,gO as qt,Qp as qu,Gu as qv,j5 as qw,Kp as qx,Yp as qy,aa as qz,ut as r,vN as r$,z8 as r0,B8 as r1,uD as r2,hO as r3,Xj as r4,y7 as r5,Ci as r6,C7 as r7,vD as r8,ur as r9,rU as rA,_b as rB,Qf as rC,l7 as rD,nU as rE,L5 as rF,Y8 as rG,O5 as rH,Ad as rI,fj as rJ,m7 as rK,pj as rL,K8 as rM,Z8 as rN,F5 as rO,pO as rP,pee as rQ,j7 as rR,e1 as rS,Gwe as rT,rm as rU,Iwe as rV,_Ce as rW,I_e as rX,j_e as rY,fk as rZ,Ff as r_,i7 as ra,O0 as rb,hj as rc,f7 as rd,Cj as re,d7 as rf,w8 as rg,DO as rh,Ed as ri,xO as rj,EO as rk,G8 as rl,Zp as rm,el as rn,Tb as ro,Qm as rp,fSe as rq,mO as rr,Ij as rs,iSe as rt,kO as ru,qf as rv,BO as rw,ij as rx,Qj as ry,B5 as rz,LIe as s,ZIe as s$,BTe as s0,vEe as s1,MEe as s2,So as s3,b3e as s4,b_e as s5,Q1 as s6,npe as s7,ck as s8,gr as s9,x_e as sA,Xwe as sB,eIe as sC,tEe as sD,kae as sE,A_e as sF,Vv as sG,R4e as sH,T_e as sI,CE as sJ,mr as sK,ol as sL,zF as sM,SSe as sN,V5 as sO,i1 as sP,Vpe as sQ,aCe as sR,RCe as sS,vf as sT,PCe as sU,w5e as sV,y3 as sW,uAe as sX,Twe as sY,Vwe as sZ,Hwe as s_,yh as sa,yEe as sb,Aae as sc,NCe as sd,HTe as se,hpe as sf,G_e as sg,V_e as sh,wpe as si,Ppe as sj,bpe as sk,Ape as sl,FTe as sm,B_e as sn,zTe as so,S3 as sp,H_e as sq,z_e as sr,F_e as ss,MAe as st,NAe as su,Qbe as sv,U_e as sw,CEe as sx,ER as sy,S_e as sz,Kt as t,YIe as t0,JIe as t1,i_e as t2,p3 as t3,q_e as t4,K_e as t5,Z_e as t6,oTe as t7,rTe as t8,aTe as t9,_Ae as tA,TAe as tB,AAe as tC,GAe as tD,WAe as tE,$Ae as tF,qAe as tG,lke as tH,uke as tI,dke as tJ,mke as tK,hke as tL,gke as tM,Cke as tN,yke as tO,xke as tP,Ske as tQ,Ike as tR,_ke as tS,Tke as tT,Ake as tU,kke as tV,Mke as tW,Nke as tX,iTe as ta,cTe as tb,jTe as tc,GTe as td,WTe as te,qTe as tf,eAe as tg,tAe as th,nAe as ti,sAe as tj,oAe as tk,rAe as tl,aAe as tm,iAe as tn,cAe as to,lAe as tp,mAe as tq,fAe as tr,pAe as ts,gAe as tt,vAe as tu,CAe as tv,yAe as tw,EAe as tx,wAe as ty,IAe as tz,pl as u,se as v,OIe as w,yC as x,Xpe as y,ka as z};

//# debugId=33ffc374-2b68-5eb1-bdaf-d8f8ea4261b5
