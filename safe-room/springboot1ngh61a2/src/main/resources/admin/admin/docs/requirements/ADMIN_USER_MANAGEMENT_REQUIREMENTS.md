# 用户管理模块需求文档（User Management v1.0）

> 版本：v1.0
> 更新日期：2025-11-15（计划日期）
> 适用路由：`/yonghu`
> 关联组件：`src/views/modules/yonghu/list.vue`
> 继承组件：`ModuleCrudPage.vue`

---

## 0. 设计关键词

会员数据管理 · 到期提醒 · 会员画像 · 数据完整性 · 批量操作

---

## 1. 模块概述

用户管理模块是健身房管理系统的核心模块之一，主要负责会员信息的录入、维护、查询和统计，为健身房运营提供基础数据支持。

### 1.1 业务价值

- **会员数据中心**：统一管理所有会员信息
- **到期提醒服务**：自动识别即将到期的会员
- **数据统计支撑**：为运营决策提供数据基础
- **会员服务支持**：为前台服务和教练提供会员信息

---

## 2. 功能需求

### 2.1 基础功能（继承 ModuleCrudPage）

- ✅ **列表展示**：分页显示会员列表，支持排序
- ✅ **搜索过滤**：支持按姓名、手机号、会员卡类型等条件搜索
- ✅ **新增会员**：录入新会员信息
- ✅ **编辑信息**：修改会员基本信息
- ✅ **删除会员**：删除无效会员记录（谨慎操作）
- ✅ **查看详情**：查看会员完整信息

### 2.2 会员到期提醒

| 功能 | 说明 | 触发条件 |
| --- | --- | --- |
| 到期提醒 | 识别即将到期的会员 | 会员卡到期前7天 |
| 批量提醒 | 批量生成到期提醒记录 | 管理员手动触发 |
| 提醒记录 | 查看已发送的提醒历史 | 系统自动记录 |

### 2.3 数据完整性保障

- **必填字段验证**：姓名、手机号、会员卡类型等关键信息
- **数据格式校验**：手机号格式、邮箱格式验证
- **唯一性约束**：手机号、身份证号等字段唯一性检查
- **关联数据验证**：会员卡类型必须存在于系统中

### 2.4 会员画像统计

| 统计维度 | 说明 | 应用场景 |
| --- | --- | --- |
| 年龄分布 | 会员年龄段统计 | 课程规划参考 |
| 性别比例 | 男女性别分布 | 设施配置参考 |
| 会员卡分布 | 各类型会员卡持有数量 | 销售策略调整 |
| 注册时间趋势 | 每月新增会员统计 | 运营效果评估 |

---

## 3. 数据字段定义

### 3.1 核心字段

| 字段名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| `id` | number | 系统生成 | 会员唯一标识 |
| `xingming` | text | ✅ | 会员姓名 |
| `shoujihao` | text | ✅ | 手机号 |
| `huiyuankaid` | select | ✅ | 关联会员卡类型 |
| `kaiqishijian` | datetime | ✅ | 会员卡开卡时间 |
| `daoqishijian` | datetime | ✅ | 会员卡到期时间 |
| `zhuangtai` | select | ✅ | 会员状态（正常/到期/停卡） |
| `xingbie` | select | - | 性别 |
| `nianling` | number | - | 年龄 |
| `dizhi` | textarea | - | 联系地址 |
| `beizhu` | textarea | - | 备注信息 |
| `addtime` | datetime | 系统生成 | 注册时间 |

### 3.2 扩展字段

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| `touxiang` | image | 会员头像 |
| `shengao` | number | 身高（cm） |
| `tizhong` | number | 体重（kg） |
| `jiankangzhuangkuang` | textarea | 健康状况描述 |
| `jinji_lianxiren` | text | 紧急联系人 |
| `jinji_shoujihao` | text | 紧急联系电话 |

---

## 4. 业务规则

### 4.1 会员状态管理

| 状态 | 描述 | 操作限制 |
| --- | --- | --- |
| 正常 | 会员卡在有效期内 | 允许预约课程 |
| 即将到期 | 到期前7天 | 允许预约，可发送提醒 |
| 已到期 | 超过到期时间 | 限制预约课程 |
| 停卡 | 管理员手动停卡 | 禁止所有服务 |

### 4.2 到期提醒规则

- **自动提醒**：系统每日检查即将到期的会员
- **提醒周期**：到期前7天、3天、1天分别提醒
- **提醒方式**：系统消息 + 管理员手动通知
- **重复提醒**：避免对同一会员重复提醒

### 4.3 数据安全

- **敏感信息保护**：密码、身份证等敏感信息不显示
- **操作日志记录**：所有会员信息变更记录操作日志
- **数据备份**：重要操作前自动备份

---

## 5. 用户界面设计

### 5.1 列表页面

- **默认排序**：按注册时间倒序
- **显示字段**：姓名、手机号、会员卡类型、状态、到期时间
- **状态标识**：用不同颜色标识会员状态
- **到期预警**：到期时间用红色高亮显示

### 5.2 会员卡片视图（可选扩展）

```
[头像] [姓名]
手机号：138****0000
会员卡：黄金年卡
到期时间：2025-12-31
状态：[正常/即将到期/已到期]
```

### 5.3 详情页面

- **基本信息**：完整展示所有字段
- **操作历史**：显示该会员的预约记录、消费记录
- **到期提醒记录**：显示已发送的提醒历史

---

## 6. 权限控制

| 权限 | 说明 | 适用角色 |
| --- | --- | --- |
| `yonghu:list` | 查看会员列表 | 管理员、教练 |
| `yonghu:create` | 新增会员 | 管理员、前台 |
| `yonghu:update` | 编辑会员信息 | 管理员、前台 |
| `yonghu:delete` | 删除会员 | 管理员（谨慎权限） |
| `yonghu:remind` | 发送到期提醒 | 管理员、前台 |
| `yonghu:export` | 导出会员数据 | 管理员 |

---

## 7. 接口定义

### 7.1 基础 CRUD 接口

```typescript
GET    /yonghu/page          // 分页列表
GET    /yonghu/info/{id}     // 详情信息
POST   /yonghu/save          // 新增会员
POST   /yonghu/update        // 更新会员
POST   /yonghu/delete        // 删除会员
```

### 7.2 业务接口

```typescript
GET    /yonghu/count                     // 会员总数统计
GET    /yonghu/expiring                  // 即将到期会员列表
POST   /yonghu/send-reminder              // 发送到期提醒
GET    /yonghu/statistics/{dimension}    // 会员统计数据
```

---

## 8. 验收标准

### 8.1 功能验收

| 验收项 | 标准 | 优先级 |
| --- | --- | --- |
| 基础CRUD | 增删改查功能正常 | 高 |
| 搜索过滤 | 支持多条件组合搜索 | 高 |
| 到期提醒 | 自动识别和提醒功能 | 高 |
| 数据校验 | 表单验证和业务规则校验 | 高 |
| 权限控制 | 不同角色功能正确隔离 | 高 |
| 数据导出 | 支持Excel导出功能 | 中 |

### 8.2 性能验收

- **列表加载**：≤ 2秒（1000条数据）
- **搜索响应**：≤ 1秒
- **大数据导出**：≤ 30秒（10000条数据）

### 8.3 用户体验验收

- **操作流畅性**：无明显卡顿
- **错误提示**：明确的错误信息和处理建议
- **批量操作**：支持批量删除、批量提醒等

---

## 9. 后续扩展

- [ ] **会员等级系统**：根据消费金额自动升级会员等级
- [ ] **积分系统**：消费积分奖励机制
- [ ] **会员推荐**：推荐好友注册奖励
- [ ] **数据可视化**：会员分析仪表盘
- [ ] **移动端管理**：支持移动设备管理会员

---

## 10. 相关文档

- [通用CRUD需求文档](./ADMIN_MODULE_CRUD_REQUIREMENTS.md)
- [首页仪表盘需求文档](./ADMIN_HOME_REQUIREMENTS.md)
- [到期提醒需求文档](./ADMIN_EXPIRATION_REMINDER_REQUIREMENTS.md)

---***
