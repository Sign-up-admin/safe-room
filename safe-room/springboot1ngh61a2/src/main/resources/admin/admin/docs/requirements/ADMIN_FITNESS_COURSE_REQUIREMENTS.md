# 健身课程管理模块需求文档（Fitness Course Management v1.0）

> 版本：v1.0
> 更新日期：2025-11-15（计划日期）
> 适用路由：`/jianshenkecheng`
> 关联组件：`src/views/modules/jianshenkecheng/list.vue`
> 继承组件：`ModuleCrudPage.vue`

---

## 0. 设计关键词

课程体系 · 教练排课 · 会员预约 · 课程评价 · 排课冲突检测

---

## 1. 模块概述

健身课程管理模块是健身房课程安排和管理的核心模块，负责课程信息的维护、排课管理、预约处理和课程评价，为健身房的课程运营提供完整解决方案。

### 1.1 业务价值

- **课程体系管理**：构建完整的课程体系结构
- **智能排课**：避免教练和场地冲突
- **预约管理**：高效处理会员预约需求
- **评价反馈**：收集课程质量反馈
- **数据分析**：课程受欢迎程度统计

---

## 2. 功能需求

### 2.1 基础功能（继承 ModuleCrudPage）

- ✅ **课程列表**：分页展示所有课程信息
- ✅ **课程搜索**：按课程名称、类型、教练等条件筛选
- ✅ **新增课程**：录入新课程基本信息
- ✅ **编辑课程**：修改课程信息和排课时间
- ✅ **删除课程**：删除无效课程安排
- ✅ **课程详情**：查看课程完整信息和预约情况

### 2.2 排课管理

| 功能 | 说明 | 业务规则 |
| --- | --- | --- |
| 时间安排 | 设置课程开始和结束时间 | 避免时间冲突 |
| 教练分配 | 为课程指定教练 | 教练时间不能冲突 |
| 场地安排 | 关联课程场地（可选） | 场地容量限制 |
| 重复排课 | 支持周期性课程安排 | 每周/每月重复 |
| 冲突检测 | 自动检测时间和资源冲突 | 防止重复预约 |

### 2.3 预约管理集成

| 功能 | 说明 | 接口联动 |
| --- | --- | --- |
| 预约统计 | 显示课程预约人数 | 关联 `kechengyuyue` 表 |
| 容量控制 | 控制最大预约人数 | 基于场地容量 |
| 预约列表 | 查看已预约会员 | 提供预约管理入口 |
| 取消处理 | 处理预约取消和退款 | 联动退课管理 |

### 2.4 课程评价管理

| 功能 | 说明 | 数据来源 |
| --- | --- | --- |
| 评价查看 | 查看课程评价和评分 | 来自 `discussjianshenkecheng` |
| 评价统计 | 计算平均评分和评价数量 | 实时统计更新 |
| 评价回复 | 管理员回复会员评价 | 支持富文本 |
| 评价筛选 | 按评分等级筛选评价 | 好评/中评/差评 |

---

## 3. 数据字段定义

### 3.1 核心字段

| 字段名 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| `id` | number | 系统生成 | 课程唯一标识 |
| `kechengmingcheng` | text | ✅ | 课程名称 |
| `kechengleixingid` | select | ✅ | 课程类型（关联课程类型表） |
| `jianshenjiaolianid` | select | ✅ | 主教练（关联教练表） |
| `kaishishijian` | datetime | ✅ | 课程开始时间 |
| `jieshushijian` | datetime | ✅ | 课程结束时间 |
| `shangkedidian` | text | ✅ | 上课地点/场地 |
| `kechengrongliang` | number | ✅ | 课程容量（最大预约人数） |
| `kechengjiage` | number | ✅ | 课程价格 |
| `kechengjieshao` | richtext | ✅ | 课程介绍和详情 |
| `kechengtupian` | image | - | 课程图片 |

### 3.2 扩展字段

| 字段名 | 类型 | 说明 |
| --- | --- | --- |
| `nanduxiang` | select | 难度等级（入门/进阶/高手） |
| `shiyongshebei` | text | 适用设备 |
| `zhuyishixiang` | textarea | 注意事项 |
| `kechengshichang` | number | 课程时长（分钟） |
| `yuyuerenshu` | number | 已预约人数（计算字段） |
| `pingjunpingfen` | number | 平均评分（计算字段） |
| `pingjialiang` | number | 评价数量（计算字段） |

---

## 4. 业务规则

### 4.1 排课规则

- **时间连续性**：课程开始时间必须早于结束时间
- **教练唯一性**：同一教练不能在同一时间段教授多门课程
- **场地唯一性**：同一场地不能同时被多个课程使用
- **容量合理性**：课程容量不能超过场地最大承载量
- **时间合理性**：课程时长建议在30-120分钟之间

### 4.2 预约规则联动

- **容量控制**：预约人数不能超过课程容量
- **时间验证**：会员只能预约未来的课程
- **重复预约**：同一会员不能重复预约同一课程
- **状态同步**：课程信息变更时同步通知已预约会员

### 4.3 评价管理

- **评价时效**：只能在课程结束后7天内评价
- **评价维度**：支持课程内容、教练表现、场地环境等维度
- **评价权重**：不同评价来源有不同权重（会员评价权重更高）

---

## 5. 用户界面设计

### 5.1 课程列表视图

- **默认排序**：按开始时间升序
- **状态标识**：
  - 🟢 未开始
  - 🟡 进行中
  - 🔴 已结束
  - ⚫ 已取消
- **预约状态**：显示预约人数/容量比例
- **评价展示**：显示平均评分和评价数量

### 5.2 课程详情页

```
课程信息卡片：
- 课程图片 + 基本信息
- 时间安排 + 地点信息
- 教练信息 + 联系方式
- 预约人数：15/20

课程介绍：
[富文本内容]

预约列表：
[会员列表 + 预约时间 + 状态]

评价列表：
[评价卡片列表，包含评分、内容、时间]
```

### 5.3 排课日历视图（扩展）

- **日历网格**：按日期显示课程安排
- **时间轴**：显示一天内的课程时间分布
- **冲突提示**：用不同颜色标识冲突课程
- **快速操作**：支持拖拽调整时间

---

## 6. 权限控制

| 权限 | 说明 | 适用角色 |
| --- | --- | --- |
| `jianshenkecheng:list` | 查看课程列表 | 管理员、教练、前台 |
| `jianshenkecheng:create` | 新增课程 | 管理员、课程主管 |
| `jianshenkecheng:update` | 编辑课程信息 | 管理员、课程主管 |
| `jianshenkecheng:delete` | 删除课程 | 管理员（谨慎权限） |
| `jianshenkecheng:schedule` | 排课管理 | 管理员、课程主管 |
| `jianshenkecheng:view-comments` | 查看评价 | 管理员、教练 |
| `jianshenkecheng:reply-comments` | 回复评价 | 管理员、教练 |

---

## 7. 接口定义

### 7.1 基础 CRUD 接口

```typescript
GET    /jianshenkecheng/page          // 分页列表
GET    /jianshenkecheng/info/{id}     // 课程详情
POST   /jianshenkecheng/save          // 新增课程
POST   /jianshenkecheng/update        // 更新课程
POST   /jianshenkecheng/delete        // 删除课程
```

### 7.2 业务接口

```typescript
GET    /jianshenkecheng/count                     // 课程总数统计
GET    /jianshenkecheng/schedule-conflicts        // 排课冲突检查
GET    /jianshenkecheng/appointments/{id}         // 课程预约列表
GET    /jianshenkecheng/comments/{id}             // 课程评价列表
POST   /jianshenkecheng/reply-comment             // 回复评价
GET    /jianshenkecheng/statistics/{dimension}    // 课程统计数据
```

---

## 8. 数据统计与分析

### 8.1 课程统计指标

| 指标 | 计算方式 | 应用场景 |
| --- | --- | --- |
| 预约率 | 已预约人数/课程容量 | 课程受欢迎程度 |
| 到课率 | 实际到课人数/预约人数 | 课程执行质量 |
| 平均评分 | 所有评价评分的平均值 | 课程质量评估 |
| 退课率 | 退课人数/预约人数 | 课程满意度分析 |

### 8.2 教练统计

- **授课时长**：教练每月授课总时长
- **课程数量**：教练每月安排课程数量
- **学员数量**：教练每月服务学员总数
- **评价评分**：教练课程的平均评分

---

## 9. 验收标准

### 9.1 功能验收

| 验收项 | 标准 | 优先级 |
| --- | --- | --- |
| 基础CRUD | 增删改查功能正常 | 高 |
| 排课管理 | 支持时间和资源冲突检测 | 高 |
| 预约集成 | 与预约系统正确联动 | 高 |
| 评价管理 | 支持查看和回复评价 | 中 |
| 数据统计 | 提供准确的统计数据 | 中 |

### 9.2 性能验收

- **列表加载**：≤ 2秒（500条课程数据）
- **冲突检测**：≤ 1秒（检查教练和场地冲突）
- **统计计算**：≤ 5秒（大数据量统计）

### 9.3 用户体验验收

- **排课便捷性**：快速完成课程安排
- **冲突可视化**：清晰显示时间和资源冲突
- **预约管理**：方便查看和管理预约情况

---

## 10. 后续扩展

- [ ] **智能排课**：AI辅助优化排课方案
- [ ] **课程模板**：预设课程模板快速创建
- [ ] **循环排课**：支持复杂的重复排课规则
- [ ] **场地管理**：集成场地预订和维护管理
- [ ] **课程直播**：支持线上直播课程
- [ ] **会员偏好**：基于历史数据推荐课程

---

## 11. 相关文档

- [通用CRUD需求文档](./ADMIN_MODULE_CRUD_REQUIREMENTS.md)
- [课程预约需求文档](./ADMIN_COURSE_BOOKING_REQUIREMENTS.md)
- [教练管理需求文档](./ADMIN_COACH_MANAGEMENT_REQUIREMENTS.md)
- [课程评价需求文档](./ADMIN_COURSE_COMMENTS_REQUIREMENTS.md)

---***
