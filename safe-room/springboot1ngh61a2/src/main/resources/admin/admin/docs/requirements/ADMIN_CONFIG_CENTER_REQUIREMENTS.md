# 配置中心需求文档（Admin Config Center v1.0）

> 版本：v1.0  
> 更新日期：2025-11-15（计划日期）  
> 适用路由：`/config`, `/news`, `/newstype`, `/chat`  
> 关联组件：`src/views/modules/components/ModuleCrudPage.vue`

---

## 0. 设计关键词

可视化配置 · 内容管理 · 运营便捷 · 统一规范 · 实时生效

> 目标：让运营人员无需技术背景即可完成站点内容配置，包括轮播图、公告、留言等。

---

## 1. 模块概览

| 模块 | 表名 | 用途 | 权限要求 |
| --- | --- | --- | --- |
| 轮播图管理 | `config` | 管理首页轮播图、系统配置项 | 新增、查看、修改、删除 |
| 公告信息 | `news` | 发布系统公告、活动通知 | 新增、查看、修改、删除 |
| 公告分类 | `newstype` | 管理公告分类体系 | 新增、查看、修改、删除 |
| 留言反馈 | `chat` | 查看和处理用户留言、反馈 | 查看、修改、删除（无新增） |

---

## 2. 轮播图管理（Config）

### 2.1 功能说明

管理首页轮播图展示，支持图片上传、标题配置、跳转链接设置。

### 2.2 数据字段

| 字段 | 类型 | 说明 | 必填 |
| --- | --- | --- | --- |
| `id` | Long | 主键 | 是 |
| `name` | String | 配置名称/标题 | 是 |
| `value` | String | 配置值/描述 | 否 |
| `url` | String | 图片URL | 是（轮播图） |
| `addtime` | String | 添加时间 | 自动 |

### 2.3 功能需求

| 功能 | 说明 | 接口 |
| --- | --- | --- |
| 列表查询 | 支持分页、排序（按添加时间倒序） | `GET /config/list` 或 `GET /config/page` |
| 新增轮播 | 上传图片、填写标题和描述 | `POST /config/save` |
| 编辑轮播 | 修改图片、标题、描述 | `POST /config/update` |
| 删除轮播 | 支持单个/批量删除 | `POST /config/delete` |
| 图片上传 | 统一使用 `/upload/file` 接口 | - |

### 2.4 交互规范

- **图片上传**：支持拖拽上传，预览功能，限制文件大小 5MB，格式 jpg/png/webp
- **排序功能**：列表支持拖拽排序，或通过 `sort` 字段手动设置
- **预览功能**：编辑时可预览轮播效果
- **生效时间**：保存后立即生效，前台首页自动刷新

### 2.5 视觉规范

- 列表展示：缩略图（120×80px）+ 标题 + 添加时间
- 表单布局：图片上传区域 + 标题输入 + 描述输入
- 图片预览：上传后显示预览，支持重新上传

---

## 3. 公告信息管理（News）

### 3.1 功能说明

管理系统公告、活动通知等文本内容，支持富文本编辑、分类关联。

### 3.2 数据字段

| 字段 | 类型 | 说明 | 必填 |
| --- | --- | --- | --- |
| `id` | Long | 主键 | 是 |
| `biaoti` | String | 公告标题 | 是 |
| `neirong` | String | 公告内容（富文本） | 是 |
| `tupian` | String | 封面图片URL | 否 |
| `newstype` | String | 公告分类ID | 是 |
| `addtime` | String | 发布时间 | 自动 |
| `clicktime` | Integer | 点击量 | 自动 |

### 3.3 功能需求

| 功能 | 说明 | 接口 |
| --- | --- | --- |
| 列表查询 | 支持按分类筛选、搜索标题、分页 | `GET /news/list` 或 `GET /news/page` |
| 新增公告 | 富文本编辑、选择分类、上传封面 | `POST /news/save` |
| 编辑公告 | 修改内容、分类、封面 | `POST /news/update` |
| 删除公告 | 支持单个/批量删除 | `POST /news/delete` |
| 富文本编辑 | 使用 Vue Quill 或类似组件 | - |

### 3.4 交互规范

- **富文本编辑**：支持标题、段落、列表、链接、图片插入
- **分类选择**：下拉选择公告分类，支持快速创建新分类
- **封面图片**：支持上传或从已上传图片中选择
- **发布状态**：支持草稿/发布状态切换（如后端支持）

### 3.5 视觉规范

- 列表展示：封面图（80×60px）+ 标题 + 分类 + 发布时间
- 编辑界面：标题输入 + 分类选择 + 富文本编辑器 + 封面上传
- 内容预览：支持实时预览效果

---

## 4. 公告分类管理（Newstype）

### 4.1 功能说明

管理公告分类体系，支持分类的增删改查。

### 4.2 数据字段

| 字段 | 类型 | 说明 | 必填 |
| --- | --- | --- | --- |
| `id` | Long | 主键 | 是 |
| `leixing` | String | 分类名称 | 是 |
| `addtime` | String | 添加时间 | 自动 |

### 4.3 功能需求

| 功能 | 说明 | 接口 |
| --- | --- | --- |
| 列表查询 | 显示所有分类，支持搜索 | `GET /newstype/list` |
| 新增分类 | 输入分类名称 | `POST /newstype/save` |
| 编辑分类 | 修改分类名称 | `POST /newstype/update` |
| 删除分类 | 删除前检查是否有关联公告 | `POST /newstype/delete` |

### 4.4 交互规范

- **删除校验**：删除分类前需检查是否有关联公告，如有则提示不可删除
- **分类使用统计**：列表显示每个分类下的公告数量
- **快速创建**：在公告编辑页面支持快速创建新分类

---

## 5. 留言反馈管理（Chat）

### 5.1 功能说明

查看和处理用户留言、反馈，支持回复、标记已处理。

### 5.2 数据字段

| 字段 | 类型 | 说明 | 必填 |
| --- | --- | --- | --- |
| `id` | Long | 主键 | 是 |
| `userid` | Long | 用户ID | 是 |
| `ask` | String | 用户留言内容 | 是 |
| `reply` | String | 管理员回复 | 否 |
| `isreply` | Integer | 是否已回复（0/1） | 自动 |
| `addtime` | String | 留言时间 | 自动 |

### 5.3 功能需求

| 功能 | 说明 | 接口 |
| --- | --- | --- |
| 列表查询 | 支持按回复状态筛选、搜索内容、分页 | `GET /chat/list` 或 `GET /chat/page` |
| 查看详情 | 查看完整留言内容和用户信息 | `GET /chat/info/{id}` |
| 回复留言 | 编辑回复内容，自动更新 `isreply` | `POST /chat/update` |
| 删除留言 | 支持单个/批量删除 | `POST /chat/delete` |

### 5.4 交互规范

- **状态筛选**：支持筛选"未回复"、"已回复"、"全部"
- **回复功能**：在列表或详情页直接回复，保存后自动标记为已回复
- **用户信息**：显示留言用户的昵称、账号等信息（需关联用户表）
- **时间显示**：显示留言时间和回复时间

### 5.5 视觉规范

- 列表展示：用户信息 + 留言内容（截断）+ 回复状态 + 时间
- 状态标识：未回复显示红色标识，已回复显示绿色标识
- 回复区域：支持富文本编辑，显示回复历史

---

## 6. 通用功能规范

### 6.1 权限控制

- 所有操作需通过 `isAuth(tableName, action)` 检查权限
- 权限键：`'Add'`, `'View'`, `'Edit'`, `'Delete'`
- 留言反馈模块无"新增"权限（用户在前台提交）

### 6.2 图片上传

- 统一使用 `/upload/file` 接口
- 限制文件大小：5MB
- 支持格式：jpg, jpeg, png, webp
- 上传后返回完整URL，存储到对应字段

### 6.3 数据校验

- 必填字段前端校验，后端二次校验
- 图片URL格式校验
- 富文本内容长度限制（建议 10000 字符）

### 6.4 操作日志

- 所有新增/编辑/删除操作写入操作日志
- 日志包含：操作人、操作时间、操作类型、操作内容

---

## 7. 响应式策略

| 终端 | 处理 |
| --- | --- |
| ≥1200px | 列表和表单正常显示 |
| 992-1199px | 列表可横向滚动，表单适配 |
| <992px | 建议使用桌面端，移动端仅查看 |

---

## 8. 验收标准

| 维度 | 标准 |
| --- | --- |
| 功能完整性 | 所有CRUD操作正常，权限控制正确 |
| 图片上传 | 上传成功、预览正常、URL正确存储 |
| 富文本编辑 | 内容保存正确、格式不丢失 |
| 数据一致性 | 分类删除前校验关联数据 |
| 用户体验 | 操作流畅，错误提示清晰 |

---

## 9. 待办/扩展

- [ ] 轮播图支持设置生效时间（定时发布）
- [ ] 公告支持定时发布功能
- [ ] 留言反馈支持邮件通知管理员
- [ ] 公告支持置顶功能
- [ ] 轮播图支持点击统计

---

