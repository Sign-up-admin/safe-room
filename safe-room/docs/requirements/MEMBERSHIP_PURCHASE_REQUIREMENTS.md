---
title: MEMBERSHIP PURCHASE REQUIREMENTS
version: v1.0.0
last_updated: 2025-11-16
status: active
category: requirements
---# 会员卡购买页面需求文档（Membership Purchase v1.0）

> 版本：v1.0  
> 更新日期：2025-11-15  
> 适用路由：`/index/huiyuankagoumai`  
> 关联模块：`moduleKey = 'huiyuankagoumai'`

---

## 0. 设计关键词

步骤化购买 · 价格透明 · 优惠叠加 · 安全信任 · 结果可追踪

---

## 1. 页面结构

| 顺序 | 区块 | 目的 |
| --- | --- | --- |
| ① | 购买流程步骤条 | 步骤：选择卡种 → 填写信息 → 支付方式 → 结果 |
| ② | 订单信息卡 | 展示所选卡种、价格、有效期、权益摘要 |
| ③ | 用户信息表单 | 填写个人信息、联系方式、发票需求 |
| ④ | 优惠与支付 | 优惠券、会员折扣、支付方式选择 |
| ⑤ | 安全提示 & 协议 | 展示支付安全、协议勾选 |
| ⑥ | 结果反馈 | 成功/失败结果页 |

---

## 2. 视觉规范

- 步骤条使用金色光轨，当前步骤高亮
- 订单信息卡使用玻璃拟物 + 票据撕口设计
- 安全提示使用盾牌图标 + 光效
- 成功结果展示粒子烟花 + 动态编号

---

## 3. 功能模块

### 3.1 卡种确认

- 从 `huiyuanka` 页面携带 `cardId`，若无则提供卡种选择下拉
- 展示卡片名称、价格、优惠、有效期
- 支持切换卡种，实时刷新订单信息

### 3.2 用户信息表单

| 字段 | 说明 |
| --- | --- |
| 姓名/电话 | 默认当前账号信息，可编辑 |
| 身份证/邮箱 | 可选，用于发票/保险 |
| 发票需求 | 普票/专票，需额外字段 |
| 备注 | 100 字以内 |

### 3.3 优惠与支付

- 优惠券选择：来自 `/coupon/list`（若有）
- 会员折扣：不同等级折扣提示
- 支付方式：支付宝、微信、银联、余额
- 支付结果：调用统一支付接口（与 `pay` 页联动）

### 3.4 协议 & 安全

- 勾选《会员协议》《隐私政策》
- 安全提示：支付失败处理、退款政策

### 3.5 结果页

- 成功：展示会员卡编号、有效期、开卡指南
- 失败：提供错误原因、重新支付按钮、客服入口

---

## 4. 交互与动效

| 交互 | 规范 |
| --- | --- |
| 步骤切换 | 使用 GSAP 横向过渡，顶部进度动态增长 |
| 订单卡 | Hover 显示权益详情，切换卡种时炫光过渡 |
| 优惠券 | 展开折叠动画，选择后订单金额更新 |
| 支付按钮 | 点击后显示“正在拉起支付”呼吸灯 |
| 结果页 | 成功动画 ≤ 1s，支持复制编号 |

---

## 5. 响应式策略

| 终端 | 处理 |
| --- | --- |
| PC | 步骤横向展示，信息卡固定在右侧 |
| Pad | 步骤改为顶部分布，信息卡下沉 |
| Mobile | 使用全屏步骤面板，订单卡固定在底部抽屉 |

---

## 6. 技术实现

| 领域 | 实现 |
| --- | --- |
| 数据 | `getModuleService('huiyuankagoumai')` + `huiyuanka` |
| 支付 | 调用 `pay` 页面接口（或统一支付服务） |
| 状态 | Pinia（订单草稿、支付状态） |
| 动画 | GSAP、Lottie（成功动画） |

---

## 7. 开发交付件

1. `src/pages/huiyuankagoumai/list.vue` 重构
2. 组件：`PurchaseStepper.vue`, `OrderCard.vue`, `PaymentSelector.vue`
3. `useMembershipPurchase.ts`
4. 测试：金额计算、优惠叠加、支付回调

---

## 8. 验收标准

| 维度 | 标准 |
| --- | --- |
| 功能 | 从选择卡种到支付完成流程可通 |
| 金额 | 所有优惠叠加计算正确，金额与支付一致 |
| 动效 | 步骤切换顺滑，结果动画符合设计 |
| 安全 | 支付失败有兜底提示，敏感信息加密传输 |
| 可访问性 | 表单控件可键盘操作，步骤提示可读 |

---

## 9. 备注

- 需考虑多种支付失败场景（超时、取消）
- 支持生成电子发票的扩展点


