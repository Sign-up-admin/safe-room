# æµ‹è¯•è´¨é‡ç›‘æ§ç³»ç»Ÿ

## æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå…¨é¢çš„Spring Booté¡¹ç›®æµ‹è¯•è´¨é‡ç›‘æ§ç³»ç»Ÿï¼Œæä¾›äº†è‡ªåŠ¨åŒ–çš„æµ‹è¯•æ‰§è¡Œã€è¦†ç›–ç‡åˆ†æã€å¥åº·åº¦è¯„ä¼°å’Œè¶‹åŠ¿ç›‘æ§åŠŸèƒ½ã€‚

## ğŸš€ ä¸»è¦ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½

1. **å¢å¼ºçš„CI/CDå·¥ä½œæµ**
   - è‡ªåŠ¨æµ‹è¯•æ‰§è¡Œå’Œå¤±è´¥é˜»æ–­
   - è¦†ç›–ç‡é˜ˆå€¼æ£€æŸ¥å’Œè´¨é‡é—¨ç¦
   - è¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ

2. **è´¨é‡é—¨ç¦ç³»ç»Ÿ**
   - ä¸¥æ ¼çš„æµ‹è¯•å¤±è´¥æ£€æŸ¥ï¼ˆ0å®¹å¿ï¼‰
   - è¦†ç›–ç‡é˜ˆå€¼éªŒè¯ï¼ˆLine: 65%, Branch: 45%, Controller: 30%, Service: 60%ï¼‰
   - è‡ªåŠ¨æ„å»ºé˜»æ–­æœºåˆ¶

3. **HTMLæµ‹è¯•æŠ¥å‘Š**
   - è¯¦ç»†çš„æµ‹è¯•æ‰§è¡Œç»“æœ
   - å¤±è´¥åŸå› å’Œå †æ ˆè·Ÿè¸ªåˆ†æ
   - äº¤äº’å¼å›¾è¡¨å’Œè¶‹åŠ¿å¯è§†åŒ–

4. **è¦†ç›–ç‡åˆ†æå’ŒæŠ¥å‘Š**
   - å…¨é¢çš„JaCoCoè¦†ç›–ç‡åˆ†æ
   - åŒ…çº§åˆ«å’Œç±»çº§åˆ«çš„è¯¦ç»†æŠ¥å‘Š
   - è¦†ç›–ç‡è¶‹åŠ¿å›¾è¡¨

5. **æµ‹è¯•å¥åº·åº¦ä»ªè¡¨æ¿**
   - ç»¼åˆå¥åº·è¯„åˆ†ï¼ˆ0-100ï¼‰
   - å®æ—¶è­¦æŠ¥å’Œå»ºè®®
   - æ€§èƒ½æŒ‡æ ‡ç›‘æ§

6. **è¶‹åŠ¿åˆ†æ**
   - å†å²æ•°æ®å­˜å‚¨å’Œåˆ†æ
   - çº¿æ€§å›å½’è¶‹åŠ¿é¢„æµ‹
   - è¦†ç›–ç‡æ”¹è¿›å»ºè®®

## ğŸ“ æ–‡ä»¶ç»“æ„

```
â”œâ”€â”€ .github/workflows/
â”‚   â”œâ”€â”€ backend-coverage.yml          # åç«¯æµ‹è¯•å’Œè¦†ç›–ç‡æ£€æŸ¥
â”‚   â”œâ”€â”€ ci-cd.yml                     # å®Œæ•´çš„CI/CDæµæ°´çº¿
â”‚   â”œâ”€â”€ test-quality-gate.yml         # è´¨é‡é—¨ç¦æ£€æŸ¥
â”‚   â””â”€â”€ dashboard-publish.yml         # ä»ªè¡¨æ¿å‘å¸ƒå·¥ä½œæµ
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ test-quality-gate.ps1         # PowerShellè´¨é‡é—¨ç¦è„šæœ¬
â”‚   â”œâ”€â”€ test-quality-gate.sh          # Linuxè´¨é‡é—¨ç¦è„šæœ¬
â”‚   â”œâ”€â”€ generate-html-test-report.js  # HTMLæµ‹è¯•æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ generate-coverage-report.js   # HTMLè¦†ç›–ç‡æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ collect-test-health-metrics.js # å¥åº·æŒ‡æ ‡æ”¶é›†å™¨
â”‚   â”œâ”€â”€ generate-test-health-dashboard.js # å¥åº·ä»ªè¡¨æ¿ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ generate-coverage-trend-report.js # è¶‹åŠ¿åˆ†ææŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â””â”€â”€ coverage-trend-generator.js   # è¦†ç›–ç‡è¶‹åŠ¿ç”Ÿæˆå™¨ï¼ˆå¢å¼ºç‰ˆï¼‰
â”œâ”€â”€ springboot1ngh61a2/
â”‚   â”œâ”€â”€ .test-config.json             # æµ‹è¯•é…ç½®å’Œé˜ˆå€¼
â”‚   â””â”€â”€ coverage-history/             # è¦†ç›–ç‡å†å²æ•°æ®å­˜å‚¨
â””â”€â”€ TEST_QUALITY_MONITORING_README.md # æœ¬æ–‡æ¡£
```

## ğŸ› ï¸ å®‰è£…å’Œé…ç½®

### 1. ç¯å¢ƒè¦æ±‚

- Node.js 18+
- Java 21
- Maven 3.8+
- PostgreSQL (ç”¨äºæµ‹è¯•)

### 2. ä¾èµ–å®‰è£…

```bash
# å®‰è£…Node.jsä¾èµ–
npm install xml2js

# ç¡®ä¿Mavenå’ŒJavaå¯ç”¨
mvn --version
java --version
```

### 3. é…ç½®é˜ˆå€¼

ç¼–è¾‘ `springboot1ngh61a2/.test-config.json` æ–‡ä»¶æ¥è°ƒæ•´è´¨é‡é˜ˆå€¼ï¼š

```json
{
  "testFailureThreshold": 0,
  "coverageThresholds": {
    "line": 65,
    "branch": 45,
    "controller": 30,
    "service": 60
  },
  "maxTestDuration": 1800
}
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æœ¬åœ°è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶
./scripts/run-tests.ps1

# è¿è¡Œè´¨é‡é—¨ç¦æ£€æŸ¥
./scripts/test-quality-gate.ps1

# ç”ŸæˆHTMLæµ‹è¯•æŠ¥å‘Š
node scripts/generate-html-test-report.js --input springboot1ngh61a2/target/surefire-reports

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
node scripts/generate-coverage-report.js --input springboot1ngh61a2/target/site/jacoco/jacoco.xml

# æ”¶é›†å¥åº·æŒ‡æ ‡
node scripts/collect-test-health-metrics.js

# ç”Ÿæˆå¥åº·ä»ªè¡¨æ¿
node scripts/generate-test-health-dashboard.js
```

### 2. CI/CDé›†æˆ

ç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨ä»¥ä¸‹æƒ…å†µä¸‹è¿è¡Œï¼š

- **æ¨é€** åˆ° `main` æˆ– `develop` åˆ†æ”¯
- **æ‹‰å–è¯·æ±‚** åˆ° `main` æˆ– `develop` åˆ†æ”¯
- **æ¯æ—¥å®šæ—¶** è¿è¡Œä»ªè¡¨æ¿æ›´æ–°

### 3. æŸ¥çœ‹æŠ¥å‘Š

#### GitHub Actions Artifacts
æ¯æ¬¡CI/CDè¿è¡Œåï¼Œå¯ä»¥åœ¨Actionsé¡µé¢ä¸‹è½½ä»¥ä¸‹æŠ¥å‘Šï¼š
- `html-reports-{run_id}.zip` - åŒ…å«æ‰€æœ‰HTMLæŠ¥å‘Š
- `metrics-data-{run_id}.zip` - åŸå§‹æŒ‡æ ‡æ•°æ®

#### GitHub Pagesä»ªè¡¨æ¿
è®¿é—® `https://{username}.github.io/{repo-name}/` æŸ¥çœ‹å®æ—¶ä»ªè¡¨æ¿

## ğŸ“Š æŒ‡æ ‡è¯´æ˜

### æµ‹è¯•æ‰§è¡ŒæŒ‡æ ‡
- **æ€»æµ‹è¯•æ•°**: æ‰§è¡Œçš„æµ‹è¯•ç”¨ä¾‹æ€»æ•°
- **é€šè¿‡ç‡**: æµ‹è¯•æˆåŠŸçš„ç™¾åˆ†æ¯”
- **å¤±è´¥æ•°**: å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹æ•°
- **å¹³å‡æ‰§è¡Œæ—¶é—´**: æ¯ä¸ªæµ‹è¯•çš„å¹³å‡æ‰§è¡Œæ—¶é—´

### è¦†ç›–ç‡æŒ‡æ ‡
- **è¡Œè¦†ç›–ç‡**: æ‰§è¡Œçš„ä»£ç è¡Œç™¾åˆ†æ¯”
- **åˆ†æ”¯è¦†ç›–ç‡**: æ‰§è¡Œçš„åˆ†æ”¯ç™¾åˆ†æ¯”
- **æ–¹æ³•è¦†ç›–ç‡**: æ‰§è¡Œçš„æ–¹æ³•ç™¾åˆ†æ¯”
- **ç±»è¦†ç›–ç‡**: æ‰§è¡Œçš„ç±»ç™¾åˆ†æ¯”

### å¥åº·è¯„åˆ†è®¡ç®—
```
å¥åº·è¯„åˆ† = (è¡Œè¦†ç›–ç‡ Ã— 0.3) + (åˆ†æ”¯è¦†ç›–ç‡ Ã— 0.2) + (æ–¹æ³•è¦†ç›–ç‡ Ã— 0.2) + (ç±»è¦†ç›–ç‡ Ã— 0.1) + (æµ‹è¯•é€šè¿‡ç‡ Ã— 0.2)
```

### è´¨é‡é˜ˆå€¼
- ğŸŸ¢ **ä¼˜ç§€**: â‰¥80åˆ†
- ğŸŸ¡ **è‰¯å¥½**: 60-79åˆ†
- ğŸ”´ **éœ€æ”¹è¿›**: <60åˆ†

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### è¦†ç›–ç‡é˜ˆå€¼è°ƒæ•´

```json
{
  "coverageThresholds": {
    "line": 70,        // è¡Œè¦†ç›–ç‡ç›®æ ‡
    "branch": 50,      // åˆ†æ”¯è¦†ç›–ç‡ç›®æ ‡
    "controller": 35,  // æ§åˆ¶å™¨è¦†ç›–ç‡ç›®æ ‡
    "service": 65      // æœåŠ¡è¦†ç›–ç‡ç›®æ ‡
  }
}
```

### å·¥ä½œæµè§¦å‘æ¡ä»¶

ç¼–è¾‘ `.github/workflows/backend-coverage.yml` çš„ `on` éƒ¨åˆ†ï¼š

```yaml
on:
  push:
    branches: [ main, develop, feature/* ]
  pull_request:
    branches: [ main, develop ]
```

## ğŸ“ˆ è¶‹åŠ¿åˆ†æ

### æ•°æ®å­˜å‚¨
- å†å²æ•°æ®å­˜å‚¨åœ¨ `springboot1ngh61a2/coverage-history/`
- æ¯ä¸ªæ„å»ºç”Ÿæˆä¸€ä¸ªJSONæ–‡ä»¶
- è‡ªåŠ¨æ¸…ç†30å¤©å‰çš„å†å²æ•°æ®

### è¶‹åŠ¿æŒ‡æ ‡
- **çº¿æ€§å›å½’**: è®¡ç®—è¦†ç›–ç‡å˜åŒ–è¶‹åŠ¿
- **æ³¢åŠ¨æ€§**: è¡¡é‡è¦†ç›–ç‡ç¨³å®šæ€§
- **ç½®ä¿¡åº¦**: è¶‹åŠ¿é¢„æµ‹çš„å¯é æ€§

### é¢„æµ‹åŠŸèƒ½
- åŸºäºå†å²æ•°æ®é¢„æµ‹æœªæ¥è¦†ç›–ç‡
- ä¼°ç®—è¾¾åˆ°ç›®æ ‡æ‰€éœ€çš„æ—¶é—´
- è¯†åˆ«æ”¹è¿›æœºä¼š

## ğŸš¨ è­¦æŠ¥ç³»ç»Ÿ

### è­¦æŠ¥çº§åˆ«
- ğŸ”´ **ä¸¥é‡**: ç«‹å³éœ€è¦å¤„ç†çš„é—®é¢˜
- ğŸŸ  **é«˜**: é‡è¦é—®é¢˜
- ğŸŸ¡ **ä¸­**: éœ€è¦æ³¨æ„çš„é—®é¢˜
- ğŸ”µ **ä½**: å»ºè®®æ”¹è¿›

### å¸¸è§è­¦æŠ¥
- æµ‹è¯•å¤±è´¥è¶…è¿‡é˜ˆå€¼
- è¦†ç›–ç‡ä½äºç›®æ ‡
- æ„å»ºé”™è¯¯
- æ€§èƒ½å›å½’

## ğŸ”„ ç»´æŠ¤å’Œæ›´æ–°

### å®šæœŸç»´æŠ¤
1. **æ¯å‘¨**: æ£€æŸ¥ä»ªè¡¨æ¿è¶‹åŠ¿
2. **æ¯æœˆ**: å®¡æŸ¥å’Œè°ƒæ•´é˜ˆå€¼
3. **æ¯å­£åº¦**: å…¨é¢çš„è´¨é‡è¯„ä¼°

### æ•…éšœæ’é™¤

#### æµ‹è¯•å¤±è´¥
```bash
# æ£€æŸ¥æµ‹è¯•æ—¥å¿—
tail -f springboot1ngh61a2/target/surefire-reports/*.txt

# è¿è¡Œå•ä¸ªæµ‹è¯•
mvn test -Dtest=TestClassName
```

#### è¦†ç›–ç‡é—®é¢˜
```bash
# ç”Ÿæˆè¯¦ç»†è¦†ç›–ç‡æŠ¥å‘Š
mvn jacoco:report

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š
open springboot1ngh61a2/target/site/jacoco/index.html
```

#### è„šæœ¬é—®é¢˜
```bash
# æ£€æŸ¥Node.jsä¾èµ–
npm list xml2js

# éªŒè¯è„šæœ¬æƒé™
ls -la scripts/
```

## ğŸ¤ è´¡çŒ®

### æŠ¥å‘Šé—®é¢˜
ä½¿ç”¨GitHub IssuesæŠ¥å‘Šbugæˆ–å»ºè®®æ”¹è¿›

### å¼€å‘æ–°åŠŸèƒ½
1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. å‘èµ·Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚

## ğŸ“ æ”¯æŒ

å¦‚éœ€å¸®åŠ©ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£
2. æ£€æŸ¥GitHub Issues
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

*æœ€åæ›´æ–°: 2025å¹´11æœˆ17æ—¥*
